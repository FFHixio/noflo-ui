{"version":3,"sources":["webpack:///./node_modules/tv4/tv4.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./node_modules/events/events.js","webpack:///../src/JournalStore.ts","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/fbp/lib/fbp.js","webpack:///./node_modules/fbp/lib/serialize.js","webpack:///./node_modules/path-browserify/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack:///../src/index.ts","webpack:///./node_modules/clone/clone.js","webpack:///../src/Journal.ts","webpack:///../src/MemoryJournalStore.ts","webpack:///../src/Graph.ts","webpack:///../src/Platform.ts","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/fbp/lib/index.js","webpack:///./node_modules/object-assign/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js"],"names":["hasOwnProperty","hasDontEnumBug","dontEnums","dontEnumsLength","Object","keys","prototype","toString","propertyIsEnumerable","length","obj","TypeError","result","prop","call","push","i","create","F","o","arguments","Error","Array","isArray","vArg","indexOf","searchElement","this","t","len","n","Number","Infinity","Math","floor","abs","k","max","isFrozen","key","random","e","uriTemplateGlobalModifiers","uriTemplateSuffices","notReallyPercentEncode","string","encodeURI","replace","doubleEncoded","substring","uriTemplateSubstitution","spec","modifier","charAt","separator","prefix","shouldEscape","showVariables","trimEmptyString","varNames","varList","split","varSpecs","varSpecMap","varName","truncate","parts","parseInt","suffices","varSpec","name","subFunction","valueFunction","startIndex","value","j","encodeURIComponent","first","substitution","UriTemplate","template","textParts","shift","prefixes","substitutions","part","remainder","funcs","concat","fill","fillFromObject","ValidatorContext","parent","collectMultiple","errorReporter","checkRecursive","trackUnknownProperties","missing","missingMap","formatValidators","schemas","errors","handleError","collectError","returnError","scanned","scannedFrozen","scannedFrozenSchemas","scannedFrozenValidationErrors","validatedSchemasKey","validationErrorsKey","knownPropertyPaths","unknownPropertyPaths","defaultErrorReporter","definedKeywords","slice","recursiveCompare","A","B","undefined","defineKeyword","keyword","keywordFunction","createError","code","messageParams","dataPath","schemaPath","subErrors","data","schema","error","ValidationError","message","prefixErrors","prefixWith","banUnknownProperties","unknownPath","ErrorCodes","UNKNOWN_PROPERTY","path","addFormat","format","validator","resolveRefs","urlHistory","CIRCULAR_REFERENCE","urls","join","getSchema","url","baseUrl","fragment","pointerPath","decodeURIComponent","component","searchSchemas","id","testUrl","isTrustedUrl","uri","getDocumentUri","addSchema","normSchema","getSchemaMap","map","getSchemaUris","filterRegExp","list","test","getMissingUris","dropSchemas","reset","validateAll","dataPathParts","schemaPathParts","dataPointerPath","topLevel","frozenIndex","startErrorCount","scannedFrozenSchemaIndex","scannedSchemasIndex","schemaIndex","frozenSchemaIndex","defineProperty","configurable","errorCount","validateBasic","validateNumeric","validateString","validateArray","validateObject","validateCombinations","validateHypermedia","validateFormat","validateDefinedKeywords","pop","dataPart","schemaPart","errorMessage","FORMAT_CUSTOM","validationFunctions","func","KEYWORD_CUSTOM","validateType","validateEnum","type","dataType","allowedTypes","INVALID_TYPE","expected","ENUM_MISMATCH","JSON","stringify","validateMultipleOf","validateMinMax","validateNaN","CLOSE_ENOUGH_LOW","pow","CLOSE_ENOUGH_HIGH","parseURI","m","String","match","href","protocol","authority","host","hostname","port","pathname","search","hash","resolveUrl","base","input","lastIndexOf","output","p","baseUri","language","errorMessages","languages","messageTemplate","ErrorMessagesDefault","params","whole","subValue","multipleOf","divisibleBy","NUMBER_MULTIPLE_OF","minimum","NUMBER_MINIMUM","exclusiveMinimum","NUMBER_MINIMUM_EXCLUSIVE","maximum","NUMBER_MAXIMUM","exclusiveMaximum","NUMBER_MAXIMUM_EXCLUSIVE","isNaN","NUMBER_NOT_A_NUMBER","validateStringLength","validateStringPattern","minLength","STRING_LENGTH_SHORT","maxLength","STRING_LENGTH_LONG","pattern","RegExp","regexp","body","flags","literal","STRING_PATTERN","validateArrayLength","validateArrayUniqueItems","validateArrayItems","minItems","ARRAY_LENGTH_SHORT","maxItems","ARRAY_LENGTH_LONG","uniqueItems","ARRAY_UNIQUE","match1","match2","items","additionalItems","ARRAY_ADDITIONAL_ITEMS","validateObjectMinMaxProperties","validateObjectRequiredProperties","validateObjectProperties","validateObjectDependencies","minProperties","OBJECT_PROPERTIES_MINIMUM","propertyCount","maxProperties","OBJECT_PROPERTIES_MAXIMUM","required","OBJECT_REQUIRED","keyPointerPath","foundMatch","properties","patternProperties","patternKey","additionalProperties","OBJECT_ADDITIONAL_PROPERTIES","dependencies","depKey","dep","OBJECT_DEPENDENCY_KEY","requiredKey","validateAllOf","validateAnyOf","validateOneOf","validateNot","allOf","subSchema","anyOf","oldUnknownPropertyPaths","oldKnownPropertyPaths","errorAtEnd","knownKey","unknownKey","ANY_OF_MISSING","oneOf","validIndex","ONE_OF_MULTIPLE","index1","index2","ONE_OF_MISSING","not","oldErrorCount","notErrors","NOT_PASSED","links","ldo","rel","allPresent","ErrorCodeLookup","err","stack","stacktrace","constructor","dataPrefix","schemaPrefix","tv4","createApi","currentLanguage","customErrorReporter","globalContext","api","setErrorReporter","reporter","apply","addLanguage","messageMap","rootCode","freshApi","validate","def","context","valid","validateResult","validateMultiple","defineError","codeName","codeNumber","defaultMessage","langCode","errorCodes","options","buf","offset","rnds","rng","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","init","module","exports","once","emitter","Promise","resolve","reject","eventListener","errorListener","removeListener","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","count","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","enumerable","get","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","handler","listeners","addListener","on","prependListener","prependOnceListener","position","originalListener","index","spliceOne","off","removeAllListeners","rawListeners","eventNames","byteLength","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","Arr","_byteLength","curByte","revLookup","charCodeAt","fromByteArray","uint8","extraBytes","len2","encodeChunk","lookup","Uint8Array","start","end","num","read","buffer","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","s","NaN","write","c","rt","log","LN2","peg$SyntaxError","found","location","captureStackTrace","child","ctor","peg$subclass","SyntaxError","parse","peg$result","nodes","parser","peg$FAILED","peg$startRuleFunctions","peg$parsestart","peg$startRuleFunction","peg$c0","getResult","peg$c1","peg$c2","description","peg$c3","peg$c4","peg$c5","peg$c6","peg$c7","node","pub","registerInports","peg$c8","peg$c9","peg$c10","registerOutports","peg$c11","peg$c12","peg$c13","defaultInPort","peg$c14","peg$c15","peg$c16","defaultOutPort","peg$c17","annotation","registerAnnotation","peg$c18","edges","registerEdges","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","x","y","peg$c28","proc","makeInPort","makeOutPort","peg$c29","peg$c30","peg$c31","peg$c32","peg$c33","iip","peg$c34","peg$c35","peg$c36","peg$c37","peg$c38","peg$c39","peg$c40","makeName","peg$c41","comp","addNode","peg$c42","addAnonymousNode","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","meta","peg$c50","peg$c51","peg$c52","peg$c53","peg$c54","peg$c55","peg$c56","peg$c57","peg$c58","peg$c59","peg$c60","portname","portindex","caseSensitive","toLowerCase","peg$c61","peg$c62","peg$c63","peg$c64","peg$c65","peg$c66","peg$c67","peg$c68","peg$c69","peg$c70","peg$c71","peg$c72","peg$c73","peg$c74","peg$c75","peg$c76","peg$c77","peg$c78","peg$c79","peg$c80","peg$c81","peg$c82","peg$c83","peg$c84","peg$c85","peg$c86","peg$c87","peg$c88","peg$c89","peg$c90","peg$c91","peg$c92","peg$c93","peg$c94","peg$c95","peg$c96","peg$c97","peg$c98","peg$c99","peg$c100","head","peg$c101","tail","peg$c102","members","peg$c103","peg$c104","v","peg$c105","peg$c106","values","peg$c107","peg$c108","parseFloat","text","peg$c109","peg$c110","peg$c111","peg$c112","peg$c113","peg$c114","peg$c115","peg$c116","peg$c117","peg$c118","peg$c119","peg$c120","chars","peg$c121","peg$c122","peg$c123","peg$c124","peg$c125","peg$c126","peg$c127","peg$c128","peg$c129","peg$c130","peg$c131","peg$c132","peg$c133","peg$c134","peg$c135","peg$c136","peg$c137","peg$c138","peg$c139","peg$c140","peg$c141","peg$c142","peg$c143","peg$c144","digits","fromCharCode","peg$c145","sequence","peg$c146","peg$c147","peg$c148","peg$c149","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","seenCR","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","peg$computeLocation","peg$computePosDetails","pos","ch","details","startPos","endPos","startPosDetails","endPosDetails","peg$fail","peg$buildException","sort","a","b","splice","cleanupExpected","expectedDescs","hex","toUpperCase","stringEscape","buildMessage","s0","s1","s2","peg$parseline","s3","s4","s5","s6","s7","s9","peg$parse_","substr","peg$parsenode","peg$parseportName","peg$parseLineTerminator","peg$parseannotation","peg$parsenewline","peg$parsecomment","peg$parseconnection","peg$parseanychar","peg$parsesource","peg$parsedestination","peg$parsebridge","peg$parseoutport","peg$parseiip","peg$parseinport","peg$parseport__","peg$parse__port","peg$parsenodeWithComponent","peg$parseiipchar","peg$parseJSON_text","peg$parsenodeNameAndComponent","peg$parsenodeName","peg$parsenodeComponent","peg$parsecomponent","peg$parsecompMeta","peg$parse__","peg$parseport","peg$parseportIndex","peg$parsews","peg$parsevalue","peg$parsebegin_array","peg$parsebegin_object","peg$parseend_array","peg$parseend_object","peg$parsename_separator","peg$parsevalue_separator","peg$parsefalse","peg$parsenull","peg$parsetrue","peg$parseobject","peg$parsearray","peg$parsenumber","peg$parsestring","peg$parsemember","peg$parseminus","peg$parseint","peg$parsefrac","peg$parseexp","peg$parsedecimal_point","peg$parsedigit1_9","peg$parsee","peg$parseplus","peg$parseDIGIT","peg$parsezero","peg$parsequotation_mark","peg$parsechar","s8","peg$parseunescaped","peg$parseescape","peg$parseHEXDIG","inports","outports","groups","validateContents","graph","processes","forEach","portDef","process","connections","edge","tgt","src","nodeName","metadata","item","anonymousIndexes","anonymousNodeNames","componentName","processEdges","validateSchema","validation","flatten","array","isShallow","makePort","defaultPort","environment","flats","grouped","l","conn","getInOutName","getName","inPort","namedComponents","outPort","ref","ref1","ref2","srcName","srcPort","srcProcess","tgtName","tgtPort","tgtProcess","label","propval","normalizeArray","allowAboveRoot","up","last","filter","xs","f","res","resolvedPath","resolvedAbsolute","cwd","normalize","isAbsolute","trailingSlash","paths","relative","from","to","trim","fromParts","toParts","min","samePartsLength","outputParts","sep","delimiter","dirname","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","str","g","window","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","__proto__","encodingOrOffset","allocUnsafe","ArrayBuffer","byteOffset","fromArrayLike","fromArrayBuffer","encoding","isEncoding","actual","fromString","isBuffer","checked","val","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","Symbol","species","allocUnsafeSlow","_isBuffer","compare","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","out","toHex","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","stringtrim","base64clean","dst","_instanceof","nativeMap","nativeSet","nativePromise","Map","_","Set","clone","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","_clone","proto","then","__isArray","__isRegExp","source","__getRegExpFlags","lastIndex","__isDate","Date","getTime","keyChild","valueChild","entryChild","add","attrs","getOwnPropertyDescriptor","symbols","symbol","descriptor","allPropertyNames","propertyName","__objToStr","re","ignoreCase","multiline","clonePrototype","entry","setMeta","byteToHex","uuid","serialize","propIsEnumerable","toObject","assign","test1","test2","test3","letter","shouldUseNative","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","version","versions","binding","chdir","umask","getRandomValues","crypto","msCrypto","rnds8"],"mappings":"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","file":"vendors~backend~ui.a9cc9b5f441b78bc358f.min.js","sourcesContent":["/*\r\nAuthor: Geraint Luff and others\r\nYear: 2013\r\n\r\nThis code is released into the \"public domain\" by its author(s).  Anybody may use, alter and distribute the code without restriction.  The author makes no guarantees, and takes no liability of any kind for use of this code.\r\n\r\nIf you find a bug or make an improvement, it would be courteous to let the author know, but it is not compulsory.\r\n*/\r\n(function (global, factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([], factory);\r\n  } else if (typeof module !== 'undefined' && module.exports){\r\n    // CommonJS. Define export.\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.tv4 = factory();\r\n  }\r\n}(this, function () {\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FObject%2Fkeys\r\nif (!Object.keys) {\r\n\tObject.keys = (function () {\r\n\t\tvar hasOwnProperty = Object.prototype.hasOwnProperty,\r\n\t\t\thasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\r\n\t\t\tdontEnums = [\r\n\t\t\t\t'toString',\r\n\t\t\t\t'toLocaleString',\r\n\t\t\t\t'valueOf',\r\n\t\t\t\t'hasOwnProperty',\r\n\t\t\t\t'isPrototypeOf',\r\n\t\t\t\t'propertyIsEnumerable',\r\n\t\t\t\t'constructor'\r\n\t\t\t],\r\n\t\t\tdontEnumsLength = dontEnums.length;\r\n\r\n\t\treturn function (obj) {\r\n\t\t\tif (typeof obj !== 'object' && typeof obj !== 'function' || obj === null) {\r\n\t\t\t\tthrow new TypeError('Object.keys called on non-object');\r\n\t\t\t}\r\n\r\n\t\t\tvar result = [];\r\n\r\n\t\t\tfor (var prop in obj) {\r\n\t\t\t\tif (hasOwnProperty.call(obj, prop)) {\r\n\t\t\t\t\tresult.push(prop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (hasDontEnumBug) {\r\n\t\t\t\tfor (var i=0; i < dontEnumsLength; i++) {\r\n\t\t\t\t\tif (hasOwnProperty.call(obj, dontEnums[i])) {\r\n\t\t\t\t\t\tresult.push(dontEnums[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\r\nif (!Object.create) {\r\n\tObject.create = (function(){\r\n\t\tfunction F(){}\r\n\r\n\t\treturn function(o){\r\n\t\t\tif (arguments.length !== 1) {\r\n\t\t\t\tthrow new Error('Object.create implementation only accepts one parameter.');\r\n\t\t\t}\r\n\t\t\tF.prototype = o;\r\n\t\t\treturn new F();\r\n\t\t};\r\n\t})();\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FisArray\r\nif(!Array.isArray) {\r\n\tArray.isArray = function (vArg) {\r\n\t\treturn Object.prototype.toString.call(vArg) === \"[object Array]\";\r\n\t};\r\n}\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FGlobal_Objects%2FArray%2FindexOf\r\nif (!Array.prototype.indexOf) {\r\n\tArray.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\r\n\t\tif (this === null) {\r\n\t\t\tthrow new TypeError();\r\n\t\t}\r\n\t\tvar t = Object(this);\r\n\t\tvar len = t.length >>> 0;\r\n\r\n\t\tif (len === 0) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar n = 0;\r\n\t\tif (arguments.length > 1) {\r\n\t\t\tn = Number(arguments[1]);\r\n\t\t\tif (n !== n) { // shortcut for verifying if it's NaN\r\n\t\t\t\tn = 0;\r\n\t\t\t} else if (n !== 0 && n !== Infinity && n !== -Infinity) {\r\n\t\t\t\tn = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (n >= len) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tvar k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\r\n\t\tfor (; k < len; k++) {\r\n\t\t\tif (k in t && t[k] === searchElement) {\r\n\t\t\t\treturn k;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n}\r\n\r\n// Grungey Object.isFrozen hack\r\nif (!Object.isFrozen) {\r\n\tObject.isFrozen = function (obj) {\r\n\t\tvar key = \"tv4_test_frozen_key\";\r\n\t\twhile (obj.hasOwnProperty(key)) {\r\n\t\t\tkey += Math.random();\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tobj[key] = true;\r\n\t\t\tdelete obj[key];\r\n\t\t\treturn false;\r\n\t\t} catch (e) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t};\r\n}\r\n// Based on: https://github.com/geraintluff/uri-templates, but with all the de-substitution stuff removed\r\n\r\nvar uriTemplateGlobalModifiers = {\r\n\t\"+\": true,\r\n\t\"#\": true,\r\n\t\".\": true,\r\n\t\"/\": true,\r\n\t\";\": true,\r\n\t\"?\": true,\r\n\t\"&\": true\r\n};\r\nvar uriTemplateSuffices = {\r\n\t\"*\": true\r\n};\r\n\r\nfunction notReallyPercentEncode(string) {\r\n\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\r\n\t\treturn \"%\" + doubleEncoded.substring(3);\r\n\t});\r\n}\r\n\r\nfunction uriTemplateSubstitution(spec) {\r\n\tvar modifier = \"\";\r\n\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\r\n\t\tmodifier = spec.charAt(0);\r\n\t\tspec = spec.substring(1);\r\n\t}\r\n\tvar separator = \"\";\r\n\tvar prefix = \"\";\r\n\tvar shouldEscape = true;\r\n\tvar showVariables = false;\r\n\tvar trimEmptyString = false;\r\n\tif (modifier === '+') {\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === \".\") {\r\n\t\tprefix = \".\";\r\n\t\tseparator = \".\";\r\n\t} else if (modifier === \"/\") {\r\n\t\tprefix = \"/\";\r\n\t\tseparator = \"/\";\r\n\t} else if (modifier === '#') {\r\n\t\tprefix = \"#\";\r\n\t\tshouldEscape = false;\r\n\t} else if (modifier === ';') {\r\n\t\tprefix = \";\";\r\n\t\tseparator = \";\";\r\n\t\tshowVariables = true;\r\n\t\ttrimEmptyString = true;\r\n\t} else if (modifier === '?') {\r\n\t\tprefix = \"?\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t} else if (modifier === '&') {\r\n\t\tprefix = \"&\";\r\n\t\tseparator = \"&\";\r\n\t\tshowVariables = true;\r\n\t}\r\n\r\n\tvar varNames = [];\r\n\tvar varList = spec.split(\",\");\r\n\tvar varSpecs = [];\r\n\tvar varSpecMap = {};\r\n\tfor (var i = 0; i < varList.length; i++) {\r\n\t\tvar varName = varList[i];\r\n\t\tvar truncate = null;\r\n\t\tif (varName.indexOf(\":\") !== -1) {\r\n\t\t\tvar parts = varName.split(\":\");\r\n\t\t\tvarName = parts[0];\r\n\t\t\ttruncate = parseInt(parts[1], 10);\r\n\t\t}\r\n\t\tvar suffices = {};\r\n\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\r\n\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\r\n\t\t\tvarName = varName.substring(0, varName.length - 1);\r\n\t\t}\r\n\t\tvar varSpec = {\r\n\t\t\ttruncate: truncate,\r\n\t\t\tname: varName,\r\n\t\t\tsuffices: suffices\r\n\t\t};\r\n\t\tvarSpecs.push(varSpec);\r\n\t\tvarSpecMap[varName] = varSpec;\r\n\t\tvarNames.push(varName);\r\n\t}\r\n\tvar subFunction = function (valueFunction) {\r\n\t\tvar result = \"\";\r\n\t\tvar startIndex = 0;\r\n\t\tfor (var i = 0; i < varSpecs.length; i++) {\r\n\t\t\tvar varSpec = varSpecs[i];\r\n\t\t\tvar value = valueFunction(varSpec.name);\r\n\t\t\tif (value === null || value === undefined || (Array.isArray(value) && value.length === 0) || (typeof value === 'object' && Object.keys(value).length === 0)) {\r\n\t\t\t\tstartIndex++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (i === startIndex) {\r\n\t\t\t\tresult += prefix;\r\n\t\t\t} else {\r\n\t\t\t\tresult += (separator || \",\");\r\n\t\t\t}\r\n\t\t\tif (Array.isArray(value)) {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tfor (var j = 0; j < value.length; j++) {\r\n\t\t\t\t\tif (j > 0) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\r\n\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof value === \"object\") {\r\n\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\r\n\t\t\t\t\tresult += varSpec.name + \"=\";\r\n\t\t\t\t}\r\n\t\t\t\tvar first = true;\r\n\t\t\t\tfor (var key in value) {\r\n\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\r\n\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\r\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (showVariables) {\r\n\t\t\t\t\tresult += varSpec.name;\r\n\t\t\t\t\tif (!trimEmptyString || value !== \"\") {\r\n\t\t\t\t\t\tresult += \"=\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (varSpec.truncate != null) {\r\n\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\r\n\t\t\t\t}\r\n\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tsubFunction.varNames = varNames;\r\n\treturn {\r\n\t\tprefix: prefix,\r\n\t\tsubstitution: subFunction\r\n\t};\r\n}\r\n\r\nfunction UriTemplate(template) {\r\n\tif (!(this instanceof UriTemplate)) {\r\n\t\treturn new UriTemplate(template);\r\n\t}\r\n\tvar parts = template.split(\"{\");\r\n\tvar textParts = [parts.shift()];\r\n\tvar prefixes = [];\r\n\tvar substitutions = [];\r\n\tvar varNames = [];\r\n\twhile (parts.length > 0) {\r\n\t\tvar part = parts.shift();\r\n\t\tvar spec = part.split(\"}\")[0];\r\n\t\tvar remainder = part.substring(spec.length + 1);\r\n\t\tvar funcs = uriTemplateSubstitution(spec);\r\n\t\tsubstitutions.push(funcs.substitution);\r\n\t\tprefixes.push(funcs.prefix);\r\n\t\ttextParts.push(remainder);\r\n\t\tvarNames = varNames.concat(funcs.substitution.varNames);\r\n\t}\r\n\tthis.fill = function (valueFunction) {\r\n\t\tvar result = textParts[0];\r\n\t\tfor (var i = 0; i < substitutions.length; i++) {\r\n\t\t\tvar substitution = substitutions[i];\r\n\t\t\tresult += substitution(valueFunction);\r\n\t\t\tresult += textParts[i + 1];\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tthis.varNames = varNames;\r\n\tthis.template = template;\r\n}\r\nUriTemplate.prototype = {\r\n\ttoString: function () {\r\n\t\treturn this.template;\r\n\t},\r\n\tfillFromObject: function (obj) {\r\n\t\treturn this.fill(function (varName) {\r\n\t\t\treturn obj[varName];\r\n\t\t});\r\n\t}\r\n};\r\nvar ValidatorContext = function ValidatorContext(parent, collectMultiple, errorReporter, checkRecursive, trackUnknownProperties) {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.formatValidators = parent ? Object.create(parent.formatValidators) : {};\r\n\tthis.schemas = parent ? Object.create(parent.schemas) : {};\r\n\tthis.collectMultiple = collectMultiple;\r\n\tthis.errors = [];\r\n\tthis.handleError = collectMultiple ? this.collectError : this.returnError;\r\n\tif (checkRecursive) {\r\n\t\tthis.checkRecursive = true;\r\n\t\tthis.scanned = [];\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t\tthis.scannedFrozenValidationErrors = [];\r\n\t\tthis.validatedSchemasKey = 'tv4_validation_id';\r\n\t\tthis.validationErrorsKey = 'tv4_validation_errors_id';\r\n\t}\r\n\tif (trackUnknownProperties) {\r\n\t\tthis.trackUnknownProperties = true;\r\n\t\tthis.knownPropertyPaths = {};\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t}\r\n\tthis.errorReporter = errorReporter || defaultErrorReporter('en');\r\n\tif (typeof this.errorReporter === 'string') {\r\n\t\tthrow new Error('debug');\r\n\t}\r\n\tthis.definedKeywords = {};\r\n\tif (parent) {\r\n\t\tfor (var key in parent.definedKeywords) {\r\n\t\t\tthis.definedKeywords[key] = parent.definedKeywords[key].slice(0);\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.defineKeyword = function (keyword, keywordFunction) {\r\n\tthis.definedKeywords[keyword] = this.definedKeywords[keyword] || [];\r\n\tthis.definedKeywords[keyword].push(keywordFunction);\r\n};\r\nValidatorContext.prototype.createError = function (code, messageParams, dataPath, schemaPath, subErrors, data, schema) {\r\n\tvar error = new ValidationError(code, messageParams, dataPath, schemaPath, subErrors);\r\n\terror.message = this.errorReporter(error, data, schema);\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.returnError = function (error) {\r\n\treturn error;\r\n};\r\nValidatorContext.prototype.collectError = function (error) {\r\n\tif (error) {\r\n\t\tthis.errors.push(error);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.prefixErrors = function (startIndex, dataPath, schemaPath) {\r\n\tfor (var i = startIndex; i < this.errors.length; i++) {\r\n\t\tthis.errors[i] = this.errors[i].prefixWith(dataPath, schemaPath);\r\n\t}\r\n\treturn this;\r\n};\r\nValidatorContext.prototype.banUnknownProperties = function (data, schema) {\r\n\tfor (var unknownPath in this.unknownPropertyPaths) {\r\n\t\tvar error = this.createError(ErrorCodes.UNKNOWN_PROPERTY, {path: unknownPath}, unknownPath, \"\", null, data, schema);\r\n\t\tvar result = this.handleError(error);\r\n\t\tif (result) {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.addFormat = function (format, validator) {\r\n\tif (typeof format === 'object') {\r\n\t\tfor (var key in format) {\r\n\t\t\tthis.addFormat(key, format[key]);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\tthis.formatValidators[format] = validator;\r\n};\r\nValidatorContext.prototype.resolveRefs = function (schema, urlHistory) {\r\n\tif (schema['$ref'] !== undefined) {\r\n\t\turlHistory = urlHistory || {};\r\n\t\tif (urlHistory[schema['$ref']]) {\r\n\t\t\treturn this.createError(ErrorCodes.CIRCULAR_REFERENCE, {urls: Object.keys(urlHistory).join(', ')}, '', '', null, undefined, schema);\r\n\t\t}\r\n\t\turlHistory[schema['$ref']] = true;\r\n\t\tschema = this.getSchema(schema['$ref'], urlHistory);\r\n\t}\r\n\treturn schema;\r\n};\r\nValidatorContext.prototype.getSchema = function (url, urlHistory) {\r\n\tvar schema;\r\n\tif (this.schemas[url] !== undefined) {\r\n\t\tschema = this.schemas[url];\r\n\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t}\r\n\tvar baseUrl = url;\r\n\tvar fragment = \"\";\r\n\tif (url.indexOf('#') !== -1) {\r\n\t\tfragment = url.substring(url.indexOf(\"#\") + 1);\r\n\t\tbaseUrl = url.substring(0, url.indexOf(\"#\"));\r\n\t}\r\n\tif (typeof this.schemas[baseUrl] === 'object') {\r\n\t\tschema = this.schemas[baseUrl];\r\n\t\tvar pointerPath = decodeURIComponent(fragment);\r\n\t\tif (pointerPath === \"\") {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t} else if (pointerPath.charAt(0) !== \"/\") {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t\tvar parts = pointerPath.split(\"/\").slice(1);\r\n\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\tvar component = parts[i].replace(/~1/g, \"/\").replace(/~0/g, \"~\");\r\n\t\t\tif (schema[component] === undefined) {\r\n\t\t\t\tschema = undefined;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tschema = schema[component];\r\n\t\t}\r\n\t\tif (schema !== undefined) {\r\n\t\t\treturn this.resolveRefs(schema, urlHistory);\r\n\t\t}\r\n\t}\r\n\tif (this.missing[baseUrl] === undefined) {\r\n\t\tthis.missing.push(baseUrl);\r\n\t\tthis.missing[baseUrl] = baseUrl;\r\n\t\tthis.missingMap[baseUrl] = baseUrl;\r\n\t}\r\n};\r\nValidatorContext.prototype.searchSchemas = function (schema, url) {\r\n\tif (Array.isArray(schema)) {\r\n\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\tthis.searchSchemas(schema[i], url);\r\n\t\t}\r\n\t} else if (schema && typeof schema === \"object\") {\r\n\t\tif (typeof schema.id === \"string\") {\r\n\t\t\tif (isTrustedUrl(url, schema.id)) {\r\n\t\t\t\tif (this.schemas[schema.id] === undefined) {\r\n\t\t\t\t\tthis.schemas[schema.id] = schema;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var key in schema) {\r\n\t\t\tif (key !== \"enum\") {\r\n\t\t\t\tif (typeof schema[key] === \"object\") {\r\n\t\t\t\t\tthis.searchSchemas(schema[key], url);\r\n\t\t\t\t} else if (key === \"$ref\") {\r\n\t\t\t\t\tvar uri = getDocumentUri(schema[key]);\r\n\t\t\t\t\tif (uri && this.schemas[uri] === undefined && this.missingMap[uri] === undefined) {\r\n\t\t\t\t\t\tthis.missingMap[uri] = uri;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\nValidatorContext.prototype.addSchema = function (url, schema) {\r\n\t//overload\r\n\tif (typeof url !== 'string' || typeof schema === 'undefined') {\r\n\t\tif (typeof url === 'object' && typeof url.id === 'string') {\r\n\t\t\tschema = url;\r\n\t\t\turl = schema.id;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (url === getDocumentUri(url) + \"#\") {\r\n\t\t// Remove empty fragment\r\n\t\turl = getDocumentUri(url);\r\n\t}\r\n\tthis.schemas[url] = schema;\r\n\tdelete this.missingMap[url];\r\n\tnormSchema(schema, url);\r\n\tthis.searchSchemas(schema, url);\r\n};\r\n\r\nValidatorContext.prototype.getSchemaMap = function () {\r\n\tvar map = {};\r\n\tfor (var key in this.schemas) {\r\n\t\tmap[key] = this.schemas[key];\r\n\t}\r\n\treturn map;\r\n};\r\n\r\nValidatorContext.prototype.getSchemaUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.schemas) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.getMissingUris = function (filterRegExp) {\r\n\tvar list = [];\r\n\tfor (var key in this.missingMap) {\r\n\t\tif (!filterRegExp || filterRegExp.test(key)) {\r\n\t\t\tlist.push(key);\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n};\r\n\r\nValidatorContext.prototype.dropSchemas = function () {\r\n\tthis.schemas = {};\r\n\tthis.reset();\r\n};\r\nValidatorContext.prototype.reset = function () {\r\n\tthis.missing = [];\r\n\tthis.missingMap = {};\r\n\tthis.errors = [];\r\n};\r\n\r\nValidatorContext.prototype.validateAll = function (data, schema, dataPathParts, schemaPathParts, dataPointerPath) {\r\n\tvar topLevel;\r\n\tschema = this.resolveRefs(schema);\r\n\tif (!schema) {\r\n\t\treturn null;\r\n\t} else if (schema instanceof ValidationError) {\r\n\t\tthis.errors.push(schema);\r\n\t\treturn schema;\r\n\t}\r\n\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar frozenIndex, scannedFrozenSchemaIndex = null, scannedSchemasIndex = null;\r\n\tif (this.checkRecursive && data && typeof data === 'object') {\r\n\t\ttopLevel = !this.scanned.length;\r\n\t\tif (data[this.validatedSchemasKey]) {\r\n\t\t\tvar schemaIndex = data[this.validatedSchemasKey].indexOf(schema);\r\n\t\t\tif (schemaIndex !== -1) {\r\n\t\t\t\tthis.errors = this.errors.concat(data[this.validationErrorsKey][schemaIndex]);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tfrozenIndex = this.scannedFrozen.indexOf(data);\r\n\t\t\tif (frozenIndex !== -1) {\r\n\t\t\t\tvar frozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].indexOf(schema);\r\n\t\t\t\tif (frozenSchemaIndex !== -1) {\r\n\t\t\t\t\tthis.errors = this.errors.concat(this.scannedFrozenValidationErrors[frozenIndex][frozenSchemaIndex]);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.scanned.push(data);\r\n\t\tif (Object.isFrozen(data)) {\r\n\t\t\tif (frozenIndex === -1) {\r\n\t\t\t\tfrozenIndex = this.scannedFrozen.length;\r\n\t\t\t\tthis.scannedFrozen.push(data);\r\n\t\t\t\tthis.scannedFrozenSchemas.push([]);\r\n\t\t\t}\r\n\t\t\tscannedFrozenSchemaIndex = this.scannedFrozenSchemas[frozenIndex].length;\r\n\t\t\tthis.scannedFrozenSchemas[frozenIndex][scannedFrozenSchemaIndex] = schema;\r\n\t\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = [];\r\n\t\t} else {\r\n\t\t\tif (!data[this.validatedSchemasKey]) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tObject.defineProperty(data, this.validatedSchemasKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tObject.defineProperty(data, this.validationErrorsKey, {\r\n\t\t\t\t\t\tvalue: [],\r\n\t\t\t\t\t\tconfigurable: true\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//IE 7/8 workaround\r\n\t\t\t\t\tdata[this.validatedSchemasKey] = [];\r\n\t\t\t\t\tdata[this.validationErrorsKey] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tscannedSchemasIndex = data[this.validatedSchemasKey].length;\r\n\t\t\tdata[this.validatedSchemasKey][scannedSchemasIndex] = schema;\r\n\t\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = [];\r\n\t\t}\r\n\t}\r\n\r\n\tvar errorCount = this.errors.length;\r\n\tvar error = this.validateBasic(data, schema, dataPointerPath)\r\n\t\t|| this.validateNumeric(data, schema, dataPointerPath)\r\n\t\t|| this.validateString(data, schema, dataPointerPath)\r\n\t\t|| this.validateArray(data, schema, dataPointerPath)\r\n\t\t|| this.validateObject(data, schema, dataPointerPath)\r\n\t\t|| this.validateCombinations(data, schema, dataPointerPath)\r\n\t\t|| this.validateHypermedia(data, schema, dataPointerPath)\r\n\t\t|| this.validateFormat(data, schema, dataPointerPath)\r\n\t\t|| this.validateDefinedKeywords(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n\r\n\tif (topLevel) {\r\n\t\twhile (this.scanned.length) {\r\n\t\t\tvar item = this.scanned.pop();\r\n\t\t\tdelete item[this.validatedSchemasKey];\r\n\t\t}\r\n\t\tthis.scannedFrozen = [];\r\n\t\tthis.scannedFrozenSchemas = [];\r\n\t}\r\n\r\n\tif (error || errorCount !== this.errors.length) {\r\n\t\twhile ((dataPathParts && dataPathParts.length) || (schemaPathParts && schemaPathParts.length)) {\r\n\t\t\tvar dataPart = (dataPathParts && dataPathParts.length) ? \"\" + dataPathParts.pop() : null;\r\n\t\t\tvar schemaPart = (schemaPathParts && schemaPathParts.length) ? \"\" + schemaPathParts.pop() : null;\r\n\t\t\tif (error) {\r\n\t\t\t\terror = error.prefixWith(dataPart, schemaPart);\r\n\t\t\t}\r\n\t\t\tthis.prefixErrors(errorCount, dataPart, schemaPart);\r\n\t\t}\r\n\t}\r\n\r\n\tif (scannedFrozenSchemaIndex !== null) {\r\n\t\tthis.scannedFrozenValidationErrors[frozenIndex][scannedFrozenSchemaIndex] = this.errors.slice(startErrorCount);\r\n\t} else if (scannedSchemasIndex !== null) {\r\n\t\tdata[this.validationErrorsKey][scannedSchemasIndex] = this.errors.slice(startErrorCount);\r\n\t}\r\n\r\n\treturn this.handleError(error);\r\n};\r\nValidatorContext.prototype.validateFormat = function (data, schema) {\r\n\tif (typeof schema.format !== 'string' || !this.formatValidators[schema.format]) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errorMessage = this.formatValidators[schema.format].call(null, data, schema);\r\n\tif (typeof errorMessage === 'string' || typeof errorMessage === 'number') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage}, '', '/format', null, data, schema);\r\n\t} else if (errorMessage && typeof errorMessage === 'object') {\r\n\t\treturn this.createError(ErrorCodes.FORMAT_CUSTOM, {message: errorMessage.message || \"?\"}, errorMessage.dataPath || '', errorMessage.schemaPath || \"/format\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\nValidatorContext.prototype.validateDefinedKeywords = function (data, schema, dataPointerPath) {\r\n\tfor (var key in this.definedKeywords) {\r\n\t\tif (typeof schema[key] === 'undefined') {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvar validationFunctions = this.definedKeywords[key];\r\n\t\tfor (var i = 0; i < validationFunctions.length; i++) {\r\n\t\t\tvar func = validationFunctions[i];\r\n\t\t\tvar result = func(data, schema[key], schema, dataPointerPath);\r\n\t\t\tif (typeof result === 'string' || typeof result === 'number') {\r\n\t\t\t\treturn this.createError(ErrorCodes.KEYWORD_CUSTOM, {key: key, message: result}, '', '', null, data, schema).prefixWith(null, key);\r\n\t\t\t} else if (result && typeof result === 'object') {\r\n\t\t\t\tvar code = result.code;\r\n\t\t\t\tif (typeof code === 'string') {\r\n\t\t\t\t\tif (!ErrorCodes[code]) {\r\n\t\t\t\t\t\tthrow new Error('Undefined error code (use defineError): ' + code);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcode = ErrorCodes[code];\r\n\t\t\t\t} else if (typeof code !== 'number') {\r\n\t\t\t\t\tcode = ErrorCodes.KEYWORD_CUSTOM;\r\n\t\t\t\t}\r\n\t\t\t\tvar messageParams = (typeof result.message === 'object') ? result.message : {key: key, message: result.message || \"?\"};\r\n\t\t\t\tvar schemaPath = result.schemaPath || (\"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1'));\r\n\t\t\t\treturn this.createError(code, messageParams, result.dataPath || null, schemaPath, null, data, schema);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nfunction recursiveCompare(A, B) {\r\n\tif (A === B) {\r\n\t\treturn true;\r\n\t}\r\n\tif (A && B && typeof A === \"object\" && typeof B === \"object\") {\r\n\t\tif (Array.isArray(A) !== Array.isArray(B)) {\r\n\t\t\treturn false;\r\n\t\t} else if (Array.isArray(A)) {\r\n\t\t\tif (A.length !== B.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < A.length; i++) {\r\n\t\t\t\tif (!recursiveCompare(A[i], B[i])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (B[key] === undefined && A[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in B) {\r\n\t\t\t\tif (A[key] === undefined && B[key] !== undefined) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (key in A) {\r\n\t\t\t\tif (!recursiveCompare(A[key], B[key])) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nValidatorContext.prototype.validateBasic = function validateBasic(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (error = this.validateType(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\tif (error = this.validateEnum(data, schema, dataPointerPath)) {\r\n\t\treturn error.prefixWith(null, \"type\");\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateType = function validateType(data, schema) {\r\n\tif (schema.type === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar dataType = typeof data;\r\n\tif (data === null) {\r\n\t\tdataType = \"null\";\r\n\t} else if (Array.isArray(data)) {\r\n\t\tdataType = \"array\";\r\n\t}\r\n\tvar allowedTypes = schema.type;\r\n\tif (!Array.isArray(allowedTypes)) {\r\n\t\tallowedTypes = [allowedTypes];\r\n\t}\r\n\r\n\tfor (var i = 0; i < allowedTypes.length; i++) {\r\n\t\tvar type = allowedTypes[i];\r\n\t\tif (type === dataType || (type === \"integer\" && dataType === \"number\" && (data % 1 === 0))) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.INVALID_TYPE, {type: dataType, expected: allowedTypes.join(\"/\")}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateEnum = function validateEnum(data, schema) {\r\n\tif (schema[\"enum\"] === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tfor (var i = 0; i < schema[\"enum\"].length; i++) {\r\n\t\tvar enumVal = schema[\"enum\"][i];\r\n\t\tif (recursiveCompare(data, enumVal)) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\treturn this.createError(ErrorCodes.ENUM_MISMATCH, {value: (typeof JSON !== 'undefined') ? JSON.stringify(data) : data}, '', '', null, data, schema);\r\n};\r\n\r\nValidatorContext.prototype.validateNumeric = function validateNumeric(data, schema, dataPointerPath) {\r\n\treturn this.validateMultipleOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateMinMax(data, schema, dataPointerPath)\r\n\t\t|| this.validateNaN(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nvar CLOSE_ENOUGH_LOW = Math.pow(2, -51);\r\nvar CLOSE_ENOUGH_HIGH = 1 - CLOSE_ENOUGH_LOW;\r\nValidatorContext.prototype.validateMultipleOf = function validateMultipleOf(data, schema) {\r\n\tvar multipleOf = schema.multipleOf || schema.divisibleBy;\r\n\tif (multipleOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tif (typeof data === \"number\") {\r\n\t\tvar remainder = (data/multipleOf)%1;\r\n\t\tif (remainder >= CLOSE_ENOUGH_LOW && remainder < CLOSE_ENOUGH_HIGH) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MULTIPLE_OF, {value: data, multipleOf: multipleOf}, '', '', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateMinMax = function validateMinMax(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minimum !== undefined) {\r\n\t\tif (data < schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM, {value: data, minimum: schema.minimum}, '', '/minimum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMinimum && data === schema.minimum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MINIMUM_EXCLUSIVE, {value: data, minimum: schema.minimum}, '', '/exclusiveMinimum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maximum !== undefined) {\r\n\t\tif (data > schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM, {value: data, maximum: schema.maximum}, '', '/maximum', null, data, schema);\r\n\t\t}\r\n\t\tif (schema.exclusiveMaximum && data === schema.maximum) {\r\n\t\t\treturn this.createError(ErrorCodes.NUMBER_MAXIMUM_EXCLUSIVE, {value: data, maximum: schema.maximum}, '', '/exclusiveMaximum', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNaN = function validateNaN(data, schema) {\r\n\tif (typeof data !== \"number\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (isNaN(data) === true || data === Infinity || data === -Infinity) {\r\n\t\treturn this.createError(ErrorCodes.NUMBER_NOT_A_NUMBER, {value: data}, '', '/type', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateString = function validateString(data, schema, dataPointerPath) {\r\n\treturn this.validateStringLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateStringPattern(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringLength = function validateStringLength(data, schema) {\r\n\tif (typeof data !== \"string\") {\r\n\t\treturn null;\r\n\t}\r\n\tif (schema.minLength !== undefined) {\r\n\t\tif (data.length < schema.minLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_SHORT, {length: data.length, minimum: schema.minLength}, '', '/minLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\tif (schema.maxLength !== undefined) {\r\n\t\tif (data.length > schema.maxLength) {\r\n\t\t\treturn this.createError(ErrorCodes.STRING_LENGTH_LONG, {length: data.length, maximum: schema.maxLength}, '', '/maxLength', null, data, schema);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateStringPattern = function validateStringPattern(data, schema) {\r\n\tif (typeof data !== \"string\" || (typeof schema.pattern !== \"string\" && !(schema.pattern instanceof RegExp))) {\r\n\t\treturn null;\r\n\t}\r\n\tvar regexp;\r\n\tif (schema.pattern instanceof RegExp) {\r\n\t  regexp = schema.pattern;\r\n\t}\r\n\telse {\r\n\t  var body, flags = '';\r\n\t  // Check for regular expression literals\r\n\t  // @see http://www.ecma-international.org/ecma-262/5.1/#sec-7.8.5\r\n\t  var literal = schema.pattern.match(/^\\/(.+)\\/([img]*)$/);\r\n\t  if (literal) {\r\n\t    body = literal[1];\r\n\t    flags = literal[2];\r\n\t  }\r\n\t  else {\r\n\t    body = schema.pattern;\r\n\t  }\r\n\t  regexp = new RegExp(body, flags);\r\n\t}\r\n\tif (!regexp.test(data)) {\r\n\t\treturn this.createError(ErrorCodes.STRING_PATTERN, {pattern: schema.pattern}, '', '/pattern', null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArray = function validateArray(data, schema, dataPointerPath) {\r\n\tif (!Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateArrayLength(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayUniqueItems(data, schema, dataPointerPath)\r\n\t\t|| this.validateArrayItems(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayLength = function validateArrayLength(data, schema) {\r\n\tvar error;\r\n\tif (schema.minItems !== undefined) {\r\n\t\tif (data.length < schema.minItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_SHORT, {length: data.length, minimum: schema.minItems}, '', '/minItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxItems !== undefined) {\r\n\t\tif (data.length > schema.maxItems) {\r\n\t\t\terror = this.createError(ErrorCodes.ARRAY_LENGTH_LONG, {length: data.length, maximum: schema.maxItems}, '', '/maxItems', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayUniqueItems = function validateArrayUniqueItems(data, schema) {\r\n\tif (schema.uniqueItems) {\r\n\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\tfor (var j = i + 1; j < data.length; j++) {\r\n\t\t\t\tif (recursiveCompare(data[i], data[j])) {\r\n\t\t\t\t\tvar error = this.createError(ErrorCodes.ARRAY_UNIQUE, {match1: i, match2: j}, '', '/uniqueItems', null, data, schema);\r\n\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateArrayItems = function validateArrayItems(data, schema, dataPointerPath) {\r\n\tif (schema.items === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error, i;\r\n\tif (Array.isArray(schema.items)) {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (i < schema.items.length) {\r\n\t\t\t\tif (error = this.validateAll(data[i], schema.items[i], [i], [\"items\", i], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t} else if (schema.additionalItems !== undefined) {\r\n\t\t\t\tif (typeof schema.additionalItems === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalItems) {\r\n\t\t\t\t\t\terror = (this.createError(ErrorCodes.ARRAY_ADDITIONAL_ITEMS, {}, '/' + i, '/additionalItems', null, data, schema));\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (error = this.validateAll(data[i], schema.additionalItems, [i], [\"additionalItems\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} else {\r\n\t\tfor (i = 0; i < data.length; i++) {\r\n\t\t\tif (error = this.validateAll(data[i], schema.items, [i], [\"items\"], dataPointerPath + \"/\" + i)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObject = function validateObject(data, schema, dataPointerPath) {\r\n\tif (typeof data !== \"object\" || data === null || Array.isArray(data)) {\r\n\t\treturn null;\r\n\t}\r\n\treturn this.validateObjectMinMaxProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectRequiredProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectProperties(data, schema, dataPointerPath)\r\n\t\t|| this.validateObjectDependencies(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectMinMaxProperties = function validateObjectMinMaxProperties(data, schema) {\r\n\tvar keys = Object.keys(data);\r\n\tvar error;\r\n\tif (schema.minProperties !== undefined) {\r\n\t\tif (keys.length < schema.minProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MINIMUM, {propertyCount: keys.length, minimum: schema.minProperties}, '', '/minProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tif (schema.maxProperties !== undefined) {\r\n\t\tif (keys.length > schema.maxProperties) {\r\n\t\t\terror = this.createError(ErrorCodes.OBJECT_PROPERTIES_MAXIMUM, {propertyCount: keys.length, maximum: schema.maxProperties}, '', '/maxProperties', null, data, schema);\r\n\t\t\tif (this.handleError(error)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectRequiredProperties = function validateObjectRequiredProperties(data, schema) {\r\n\tif (schema.required !== undefined) {\r\n\t\tfor (var i = 0; i < schema.required.length; i++) {\r\n\t\t\tvar key = schema.required[i];\r\n\t\t\tif (data[key] === undefined) {\r\n\t\t\t\tvar error = this.createError(ErrorCodes.OBJECT_REQUIRED, {key: key}, '', '/required/' + i, null, data, schema);\r\n\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectProperties = function validateObjectProperties(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tfor (var key in data) {\r\n\t\tvar keyPointerPath = dataPointerPath + \"/\" + key.replace(/~/g, '~0').replace(/\\//g, '~1');\r\n\t\tvar foundMatch = false;\r\n\t\tif (schema.properties !== undefined && schema.properties[key] !== undefined) {\r\n\t\t\tfoundMatch = true;\r\n\t\t\tif (error = this.validateAll(data[key], schema.properties[key], [key], [\"properties\", key], keyPointerPath)) {\r\n\t\t\t\treturn error;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (schema.patternProperties !== undefined) {\r\n\t\t\tfor (var patternKey in schema.patternProperties) {\r\n\t\t\t\tvar regexp = new RegExp(patternKey);\r\n\t\t\t\tif (regexp.test(key)) {\r\n\t\t\t\t\tfoundMatch = true;\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.patternProperties[patternKey], [key], [\"patternProperties\", patternKey], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!foundMatch) {\r\n\t\t\tif (schema.additionalProperties !== undefined) {\r\n\t\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof schema.additionalProperties === \"boolean\") {\r\n\t\t\t\t\tif (!schema.additionalProperties) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_ADDITIONAL_PROPERTIES, {key: key}, '', '/additionalProperties', null, data, schema).prefixWith(key, null);\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data[key], schema.additionalProperties, [key], [\"additionalProperties\"], keyPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (this.trackUnknownProperties && !this.knownPropertyPaths[keyPointerPath]) {\r\n\t\t\t\tthis.unknownPropertyPaths[keyPointerPath] = true;\r\n\t\t\t}\r\n\t\t} else if (this.trackUnknownProperties) {\r\n\t\t\tthis.knownPropertyPaths[keyPointerPath] = true;\r\n\t\t\tdelete this.unknownPropertyPaths[keyPointerPath];\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateObjectDependencies = function validateObjectDependencies(data, schema, dataPointerPath) {\r\n\tvar error;\r\n\tif (schema.dependencies !== undefined) {\r\n\t\tfor (var depKey in schema.dependencies) {\r\n\t\t\tif (data[depKey] !== undefined) {\r\n\t\t\t\tvar dep = schema.dependencies[depKey];\r\n\t\t\t\tif (typeof dep === \"string\") {\r\n\t\t\t\t\tif (data[dep] === undefined) {\r\n\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: dep}, '', '', null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (Array.isArray(dep)) {\r\n\t\t\t\t\tfor (var i = 0; i < dep.length; i++) {\r\n\t\t\t\t\t\tvar requiredKey = dep[i];\r\n\t\t\t\t\t\tif (data[requiredKey] === undefined) {\r\n\t\t\t\t\t\t\terror = this.createError(ErrorCodes.OBJECT_DEPENDENCY_KEY, {key: depKey, missing: requiredKey}, '', '/' + i, null, data, schema).prefixWith(null, depKey).prefixWith(null, \"dependencies\");\r\n\t\t\t\t\t\t\tif (this.handleError(error)) {\r\n\t\t\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (error = this.validateAll(data, dep, [], [\"dependencies\", depKey], dataPointerPath)) {\r\n\t\t\t\t\t\treturn error;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateCombinations = function validateCombinations(data, schema, dataPointerPath) {\r\n\treturn this.validateAllOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateAnyOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateOneOf(data, schema, dataPointerPath)\r\n\t\t|| this.validateNot(data, schema, dataPointerPath)\r\n\t\t|| null;\r\n};\r\n\r\nValidatorContext.prototype.validateAllOf = function validateAllOf(data, schema, dataPointerPath) {\r\n\tif (schema.allOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.allOf.length; i++) {\r\n\t\tvar subSchema = schema.allOf[i];\r\n\t\tif (error = this.validateAll(data, subSchema, [], [\"allOf\", i], dataPointerPath)) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateAnyOf = function validateAnyOf(data, schema, dataPointerPath) {\r\n\tif (schema.anyOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tvar errorAtEnd = true;\r\n\tfor (var i = 0; i < schema.anyOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.anyOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"anyOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// We need to continue looping so we catch all the property definitions, but we don't want to return an error\r\n\t\t\t\terrorAtEnd = false;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (error) {\r\n\t\t\terrors.push(error.prefixWith(null, \"\" + i).prefixWith(null, \"anyOf\"));\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (errorAtEnd) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ANY_OF_MISSING, {}, \"\", \"/anyOf\", errors, data, schema);\r\n\t}\r\n};\r\n\r\nValidatorContext.prototype.validateOneOf = function validateOneOf(data, schema, dataPointerPath) {\r\n\tif (schema.oneOf === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar validIndex = null;\r\n\tvar errors = [];\r\n\tvar startErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t}\r\n\tfor (var i = 0; i < schema.oneOf.length; i++) {\r\n\t\tif (this.trackUnknownProperties) {\r\n\t\t\tthis.unknownPropertyPaths = {};\r\n\t\t\tthis.knownPropertyPaths = {};\r\n\t\t}\r\n\t\tvar subSchema = schema.oneOf[i];\r\n\r\n\t\tvar errorCount = this.errors.length;\r\n\t\tvar error = this.validateAll(data, subSchema, [], [\"oneOf\", i], dataPointerPath);\r\n\r\n\t\tif (error === null && errorCount === this.errors.length) {\r\n\t\t\tif (validIndex === null) {\r\n\t\t\t\tvalidIndex = i;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\t\t\treturn this.createError(ErrorCodes.ONE_OF_MULTIPLE, {index1: validIndex, index2: i}, \"\", \"/oneOf\", null, data, schema);\r\n\t\t\t}\r\n\t\t\tif (this.trackUnknownProperties) {\r\n\t\t\t\tfor (var knownKey in this.knownPropertyPaths) {\r\n\t\t\t\t\toldKnownPropertyPaths[knownKey] = true;\r\n\t\t\t\t\tdelete oldUnknownPropertyPaths[knownKey];\r\n\t\t\t\t}\r\n\t\t\t\tfor (var unknownKey in this.unknownPropertyPaths) {\r\n\t\t\t\t\tif (!oldKnownPropertyPaths[unknownKey]) {\r\n\t\t\t\t\t\toldUnknownPropertyPaths[unknownKey] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (error) {\r\n\t\t\terrors.push(error);\r\n\t\t}\r\n\t}\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (validIndex === null) {\r\n\t\terrors = errors.concat(this.errors.slice(startErrorCount));\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t\treturn this.createError(ErrorCodes.ONE_OF_MISSING, {}, \"\", \"/oneOf\", errors, data, schema);\r\n\t} else {\r\n\t\tthis.errors = this.errors.slice(0, startErrorCount);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateNot = function validateNot(data, schema, dataPointerPath) {\r\n\tif (schema.not === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tvar oldErrorCount = this.errors.length;\r\n\tvar oldUnknownPropertyPaths, oldKnownPropertyPaths;\r\n\tif (this.trackUnknownProperties) {\r\n\t\toldUnknownPropertyPaths = this.unknownPropertyPaths;\r\n\t\toldKnownPropertyPaths = this.knownPropertyPaths;\r\n\t\tthis.unknownPropertyPaths = {};\r\n\t\tthis.knownPropertyPaths = {};\r\n\t}\r\n\tvar error = this.validateAll(data, schema.not, null, null, dataPointerPath);\r\n\tvar notErrors = this.errors.slice(oldErrorCount);\r\n\tthis.errors = this.errors.slice(0, oldErrorCount);\r\n\tif (this.trackUnknownProperties) {\r\n\t\tthis.unknownPropertyPaths = oldUnknownPropertyPaths;\r\n\t\tthis.knownPropertyPaths = oldKnownPropertyPaths;\r\n\t}\r\n\tif (error === null && notErrors.length === 0) {\r\n\t\treturn this.createError(ErrorCodes.NOT_PASSED, {}, \"\", \"/not\", null, data, schema);\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nValidatorContext.prototype.validateHypermedia = function validateCombinations(data, schema, dataPointerPath) {\r\n\tif (!schema.links) {\r\n\t\treturn null;\r\n\t}\r\n\tvar error;\r\n\tfor (var i = 0; i < schema.links.length; i++) {\r\n\t\tvar ldo = schema.links[i];\r\n\t\tif (ldo.rel === \"describedby\") {\r\n\t\t\tvar template = new UriTemplate(ldo.href);\r\n\t\t\tvar allPresent = true;\r\n\t\t\tfor (var j = 0; j < template.varNames.length; j++) {\r\n\t\t\t\tif (!(template.varNames[j] in data)) {\r\n\t\t\t\t\tallPresent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (allPresent) {\r\n\t\t\t\tvar schemaUrl = template.fillFromObject(data);\r\n\t\t\t\tvar subSchema = {\"$ref\": schemaUrl};\r\n\t\t\t\tif (error = this.validateAll(data, subSchema, [], [\"links\", i], dataPointerPath)) {\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// parseURI() and resolveUrl() are from https://gist.github.com/1088850\r\n//   -  released as public domain by author (\"Yaffle\") - see comments on gist\r\n\r\nfunction parseURI(url) {\r\n\tvar m = String(url).replace(/^\\s+|\\s+$/g, '').match(/^([^:\\/?#]+:)?(\\/\\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\\/?#]*)(?::(\\d*))?))?([^?#]*)(\\?[^#]*)?(#[\\s\\S]*)?/);\r\n\t// authority = '//' + user + ':' + pass '@' + hostname + ':' port\r\n\treturn (m ? {\r\n\t\thref     : m[0] || '',\r\n\t\tprotocol : m[1] || '',\r\n\t\tauthority: m[2] || '',\r\n\t\thost     : m[3] || '',\r\n\t\thostname : m[4] || '',\r\n\t\tport     : m[5] || '',\r\n\t\tpathname : m[6] || '',\r\n\t\tsearch   : m[7] || '',\r\n\t\thash     : m[8] || ''\r\n\t} : null);\r\n}\r\n\r\nfunction resolveUrl(base, href) {// RFC 3986\r\n\r\n\tfunction removeDotSegments(input) {\r\n\t\tvar output = [];\r\n\t\tinput.replace(/^(\\.\\.?(\\/|$))+/, '')\r\n\t\t\t.replace(/\\/(\\.(\\/|$))+/g, '/')\r\n\t\t\t.replace(/\\/\\.\\.$/, '/../')\r\n\t\t\t.replace(/\\/?[^\\/]*/g, function (p) {\r\n\t\t\t\tif (p === '/..') {\r\n\t\t\t\t\toutput.pop();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toutput.push(p);\r\n\t\t\t\t}\r\n\t\t});\r\n\t\treturn output.join('').replace(/^\\//, input.charAt(0) === '/' ? '/' : '');\r\n\t}\r\n\r\n\thref = parseURI(href || '');\r\n\tbase = parseURI(base || '');\r\n\r\n\treturn !href || !base ? null : (href.protocol || base.protocol) +\r\n\t\t(href.protocol || href.authority ? href.authority : base.authority) +\r\n\t\tremoveDotSegments(href.protocol || href.authority || href.pathname.charAt(0) === '/' ? href.pathname : (href.pathname ? ((base.authority && !base.pathname ? '/' : '') + base.pathname.slice(0, base.pathname.lastIndexOf('/') + 1) + href.pathname) : base.pathname)) +\r\n\t\t(href.protocol || href.authority || href.pathname ? href.search : (href.search || base.search)) +\r\n\t\thref.hash;\r\n}\r\n\r\nfunction getDocumentUri(uri) {\r\n\treturn uri.split('#')[0];\r\n}\r\nfunction normSchema(schema, baseUri) {\r\n\tif (schema && typeof schema === \"object\") {\r\n\t\tif (baseUri === undefined) {\r\n\t\t\tbaseUri = schema.id;\r\n\t\t} else if (typeof schema.id === \"string\") {\r\n\t\t\tbaseUri = resolveUrl(baseUri, schema.id);\r\n\t\t\tschema.id = baseUri;\r\n\t\t}\r\n\t\tif (Array.isArray(schema)) {\r\n\t\t\tfor (var i = 0; i < schema.length; i++) {\r\n\t\t\t\tnormSchema(schema[i], baseUri);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (typeof schema['$ref'] === \"string\") {\r\n\t\t\t\tschema['$ref'] = resolveUrl(baseUri, schema['$ref']);\r\n\t\t\t}\r\n\t\t\tfor (var key in schema) {\r\n\t\t\t\tif (key !== \"enum\") {\r\n\t\t\t\t\tnormSchema(schema[key], baseUri);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction defaultErrorReporter(language) {\r\n\tlanguage = language || 'en';\r\n\r\n\tvar errorMessages = languages[language];\r\n\r\n\treturn function (error) {\r\n\t\tvar messageTemplate = errorMessages[error.code] || ErrorMessagesDefault[error.code];\r\n\t\tif (typeof messageTemplate !== 'string') {\r\n\t\t\treturn \"Unknown error code \" + error.code + \": \" + JSON.stringify(error.messageParams);\r\n\t\t}\r\n\t\tvar messageParams = error.params;\r\n\t\t// Adapted from Crockford's supplant()\r\n\t\treturn messageTemplate.replace(/\\{([^{}]*)\\}/g, function (whole, varName) {\r\n\t\t\tvar subValue = messageParams[varName];\r\n\t\t\treturn typeof subValue === 'string' || typeof subValue === 'number' ? subValue : whole;\r\n\t\t});\r\n\t};\r\n}\r\n\r\nvar ErrorCodes = {\r\n\tINVALID_TYPE: 0,\r\n\tENUM_MISMATCH: 1,\r\n\tANY_OF_MISSING: 10,\r\n\tONE_OF_MISSING: 11,\r\n\tONE_OF_MULTIPLE: 12,\r\n\tNOT_PASSED: 13,\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: 100,\r\n\tNUMBER_MINIMUM: 101,\r\n\tNUMBER_MINIMUM_EXCLUSIVE: 102,\r\n\tNUMBER_MAXIMUM: 103,\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: 104,\r\n\tNUMBER_NOT_A_NUMBER: 105,\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: 200,\r\n\tSTRING_LENGTH_LONG: 201,\r\n\tSTRING_PATTERN: 202,\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: 300,\r\n\tOBJECT_PROPERTIES_MAXIMUM: 301,\r\n\tOBJECT_REQUIRED: 302,\r\n\tOBJECT_ADDITIONAL_PROPERTIES: 303,\r\n\tOBJECT_DEPENDENCY_KEY: 304,\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: 400,\r\n\tARRAY_LENGTH_LONG: 401,\r\n\tARRAY_UNIQUE: 402,\r\n\tARRAY_ADDITIONAL_ITEMS: 403,\r\n\t// Custom/user-defined errors\r\n\tFORMAT_CUSTOM: 500,\r\n\tKEYWORD_CUSTOM: 501,\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: 600,\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: 1000\r\n};\r\nvar ErrorCodeLookup = {};\r\nfor (var key in ErrorCodes) {\r\n\tErrorCodeLookup[ErrorCodes[key]] = key;\r\n}\r\nvar ErrorMessagesDefault = {\r\n\tINVALID_TYPE: \"Invalid type: {type} (expected {expected})\",\r\n\tENUM_MISMATCH: \"No enum match for: {value}\",\r\n\tANY_OF_MISSING: \"Data does not match any schemas from \\\"anyOf\\\"\",\r\n\tONE_OF_MISSING: \"Data does not match any schemas from \\\"oneOf\\\"\",\r\n\tONE_OF_MULTIPLE: \"Data is valid against more than one schema from \\\"oneOf\\\": indices {index1} and {index2}\",\r\n\tNOT_PASSED: \"Data matches schema from \\\"not\\\"\",\r\n\t// Numeric errors\r\n\tNUMBER_MULTIPLE_OF: \"Value {value} is not a multiple of {multipleOf}\",\r\n\tNUMBER_MINIMUM: \"Value {value} is less than minimum {minimum}\",\r\n\tNUMBER_MINIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive minimum {minimum}\",\r\n\tNUMBER_MAXIMUM: \"Value {value} is greater than maximum {maximum}\",\r\n\tNUMBER_MAXIMUM_EXCLUSIVE: \"Value {value} is equal to exclusive maximum {maximum}\",\r\n\tNUMBER_NOT_A_NUMBER: \"Value {value} is not a valid number\",\r\n\t// String errors\r\n\tSTRING_LENGTH_SHORT: \"String is too short ({length} chars), minimum {minimum}\",\r\n\tSTRING_LENGTH_LONG: \"String is too long ({length} chars), maximum {maximum}\",\r\n\tSTRING_PATTERN: \"String does not match pattern: {pattern}\",\r\n\t// Object errors\r\n\tOBJECT_PROPERTIES_MINIMUM: \"Too few properties defined ({propertyCount}), minimum {minimum}\",\r\n\tOBJECT_PROPERTIES_MAXIMUM: \"Too many properties defined ({propertyCount}), maximum {maximum}\",\r\n\tOBJECT_REQUIRED: \"Missing required property: {key}\",\r\n\tOBJECT_ADDITIONAL_PROPERTIES: \"Additional properties not allowed\",\r\n\tOBJECT_DEPENDENCY_KEY: \"Dependency failed - key must exist: {missing} (due to key: {key})\",\r\n\t// Array errors\r\n\tARRAY_LENGTH_SHORT: \"Array is too short ({length}), minimum {minimum}\",\r\n\tARRAY_LENGTH_LONG: \"Array is too long ({length}), maximum {maximum}\",\r\n\tARRAY_UNIQUE: \"Array items are not unique (indices {match1} and {match2})\",\r\n\tARRAY_ADDITIONAL_ITEMS: \"Additional items not allowed\",\r\n\t// Format errors\r\n\tFORMAT_CUSTOM: \"Format validation failed ({message})\",\r\n\tKEYWORD_CUSTOM: \"Keyword failed: {key} ({message})\",\r\n\t// Schema structure\r\n\tCIRCULAR_REFERENCE: \"Circular $refs: {urls}\",\r\n\t// Non-standard validation options\r\n\tUNKNOWN_PROPERTY: \"Unknown property (not in schema)\"\r\n};\r\n\r\nfunction ValidationError(code, params, dataPath, schemaPath, subErrors) {\r\n\tError.call(this);\r\n\tif (code === undefined) {\r\n\t\tthrow new Error (\"No error code supplied: \" + schemaPath);\r\n\t}\r\n\tthis.message = '';\r\n\tthis.params = params;\r\n\tthis.code = code;\r\n\tthis.dataPath = dataPath || \"\";\r\n\tthis.schemaPath = schemaPath || \"\";\r\n\tthis.subErrors = subErrors || null;\r\n\r\n\tvar err = new Error(this.message);\r\n\tthis.stack = err.stack || err.stacktrace;\r\n\tif (!this.stack) {\r\n\t\ttry {\r\n\t\t\tthrow err;\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthis.stack = err.stack || err.stacktrace;\r\n\t\t}\r\n\t}\r\n}\r\nValidationError.prototype = Object.create(Error.prototype);\r\nValidationError.prototype.constructor = ValidationError;\r\nValidationError.prototype.name = 'ValidationError';\r\n\r\nValidationError.prototype.prefixWith = function (dataPrefix, schemaPrefix) {\r\n\tif (dataPrefix !== null) {\r\n\t\tdataPrefix = dataPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.dataPath = \"/\" + dataPrefix + this.dataPath;\r\n\t}\r\n\tif (schemaPrefix !== null) {\r\n\t\tschemaPrefix = schemaPrefix.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\r\n\t\tthis.schemaPath = \"/\" + schemaPrefix + this.schemaPath;\r\n\t}\r\n\tif (this.subErrors !== null) {\r\n\t\tfor (var i = 0; i < this.subErrors.length; i++) {\r\n\t\t\tthis.subErrors[i].prefixWith(dataPrefix, schemaPrefix);\r\n\t\t}\r\n\t}\r\n\treturn this;\r\n};\r\n\r\nfunction isTrustedUrl(baseUrl, testUrl) {\r\n\tif(testUrl.substring(0, baseUrl.length) === baseUrl){\r\n\t\tvar remainder = testUrl.substring(baseUrl.length);\r\n\t\tif ((testUrl.length > 0 && testUrl.charAt(baseUrl.length - 1) === \"/\")\r\n\t\t\t|| remainder.charAt(0) === \"#\"\r\n\t\t\t|| remainder.charAt(0) === \"?\") {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nvar languages = {};\r\nfunction createApi(language) {\r\n\tvar globalContext = new ValidatorContext();\r\n\tvar currentLanguage;\r\n\tvar customErrorReporter;\r\n\tvar api = {\r\n\t\tsetErrorReporter: function (reporter) {\r\n\t\t\tif (typeof reporter === 'string') {\r\n\t\t\t\treturn this.language(reporter);\r\n\t\t\t}\r\n\t\t\tcustomErrorReporter = reporter;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\taddFormat: function () {\r\n\t\t\tglobalContext.addFormat.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tlanguage: function (code) {\r\n\t\t\tif (!code) {\r\n\t\t\t\treturn currentLanguage;\r\n\t\t\t}\r\n\t\t\tif (!languages[code]) {\r\n\t\t\t\tcode = code.split('-')[0]; // fall back to base language\r\n\t\t\t}\r\n\t\t\tif (languages[code]) {\r\n\t\t\t\tcurrentLanguage = code;\r\n\t\t\t\treturn code; // so you can tell if fall-back has happened\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\taddLanguage: function (code, messageMap) {\r\n\t\t\tvar key;\r\n\t\t\tfor (key in ErrorCodes) {\r\n\t\t\t\tif (messageMap[key] && !messageMap[ErrorCodes[key]]) {\r\n\t\t\t\t\tmessageMap[ErrorCodes[key]] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar rootCode = code.split('-')[0];\r\n\t\t\tif (!languages[rootCode]) { // use for base language if not yet defined\r\n\t\t\t\tlanguages[code] = messageMap;\r\n\t\t\t\tlanguages[rootCode] = messageMap;\r\n\t\t\t} else {\r\n\t\t\t\tlanguages[code] = Object.create(languages[rootCode]);\r\n\t\t\t\tfor (key in messageMap) {\r\n\t\t\t\t\tif (typeof languages[rootCode][key] === 'undefined') {\r\n\t\t\t\t\t\tlanguages[rootCode][key] = messageMap[key];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlanguages[code][key] = messageMap[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tfreshApi: function (language) {\r\n\t\t\tvar result = createApi();\r\n\t\t\tif (language) {\r\n\t\t\t\tresult.language(language);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidate: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, false, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tvar error = context.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (!error && banUnknownProperties) {\r\n\t\t\t\terror = context.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tthis.error = error;\r\n\t\t\tthis.missing = context.missing;\r\n\t\t\tthis.valid = (error === null);\r\n\t\t\treturn this.valid;\r\n\t\t},\r\n\t\tvalidateResult: function () {\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tthis.validate.apply(result, arguments);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tvalidateMultiple: function (data, schema, checkRecursive, banUnknownProperties) {\r\n\t\t\tvar def = defaultErrorReporter(currentLanguage);\r\n\t\t\tvar errorReporter = customErrorReporter ? function (error, data, schema) {\r\n\t\t\t\treturn customErrorReporter(error, data, schema) || def(error, data, schema);\r\n\t\t\t} : def;\r\n\t\t\tvar context = new ValidatorContext(globalContext, true, errorReporter, checkRecursive, banUnknownProperties);\r\n\t\t\tif (typeof schema === \"string\") {\r\n\t\t\t\tschema = {\"$ref\": schema};\r\n\t\t\t}\r\n\t\t\tcontext.addSchema(\"\", schema);\r\n\t\t\tcontext.validateAll(data, schema, null, null, \"\");\r\n\t\t\tif (banUnknownProperties) {\r\n\t\t\t\tcontext.banUnknownProperties(data, schema);\r\n\t\t\t}\r\n\t\t\tvar result = {toString: function () {\r\n\t\t\t\treturn this.valid ? 'valid' : this.error.message;\r\n\t\t\t}};\r\n\t\t\tresult.errors = context.errors;\r\n\t\t\tresult.missing = context.missing;\r\n\t\t\tresult.valid = (result.errors.length === 0);\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\taddSchema: function () {\r\n\t\t\treturn globalContext.addSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchema: function () {\r\n\t\t\treturn globalContext.getSchema.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaMap: function () {\r\n\t\t\treturn globalContext.getSchemaMap.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetSchemaUris: function () {\r\n\t\t\treturn globalContext.getSchemaUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tgetMissingUris: function () {\r\n\t\t\treturn globalContext.getMissingUris.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdropSchemas: function () {\r\n\t\t\tglobalContext.dropSchemas.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineKeyword: function () {\r\n\t\t\tglobalContext.defineKeyword.apply(globalContext, arguments);\r\n\t\t},\r\n\t\tdefineError: function (codeName, codeNumber, defaultMessage) {\r\n\t\t\tif (typeof codeName !== 'string' || !/^[A-Z]+(_[A-Z]+)*$/.test(codeName)) {\r\n\t\t\t\tthrow new Error('Code name must be a string in UPPER_CASE_WITH_UNDERSCORES');\r\n\t\t\t}\r\n\t\t\tif (typeof codeNumber !== 'number' || codeNumber%1 !== 0 || codeNumber < 10000) {\r\n\t\t\t\tthrow new Error('Code number must be an integer > 10000');\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodes[codeName] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error already defined: ' + codeName + ' as ' + ErrorCodes[codeName]);\r\n\t\t\t}\r\n\t\t\tif (typeof ErrorCodeLookup[codeNumber] !== 'undefined') {\r\n\t\t\t\tthrow new Error('Error code already used: ' + ErrorCodeLookup[codeNumber] + ' as ' + codeNumber);\r\n\t\t\t}\r\n\t\t\tErrorCodes[codeName] = codeNumber;\r\n\t\t\tErrorCodeLookup[codeNumber] = codeName;\r\n\t\t\tErrorMessagesDefault[codeName] = ErrorMessagesDefault[codeNumber] = defaultMessage;\r\n\t\t\tfor (var langCode in languages) {\r\n\t\t\t\tvar language = languages[langCode];\r\n\t\t\t\tif (language[codeName]) {\r\n\t\t\t\t\tlanguage[codeNumber] = language[codeNumber] || language[codeName];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\treset: function () {\r\n\t\t\tglobalContext.reset();\r\n\t\t\tthis.error = null;\r\n\t\t\tthis.missing = [];\r\n\t\t\tthis.valid = true;\r\n\t\t},\r\n\t\tmissing: [],\r\n\t\terror: null,\r\n\t\tvalid: true,\r\n\t\tnormSchema: normSchema,\r\n\t\tresolveUrl: resolveUrl,\r\n\t\tgetDocumentUri: getDocumentUri,\r\n\t\terrorCodes: ErrorCodes\r\n\t};\r\n\tapi.language(language || 'en');\r\n\treturn api;\r\n}\r\n\r\nvar tv4 = createApi();\r\ntv4.addLanguage('en-gb', ErrorMessagesDefault);\r\n\r\n//legacy property\r\ntv4.tv4 = tv4;\r\n\r\nreturn tv4; // used by _header.js to globalise.\r\n\r\n}));","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = require(\"events\");\n/**\n * General interface for journal storage\n */\nclass JournalStore extends events_1.EventEmitter {\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        this.lastRevision = 0;\n    }\n    countTransactions() {\n        return 0;\n    }\n    putTransaction(revId, entries) {\n        if (revId > this.lastRevision) {\n            this.lastRevision = revId;\n        }\n        this.emit('transaction', revId, entries);\n    }\n    fetchTransaction(revId) {\n        return [];\n    }\n}\nexports.default = JournalStore;\n//# sourceMappingURL=JournalStore.js.map","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = (function() {\n  \"use strict\";\n\n  /*\n   * Generated by PEG.js 0.9.0.\n   *\n   * http://pegjs.org/\n   */\n\n  function peg$subclass(child, parent) {\n    function ctor() { this.constructor = child; }\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n  }\n\n  function peg$SyntaxError(message, expected, found, location) {\n    this.message  = message;\n    this.expected = expected;\n    this.found    = found;\n    this.location = location;\n    this.name     = \"SyntaxError\";\n\n    if (typeof Error.captureStackTrace === \"function\") {\n      Error.captureStackTrace(this, peg$SyntaxError);\n    }\n  }\n\n  peg$subclass(peg$SyntaxError, Error);\n\n  function peg$parse(input) {\n    var options = arguments.length > 1 ? arguments[1] : {},\n        parser  = this,\n\n        peg$FAILED = {},\n\n        peg$startRuleFunctions = { start: peg$parsestart },\n        peg$startRuleFunction  = peg$parsestart,\n\n        peg$c0 = function() { return parser.getResult();  },\n        peg$c1 = \"INPORT=\",\n        peg$c2 = { type: \"literal\", value: \"INPORT=\", description: \"\\\"INPORT=\\\"\" },\n        peg$c3 = \".\",\n        peg$c4 = { type: \"literal\", value: \".\", description: \"\\\".\\\"\" },\n        peg$c5 = \":\",\n        peg$c6 = { type: \"literal\", value: \":\", description: \"\\\":\\\"\" },\n        peg$c7 = function(node, port, pub) {return parser.registerInports(node,port,pub)},\n        peg$c8 = \"OUTPORT=\",\n        peg$c9 = { type: \"literal\", value: \"OUTPORT=\", description: \"\\\"OUTPORT=\\\"\" },\n        peg$c10 = function(node, port, pub) {return parser.registerOutports(node,port,pub)},\n        peg$c11 = \"DEFAULT_INPORT=\",\n        peg$c12 = { type: \"literal\", value: \"DEFAULT_INPORT=\", description: \"\\\"DEFAULT_INPORT=\\\"\" },\n        peg$c13 = function(name) { defaultInPort = name},\n        peg$c14 = \"DEFAULT_OUTPORT=\",\n        peg$c15 = { type: \"literal\", value: \"DEFAULT_OUTPORT=\", description: \"\\\"DEFAULT_OUTPORT=\\\"\" },\n        peg$c16 = function(name) { defaultOutPort = name},\n        peg$c17 = function(annotation) { return parser.registerAnnotation(annotation[0], annotation[1]); },\n        peg$c18 = function(edges) {return parser.registerEdges(edges);},\n        peg$c19 = \",\",\n        peg$c20 = { type: \"literal\", value: \",\", description: \"\\\",\\\"\" },\n        peg$c21 = /^[\\n\\r\\u2028\\u2029]/,\n        peg$c22 = { type: \"class\", value: \"[\\\\n\\\\r\\\\u2028\\\\u2029]\", description: \"[\\\\n\\\\r\\\\u2028\\\\u2029]\" },\n        peg$c23 = \"#\",\n        peg$c24 = { type: \"literal\", value: \"#\", description: \"\\\"#\\\"\" },\n        peg$c25 = \"->\",\n        peg$c26 = { type: \"literal\", value: \"->\", description: \"\\\"->\\\"\" },\n        peg$c27 = function(x, y) { return [x,y]; },\n        peg$c28 = function(x, proc, y) { return [{\"tgt\":makeInPort(proc, x)},{\"src\":makeOutPort(proc, y)}]; },\n        peg$c29 = function(proc, port) { return {\"src\":makeOutPort(proc, port)} },\n        peg$c30 = function(port, proc) { return {\"tgt\":makeInPort(proc, port)} },\n        peg$c31 = \"'\",\n        peg$c32 = { type: \"literal\", value: \"'\", description: \"\\\"'\\\"\" },\n        peg$c33 = function(iip) { return {\"data\":iip.join(\"\")} },\n        peg$c34 = function(iip) { return {\"data\":iip} },\n        peg$c35 = function(name) { return name},\n        peg$c36 = /^[a-zA-Z_]/,\n        peg$c37 = { type: \"class\", value: \"[a-zA-Z_]\", description: \"[a-zA-Z_]\" },\n        peg$c38 = /^[a-zA-Z0-9_\\-]/,\n        peg$c39 = { type: \"class\", value: \"[a-zA-Z0-9_\\\\-]\", description: \"[a-zA-Z0-9_\\\\-]\" },\n        peg$c40 = function(name) { return makeName(name)},\n        peg$c41 = function(name, comp) { parser.addNode(name,comp); return name},\n        peg$c42 = function(comp) { return parser.addAnonymousNode(comp, location().start.offset) },\n        peg$c43 = \"(\",\n        peg$c44 = { type: \"literal\", value: \"(\", description: \"\\\"(\\\"\" },\n        peg$c45 = /^[a-zA-Z\\/\\-0-9_]/,\n        peg$c46 = { type: \"class\", value: \"[a-zA-Z/\\\\-0-9_]\", description: \"[a-zA-Z/\\\\-0-9_]\" },\n        peg$c47 = \")\",\n        peg$c48 = { type: \"literal\", value: \")\", description: \"\\\")\\\"\" },\n        peg$c49 = function(comp, meta) { var o = {}; comp ? o.comp = comp.join(\"\") : o.comp = ''; meta ? o.meta = meta.join(\"\").split(',') : null; return o; },\n        peg$c50 = /^[a-zA-Z\\/=_,0-9]/,\n        peg$c51 = { type: \"class\", value: \"[a-zA-Z/=_,0-9]\", description: \"[a-zA-Z/=_,0-9]\" },\n        peg$c52 = function(meta) {return meta},\n        peg$c53 = \"@\",\n        peg$c54 = { type: \"literal\", value: \"@\", description: \"\\\"@\\\"\" },\n        peg$c55 = /^[a-zA-Z0-9\\-_]/,\n        peg$c56 = { type: \"class\", value: \"[a-zA-Z0-9\\\\-_]\", description: \"[a-zA-Z0-9\\\\-_]\" },\n        peg$c57 = /^[a-zA-Z0-9\\-_ .]/,\n        peg$c58 = { type: \"class\", value: \"[a-zA-Z0-9\\\\-_ \\\\.]\", description: \"[a-zA-Z0-9\\\\-_ \\\\.]\" },\n        peg$c59 = function(key, value) { return [key.join(''), value.join('')]; },\n        peg$c60 = function(portname, portindex) {return { port: options.caseSensitive? portname : portname.toLowerCase(), index: portindex != null ? portindex : undefined }},\n        peg$c61 = function(port) { return port; },\n        peg$c62 = /^[a-zA-Z.0-9_]/,\n        peg$c63 = { type: \"class\", value: \"[a-zA-Z.0-9_]\", description: \"[a-zA-Z.0-9_]\" },\n        peg$c64 = function(portname) {return makeName(portname)},\n        peg$c65 = \"[\",\n        peg$c66 = { type: \"literal\", value: \"[\", description: \"\\\"[\\\"\" },\n        peg$c67 = /^[0-9]/,\n        peg$c68 = { type: \"class\", value: \"[0-9]\", description: \"[0-9]\" },\n        peg$c69 = \"]\",\n        peg$c70 = { type: \"literal\", value: \"]\", description: \"\\\"]\\\"\" },\n        peg$c71 = function(portindex) {return parseInt(portindex.join(''))},\n        peg$c72 = /^[^\\n\\r\\u2028\\u2029]/,\n        peg$c73 = { type: \"class\", value: \"[^\\\\n\\\\r\\\\u2028\\\\u2029]\", description: \"[^\\\\n\\\\r\\\\u2028\\\\u2029]\" },\n        peg$c74 = /^[\\\\]/,\n        peg$c75 = { type: \"class\", value: \"[\\\\\\\\]\", description: \"[\\\\\\\\]\" },\n        peg$c76 = /^[']/,\n        peg$c77 = { type: \"class\", value: \"[']\", description: \"[']\" },\n        peg$c78 = function() { return \"'\"; },\n        peg$c79 = /^[^']/,\n        peg$c80 = { type: \"class\", value: \"[^']\", description: \"[^']\" },\n        peg$c81 = \" \",\n        peg$c82 = { type: \"literal\", value: \" \", description: \"\\\" \\\"\" },\n        peg$c83 = function(value) { return value; },\n        peg$c84 = \"{\",\n        peg$c85 = { type: \"literal\", value: \"{\", description: \"\\\"{\\\"\" },\n        peg$c86 = \"}\",\n        peg$c87 = { type: \"literal\", value: \"}\", description: \"\\\"}\\\"\" },\n        peg$c88 = { type: \"other\", description: \"whitespace\" },\n        peg$c89 = /^[ \\t\\n\\r]/,\n        peg$c90 = { type: \"class\", value: \"[ \\\\t\\\\n\\\\r]\", description: \"[ \\\\t\\\\n\\\\r]\" },\n        peg$c91 = \"false\",\n        peg$c92 = { type: \"literal\", value: \"false\", description: \"\\\"false\\\"\" },\n        peg$c93 = function() { return false; },\n        peg$c94 = \"null\",\n        peg$c95 = { type: \"literal\", value: \"null\", description: \"\\\"null\\\"\" },\n        peg$c96 = function() { return null;  },\n        peg$c97 = \"true\",\n        peg$c98 = { type: \"literal\", value: \"true\", description: \"\\\"true\\\"\" },\n        peg$c99 = function() { return true;  },\n        peg$c100 = function(head, m) { return m; },\n        peg$c101 = function(head, tail) {\n                  var result = {}, i;\n\n                  result[head.name] = head.value;\n\n                  for (i = 0; i < tail.length; i++) {\n                    result[tail[i].name] = tail[i].value;\n                  }\n\n                  return result;\n                },\n        peg$c102 = function(members) { return members !== null ? members: {}; },\n        peg$c103 = function(name, value) {\n                return { name: name, value: value };\n              },\n        peg$c104 = function(head, v) { return v; },\n        peg$c105 = function(head, tail) { return [head].concat(tail); },\n        peg$c106 = function(values) { return values !== null ? values : []; },\n        peg$c107 = { type: \"other\", description: \"number\" },\n        peg$c108 = function() { return parseFloat(text()); },\n        peg$c109 = /^[1-9]/,\n        peg$c110 = { type: \"class\", value: \"[1-9]\", description: \"[1-9]\" },\n        peg$c111 = /^[eE]/,\n        peg$c112 = { type: \"class\", value: \"[eE]\", description: \"[eE]\" },\n        peg$c113 = \"-\",\n        peg$c114 = { type: \"literal\", value: \"-\", description: \"\\\"-\\\"\" },\n        peg$c115 = \"+\",\n        peg$c116 = { type: \"literal\", value: \"+\", description: \"\\\"+\\\"\" },\n        peg$c117 = \"0\",\n        peg$c118 = { type: \"literal\", value: \"0\", description: \"\\\"0\\\"\" },\n        peg$c119 = { type: \"other\", description: \"string\" },\n        peg$c120 = function(chars) { return chars.join(\"\"); },\n        peg$c121 = \"\\\"\",\n        peg$c122 = { type: \"literal\", value: \"\\\"\", description: \"\\\"\\\\\\\"\\\"\" },\n        peg$c123 = \"\\\\\",\n        peg$c124 = { type: \"literal\", value: \"\\\\\", description: \"\\\"\\\\\\\\\\\"\" },\n        peg$c125 = \"/\",\n        peg$c126 = { type: \"literal\", value: \"/\", description: \"\\\"/\\\"\" },\n        peg$c127 = \"b\",\n        peg$c128 = { type: \"literal\", value: \"b\", description: \"\\\"b\\\"\" },\n        peg$c129 = function() { return \"\\b\"; },\n        peg$c130 = \"f\",\n        peg$c131 = { type: \"literal\", value: \"f\", description: \"\\\"f\\\"\" },\n        peg$c132 = function() { return \"\\f\"; },\n        peg$c133 = \"n\",\n        peg$c134 = { type: \"literal\", value: \"n\", description: \"\\\"n\\\"\" },\n        peg$c135 = function() { return \"\\n\"; },\n        peg$c136 = \"r\",\n        peg$c137 = { type: \"literal\", value: \"r\", description: \"\\\"r\\\"\" },\n        peg$c138 = function() { return \"\\r\"; },\n        peg$c139 = \"t\",\n        peg$c140 = { type: \"literal\", value: \"t\", description: \"\\\"t\\\"\" },\n        peg$c141 = function() { return \"\\t\"; },\n        peg$c142 = \"u\",\n        peg$c143 = { type: \"literal\", value: \"u\", description: \"\\\"u\\\"\" },\n        peg$c144 = function(digits) {\n                    return String.fromCharCode(parseInt(digits, 16));\n                  },\n        peg$c145 = function(sequence) { return sequence; },\n        peg$c146 = /^[^\\0-\\x1F\"\\\\]/,\n        peg$c147 = { type: \"class\", value: \"[^\\\\0-\\\\x1F\\\\x22\\\\x5C]\", description: \"[^\\\\0-\\\\x1F\\\\x22\\\\x5C]\" },\n        peg$c148 = /^[0-9a-f]/i,\n        peg$c149 = { type: \"class\", value: \"[0-9a-f]i\", description: \"[0-9a-f]i\" },\n\n        peg$currPos          = 0,\n        peg$savedPos         = 0,\n        peg$posDetailsCache  = [{ line: 1, column: 1, seenCR: false }],\n        peg$maxFailPos       = 0,\n        peg$maxFailExpected  = [],\n        peg$silentFails      = 0,\n\n        peg$result;\n\n    if (\"startRule\" in options) {\n      if (!(options.startRule in peg$startRuleFunctions)) {\n        throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n      }\n\n      peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n    }\n\n    function text() {\n      return input.substring(peg$savedPos, peg$currPos);\n    }\n\n    function location() {\n      return peg$computeLocation(peg$savedPos, peg$currPos);\n    }\n\n    function expected(description) {\n      throw peg$buildException(\n        null,\n        [{ type: \"other\", description: description }],\n        input.substring(peg$savedPos, peg$currPos),\n        peg$computeLocation(peg$savedPos, peg$currPos)\n      );\n    }\n\n    function error(message) {\n      throw peg$buildException(\n        message,\n        null,\n        input.substring(peg$savedPos, peg$currPos),\n        peg$computeLocation(peg$savedPos, peg$currPos)\n      );\n    }\n\n    function peg$computePosDetails(pos) {\n      var details = peg$posDetailsCache[pos],\n          p, ch;\n\n      if (details) {\n        return details;\n      } else {\n        p = pos - 1;\n        while (!peg$posDetailsCache[p]) {\n          p--;\n        }\n\n        details = peg$posDetailsCache[p];\n        details = {\n          line:   details.line,\n          column: details.column,\n          seenCR: details.seenCR\n        };\n\n        while (p < pos) {\n          ch = input.charAt(p);\n          if (ch === \"\\n\") {\n            if (!details.seenCR) { details.line++; }\n            details.column = 1;\n            details.seenCR = false;\n          } else if (ch === \"\\r\" || ch === \"\\u2028\" || ch === \"\\u2029\") {\n            details.line++;\n            details.column = 1;\n            details.seenCR = true;\n          } else {\n            details.column++;\n            details.seenCR = false;\n          }\n\n          p++;\n        }\n\n        peg$posDetailsCache[pos] = details;\n        return details;\n      }\n    }\n\n    function peg$computeLocation(startPos, endPos) {\n      var startPosDetails = peg$computePosDetails(startPos),\n          endPosDetails   = peg$computePosDetails(endPos);\n\n      return {\n        start: {\n          offset: startPos,\n          line:   startPosDetails.line,\n          column: startPosDetails.column\n        },\n        end: {\n          offset: endPos,\n          line:   endPosDetails.line,\n          column: endPosDetails.column\n        }\n      };\n    }\n\n    function peg$fail(expected) {\n      if (peg$currPos < peg$maxFailPos) { return; }\n\n      if (peg$currPos > peg$maxFailPos) {\n        peg$maxFailPos = peg$currPos;\n        peg$maxFailExpected = [];\n      }\n\n      peg$maxFailExpected.push(expected);\n    }\n\n    function peg$buildException(message, expected, found, location) {\n      function cleanupExpected(expected) {\n        var i = 1;\n\n        expected.sort(function(a, b) {\n          if (a.description < b.description) {\n            return -1;\n          } else if (a.description > b.description) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n\n        while (i < expected.length) {\n          if (expected[i - 1] === expected[i]) {\n            expected.splice(i, 1);\n          } else {\n            i++;\n          }\n        }\n      }\n\n      function buildMessage(expected, found) {\n        function stringEscape(s) {\n          function hex(ch) { return ch.charCodeAt(0).toString(16).toUpperCase(); }\n\n          return s\n            .replace(/\\\\/g,   '\\\\\\\\')\n            .replace(/\"/g,    '\\\\\"')\n            .replace(/\\x08/g, '\\\\b')\n            .replace(/\\t/g,   '\\\\t')\n            .replace(/\\n/g,   '\\\\n')\n            .replace(/\\f/g,   '\\\\f')\n            .replace(/\\r/g,   '\\\\r')\n            .replace(/[\\x00-\\x07\\x0B\\x0E\\x0F]/g, function(ch) { return '\\\\x0' + hex(ch); })\n            .replace(/[\\x10-\\x1F\\x80-\\xFF]/g,    function(ch) { return '\\\\x'  + hex(ch); })\n            .replace(/[\\u0100-\\u0FFF]/g,         function(ch) { return '\\\\u0' + hex(ch); })\n            .replace(/[\\u1000-\\uFFFF]/g,         function(ch) { return '\\\\u'  + hex(ch); });\n        }\n\n        var expectedDescs = new Array(expected.length),\n            expectedDesc, foundDesc, i;\n\n        for (i = 0; i < expected.length; i++) {\n          expectedDescs[i] = expected[i].description;\n        }\n\n        expectedDesc = expected.length > 1\n          ? expectedDescs.slice(0, -1).join(\", \")\n              + \" or \"\n              + expectedDescs[expected.length - 1]\n          : expectedDescs[0];\n\n        foundDesc = found ? \"\\\"\" + stringEscape(found) + \"\\\"\" : \"end of input\";\n\n        return \"Expected \" + expectedDesc + \" but \" + foundDesc + \" found.\";\n      }\n\n      if (expected !== null) {\n        cleanupExpected(expected);\n      }\n\n      return new peg$SyntaxError(\n        message !== null ? message : buildMessage(expected, found),\n        expected,\n        found,\n        location\n      );\n    }\n\n    function peg$parsestart() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = [];\n      s2 = peg$parseline();\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parseline();\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseline() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.substr(peg$currPos, 7) === peg$c1) {\n          s2 = peg$c1;\n          peg$currPos += 7;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c2); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsenode();\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 46) {\n              s4 = peg$c3;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c4); }\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseportName();\n              if (s5 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 58) {\n                  s6 = peg$c5;\n                  peg$currPos++;\n                } else {\n                  s6 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c6); }\n                }\n                if (s6 !== peg$FAILED) {\n                  s7 = peg$parseportName();\n                  if (s7 !== peg$FAILED) {\n                    s8 = peg$parse_();\n                    if (s8 !== peg$FAILED) {\n                      s9 = peg$parseLineTerminator();\n                      if (s9 === peg$FAILED) {\n                        s9 = null;\n                      }\n                      if (s9 !== peg$FAILED) {\n                        peg$savedPos = s0;\n                        s1 = peg$c7(s3, s5, s7);\n                        s0 = s1;\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parse_();\n        if (s1 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 8) === peg$c8) {\n            s2 = peg$c8;\n            peg$currPos += 8;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c9); }\n          }\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parsenode();\n            if (s3 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 46) {\n                s4 = peg$c3;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c4); }\n              }\n              if (s4 !== peg$FAILED) {\n                s5 = peg$parseportName();\n                if (s5 !== peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 58) {\n                    s6 = peg$c5;\n                    peg$currPos++;\n                  } else {\n                    s6 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c6); }\n                  }\n                  if (s6 !== peg$FAILED) {\n                    s7 = peg$parseportName();\n                    if (s7 !== peg$FAILED) {\n                      s8 = peg$parse_();\n                      if (s8 !== peg$FAILED) {\n                        s9 = peg$parseLineTerminator();\n                        if (s9 === peg$FAILED) {\n                          s9 = null;\n                        }\n                        if (s9 !== peg$FAILED) {\n                          peg$savedPos = s0;\n                          s1 = peg$c10(s3, s5, s7);\n                          s0 = s1;\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parse_();\n          if (s1 !== peg$FAILED) {\n            if (input.substr(peg$currPos, 15) === peg$c11) {\n              s2 = peg$c11;\n              peg$currPos += 15;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c12); }\n            }\n            if (s2 !== peg$FAILED) {\n              s3 = peg$parseportName();\n              if (s3 !== peg$FAILED) {\n                s4 = peg$parse_();\n                if (s4 !== peg$FAILED) {\n                  s5 = peg$parseLineTerminator();\n                  if (s5 === peg$FAILED) {\n                    s5 = null;\n                  }\n                  if (s5 !== peg$FAILED) {\n                    peg$savedPos = s0;\n                    s1 = peg$c13(s3);\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n          if (s0 === peg$FAILED) {\n            s0 = peg$currPos;\n            s1 = peg$parse_();\n            if (s1 !== peg$FAILED) {\n              if (input.substr(peg$currPos, 16) === peg$c14) {\n                s2 = peg$c14;\n                peg$currPos += 16;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c15); }\n              }\n              if (s2 !== peg$FAILED) {\n                s3 = peg$parseportName();\n                if (s3 !== peg$FAILED) {\n                  s4 = peg$parse_();\n                  if (s4 !== peg$FAILED) {\n                    s5 = peg$parseLineTerminator();\n                    if (s5 === peg$FAILED) {\n                      s5 = null;\n                    }\n                    if (s5 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c16(s3);\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n            if (s0 === peg$FAILED) {\n              s0 = peg$currPos;\n              s1 = peg$parseannotation();\n              if (s1 !== peg$FAILED) {\n                s2 = peg$parsenewline();\n                if (s2 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c17(s1);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n              if (s0 === peg$FAILED) {\n                s0 = peg$currPos;\n                s1 = peg$parsecomment();\n                if (s1 !== peg$FAILED) {\n                  s2 = peg$parsenewline();\n                  if (s2 === peg$FAILED) {\n                    s2 = null;\n                  }\n                  if (s2 !== peg$FAILED) {\n                    s1 = [s1, s2];\n                    s0 = s1;\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n                if (s0 === peg$FAILED) {\n                  s0 = peg$currPos;\n                  s1 = peg$parse_();\n                  if (s1 !== peg$FAILED) {\n                    s2 = peg$parsenewline();\n                    if (s2 !== peg$FAILED) {\n                      s1 = [s1, s2];\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$currPos;\n                    s1 = peg$parse_();\n                    if (s1 !== peg$FAILED) {\n                      s2 = peg$parseconnection();\n                      if (s2 !== peg$FAILED) {\n                        s3 = peg$parse_();\n                        if (s3 !== peg$FAILED) {\n                          s4 = peg$parseLineTerminator();\n                          if (s4 === peg$FAILED) {\n                            s4 = null;\n                          }\n                          if (s4 !== peg$FAILED) {\n                            peg$savedPos = s0;\n                            s1 = peg$c18(s2);\n                            s0 = s1;\n                          } else {\n                            peg$currPos = s0;\n                            s0 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseLineTerminator() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s2 = peg$c19;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsecomment();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parsenewline();\n            if (s4 === peg$FAILED) {\n              s4 = null;\n            }\n            if (s4 !== peg$FAILED) {\n              s1 = [s1, s2, s3, s4];\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenewline() {\n      var s0;\n\n      if (peg$c21.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c22); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsecomment() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parse_();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 35) {\n          s2 = peg$c23;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c24); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseanychar();\n          while (s4 !== peg$FAILED) {\n            s3.push(s4);\n            s4 = peg$parseanychar();\n          }\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseconnection() {\n      var s0, s1, s2, s3, s4, s5;\n\n      s0 = peg$currPos;\n      s1 = peg$parsesource();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse_();\n        if (s2 !== peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c25) {\n            s3 = peg$c25;\n            peg$currPos += 2;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c26); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parse_();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseconnection();\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c27(s1, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsedestination();\n      }\n\n      return s0;\n    }\n\n    function peg$parsesource() {\n      var s0;\n\n      s0 = peg$parsebridge();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseoutport();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseiip();\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedestination() {\n      var s0;\n\n      s0 = peg$parseinport();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsebridge();\n      }\n\n      return s0;\n    }\n\n    function peg$parsebridge() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport__();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsenode();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parse__port();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c28(s1, s2, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseport__();\n        if (s1 === peg$FAILED) {\n          s1 = null;\n        }\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parsenodeWithComponent();\n          if (s2 !== peg$FAILED) {\n            s3 = peg$parse__port();\n            if (s3 === peg$FAILED) {\n              s3 = null;\n            }\n            if (s3 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c28(s1, s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseoutport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenode();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__port();\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c29(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseinport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport__();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsenode();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c30(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseiip() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s1 = peg$c31;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c32); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseiipchar();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseiipchar();\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 39) {\n            s3 = peg$c31;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c32); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c33(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseJSON_text();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c34(s1);\n        }\n        s0 = s1;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenode() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenodeNameAndComponent();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c35(s1);\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsenodeName();\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c35(s1);\n        }\n        s0 = s1;\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          s1 = peg$parsenodeComponent();\n          if (s1 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c35(s1);\n          }\n          s0 = s1;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsenodeName() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (peg$c36.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        if (peg$c38.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          if (peg$c38.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c39); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c40(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenodeNameAndComponent() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parsenodeName();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsecomponent();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c41(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenodeComponent() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      s1 = peg$parsecomponent();\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c42(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenodeWithComponent() {\n      var s0;\n\n      s0 = peg$parsenodeNameAndComponent();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsenodeComponent();\n      }\n\n      return s0;\n    }\n\n    function peg$parsecomponent() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s1 = peg$c43;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c44); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c45.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c46); }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c45.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c46); }\n          }\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsecompMeta();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 41) {\n              s4 = peg$c47;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c48); }\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c49(s2, s3);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsecompMeta() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 58) {\n        s1 = peg$c5;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c6); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c50.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c51); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c50.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c51); }\n            }\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c52(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseannotation() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 35) {\n        s1 = peg$c23;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c24); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 64) {\n            s3 = peg$c53;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c54); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = [];\n            if (peg$c55.test(input.charAt(peg$currPos))) {\n              s5 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c56); }\n            }\n            if (s5 !== peg$FAILED) {\n              while (s5 !== peg$FAILED) {\n                s4.push(s5);\n                if (peg$c55.test(input.charAt(peg$currPos))) {\n                  s5 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s5 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c56); }\n                }\n              }\n            } else {\n              s4 = peg$FAILED;\n            }\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parse__();\n              if (s5 !== peg$FAILED) {\n                s6 = [];\n                if (peg$c57.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                }\n                if (s7 !== peg$FAILED) {\n                  while (s7 !== peg$FAILED) {\n                    s6.push(s7);\n                    if (peg$c57.test(input.charAt(peg$currPos))) {\n                      s7 = input.charAt(peg$currPos);\n                      peg$currPos++;\n                    } else {\n                      s7 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c58); }\n                    }\n                  }\n                } else {\n                  s6 = peg$FAILED;\n                }\n                if (s6 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c59(s4, s6);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseport() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseportName();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseportIndex();\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c60(s1, s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseport__() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parseport();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parse__();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c61(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parse__port() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      s1 = peg$parse__();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseport();\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c61(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseportName() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      if (peg$c36.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c37); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        if (peg$c62.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c63); }\n        }\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          if (peg$c62.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c63); }\n          }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c64(s1);\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseportIndex() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 91) {\n        s1 = peg$c65;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c66); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        if (peg$c67.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c68); }\n        }\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            if (peg$c67.test(input.charAt(peg$currPos))) {\n              s3 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c68); }\n            }\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 93) {\n            s3 = peg$c69;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c70); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c71(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseanychar() {\n      var s0;\n\n      if (peg$c72.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c73); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseiipchar() {\n      var s0, s1, s2;\n\n      s0 = peg$currPos;\n      if (peg$c74.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c75); }\n      }\n      if (s1 !== peg$FAILED) {\n        if (peg$c76.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c77); }\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c78();\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        if (peg$c79.test(input.charAt(peg$currPos))) {\n          s0 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s0 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c80); }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parse_() {\n      var s0, s1;\n\n      s0 = [];\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s1 = peg$c81;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c82); }\n      }\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (input.charCodeAt(peg$currPos) === 32) {\n          s1 = peg$c81;\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c82); }\n        }\n      }\n      if (s0 === peg$FAILED) {\n        s0 = null;\n      }\n\n      return s0;\n    }\n\n    function peg$parse__() {\n      var s0, s1;\n\n      s0 = [];\n      if (input.charCodeAt(peg$currPos) === 32) {\n        s1 = peg$c81;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c82); }\n      }\n      if (s1 !== peg$FAILED) {\n        while (s1 !== peg$FAILED) {\n          s0.push(s1);\n          if (input.charCodeAt(peg$currPos) === 32) {\n            s1 = peg$c81;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c82); }\n          }\n        }\n      } else {\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseJSON_text() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsevalue();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c83(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsebegin_array() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 91) {\n          s2 = peg$c65;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c66); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsebegin_object() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 123) {\n          s2 = peg$c84;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c85); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseend_array() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 93) {\n          s2 = peg$c69;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c70); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseend_object() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 125) {\n          s2 = peg$c86;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c87); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsename_separator() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 58) {\n          s2 = peg$c5;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c6); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsevalue_separator() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsews();\n      if (s1 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 44) {\n          s2 = peg$c19;\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c20); }\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsews();\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsews() {\n      var s0, s1;\n\n      peg$silentFails++;\n      s0 = [];\n      if (peg$c89.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c90); }\n      }\n      while (s1 !== peg$FAILED) {\n        s0.push(s1);\n        if (peg$c89.test(input.charAt(peg$currPos))) {\n          s1 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c90); }\n        }\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c88); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsevalue() {\n      var s0;\n\n      s0 = peg$parsefalse();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsenull();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsetrue();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseobject();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsearray();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsenumber();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parsestring();\n                }\n              }\n            }\n          }\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parsefalse() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 5) === peg$c91) {\n        s1 = peg$c91;\n        peg$currPos += 5;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c92); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c93();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsenull() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c94) {\n        s1 = peg$c94;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c95); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c96();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parsetrue() {\n      var s0, s1;\n\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 4) === peg$c97) {\n        s1 = peg$c97;\n        peg$currPos += 4;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c98); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c99();\n      }\n      s0 = s1;\n\n      return s0;\n    }\n\n    function peg$parseobject() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$parsebegin_object();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parsemember();\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$currPos;\n          s6 = peg$parsevalue_separator();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsemember();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s5;\n              s6 = peg$c100(s3, s7);\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            s6 = peg$parsevalue_separator();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsemember();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c100(s3, s7);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s2;\n            s3 = peg$c101(s3, s4);\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseend_object();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c102(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsemember() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsestring();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parsename_separator();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsevalue();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c103(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsearray() {\n      var s0, s1, s2, s3, s4, s5, s6, s7;\n\n      s0 = peg$currPos;\n      s1 = peg$parsebegin_array();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$currPos;\n        s3 = peg$parsevalue();\n        if (s3 !== peg$FAILED) {\n          s4 = [];\n          s5 = peg$currPos;\n          s6 = peg$parsevalue_separator();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsevalue();\n            if (s7 !== peg$FAILED) {\n              peg$savedPos = s5;\n              s6 = peg$c104(s3, s7);\n              s5 = s6;\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s5;\n            s5 = peg$FAILED;\n          }\n          while (s5 !== peg$FAILED) {\n            s4.push(s5);\n            s5 = peg$currPos;\n            s6 = peg$parsevalue_separator();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsevalue();\n              if (s7 !== peg$FAILED) {\n                peg$savedPos = s5;\n                s6 = peg$c104(s3, s7);\n                s5 = s6;\n              } else {\n                peg$currPos = s5;\n                s5 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s5;\n              s5 = peg$FAILED;\n            }\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s2;\n            s3 = peg$c105(s3, s4);\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseend_array();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c106(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsenumber() {\n      var s0, s1, s2, s3, s4;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parseminus();\n      if (s1 === peg$FAILED) {\n        s1 = null;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseint();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsefrac();\n          if (s3 === peg$FAILED) {\n            s3 = null;\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseexp();\n            if (s4 === peg$FAILED) {\n              s4 = null;\n            }\n            if (s4 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c108();\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c107); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedecimal_point() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s0 = peg$c3;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c4); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsedigit1_9() {\n      var s0;\n\n      if (peg$c109.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c110); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsee() {\n      var s0;\n\n      if (peg$c111.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c112); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseexp() {\n      var s0, s1, s2, s3, s4;\n\n      s0 = peg$currPos;\n      s1 = peg$parsee();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseminus();\n        if (s2 === peg$FAILED) {\n          s2 = peg$parseplus();\n        }\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = [];\n          s4 = peg$parseDIGIT();\n          if (s4 !== peg$FAILED) {\n            while (s4 !== peg$FAILED) {\n              s3.push(s4);\n              s4 = peg$parseDIGIT();\n            }\n          } else {\n            s3 = peg$FAILED;\n          }\n          if (s3 !== peg$FAILED) {\n            s1 = [s1, s2, s3];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parsefrac() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$currPos;\n      s1 = peg$parsedecimal_point();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseDIGIT();\n        if (s3 !== peg$FAILED) {\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseDIGIT();\n          }\n        } else {\n          s2 = peg$FAILED;\n        }\n        if (s2 !== peg$FAILED) {\n          s1 = [s1, s2];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n\n      return s0;\n    }\n\n    function peg$parseint() {\n      var s0, s1, s2, s3;\n\n      s0 = peg$parsezero();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parsedigit1_9();\n        if (s1 !== peg$FAILED) {\n          s2 = [];\n          s3 = peg$parseDIGIT();\n          while (s3 !== peg$FAILED) {\n            s2.push(s3);\n            s3 = peg$parseDIGIT();\n          }\n          if (s2 !== peg$FAILED) {\n            s1 = [s1, s2];\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseminus() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 45) {\n        s0 = peg$c113;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c114); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseplus() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 43) {\n        s0 = peg$c115;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c116); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsezero() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 48) {\n        s0 = peg$c117;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c118); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsestring() {\n      var s0, s1, s2, s3;\n\n      peg$silentFails++;\n      s0 = peg$currPos;\n      s1 = peg$parsequotation_mark();\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parsechar();\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parsechar();\n        }\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parsequotation_mark();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c120(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      peg$silentFails--;\n      if (s0 === peg$FAILED) {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c119); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsechar() {\n      var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9;\n\n      s0 = peg$parseunescaped();\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseescape();\n        if (s1 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s2 = peg$c121;\n            peg$currPos++;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c122); }\n          }\n          if (s2 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 92) {\n              s2 = peg$c123;\n              peg$currPos++;\n            } else {\n              s2 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c124); }\n            }\n            if (s2 === peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 47) {\n                s2 = peg$c125;\n                peg$currPos++;\n              } else {\n                s2 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c126); }\n              }\n              if (s2 === peg$FAILED) {\n                s2 = peg$currPos;\n                if (input.charCodeAt(peg$currPos) === 98) {\n                  s3 = peg$c127;\n                  peg$currPos++;\n                } else {\n                  s3 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c128); }\n                }\n                if (s3 !== peg$FAILED) {\n                  peg$savedPos = s2;\n                  s3 = peg$c129();\n                }\n                s2 = s3;\n                if (s2 === peg$FAILED) {\n                  s2 = peg$currPos;\n                  if (input.charCodeAt(peg$currPos) === 102) {\n                    s3 = peg$c130;\n                    peg$currPos++;\n                  } else {\n                    s3 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c131); }\n                  }\n                  if (s3 !== peg$FAILED) {\n                    peg$savedPos = s2;\n                    s3 = peg$c132();\n                  }\n                  s2 = s3;\n                  if (s2 === peg$FAILED) {\n                    s2 = peg$currPos;\n                    if (input.charCodeAt(peg$currPos) === 110) {\n                      s3 = peg$c133;\n                      peg$currPos++;\n                    } else {\n                      s3 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c134); }\n                    }\n                    if (s3 !== peg$FAILED) {\n                      peg$savedPos = s2;\n                      s3 = peg$c135();\n                    }\n                    s2 = s3;\n                    if (s2 === peg$FAILED) {\n                      s2 = peg$currPos;\n                      if (input.charCodeAt(peg$currPos) === 114) {\n                        s3 = peg$c136;\n                        peg$currPos++;\n                      } else {\n                        s3 = peg$FAILED;\n                        if (peg$silentFails === 0) { peg$fail(peg$c137); }\n                      }\n                      if (s3 !== peg$FAILED) {\n                        peg$savedPos = s2;\n                        s3 = peg$c138();\n                      }\n                      s2 = s3;\n                      if (s2 === peg$FAILED) {\n                        s2 = peg$currPos;\n                        if (input.charCodeAt(peg$currPos) === 116) {\n                          s3 = peg$c139;\n                          peg$currPos++;\n                        } else {\n                          s3 = peg$FAILED;\n                          if (peg$silentFails === 0) { peg$fail(peg$c140); }\n                        }\n                        if (s3 !== peg$FAILED) {\n                          peg$savedPos = s2;\n                          s3 = peg$c141();\n                        }\n                        s2 = s3;\n                        if (s2 === peg$FAILED) {\n                          s2 = peg$currPos;\n                          if (input.charCodeAt(peg$currPos) === 117) {\n                            s3 = peg$c142;\n                            peg$currPos++;\n                          } else {\n                            s3 = peg$FAILED;\n                            if (peg$silentFails === 0) { peg$fail(peg$c143); }\n                          }\n                          if (s3 !== peg$FAILED) {\n                            s4 = peg$currPos;\n                            s5 = peg$currPos;\n                            s6 = peg$parseHEXDIG();\n                            if (s6 !== peg$FAILED) {\n                              s7 = peg$parseHEXDIG();\n                              if (s7 !== peg$FAILED) {\n                                s8 = peg$parseHEXDIG();\n                                if (s8 !== peg$FAILED) {\n                                  s9 = peg$parseHEXDIG();\n                                  if (s9 !== peg$FAILED) {\n                                    s6 = [s6, s7, s8, s9];\n                                    s5 = s6;\n                                  } else {\n                                    peg$currPos = s5;\n                                    s5 = peg$FAILED;\n                                  }\n                                } else {\n                                  peg$currPos = s5;\n                                  s5 = peg$FAILED;\n                                }\n                              } else {\n                                peg$currPos = s5;\n                                s5 = peg$FAILED;\n                              }\n                            } else {\n                              peg$currPos = s5;\n                              s5 = peg$FAILED;\n                            }\n                            if (s5 !== peg$FAILED) {\n                              s4 = input.substring(s4, peg$currPos);\n                            } else {\n                              s4 = s5;\n                            }\n                            if (s4 !== peg$FAILED) {\n                              peg$savedPos = s2;\n                              s3 = peg$c144(s4);\n                              s2 = s3;\n                            } else {\n                              peg$currPos = s2;\n                              s2 = peg$FAILED;\n                            }\n                          } else {\n                            peg$currPos = s2;\n                            s2 = peg$FAILED;\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          if (s2 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c145(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      }\n\n      return s0;\n    }\n\n    function peg$parseescape() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 92) {\n        s0 = peg$c123;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c124); }\n      }\n\n      return s0;\n    }\n\n    function peg$parsequotation_mark() {\n      var s0;\n\n      if (input.charCodeAt(peg$currPos) === 34) {\n        s0 = peg$c121;\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c122); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseunescaped() {\n      var s0;\n\n      if (peg$c146.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c147); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseDIGIT() {\n      var s0;\n\n      if (peg$c67.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c68); }\n      }\n\n      return s0;\n    }\n\n    function peg$parseHEXDIG() {\n      var s0;\n\n      if (peg$c148.test(input.charAt(peg$currPos))) {\n        s0 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s0 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c149); }\n      }\n\n      return s0;\n    }\n\n\n      var parser, edges, nodes;\n\n      var defaultInPort = \"IN\", defaultOutPort = \"OUT\";\n\n      parser = this;\n      delete parser.properties;\n      delete parser.inports;\n      delete parser.outports;\n      delete parser.groups;\n\n      edges = parser.edges = [];\n\n      nodes = {};\n\n      var serialize, indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n      parser.validateContents = function(graph, options) {\n        // Ensure all nodes have a component\n        if (graph.processes) {\n          Object.keys(graph.processes).forEach(function (node) {\n            if (!graph.processes[node].component) {\n              throw new Error('Node \"' + node + '\" does not have a component defined');\n            }\n          });\n        }\n        // Ensure all inports point to existing nodes\n        if (graph.inports) {\n          Object.keys(graph.inports).forEach(function (port) {\n            var portDef = graph.inports[port];\n            if (!graph.processes[portDef.process]) {\n              throw new Error('Inport \"' + port + '\" is connected to an undefined target node \"' + portDef.process + '\"');\n            }\n          });\n        }\n        // Ensure all outports point to existing nodes\n        if (graph.outports) {\n          Object.keys(graph.outports).forEach(function (port) {\n            var portDef = graph.outports[port];\n            if (!graph.processes[portDef.process]) {\n              throw new Error('Outport \"' + port + '\" is connected to an undefined source node \"' + portDef.process + '\"');\n            }\n          });\n        }\n        // Ensure all edges have nodes defined\n        if (graph.connections) {\n          graph.connections.forEach(function (edge) {\n            if (edge.tgt && !graph.processes[edge.tgt.process]) {\n              if (edge.data) {\n                throw new Error('IIP containing \"' + edge.data + '\" is connected to an undefined target node \"' + edge.tgt.process + '\"');\n              }\n              throw new Error('Edge from \"' + edge.src.process + '\" port \"' + edge.src.port + '\" is connected to an undefined target node \"' + edge.tgt.process + '\"');\n            }\n            if (edge.src && !graph.processes[edge.src.process]) {\n              throw new Error('Edge to \"' + edge.tgt.process + '\" port \"' + edge.tgt.port + '\" is connected to an undefined source node \"' + edge.src.process + '\"');\n            }\n          });\n        }\n      };\n\n      parser.addNode = function (nodeName, comp) {\n        if (!nodes[nodeName]) {\n          nodes[nodeName] = {}\n        }\n        if (!!comp.comp) {\n          nodes[nodeName].component = comp.comp;\n        }\n        if (!!comp.meta) {\n          var metadata = {};\n          for (var i = 0; i < comp.meta.length; i++) {\n            var item = comp.meta[i].split('=');\n            if (item.length === 1) {\n              item = ['routes', item[0]];\n            }\n            var key = item[0];\n            var value = item[1];\n            if (key==='x' || key==='y') {\n              value = parseFloat(value);\n            }\n            metadata[key] = value;\n          }\n          nodes[nodeName].metadata=metadata;\n        }\n\n      }\n\n      var anonymousIndexes = {};\n      var anonymousNodeNames = {};\n      parser.addAnonymousNode = function(comp, offset) {\n          if (!anonymousNodeNames[offset]) {\n              var componentName = comp.comp.replace(/[^a-zA-Z0-9]+/, \"_\");\n              anonymousIndexes[componentName] = (anonymousIndexes[componentName] || 0) + 1;\n              anonymousNodeNames[offset] = \"_\" + componentName + \"_\" + anonymousIndexes[componentName];\n              this.addNode(anonymousNodeNames[offset], comp);\n          }\n          return anonymousNodeNames[offset];\n      }\n\n      parser.getResult = function () {\n        var result = {\n          inports: parser.inports || {},\n          outports: parser.outports || {},\n          groups: parser.groups || [],\n          processes: nodes || {},\n          connections: parser.processEdges()\n        };\n\n        if (parser.properties) {\n          result.properties = parser.properties;\n        }\n        result.caseSensitive = options.caseSensitive || false;\n\n        var validateSchema = parser.validateSchema; // default\n        if (typeof(options.validateSchema) !== 'undefined') { validateSchema = options.validateSchema; } // explicit option\n        if (validateSchema) {\n          if (typeof(tv4) === 'undefined') {\n            var tv4 = require(\"tv4\");\n          }\n          var schema = require(\"../schema/graph.json\");\n          var validation = tv4.validateMultiple(result, schema);\n          if (!validation.valid) {\n            throw new Error(\"fbp: Did not validate againt graph schema:\\n\" + JSON.stringify(validation.errors, null, 2));\n          }\n        }\n\n        if (typeof options.validateContents === 'undefined' || options.validateContents) {\n          parser.validateContents(result);\n        }\n\n        return result;\n      }\n\n      var flatten = function (array, isShallow) {\n        var index = -1,\n          length = array ? array.length : 0,\n          result = [];\n\n        while (++index < length) {\n          var value = array[index];\n\n          if (value instanceof Array) {\n            Array.prototype.push.apply(result, isShallow ? value : flatten(value));\n          }\n          else {\n            result.push(value);\n          }\n        }\n        return result;\n      }\n\n      parser.registerAnnotation = function (key, value) {\n        if (!parser.properties) {\n          parser.properties = {};\n        }\n\n        if (key === 'runtime') {\n          parser.properties.environment = {};\n          parser.properties.environment.type = value;\n          return;\n        }\n\n        parser.properties[key] = value;\n      };\n\n      parser.registerInports = function (node, port, pub) {\n        if (!parser.inports) {\n          parser.inports = {};\n        }\n\n        if (!options.caseSensitive) {\n          pub = pub.toLowerCase();\n          port = port.toLowerCase();\n        }\n\n        parser.inports[pub] = {process:node, port:port};\n      }\n      parser.registerOutports = function (node, port, pub) {\n        if (!parser.outports) {\n          parser.outports = {};\n        }\n\n        if (!options.caseSensitive) {\n          pub = pub.toLowerCase();\n          port = port.toLowerCase();\n        }\n\n        parser.outports[pub] = {process:node, port:port};\n      }\n\n      parser.registerEdges = function (edges) {\n        if (Array.isArray(edges)) {\n          edges.forEach(function (o, i) {\n            parser.edges.push(o);\n          });\n        }\n      }\n\n      parser.processEdges = function () {\n        var flats, grouped;\n        flats = flatten(parser.edges);\n        grouped = [];\n        var current = {};\n        for (var i = 1; i < flats.length; i += 1) {\n            // skip over default ports at the beginning of lines (could also handle this in grammar)\n            if ((\"src\" in flats[i - 1] || \"data\" in flats[i - 1]) && \"tgt\" in flats[i]) {\n                flats[i - 1].tgt = flats[i].tgt;\n                grouped.push(flats[i - 1]);\n                i++;\n            }\n        }\n        return grouped;\n      }\n\n      function makeName(s) {\n        return s[0] + s[1].join(\"\");\n      }\n\n      function makePort(process, port, defaultPort) {\n        if (!options.caseSensitive) {\n          defaultPort = defaultPort.toLowerCase()\n        }\n        var p = {\n            process: process,\n            port: port ? port.port : defaultPort\n        };\n        if (port && port.index != null) {\n            p.index = port.index;\n        }\n        return p;\n    }\n\n      function makeInPort(process, port) {\n          return makePort(process, port, defaultInPort);\n      }\n      function makeOutPort(process, port) {\n          return makePort(process, port, defaultOutPort);\n      }\n\n\n    peg$result = peg$startRuleFunction();\n\n    if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n      return peg$result;\n    } else {\n      if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n        peg$fail({ type: \"end\", description: \"end of input\" });\n      }\n\n      throw peg$buildException(\n        null,\n        peg$maxFailExpected,\n        peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n        peg$maxFailPos < input.length\n          ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n          : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n      );\n    }\n  }\n\n  return {\n    SyntaxError: peg$SyntaxError,\n    parse:       peg$parse\n  };\n})();","var indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\nmodule.exports = function serialize(graph, options) {\n  var conn, getInOutName, getName, i, inPort, input, len, name, namedComponents, outPort, output, process, ref, ref1, ref2, src, srcName, srcPort, srcProcess, tgt, tgtName, tgtPort, tgtProcess;\n  if (options == null) {\n    options = {};\n  }\n  if (typeof(graph) === 'string') {\n    input = JSON.parse(graph);\n  } else {\n    input = graph;\n  }\n  namedComponents = [];\n  output = \"\";\n  getName = function(name) {\n    if (input.processes[name].metadata != null) {\n      name = input.processes[name].metadata.label;\n    }\n    if (name.indexOf('/') > -1) {\n      name = name.split('/').pop();\n    }\n    return name;\n  };\n  getInOutName = function(name, data) {\n    if ((data.process != null) && (input.processes[data.process].metadata != null)) {\n      name = input.processes[data.process].metadata.label;\n    } else if (data.process != null) {\n      name = data.process;\n    }\n    if (name.indexOf('/') > -1) {\n      name = name.split('/').pop();\n    }\n    return name;\n  };\n  if (input.properties) {\n    if (input.properties.environment && input.properties.environment.type) {\n      output += \"# @runtime \" + input.properties.environment.type + \"\\n\";\n    }\n    Object.keys(input.properties).forEach(function (prop) {\n      if (!prop.match(/^[a-zA-Z0-9\\-_]+$/)) {\n        return;\n      }\n      var propval = input.properties[prop];\n      if (typeof propval !== 'string') {\n        return;\n      }\n      if (!propval.match(/^[a-zA-Z0-9\\-_\\s\\.]+$/)) {\n        return;\n      }\n      output += \"# @\" + prop + \" \" + propval + '\\n';\n    });\n  }\n  ref = input.inports;\n  for (name in ref) {\n    inPort = ref[name];\n    process = getInOutName(name, inPort);\n    name = input.caseSensitive ? name : name.toUpperCase();\n    inPort.port = input.caseSensitive ? inPort.port : inPort.port.toUpperCase();\n    output += \"INPORT=\" + process + \".\" + inPort.port + \":\" + name + \"\\n\";\n  }\n  ref1 = input.outports;\n  for (name in ref1) {\n    outPort = ref1[name];\n    process = getInOutName(name, outPort);\n    name = input.caseSensitive ? name : name.toUpperCase();\n    outPort.port = input.caseSensitive ? outPort.port : outPort.port.toUpperCase();\n    output += \"OUTPORT=\" + process + \".\" + outPort.port + \":\" + name + \"\\n\";\n  }\n  output += \"\\n\";\n  ref2 = input.connections;\n  for (i = 0, len = ref2.length; i < len; i++) {\n    conn = ref2[i];\n    if (conn.data != null) {\n      tgtPort = input.caseSensitive ? conn.tgt.port : conn.tgt.port.toUpperCase();\n      tgtName = conn.tgt.process;\n      tgtProcess = input.processes[tgtName].component;\n      tgt = getName(tgtName);\n      if (indexOf.call(namedComponents, tgtProcess) < 0) {\n        tgt += \"(\" + tgtProcess + \")\";\n        namedComponents.push(tgtProcess);\n      }\n      output += '\"' + conn.data + '\"' + (\" -> \" + tgtPort + \" \" + tgt + \"\\n\");\n    } else {\n      srcPort = input.caseSensitive ? conn.src.port : conn.src.port.toUpperCase();\n      srcName = conn.src.process;\n      srcProcess = input.processes[srcName].component;\n      src = getName(srcName);\n      if (indexOf.call(namedComponents, srcProcess) < 0) {\n        src += \"(\" + srcProcess + \")\";\n        namedComponents.push(srcProcess);\n      }\n      tgtPort = input.caseSensitive ? conn.tgt.port : conn.tgt.port.toUpperCase();\n      tgtName = conn.tgt.process;\n      tgtProcess = input.processes[tgtName].component;\n      tgt = getName(tgtName);\n      if (indexOf.call(namedComponents, tgtProcess) < 0) {\n        tgt += \"(\" + tgtProcess + \")\";\n        namedComponents.push(tgtProcess);\n      }\n      output += src + \" \" + srcPort + \" -> \" + tgtPort + \" \" + tgt + \"\\n\";\n    }\n  }\n  return output;\n}\n","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Graph = exports.Journal = exports.graph = exports.journal = void 0;\nconst journal = require(\"./Journal\");\nexports.journal = journal;\nconst graph = require(\"./Graph\");\nexports.graph = graph;\nconst { Journal } = journal;\nexports.Journal = Journal;\nconst { Graph } = graph;\nexports.Graph = Graph;\n//# sourceMappingURL=index.js.map","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MemoryJournalStore = exports.JournalStore = exports.Journal = void 0;\n//     FBP Graph Journal\n//     (c) 2016-2020 Flowhub UG\n//     (c) 2014 Jon Nordby\n//     (c) 2013 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     FBP Graph may be freely distributed under the MIT license\nconst events_1 = require(\"events\");\nconst clone = require(\"clone\");\nconst JournalStore_1 = require(\"./JournalStore\");\nexports.JournalStore = JournalStore_1.default;\nconst MemoryJournalStore_1 = require(\"./MemoryJournalStore\");\nexports.MemoryJournalStore = MemoryJournalStore_1.default;\nfunction entryToPrettyString(entry) {\n    const a = entry.args;\n    switch (entry.cmd) {\n        case 'addNode': return `${a.id}(${a.component})`;\n        case 'removeNode': return `DEL ${a.id}(${a.component})`;\n        case 'renameNode': return `RENAME ${a.oldId} ${a.newId}`;\n        case 'changeNode': return `META ${a.id}`;\n        case 'addEdge': return `${a.from.node} ${a.from.port} -> ${a.to.port} ${a.to.node}`;\n        case 'removeEdge': return `${a.from.node} ${a.from.port} -X> ${a.to.port} ${a.to.node}`;\n        case 'changeEdge': return `META ${a.from.node} ${a.from.port} -> ${a.to.port} ${a.to.node}`;\n        case 'addInitial': return `'${a.from.data}' -> ${a.to.port} ${a.to.node}`;\n        case 'removeInitial': return `'${a.from.data}' -X> ${a.to.port} ${a.to.node}`;\n        case 'startTransaction': return `>>> ${entry.rev}: ${a.id}`;\n        case 'endTransaction': return `<<< ${entry.rev}: ${a.id}`;\n        case 'changeProperties': return 'PROPERTIES';\n        case 'addGroup': return `GROUP ${a.name}`;\n        case 'renameGroup': return `RENAME GROUP ${a.oldName} ${a.newName}`;\n        case 'removeGroup': return `DEL GROUP ${a.name}`;\n        case 'changeGroup': return `META GROUP ${a.name}`;\n        case 'addInport': return `INPORT ${a.name}`;\n        case 'removeInport': return `DEL INPORT ${a.name}`;\n        case 'renameInport': return `RENAME INPORT ${a.oldId} ${a.newId}`;\n        case 'changeInport': return `META INPORT ${a.name}`;\n        case 'addOutport': return `OUTPORT ${a.name}`;\n        case 'removeOutport': return `DEL OUTPORT ${a.name}`;\n        case 'renameOutport': return `RENAME OUTPORT ${a.oldId} ${a.newId}`;\n        case 'changeOutport': return `META OUTPORT ${a.name}`;\n        default: throw new Error(`Unknown journal entry: ${entry.cmd}`);\n    }\n}\n// To set, not just update (append) metadata\nfunction calculateMeta(oldMeta, newMeta) {\n    const setMeta = {};\n    Object.keys(oldMeta).forEach((k) => {\n        setMeta[k] = null;\n    });\n    Object.keys(newMeta).forEach((k) => {\n        const v = newMeta[k];\n        setMeta[k] = v;\n    });\n    return setMeta;\n}\n// ## Journalling graph changes\n//\n// The Journal can follow graph changes, store them\n// and allows to recall previous revisions of the graph.\n//\n// Revisions stored in the journal follow the transactions of the graph.\n// It is not possible to operate on smaller changes than individual transactions.\n// Use startTransaction and endTransaction on Graph to structure the revisions logical changesets.\nclass Journal extends events_1.EventEmitter {\n    constructor(graph, metadata, store) {\n        super();\n        this.graph = graph;\n        // Entries added during this revision\n        this.entries = [];\n        // Whether we should respond to graph change notifications or not\n        this.subscribed = true;\n        this.store = store || new MemoryJournalStore_1.default(this.graph);\n        if (this.store.countTransactions() === 0) {\n            // Sync journal with current graph to start transaction history\n            this.currentRevision = -1;\n            this.startTransaction('initial', metadata || {});\n            this.graph.nodes.forEach((node) => {\n                this.appendCommand('addNode', node);\n            });\n            this.graph.edges.forEach((edge) => {\n                this.appendCommand('addEdge', edge);\n            });\n            this.graph.initializers.forEach((iip) => {\n                this.appendCommand('addInitial', iip);\n            });\n            if (Object.keys(this.graph.properties).length > 0) {\n                this.appendCommand('changeProperties', this.graph.properties);\n            }\n            Object.keys(this.graph.inports).forEach((name) => {\n                const port = this.graph.inports[name];\n                this.appendCommand('addInport', {\n                    name,\n                    port,\n                });\n            });\n            Object.keys(this.graph.outports).forEach((name) => {\n                const port = this.graph.outports[name];\n                this.appendCommand('addOutport', {\n                    name,\n                    port,\n                });\n            });\n            this.graph.groups.forEach((group) => {\n                this.appendCommand('addGroup', group);\n            });\n            this.endTransaction('initial', metadata || {});\n        }\n        else {\n            // Persistent store, start with its latest rev\n            this.currentRevision = this.store.lastRevision;\n        }\n        // Subscribe to graph changes\n        this.graph.on('addNode', (node) => {\n            this.appendCommand('addNode', node);\n        });\n        this.graph.on('removeNode', (node) => {\n            this.appendCommand('removeNode', node);\n        });\n        this.graph.on('renameNode', (oldId, newId) => {\n            const args = {\n                oldId,\n                newId,\n            };\n            this.appendCommand('renameNode', args);\n        });\n        this.graph.on('changeNode', (node, oldMeta) => {\n            this.appendCommand('changeNode', {\n                id: node.id,\n                new: node.metadata,\n                old: oldMeta,\n            });\n        });\n        this.graph.on('addEdge', (edge) => {\n            this.appendCommand('addEdge', edge);\n        });\n        this.graph.on('removeEdge', (edge) => {\n            this.appendCommand('removeEdge', edge);\n        });\n        this.graph.on('changeEdge', (edge, oldMeta) => {\n            this.appendCommand('changeEdge', {\n                from: edge.from,\n                to: edge.to,\n                new: edge.metadata,\n                old: oldMeta,\n            });\n        });\n        this.graph.on('addInitial', (iip) => {\n            this.appendCommand('addInitial', iip);\n        });\n        this.graph.on('removeInitial', (iip) => {\n            this.appendCommand('removeInitial', iip);\n        });\n        this.graph.on('changeProperties', (newProps, oldProps) => this.appendCommand('changeProperties', { new: newProps, old: oldProps }));\n        this.graph.on('addGroup', (group) => this.appendCommand('addGroup', group));\n        this.graph.on('renameGroup', (oldName, newName) => this.appendCommand('renameGroup', {\n            oldName,\n            newName,\n        }));\n        this.graph.on('removeGroup', (group) => this.appendCommand('removeGroup', group));\n        this.graph.on('changeGroup', (group, oldMeta) => this.appendCommand('changeGroup', { name: group.name, new: group.metadata, old: oldMeta }));\n        this.graph.on('addExport', (exported) => this.appendCommand('addExport', exported));\n        this.graph.on('removeExport', (exported) => this.appendCommand('removeExport', exported));\n        this.graph.on('addInport', (name, port) => this.appendCommand('addInport', { name, port }));\n        this.graph.on('removeInport', (name, port) => this.appendCommand('removeInport', { name, port }));\n        this.graph.on('renameInport', (oldId, newId) => this.appendCommand('renameInport', { oldId, newId }));\n        this.graph.on('changeInport', (name, port, oldMeta) => this.appendCommand('changeInport', { name, new: port.metadata, old: oldMeta }));\n        this.graph.on('addOutport', (name, port) => this.appendCommand('addOutport', { name, port }));\n        this.graph.on('removeOutport', (name, port) => this.appendCommand('removeOutport', { name, port }));\n        this.graph.on('renameOutport', (oldId, newId) => this.appendCommand('renameOutport', { oldId, newId }));\n        this.graph.on('changeOutport', (name, port, oldMeta) => this.appendCommand('changeOutport', { name, new: port.metadata, old: oldMeta }));\n        this.graph.on('startTransaction', (id, meta) => {\n            this.startTransaction(id, meta);\n        });\n        this.graph.on('endTransaction', (id, meta) => {\n            this.endTransaction(id, meta);\n        });\n    }\n    startTransaction(id, meta) {\n        if (!this.subscribed) {\n            return;\n        }\n        if (this.entries.length > 0) {\n            throw Error('Inconsistent @entries');\n        }\n        this.currentRevision += 1;\n        this.appendCommand('startTransaction', {\n            id,\n            metadata: meta,\n        }, this.currentRevision);\n    }\n    endTransaction(id, meta) {\n        if (!this.subscribed) {\n            return;\n        }\n        this.appendCommand('endTransaction', {\n            id, metadata: meta,\n        }, this.currentRevision);\n        // TODO: this would be the place to refine @entries into\n        // a minimal set of changes, like eliminating changes early in transaction\n        // which were later reverted/overwritten\n        this.store.putTransaction(this.currentRevision, this.entries);\n        this.entries = [];\n    }\n    appendCommand(cmd, args, rev = null) {\n        if (!this.subscribed) {\n            return;\n        }\n        const entry = {\n            cmd,\n            args: clone(args),\n            rev: rev,\n        };\n        this.entries.push(entry);\n    }\n    executeEntry(entry) {\n        const a = entry.args;\n        switch (entry.cmd) {\n            case 'addNode': {\n                this.graph.addNode(a.id, a.component);\n                break;\n            }\n            case 'removeNode': {\n                this.graph.removeNode(a.id);\n                break;\n            }\n            case 'renameNode': {\n                this.graph.renameNode(a.oldId, a.newId);\n                break;\n            }\n            case 'changeNode': {\n                this.graph.setNodeMetadata(a.id, calculateMeta(a.old, a.new));\n                break;\n            }\n            case 'addEdge': {\n                this.graph.addEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n                break;\n            }\n            case 'removeEdge': {\n                this.graph.removeEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n                break;\n            }\n            case 'changeEdge': {\n                this.graph.setEdgeMetadata(a.from.node, a.from.port, a.to.node, a.to.port, calculateMeta(a.old, a.new));\n                break;\n            }\n            case 'addInitial': {\n                if (typeof a.to.index === 'number') {\n                    this.graph.addInitialIndex(a.from.data, a.to.node, a.to.port, a.to.index, a.metadata);\n                }\n                else {\n                    this.graph.addInitial(a.from.data, a.to.node, a.to.port, a.metadata);\n                }\n                break;\n            }\n            case 'removeInitial': {\n                this.graph.removeInitial(a.to.node, a.to.port);\n                break;\n            }\n            case 'startTransaction': {\n                break;\n            }\n            case 'endTransaction': {\n                break;\n            }\n            case 'changeProperties': {\n                this.graph.setProperties(a.new);\n                break;\n            }\n            case 'addGroup': {\n                this.graph.addGroup(a.name, a.nodes, a.metadata);\n                break;\n            }\n            case 'renameGroup': {\n                this.graph.renameGroup(a.oldName, a.newName);\n                break;\n            }\n            case 'removeGroup': {\n                this.graph.removeGroup(a.name);\n                break;\n            }\n            case 'changeGroup': {\n                this.graph.setGroupMetadata(a.name, calculateMeta(a.old, a.new));\n                break;\n            }\n            case 'addInport': {\n                this.graph.addInport(a.name, a.port.process, a.port.port, a.port.metadata);\n                break;\n            }\n            case 'removeInport': {\n                this.graph.removeInport(a.name);\n                break;\n            }\n            case 'renameInport': {\n                this.graph.renameInport(a.oldId, a.newId);\n                break;\n            }\n            case 'changeInport': {\n                this.graph.setInportMetadata(a.name, calculateMeta(a.old, a.new));\n                break;\n            }\n            case 'addOutport': {\n                this.graph.addOutport(a.name, a.port.process, a.port.port, a.port.metadata(a.name));\n                break;\n            }\n            case 'removeOutport': {\n                this.graph.removeOutport(a.name);\n                break;\n            }\n            case 'renameOutport': {\n                this.graph.renameOutport(a.oldId, a.newId);\n                break;\n            }\n            case 'changeOutport': {\n                this.graph.setOutportMetadata(a.name, calculateMeta(a.old, a.new));\n                break;\n            }\n            default: throw new Error(`Unknown journal entry: ${entry.cmd}`);\n        }\n    }\n    executeEntryInversed(entry) {\n        const a = entry.args;\n        switch (entry.cmd) {\n            case 'addNode': {\n                this.graph.removeNode(a.id);\n                break;\n            }\n            case 'removeNode': {\n                this.graph.addNode(a.id, a.component);\n                break;\n            }\n            case 'renameNode': {\n                this.graph.renameNode(a.newId, a.oldId);\n                break;\n            }\n            case 'changeNode': {\n                this.graph.setNodeMetadata(a.id, calculateMeta(a.new, a.old));\n                break;\n            }\n            case 'addEdge': {\n                this.graph.removeEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n                break;\n            }\n            case 'removeEdge': {\n                this.graph.addEdge(a.from.node, a.from.port, a.to.node, a.to.port);\n                break;\n            }\n            case 'changeEdge': {\n                this.graph.setEdgeMetadata(a.from.node, a.from.port, a.to.node, a.to.port, calculateMeta(a.new, a.old));\n                break;\n            }\n            case 'addInitial': {\n                this.graph.removeInitial(a.to.node, a.to.port);\n                break;\n            }\n            case 'removeInitial': {\n                if (typeof a.to.index === 'number') {\n                    this.graph.addInitialIndex(a.from.data, a.to.node, a.to.port, a.to.index, a.metadata);\n                }\n                else {\n                    this.graph.addInitial(a.from.data, a.to.node, a.to.port, a.metadata);\n                }\n                break;\n            }\n            case 'startTransaction': {\n                break;\n            }\n            case 'endTransaction': {\n                break;\n            }\n            case 'changeProperties': {\n                this.graph.setProperties(a.old);\n                break;\n            }\n            case 'addGroup': {\n                this.graph.removeGroup(a.name);\n                break;\n            }\n            case 'renameGroup': {\n                this.graph.renameGroup(a.newName, a.oldName);\n                break;\n            }\n            case 'removeGroup': {\n                this.graph.addGroup(a.name, a.nodes, a.metadata);\n                break;\n            }\n            case 'changeGroup': {\n                this.graph.setGroupMetadata(a.name, calculateMeta(a.new, a.old));\n                break;\n            }\n            case 'addInport': {\n                this.graph.removeInport(a.name);\n                break;\n            }\n            case 'removeInport': {\n                this.graph.addInport(a.name, a.port.process, a.port.port, a.port.metadata);\n                break;\n            }\n            case 'renameInport': {\n                this.graph.renameInport(a.newId, a.oldId);\n                break;\n            }\n            case 'changeInport': {\n                this.graph.setInportMetadata(a.name, calculateMeta(a.new, a.old));\n                break;\n            }\n            case 'addOutport': {\n                this.graph.removeOutport(a.name);\n                break;\n            }\n            case 'removeOutport': {\n                this.graph.addOutport(a.name, a.port.process, a.port.port, a.port.metadata);\n                break;\n            }\n            case 'renameOutport': {\n                this.graph.renameOutport(a.newId, a.oldId);\n                break;\n            }\n            case 'changeOutport': {\n                this.graph.setOutportMetadata(a.name, calculateMeta(a.new, a.old));\n                break;\n            }\n            default: throw new Error(`Unknown journal entry: ${entry.cmd}`);\n        }\n    }\n    moveToRevision(revId) {\n        if (revId === this.currentRevision) {\n            return;\n        }\n        this.subscribed = false;\n        if (revId > this.currentRevision) {\n            // Forward replay journal to revId\n            for (let start = this.currentRevision + 1, r = start, end = revId, asc = start <= end; asc ? r <= end : r >= end; asc ? r += 1 : r -= 1) {\n                this.store.fetchTransaction(r).forEach((entry) => {\n                    this.executeEntry(entry);\n                });\n            }\n        }\n        else {\n            // Move backwards, and apply inverse changes\n            for (let r = this.currentRevision, end = revId + 1; r >= end; r -= 1) {\n                // Apply entries in reverse order\n                const entries = this.store.fetchTransaction(r).slice(0);\n                entries.reverse();\n                entries.forEach((entry) => {\n                    this.executeEntryInversed(entry);\n                });\n            }\n        }\n        this.currentRevision = revId;\n        this.subscribed = true;\n    }\n    // ## Undoing & redoing\n    // Undo the last graph change\n    undo() {\n        if (!this.canUndo()) {\n            return;\n        }\n        this.moveToRevision(this.currentRevision - 1);\n    }\n    // If there is something to undo\n    canUndo() {\n        return this.currentRevision > 0;\n    }\n    // Redo the last undo\n    redo() {\n        if (!this.canRedo()) {\n            return;\n        }\n        this.moveToRevision(this.currentRevision + 1);\n    }\n    // If there is something to redo\n    canRedo() {\n        return this.currentRevision < this.store.lastRevision;\n    }\n    // # Serializing\n    // Render a pretty printed string of the journal. Changes are abbreviated\n    toPrettyString(startRev = 0, endRevParam) {\n        const endRev = endRevParam || this.store.lastRevision;\n        const lines = [];\n        for (let r = startRev, end = endRev, asc = startRev <= end; asc ? r < end : r > end; asc ? r += 1 : r -= 1) {\n            const e = this.store.fetchTransaction(r);\n            e.forEach((entry) => {\n                lines.push(entryToPrettyString(entry));\n            });\n        }\n        return lines.join('\\n');\n    }\n    // Serialize journal to JSON\n    toJSON(startRev = 0, endRevParam = null) {\n        const endRev = endRevParam || this.store.lastRevision;\n        const entries = [];\n        for (let r = startRev, end = endRev; r < end; r += 1) {\n            const e = this.store.fetchTransaction(r);\n            e.forEach((entry) => {\n                entries.push(entryToPrettyString(entry));\n            });\n        }\n        return entries;\n    }\n    save(file, callback) {\n        const json = JSON.stringify(this.toJSON(), null, 4);\n        const { writeFile } = require('fs');\n        // eslint-disable-next-line global-require\n        writeFile(`${file}.json`, json, 'utf-8', callback);\n    }\n}\nexports.Journal = Journal;\n//# sourceMappingURL=Journal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst JournalStore_1 = require(\"./JournalStore\");\n/**\n * In-memory journal storage\n *\n */\nclass MemoryJournalStore extends JournalStore_1.default {\n    constructor(graph) {\n        super(graph);\n        this.transactions = [];\n    }\n    countTransactions() {\n        return this.transactions.length;\n    }\n    putTransaction(revId, entries) {\n        super.putTransaction(revId, entries);\n        this.transactions[revId] = entries;\n    }\n    fetchTransaction(revId) {\n        return this.transactions[revId];\n    }\n}\nexports.default = MemoryJournalStore;\n//# sourceMappingURL=MemoryJournalStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeResolveTheirs = exports.equivalent = exports.loadFile = exports.loadFBP = exports.loadJSON = exports.createGraph = exports.Graph = void 0;\n//     FBP Graph\n//     (c) 2013-2020 Flowhub UG\n//     (c) 2011-2012 Henri Bergius, Nemein\n//     FBP Graph may be freely distributed under the MIT license\n//\n// FBP graphs are Event Emitters, providing signals when the graph\n// definition changes.\n/* eslint-env browser, node */\nconst events_1 = require(\"events\");\nconst clone = require(\"clone\");\nconst Platform_1 = require(\"./Platform\");\n// This class represents an abstract FBP graph containing nodes\n// connected to each other with edges.\n//\n// These graphs can be used for visualization and sketching, but\n// also are the way to start a NoFlo or other FBP network.\nclass Graph extends events_1.EventEmitter {\n    constructor(name = '', options = {}) {\n        super();\n        this.setMaxListeners(0);\n        this.name = name;\n        this.properties = {};\n        this.nodes = [];\n        this.edges = [];\n        this.initializers = [];\n        this.inports = {};\n        this.outports = {};\n        this.groups = [];\n        this.transaction = {\n            id: null,\n            depth: 0,\n        };\n        this.caseSensitive = options.caseSensitive || false;\n    }\n    getPortName(port = '') {\n        if (this.caseSensitive) {\n            return port;\n        }\n        return port.toLowerCase();\n    }\n    // ## Group graph changes into transactions\n    //\n    // If no transaction is explicitly opened, each call to\n    // the graph API will implicitly create a transaction for that change\n    startTransaction(id, metadata = {}) {\n        if (this.transaction.id) {\n            throw Error('Nested transactions not supported');\n        }\n        this.transaction.id = id;\n        this.transaction.depth = 1;\n        this.emit('startTransaction', id, metadata);\n    }\n    endTransaction(id, metadata = {}) {\n        if (!this.transaction.id) {\n            throw Error('Attempted to end non-existing transaction');\n        }\n        this.transaction.id = null;\n        this.transaction.depth = 0;\n        this.emit('endTransaction', id, metadata);\n    }\n    checkTransactionStart() {\n        if (!this.transaction.id) {\n            this.startTransaction('implicit');\n        }\n        else if (this.transaction.id === 'implicit') {\n            this.transaction.depth += 1;\n        }\n    }\n    checkTransactionEnd() {\n        if (this.transaction.id === 'implicit') {\n            this.transaction.depth -= 1;\n        }\n        if (this.transaction.depth === 0) {\n            this.endTransaction('implicit');\n        }\n    }\n    // ## Modifying Graph properties\n    //\n    // This method allows changing properties of the graph.\n    setProperties(properties) {\n        this.checkTransactionStart();\n        const before = clone(this.properties);\n        Object.keys(properties).forEach((item) => {\n            const val = properties[item];\n            this.properties[item] = val;\n        });\n        this.emit('changeProperties', this.properties, before);\n        this.checkTransactionEnd();\n    }\n    addInport(publicPort, nodeKey, portKey, metadata = {}) {\n        // Check that node exists\n        if (!this.getNode(nodeKey)) {\n            return;\n        }\n        const portName = this.getPortName(publicPort);\n        this.checkTransactionStart();\n        this.inports[portName] = {\n            process: nodeKey,\n            port: this.getPortName(portKey),\n            metadata,\n        };\n        this.emit('addInport', portName, this.inports[portName]);\n        this.checkTransactionEnd();\n    }\n    removeInport(publicPort) {\n        const portName = this.getPortName(publicPort);\n        if (!this.inports[portName]) {\n            return;\n        }\n        this.checkTransactionStart();\n        const port = this.inports[portName];\n        this.setInportMetadata(portName, {});\n        delete this.inports[portName];\n        this.emit('removeInport', portName, port);\n        this.checkTransactionEnd();\n    }\n    renameInport(oldPort, newPort) {\n        const oldPortName = this.getPortName(oldPort);\n        const newPortName = this.getPortName(newPort);\n        if (!this.inports[oldPortName]) {\n            return;\n        }\n        if (newPortName === oldPortName) {\n            return;\n        }\n        this.checkTransactionStart();\n        this.inports[newPortName] = this.inports[oldPortName];\n        delete this.inports[oldPortName];\n        this.emit('renameInport', oldPortName, newPortName);\n        this.checkTransactionEnd();\n    }\n    setInportMetadata(publicPort, metadata) {\n        const portName = this.getPortName(publicPort);\n        if (!this.inports[portName]) {\n            return;\n        }\n        this.checkTransactionStart();\n        if (!this.inports[portName].metadata) {\n            this.inports[portName].metadata = {};\n        }\n        const before = clone(this.inports[portName].metadata);\n        Object.keys(metadata).forEach((item) => {\n            const val = metadata[item];\n            const existingMeta = this.inports[portName].metadata;\n            if (!existingMeta) {\n                return;\n            }\n            if (val != null) {\n                existingMeta[item] = val;\n            }\n            else {\n                delete existingMeta[item];\n            }\n        });\n        this.emit('changeInport', portName, this.inports[portName], before, metadata);\n        this.checkTransactionEnd();\n    }\n    addOutport(publicPort, nodeKey, portKey, metadata = {}) {\n        // Check that node exists\n        if (!this.getNode(nodeKey)) {\n            return;\n        }\n        const portName = this.getPortName(publicPort);\n        this.checkTransactionStart();\n        this.outports[portName] = {\n            process: nodeKey,\n            port: this.getPortName(portKey),\n            metadata,\n        };\n        this.emit('addOutport', portName, this.outports[portName]);\n        this.checkTransactionEnd();\n    }\n    removeOutport(publicPort) {\n        const portName = this.getPortName(publicPort);\n        if (!this.outports[portName]) {\n            return;\n        }\n        this.checkTransactionStart();\n        const port = this.outports[portName];\n        this.setOutportMetadata(portName, {});\n        delete this.outports[portName];\n        this.emit('removeOutport', portName, port);\n        this.checkTransactionEnd();\n    }\n    renameOutport(oldPort, newPort) {\n        const oldPortName = this.getPortName(oldPort);\n        const newPortName = this.getPortName(newPort);\n        if (!this.outports[oldPortName]) {\n            return;\n        }\n        this.checkTransactionStart();\n        this.outports[newPortName] = this.outports[oldPortName];\n        delete this.outports[oldPortName];\n        this.emit('renameOutport', oldPortName, newPortName);\n        this.checkTransactionEnd();\n    }\n    setOutportMetadata(publicPort, metadata) {\n        const portName = this.getPortName(publicPort);\n        if (!this.outports[portName]) {\n            return;\n        }\n        this.checkTransactionStart();\n        const before = clone(this.outports[portName].metadata);\n        if (!this.outports[portName].metadata) {\n            this.outports[portName].metadata = {};\n        }\n        Object.keys(metadata).forEach((item) => {\n            const val = metadata[item];\n            const existingMeta = this.outports[portName].metadata;\n            if (!existingMeta) {\n                return;\n            }\n            if (val != null) {\n                existingMeta[item] = val;\n            }\n            else {\n                delete existingMeta[item];\n            }\n        });\n        this.emit('changeOutport', portName, this.outports[portName], before, metadata);\n        this.checkTransactionEnd();\n    }\n    // ## Grouping nodes in a graph\n    //\n    addGroup(group, nodes, metadata) {\n        this.checkTransactionStart();\n        const g = {\n            name: group,\n            nodes,\n            metadata,\n        };\n        this.groups.push(g);\n        this.emit('addGroup', g);\n        this.checkTransactionEnd();\n        return g;\n    }\n    renameGroup(oldName, newName) {\n        this.checkTransactionStart();\n        this.groups.forEach((group) => {\n            if (!group) {\n                return;\n            }\n            if (group.name !== oldName) {\n                return;\n            }\n            const g = group;\n            g.name = newName;\n            this.emit('renameGroup', oldName, newName);\n        });\n        this.checkTransactionEnd();\n    }\n    removeGroup(groupName) {\n        this.checkTransactionStart();\n        this.groups = this.groups.filter((group) => {\n            if (!group) {\n                return false;\n            }\n            if (group.name !== groupName) {\n                return true;\n            }\n            this.setGroupMetadata(group.name, {});\n            this.emit('removeGroup', group);\n            return false;\n        });\n        this.checkTransactionEnd();\n    }\n    setGroupMetadata(groupName, metadata) {\n        this.checkTransactionStart();\n        this.groups.forEach((group) => {\n            if (!group) {\n                return;\n            }\n            if (group.name !== groupName) {\n                return;\n            }\n            const before = clone(group.metadata);\n            Object.keys(metadata).forEach((item) => {\n                const val = metadata[item];\n                const g = group;\n                if (!g.metadata) {\n                    return;\n                }\n                if (val != null) {\n                    g.metadata[item] = val;\n                }\n                else {\n                    delete g.metadata[item];\n                }\n            });\n            this.emit('changeGroup', group, before, metadata);\n        });\n        this.checkTransactionEnd();\n    }\n    // ## Adding a node to the graph\n    //\n    // Nodes are identified by an ID unique to the graph. Additionally,\n    // a node may contain information on what FBP component it is and\n    // possible display coordinates.\n    //\n    // For example:\n    //\n    //     myGraph.addNode 'Read, 'ReadFile',\n    //       x: 91\n    //       y: 154\n    //\n    // Addition of a node will emit the `addNode` event.\n    addNode(id, component, metadata = {}) {\n        this.checkTransactionStart();\n        const node = {\n            id,\n            component,\n            metadata,\n        };\n        this.nodes.push(node);\n        this.emit('addNode', node);\n        this.checkTransactionEnd();\n        return node;\n    }\n    // ## Removing a node from the graph\n    //\n    // Existing nodes can be removed from a graph by their ID. This\n    // will remove the node and also remove all edges connected to it.\n    //\n    //     myGraph.removeNode 'Read'\n    //\n    // Once the node has been removed, the `removeNode` event will be\n    // emitted.\n    removeNode(id) {\n        const node = this.getNode(id);\n        if (!node) {\n            return;\n        }\n        this.checkTransactionStart();\n        this.edges.forEach((edge) => {\n            if ((edge.from.node === node.id) || (edge.to.node === node.id)) {\n                this.removeEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port);\n            }\n        });\n        this.initializers.forEach((initializer) => {\n            if (initializer.to.node === node.id) {\n                this.removeInitial(initializer.to.node, initializer.to.port);\n            }\n        });\n        Object.keys(this.inports).forEach((pub) => {\n            const priv = this.inports[pub];\n            if (priv.process === id) {\n                this.removeInport(pub);\n            }\n        });\n        Object.keys(this.outports).forEach((pub) => {\n            const priv = this.outports[pub];\n            if (priv.process === id) {\n                this.removeOutport(pub);\n            }\n        });\n        this.groups.forEach((group) => {\n            if (!group) {\n                return;\n            }\n            const index = group.nodes.indexOf(id);\n            if (index === -1) {\n                return;\n            }\n            group.nodes.splice(index, 1);\n            if (group.nodes.length === 0) {\n                // Don't leave empty groups behind\n                this.removeGroup(group.name);\n            }\n        });\n        this.setNodeMetadata(id, {});\n        this.nodes = this.nodes.filter((n) => n !== node);\n        this.emit('removeNode', node);\n        this.checkTransactionEnd();\n    }\n    // ## Getting a node\n    //\n    // Nodes objects can be retrieved from the graph by their ID:\n    //\n    //     myNode = myGraph.getNode 'Read'\n    getNode(id) {\n        const node = this.nodes.find((node) => node && node.id === id);\n        if (!node) {\n            return null;\n        }\n        return node;\n    }\n    // ## Renaming a node\n    //\n    // Nodes IDs can be changed by calling this method.\n    renameNode(oldId, newId) {\n        this.checkTransactionStart();\n        const node = this.getNode(oldId);\n        if (!node) {\n            return;\n        }\n        node.id = newId;\n        this.edges.forEach((e) => {\n            const edge = e;\n            if (!edge) {\n                return;\n            }\n            if (edge.from.node === oldId) {\n                edge.from.node = newId;\n            }\n            if (edge.to.node === oldId) {\n                edge.to.node = newId;\n            }\n        });\n        this.initializers.forEach((i) => {\n            const iip = i;\n            if (!iip) {\n                return;\n            }\n            if (iip.to.node === oldId) {\n                iip.to.node = newId;\n            }\n        });\n        Object.keys(this.inports).forEach((pub) => {\n            const priv = this.inports[pub];\n            if (priv.process === oldId) {\n                priv.process = newId;\n            }\n        });\n        Object.keys(this.outports).forEach((pub) => {\n            const priv = this.outports[pub];\n            if (priv.process === oldId) {\n                priv.process = newId;\n            }\n        });\n        this.groups.forEach((group) => {\n            if (!group) {\n                return;\n            }\n            const index = group.nodes.indexOf(oldId);\n            if (index === -1) {\n                return;\n            }\n            const g = group;\n            g.nodes[index] = newId;\n        });\n        this.emit('renameNode', oldId, newId);\n        this.checkTransactionEnd();\n    }\n    // ## Changing a node's metadata\n    //\n    // Node metadata can be set or changed by calling this method.\n    setNodeMetadata(id, metadata) {\n        const node = this.getNode(id);\n        if (!node) {\n            return;\n        }\n        this.checkTransactionStart();\n        if (!node.metadata) {\n            node.metadata = {};\n        }\n        const before = clone(node.metadata);\n        Object.keys(metadata).forEach((item) => {\n            if (!node.metadata) {\n                return;\n            }\n            const val = metadata[item];\n            if (val != null) {\n                node.metadata[item] = val;\n            }\n            else {\n                delete node.metadata[item];\n            }\n        });\n        this.emit('changeNode', node, before, metadata);\n        this.checkTransactionEnd();\n    }\n    // ## Connecting nodes\n    //\n    // Nodes can be connected by adding edges between a node's outport\n    // and another node's inport:\n    //\n    //     myGraph.addEdge 'Read', 'out', 'Display', 'in'\n    //     myGraph.addEdgeIndex 'Read', 'out', null, 'Display', 'in', 2\n    //\n    // Adding an edge will emit the `addEdge` event.\n    addEdge(outNode, outPort, inNode, inPort, metadata = {}) {\n        const outPortName = this.getPortName(outPort);\n        const inPortName = this.getPortName(inPort);\n        if (this.edges.some((edge) => {\n            // don't add a duplicate edge\n            if ((edge.from.node === outNode)\n                && (edge.from.port === outPortName)\n                && (edge.to.node === inNode)\n                && (edge.to.port === inPortName)) {\n                return true;\n            }\n            return false;\n        })) {\n            return null;\n        }\n        if (!this.getNode(outNode)) {\n            return null;\n        }\n        if (!this.getNode(inNode)) {\n            return null;\n        }\n        this.checkTransactionStart();\n        const edge = {\n            from: {\n                node: outNode,\n                port: outPortName,\n            },\n            to: {\n                node: inNode,\n                port: inPortName,\n            },\n            metadata,\n        };\n        this.edges.push(edge);\n        this.emit('addEdge', edge);\n        this.checkTransactionEnd();\n        return edge;\n    }\n    // Adding an edge will emit the `addEdge` event.\n    addEdgeIndex(outNode, outPort, outIndex, inNode, inPort, inIndex, metadata = {}) {\n        const outPortName = this.getPortName(outPort);\n        const inPortName = this.getPortName(inPort);\n        const inIndexVal = (inIndex === null) ? undefined : inIndex;\n        const outIndexVal = (outIndex === null) ? undefined : outIndex;\n        if (this.edges.some((edge) => {\n            // don't add a duplicate edge\n            if ((edge.from.node === outNode)\n                && (edge.from.port === outPortName)\n                && (edge.from.index === outIndexVal)\n                && (edge.to.node === inNode)\n                && (edge.to.port === inPortName)\n                && (edge.to.index === inIndexVal)) {\n                return true;\n            }\n            return false;\n        })) {\n            return null;\n        }\n        if (!this.getNode(outNode)) {\n            return null;\n        }\n        if (!this.getNode(inNode)) {\n            return null;\n        }\n        this.checkTransactionStart();\n        const edge = {\n            from: {\n                node: outNode,\n                port: outPortName,\n                index: outIndexVal,\n            },\n            to: {\n                node: inNode,\n                port: inPortName,\n                index: inIndexVal,\n            },\n            metadata,\n        };\n        this.edges.push(edge);\n        this.emit('addEdge', edge);\n        this.checkTransactionEnd();\n        return edge;\n    }\n    // ## Disconnected nodes\n    //\n    // Connections between nodes can be removed by providing the\n    // nodes and ports to disconnect.\n    //\n    //     myGraph.removeEdge 'Display', 'out', 'Foo', 'in'\n    //\n    // Removing a connection will emit the `removeEdge` event.\n    removeEdge(node, port, node2, port2) {\n        if (!this.getEdge(node, port, node2, port2)) {\n            return;\n        }\n        this.checkTransactionStart();\n        const outPort = this.getPortName(port);\n        const inPort = this.getPortName(port2);\n        this.edges = this.edges.filter((edge) => {\n            if (node2 && inPort) {\n                if ((edge.from.node === node)\n                    && (edge.from.port === outPort)\n                    && (edge.to.node === node2)\n                    && (edge.to.port === inPort)) {\n                    this.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, {});\n                    this.emit('removeEdge', edge);\n                    return false;\n                }\n            }\n            else if (((edge.from.node === node) && (edge.from.port === outPort))\n                || ((edge.to.node === node) && (edge.to.port === outPort))) {\n                this.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, {});\n                this.emit('removeEdge', edge);\n                return false;\n            }\n            return true;\n        });\n        this.checkTransactionEnd();\n    }\n    // ## Getting an edge\n    //\n    // Edge objects can be retrieved from the graph by the node and port IDs:\n    //\n    //     myEdge = myGraph.getEdge 'Read', 'out', 'Write', 'in'\n    getEdge(node, port, node2, port2) {\n        const outPort = this.getPortName(port);\n        const inPort = this.getPortName(port2);\n        const edge = this.edges.find((edge) => {\n            if (!edge) {\n                return false;\n            }\n            if (edge.from.node === node\n                && edge.from.port === outPort\n                && edge.to.node === node2\n                && edge.to.port === inPort) {\n                return true;\n            }\n            return false;\n        });\n        if (!edge) {\n            return null;\n        }\n        return edge;\n    }\n    // ## Changing an edge's metadata\n    //\n    // Edge metadata can be set or changed by calling this method.\n    setEdgeMetadata(node, port, node2, port2, metadata) {\n        const edge = this.getEdge(node, port, node2, port2);\n        if (!edge) {\n            return;\n        }\n        this.checkTransactionStart();\n        if (!edge.metadata) {\n            edge.metadata = {};\n        }\n        const before = clone(edge.metadata);\n        Object.keys(metadata).forEach((item) => {\n            const val = metadata[item];\n            if (!edge.metadata) {\n                edge.metadata = {};\n            }\n            if (val !== null) {\n                edge.metadata[item] = val;\n            }\n            else {\n                delete edge.metadata[item];\n            }\n        });\n        this.emit('changeEdge', edge, before, metadata);\n        this.checkTransactionEnd();\n    }\n    // ## Adding Initial Information Packets\n    //\n    // Initial Information Packets (IIPs) can be used for sending data\n    // to specified node inports without a sending node instance.\n    //\n    // IIPs are especially useful for sending configuration information\n    // to components at FBP network start-up time. This could include\n    // filenames to read, or network ports to listen to.\n    //\n    //     myGraph.addInitial 'somefile.txt', 'Read', 'source'\n    //     myGraph.addInitialIndex 'somefile.txt', 'Read', 'source', 2\n    //\n    // If inports are defined on the graph, IIPs can be applied calling\n    // the `addGraphInitial` or `addGraphInitialIndex` methods.\n    //\n    //     myGraph.addGraphInitial 'somefile.txt', 'file'\n    //     myGraph.addGraphInitialIndex 'somefile.txt', 'file', 2\n    //\n    // Adding an IIP will emit a `addInitial` event.\n    addInitial(data, node, port, metadata = {}) {\n        if (!this.getNode(node)) {\n            return null;\n        }\n        const portName = this.getPortName(port);\n        this.checkTransactionStart();\n        const initializer = {\n            from: {\n                data,\n            },\n            to: {\n                node,\n                port: portName,\n            },\n            metadata,\n        };\n        this.initializers.push(initializer);\n        this.emit('addInitial', initializer);\n        this.checkTransactionEnd();\n        return initializer;\n    }\n    addInitialIndex(data, node, port, index, metadata = {}) {\n        if (!this.getNode(node)) {\n            return null;\n        }\n        const indexVal = (index === null) ? undefined : index;\n        const portName = this.getPortName(port);\n        this.checkTransactionStart();\n        const initializer = {\n            from: {\n                data,\n            },\n            to: {\n                node,\n                port: portName,\n                index: indexVal,\n            },\n            metadata,\n        };\n        this.initializers.push(initializer);\n        this.emit('addInitial', initializer);\n        this.checkTransactionEnd();\n        return initializer;\n    }\n    addGraphInitial(data, node, metadata = {}) {\n        const inport = this.inports[node];\n        if (!inport) {\n            return null;\n        }\n        return this.addInitial(data, inport.process, inport.port, metadata);\n    }\n    addGraphInitialIndex(data, node, index, metadata = {}) {\n        const inport = this.inports[node];\n        if (!inport) {\n            return null;\n        }\n        return this.addInitialIndex(data, inport.process, inport.port, index, metadata);\n    }\n    // ## Removing Initial Information Packets\n    //\n    // IIPs can be removed by calling the `removeInitial` method.\n    //\n    //     myGraph.removeInitial 'Read', 'source'\n    //\n    // If the IIP was applied via the `addGraphInitial` or\n    // `addGraphInitialIndex` functions, it can be removed using\n    // the `removeGraphInitial` method.\n    //\n    //     myGraph.removeGraphInitial 'file'\n    //\n    // Remove an IIP will emit a `removeInitial` event.\n    removeInitial(node, port) {\n        const portName = this.getPortName(port);\n        this.checkTransactionStart();\n        this.initializers = this.initializers.filter((iip) => {\n            if (iip.to.node === node && iip.to.port === portName) {\n                this.emit('removeInitial', iip);\n                return false;\n            }\n            return true;\n        });\n        this.checkTransactionEnd();\n    }\n    removeGraphInitial(node) {\n        const inport = this.inports[node];\n        if (!inport) {\n            return;\n        }\n        this.removeInitial(inport.process, inport.port);\n    }\n    toDOT() {\n        const cleanId = (id) => id.replace(/\"/g, '\\\\\"');\n        const cleanPort = (port) => port.replace(/\\./g, '');\n        const wrapQuotes = (id) => `\"${cleanId(id)}\"`;\n        let dot = 'digraph {\\n';\n        this.nodes.forEach((node) => {\n            dot += `    ${wrapQuotes(node.id)} [label=${wrapQuotes(node.id)} shape=box]\\n`;\n        });\n        this.initializers.forEach((initializer, id) => {\n            let data;\n            if (typeof initializer.from.data === 'function') {\n                data = 'Function';\n            }\n            else {\n                data = JSON.stringify(initializer.from.data);\n            }\n            dot += `    data${id} [label=${wrapQuotes(data)} shape=plaintext]\\n`;\n            dot += `    data${id} -> ${wrapQuotes(initializer.to.node)}[headlabel=${cleanPort(initializer.to.port)} labelfontcolor=blue labelfontsize=8.0]\\n`;\n        });\n        this.edges.forEach((edge) => {\n            dot += `    ${wrapQuotes(edge.from.node)} -> ${wrapQuotes(edge.to.node)}[taillabel=${cleanPort(edge.from.port)} headlabel=${cleanPort(edge.to.port)} labelfontcolor=blue labelfontsize=8.0]\\n`;\n        });\n        dot += '}';\n        return dot;\n    }\n    toYUML() {\n        const yuml = [];\n        this.initializers.forEach((initializer) => {\n            yuml.push(`(start)[${initializer.to.port}]->(${initializer.to.node})`);\n        });\n        this.edges.forEach((edge) => {\n            yuml.push(`(${edge.from.node})[${edge.from.port}]->(${edge.to.node})`);\n        });\n        return yuml.join(',');\n    }\n    toJSON() {\n        const json = {\n            caseSensitive: this.caseSensitive,\n            properties: {\n                name: this.name,\n                ...this.properties,\n            },\n            inports: {\n                ...this.inports,\n            },\n            outports: {\n                ...this.outports,\n            },\n            groups: this.groups.map((group) => {\n                const groupData = {\n                    name: group.name,\n                    nodes: group.nodes,\n                };\n                if (group.metadata && Object.keys(group.metadata).length) {\n                    groupData.metadata = {\n                        ...group.metadata,\n                    };\n                }\n                return groupData;\n            }),\n            processes: {},\n            connections: [],\n        };\n        this.nodes.forEach((node) => {\n            if (!json.processes) {\n                json.processes = {};\n            }\n            json.processes[node.id] = {\n                component: node.component,\n            };\n            if (node.metadata) {\n                json.processes[node.id].metadata = {\n                    ...node.metadata,\n                };\n            }\n        });\n        this.edges.forEach((edge) => {\n            const connection = {\n                src: {\n                    process: edge.from.node,\n                    port: edge.from.port,\n                    index: edge.from.index,\n                },\n                tgt: {\n                    process: edge.to.node,\n                    port: edge.to.port,\n                    index: edge.to.index,\n                },\n            };\n            if (edge.metadata && Object.keys(edge.metadata).length) {\n                connection.metadata = {\n                    ...edge.metadata,\n                };\n            }\n            if (!json.connections) {\n                json.connections = [];\n            }\n            json.connections.push(connection);\n        });\n        this.initializers.forEach((initializer) => {\n            const iip = {\n                data: initializer.from.data,\n                tgt: {\n                    process: initializer.to.node,\n                    port: initializer.to.port,\n                    index: initializer.to.index,\n                },\n            };\n            if (initializer.metadata && Object.keys(initializer.metadata).length) {\n                iip.metadata = {\n                    ...initializer.metadata,\n                };\n            }\n            if (!json.connections) {\n                json.connections = [];\n            }\n            json.connections.push(iip);\n        });\n        return json;\n    }\n    save(file, callback) {\n        if (Platform_1.isBrowser()) {\n            callback(new Error('Saving graphs not supported on browser'));\n            return;\n        }\n        const json = JSON.stringify(this.toJSON(), null, 4);\n        let filename = file;\n        if (!filename.match(/\\.json$/)) {\n            filename = `${file}.json`;\n        }\n        // eslint-disable-next-line global-require\n        require('fs').writeFile(filename, json, 'utf-8', (err) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            callback(null, filename);\n        });\n    }\n}\nexports.Graph = Graph;\nfunction createGraph(name, options) {\n    return new Graph(name, options);\n}\nexports.createGraph = createGraph;\n;\nfunction loadJSON(passedDefinition, callback, metadata = {}) {\n    let definition;\n    if (typeof passedDefinition === 'string') {\n        definition = JSON.parse(passedDefinition);\n    }\n    else {\n        definition = clone(passedDefinition);\n    }\n    if (!definition.properties) {\n        definition.properties = {};\n    }\n    if (!definition.processes) {\n        definition.processes = {};\n    }\n    if (!definition.connections) {\n        definition.connections = [];\n    }\n    const graph = new Graph(definition.properties.name, {\n        caseSensitive: definition.caseSensitive || false,\n    });\n    graph.startTransaction('loadJSON', metadata);\n    const properties = {};\n    Object.keys(definition.properties).forEach((property) => {\n        if (property === 'name') {\n            return;\n        }\n        if (!definition.properties) {\n            return;\n        }\n        const value = definition.properties[property];\n        properties[property] = value;\n    });\n    graph.setProperties(properties);\n    Object.keys(definition.processes).forEach((id) => {\n        if (!definition.processes) {\n            return;\n        }\n        const def = definition.processes[id];\n        if (!def.metadata) {\n            def.metadata = {};\n        }\n        graph.addNode(id, def.component, def.metadata);\n    });\n    definition.connections.forEach((conn) => {\n        const meta = conn.metadata ? conn.metadata : {};\n        if (typeof conn.data !== 'undefined') {\n            if (typeof conn.tgt.index === 'number') {\n                graph.addInitialIndex(conn.data, conn.tgt.process, graph.getPortName(conn.tgt.port), conn.tgt.index, meta);\n            }\n            else {\n                graph.addInitial(conn.data, conn.tgt.process, graph.getPortName(conn.tgt.port), meta);\n            }\n            return;\n        }\n        if (typeof conn.src === 'undefined') {\n            return;\n        }\n        if ((typeof conn.src.index === 'number') || (typeof conn.tgt.index === 'number')) {\n            graph.addEdgeIndex(conn.src.process, graph.getPortName(conn.src.port), conn.src.index, conn.tgt.process, graph.getPortName(conn.tgt.port), conn.tgt.index, meta);\n            return;\n        }\n        graph.addEdge(conn.src.process, graph.getPortName(conn.src.port), conn.tgt.process, graph.getPortName(conn.tgt.port), meta);\n    });\n    if (definition.inports) {\n        Object.keys(definition.inports).forEach((pub) => {\n            if (!definition.inports || !definition.inports[pub]) {\n                return;\n            }\n            const priv = definition.inports[pub];\n            graph.addInport(pub, priv.process, graph.getPortName(priv.port), priv.metadata || {});\n        });\n    }\n    if (definition.outports) {\n        Object.keys(definition.outports).forEach((pub) => {\n            if (!definition.outports || !definition.outports[pub]) {\n                return;\n            }\n            const priv = definition.outports[pub];\n            graph.addOutport(pub, priv.process, graph.getPortName(priv.port), priv.metadata || {});\n        });\n    }\n    if (definition.groups) {\n        definition.groups.forEach((group) => {\n            graph.addGroup(group.name, group.nodes, group.metadata || {});\n        });\n    }\n    graph.endTransaction('loadJSON');\n    return callback(null, graph);\n}\nexports.loadJSON = loadJSON;\nfunction loadFBP(fbpData, callback, metadata = {}, caseSensitive = false) {\n    let definition;\n    try {\n        // eslint-disable-next-line global-require\n        definition = require('fbp').parse(fbpData, { caseSensitive });\n    }\n    catch (e) {\n        return callback(e);\n    }\n    return loadJSON(definition, callback, metadata);\n}\nexports.loadFBP = loadFBP;\nfunction loadHTTP(url, callback) {\n    const req = new XMLHttpRequest();\n    req.onreadystatechange = () => {\n        if (req.readyState !== 4) {\n            return;\n        }\n        if (req.status !== 200) {\n            callback(new Error(`Failed to load ${url}: HTTP ${req.status}`));\n        }\n        callback(null, req.responseText);\n    };\n    req.open('GET', url, true);\n    req.send();\n}\nfunction loadFile(file, callback, metadata = {}, caseSensitive = false) {\n    if (Platform_1.isBrowser()) {\n        // On browser we can try getting the file via AJAX\n        loadHTTP(file, (err, data) => {\n            if (err) {\n                callback(err);\n                return;\n            }\n            if (!data) {\n                callback(new Error('No data received'));\n                return;\n            }\n            if (file.split('.').pop() === 'fbp') {\n                loadFBP(data, callback, metadata);\n                return;\n            }\n            loadJSON(data, callback, metadata);\n        });\n        return;\n    }\n    // Node.js graph file\n    // eslint-disable-next-line global-require\n    require('fs').readFile(file, 'utf-8', (err, data) => {\n        if (err) {\n            callback(err);\n            return;\n        }\n        if (file.split('.').pop() === 'fbp') {\n            loadFBP(data, callback, {}, caseSensitive);\n            return;\n        }\n        loadJSON(data, callback, {});\n    });\n}\nexports.loadFile = loadFile;\n// remove everything in the graph\nfunction resetGraph(graph) {\n    // Edges and similar first, to have control over the order\n    // If we'd do nodes first, it will implicitly delete edges\n    // Important to make journal transactions invertible\n    graph.groups.reverse();\n    graph.groups.forEach((group) => {\n        if (group != null) {\n            graph.removeGroup(group.name);\n        }\n    });\n    Object.keys(graph.outports).forEach((port) => {\n        graph.removeOutport(port);\n    });\n    Object.keys(graph.inports).forEach((port) => {\n        graph.removeInport(port);\n    });\n    graph.setProperties({});\n    graph.initializers.reverse();\n    graph.initializers.forEach((iip) => {\n        graph.removeInitial(iip.to.node, iip.to.port);\n    });\n    graph.edges.reverse();\n    graph.edges.forEach((edge) => {\n        graph.removeEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port);\n    });\n    graph.nodes.reverse();\n    graph.nodes.forEach((node) => {\n        graph.removeNode(node.id);\n    });\n}\n// Note: Caller should create transaction\n// First removes everything in @base, before building it up to mirror @to\nfunction mergeResolveTheirsNaive(base, to) {\n    resetGraph(base);\n    to.nodes.forEach((node) => {\n        base.addNode(node.id, node.component, node.metadata);\n    });\n    to.edges.forEach((edge) => {\n        base.addEdge(edge.from.node, edge.from.port, edge.to.node, edge.to.port, edge.metadata);\n    });\n    to.initializers.forEach((iip) => {\n        if (typeof iip.to.index === 'number') {\n            base.addInitialIndex(iip.from.data, iip.to.node, iip.to.port, iip.to.index, iip.metadata || {});\n            return;\n        }\n        base.addInitial(iip.from.data, iip.to.node, iip.to.port, iip.metadata || {});\n    });\n    base.setProperties(to.properties);\n    Object.keys(to.inports).forEach((pub) => {\n        const priv = to.inports[pub];\n        base.addInport(pub, priv.process, priv.port, priv.metadata || {});\n    });\n    Object.keys(to.outports).forEach((pub) => {\n        const priv = to.outports[pub];\n        base.addOutport(pub, priv.process, priv.port, priv.metadata || {});\n    });\n    to.groups.forEach((group) => {\n        base.addGroup(group.name, group.nodes, group.metadata || {});\n    });\n}\nexports.mergeResolveTheirs = mergeResolveTheirsNaive;\nfunction equivalent(a, b) {\n    // TODO: add option to only compare known fields\n    // TODO: add option to ignore metadata\n    return (JSON.stringify(a) === JSON.stringify(b));\n}\nexports.equivalent = equivalent;\n//# sourceMappingURL=Graph.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isBrowser = void 0;\n//     NoFlo - Flow-Based Programming for JavaScript\n//     (c) 2014-2017 Flowhub UG\n//     NoFlo may be freely distributed under the MIT license\n//\n// Platform detection method\n/* eslint-env browser, node */\nfunction isBrowser() {\n    if ((typeof process !== 'undefined') && process.execPath && process.execPath.match(/node|iojs/)) {\n        return false;\n    }\n    return true;\n}\nexports.isBrowser = isBrowser;\n;\n//# sourceMappingURL=Platform.js.map","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","var parser = require('./fbp');\nvar serialize = require('./serialize');\n\nmodule.exports = {\n  SyntaxError: parser.SyntaxError,\n  parse: parser.parse,\n  serialize: serialize,\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}"],"sourceRoot":""}