!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=176)}([function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;o=r(56),t.graph=o.graph,t.Graph=o.Graph,t.journal=o.journal,t.Journal=o.Journal,t.Network=r(105).Network,t.isBrowser=r(58).isBrowser,t.ComponentLoader=r(79).ComponentLoader,t.Component=r(147).Component,t.helpers=r(469),i=r(148),t.InPorts=i.InPorts,t.OutPorts=i.OutPorts,t.InPort=r(149),t.OutPort=r(151),t.internalSocket=r(57),t.IP=r(33),t.createNetwork=function(e,r,o){var i,s;return"object"!==n(o)&&(o={delay:o}),"function"!=typeof r&&(r=function(e){if(e)throw e}),i=new t.Network(e,o),s=function(e){return e.start((function(t){return t?r(t):r(null,e)}))},i.loader.listComponents((function(t){return t?r(t):0===e.nodes.length?s(i):o.delay?void r(null,i):i.connect((function(e){return e?r(e):s(i)}))})),i},t.loadFile=function(e,r,o){return o||(o=r,null),o&&"object"!==n(r)&&(r={baseDir:r}),t.graph.loadFile(e,(function(e,n){return e?o(e):(r.baseDir&&(n.baseDir=r.baseDir),t.createNetwork(n,o,r))}))},t.saveFile=function(e,t,r){return e.save(t,r)},t.asCallback=r(470).asCallback,t.asComponent=r(471).asComponent},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const n=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e},function(e,t,r){"use strict";(function(e){r.d(t,"e",(function(){return n})),r.d(t,"p",(function(){return o})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return a})),r.d(t,"o",(function(){return c})),r.d(t,"q",(function(){return l})),r.d(t,"s",(function(){return p})),r.d(t,"i",(function(){return u})),r.d(t,"r",(function(){return d})),r.d(t,"k",(function(){return h})),r.d(t,"m",(function(){return f})),r.d(t,"j",(function(){return m})),r.d(t,"l",(function(){return g})),r.d(t,"g",(function(){return y})),r.d(t,"f",(function(){return v})),r.d(t,"h",(function(){return b})),r.d(t,"n",(function(){return w})),r.d(t,"b",(function(){return x}));var n="1.11.0",o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||Function("return this")()||{},i=Array.prototype,s=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=i.push,l=i.slice,p=s.toString,u=s.hasOwnProperty,d="undefined"!=typeof ArrayBuffer,h=Array.isArray,f=Object.keys,m=Object.create,g=d&&ArrayBuffer.isView,y=isNaN,v=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],x=Math.pow(2,53)-1}).call(this,r(23))},function(e,t,r){"use strict";r.d(t,"r",(function(){return o})),r.d(t,"n",(function(){return i})),r.d(t,"k",(function(){return s})),r.d(t,"l",(function(){return a})),r.d(t,"i",(function(){return c})),r.d(t,"m",(function(){return l})),r.d(t,"a",(function(){return p})),r.d(t,"e",(function(){return u})),r.d(t,"g",(function(){return d})),r.d(t,"p",(function(){return h})),r.d(t,"f",(function(){return f})),r.d(t,"h",(function(){return m})),r.d(t,"b",(function(){return g})),r.d(t,"j",(function(){return y})),r.d(t,"c",(function(){return v})),r.d(t,"o",(function(){return b})),r.d(t,"d",(function(){return w})),r.d(t,"q",(function(){return x}));r(9);var n=r(22);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const o=!window.ShadyDOM||!window.ShadyDOM.inUse,i=(Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),window.customElements.polyfillWrapFlushCallback,o&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch(e){return!1}})());let s=window.Polymer&&window.Polymer.rootPath||Object(n.a)(document.baseURI||window.location.href);let a=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0;let c=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1;let l=window.Polymer&&window.Polymer.strictTemplatePolicy||!1;let p=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1;let u=window.Polymer&&window.Polymer.legacyOptimizations||!1;let d=window.Polymer&&window.Polymer.legacyWarnings||!1;let h=window.Polymer&&window.Polymer.syncInitialRender||!1;let f=window.Polymer&&window.Polymer.legacyUndefined||!1;let m=window.Polymer&&window.Polymer.orderedComputed||!1;let g=!0;let y=window.Polymer&&window.Polymer.removeNestedTemplates||!1;let v=window.Polymer&&window.Polymer.fastDomIf||!1;let b=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1;let w=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1;let x=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1},function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"g",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"i",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"h",(function(){return d}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function n(e){return e.indexOf(".")>=0}function o(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function i(e,t){return 0===e.indexOf(t+".")}function s(e,t){return 0===t.indexOf(e+".")}function a(e,t,r){return t+r.slice(e.length)}function c(e,t){return e===t||i(e,t)||s(e,t)}function l(e){if(Array.isArray(e)){let t=[];for(let r=0;r<e.length;r++){let n=e[r].toString().split(".");for(let e=0;e<n.length;e++)t.push(n[e])}return t.join(".")}return e}function p(e){return Array.isArray(e)?l(e).split("."):e.toString().split(".")}function u(e,t,r){let n=e,o=p(t);for(let e=0;e<o.length;e++){if(!n)return;n=n[o[e]]}return r&&(r.path=o.join(".")),n}function d(e,t,r){let n=e,o=p(t),i=o[o.length-1];if(o.length>1){for(let e=0;e<o.length-1;e++){if(n=n[o[e]],!n)return}n[i]=r}else n[t]=r;return o.join(".")}},function(e,t,r){"use strict";e.exports=r(510)},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,l=[],p=!1,u=-1;function d(){p&&c&&(p=!1,c.length?l=c.concat(l):u=-1,l.length&&h())}function h(){if(!p){var e=a(d);p=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||p||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){const{basename:n}=r(24);t.sortByName=(e,r)=>{const n=t.unnamespace(t.getName(e)),o=t.unnamespace(t.getName(r));return n.localeCompare(o)},t.getName=(e,t=!0)=>{if(!e)return t?"Unknown":null;const r=(null!=e.properties?e.properties.name:void 0)||e.name||e.id;return!r&&t?"Unknown":r},t.unnamespace=e=>-1===e.indexOf("/")?e:n(e),t.namespace=(e,t)=>-1!==e.indexOf("/")?e:`${t}/${e}`,t.sortBySeen=(e,t)=>{const r=e,n=t;return r.seen?n.seen?(r.seen="object"==typeof r.seen?r.seen:new Date(r.seen),n.seen="object"==typeof n.seen?n.seen:new Date(n.seen),r.seen>n.seen?-1:n.seen>r.seen?1:0):-1:1},t.addToList=(e,r,n=t.sortByName)=>{let o=!1;e.forEach(e=>{if(e===r)return void(o=!0);if(t.unnamespace(t.getName(e,!1))===t.unnamespace(t.getName(r,!1))){const t=e;Object.keys(r).forEach(e=>{t[e]=r[e]}),o=!0}}),o||(e.push(r),e.sort(n))},t.removeFromList=(e,t)=>{const r=e.find(e=>{if(e===t)return!0;return(e.properties?e.properties.id:e.id)===(t.properties?t.properties.id:t.id)});r&&e.splice(e.indexOf(r),1)}},function(e,t,r){(function(n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(o=n))}),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(245)(t);const{formatters:o}=e.exports;o.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(6))},function(e,t,r){"use strict";
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/window.JSCompiler_renameProperty=function(e,t){return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let n=0;function o(){}o.prototype.__mixinApplications,o.prototype.__mixinSet;const i=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let r=n++;return function(n){let o=n.__mixinSet;if(o&&o[r])return n;let i=t,s=i.get(n);if(!s){s=e(n),i.set(n,s);let t=Object.create(s.__mixinSet||o||null);t[r]=!0,s.__mixinSet=t}return s}}},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(){void 0!==i&&e.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==t&&(i=function(r){e.removeListener(t,o),n(r)},e.once("error",i)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function p(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,i,s,a;if(l(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=p(e))>0&&s.length>o&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function f(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):g(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,p=g(c,l);for(r=0;r<l;++r)i(p[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(l(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t){},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(28),o=r(70);r.d(t,"b",(function(){return o.a}));
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const i=Object(n.a)(HTMLElement)},function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return p}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let n=0,o=0,i=[],s=0,a=!1,c=document.createTextNode("");new window.MutationObserver((function(){a=!1;const e=i.length;for(let t=0;t<e;t++){let e=i[t];if(e)try{e()}catch(e){setTimeout(()=>{throw e})}}i.splice(0,e),o+=e})).observe(c,{characterData:!0});const l={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},p={run:e=>(a||(a=!0,c.textContent=s++),i.push(e),n++),cancel(e){const t=e-o;if(t>=0){if(!i[t])throw new Error("invalid async handle: "+e);i[t]=null}}}},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=r(513)},function(e,t,r){const n={msgflo:r(499),sndflo:r(500),imgflo:r(501),noflo:r(502),javafbp:r(503),microflo:r(504)};n["noflo-browser"]=n.noflo,n["noflo-gnome"]=n.noflo,n["noflo-nodejs"]=n.noflo,e.exports=n},function(e,t,r){"use strict";var n=r(50),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],i=["scalar","sequence","mapping"];e.exports=function(e,t){var r,s;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===o.indexOf(t))throw new n('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(r=t.styleAliases||null,s={},null!==r&&Object.keys(r).forEach((function(e){r[e].forEach((function(t){s[String(t)]=e}))})),s),-1===i.indexOf(this.kind))throw new n('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t){const r=document.createElement("template");r.innerHTML='<dom-module id="noflo-modal-styles">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--noflo-ui-background-shadow);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: auto;\n      }\n\n      .modal-container {\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        display: block;\n        position: absolute;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        top: 36px;\n        width: calc(72px * 9);\n        left: calc(50% - 72px * 4.5);\n        z-index: 5;\n        padding: 36px;\n        box-sizing: border-box;\n        border-radius: 3px;\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n      }\n      .modal-content {\n        max-height: calc(100vh - 252px);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        overflow-x: hidden;\n        padding-bottom: 18px;\n        box-sizing: border-box;\n      }\n\n      h1 {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n      }\n      label {\n        display: block;\n        font-size: 13px;\n        margin-top: 17px;\n        color: var(--noflo-ui-text);\n        line-height: 17px;\n      }\n      label > span {\n        line-height: 17px;\n      }\n      input,\n      select,\n      textarea {\n        display: block;\n        font-size: 17px;\n        background-color: hsl(190, 100%, 30%);\n        background-image: none;\n        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;\n        color: #fff;\n        border-radius: 3px;\n        padding: 3px;\n        border: none;\n        margin: 0px;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      input::placeholder {\n        color: hsl(0, 0%, 80%);\n      }\n      select {\n        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwNnB4IiBoZWlnaHQ9IjMwNnB4IiB2aWV3Qm94PSIwIDAgMzA2IDMwNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzA2IDMwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9ImV4cGFuZC1tb3JlIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIyNzAuMyw1OC42NSAxNTMsMTc1Ljk1IDM1LjcsNTguNjUgMCw5NC4zNSAxNTMsMjQ3LjM1IDMwNiw5NC4zNSAJCSIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K);\n        background-repeat: no-repeat;\n        background-position: 98% 50%;\n        background-size: 8px;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        padding-right: 1em;\n      }\n      div.CodeMirror {\n        border: 1px solid var(--noflo-ui-text);\n        border-radius: 3px;\n      }\n\n      .toolbar {\n        display: block;\n        line-height: 36px;\n        margin-top: 18px;\n      }\n      .toolbar button {\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        cursor: pointer;\n      }\n      .toolbar button.disabled {\n        opacity: 0.1;\n      }\n      .toolbar a {\n        font-size: 13px;\n        color: hsl(190, 100%, 30%);\n        text-decoration: none;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n\n      html polymer-element{\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(r.content)},function(e,t,r){const n=r(368),{findByComponent:o}=r(31),{getName:i,namespace:s}=r(7);t.graphRuntimeIdentifier=(e,t=null)=>{if(e&&e.properties&&e.properties.runtimeName)return e.properties.runtimeName;const r=i(e);return t?s(r,t):r};const a=e=>({name:e.id,type:e.type,description:e.type,addressable:e.addressable,schema:e.schema});t.componentForLibrary=e=>({name:e.name,icon:e.icon||"cog",description:e.description||"",subgraph:e.subgraph,inports:e.inPorts.map(a),outports:e.outPorts.map(a)}),t.getGraphType=e=>{const t=e;return(null!=t.properties.environment?t.properties.environment.type:void 0)||"html"!==(null!=t.properties.environment?t.properties.environment.runtime:void 0)||(t.properties.environment.type="noflo-browser"),(null!=t.properties.environment?t.properties.environment.type:void 0)?t.properties.environment.type:null},t.getComponentType=e=>{const t=e.code.match(/@runtime ([a-z-]+)/);return t?t[1]:null},t.getSource=(e,t)=>e.protocol.component.getsource({name:t}).catch(r=>-1!==t.indexOf("/")?Promise.reject(r):e.definition.namespace?e.protocol.component.getsource({name:`${e.definition.namespace}/${t}`}):Promise.reject(r)),t.getRemoteNodes=(e,r)=>{const n=r;return n.remote.reduce((r,i)=>r.then(r=>{if(!(null!=r.nodes?r.nodes.length:void 0))return Promise.reject(new Error(`Node ${r.name} doesn't contain child nodes`));const[s]=r.nodes.filter(e=>e.id===i);if(!s)return Promise.reject(new Error(`Node ${i} not found in graph ${r.name||r.properties.id}`));const[a,c]=o(s.component,n.project);return"graph"===a?(n.graphs.push(c),Promise.resolve(c)):"component"===a?(n.component=c,Promise.resolve(c)):t.getSource(e,s.component).then(e=>["json","fbp"].includes(e.language)?t.loadGraph(e).then(e=>(n.graphs.push(e),Promise.resolve(e))):(n.component=e,Promise.resolve(e)))}),Promise.resolve(n.graphs[n.graphs.length-1])).then(()=>(n.remote=[],n))},t.loadGraph=e=>new Promise((t,r)=>{let o;switch(e.language){case"json":o="loadJSON";break;case"fbp":o="loadFBP";break;default:return r(new Error(`Unknown format ${e.language} for graph ${e.name}`))}return o="json"===e.language?"loadJSON":"loadFBP",n.graph[o](e.code,(n,o)=>{if(n)return r(n);const i=o;return i.name=e.name,t(i)})}),t.isDefaultRuntime=e=>"iframe"===e.protocol&&"https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe"===e.address,t.ensureIframe=(e,t)=>{const r=e;if("iframe"!==r.definition.protocol)return Promise.resolve();r.definition.querySelector=`iframe[data-runtime='${r.definition.id}']`;let n=document.body.querySelector(r.definition.querySelector);return n||(n=document.createElement("iframe"),n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),n.setAttribute("data-runtime",r.definition.id),n.setAttribute("data-project",t.id),n.className="iframe-runtime",document.body.appendChild(n)),r.transport.iframe?r.transport.iframe===n?Promise.resolve():r.disconnect().then(()=>(r.transport.iframe=n,Promise.resolve())):(r.transport.iframe=n,Promise.resolve())}},function(e,t,r){"use strict";var n=r(5),o=r(511);if(void 0===n)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var i=(new n.Component).updater;e.exports=o(n.Component,n.isValidElement,i)},function(e,t,r){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,r=/gecko\/\d/i.test(e),n=/MSIE \d/.test(e),o=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),i=/Edge\/(\d+)/.exec(e),s=n||o||i,a=s&&(n?document.documentMode||6:+(i||o)[1]),c=!i&&/WebKit\//.test(e),l=c&&/Qt\/\d+\.\d+/.test(e),p=!i&&/Chrome\//.test(e),u=/Opera\//.test(e),d=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),f=/PhantomJS/.test(e),m=!i&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),g=/Android/.test(e),y=m||g||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),v=m||/Mac/.test(t),b=/\bCrOS\b/.test(e),w=/win/i.test(t),x=u&&e.match(/Version\/(\d*\.\d*)/);x&&(x=Number(x[1])),x&&x>=15&&(u=!1,c=!0);var k=v&&(l||u&&(null==x||x<12.11)),E=r||s&&a>=9;function _(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var S,C=function(e,t){var r=e.className,n=_(t).exec(r);if(n){var o=r.slice(n.index+n[0].length);e.className=r.slice(0,n.index)+(o?n[1]+o:"")}};function P(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function A(e,t){return P(e).appendChild(t)}function O(e,t,r,n){var o=document.createElement(e);if(r&&(o.className=r),n&&(o.style.cssText=n),"string"==typeof t)o.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)o.appendChild(t[i]);return o}function T(e,t,r,n){var o=O(e,t,r,n);return o.setAttribute("role","presentation"),o}function D(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function N(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function j(e,t){var r=e.className;_(t).test(r)||(e.className+=(r?" ":"")+t)}function I(e,t){for(var r=e.split(" "),n=0;n<r.length;n++)r[n]&&!_(r[n]).test(t)&&(t+=" "+r[n]);return t}S=document.createRange?function(e,t,r,n){var o=document.createRange();return o.setEnd(n||e,r),o.setStart(e,t),o}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(e){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var R=function(e){e.select()};function M(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function L(e,t,r){for(var n in t||(t={}),e)!e.hasOwnProperty(n)||!1===r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function F(e,t,r,n,o){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var i=n||0,s=o||0;;){var a=e.indexOf("\t",i);if(a<0||a>=t)return s+(t-i);s+=a-i,s+=r-s%r,i=a+1}}m?R=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:s&&(R=function(e){try{e.select()}catch(e){}});var G=function(){this.id=null,this.f=null,this.time=0,this.handler=M(this.onTimeout,this)};function B(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}G.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},G.prototype.set=function(e,t){this.f=t;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};var z={toString:function(){return"CodeMirror.Pass"}},U={scroll:!1},q={origin:"*mouse"},$={origin:"+move"};function H(e,t,r){for(var n=0,o=0;;){var i=e.indexOf("\t",n);-1==i&&(i=e.length);var s=i-n;if(i==e.length||o+s>=t)return n+Math.min(s,t-o);if(o+=i-n,n=i+1,(o+=r-o%r)>=t)return n}}var V=[""];function W(e){for(;V.length<=e;)V.push(J(V)+" ");return V[e]}function J(e){return e[e.length-1]}function X(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function Y(){}function K(e,t){var r;return Object.create?r=Object.create(e):(Y.prototype=e,r=new Y),t&&L(t,r),r}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Z(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Q.test(e))}function ee(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Z(e))||t.test(e):Z(e)}function te(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var re=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function ne(e){return e.charCodeAt(0)>=768&&re.test(e)}function oe(e,t,r){for(;(r<0?t>0:t<e.length)&&ne(e.charAt(t));)t+=r;return t}function ie(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var o=(t+r)/2,i=n<0?Math.ceil(o):Math.floor(o);if(i==t)return e(i)?t:r;e(i)?r=i:t=i+n}}var se=null;function ae(e,t,r){var n;se=null;for(var o=0;o<e.length;++o){var i=e[o];if(i.from<t&&i.to>t)return o;i.to==t&&(i.from!=i.to&&"before"==r?n=o:se=o),i.from==t&&(i.from!=i.to&&"before"!=r?n=o:se=o)}return null!=n?n:se}var ce=function(){var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,r=/[LRr]/,n=/[Lb1n]/,o=/[1n]/;function i(e,t,r){this.level=e,this.from=t,this.to=r}return function(s,a){var c="ltr"==a?"L":"R";if(0==s.length||"ltr"==a&&!e.test(s))return!1;for(var l,p=s.length,u=[],d=0;d<p;++d)u.push((l=s.charCodeAt(d))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(l):1424<=l&&l<=1524?"R":1536<=l&&l<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(l-1536):1774<=l&&l<=2220?"r":8192<=l&&l<=8203?"w":8204==l?"b":"L");for(var h=0,f=c;h<p;++h){var m=u[h];"m"==m?u[h]=f:f=m}for(var g=0,y=c;g<p;++g){var v=u[g];"1"==v&&"r"==y?u[g]="n":r.test(v)&&(y=v,"r"==v&&(u[g]="R"))}for(var b=1,w=u[0];b<p-1;++b){var x=u[b];"+"==x&&"1"==w&&"1"==u[b+1]?u[b]="1":","!=x||w!=u[b+1]||"1"!=w&&"n"!=w||(u[b]=w),w=x}for(var k=0;k<p;++k){var E=u[k];if(","==E)u[k]="N";else if("%"==E){var _=void 0;for(_=k+1;_<p&&"%"==u[_];++_);for(var S=k&&"!"==u[k-1]||_<p&&"1"==u[_]?"1":"N",C=k;C<_;++C)u[C]=S;k=_-1}}for(var P=0,A=c;P<p;++P){var O=u[P];"L"==A&&"1"==O?u[P]="L":r.test(O)&&(A=O)}for(var T=0;T<p;++T)if(t.test(u[T])){var D=void 0;for(D=T+1;D<p&&t.test(u[D]);++D);for(var N="L"==(T?u[T-1]:c),j=N==("L"==(D<p?u[D]:c))?N?"L":"R":c,I=T;I<D;++I)u[I]=j;T=D-1}for(var R,M=[],L=0;L<p;)if(n.test(u[L])){var F=L;for(++L;L<p&&n.test(u[L]);++L);M.push(new i(0,F,L))}else{var G=L,B=M.length,z="rtl"==a?1:0;for(++L;L<p&&"L"!=u[L];++L);for(var U=G;U<L;)if(o.test(u[U])){G<U&&(M.splice(B,0,new i(1,G,U)),B+=z);var q=U;for(++U;U<L&&o.test(u[U]);++U);M.splice(B,0,new i(2,q,U)),B+=z,G=U}else++U;G<L&&M.splice(B,0,new i(1,G,L))}return"ltr"==a&&(1==M[0].level&&(R=s.match(/^\s+/))&&(M[0].from=R[0].length,M.unshift(new i(0,0,R[0].length))),1==J(M).level&&(R=s.match(/\s+$/))&&(J(M).to-=R[0].length,M.push(new i(0,p-R[0].length,p)))),"rtl"==a?M.reverse():M}}();function le(e,t){var r=e.order;return null==r&&(r=e.order=ce(e.text,t)),r}var pe=[],ue=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||pe).concat(r)}};function de(e,t){return e._handlers&&e._handlers[t]||pe}function he(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,o=n&&n[t];if(o){var i=B(o,r);i>-1&&(n[t]=o.slice(0,i).concat(o.slice(i+1)))}}}function fe(e,t){var r=de(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),o=0;o<r.length;++o)r[o].apply(null,n)}function me(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),fe(e,r||t.type,e,t),xe(t)||t.codemirrorIgnore}function ge(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)-1==B(r,t[n])&&r.push(t[n])}function ye(e,t){return de(e,t).length>0}function ve(e){e.prototype.on=function(e,t){ue(this,e,t)},e.prototype.off=function(e,t){he(this,e,t)}}function be(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function we(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function ke(e){be(e),we(e)}function Ee(e){return e.target||e.srcElement}function _e(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),v&&e.ctrlKey&&1==t&&(t=3),t}var Se,Ce,Pe=function(){if(s&&a<9)return!1;var e=O("div");return"draggable"in e||"dragDrop"in e}();function Ae(e){if(null==Se){var t=O("span","​");A(e,O("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Se=t.offsetWidth<=1&&t.offsetHeight>2&&!(s&&a<8))}var r=Se?O("span","​"):O("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}function Oe(e){if(null!=Ce)return Ce;var t=A(e,document.createTextNode("AخA")),r=S(t,0,1).getBoundingClientRect(),n=S(t,1,2).getBoundingClientRect();return P(e),!(!r||r.left==r.right)&&(Ce=n.right-r.right<3)}var Te,De=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var o=e.indexOf("\n",t);-1==o&&(o=e.length);var i=e.slice(t,"\r"==e.charAt(o-1)?o-1:o),s=i.indexOf("\r");-1!=s?(r.push(i.slice(0,s)),t+=s+1):(r.push(i),t=o+1)}return r}:function(e){return e.split(/\r\n?|\n/)},Ne=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},je="oncopy"in(Te=O("div"))||(Te.setAttribute("oncopy","return;"),"function"==typeof Te.oncopy),Ie=null,Re={},Me={};function Le(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Re[e]=t}function Fe(e){if("string"==typeof e&&Me.hasOwnProperty(e))e=Me[e];else if(e&&"string"==typeof e.name&&Me.hasOwnProperty(e.name)){var t=Me[e.name];"string"==typeof t&&(t={name:t}),(e=K(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Fe("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Fe("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ge(e,t){t=Fe(t);var r=Re[t.name];if(!r)return Ge(e,"text/plain");var n=r(e,t);if(Be.hasOwnProperty(t.name)){var o=Be[t.name];for(var i in o)o.hasOwnProperty(i)&&(n.hasOwnProperty(i)&&(n["_"+i]=n[i]),n[i]=o[i])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)n[s]=t.modeProps[s];return n}var Be={};function ze(e,t){L(t,Be.hasOwnProperty(e)?Be[e]:Be[e]={})}function Ue(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var o=t[n];o instanceof Array&&(o=o.concat([])),r[n]=o}return r}function qe(e,t){for(var r;e.innerMode&&(r=e.innerMode(t))&&r.mode!=e;)t=r.state,e=r.mode;return r||{mode:e,state:t}}function $e(e,t,r){return!e.startState||e.startState(t,r)}var He=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};function Ve(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var o=r.children[n],i=o.chunkSize();if(t<i){r=o;break}t-=i}return r.lines[t]}function We(e,t,r){var n=[],o=t.line;return e.iter(t.line,r.line+1,(function(e){var i=e.text;o==r.line&&(i=i.slice(0,r.ch)),o==t.line&&(i=i.slice(t.ch)),n.push(i),++o})),n}function Je(e,t,r){var n=[];return e.iter(t,r,(function(e){n.push(e.text)})),n}function Xe(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function Ye(e){if(null==e.parent)return null;for(var t=e.parent,r=B(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var o=0;n.children[o]!=t;++o)r+=n.children[o].chunkSize();return r+t.first}function Ke(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var o=e.children[n],i=o.height;if(t<i){e=o;continue e}t-=i,r+=o.chunkSize()}return r}while(!e.lines);for(var s=0;s<e.lines.length;++s){var a=e.lines[s].height;if(t<a)break;t-=a}return r+s}function Qe(e,t){return t>=e.first&&t<e.first+e.size}function Ze(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function et(e,t,r){if(void 0===r&&(r=null),!(this instanceof et))return new et(e,t,r);this.line=e,this.ch=t,this.sticky=r}function tt(e,t){return e.line-t.line||e.ch-t.ch}function rt(e,t){return e.sticky==t.sticky&&0==tt(e,t)}function nt(e){return et(e.line,e.ch)}function ot(e,t){return tt(e,t)<0?t:e}function it(e,t){return tt(e,t)<0?e:t}function st(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return et(e.first,0);var r=e.first+e.size-1;return t.line>r?et(r,Ve(e,r).text.length):function(e,t){var r=e.ch;return null==r||r>t?et(e.line,t):r<0?et(e.line,0):e}(t,Ve(e,t.line).text.length)}function ct(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=at(e,t[n]);return r}He.prototype.eol=function(){return this.pos>=this.string.length},He.prototype.sol=function(){return this.pos==this.lineStart},He.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},He.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},He.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},He.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},He.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},He.prototype.skipToEnd=function(){this.pos=this.string.length},He.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},He.prototype.backUp=function(e){this.pos-=e},He.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=F(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},He.prototype.indentation=function(){return F(this.string,null,this.tabSize)-(this.lineStart?F(this.string,this.lineStart,this.tabSize):0)},He.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&!1!==t&&(this.pos+=n[0].length),n)}var o=function(e){return r?e.toLowerCase():e};if(o(this.string.substr(this.pos,e.length))==o(e))return!1!==t&&(this.pos+=e.length),!0},He.prototype.current=function(){return this.string.slice(this.start,this.pos)},He.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},He.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},He.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var lt=function(e,t){this.state=e,this.lookAhead=t},pt=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};function ut(e,t,r,n){var o=[e.state.modeGen],i={};wt(e,t.text,e.doc.mode,r,(function(e,t){return o.push(e,t)}),i,n);for(var s=r.state,a=function(n){r.baseTokens=o;var a=e.state.overlays[n],c=1,l=0;r.state=!0,wt(e,t.text,a.mode,r,(function(e,t){for(var r=c;l<e;){var n=o[c];n>e&&o.splice(c,1,e,o[c+1],n),c+=2,l=Math.min(e,n)}if(t)if(a.opaque)o.splice(r,c-r,e,"overlay "+t),c=r+2;else for(;r<c;r+=2){var i=o[r+1];o[r+1]=(i?i+" ":"")+"overlay "+t}}),i),r.state=s,r.baseTokens=null,r.baseTokenPos=1},c=0;c<e.state.overlays.length;++c)a(c);return{styles:o,classes:i.bgClass||i.textClass?i:null}}function dt(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=ht(e,Ye(t)),o=t.text.length>e.options.maxHighlightLength&&Ue(e.doc.mode,n.state),i=ut(e,t,n);o&&(n.state=o),t.stateAfter=n.save(!o),t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ht(e,t,r){var n=e.doc,o=e.display;if(!n.mode.startState)return new pt(n,!0,t);var i=function(e,t,r){for(var n,o,i=e.doc,s=r?-1:t-(e.doc.mode.innerMode?1e3:100),a=t;a>s;--a){if(a<=i.first)return i.first;var c=Ve(i,a-1),l=c.stateAfter;if(l&&(!r||a+(l instanceof lt?l.lookAhead:0)<=i.modeFrontier))return a;var p=F(c.text,null,e.options.tabSize);(null==o||n>p)&&(o=a-1,n=p)}return o}(e,t,r),s=i>n.first&&Ve(n,i-1).stateAfter,a=s?pt.fromSaved(n,s,i):new pt(n,$e(n.mode),i);return n.iter(i,t,(function(r){ft(e,r.text,a);var n=a.line;r.stateAfter=n==t-1||n%5==0||n>=o.viewFrom&&n<o.viewTo?a.save():null,a.nextLine()})),r&&(n.modeFrontier=a.line),a}function ft(e,t,r,n){var o=e.doc.mode,i=new He(t,e.options.tabSize,r);for(i.start=i.pos=n||0,""==t&&mt(o,r.state);!i.eol();)gt(o,i,r.state),i.start=i.pos}function mt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=qe(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function gt(e,t,r,n){for(var o=0;o<10;o++){n&&(n[0]=qe(e,r).mode);var i=e.token(t,r);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}pt.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},pt.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},pt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},pt.fromSaved=function(e,t,r){return t instanceof lt?new pt(e,Ue(e.mode,t.state),r,t.lookAhead):new pt(e,Ue(e.mode,t),r)},pt.prototype.save=function(e){var t=!1!==e?Ue(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lt(t,this.maxLookAhead):t};var yt=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r};function vt(e,t,r,n){var o,i,s=e.doc,a=s.mode,c=Ve(s,(t=at(s,t)).line),l=ht(e,t.line,r),p=new He(c.text,e.options.tabSize,l);for(n&&(i=[]);(n||p.pos<t.ch)&&!p.eol();)p.start=p.pos,o=gt(a,p,l.state),n&&i.push(new yt(p,o,Ue(s.mode,l.state)));return n?i:new yt(p,o,l.state)}function bt(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(t[n])||(t[n]+=" "+r[2])}return e}function wt(e,t,r,n,o,i,s){var a=r.flattenSpans;null==a&&(a=e.options.flattenSpans);var c,l=0,p=null,u=new He(t,e.options.tabSize,n),d=e.options.addModeClass&&[null];for(""==t&&bt(mt(r,n.state),i);!u.eol();){if(u.pos>e.options.maxHighlightLength?(a=!1,s&&ft(e,t,n,u.pos),u.pos=t.length,c=null):c=bt(gt(r,u,n.state,d),i),d){var h=d[0].name;h&&(c="m-"+(c?h+" "+c:h))}if(!a||p!=c){for(;l<u.start;)o(l=Math.min(u.start,l+5e3),p);p=c}u.start=u.pos}for(;l<u.pos;){var f=Math.min(u.pos,l+5e3);o(f,p),l=f}}var xt=!1,kt=!1;function Et(e,t,r){this.marker=e,this.from=t,this.to=r}function _t(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function St(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function Ct(e,t){if(t.full)return null;var r=Qe(e,t.from.line)&&Ve(e,t.from.line).markedSpans,n=Qe(e,t.to.line)&&Ve(e,t.to.line).markedSpans;if(!r&&!n)return null;var o=t.from.ch,i=t.to.ch,s=0==tt(t.from,t.to),a=function(e,t,r){var n;if(e)for(var o=0;o<e.length;++o){var i=e[o],s=i.marker;if(null==i.from||(s.inclusiveLeft?i.from<=t:i.from<t)||i.from==t&&"bookmark"==s.type&&(!r||!i.marker.insertLeft)){var a=null==i.to||(s.inclusiveRight?i.to>=t:i.to>t);(n||(n=[])).push(new Et(s,i.from,a?null:i.to))}}return n}(r,o,s),c=function(e,t,r){var n;if(e)for(var o=0;o<e.length;++o){var i=e[o],s=i.marker;if(null==i.to||(s.inclusiveRight?i.to>=t:i.to>t)||i.from==t&&"bookmark"==s.type&&(!r||i.marker.insertLeft)){var a=null==i.from||(s.inclusiveLeft?i.from<=t:i.from<t);(n||(n=[])).push(new Et(s,a?null:i.from-t,null==i.to?null:i.to-t))}}return n}(n,i,s),l=1==t.text.length,p=J(t.text).length+(l?o:0);if(a)for(var u=0;u<a.length;++u){var d=a[u];if(null==d.to){var h=_t(c,d.marker);h?l&&(d.to=null==h.to?null:h.to+p):d.to=o}}if(c)for(var f=0;f<c.length;++f){var m=c[f];null!=m.to&&(m.to+=p),null==m.from?_t(a,m.marker)||(m.from=p,l&&(a||(a=[])).push(m)):(m.from+=p,l&&(a||(a=[])).push(m))}a&&(a=Pt(a)),c&&c!=a&&(c=Pt(c));var g=[a];if(!l){var y,v=t.text.length-2;if(v>0&&a)for(var b=0;b<a.length;++b)null==a[b].to&&(y||(y=[])).push(new Et(a[b].marker,null,null));for(var w=0;w<v;++w)g.push(y);g.push(c)}return g}function Pt(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&!1!==r.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function At(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function Ot(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function Tt(e){return e.inclusiveLeft?-1:0}function Dt(e){return e.inclusiveRight?1:0}function Nt(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),o=t.find(),i=tt(n.from,o.from)||Tt(e)-Tt(t);if(i)return-i;var s=tt(n.to,o.to)||Dt(e)-Dt(t);return s||t.id-e.id}function jt(e,t){var r,n=kt&&e.markedSpans;if(n)for(var o=void 0,i=0;i<n.length;++i)(o=n[i]).marker.collapsed&&null==(t?o.from:o.to)&&(!r||Nt(r,o.marker)<0)&&(r=o.marker);return r}function It(e){return jt(e,!0)}function Rt(e){return jt(e,!1)}function Mt(e,t){var r,n=kt&&e.markedSpans;if(n)for(var o=0;o<n.length;++o){var i=n[o];i.marker.collapsed&&(null==i.from||i.from<t)&&(null==i.to||i.to>t)&&(!r||Nt(r,i.marker)<0)&&(r=i.marker)}return r}function Lt(e,t,r,n,o){var i=Ve(e,t),s=kt&&i.markedSpans;if(s)for(var a=0;a<s.length;++a){var c=s[a];if(c.marker.collapsed){var l=c.marker.find(0),p=tt(l.from,r)||Tt(c.marker)-Tt(o),u=tt(l.to,n)||Dt(c.marker)-Dt(o);if(!(p>=0&&u<=0||p<=0&&u>=0)&&(p<=0&&(c.marker.inclusiveRight&&o.inclusiveLeft?tt(l.to,r)>=0:tt(l.to,r)>0)||p>=0&&(c.marker.inclusiveRight&&o.inclusiveLeft?tt(l.from,n)<=0:tt(l.from,n)<0)))return!0}}}function Ft(e){for(var t;t=It(e);)e=t.find(-1,!0).line;return e}function Gt(e,t){var r=Ve(e,t),n=Ft(r);return r==n?t:Ye(n)}function Bt(e,t){if(t>e.lastLine())return t;var r,n=Ve(e,t);if(!zt(e,n))return t;for(;r=Rt(n);)n=r.find(1,!0).line;return Ye(n)+1}function zt(e,t){var r=kt&&t.markedSpans;if(r)for(var n=void 0,o=0;o<r.length;++o)if((n=r[o]).marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&Ut(e,t,n))return!0}}function Ut(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return Ut(e,n.line,_t(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var o=void 0,i=0;i<t.markedSpans.length;++i)if((o=t.markedSpans[i]).marker.collapsed&&!o.marker.widgetNode&&o.from==r.to&&(null==o.to||o.to!=r.from)&&(o.marker.inclusiveLeft||r.marker.inclusiveRight)&&Ut(e,t,o))return!0}function qt(e){for(var t=0,r=(e=Ft(e)).parent,n=0;n<r.lines.length;++n){var o=r.lines[n];if(o==e)break;t+=o.height}for(var i=r.parent;i;i=(r=i).parent)for(var s=0;s<i.children.length;++s){var a=i.children[s];if(a==r)break;t+=a.height}return t}function $t(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=It(n);){var o=t.find(0,!0);n=o.from.line,r+=o.from.ch-o.to.ch}for(n=e;t=Rt(n);){var i=t.find(0,!0);r-=n.text.length-i.from.ch,r+=(n=i.to.line).text.length-i.to.ch}return r}function Ht(e){var t=e.display,r=e.doc;t.maxLine=Ve(r,r.first),t.maxLineLength=$t(t.maxLine),t.maxLineChanged=!0,r.iter((function(e){var r=$t(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)}))}var Vt=function(e,t,r){this.text=e,Ot(this,t),this.height=r?r(this):1};function Wt(e){e.parent=null,At(e)}Vt.prototype.lineNo=function(){return Ye(this)},ve(Vt);var Jt={},Xt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?Xt:Jt;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function Kt(e,t){var r=T("span",null,null,c?"padding-right: .1px":null),n={pre:T("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var i=o?t.rest[o-1]:t.line,s=void 0;n.pos=0,n.addToken=Zt,Oe(e.display.measure)&&(s=le(i,e.doc.direction))&&(n.addToken=er(n.addToken,s)),n.map=[],rr(i,n,dt(e,i,t!=e.display.externalMeasured&&Ye(i))),i.styleClasses&&(i.styleClasses.bgClass&&(n.bgClass=I(i.styleClasses.bgClass,n.bgClass||"")),i.styleClasses.textClass&&(n.textClass=I(i.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(Ae(e.display.measure))),0==o?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(c){var a=n.content.lastChild;(/\bcm-tab\b/.test(a.className)||a.querySelector&&a.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return fe(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=I(n.pre.className,n.textClass||"")),n}function Qt(e){var t=O("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Zt(e,t,r,n,o,i,c){if(t){var l,p=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",o=0;o<e.length;o++){var i=e.charAt(o);" "!=i||!r||o!=e.length-1&&32!=e.charCodeAt(o+1)||(i=" "),n+=i,r=" "==i}return n}(t,e.trailingSpace):t,u=e.cm.state.specialChars,d=!1;if(u.test(t)){l=document.createDocumentFragment();for(var h=0;;){u.lastIndex=h;var f=u.exec(t),m=f?f.index-h:t.length-h;if(m){var g=document.createTextNode(p.slice(h,h+m));s&&a<9?l.appendChild(O("span",[g])):l.appendChild(g),e.map.push(e.pos,e.pos+m,g),e.col+=m,e.pos+=m}if(!f)break;h+=m+1;var y=void 0;if("\t"==f[0]){var v=e.cm.options.tabSize,b=v-e.col%v;(y=l.appendChild(O("span",W(b),"cm-tab"))).setAttribute("role","presentation"),y.setAttribute("cm-text","\t"),e.col+=b}else"\r"==f[0]||"\n"==f[0]?((y=l.appendChild(O("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]),e.col+=1):((y=e.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),s&&a<9?l.appendChild(O("span",[y])):l.appendChild(y),e.col+=1);e.map.push(e.pos,e.pos+1,y),e.pos++}}else e.col+=t.length,l=document.createTextNode(p),e.map.push(e.pos,e.pos+t.length,l),s&&a<9&&(d=!0),e.pos+=t.length;if(e.trailingSpace=32==p.charCodeAt(t.length-1),r||n||o||d||i||c){var w=r||"";n&&(w+=n),o&&(w+=o);var x=O("span",[l],w,i);if(c)for(var k in c)c.hasOwnProperty(k)&&"style"!=k&&"class"!=k&&x.setAttribute(k,c[k]);return e.content.appendChild(x)}e.content.appendChild(l)}}function er(e,t){return function(r,n,o,i,s,a,c){o=o?o+" cm-force-border":"cm-force-border";for(var l=r.pos,p=l+n.length;;){for(var u=void 0,d=0;d<t.length&&!((u=t[d]).to>l&&u.from<=l);d++);if(u.to>=p)return e(r,n,o,i,s,a,c);e(r,n.slice(0,u.to-l),o,i,null,a,c),i=null,n=n.slice(u.to-l),l=u.to}}}function tr(e,t,r,n){var o=!n&&r.widgetNode;o&&e.map.push(e.pos,e.pos+t,o),!n&&e.cm.display.input.needsContentAttribute&&(o||(o=e.content.appendChild(document.createElement("span"))),o.setAttribute("cm-marker",r.id)),o&&(e.cm.display.input.setUneditable(o),e.content.appendChild(o)),e.pos+=t,e.trailingSpace=!1}function rr(e,t,r){var n=e.markedSpans,o=e.text,i=0;if(n)for(var s,a,c,l,p,u,d,h=o.length,f=0,m=1,g="",y=0;;){if(y==f){c=l=p=a="",d=null,u=null,y=1/0;for(var v=[],b=void 0,w=0;w<n.length;++w){var x=n[w],k=x.marker;if("bookmark"==k.type&&x.from==f&&k.widgetNode)v.push(k);else if(x.from<=f&&(null==x.to||x.to>f||k.collapsed&&x.to==f&&x.from==f)){if(null!=x.to&&x.to!=f&&y>x.to&&(y=x.to,l=""),k.className&&(c+=" "+k.className),k.css&&(a=(a?a+";":"")+k.css),k.startStyle&&x.from==f&&(p+=" "+k.startStyle),k.endStyle&&x.to==y&&(b||(b=[])).push(k.endStyle,x.to),k.title&&((d||(d={})).title=k.title),k.attributes)for(var E in k.attributes)(d||(d={}))[E]=k.attributes[E];k.collapsed&&(!u||Nt(u.marker,k)<0)&&(u=x)}else x.from>f&&y>x.from&&(y=x.from)}if(b)for(var _=0;_<b.length;_+=2)b[_+1]==y&&(l+=" "+b[_]);if(!u||u.from==f)for(var S=0;S<v.length;++S)tr(t,0,v[S]);if(u&&(u.from||0)==f){if(tr(t,(null==u.to?h+1:u.to)-f,u.marker,null==u.from),null==u.to)return;u.to==f&&(u=!1)}}if(f>=h)break;for(var C=Math.min(h,y);;){if(g){var P=f+g.length;if(!u){var A=P>C?g.slice(0,C-f):g;t.addToken(t,A,s?s+c:c,p,f+A.length==y?l:"",a,d)}if(P>=C){g=g.slice(C-f),f=C;break}f=P,p=""}g=o.slice(i,i=r[m++]),s=Yt(r[m++],t.cm.options)}}else for(var O=1;O<r.length;O+=2)t.addToken(t,o.slice(i,i=r[O]),Yt(r[O+1],t.cm.options))}function nr(e,t,r){this.line=t,this.rest=function(e){for(var t,r;t=Rt(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}(t),this.size=this.rest?Ye(J(this.rest))-r+1:1,this.node=this.text=null,this.hidden=zt(e,t)}function or(e,t,r){for(var n,o=[],i=t;i<r;i=n){var s=new nr(e.doc,Ve(e.doc,i),i);n=i+s.size,o.push(s)}return o}var ir=null,sr=null;function ar(e,t){var r=de(e,t);if(r.length){var n,o=Array.prototype.slice.call(arguments,2);ir?n=ir.delayedCallbacks:sr?n=sr:(n=sr=[],setTimeout(cr,0));for(var i=function(e){n.push((function(){return r[e].apply(null,o)}))},s=0;s<r.length;++s)i(s)}}function cr(){var e=sr;sr=null;for(var t=0;t<e.length;++t)e[t]()}function lr(e,t,r,n){for(var o=0;o<t.changes.length;o++){var i=t.changes[o];"text"==i?dr(e,t):"gutter"==i?fr(e,t,r,n):"class"==i?hr(e,t):"widget"==i&&mr(e,t,n)}t.changes=null}function pr(e){return e.node==e.text&&(e.node=O("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),s&&a<8&&(e.node.style.zIndex=2)),e.node}function ur(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):Kt(e,t)}function dr(e,t){var r=t.text.className,n=ur(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,hr(e,t)):r&&(t.text.className=r)}function hr(e,t){!function(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var n=pr(t);t.background=n.insertBefore(O("div",null,r),n.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?pr(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function fr(e,t,r,n){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=pr(t);t.gutterBackground=O("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var s=pr(t),a=t.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(O("div",Ze(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),i)for(var c=0;c<e.display.gutterSpecs.length;++c){var l=e.display.gutterSpecs[c].className,p=i.hasOwnProperty(l)&&i[l];p&&a.appendChild(O("div",[p],"CodeMirror-gutter-elt","left: "+n.gutterLeft[l]+"px; width: "+n.gutterWidth[l]+"px"))}}}function mr(e,t,r){t.alignable&&(t.alignable=null);for(var n=_("CodeMirror-linewidget"),o=t.node.firstChild,i=void 0;o;o=i)i=o.nextSibling,n.test(o.className)&&t.node.removeChild(o);yr(e,t,r)}function gr(e,t,r,n){var o=ur(e,t);return t.text=t.node=o.pre,o.bgClass&&(t.bgClass=o.bgClass),o.textClass&&(t.textClass=o.textClass),hr(e,t),fr(e,t,r,n),yr(e,t,n),t.node}function yr(e,t,r){if(vr(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)vr(e,t.rest[n],t,r,!1)}function vr(e,t,r,n,o){if(t.widgets)for(var i=pr(r),s=0,a=t.widgets;s<a.length;++s){var c=a[s],l=O("div",[c.node],"CodeMirror-linewidget"+(c.className?" "+c.className:""));c.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),br(c,l,r,n),e.display.input.setUneditable(l),o&&c.above?i.insertBefore(l,r.gutter||r.text):i.appendChild(l),ar(c,"redraw")}}function br(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var o=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(o-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=o+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function wr(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!D(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+t.display.wrapper.clientWidth+"px;"),A(t.display.measure,O("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function xr(e,t){for(var r=Ee(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function kr(e){return e.lineSpace.offsetTop}function Er(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function _r(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=A(e.measure,O("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return isNaN(n.left)||isNaN(n.right)||(e.cachedPaddingH=n),n}function Sr(e){return 50-e.display.nativeBarWidth}function Cr(e){return e.display.scroller.clientWidth-Sr(e)-e.display.barWidth}function Pr(e){return e.display.scroller.clientHeight-Sr(e)-e.display.barHeight}function Ar(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var o=0;o<e.rest.length;o++)if(Ye(e.rest[o])>r)return{map:e.measure.maps[o],cache:e.measure.caches[o],before:!0}}function Or(e,t,r,n){return Nr(e,Dr(e,t),r,n)}function Tr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[pn(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function Dr(e,t){var r=Ye(t),n=Tr(e,r);n&&!n.text?n=null:n&&n.changes&&(lr(e,n,r,on(e)),e.curOp.forceUpdate=!0),n||(n=function(e,t){var r=Ye(t=Ft(t)),n=e.display.externalMeasured=new nr(e.doc,t,r);n.lineN=r;var o=n.built=Kt(e,n);return n.text=o.pre,A(e.display.lineMeasure,o.pre),n}(e,t));var o=Ar(n,t,r);return{line:t,view:n,rect:null,map:o.map,cache:o.cache,before:o.before,hasHeights:!1}}function Nr(e,t,r,n,o){t.before&&(r=-1);var i,c=r+(n||"");return t.cache.hasOwnProperty(c)?i=t.cache[c]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,r){var n=e.options.lineWrapping,o=n&&Cr(e);if(!t.measure.heights||n&&t.measure.width!=o){var i=t.measure.heights=[];if(n){t.measure.width=o;for(var s=t.text.firstChild.getClientRects(),a=0;a<s.length-1;a++){var c=s[a],l=s[a+1];Math.abs(c.bottom-l.bottom)>2&&i.push((c.bottom+l.top)/2-r.top)}}i.push(r.bottom-r.top)}}(e,t.view,t.rect),t.hasHeights=!0),(i=function(e,t,r,n){var o,i=Rr(t.map,r,n),c=i.node,l=i.start,p=i.end,u=i.collapse;if(3==c.nodeType){for(var d=0;d<4;d++){for(;l&&ne(t.line.text.charAt(i.coverStart+l));)--l;for(;i.coverStart+p<i.coverEnd&&ne(t.line.text.charAt(i.coverStart+p));)++p;if((o=s&&a<9&&0==l&&p==i.coverEnd-i.coverStart?c.parentNode.getBoundingClientRect():Mr(S(c,l,p).getClientRects(),n)).left||o.right||0==l)break;p=l,l-=1,u="right"}s&&a<11&&(o=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ie)return Ie;var t=A(e,O("span","x")),r=t.getBoundingClientRect(),n=S(t,0,1).getBoundingClientRect();return Ie=Math.abs(r.left-n.left)>1}(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}(e.display.measure,o))}else{var h;l>0&&(u=n="right"),o=e.options.lineWrapping&&(h=c.getClientRects()).length>1?h["right"==n?h.length-1:0]:c.getBoundingClientRect()}if(s&&a<9&&!l&&(!o||!o.left&&!o.right)){var f=c.parentNode.getClientRects()[0];o=f?{left:f.left,right:f.left+nn(e.display),top:f.top,bottom:f.bottom}:Ir}for(var m=o.top-t.rect.top,g=o.bottom-t.rect.top,y=(m+g)/2,v=t.view.measure.heights,b=0;b<v.length-1&&!(y<v[b]);b++);var w=b?v[b-1]:0,x=v[b],k={left:("right"==u?o.right:o.left)-t.rect.left,right:("left"==u?o.left:o.right)-t.rect.left,top:w,bottom:x};return o.left||o.right||(k.bogus=!0),e.options.singleCursorHeightPerLine||(k.rtop=m,k.rbottom=g),k}(e,t,r,n)).bogus||(t.cache[c]=i)),{left:i.left,right:i.right,top:o?i.rtop:i.top,bottom:o?i.rbottom:i.bottom}}var jr,Ir={left:0,right:0,top:0,bottom:0};function Rr(e,t,r){for(var n,o,i,s,a,c,l=0;l<e.length;l+=3)if(a=e[l],c=e[l+1],t<a?(o=0,i=1,s="left"):t<c?i=1+(o=t-a):(l==e.length-3||t==c&&e[l+3]>t)&&(o=(i=c-a)-1,t>=c&&(s="right")),null!=o){if(n=e[l+2],a==c&&r==(n.insertLeft?"left":"right")&&(s=r),"left"==r&&0==o)for(;l&&e[l-2]==e[l-3]&&e[l-1].insertLeft;)n=e[2+(l-=3)],s="left";if("right"==r&&o==c-a)for(;l<e.length-3&&e[l+3]==e[l+4]&&!e[l+5].insertLeft;)n=e[(l+=3)+2],s="right";break}return{node:n,start:o,end:i,collapse:s,coverStart:a,coverEnd:c}}function Mr(e,t){var r=Ir;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var o=e.length-1;o>=0&&(r=e[o]).left==r.right;o--);return r}function Lr(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Fr(e){e.display.externalMeasure=null,P(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Lr(e.display.view[t])}function Gr(e){Fr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Br(){return p&&g?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function zr(){return p&&g?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Ur(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=wr(e.widgets[r]));return t}function qr(e,t,r,n,o){if(!o){var i=Ur(t);r.top+=i,r.bottom+=i}if("line"==n)return r;n||(n="local");var s=qt(t);if("local"==n?s+=kr(e.display):s-=e.display.viewOffset,"page"==n||"window"==n){var a=e.display.lineSpace.getBoundingClientRect();s+=a.top+("window"==n?0:zr());var c=a.left+("window"==n?0:Br());r.left+=c,r.right+=c}return r.top+=s,r.bottom+=s,r}function $r(e,t,r){if("div"==r)return t;var n=t.left,o=t.top;if("page"==r)n-=Br(),o-=zr();else if("local"==r||!r){var i=e.display.sizer.getBoundingClientRect();n+=i.left,o+=i.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:n-s.left,top:o-s.top}}function Hr(e,t,r,n,o){return n||(n=Ve(e.doc,t.line)),qr(e,n,Or(e,n,t.ch,o),r)}function Vr(e,t,r,n,o,i){function s(t,s){var a=Nr(e,o,t,s?"right":"left",i);return s?a.left=a.right:a.right=a.left,qr(e,n,a,r)}n=n||Ve(e.doc,t.line),o||(o=Dr(e,n));var a=le(n,e.doc.direction),c=t.ch,l=t.sticky;if(c>=n.text.length?(c=n.text.length,l="before"):c<=0&&(c=0,l="after"),!a)return s("before"==l?c-1:c,"before"==l);function p(e,t,r){return s(r?e-1:e,1==a[t].level!=r)}var u=ae(a,c,l),d=se,h=p(c,u,"before"==l);return null!=d&&(h.other=p(c,d,"before"!=l)),h}function Wr(e,t){var r=0;t=at(e.doc,t),e.options.lineWrapping||(r=nn(e.display)*t.ch);var n=Ve(e.doc,t.line),o=qt(n)+kr(e.display);return{left:r,right:r,top:o,bottom:o+n.height}}function Jr(e,t,r,n,o){var i=et(e,t,r);return i.xRel=o,n&&(i.outside=n),i}function Xr(e,t,r){var n=e.doc;if((r+=e.display.viewOffset)<0)return Jr(n.first,0,null,-1,-1);var o=Ke(n,r),i=n.first+n.size-1;if(o>i)return Jr(n.first+n.size-1,Ve(n,i).text.length,null,1,1);t<0&&(t=0);for(var s=Ve(n,o);;){var a=Zr(e,s,o,t,r),c=Mt(s,a.ch+(a.xRel>0||a.outside>0?1:0));if(!c)return a;var l=c.find(1);if(l.line==o)return l;s=Ve(n,o=l.line)}}function Yr(e,t,r,n){n-=Ur(t);var o=t.text.length,i=ie((function(t){return Nr(e,r,t-1).bottom<=n}),o,0);return{begin:i,end:o=ie((function(t){return Nr(e,r,t).top>n}),i,o)}}function Kr(e,t,r,n){return r||(r=Dr(e,t)),Yr(e,t,r,qr(e,t,Nr(e,r,n),"line").top)}function Qr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function Zr(e,t,r,n,o){o-=qt(t);var i=Dr(e,t),s=Ur(t),a=0,c=t.text.length,l=!0,p=le(t,e.doc.direction);if(p){var u=(e.options.lineWrapping?tn:en)(e,t,r,i,p,n,o);a=(l=1!=u.level)?u.from:u.to-1,c=l?u.to:u.from-1}var d,h,f=null,m=null,g=ie((function(t){var r=Nr(e,i,t);return r.top+=s,r.bottom+=s,!!Qr(r,n,o,!1)&&(r.top<=o&&r.left<=n&&(f=t,m=r),!0)}),a,c),y=!1;if(m){var v=n-m.left<m.right-n,b=v==l;g=f+(b?0:1),h=b?"after":"before",d=v?m.left:m.right}else{l||g!=c&&g!=a||g++,h=0==g?"after":g==t.text.length?"before":Nr(e,i,g-(l?1:0)).bottom+s<=o==l?"after":"before";var w=Vr(e,et(r,g,h),"line",t,i);d=w.left,y=o<w.top?-1:o>=w.bottom?1:0}return Jr(r,g=oe(t.text,g,1),h,y,n-d)}function en(e,t,r,n,o,i,s){var a=ie((function(a){var c=o[a],l=1!=c.level;return Qr(Vr(e,et(r,l?c.to:c.from,l?"before":"after"),"line",t,n),i,s,!0)}),0,o.length-1),c=o[a];if(a>0){var l=1!=c.level,p=Vr(e,et(r,l?c.from:c.to,l?"after":"before"),"line",t,n);Qr(p,i,s,!0)&&p.top>s&&(c=o[a-1])}return c}function tn(e,t,r,n,o,i,s){var a=Yr(e,t,n,s),c=a.begin,l=a.end;/\s/.test(t.text.charAt(l-1))&&l--;for(var p=null,u=null,d=0;d<o.length;d++){var h=o[d];if(!(h.from>=l||h.to<=c)){var f=Nr(e,n,1!=h.level?Math.min(l,h.to)-1:Math.max(c,h.from)).right,m=f<i?i-f+1e9:f-i;(!p||u>m)&&(p=h,u=m)}}return p||(p=o[o.length-1]),p.from<c&&(p={from:c,to:p.to,level:p.level}),p.to>l&&(p={from:p.from,to:l,level:p.level}),p}function rn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==jr){jr=O("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)jr.appendChild(document.createTextNode("x")),jr.appendChild(O("br"));jr.appendChild(document.createTextNode("x"))}A(e.measure,jr);var r=jr.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),P(e.measure),r||1}function nn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=O("span","xxxxxxxxxx"),r=O("pre",[t],"CodeMirror-line-like");A(e.measure,r);var n=t.getBoundingClientRect(),o=(n.right-n.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function on(e){for(var t=e.display,r={},n={},o=t.gutters.clientLeft,i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s){var a=e.display.gutterSpecs[s].className;r[a]=i.offsetLeft+i.clientLeft+o,n[a]=i.clientWidth}return{fixedPos:sn(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function sn(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function an(e){var t=rn(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/nn(e.display)-3);return function(o){if(zt(e.doc,o))return 0;var i=0;if(o.widgets)for(var s=0;s<o.widgets.length;s++)o.widgets[s].height&&(i+=o.widgets[s].height);return r?i+(Math.ceil(o.text.length/n)||1)*t:i+t}}function cn(e){var t=e.doc,r=an(e);t.iter((function(e){var t=r(e);t!=e.height&&Xe(e,t)}))}function ln(e,t,r,n){var o=e.display;if(!r&&"true"==Ee(t).getAttribute("cm-not-content"))return null;var i,s,a=o.lineSpace.getBoundingClientRect();try{i=t.clientX-a.left,s=t.clientY-a.top}catch(e){return null}var c,l=Xr(e,i,s);if(n&&l.xRel>0&&(c=Ve(e.doc,l.line).text).length==l.ch){var p=F(c,c.length,e.options.tabSize)-c.length;l=et(l.line,Math.max(0,Math.round((i-_r(e.display).left)/nn(e.display))-p))}return l}function pn(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if((t-=r[n].size)<0)return n}function un(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var o=e.display;if(n&&r<o.viewTo&&(null==o.updateLineNumbers||o.updateLineNumbers>t)&&(o.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=o.viewTo)kt&&Gt(e.doc,t)<o.viewTo&&hn(e);else if(r<=o.viewFrom)kt&&Bt(e.doc,r+n)>o.viewFrom?hn(e):(o.viewFrom+=n,o.viewTo+=n);else if(t<=o.viewFrom&&r>=o.viewTo)hn(e);else if(t<=o.viewFrom){var i=fn(e,r,r+n,1);i?(o.view=o.view.slice(i.index),o.viewFrom=i.lineN,o.viewTo+=n):hn(e)}else if(r>=o.viewTo){var s=fn(e,t,t,-1);s?(o.view=o.view.slice(0,s.index),o.viewTo=s.lineN):hn(e)}else{var a=fn(e,t,t,-1),c=fn(e,r,r+n,1);a&&c?(o.view=o.view.slice(0,a.index).concat(or(e,a.lineN,c.lineN)).concat(o.view.slice(c.index)),o.viewTo+=n):hn(e)}var l=o.externalMeasured;l&&(r<l.lineN?l.lineN+=n:t<l.lineN+l.size&&(o.externalMeasured=null))}function dn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,o=e.display.externalMeasured;if(o&&t>=o.lineN&&t<o.lineN+o.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var i=n.view[pn(e,t)];if(null!=i.node){var s=i.changes||(i.changes=[]);-1==B(s,r)&&s.push(r)}}}function hn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function fn(e,t,r,n){var o,i=pn(e,t),s=e.display.view;if(!kt||r==e.doc.first+e.doc.size)return{index:i,lineN:r};for(var a=e.display.viewFrom,c=0;c<i;c++)a+=s[c].size;if(a!=t){if(n>0){if(i==s.length-1)return null;o=a+s[i].size-t,i++}else o=a-t;t+=o,r+=o}for(;Gt(e.doc,r)!=r;){if(i==(n<0?0:s.length-1))return null;r+=n*s[i-(n<0?1:0)].size,i+=n}return{index:i,lineN:r}}function mn(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var o=t[n];o.hidden||o.node&&!o.changes||++r}return r}function gn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function yn(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},o=n.cursors=document.createDocumentFragment(),i=n.selection=document.createDocumentFragment(),s=0;s<r.sel.ranges.length;s++)if(t||s!=r.sel.primIndex){var a=r.sel.ranges[s];if(!(a.from().line>=e.display.viewTo||a.to().line<e.display.viewFrom)){var c=a.empty();(c||e.options.showCursorWhenSelecting)&&vn(e,a.head,o),c||wn(e,a,i)}}return n}function vn(e,t,r){var n=Vr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(O("div"," ","CodeMirror-cursor"));if(o.style.left=n.left+"px",o.style.top=n.top+"px",o.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",n.other){var i=r.appendChild(O("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));i.style.display="",i.style.left=n.other.left+"px",i.style.top=n.other.top+"px",i.style.height=.85*(n.other.bottom-n.other.top)+"px"}}function bn(e,t){return e.top-t.top||e.left-t.left}function wn(e,t,r){var n=e.display,o=e.doc,i=document.createDocumentFragment(),s=_r(e.display),a=s.left,c=Math.max(n.sizerWidth,Cr(e)-n.sizer.offsetLeft)-s.right,l="ltr"==o.direction;function p(e,t,r,n){t<0&&(t=0),t=Math.round(t),n=Math.round(n),i.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?c-e:r)+"px;\n                             height: "+(n-t)+"px"))}function u(t,r,n){var i,s,u=Ve(o,t),d=u.text.length;function h(r,n){return Hr(e,et(t,r),"div",u,n)}function f(t,r,n){var o=Kr(e,u,null,t),i="ltr"==r==("after"==n)?"left":"right";return h("after"==n?o.begin:o.end-(/\s/.test(u.text.charAt(o.end-1))?2:1),i)[i]}var m=le(u,o.direction);return function(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var o=!1,i=0;i<e.length;++i){var s=e[i];(s.from<r&&s.to>t||t==r&&s.to==t)&&(n(Math.max(s.from,t),Math.min(s.to,r),1==s.level?"rtl":"ltr",i),o=!0)}o||n(t,r,"ltr")}(m,r||0,null==n?d:n,(function(e,t,o,u){var g="ltr"==o,y=h(e,g?"left":"right"),v=h(t-1,g?"right":"left"),b=null==r&&0==e,w=null==n&&t==d,x=0==u,k=!m||u==m.length-1;if(v.top-y.top<=3){var E=(l?w:b)&&k,_=(l?b:w)&&x?a:(g?y:v).left,S=E?c:(g?v:y).right;p(_,y.top,S-_,y.bottom)}else{var C,P,A,O;g?(C=l&&b&&x?a:y.left,P=l?c:f(e,o,"before"),A=l?a:f(t,o,"after"),O=l&&w&&k?c:v.right):(C=l?f(e,o,"before"):a,P=!l&&b&&x?c:y.right,A=!l&&w&&k?a:v.left,O=l?f(t,o,"after"):c),p(C,y.top,P-C,y.bottom),y.bottom<v.top&&p(a,y.bottom,null,v.top),p(A,v.top,O-A,v.bottom)}(!i||bn(y,i)<0)&&(i=y),bn(v,i)<0&&(i=v),(!s||bn(y,s)<0)&&(s=y),bn(v,s)<0&&(s=v)})),{start:i,end:s}}var d=t.from(),h=t.to();if(d.line==h.line)u(d.line,d.ch,h.ch);else{var f=Ve(o,d.line),m=Ve(o,h.line),g=Ft(f)==Ft(m),y=u(d.line,d.ch,g?f.text.length+1:null).end,v=u(h.line,g?0:null,h.ch).start;g&&(y.top<v.top-2?(p(y.right,y.top,null,y.bottom),p(a,v.top,v.left,v.bottom)):p(y.right,y.top,v.left-y.right,y.bottom)),y.bottom<v.top&&p(a,y.bottom,null,v.top)}r.appendChild(i)}function xn(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval((function(){e.hasFocus()||Sn(e),t.cursorDiv.style.visibility=(r=!r)?"":"hidden"}),e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function kn(e){e.state.focused||(e.display.input.focus(),_n(e))}function En(e){e.state.delayingBlurEvent=!0,setTimeout((function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Sn(e))}),100)}function _n(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(fe(e,"focus",e,t),e.state.focused=!0,j(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),c&&setTimeout((function(){return e.display.input.reset(!0)}),20)),e.display.input.receivedFocus()),xn(e))}function Sn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(fe(e,"blur",e,t),e.state.focused=!1,C(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout((function(){e.state.focused||(e.display.shift=!1)}),150))}function Cn(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var o=t.view[n],i=e.options.lineWrapping,c=void 0,l=0;if(!o.hidden){if(s&&a<8){var p=o.node.offsetTop+o.node.offsetHeight;c=p-r,r=p}else{var u=o.node.getBoundingClientRect();c=u.bottom-u.top,!i&&o.text.firstChild&&(l=o.text.firstChild.getBoundingClientRect().right-u.left-1)}var d=o.line.height-c;if((d>.005||d<-.005)&&(Xe(o.line,c),Pn(o.line),o.rest))for(var h=0;h<o.rest.length;h++)Pn(o.rest[h]);if(l>e.display.sizerWidth){var f=Math.ceil(l/nn(e.display));f>e.display.maxLineLength&&(e.display.maxLineLength=f,e.display.maxLine=o.line,e.display.maxLineChanged=!0)}}}}function Pn(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function An(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-kr(e));var o=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,i=Ke(t,n),s=Ke(t,o);if(r&&r.ensure){var a=r.ensure.from.line,c=r.ensure.to.line;a<i?(i=a,s=Ke(t,qt(Ve(t,a))+e.wrapper.clientHeight)):Math.min(c,t.lastLine())>=s&&(i=Ke(t,qt(Ve(t,c))-e.wrapper.clientHeight),s=c)}return{from:i,to:Math.max(s,i+1)}}function On(e,t){var r=e.display,n=rn(e.display);t.top<0&&(t.top=0);var o=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,i=Pr(e),s={};t.bottom-t.top>i&&(t.bottom=t.top+i);var a=e.doc.height+Er(r),c=t.top<n,l=t.bottom>a-n;if(t.top<o)s.scrollTop=c?0:t.top;else if(t.bottom>o+i){var p=Math.min(t.top,(l?a:t.bottom)-i);p!=o&&(s.scrollTop=p)}var u=e.options.fixedGutter?0:r.gutters.offsetWidth,d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft-u,h=Cr(e)-r.gutters.offsetWidth,f=t.right-t.left>h;return f&&(t.right=t.left+h),t.left<10?s.scrollLeft=0:t.left<d?s.scrollLeft=Math.max(0,t.left+u-(f?0:10)):t.right>h+d-3&&(s.scrollLeft=t.right+(f?0:10)-h),s}function Tn(e,t){null!=t&&(jn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Dn(e){jn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Nn(e,t,r){null==t&&null==r||jn(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function jn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,In(e,Wr(e,t.from),Wr(e,t.to),t.margin))}function In(e,t,r,n){var o=On(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});Nn(e,o.scrollLeft,o.scrollTop)}function Rn(e,t){Math.abs(e.doc.scrollTop-t)<2||(r||co(e,{top:t}),Mn(e,t,!0),r&&co(e),no(e,100))}function Mn(e,t,r){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ln(e,t,r,n){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,uo(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Fn(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+Er(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Sr(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}var Gn=function(e,t,r){this.cm=r;var n=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=o.tabIndex=-1,e(n),e(o),ue(n,"scroll",(function(){n.clientHeight&&t(n.scrollTop,"vertical")})),ue(o,"scroll",(function(){o.clientWidth&&t(o.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,s&&a<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Gn.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var o=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var i=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+i)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},Gn.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Gn.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Gn.prototype.zeroWidthHack=function(){var e=v&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new G,this.disableVert=new G},Gn.prototype.enableZeroWidthBar=function(e,t,r){e.style.pointerEvents="auto",t.set(1e3,(function n(){var o=e.getBoundingClientRect();("vert"==r?document.elementFromPoint(o.right-1,(o.top+o.bottom)/2):document.elementFromPoint((o.right+o.left)/2,o.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,n)}))},Gn.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Bn=function(){};function zn(e,t){t||(t=Fn(e));var r=e.display.barWidth,n=e.display.barHeight;Un(e,t);for(var o=0;o<4&&r!=e.display.barWidth||n!=e.display.barHeight;o++)r!=e.display.barWidth&&e.options.lineWrapping&&Cn(e),Un(e,Fn(e)),r=e.display.barWidth,n=e.display.barHeight}function Un(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}Bn.prototype.update=function(){return{bottom:0,right:0}},Bn.prototype.setScrollLeft=function(){},Bn.prototype.setScrollTop=function(){},Bn.prototype.clear=function(){};var qn={native:Gn,null:Bn};function $n(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&C(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new qn[e.options.scrollbarStyle]((function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ue(t,"mousedown",(function(){e.state.focused&&setTimeout((function(){return e.display.input.focus()}),0)})),t.setAttribute("cm-not-content","true")}),(function(t,r){"horizontal"==r?Ln(e,t):Rn(e,t)}),e),e.display.scrollbars.addClass&&j(e.display.wrapper,e.display.scrollbars.addClass)}var Hn=0;function Vn(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Hn},t=e.curOp,ir?ir.ops.push(t):t.ownsGroup=ir={ops:[t],delayedCallbacks:[]}}function Wn(e){var t=e.curOp;t&&function(e,t){var r=e.ownsGroup;if(r)try{!function(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var o=e.ops[n];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(r<t.length)}(r)}finally{ir=null,t(r)}}(t,(function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,r=0;r<t.length;r++)Jn(t[r]);for(var n=0;n<t.length;n++)Xn(t[n]);for(var o=0;o<t.length;o++)Yn(t[o]);for(var i=0;i<t.length;i++)Kn(t[i]);for(var s=0;s<t.length;s++)Qn(t[s])}(e)}))}function Jn(e){var t=e.cm,r=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Sr(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Sr(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&Ht(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new io(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Xn(e){e.updatedDisplay=e.mustUpdate&&so(e.cm,e.update)}function Yn(e){var t=e.cm,r=t.display;e.updatedDisplay&&Cn(t),e.barMeasure=Fn(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Or(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Sr(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Cr(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function Kn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ln(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==N();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&zn(t,e.barMeasure),e.updatedDisplay&&po(t,e.barMeasure),e.selectionChanged&&xn(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&kn(e.cm)}function Qn(e){var t=e.cm,r=t.display,n=t.doc;e.updatedDisplay&&ao(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&Mn(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Ln(t,e.scrollLeft,!0,!0),e.scrollToPos&&function(e,t){if(!me(e,"scrollCursorIntoView")){var r=e.display,n=r.sizer.getBoundingClientRect(),o=null;if(t.top+n.top<0?o=!0:t.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!f){var i=O("div","​",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-kr(e.display))+"px;\n                         height: "+(t.bottom-t.top+Sr(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(i),i.scrollIntoView(o),e.display.lineSpace.removeChild(i)}}}(t,function(e,t,r,n){var o;null==n&&(n=0),e.options.lineWrapping||t!=r||(r="before"==(t=t.ch?et(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t).sticky?et(t.line,t.ch+1,"before"):t);for(var i=0;i<5;i++){var s=!1,a=Vr(e,t),c=r&&r!=t?Vr(e,r):a,l=On(e,o={left:Math.min(a.left,c.left),top:Math.min(a.top,c.top)-n,right:Math.max(a.left,c.left),bottom:Math.max(a.bottom,c.bottom)+n}),p=e.doc.scrollTop,u=e.doc.scrollLeft;if(null!=l.scrollTop&&(Rn(e,l.scrollTop),Math.abs(e.doc.scrollTop-p)>1&&(s=!0)),null!=l.scrollLeft&&(Ln(e,l.scrollLeft),Math.abs(e.doc.scrollLeft-u)>1&&(s=!0)),!s)break}return o}(t,at(n,e.scrollToPos.from),at(n,e.scrollToPos.to),e.scrollToPos.margin));var o=e.maybeHiddenMarkers,i=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||fe(o[s],"hide");if(i)for(var a=0;a<i.length;++a)i[a].lines.length&&fe(i[a],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&fe(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Zn(e,t){if(e.curOp)return t();Vn(e);try{return t()}finally{Wn(e)}}function eo(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Vn(e);try{return t.apply(e,arguments)}finally{Wn(e)}}}function to(e){return function(){if(this.curOp)return e.apply(this,arguments);Vn(this);try{return e.apply(this,arguments)}finally{Wn(this)}}}function ro(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Vn(t);try{return e.apply(this,arguments)}finally{Wn(t)}}}function no(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,M(oo,e))}function oo(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=ht(e,t.highlightFrontier),o=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),(function(i){if(n.line>=e.display.viewFrom){var s=i.styles,a=i.text.length>e.options.maxHighlightLength?Ue(t.mode,n.state):null,c=ut(e,i,n,!0);a&&(n.state=a),i.styles=c.styles;var l=i.styleClasses,p=c.classes;p?i.styleClasses=p:l&&(i.styleClasses=null);for(var u=!s||s.length!=i.styles.length||l!=p&&(!l||!p||l.bgClass!=p.bgClass||l.textClass!=p.textClass),d=0;!u&&d<s.length;++d)u=s[d]!=i.styles[d];u&&o.push(n.line),i.stateAfter=n.save(),n.nextLine()}else i.text.length<=e.options.maxHighlightLength&&ft(e,i.text,n),i.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return no(e,e.options.workDelay),!0})),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),o.length&&Zn(e,(function(){for(var t=0;t<o.length;t++)dn(e,o[t],"text")}))}}var io=function(e,t,r){var n=e.display;this.viewport=t,this.visible=An(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Cr(e),this.force=r,this.dims=on(e),this.events=[]};function so(e,t){var r=e.display,n=e.doc;if(t.editorIsHidden)return hn(e),!1;if(!t.force&&t.visible.from>=r.viewFrom&&t.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==mn(e))return!1;ho(e)&&(hn(e),t.dims=on(e));var o=n.first+n.size,i=Math.max(t.visible.from-e.options.viewportMargin,n.first),s=Math.min(o,t.visible.to+e.options.viewportMargin);r.viewFrom<i&&i-r.viewFrom<20&&(i=Math.max(n.first,r.viewFrom)),r.viewTo>s&&r.viewTo-s<20&&(s=Math.min(o,r.viewTo)),kt&&(i=Gt(e.doc,i),s=Bt(e.doc,s));var a=i!=r.viewFrom||s!=r.viewTo||r.lastWrapHeight!=t.wrapperHeight||r.lastWrapWidth!=t.wrapperWidth;!function(e,t,r){var n=e.display;0==n.view.length||t>=n.viewTo||r<=n.viewFrom?(n.view=or(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=or(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(pn(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(or(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,pn(e,r)))),n.viewTo=r}(e,i,s),r.viewOffset=qt(Ve(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=mn(e);if(!a&&0==l&&!t.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var p=function(e){if(e.hasFocus())return null;var t=N();if(!t||!D(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&D(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}(e);return l>4&&(r.lineDiv.style.display="none"),function(e,t,r){var n=e.display,o=e.options.lineNumbers,i=n.lineDiv,s=i.firstChild;function a(t){var r=t.nextSibling;return c&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var l=n.view,p=n.viewFrom,u=0;u<l.length;u++){var d=l[u];if(d.hidden);else if(d.node&&d.node.parentNode==i){for(;s!=d.node;)s=a(s);var h=o&&null!=t&&t<=p&&d.lineNumber;d.changes&&(B(d.changes,"gutter")>-1&&(h=!1),lr(e,d,p,r)),h&&(P(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(Ze(e.options,p)))),s=d.node.nextSibling}else{var f=gr(e,d,p,r);i.insertBefore(f,s)}p+=d.size}for(;s;)s=a(s)}(e,r.updateLineNumbers,t.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,function(e){if(e&&e.activeElt&&e.activeElt!=N()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&D(document.body,e.anchorNode)&&D(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}(p),P(r.cursorDiv),P(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,a&&(r.lastWrapHeight=t.wrapperHeight,r.lastWrapWidth=t.wrapperWidth,no(e,400)),r.updateLineNumbers=null,!0}function ao(e,t){for(var r=t.viewport,n=!0;;n=!1){if(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Cr(e))n&&(t.visible=An(e.display,e.doc,r));else if(r&&null!=r.top&&(r={top:Math.min(e.doc.height+Er(e.display)-Pr(e),r.top)}),t.visible=An(e.display,e.doc,r),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!so(e,t))break;Cn(e);var o=Fn(e);gn(e),zn(e,o),po(e,o),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function co(e,t){var r=new io(e,t);if(so(e,r)){Cn(e),ao(e,r);var n=Fn(e);gn(e),zn(e,n),po(e,n),r.finish()}}function lo(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function po(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Sr(e)+"px"}function uo(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=sn(t)-t.scroller.scrollLeft+e.doc.scrollLeft,o=t.gutters.offsetWidth,i=n+"px",s=0;s<r.length;s++)if(!r[s].hidden){e.options.fixedGutter&&(r[s].gutter&&(r[s].gutter.style.left=i),r[s].gutterBackground&&(r[s].gutterBackground.style.left=i));var a=r[s].alignable;if(a)for(var c=0;c<a.length;c++)a[c].style.left=i}e.options.fixedGutter&&(t.gutters.style.left=n+o+"px")}}function ho(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=Ze(e.options,t.first+t.size-1),n=e.display;if(r.length!=n.lineNumChars){var o=n.measure.appendChild(O("div",[O("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=o.firstChild.offsetWidth,s=o.offsetWidth-i;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(i,n.lineGutter.offsetWidth-s)+1,n.lineNumWidth=n.lineNumInnerWidth+s,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",lo(e.display),!0}return!1}function fo(e,t){for(var r=[],n=!1,o=0;o<e.length;o++){var i=e[o],s=null;if("string"!=typeof i&&(s=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!t)continue;n=!0}r.push({className:i,style:s})}return t&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function mo(e){var t=e.gutters,r=e.gutterSpecs;P(t),e.lineGutter=null;for(var n=0;n<r.length;++n){var o=r[n],i=o.className,s=o.style,a=t.appendChild(O("div",null,"CodeMirror-gutter "+i));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==i&&(e.lineGutter=a,a.style.width=(e.lineNumWidth||1)+"px")}t.style.display=r.length?"":"none",lo(e)}function go(e){mo(e.display),un(e),uo(e)}function yo(e,t,n,o){var i=this;this.input=n,i.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=T("div",null,"CodeMirror-code"),i.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=O("div",null,"CodeMirror-cursors"),i.measure=O("div",null,"CodeMirror-measure"),i.lineMeasure=O("div",null,"CodeMirror-measure"),i.lineSpace=T("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var l=T("div",[i.lineSpace],"CodeMirror-lines");i.mover=O("div",[l],null,"position: relative"),i.sizer=O("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=O("div",null,null,"position: absolute; height: 50px; width: 1px;"),i.gutters=O("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=O("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=O("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),s&&a<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),c||r&&y||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=fo(o.gutters,o.lineNumbers),mo(i),n.init(i)}io.prototype.signal=function(e,t){ye(e,t)&&this.events.push(arguments)},io.prototype.finish=function(){for(var e=0;e<this.events.length;e++)fe.apply(null,this.events[e])};var vo=0,bo=null;function wo(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function xo(e){var t=wo(e);return t.x*=bo,t.y*=bo,t}function ko(e,t){var n=wo(t),o=n.x,i=n.y,s=e.display,a=s.scroller,l=a.scrollWidth>a.clientWidth,p=a.scrollHeight>a.clientHeight;if(o&&l||i&&p){if(i&&v&&c)e:for(var d=t.target,h=s.view;d!=a;d=d.parentNode)for(var f=0;f<h.length;f++)if(h[f].node==d){e.display.currentWheelTarget=d;break e}if(o&&!r&&!u&&null!=bo)return i&&p&&Rn(e,Math.max(0,a.scrollTop+i*bo)),Ln(e,Math.max(0,a.scrollLeft+o*bo)),(!i||i&&p)&&be(t),void(s.wheelStartX=null);if(i&&null!=bo){var m=i*bo,g=e.doc.scrollTop,y=g+s.wrapper.clientHeight;m<0?g=Math.max(0,g+m-50):y=Math.min(e.doc.height,y+m+50),co(e,{top:g,bottom:y})}vo<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=o,s.wheelDY=i,setTimeout((function(){if(null!=s.wheelStartX){var e=a.scrollLeft-s.wheelStartX,t=a.scrollTop-s.wheelStartY,r=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,r&&(bo=(bo*vo+r)/(vo+1),++vo)}}),200)):(s.wheelDX+=o,s.wheelDY+=i))}}s?bo=-.53:r?bo=15:p?bo=-.7:d&&(bo=-1/3);var Eo=function(e,t){this.ranges=e,this.primIndex=t};Eo.prototype.primary=function(){return this.ranges[this.primIndex]},Eo.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var r=this.ranges[t],n=e.ranges[t];if(!rt(r.anchor,n.anchor)||!rt(r.head,n.head))return!1}return!0},Eo.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new _o(nt(this.ranges[t].anchor),nt(this.ranges[t].head));return new Eo(e,this.primIndex)},Eo.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},Eo.prototype.contains=function(e,t){t||(t=e);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(tt(t,n.from())>=0&&tt(e,n.to())<=0)return r}return-1};var _o=function(e,t){this.anchor=e,this.head=t};function So(e,t,r){var n=e&&e.options.selectionsMayTouch,o=t[r];t.sort((function(e,t){return tt(e.from(),t.from())})),r=B(t,o);for(var i=1;i<t.length;i++){var s=t[i],a=t[i-1],c=tt(a.to(),s.from());if(n&&!s.empty()?c>0:c>=0){var l=it(a.from(),s.from()),p=ot(a.to(),s.to()),u=a.empty()?s.from()==s.head:a.from()==a.head;i<=r&&--r,t.splice(--i,2,new _o(u?p:l,u?l:p))}}return new Eo(t,r)}function Co(e,t){return new Eo([new _o(e,t||e)],0)}function Po(e){return e.text?et(e.from.line+e.text.length-1,J(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Ao(e,t){if(tt(e,t.from)<0)return e;if(tt(e,t.to)<=0)return Po(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Po(t).ch-t.to.ch),et(r,n)}function Oo(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){var o=e.sel.ranges[n];r.push(new _o(Ao(o.anchor,t),Ao(o.head,t)))}return So(e.cm,r,e.sel.primIndex)}function To(e,t,r){return e.line==t.line?et(r.line,e.ch-t.ch+r.ch):et(r.line+(e.line-t.line),e.ch)}function Do(e){e.doc.mode=Ge(e.options,e.doc.modeOption),No(e)}function No(e){e.doc.iter((function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)})),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,no(e,100),e.state.modeGen++,e.curOp&&un(e)}function jo(e,t){return 0==t.from.ch&&0==t.to.ch&&""==J(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Io(e,t,r,n){function o(e){return r?r[e]:null}function i(e,r,o){!function(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),At(e),Ot(e,r);var o=n?n(e):1;o!=e.height&&Xe(e,o)}(e,r,o,n),ar(e,"change",e,t)}function s(e,t){for(var r=[],i=e;i<t;++i)r.push(new Vt(l[i],o(i),n));return r}var a=t.from,c=t.to,l=t.text,p=Ve(e,a.line),u=Ve(e,c.line),d=J(l),h=o(l.length-1),f=c.line-a.line;if(t.full)e.insert(0,s(0,l.length)),e.remove(l.length,e.size-l.length);else if(jo(e,t)){var m=s(0,l.length-1);i(u,u.text,h),f&&e.remove(a.line,f),m.length&&e.insert(a.line,m)}else if(p==u)if(1==l.length)i(p,p.text.slice(0,a.ch)+d+p.text.slice(c.ch),h);else{var g=s(1,l.length-1);g.push(new Vt(d+p.text.slice(c.ch),h,n)),i(p,p.text.slice(0,a.ch)+l[0],o(0)),e.insert(a.line+1,g)}else if(1==l.length)i(p,p.text.slice(0,a.ch)+l[0]+u.text.slice(c.ch),o(0)),e.remove(a.line+1,f);else{i(p,p.text.slice(0,a.ch)+l[0],o(0)),i(u,d+u.text.slice(c.ch),h);var y=s(1,l.length-1);f>1&&e.remove(a.line+1,f-1),e.insert(a.line+1,y)}ar(e,"change",e,t)}function Ro(e,t,r){!function e(n,o,i){if(n.linked)for(var s=0;s<n.linked.length;++s){var a=n.linked[s];if(a.doc!=o){var c=i&&a.sharedHist;r&&!c||(t(a.doc,c),e(a.doc,n,c))}}}(e,null,!0)}function Mo(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,cn(e),Do(e),Lo(e),e.options.lineWrapping||Ht(e),e.options.mode=t.modeOption,un(e)}function Lo(e){("rtl"==e.doc.direction?j:C)(e.display.lineDiv,"CodeMirror-rtl")}function Fo(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Go(e,t){var r={from:nt(t.from),to:Po(t),text:We(e,t.from,t.to)};return $o(e,r,t.from.line,t.to.line+1),Ro(e,(function(e){return $o(e,r,t.from.line,t.to.line+1)}),!0),r}function Bo(e){for(;e.length&&J(e).ranges;)e.pop()}function zo(e,t,r,n){var o=e.history;o.undone.length=0;var i,s,a=+new Date;if((o.lastOp==n||o.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&o.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(i=function(e,t){return t?(Bo(e.done),J(e.done)):e.done.length&&!J(e.done).ranges?J(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),J(e.done)):void 0}(o,o.lastOp==n)))s=J(i.changes),0==tt(t.from,t.to)&&0==tt(t.from,s.to)?s.to=Po(t):i.changes.push(Go(e,t));else{var c=J(o.done);for(c&&c.ranges||qo(e.sel,o.done),i={changes:[Go(e,t)],generation:o.generation},o.done.push(i);o.done.length>o.undoDepth;)o.done.shift(),o.done[0].ranges||o.done.shift()}o.done.push(r),o.generation=++o.maxGeneration,o.lastModTime=o.lastSelTime=a,o.lastOp=o.lastSelOp=n,o.lastOrigin=o.lastSelOrigin=t.origin,s||fe(e,"historyAdded")}function Uo(e,t,r,n){var o=e.history,i=n&&n.origin;r==o.lastSelOp||i&&o.lastSelOrigin==i&&(o.lastModTime==o.lastSelTime&&o.lastOrigin==i||function(e,t,r,n){var o=t.charAt(0);return"*"==o||"+"==o&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,i,J(o.done),t))?o.done[o.done.length-1]=t:qo(t,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=i,o.lastSelOp=r,n&&!1!==n.clearRedo&&Bo(o.undone)}function qo(e,t){var r=J(t);r&&r.ranges&&r.equals(e)||t.push(e)}function $o(e,t,r,n){var o=t["spans_"+e.id],i=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),(function(r){r.markedSpans&&((o||(o=t["spans_"+e.id]={}))[i]=r.markedSpans),++i}))}function Ho(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function Vo(e,t){var r=function(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],o=0;o<t.text.length;++o)n.push(Ho(r[o]));return n}(e,t),n=Ct(e,t);if(!r)return n;if(!n)return r;for(var o=0;o<r.length;++o){var i=r[o],s=n[o];if(i&&s)e:for(var a=0;a<s.length;++a){for(var c=s[a],l=0;l<i.length;++l)if(i[l].marker==c.marker)continue e;i.push(c)}else s&&(r[o]=s)}return r}function Wo(e,t,r){for(var n=[],o=0;o<e.length;++o){var i=e[o];if(i.ranges)n.push(r?Eo.prototype.deepCopy.call(i):i);else{var s=i.changes,a=[];n.push({changes:a});for(var c=0;c<s.length;++c){var l=s[c],p=void 0;if(a.push({from:l.from,to:l.to,text:l.text}),t)for(var u in l)(p=u.match(/^spans_(\d+)$/))&&B(t,Number(p[1]))>-1&&(J(a)[u]=l[u],delete l[u])}}}return n}function Jo(e,t,r,n){if(n){var o=e.anchor;if(r){var i=tt(t,o)<0;i!=tt(r,o)<0?(o=t,t=r):i!=tt(t,r)<0&&(t=r)}return new _o(o,t)}return new _o(r||t,t)}function Xo(e,t,r,n,o){null==o&&(o=e.cm&&(e.cm.display.shift||e.extend)),ei(e,new Eo([Jo(e.sel.primary(),t,r,o)],0),n)}function Yo(e,t,r){for(var n=[],o=e.cm&&(e.cm.display.shift||e.extend),i=0;i<e.sel.ranges.length;i++)n[i]=Jo(e.sel.ranges[i],t[i],null,o);ei(e,So(e.cm,n,e.sel.primIndex),r)}function Ko(e,t,r,n){var o=e.sel.ranges.slice(0);o[t]=r,ei(e,So(e.cm,o,e.sel.primIndex),n)}function Qo(e,t,r,n){ei(e,Co(t,r),n)}function Zo(e,t,r){var n=e.history.done,o=J(n);o&&o.ranges?(n[n.length-1]=t,ti(e,t,r)):ei(e,t,r)}function ei(e,t,r){ti(e,t,r),Uo(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function ti(e,t,r){(ye(e,"beforeSelectionChange")||e.cm&&ye(e.cm,"beforeSelectionChange"))&&(t=function(e,t,r){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var r=0;r<t.length;r++)this.ranges[r]=new _o(at(e,t[r].anchor),at(e,t[r].head))},origin:r&&r.origin};return fe(e,"beforeSelectionChange",e,n),e.cm&&fe(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?So(e.cm,n.ranges,n.ranges.length-1):t}(e,t,r));var n=r&&r.bias||(tt(t.primary().head,e.sel.primary().head)<0?-1:1);ri(e,oi(e,t,n,!0)),r&&!1===r.scroll||!e.cm||Dn(e.cm)}function ri(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ge(e.cm)),ar(e,"cursorActivity",e))}function ni(e){ri(e,oi(e,e.sel,null,!1))}function oi(e,t,r,n){for(var o,i=0;i<t.ranges.length;i++){var s=t.ranges[i],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[i],c=si(e,s.anchor,a&&a.anchor,r,n),l=si(e,s.head,a&&a.head,r,n);(o||c!=s.anchor||l!=s.head)&&(o||(o=t.ranges.slice(0,i)),o[i]=new _o(c,l))}return o?So(e.cm,o,t.primIndex):t}function ii(e,t,r,n,o){var i=Ve(e,t.line);if(i.markedSpans)for(var s=0;s<i.markedSpans.length;++s){var a=i.markedSpans[s],c=a.marker,l="selectLeft"in c?!c.selectLeft:c.inclusiveLeft,p="selectRight"in c?!c.selectRight:c.inclusiveRight;if((null==a.from||(l?a.from<=t.ch:a.from<t.ch))&&(null==a.to||(p?a.to>=t.ch:a.to>t.ch))){if(o&&(fe(c,"beforeCursorEnter"),c.explicitlyCleared)){if(i.markedSpans){--s;continue}break}if(!c.atomic)continue;if(r){var u=c.find(n<0?1:-1),d=void 0;if((n<0?p:l)&&(u=ai(e,u,-n,u&&u.line==t.line?i:null)),u&&u.line==t.line&&(d=tt(u,r))&&(n<0?d<0:d>0))return ii(e,u,t,n,o)}var h=c.find(n<0?-1:1);return(n<0?l:p)&&(h=ai(e,h,n,h.line==t.line?i:null)),h?ii(e,h,t,n,o):null}}return t}function si(e,t,r,n,o){var i=n||1,s=ii(e,t,r,i,o)||!o&&ii(e,t,r,i,!0)||ii(e,t,r,-i,o)||!o&&ii(e,t,r,-i,!0);return s||(e.cantEdit=!0,et(e.first,0))}function ai(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?at(e,et(t.line-1)):null:r>0&&t.ch==(n||Ve(e,t.line)).text.length?t.line<e.first+e.size-1?et(t.line+1,0):null:new et(t.line,t.ch+r)}function ci(e){e.setSelection(et(e.firstLine(),0),et(e.lastLine()),U)}function li(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,o,i){t&&(n.from=at(e,t)),r&&(n.to=at(e,r)),o&&(n.text=o),void 0!==i&&(n.origin=i)}),fe(e,"beforeChange",e,n),e.cm&&fe(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function pi(e,t,r){if(e.cm){if(!e.cm.curOp)return eo(e.cm,pi)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"))||(t=li(e,t,!0))){var n=xt&&!r&&function(e,t,r){var n=null;if(e.iter(t.line,r.line+1,(function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&-1!=B(n,r)||(n||(n=[])).push(r)}})),!n)return null;for(var o=[{from:t,to:r}],i=0;i<n.length;++i)for(var s=n[i],a=s.find(0),c=0;c<o.length;++c){var l=o[c];if(!(tt(l.to,a.from)<0||tt(l.from,a.to)>0)){var p=[c,1],u=tt(l.from,a.from),d=tt(l.to,a.to);(u<0||!s.inclusiveLeft&&!u)&&p.push({from:l.from,to:a.from}),(d>0||!s.inclusiveRight&&!d)&&p.push({from:a.to,to:l.to}),o.splice.apply(o,p),c+=p.length-3}}return o}(e,t.from,t.to);if(n)for(var o=n.length-1;o>=0;--o)ui(e,{from:n[o].from,to:n[o].to,text:o?[""]:t.text,origin:t.origin});else ui(e,t)}}function ui(e,t){if(1!=t.text.length||""!=t.text[0]||0!=tt(t.from,t.to)){var r=Oo(e,t);zo(e,t,r,e.cm?e.cm.curOp.id:NaN),fi(e,t,r,Ct(e,t));var n=[];Ro(e,(function(e,r){r||-1!=B(n,e.history)||(vi(e.history,t),n.push(e.history)),fi(e,t,null,Ct(e,t))}))}}function di(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var o,i=e.history,s=e.sel,a="undo"==t?i.done:i.undone,c="undo"==t?i.undone:i.done,l=0;l<a.length&&(o=a[l],r?!o.ranges||o.equals(e.sel):o.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;;){if(!(o=a.pop()).ranges){if(n)return void a.push(o);break}if(qo(o,c),r&&!o.equals(e.sel))return void ei(e,o,{clearRedo:!1});s=o}var p=[];qo(s,c),c.push({changes:p,generation:i.generation}),i.generation=o.generation||++i.maxGeneration;for(var u=ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"),d=function(r){var n=o.changes[r];if(n.origin=t,u&&!li(e,n,!1))return a.length=0,{};p.push(Go(e,n));var i=r?Oo(e,n):J(a);fi(e,n,i,Vo(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:Po(n)});var s=[];Ro(e,(function(e,t){t||-1!=B(s,e.history)||(vi(e.history,n),s.push(e.history)),fi(e,n,null,Vo(e,n))}))},h=o.changes.length-1;h>=0;--h){var f=d(h);if(f)return f.v}}}}function hi(e,t){if(0!=t&&(e.first+=t,e.sel=new Eo(X(e.sel.ranges,(function(e){return new _o(et(e.anchor.line+t,e.anchor.ch),et(e.head.line+t,e.head.ch))})),e.sel.primIndex),e.cm)){un(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)dn(e.cm,n,"gutter")}}function fi(e,t,r,n){if(e.cm&&!e.cm.curOp)return eo(e.cm,fi)(e,t,r,n);if(t.to.line<e.first)hi(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var o=t.text.length-1-(e.first-t.from.line);hi(e,o),t={from:et(e.first,0),to:et(t.to.line+o,t.to.ch),text:[J(t.text)],origin:t.origin}}var i=e.lastLine();t.to.line>i&&(t={from:t.from,to:et(i,Ve(e,i).text.length),text:[t.text[0]],origin:t.origin}),t.removed=We(e,t.from,t.to),r||(r=Oo(e,t)),e.cm?function(e,t,r){var n=e.doc,o=e.display,i=t.from,s=t.to,a=!1,c=i.line;e.options.lineWrapping||(c=Ye(Ft(Ve(n,i.line))),n.iter(c,s.line+1,(function(e){if(e==o.maxLine)return a=!0,!0}))),n.sel.contains(t.from,t.to)>-1&&ge(e),Io(n,t,r,an(e)),e.options.lineWrapping||(n.iter(c,i.line+t.text.length,(function(e){var t=$t(e);t>o.maxLineLength&&(o.maxLine=e,o.maxLineLength=t,o.maxLineChanged=!0,a=!1)})),a&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var o=Ve(e,n).stateAfter;if(o&&(!(o instanceof lt)||n+o.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}(n,i.line),no(e,400);var l=t.text.length-(s.line-i.line)-1;t.full?un(e):i.line!=s.line||1!=t.text.length||jo(e.doc,t)?un(e,i.line,s.line+1,l):dn(e,i.line,"text");var p=ye(e,"changes"),u=ye(e,"change");if(u||p){var d={from:i,to:s,text:t.text,removed:t.removed,origin:t.origin};u&&ar(e,"change",e,d),p&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(d)}e.display.selForContextMenu=null}(e.cm,t,n):Io(e,t,n),ti(e,r,U),e.cantEdit&&si(e,et(e.firstLine(),0))&&(e.cantEdit=!1)}}function mi(e,t,r,n,o){var i;n||(n=r),tt(n,r)<0&&(r=(i=[n,r])[0],n=i[1]),"string"==typeof t&&(t=e.splitLines(t)),pi(e,{from:r,to:n,text:t,origin:o})}function gi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function yi(e,t,r,n){for(var o=0;o<e.length;++o){var i=e[o],s=!0;if(i.ranges){i.copied||((i=e[o]=i.deepCopy()).copied=!0);for(var a=0;a<i.ranges.length;a++)gi(i.ranges[a].anchor,t,r,n),gi(i.ranges[a].head,t,r,n)}else{for(var c=0;c<i.changes.length;++c){var l=i.changes[c];if(r<l.from.line)l.from=et(l.from.line+n,l.from.ch),l.to=et(l.to.line+n,l.to.ch);else if(t<=l.to.line){s=!1;break}}s||(e.splice(0,o+1),o=0)}}}function vi(e,t){var r=t.from.line,n=t.to.line,o=t.text.length-(n-r)-1;yi(e.done,r,n,o),yi(e.undone,r,n,o)}function bi(e,t,r,n){var o=t,i=t;return"number"==typeof t?i=Ve(e,st(e,t)):o=Ye(t),null==o?null:(n(i,o)&&e.cm&&dn(e.cm,o,r),i)}function wi(e){this.lines=e,this.parent=null;for(var t=0,r=0;r<e.length;++r)e[r].parent=this,t+=e[r].height;this.height=t}function xi(e){this.children=e;for(var t=0,r=0,n=0;n<e.length;++n){var o=e[n];t+=o.chunkSize(),r+=o.height,o.parent=this}this.size=t,this.height=r,this.parent=null}_o.prototype.from=function(){return it(this.anchor,this.head)},_o.prototype.to=function(){return ot(this.anchor,this.head)},_o.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},wi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var o=this.lines[r];this.height-=o.height,Wt(o),ar(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var n=0;n<t.length;++n)t[n].parent=this},iterN:function(e,t,r){for(var n=e+t;e<n;++e)if(r(this.lines[e]))return!0}},xi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var r=0;r<this.children.length;++r){var n=this.children[r],o=n.chunkSize();if(e<o){var i=Math.min(t,o-e),s=n.height;if(n.removeInner(e,i),this.height-=s-n.height,o==i&&(this.children.splice(r--,1),n.parent=null),0==(t-=i))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof wi))){var a=[];this.collapse(a),this.children=[new wi(a)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,r){this.size+=t.length,this.height+=r;for(var n=0;n<this.children.length;++n){var o=this.children[n],i=o.chunkSize();if(e<=i){if(o.insertInner(e,t,r),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,a=s;a<o.lines.length;){var c=new wi(o.lines.slice(a,a+=25));o.height-=c.height,this.children.splice(++n,0,c),c.parent=this}o.lines=o.lines.slice(0,s),this.maybeSpill()}break}e-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=new xi(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=t.size,e.height-=t.height;var r=B(e.parent.children,e);e.parent.children.splice(r+1,0,t)}else{var n=new xi(e.children);n.parent=e,e.children=[n,t],e=n}t.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=0;n<this.children.length;++n){var o=this.children[n],i=o.chunkSize();if(e<i){var s=Math.min(t,i-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=i}}};var ki=function(e,t,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=e,this.node=t};function Ei(e,t,r){qt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Tn(e,r)}ki.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,r=this.line,n=Ye(r);if(null!=n&&t){for(var o=0;o<t.length;++o)t[o]==this&&t.splice(o--,1);t.length||(r.widgets=null);var i=wr(this);Xe(r,Math.max(0,r.height-i)),e&&(Zn(e,(function(){Ei(e,r,-i),dn(e,n,"widget")})),ar(e,"lineWidgetCleared",e,this,n))}},ki.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var o=wr(this)-t;o&&(zt(this.doc,n)||Xe(n,n.height+o),r&&Zn(r,(function(){r.curOp.forceUpdate=!0,Ei(r,n,o),ar(r,"lineWidgetChanged",r,e,Ye(n))})))},ve(ki);var _i=0,Si=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++_i};function Ci(e,t,r,n,o){if(n&&n.shared)return function(e,t,r,n,o){(n=L(n)).shared=!1;var i=[Ci(e,t,r,n,o)],s=i[0],a=n.widgetNode;return Ro(e,(function(e){a&&(n.widgetNode=a.cloneNode(!0)),i.push(Ci(e,at(e,t),at(e,r),n,o));for(var c=0;c<e.linked.length;++c)if(e.linked[c].isParent)return;s=J(i)})),new Pi(i,s)}(e,t,r,n,o);if(e.cm&&!e.cm.curOp)return eo(e.cm,Ci)(e,t,r,n,o);var i=new Si(e,o),s=tt(t,r);if(n&&L(n,i,!1),s>0||0==s&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=T("span",[i.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if(Lt(e,t.line,t,r,i)||t.line!=r.line&&Lt(e,r.line,t,r,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");kt=!0}i.addToHistory&&zo(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,c=t.line,l=e.cm;if(e.iter(c,r.line+1,(function(e){l&&i.collapsed&&!l.options.lineWrapping&&Ft(e)==l.display.maxLine&&(a=!0),i.collapsed&&c!=t.line&&Xe(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new Et(i,c==t.line?t.ch:null,c==r.line?r.ch:null)),++c})),i.collapsed&&e.iter(t.line,r.line+1,(function(t){zt(e,t)&&Xe(t,0)})),i.clearOnEnter&&ue(i,"beforeCursorEnter",(function(){return i.clear()})),i.readOnly&&(xt=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),i.collapsed&&(i.id=++_i,i.atomic=!0),l){if(a&&(l.curOp.updateMaxLine=!0),i.collapsed)un(l,t.line,r.line+1);else if(i.className||i.startStyle||i.endStyle||i.css||i.attributes||i.title)for(var p=t.line;p<=r.line;p++)dn(l,p,"text");i.atomic&&ni(l.doc),ar(l,"markerAdded",l,i)}return i}Si.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Vn(e),ye(this,"clear")){var r=this.find();r&&ar(this,"clear",r.from,r.to)}for(var n=null,o=null,i=0;i<this.lines.length;++i){var s=this.lines[i],a=_t(s.markedSpans,this);e&&!this.collapsed?dn(e,Ye(s),"text"):e&&(null!=a.to&&(o=Ye(s)),null!=a.from&&(n=Ye(s))),s.markedSpans=St(s.markedSpans,a),null==a.from&&this.collapsed&&!zt(this.doc,s)&&e&&Xe(s,rn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var c=0;c<this.lines.length;++c){var l=Ft(this.lines[c]),p=$t(l);p>e.display.maxLineLength&&(e.display.maxLine=l,e.display.maxLineLength=p,e.display.maxLineChanged=!0)}null!=n&&e&&this.collapsed&&un(e,n,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ni(e.doc)),e&&ar(e,"markerCleared",e,this,n,o),t&&Wn(e),this.parent&&this.parent.clear()}},Si.prototype.find=function(e,t){var r,n;null==e&&"bookmark"==this.type&&(e=1);for(var o=0;o<this.lines.length;++o){var i=this.lines[o],s=_t(i.markedSpans,this);if(null!=s.from&&(r=et(t?i:Ye(i),s.from),-1==e))return r;if(null!=s.to&&(n=et(t?i:Ye(i),s.to),1==e))return n}return r&&{from:r,to:n}},Si.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&Zn(n,(function(){var o=t.line,i=Ye(t.line),s=Tr(n,i);if(s&&(Lr(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!zt(r.doc,o)&&null!=r.height){var a=r.height;r.height=null;var c=wr(r)-a;c&&Xe(o,o.height+c)}ar(n,"markerChanged",n,e)}))},Si.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=B(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Si.prototype.detachLine=function(e){if(this.lines.splice(B(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},ve(Si);var Pi=function(e,t){this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=this};function Ai(e){return e.findMarks(et(e.first,0),e.clipPos(et(e.lastLine())),(function(e){return e.parent}))}function Oi(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];Ro(r.primary.doc,(function(e){return n.push(e)}));for(var o=0;o<r.markers.length;o++){var i=r.markers[o];-1==B(n,i.doc)&&(i.parent=null,r.markers.splice(o--,1))}},r=0;r<e.length;r++)t(r)}Pi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ar(this,"clear")}},Pi.prototype.find=function(e,t){return this.primary.find(e,t)},ve(Pi);var Ti=0,Di=function(e,t,r,n,o){if(!(this instanceof Di))return new Di(e,t,r,n,o);null==r&&(r=0),xi.call(this,[new wi([new Vt("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var i=et(r,0);this.sel=Co(i),this.history=new Fo(null),this.id=++Ti,this.modeOption=t,this.lineSep=n,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Io(this,{from:i,to:i,text:e}),ei(this,Co(i),U)};Di.prototype=K(xi.prototype,{constructor:Di,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=Je(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:ro((function(e){var t=et(this.first,0),r=this.first+this.size-1;pi(this,{from:t,to:et(r,Ve(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Nn(this.cm,0,0),ei(this,Co(t),U)})),replaceRange:function(e,t,r,n){mi(this,e,t=at(this,t),r=r?at(this,r):t,n)},getRange:function(e,t,r){var n=We(this,at(this,e),at(this,t));return!1===r?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Qe(this,e))return Ve(this,e)},getLineNumber:function(e){return Ye(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ve(this,e)),Ft(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ro((function(e,t,r){Qo(this,at(this,"number"==typeof e?et(e,t||0):e),null,r)})),setSelection:ro((function(e,t,r){Qo(this,at(this,e),at(this,t||e),r)})),extendSelection:ro((function(e,t,r){Xo(this,at(this,e),t&&at(this,t),r)})),extendSelections:ro((function(e,t){Yo(this,ct(this,e),t)})),extendSelectionsBy:ro((function(e,t){Yo(this,ct(this,X(this.sel.ranges,e)),t)})),setSelections:ro((function(e,t,r){if(e.length){for(var n=[],o=0;o<e.length;o++)n[o]=new _o(at(this,e[o].anchor),at(this,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),ei(this,So(this.cm,n,t),r)}})),addSelection:ro((function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new _o(at(this,e),at(this,t||e))),ei(this,So(this.cm,n,n.length-1),r)})),getSelection:function(e){for(var t,r=this.sel.ranges,n=0;n<r.length;n++){var o=We(this,r[n].from(),r[n].to());t=t?t.concat(o):o}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],r=this.sel.ranges,n=0;n<r.length;n++){var o=We(this,r[n].from(),r[n].to());!1!==e&&(o=o.join(e||this.lineSeparator())),t[n]=o}return t},replaceSelection:function(e,t,r){for(var n=[],o=0;o<this.sel.ranges.length;o++)n[o]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:ro((function(e,t,r){for(var n=[],o=this.sel,i=0;i<o.ranges.length;i++){var s=o.ranges[i];n[i]={from:s.from(),to:s.to(),text:this.splitLines(e[i]),origin:r}}for(var a=t&&"end"!=t&&function(e,t,r){for(var n=[],o=et(e.first,0),i=o,s=0;s<t.length;s++){var a=t[s],c=To(a.from,o,i),l=To(Po(a),o,i);if(o=a.to,i=l,"around"==r){var p=e.sel.ranges[s],u=tt(p.head,p.anchor)<0;n[s]=new _o(u?l:c,u?c:l)}else n[s]=new _o(c,c)}return new Eo(n,e.sel.primIndex)}(this,n,t),c=n.length-1;c>=0;c--)pi(this,n[c]);a?Zo(this,a):this.cm&&Dn(this.cm)})),undo:ro((function(){di(this,"undo")})),redo:ro((function(){di(this,"redo")})),undoSelection:ro((function(){di(this,"undo",!0)})),redoSelection:ro((function(){di(this,"redo",!0)})),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var o=0;o<e.undone.length;o++)e.undone[o].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){var e=this;this.history=new Fo(this.history.maxGeneration),Ro(this,(function(t){return t.history=e.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Wo(this.history.done),undone:Wo(this.history.undone)}},setHistory:function(e){var t=this.history=new Fo(this.history.maxGeneration);t.done=Wo(e.done.slice(0),null,!0),t.undone=Wo(e.undone.slice(0),null,!0)},setGutterMarker:ro((function(e,t,r){return bi(this,e,"gutter",(function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&te(n)&&(e.gutterMarkers=null),!0}))})),clearGutter:ro((function(e){var t=this;this.iter((function(r){r.gutterMarkers&&r.gutterMarkers[e]&&bi(t,r,"gutter",(function(){return r.gutterMarkers[e]=null,te(r.gutterMarkers)&&(r.gutterMarkers=null),!0}))}))})),lineInfo:function(e){var t;if("number"==typeof e){if(!Qe(this,e))return null;if(t=e,!(e=Ve(this,e)))return null}else if(null==(t=Ye(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:ro((function(e,t,r){return bi(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[n]){if(_(r).test(e[n]))return!1;e[n]+=" "+r}else e[n]=r;return!0}))})),removeLineClass:ro((function(e,t,r){return bi(this,e,"gutter"==t?"gutter":"class",(function(e){var n="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",o=e[n];if(!o)return!1;if(null==r)e[n]=null;else{var i=o.match(_(r));if(!i)return!1;var s=i.index+i[0].length;e[n]=o.slice(0,i.index)+(i.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0}))})),addLineWidget:ro((function(e,t,r){return function(e,t,r,n){var o=new ki(e,r,n),i=e.cm;return i&&o.noHScroll&&(i.display.alignWidgets=!0),bi(e,t,"widget",(function(t){var r=t.widgets||(t.widgets=[]);if(null==o.insertAt?r.push(o):r.splice(Math.min(r.length-1,Math.max(0,o.insertAt)),0,o),o.line=t,i&&!zt(e,t)){var n=qt(t)<e.scrollTop;Xe(t,t.height+wr(o)),n&&Tn(i,o.height),i.curOp.forceUpdate=!0}return!0})),i&&ar(i,"lineWidgetAdded",i,o,"number"==typeof t?t:Ye(t)),o}(this,e,t,r)})),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Ci(this,at(this,e),at(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Ci(this,e=at(this,e),e,r,"bookmark")},findMarksAt:function(e){var t=[],r=Ve(this,(e=at(this,e)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var o=r[n];(null==o.from||o.from<=e.ch)&&(null==o.to||o.to>=e.ch)&&t.push(o.marker.parent||o.marker)}return t},findMarks:function(e,t,r){e=at(this,e),t=at(this,t);var n=[],o=e.line;return this.iter(e.line,t.line+1,(function(i){var s=i.markedSpans;if(s)for(var a=0;a<s.length;a++){var c=s[a];null!=c.to&&o==e.line&&e.ch>=c.to||null==c.from&&o!=e.line||null!=c.from&&o==t.line&&c.from>=t.ch||r&&!r(c.marker)||n.push(c.marker.parent||c.marker)}++o})),n},getAllMarks:function(){var e=[];return this.iter((function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)})),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter((function(o){var i=o.text.length+n;if(i>e)return t=e,!0;e-=i,++r})),at(this,et(r,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,(function(e){t+=e.text.length+r})),t},copy:function(e){var t=new Di(Je(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Di(Je(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r],o=n.find(),i=e.clipPos(o.from),s=e.clipPos(o.to);if(tt(i,s)){var a=Ci(e,i,s,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}(n,Ai(this)),n},unlinkDoc:function(e){if(e instanceof Ps&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),Oi(Ai(this));break}if(e.history==this.history){var r=[e.id];Ro(e,(function(e){return r.push(e.id)}),!0),e.history=new Fo(null),e.history.done=Wo(this.history.done,r),e.history.undone=Wo(this.history.undone,r)}},iterLinkedDocs:function(e){Ro(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):De(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ro((function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter((function(e){return e.order=null})),this.cm&&Zn(t=this.cm,(function(){Lo(t),un(t)})))}))}),Di.prototype.eachLine=Di.prototype.iter;var Ni=0;function ji(e){var t=this;if(Ii(t),!me(t,e)&&!xr(t.display,e)){be(e),s&&(Ni=+new Date);var r=ln(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var o=n.length,i=Array(o),a=0,c=function(){++a==o&&eo(t,(function(){var e={from:r=at(t.doc,r),to:r,text:t.doc.splitLines(i.filter((function(e){return null!=e})).join(t.doc.lineSeparator())),origin:"paste"};pi(t.doc,e),Zo(t.doc,Co(at(t.doc,r),at(t.doc,Po(e))))}))()},l=function(e,r){if(t.options.allowDropFileTypes&&-1==B(t.options.allowDropFileTypes,e.type))c();else{var n=new FileReader;n.onerror=function(){return c()},n.onload=function(){var e=n.result;/[\x00-\x08\x0e-\x1f]{2}/.test(e)||(i[r]=e),c()},n.readAsText(e)}},p=0;p<n.length;p++)l(n[p],p);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout((function(){return t.display.input.focus()}),20);try{var u=e.dataTransfer.getData("Text");if(u){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),ti(t.doc,Co(r,r)),d)for(var h=0;h<d.length;++h)mi(t.doc,"",d[h].anchor,d[h].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Ii(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Ri(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var o=t[n].CodeMirror;o&&r.push(o)}r.length&&r[0].operation((function(){for(var t=0;t<r.length;t++)e(r[t])}))}}var Mi=!1;function Li(){var e;Mi||(ue(window,"resize",(function(){null==e&&(e=setTimeout((function(){e=null,Ri(Fi)}),100))})),ue(window,"blur",(function(){return Ri(Sn)})),Mi=!0)}function Fi(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Gi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Bi=0;Bi<10;Bi++)Gi[Bi+48]=Gi[Bi+96]=String(Bi);for(var zi=65;zi<=90;zi++)Gi[zi]=String.fromCharCode(zi);for(var Ui=1;Ui<=12;Ui++)Gi[Ui+111]=Gi[Ui+63235]="F"+Ui;var qi={};function $i(e){var t,r,n,o,i=e.split(/-(?!$)/);e=i[i.length-1];for(var s=0;s<i.length-1;s++){var a=i[s];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return t&&(e="Alt-"+e),r&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),n&&(e="Shift-"+e),e}function Hi(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var o=X(r.split(" "),$i),i=0;i<o.length;i++){var s=void 0,a=void 0;i==o.length-1?(a=o.join(" "),s=n):(a=o.slice(0,i+1).join(" "),s="...");var c=t[a];if(c){if(c!=s)throw new Error("Inconsistent bindings for "+a)}else t[a]=s}delete e[r]}for(var l in t)e[l]=t[l];return e}function Vi(e,t,r,n){var o=(t=Yi(t)).call?t.call(e,n):t[e];if(!1===o)return"nothing";if("..."===o)return"multi";if(null!=o&&r(o))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Vi(e,t.fallthrough,r,n);for(var i=0;i<t.fallthrough.length;i++){var s=Vi(e,t.fallthrough[i],r,n);if(s)return s}}}function Wi(e){var t="string"==typeof e?e:Gi[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Ji(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(k?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(k?t.ctrlKey:t.metaKey)&&"Mod"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function Xi(e,t){if(u&&34==e.keyCode&&e.char)return!1;var r=Gi[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),Ji(r,e,t))}function Yi(e){return"string"==typeof e?qi[e]:e}function Ki(e,t){for(var r=e.doc.sel.ranges,n=[],o=0;o<r.length;o++){for(var i=t(r[o]);n.length&&tt(i.from,J(n).to)<=0;){var s=n.pop();if(tt(s.from,i.from)<0){i.from=s.from;break}}n.push(i)}Zn(e,(function(){for(var t=n.length-1;t>=0;t--)mi(e.doc,"",n[t].from,n[t].to,"+delete");Dn(e)}))}function Qi(e,t,r){var n=oe(e.text,t+r,r);return n<0||n>e.text.length?null:n}function Zi(e,t,r){var n=Qi(e,t.ch,r);return null==n?null:new et(t.line,n,r<0?"after":"before")}function es(e,t,r,n,o){if(e){"rtl"==t.doc.direction&&(o=-o);var i=le(r,t.doc.direction);if(i){var s,a=o<0?J(i):i[0],c=o<0==(1==a.level)?"after":"before";if(a.level>0||"rtl"==t.doc.direction){var l=Dr(t,r);s=o<0?r.text.length-1:0;var p=Nr(t,l,s).top;s=ie((function(e){return Nr(t,l,e).top==p}),o<0==(1==a.level)?a.from:a.to-1,s),"before"==c&&(s=Qi(r,s,1))}else s=o<0?a.to:a.from;return new et(n,s,c)}}return new et(n,o<0?r.text.length:0,o<0?"before":"after")}qi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qi.default=v?qi.macDefault:qi.pcDefault;var ts={selectAll:ci,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),U)},killLine:function(e){return Ki(e,(function(t){if(t.empty()){var r=Ve(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:et(t.head.line+1,0)}:{from:t.head,to:et(t.head.line,r)}}return{from:t.from(),to:t.to()}}))},deleteLine:function(e){return Ki(e,(function(t){return{from:et(t.from().line,0),to:at(e.doc,et(t.to().line+1,0))}}))},delLineLeft:function(e){return Ki(e,(function(e){return{from:et(e.from().line,0),to:e.from()}}))},delWrappedLineLeft:function(e){return Ki(e,(function(t){var r=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:r},"div"),to:t.from()}}))},delWrappedLineRight:function(e){return Ki(e,(function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}}))},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(et(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(et(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy((function(t){return rs(e,t.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy((function(t){return ns(e,t.head)}),{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy((function(t){return function(e,t){var r=Ve(e.doc,t),n=function(e){for(var t;t=Rt(e);)e=t.find(1,!0).line;return e}(r);return n!=r&&(t=Ye(n)),es(!0,e,r,t,-1)}(e,t.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")}),$)},goLineLeft:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")}),$)},goLineLeftSmart:function(e){return e.extendSelectionsBy((function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?ns(e,t.head):n}),$)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,o=0;o<r.length;o++){var i=r[o].from(),s=F(e.getLine(i.line),i.ch,n);t.push(W(n-s%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Zn(e,(function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var o=t[n].head,i=Ve(e.doc,o.line).text;if(i)if(o.ch==i.length&&(o=new et(o.line,o.ch-1)),o.ch>0)o=new et(o.line,o.ch+1),e.replaceRange(i.charAt(o.ch-1)+i.charAt(o.ch-2),et(o.line,o.ch-2),o,"+transpose");else if(o.line>e.doc.first){var s=Ve(e.doc,o.line-1).text;s&&(o=new et(o.line,1),e.replaceRange(i.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),et(o.line-1,s.length-1),o,"+transpose"))}r.push(new _o(o,o))}e.setSelections(r)}))},newlineAndIndent:function(e){return Zn(e,(function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);Dn(e)}))},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function rs(e,t){var r=Ve(e.doc,t),n=Ft(r);return n!=r&&(t=Ye(n)),es(!0,e,n,t,1)}function ns(e,t){var r=rs(e,t.line),n=Ve(e.doc,r.line),o=le(n,e.doc.direction);if(!o||0==o[0].level){var i=Math.max(r.ch,n.text.search(/\S/)),s=t.line==r.line&&t.ch<=i&&t.ch;return et(r.line,s?0:i,r.sticky)}return r}function os(e,t,r){if("string"==typeof t&&!(t=ts[t]))return!1;e.display.input.ensurePolled();var n=e.display.shift,o=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),o=t(e)!=z}finally{e.display.shift=n,e.state.suppressEdits=!1}return o}var is=new G;function ss(e,t,r,n){var o=e.state.keySeq;if(o){if(Wi(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:is.set(50,(function(){e.state.keySeq==o&&(e.state.keySeq=null,e.display.input.reset())})),as(e,o+" "+t,r,n))return!0}return as(e,t,r,n)}function as(e,t,r,n){var o=function(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var o=Vi(t,e.state.keyMaps[n],r,e);if(o)return o}return e.options.extraKeys&&Vi(t,e.options.extraKeys,r,e)||Vi(t,e.options.keyMap,r,e)}(e,t,n);return"multi"==o&&(e.state.keySeq=t),"handled"==o&&ar(e,"keyHandled",e,t,r),"handled"!=o&&"multi"!=o||(be(r),xn(e)),!!o}function cs(e,t){var r=Xi(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?ss(e,"Shift-"+r,t,(function(t){return os(e,t,!0)}))||ss(e,r,t,(function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return os(e,t)})):ss(e,r,t,(function(t){return os(e,t)})))}var ls=null;function ps(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=N(),me(t,e)))){s&&a<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var o=cs(t,e);u&&(ls=o?n:null,o||88!=n||je||!(v?e.metaKey:e.ctrlKey)||t.replaceSelection("",null,"cut")),r&&!v&&!o&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function r(e){18!=e.keyCode&&e.altKey||(C(t,"CodeMirror-crosshair"),he(document,"keyup",r),he(document,"mouseover",r))}j(t,"CodeMirror-crosshair"),ue(document,"keyup",r),ue(document,"mouseover",r)}(t)}}function us(e){16==e.keyCode&&(this.doc.sel.shift=!1),me(this,e)}function ds(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||xr(t.display,e)||me(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(u&&r==ls)return ls=null,void be(e);if(!u||e.which&&!(e.which<10)||!cs(t,e)){var o=String.fromCharCode(null==n?r:n);"\b"!=o&&(function(e,t,r){return ss(e,"'"+r+"'",t,(function(t){return os(e,t,!0)}))}(t,e,o)||t.display.input.onKeyPress(e))}}}var hs,fs,ms=function(e,t,r){this.time=e,this.pos=t,this.button=r};function gs(e){var t=this,r=t.display;if(!(me(t,e)||r.activeTouch&&r.input.supportsTouch()))if(r.input.ensurePolled(),r.shift=e.shiftKey,xr(r,e))c||(r.scroller.draggable=!1,setTimeout((function(){return r.scroller.draggable=!0}),100));else if(!bs(t,e)){var n=ln(t,e),o=_e(e),i=n?function(e,t){var r=+new Date;return fs&&fs.compare(r,e,t)?(hs=fs=null,"triple"):hs&&hs.compare(r,e,t)?(fs=new ms(r,e,t),hs=null,"double"):(hs=new ms(r,e,t),fs=null,"single")}(n,o):"single";window.focus(),1==o&&t.state.selectingText&&t.state.selectingText(e),n&&function(e,t,r,n,o){var i="Click";return"double"==n?i="Double"+i:"triple"==n&&(i="Triple"+i),ss(e,Ji(i=(1==t?"Left":2==t?"Middle":"Right")+i,o),o,(function(t){if("string"==typeof t&&(t=ts[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=z}finally{e.state.suppressEdits=!1}return n}))}(t,o,n,i,e)||(1==o?n?function(e,t,r,n){s?setTimeout(M(kn,e),0):e.curOp.focus=N();var o,i=function(e,t,r){var n=e.getOption("configureMouse"),o=n?n(e,t,r):{};if(null==o.unit){var i=b?r.shiftKey&&r.metaKey:r.altKey;o.unit=i?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==o.extend||e.doc.extend)&&(o.extend=e.doc.extend||r.shiftKey),null==o.addNew&&(o.addNew=v?r.metaKey:r.ctrlKey),null==o.moveOnDrag&&(o.moveOnDrag=!(v?r.altKey:r.ctrlKey)),o}(e,r,n),l=e.doc.sel;e.options.dragDrop&&Pe&&!e.isReadOnly()&&"single"==r&&(o=l.contains(t))>-1&&(tt((o=l.ranges[o]).from(),t)<0||t.xRel>0)&&(tt(o.to(),t)>0||t.xRel<0)?function(e,t,r,n){var o=e.display,i=!1,l=eo(e,(function(t){c&&(o.scroller.draggable=!1),e.state.draggingText=!1,he(o.wrapper.ownerDocument,"mouseup",l),he(o.wrapper.ownerDocument,"mousemove",p),he(o.scroller,"dragstart",u),he(o.scroller,"drop",l),i||(be(t),n.addNew||Xo(e.doc,r,null,null,n.extend),c&&!d||s&&9==a?setTimeout((function(){o.wrapper.ownerDocument.body.focus({preventScroll:!0}),o.input.focus()}),20):o.input.focus())})),p=function(e){i=i||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},u=function(){return i=!0};c&&(o.scroller.draggable=!0),e.state.draggingText=l,l.copy=!n.moveOnDrag,o.scroller.dragDrop&&o.scroller.dragDrop(),ue(o.wrapper.ownerDocument,"mouseup",l),ue(o.wrapper.ownerDocument,"mousemove",p),ue(o.scroller,"dragstart",u),ue(o.scroller,"drop",l),En(e),setTimeout((function(){return o.input.focus()}),20)}(e,n,t,i):function(e,t,r,n){var o=e.display,i=e.doc;be(t);var s,a,c=i.sel,l=c.ranges;if(n.addNew&&!n.extend?(a=i.sel.contains(r),s=a>-1?l[a]:new _o(r,r)):(s=i.sel.primary(),a=i.sel.primIndex),"rectangle"==n.unit)n.addNew||(s=new _o(r,r)),r=ln(e,t,!0,!0),a=-1;else{var p=ys(e,r,n.unit);s=n.extend?Jo(s,p.anchor,p.head,n.extend):p}n.addNew?-1==a?(a=l.length,ei(i,So(e,l.concat([s]),a),{scroll:!1,origin:"*mouse"})):l.length>1&&l[a].empty()&&"char"==n.unit&&!n.extend?(ei(i,So(e,l.slice(0,a).concat(l.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),c=i.sel):Ko(i,a,s,q):(a=0,ei(i,new Eo([s],0),q),c=i.sel);var u=r;function d(t){if(0!=tt(u,t))if(u=t,"rectangle"==n.unit){for(var o=[],l=e.options.tabSize,p=F(Ve(i,r.line).text,r.ch,l),d=F(Ve(i,t.line).text,t.ch,l),h=Math.min(p,d),f=Math.max(p,d),m=Math.min(r.line,t.line),g=Math.min(e.lastLine(),Math.max(r.line,t.line));m<=g;m++){var y=Ve(i,m).text,v=H(y,h,l);h==f?o.push(new _o(et(m,v),et(m,v))):y.length>v&&o.push(new _o(et(m,v),et(m,H(y,f,l))))}o.length||o.push(new _o(r,r)),ei(i,So(e,c.ranges.slice(0,a).concat(o),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,w=s,x=ys(e,t,n.unit),k=w.anchor;tt(x.anchor,k)>0?(b=x.head,k=it(w.from(),x.anchor)):(b=x.anchor,k=ot(w.to(),x.head));var E=c.ranges.slice(0);E[a]=function(e,t){var r=t.anchor,n=t.head,o=Ve(e.doc,r.line);if(0==tt(r,n)&&r.sticky==n.sticky)return t;var i=le(o);if(!i)return t;var s=ae(i,r.ch,r.sticky),a=i[s];if(a.from!=r.ch&&a.to!=r.ch)return t;var c,l=s+(a.from==r.ch==(1!=a.level)?0:1);if(0==l||l==i.length)return t;if(n.line!=r.line)c=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var p=ae(i,n.ch,n.sticky),u=p-s||(n.ch-r.ch)*(1==a.level?-1:1);c=p==l-1||p==l?u<0:u>0}var d=i[l+(c?-1:0)],h=c==(1==d.level),f=h?d.from:d.to,m=h?"after":"before";return r.ch==f&&r.sticky==m?t:new _o(new et(r.line,f,m),n)}(e,new _o(at(i,k),b)),ei(i,So(e,E,a),q)}}var h=o.wrapper.getBoundingClientRect(),f=0;function m(t){e.state.selectingText=!1,f=1/0,t&&(be(t),o.input.focus()),he(o.wrapper.ownerDocument,"mousemove",g),he(o.wrapper.ownerDocument,"mouseup",y),i.history.lastSelOrigin=null}var g=eo(e,(function(t){0!==t.buttons&&_e(t)?function t(r){var s=++f,a=ln(e,r,!0,"rectangle"==n.unit);if(a)if(0!=tt(a,u)){e.curOp.focus=N(),d(a);var c=An(o,i);(a.line>=c.to||a.line<c.from)&&setTimeout(eo(e,(function(){f==s&&t(r)})),150)}else{var l=r.clientY<h.top?-20:r.clientY>h.bottom?20:0;l&&setTimeout(eo(e,(function(){f==s&&(o.scroller.scrollTop+=l,t(r))})),50)}}(t):m(t)})),y=eo(e,m);e.state.selectingText=y,ue(o.wrapper.ownerDocument,"mousemove",g),ue(o.wrapper.ownerDocument,"mouseup",y)}(e,n,t,i)}(t,n,i,e):Ee(e)==r.scroller&&be(e):2==o?(n&&Xo(t.doc,n),setTimeout((function(){return r.input.focus()}),20)):3==o&&(E?t.display.input.onContextMenu(e):En(t)))}}function ys(e,t,r){if("char"==r)return new _o(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new _o(et(t.line,0),at(e.doc,et(t.line+1,0)));var n=r(e,t);return new _o(n.from,n.to)}function vs(e,t,r,n){var o,i;if(t.touches)o=t.touches[0].clientX,i=t.touches[0].clientY;else try{o=t.clientX,i=t.clientY}catch(e){return!1}if(o>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&be(t);var s=e.display,a=s.lineDiv.getBoundingClientRect();if(i>a.bottom||!ye(e,r))return xe(t);i-=a.top-s.viewOffset;for(var c=0;c<e.display.gutterSpecs.length;++c){var l=s.gutters.childNodes[c];if(l&&l.getBoundingClientRect().right>=o)return fe(e,r,e,Ke(e.doc,i),e.display.gutterSpecs[c].className,t),xe(t)}}function bs(e,t){return vs(e,t,"gutterClick",!0)}function ws(e,t){xr(e.display,t)||function(e,t){return!!ye(e,"gutterContextMenu")&&vs(e,t,"gutterContextMenu",!1)}(e,t)||me(e,t,"contextmenu")||E||e.display.input.onContextMenu(t)}function xs(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Gr(e)}ms.prototype.compare=function(e,t,r){return this.time+400>e&&0==tt(t,this.pos)&&r==this.button};var ks={toString:function(){return"CodeMirror.Init"}},Es={},_s={};function Ss(e,t,r){if(!t!=!(r&&r!=ks)){var n=e.display.dragFunctions,o=t?ue:he;o(e.display.scroller,"dragstart",n.start),o(e.display.scroller,"dragenter",n.enter),o(e.display.scroller,"dragover",n.over),o(e.display.scroller,"dragleave",n.leave),o(e.display.scroller,"drop",n.drop)}}function Cs(e){e.options.lineWrapping?(j(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(C(e.display.wrapper,"CodeMirror-wrap"),Ht(e)),cn(e),un(e),Gr(e),setTimeout((function(){return zn(e)}),100)}function Ps(e,t){var r=this;if(!(this instanceof Ps))return new Ps(e,t);this.options=t=t?L(t):{},L(Es,t,!1);var n=t.value;"string"==typeof n?n=new Di(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var o=new Ps.inputStyles[t.inputStyle](this),i=this.display=new yo(e,n,o,t);for(var l in i.wrapper.CodeMirror=this,xs(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$n(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new G,keySeq:null,specialChars:null},t.autofocus&&!y&&i.input.focus(),s&&a<11&&setTimeout((function(){return r.display.input.reset(!0)}),20),function(e){var t=e.display;ue(t.scroller,"mousedown",eo(e,gs)),ue(t.scroller,"dblclick",s&&a<11?eo(e,(function(t){if(!me(e,t)){var r=ln(e,t);if(r&&!bs(e,t)&&!xr(e.display,t)){be(t);var n=e.findWordAt(r);Xo(e.doc,n.anchor,n.head)}}})):function(t){return me(e,t)||be(t)}),ue(t.scroller,"contextmenu",(function(t){return ws(e,t)})),ue(t.input.getField(),"contextmenu",(function(r){t.scroller.contains(r.target)||ws(e,r)}));var r,n={end:0};function o(){t.activeTouch&&(r=setTimeout((function(){return t.activeTouch=null}),1e3),(n=t.activeTouch).end=+new Date)}function i(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}ue(t.scroller,"touchstart",(function(o){if(!me(e,o)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(o)&&!bs(e,o)){t.input.ensurePolled(),clearTimeout(r);var i=+new Date;t.activeTouch={start:i,moved:!1,prev:i-n.end<=300?n:null},1==o.touches.length&&(t.activeTouch.left=o.touches[0].pageX,t.activeTouch.top=o.touches[0].pageY)}})),ue(t.scroller,"touchmove",(function(){t.activeTouch&&(t.activeTouch.moved=!0)})),ue(t.scroller,"touchend",(function(r){var n=t.activeTouch;if(n&&!xr(t,r)&&null!=n.left&&!n.moved&&new Date-n.start<300){var s,a=e.coordsChar(t.activeTouch,"page");s=!n.prev||i(n,n.prev)?new _o(a,a):!n.prev.prev||i(n,n.prev.prev)?e.findWordAt(a):new _o(et(a.line,0),at(e.doc,et(a.line+1,0))),e.setSelection(s.anchor,s.head),e.focus(),be(r)}o()})),ue(t.scroller,"touchcancel",o),ue(t.scroller,"scroll",(function(){t.scroller.clientHeight&&(Rn(e,t.scroller.scrollTop),Ln(e,t.scroller.scrollLeft,!0),fe(e,"scroll",e))})),ue(t.scroller,"mousewheel",(function(t){return ko(e,t)})),ue(t.scroller,"DOMMouseScroll",(function(t){return ko(e,t)})),ue(t.wrapper,"scroll",(function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0})),t.dragFunctions={enter:function(t){me(e,t)||ke(t)},over:function(t){me(e,t)||(function(e,t){var r=ln(e,t);if(r){var n=document.createDocumentFragment();vn(e,r,n),e.display.dragCursor||(e.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),A(e.display.dragCursor,n)}}(e,t),ke(t))},start:function(t){return function(e,t){if(s&&(!e.state.draggingText||+new Date-Ni<100))ke(t);else if(!me(e,t)&&!xr(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!d)){var r=O("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",u&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),u&&r.parentNode.removeChild(r)}}(e,t)},drop:eo(e,ji),leave:function(t){me(e,t)||Ii(e)}};var c=t.input.getField();ue(c,"keyup",(function(t){return us.call(e,t)})),ue(c,"keydown",eo(e,ps)),ue(c,"keypress",eo(e,ds)),ue(c,"focus",(function(t){return _n(e,t)})),ue(c,"blur",(function(t){return Sn(e,t)}))}(this),Li(),Vn(this),this.curOp.forceUpdate=!0,Mo(this,n),t.autofocus&&!y||this.hasFocus()?setTimeout((function(){r.hasFocus()&&!r.state.focused&&_n(r)}),20):Sn(this),_s)_s.hasOwnProperty(l)&&_s[l](this,t[l],ks);ho(this),t.finishInit&&t.finishInit(this);for(var p=0;p<As.length;++p)As[p](this);Wn(this),c&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}Ps.defaults=Es,Ps.optionHandlers=_s;var As=[];function Os(e,t,r,n){var o,i=e.doc;null==r&&(r="add"),"smart"==r&&(i.mode.indent?o=ht(e,t).state:r="prev");var s=e.options.tabSize,a=Ve(i,t),c=F(a.text,null,s);a.stateAfter&&(a.stateAfter=null);var l,p=a.text.match(/^\s*/)[0];if(n||/\S/.test(a.text)){if("smart"==r&&((l=i.mode.indent(o,a.text.slice(p.length),a.text))==z||l>150)){if(!n)return;r="prev"}}else l=0,r="not";"prev"==r?l=t>i.first?F(Ve(i,t-1).text,null,s):0:"add"==r?l=c+e.options.indentUnit:"subtract"==r?l=c-e.options.indentUnit:"number"==typeof r&&(l=c+r),l=Math.max(0,l);var u="",d=0;if(e.options.indentWithTabs)for(var h=Math.floor(l/s);h;--h)d+=s,u+="\t";if(d<l&&(u+=W(l-d)),u!=p)return mi(i,u,et(t,0),et(t,p.length),"+input"),a.stateAfter=null,!0;for(var f=0;f<i.sel.ranges.length;f++){var m=i.sel.ranges[f];if(m.head.line==t&&m.head.ch<p.length){var g=et(t,p.length);Ko(i,f,new _o(g,g));break}}}Ps.defineInitHook=function(e){return As.push(e)};var Ts=null;function Ds(e){Ts=e}function Ns(e,t,r,n,o){var i=e.doc;e.display.shift=!1,n||(n=i.sel);var s=+new Date-200,a="paste"==o||e.state.pasteIncoming>s,c=De(t),l=null;if(a&&n.ranges.length>1)if(Ts&&Ts.text.join("\n")==t){if(n.ranges.length%Ts.text.length==0){l=[];for(var p=0;p<Ts.text.length;p++)l.push(i.splitLines(Ts.text[p]))}}else c.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(l=X(c,(function(e){return[e]})));for(var u=e.curOp.updateInput,d=n.ranges.length-1;d>=0;d--){var h=n.ranges[d],f=h.from(),m=h.to();h.empty()&&(r&&r>0?f=et(f.line,f.ch-r):e.state.overwrite&&!a?m=et(m.line,Math.min(Ve(i,m.line).text.length,m.ch+J(c).length)):a&&Ts&&Ts.lineWise&&Ts.text.join("\n")==c.join("\n")&&(f=m=et(f.line,0)));var g={from:f,to:m,text:l?l[d%l.length]:c,origin:o||(a?"paste":e.state.cutIncoming>s?"cut":"+input")};pi(e.doc,g),ar(e,"inputRead",e,g)}t&&!a&&Is(e,t),Dn(e),e.curOp.updateInput<2&&(e.curOp.updateInput=u),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function js(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Zn(t,(function(){return Ns(t,r,0,null,"paste")})),!0}function Is(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var o=r.ranges[n];if(!(o.head.ch>100||n&&r.ranges[n-1].head.line==o.head.line)){var i=e.getModeAt(o.head),s=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(t.indexOf(i.electricChars.charAt(a))>-1){s=Os(e,o.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(Ve(e.doc,o.head.line).text.slice(0,o.head.ch))&&(s=Os(e,o.head.line,"smart"));s&&ar(e,"electricInput",e,o.head.line)}}}function Rs(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var o=e.doc.sel.ranges[n].head.line,i={anchor:et(o,0),head:et(o+1,0)};r.push(i),t.push(e.getRange(i.anchor,i.head))}return{text:t,ranges:r}}function Ms(e,t,r,n){e.setAttribute("autocorrect",r?"":"off"),e.setAttribute("autocapitalize",n?"":"off"),e.setAttribute("spellcheck",!!t)}function Ls(){var e=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=O("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return c?e.style.width="1000px":e.setAttribute("wrap","off"),m&&(e.style.border="1px solid black"),Ms(e),t}function Fs(e,t,r,n,o){var i=t,s=r,a=Ve(e,t.line),c=o&&"rtl"==e.direction?-r:r;function l(i){var s,l;if("codepoint"==n){var p=a.text.charCodeAt(t.ch+(n>0?0:-1));s=isNaN(p)?null:new et(t.line,Math.max(0,Math.min(a.text.length,t.ch+r*(p>=55296&&p<56320?2:1))),-r)}else s=o?function(e,t,r,n){var o=le(t,e.doc.direction);if(!o)return Zi(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var i=ae(o,r.ch,r.sticky),s=o[i];if("ltr"==e.doc.direction&&s.level%2==0&&(n>0?s.to>r.ch:s.from<r.ch))return Zi(t,r,n);var a,c=function(e,r){return Qi(t,e instanceof et?e.ch:e,r)},l=function(r){return e.options.lineWrapping?(a=a||Dr(e,t),Kr(e,t,a,r)):{begin:0,end:t.text.length}},p=l("before"==r.sticky?c(r,-1):r.ch);if("rtl"==e.doc.direction||1==s.level){var u=1==s.level==n<0,d=c(r,u?1:-1);if(null!=d&&(u?d<=s.to&&d<=p.end:d>=s.from&&d>=p.begin)){var h=u?"before":"after";return new et(r.line,d,h)}}var f=function(e,t,n){for(var i=function(e,t){return t?new et(r.line,c(e,1),"before"):new et(r.line,e,"after")};e>=0&&e<o.length;e+=t){var s=o[e],a=t>0==(1!=s.level),l=a?n.begin:c(n.end,-1);if(s.from<=l&&l<s.to)return i(l,a);if(l=a?s.from:c(s.to,-1),n.begin<=l&&l<n.end)return i(l,a)}},m=f(i+n,n,p);if(m)return m;var g=n>0?p.end:c(p.begin,-1);return null==g||n>0&&g==t.text.length||!(m=f(n>0?0:o.length-1,n,l(g)))?null:m}(e.cm,a,t,r):Zi(a,t,r);if(null==s){if(i||(l=t.line+c)<e.first||l>=e.first+e.size||(t=new et(l,t.ch,t.sticky),!(a=Ve(e,l))))return!1;t=es(o,e.cm,a,t.line,c)}else t=s;return!0}if("char"==n||"codepoint"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var p=null,u="group"==n,d=e.cm&&e.cm.getHelper(t,"wordChars"),h=!0;!(r<0)||l(!h);h=!1){var f=a.text.charAt(t.ch)||"\n",m=ee(f,d)?"w":u&&"\n"==f?"n":!u||/\s/.test(f)?null:"p";if(!u||h||m||(m="s"),p&&p!=m){r<0&&(r=1,l(),t.sticky="after");break}if(m&&(p=m),r>0&&!l(!h))break}var g=si(e,t,i,s,!0);return rt(i,g)&&(g.hitSide=!0),g}function Gs(e,t,r,n){var o,i,s=e.doc,a=t.left;if("page"==n){var c=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(c-.5*rn(e.display),3);o=(r>0?t.bottom:t.top)+r*l}else"line"==n&&(o=r>0?t.bottom+3:t.top-3);for(;(i=Xr(e,a,o)).outside;){if(r<0?o<=0:o>=s.height){i.hitSide=!0;break}o+=5*r}return i}var Bs=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new G,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function zs(e,t){var r=Tr(e,t.line);if(!r||r.hidden)return null;var n=Ve(e.doc,t.line),o=Ar(r,n,t.line),i=le(n,e.doc.direction),s="left";i&&(s=ae(i,t.ch)%2?"right":"left");var a=Rr(o.map,t.ch,s);return a.offset="right"==a.collapse?a.end:a.start,a}function Us(e,t){return t&&(e.bad=!0),e}function qs(e,t,r){var n;if(t==e.display.lineDiv){if(!(n=e.display.lineDiv.childNodes[r]))return Us(e.clipPos(et(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var o=0;o<e.display.view.length;o++){var i=e.display.view[o];if(i.node==n)return $s(i,t,r)}}function $s(e,t,r){var n=e.text.firstChild,o=!1;if(!t||!D(n,t))return Us(et(Ye(e.line),0),!0);if(t==n&&(o=!0,t=n.childNodes[r],r=0,!t)){var i=e.rest?J(e.rest):e.line;return Us(et(Ye(i),i.text.length),o)}var s=3==t.nodeType?t:null,a=t;for(s||1!=t.childNodes.length||3!=t.firstChild.nodeType||(s=t.firstChild,r&&(r=s.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var c=e.measure,l=c.maps;function p(t,r,n){for(var o=-1;o<(l?l.length:0);o++)for(var i=o<0?c.map:l[o],s=0;s<i.length;s+=3){var a=i[s+2];if(a==t||a==r){var p=Ye(o<0?e.line:e.rest[o]),u=i[s]+n;return(n<0||a!=t)&&(u=i[s+(n?1:0)]),et(p,u)}}}var u=p(s,a,r);if(u)return Us(u,o);for(var d=a.nextSibling,h=s?s.nodeValue.length-r:0;d;d=d.nextSibling){if(u=p(d,d.firstChild,0))return Us(et(u.line,u.ch-h),o);h+=d.textContent.length}for(var f=a.previousSibling,m=r;f;f=f.previousSibling){if(u=p(f,f.firstChild,-1))return Us(et(u.line,u.ch+m),o);m+=f.textContent.length}}Bs.prototype.init=function(e){var t=this,r=this,n=r.cm,o=r.div=e.lineDiv;function i(e){for(var t=e.target;t;t=t.parentNode){if(t==o)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function s(e){if(i(e)&&!me(n,e)){if(n.somethingSelected())Ds({lineWise:!1,text:n.getSelections()}),"cut"==e.type&&n.replaceSelection("",null,"cut");else{if(!n.options.lineWiseCopyCut)return;var t=Rs(n);Ds({lineWise:!0,text:t.text}),"cut"==e.type&&n.operation((function(){n.setSelections(t.ranges,0,U),n.replaceSelection("",null,"cut")}))}if(e.clipboardData){e.clipboardData.clearData();var s=Ts.text.join("\n");if(e.clipboardData.setData("Text",s),e.clipboardData.getData("Text")==s)return void e.preventDefault()}var a=Ls(),c=a.firstChild;n.display.lineSpace.insertBefore(a,n.display.lineSpace.firstChild),c.value=Ts.text.join("\n");var l=document.activeElement;R(c),setTimeout((function(){n.display.lineSpace.removeChild(a),l.focus(),l==o&&r.showPrimarySelection()}),50)}}Ms(o,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize),ue(o,"paste",(function(e){!i(e)||me(n,e)||js(e,n)||a<=11&&setTimeout(eo(n,(function(){return t.updateFromDOM()})),20)})),ue(o,"compositionstart",(function(e){t.composing={data:e.data,done:!1}})),ue(o,"compositionupdate",(function(e){t.composing||(t.composing={data:e.data,done:!1})})),ue(o,"compositionend",(function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)})),ue(o,"touchstart",(function(){return r.forceCompositionEnd()})),ue(o,"input",(function(){t.composing||t.readFromDOMSoon()})),ue(o,"copy",s),ue(o,"cut",s)},Bs.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Bs.prototype.prepareSelection=function(){var e=yn(this.cm,!1);return e.focus=document.activeElement==this.div,e},Bs.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Bs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Bs.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),o=n.from(),i=n.to();if(t.display.viewTo==t.display.viewFrom||o.line>=t.display.viewTo||i.line<t.display.viewFrom)e.removeAllRanges();else{var s=qs(t,e.anchorNode,e.anchorOffset),a=qs(t,e.focusNode,e.focusOffset);if(!s||s.bad||!a||a.bad||0!=tt(it(s,a),o)||0!=tt(ot(s,a),i)){var c=t.display.view,l=o.line>=t.display.viewFrom&&zs(t,o)||{node:c[0].measure.map[2],offset:0},p=i.line<t.display.viewTo&&zs(t,i);if(!p){var u=c[c.length-1].measure,d=u.maps?u.maps[u.maps.length-1]:u.map;p={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(l&&p){var h,f=e.rangeCount&&e.getRangeAt(0);try{h=S(l.node,l.offset,p.offset,p.node)}catch(e){}h&&(!r&&t.state.focused?(e.collapse(l.node,l.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),f&&null==e.anchorNode?e.addRange(f):r&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Bs.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation((function(){return e.cm.curOp.selectionChanged=!0}))}),20)},Bs.prototype.showMultipleSelections=function(e){A(this.cm.display.cursorDiv,e.cursors),A(this.cm.display.selectionDiv,e.selection)},Bs.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Bs.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return D(this.div,t)},Bs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&document.activeElement==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Bs.prototype.blur=function(){this.div.blur()},Bs.prototype.getField=function(){return this.div},Bs.prototype.supportsTouch=function(){return!0},Bs.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Zn(this.cm,(function(){return e.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}))},Bs.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Bs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(g&&p&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=qs(t,e.anchorNode,e.anchorOffset),n=qs(t,e.focusNode,e.focusOffset);r&&n&&Zn(t,(function(){ei(t.doc,Co(r,n),U),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)}))}}},Bs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,r,n=this.cm,o=n.display,i=n.doc.sel.primary(),s=i.from(),a=i.to();if(0==s.ch&&s.line>n.firstLine()&&(s=et(s.line-1,Ve(n.doc,s.line-1).length)),a.ch==Ve(n.doc,a.line).text.length&&a.line<n.lastLine()&&(a=et(a.line+1,0)),s.line<o.viewFrom||a.line>o.viewTo-1)return!1;s.line==o.viewFrom||0==(e=pn(n,s.line))?(t=Ye(o.view[0].line),r=o.view[0].node):(t=Ye(o.view[e].line),r=o.view[e-1].node.nextSibling);var c,l,p=pn(n,a.line);if(p==o.view.length-1?(c=o.viewTo-1,l=o.lineDiv.lastChild):(c=Ye(o.view[p+1].line)-1,l=o.view[p+1].node.previousSibling),!r)return!1;for(var u=n.doc.splitLines(function(e,t,r,n,o){var i="",s=!1,a=e.doc.lineSeparator(),c=!1;function l(){s&&(i+=a,c&&(i+=a),s=c=!1)}function p(e){e&&(l(),i+=e)}function u(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(r)return void p(r);var i,d=t.getAttribute("cm-marker");if(d){var h=e.findMarks(et(n,0),et(o+1,0),(g=+d,function(e){return e.id==g}));return void(h.length&&(i=h[0].find(0))&&p(We(e.doc,i.from,i.to).join(a)))}if("false"==t.getAttribute("contenteditable"))return;var f=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;f&&l();for(var m=0;m<t.childNodes.length;m++)u(t.childNodes[m]);/^(pre|p)$/i.test(t.nodeName)&&(c=!0),f&&(s=!0)}else 3==t.nodeType&&p(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var g}for(;u(t),t!=r;)t=t.nextSibling,c=!1;return i}(n,r,l,t,c)),d=We(n.doc,et(t,0),et(c,Ve(n.doc,c).text.length));u.length>1&&d.length>1;)if(J(u)==J(d))u.pop(),d.pop(),c--;else{if(u[0]!=d[0])break;u.shift(),d.shift(),t++}for(var h=0,f=0,m=u[0],g=d[0],y=Math.min(m.length,g.length);h<y&&m.charCodeAt(h)==g.charCodeAt(h);)++h;for(var v=J(u),b=J(d),w=Math.min(v.length-(1==u.length?h:0),b.length-(1==d.length?h:0));f<w&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)++f;if(1==u.length&&1==d.length&&t==s.line)for(;h&&h>s.ch&&v.charCodeAt(v.length-f-1)==b.charCodeAt(b.length-f-1);)h--,f++;u[u.length-1]=v.slice(0,v.length-f).replace(/^\u200b+/,""),u[0]=u[0].slice(h).replace(/\u200b+$/,"");var x=et(t,h),k=et(c,d.length?J(d).length-f:0);return u.length>1||u[0]||tt(x,k)?(mi(n.doc,u,x,k,"+input"),!0):void 0},Bs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Bs.prototype.reset=function(){this.forceCompositionEnd()},Bs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Bs.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()}),80))},Bs.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Zn(this.cm,(function(){return un(e.cm)}))},Bs.prototype.setUneditable=function(e){e.contentEditable="false"},Bs.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||eo(this.cm,Ns)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Bs.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Bs.prototype.onContextMenu=function(){},Bs.prototype.resetPosition=function(){},Bs.prototype.needsContentAttribute=!0;var Hs=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new G,this.hasSelection=!1,this.composing=null};Hs.prototype.init=function(e){var t=this,r=this,n=this.cm;this.createField(e);var o=this.textarea;function i(e){if(!me(n,e)){if(n.somethingSelected())Ds({lineWise:!1,text:n.getSelections()});else{if(!n.options.lineWiseCopyCut)return;var t=Rs(n);Ds({lineWise:!0,text:t.text}),"cut"==e.type?n.setSelections(t.ranges,null,U):(r.prevInput="",o.value=t.text.join("\n"),R(o))}"cut"==e.type&&(n.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),m&&(o.style.width="0px"),ue(o,"input",(function(){s&&a>=9&&t.hasSelection&&(t.hasSelection=null),r.poll()})),ue(o,"paste",(function(e){me(n,e)||js(e,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())})),ue(o,"cut",i),ue(o,"copy",i),ue(e.scroller,"paste",(function(t){if(!xr(e,t)&&!me(n,t)){if(!o.dispatchEvent)return n.state.pasteIncoming=+new Date,void r.focus();var i=new Event("paste");i.clipboardData=t.clipboardData,o.dispatchEvent(i)}})),ue(e.lineSpace,"selectstart",(function(t){xr(e,t)||be(t)})),ue(o,"compositionstart",(function(){var e=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:n.markText(e,n.getCursor("to"),{className:"CodeMirror-composing"})}})),ue(o,"compositionend",(function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)}))},Hs.prototype.createField=function(e){this.wrapper=Ls(),this.textarea=this.wrapper.firstChild},Hs.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Hs.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=yn(e);if(e.options.moveInputWithCursor){var o=Vr(e,r.sel.primary().head,"div"),i=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,o.top+s.top-i.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,o.left+s.left-i.left))}return n},Hs.prototype.showSelection=function(e){var t=this.cm.display;A(t.cursorDiv,e.cursors),A(t.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Hs.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&R(this.textarea),s&&a>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",s&&a>=9&&(this.hasSelection=null))}},Hs.prototype.getField=function(){return this.textarea},Hs.prototype.supportsTouch=function(){return!1},Hs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!y||N()!=this.textarea))try{this.textarea.focus()}catch(e){}},Hs.prototype.blur=function(){this.textarea.blur()},Hs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Hs.prototype.receivedFocus=function(){this.slowPoll()},Hs.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){e.poll(),e.cm.state.focused&&e.slowPoll()}))},Hs.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,(function r(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,r))}))},Hs.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ne(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var o=r.value;if(o==n&&!t.somethingSelected())return!1;if(s&&a>=9&&this.hasSelection===o||v&&/[\uf700-\uf7ff]/.test(o))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var i=o.charCodeAt(0);if(8203!=i||n||(n="​"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var c=0,l=Math.min(n.length,o.length);c<l&&n.charCodeAt(c)==o.charCodeAt(c);)++c;return Zn(t,(function(){Ns(t,o.slice(c),n.length-c,null,e.composing?"*compose":null),o.length>1e3||o.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=o,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Hs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Hs.prototype.onKeyPress=function(){s&&a>=9&&(this.hasSelection=null),this.fastPoll()},Hs.prototype.onContextMenu=function(e){var t=this,r=t.cm,n=r.display,o=t.textarea;t.contextMenuPending&&t.contextMenuPending();var i=ln(r,e),l=n.scroller.scrollTop;if(i&&!u){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(i)&&eo(r,ei)(r.doc,Co(i),U);var p,d=o.style.cssText,h=t.wrapper.style.cssText,f=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-f.top-5)+"px; left: "+(e.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+(s?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",c&&(p=window.scrollY),n.input.focus(),c&&window.scrollTo(null,p),n.input.reset(),r.somethingSelected()||(o.value=t.prevInput=" "),t.contextMenuPending=y,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll),s&&a>=9&&g(),E){ke(e);var m=function(){he(window,"mouseup",m),setTimeout(y,20)};ue(window,"mouseup",m)}else setTimeout(y,50)}function g(){if(null!=o.selectionStart){var e=r.somethingSelected(),i="​"+(e?o.value:"");o.value="⇚",o.value=i,t.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=i.length,n.selForContextMenu=r.doc.sel}}function y(){if(t.contextMenuPending==y&&(t.contextMenuPending=!1,t.wrapper.style.cssText=h,o.style.cssText=d,s&&a<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=l),null!=o.selectionStart)){(!s||s&&a<9)&&g();var e=0,i=function(){n.selForContextMenu==r.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"​"==t.prevInput?eo(r,ci)(r):e++<10?n.detectingSelectAll=setTimeout(i,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(i,200)}}},Hs.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},Hs.prototype.setUneditable=function(){},Hs.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function r(r,n,o,i){e.defaults[r]=n,o&&(t[r]=i?function(e,t,r){r!=ks&&o(e,t,r)}:o)}e.defineOption=r,e.Init=ks,r("value","",(function(e,t){return e.setValue(t)}),!0),r("mode",null,(function(e,t){e.doc.modeOption=t,Do(e)}),!0),r("indentUnit",2,Do,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,(function(e){No(e),Gr(e),un(e)}),!0),r("lineSeparator",null,(function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter((function(e){for(var o=0;;){var i=e.text.indexOf(t,o);if(-1==i)break;o=i+t.length,r.push(et(n,i))}n++}));for(var o=r.length-1;o>=0;o--)mi(e.doc,t,r[o],et(r[o].line,r[o].ch+t.length))}})),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=ks&&e.refresh()})),r("specialCharPlaceholder",Qt,(function(e){return e.refresh()}),!0),r("electricChars",!0),r("inputStyle",y?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),r("spellcheck",!1,(function(e,t){return e.getInputField().spellcheck=t}),!0),r("autocorrect",!1,(function(e,t){return e.getInputField().autocorrect=t}),!0),r("autocapitalize",!1,(function(e,t){return e.getInputField().autocapitalize=t}),!0),r("rtlMoveVisually",!w),r("wholeLineUpdateBefore",!0),r("theme","default",(function(e){xs(e),go(e)}),!0),r("keyMap","default",(function(e,t,r){var n=Yi(t),o=r!=ks&&Yi(r);o&&o.detach&&o.detach(e,n),n.attach&&n.attach(e,o||null)})),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,Cs,!0),r("gutters",[],(function(e,t){e.display.gutterSpecs=fo(t,e.options.lineNumbers),go(e)}),!0),r("fixedGutter",!0,(function(e,t){e.display.gutters.style.left=t?sn(e.display)+"px":"0",e.refresh()}),!0),r("coverGutterNextToScrollbar",!1,(function(e){return zn(e)}),!0),r("scrollbarStyle","native",(function(e){$n(e),zn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)}),!0),r("lineNumbers",!1,(function(e,t){e.display.gutterSpecs=fo(e.options.gutters,t),go(e)}),!0),r("firstLineNumber",1,go,!0),r("lineNumberFormatter",(function(e){return e}),go,!0),r("showCursorWhenSelecting",!1,gn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,(function(e,t){"nocursor"==t&&(Sn(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)})),r("screenReaderLabel",null,(function(e,t){t=""===t?null:t,e.display.input.screenReaderLabelChanged(t)})),r("disableInput",!1,(function(e,t){t||e.display.input.reset()}),!0),r("dragDrop",!0,Ss),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,gn,!0),r("singleCursorHeightPerLine",!0,gn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,No,!0),r("addModeClass",!1,No,!0),r("pollInterval",100),r("undoDepth",200,(function(e,t){return e.doc.history.undoDepth=t})),r("historyEventDelay",1250),r("viewportMargin",10,(function(e){return e.refresh()}),!0),r("maxHighlightLength",1e4,No,!0),r("moveInputWithCursor",!0,(function(e,t){t||e.display.input.resetPosition()})),r("tabindex",null,(function(e,t){return e.display.input.getField().tabIndex=t||""})),r("autofocus",null),r("direction","ltr",(function(e,t){return e.doc.setDirection(t)}),!0),r("phrases",null)}(Ps),function(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,o=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&eo(this,t[e])(this,r,o),fe(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Yi(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:to((function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");!function(e,t,r){for(var n=0,o=r(t);n<e.length&&r(e[n])<=o;)n++;e.splice(n,0,t)}(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},(function(e){return e.priority})),this.state.modeGen++,un(this)})),removeOverlay:to((function(e){for(var t=this.state.overlays,r=0;r<t.length;++r){var n=t[r].modeSpec;if(n==e||"string"==typeof e&&n.name==e)return t.splice(r,1),this.state.modeGen++,void un(this)}})),indentLine:to((function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Qe(this.doc,e)&&Os(this,e,t,r)})),indentSelection:to((function(e){for(var t=this.doc.sel.ranges,r=-1,n=0;n<t.length;n++){var o=t[n];if(o.empty())o.head.line>r&&(Os(this,o.head.line,e,!0),r=o.head.line,n==this.doc.sel.primIndex&&Dn(this));else{var i=o.from(),s=o.to(),a=Math.max(r,i.line);r=Math.min(this.lastLine(),s.line-(s.ch?0:1))+1;for(var c=a;c<r;++c)Os(this,c,e);var l=this.doc.sel.ranges;0==i.ch&&t.length==l.length&&l[n].from().ch>0&&Ko(this.doc,n,new _o(i,l[n].to()),U)}}})),getTokenAt:function(e,t){return vt(this,e,t)},getLineTokens:function(e,t){return vt(this,et(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,r=dt(this,Ve(this.doc,e.line)),n=0,o=(r.length-1)/2,i=e.ch;if(0==i)t=r[2];else for(;;){var s=n+o>>1;if((s?r[2*s-1]:0)>=i)o=s;else{if(!(r[2*s+1]<i)){t=r[2*s+2];break}n=s+1}}var a=t?t.indexOf("overlay "):-1;return a<0?t:0==a?null:t.slice(0,a-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!r.hasOwnProperty(t))return n;var o=r[t],i=this.getModeAt(e);if("string"==typeof i[t])o[i[t]]&&n.push(o[i[t]]);else if(i[t])for(var s=0;s<i[t].length;s++){var a=o[i[t][s]];a&&n.push(a)}else i.helperType&&o[i.helperType]?n.push(o[i.helperType]):o[i.name]&&n.push(o[i.name]);for(var c=0;c<o._global.length;c++){var l=o._global[c];l.pred(i,this)&&-1==B(n,l.val)&&n.push(l.val)}return n},getStateAfter:function(e,t){var r=this.doc;return ht(this,(e=st(r,null==e?r.first+r.size-1:e))+1,t).state},cursorCoords:function(e,t){var r=this.doc.sel.primary();return Vr(this,null==e?r.head:"object"==typeof e?at(this.doc,e):e?r.from():r.to(),t||"page")},charCoords:function(e,t){return Hr(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Xr(this,(e=$r(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=$r(this,{top:e,left:0},t||"page").top,Ke(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,o=!1;if("number"==typeof e){var i=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>i&&(e=i,o=!0),n=Ve(this.doc,e)}else n=e;return qr(this,n,{top:0,left:0},t||"page",r||o).top+(o?this.doc.height-qt(n):0)},defaultTextHeight:function(){return rn(this.display)},defaultCharWidth:function(){return nn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,o){var i,s,a,c=this.display,l=(e=Vr(this,at(this.doc,e))).bottom,p=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),c.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var u=Math.max(c.wrapper.clientHeight,this.doc.height),d=Math.max(c.sizer.clientWidth,c.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=u&&(l=e.bottom),p+t.offsetWidth>d&&(p=d-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==o?(p=c.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==o?p=0:"middle"==o&&(p=(c.sizer.clientWidth-t.offsetWidth)/2),t.style.left=p+"px"),r&&(i=this,s={left:p,top:l,right:p+t.offsetWidth,bottom:l+t.offsetHeight},null!=(a=On(i,s)).scrollTop&&Rn(i,a.scrollTop),null!=a.scrollLeft&&Ln(i,a.scrollLeft))},triggerOnKeyDown:to(ps),triggerOnKeyPress:to(ds),triggerOnKeyUp:us,triggerOnMouseDown:to(gs),execCommand:function(e){if(ts.hasOwnProperty(e))return ts[e].call(null,this)},triggerElectric:to((function(e){Is(this,e)})),findPosH:function(e,t,r,n){var o=1;t<0&&(o=-1,t=-t);for(var i=at(this.doc,e),s=0;s<t&&!(i=Fs(this.doc,i,o,r,n)).hitSide;++s);return i},moveH:to((function(e,t){var r=this;this.extendSelectionsBy((function(n){return r.display.shift||r.doc.extend||n.empty()?Fs(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()}),$)})),deleteH:to((function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):Ki(this,(function(r){var o=Fs(n,r.head,e,t,!1);return e<0?{from:o,to:r.head}:{from:r.head,to:o}}))})),findPosV:function(e,t,r,n){var o=1,i=n;t<0&&(o=-1,t=-t);for(var s=at(this.doc,e),a=0;a<t;++a){var c=Vr(this,s,"div");if(null==i?i=c.left:c.left=i,(s=Gs(this,c,o,r)).hitSide)break}return s},moveV:to((function(e,t){var r=this,n=this.doc,o=[],i=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy((function(s){if(i)return e<0?s.from():s.to();var a=Vr(r,s.head,"div");null!=s.goalColumn&&(a.left=s.goalColumn),o.push(a.left);var c=Gs(r,a,e,t);return"page"==t&&s==n.sel.primary()&&Tn(r,Hr(r,c,"div").top-a.top),c}),$),o.length)for(var s=0;s<n.sel.ranges.length;s++)n.sel.ranges[s].goalColumn=o[s]})),findWordAt:function(e){var t=Ve(this.doc,e.line).text,r=e.ch,n=e.ch;if(t){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&n!=t.length||!r?++n:--r;for(var i=t.charAt(r),s=ee(i,o)?function(e){return ee(e,o)}:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!ee(e)};r>0&&s(t.charAt(r-1));)--r;for(;n<t.length&&s(t.charAt(n));)++n}return new _o(et(e.line,r),et(e.line,n))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?j(this.display.cursorDiv,"CodeMirror-overwrite"):C(this.display.cursorDiv,"CodeMirror-overwrite"),fe(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==N()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:to((function(e,t){Nn(this,e,t)})),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Sr(this)-this.display.barHeight,width:e.scrollWidth-Sr(this)-this.display.barWidth,clientHeight:Pr(this),clientWidth:Cr(this)}},scrollIntoView:to((function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:et(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){jn(e),e.curOp.scrollToPos=t}(this,e):In(this,e.from,e.to,e.margin)})),setSize:to((function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&Fr(this);var o=this.display.viewFrom;this.doc.iter(o,this.display.viewTo,(function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){dn(r,o,"widget");break}++o})),this.curOp.forceUpdate=!0,fe(this,"refresh",this)})),operation:function(e){return Zn(this,e)},startOperation:function(){return Vn(this)},endOperation:function(){return Wn(this)},refresh:to((function(){var e=this.display.cachedTextHeight;un(this),this.curOp.forceUpdate=!0,Gr(this),Nn(this,this.doc.scrollLeft,this.doc.scrollTop),lo(this.display),(null==e||Math.abs(e-rn(this.display))>.5||this.options.lineWrapping)&&cn(this),fe(this,"refresh",this)})),swapDoc:to((function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Mo(this,e),Gr(this),this.display.input.reset(),Nn(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ar(this,"swapDoc",this,t),t})),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ve(e),e.registerHelper=function(t,n,o){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=o},e.registerGlobalHelper=function(t,n,o,i){e.registerHelper(t,n,i),r[t]._global.push({pred:o,val:i})}}(Ps);var Vs="iter insert remove copy getEditor constructor".split(" ");for(var Ws in Di.prototype)Di.prototype.hasOwnProperty(Ws)&&B(Vs,Ws)<0&&(Ps.prototype[Ws]=function(e){return function(){return e.apply(this.doc,arguments)}}(Di.prototype[Ws]));return ve(Di),Ps.inputStyles={textarea:Hs,contenteditable:Bs},Ps.defineMode=function(e){Ps.defaults.mode||"null"==e||(Ps.defaults.mode=e),Le.apply(this,arguments)},Ps.defineMIME=function(e,t){Me[e]=t},Ps.defineMode("null",(function(){return{token:function(e){return e.skipToEnd()}}})),Ps.defineMIME("text/plain","null"),Ps.defineExtension=function(e,t){Ps.prototype[e]=t},Ps.defineDocExtension=function(e,t){Di.prototype[e]=t},Ps.fromTextArea=function(e,t){if((t=t?L(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=N();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=a.getValue()}var o;if(e.form&&(ue(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var i=e.form;o=i.submit;try{var s=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=s}}catch(e){}}t.finishInit=function(r){r.save=n,r.getTextArea=function(){return e},r.toTextArea=function(){r.toTextArea=isNaN,n(),e.parentNode.removeChild(r.getWrapperElement()),e.style.display="",e.form&&(he(e.form,"submit",n),t.leaveSubmitMethodAlone||"function"!=typeof e.form.submit||(e.form.submit=o))}},e.style.display="none";var a=Ps((function(t){return e.parentNode.insertBefore(t,e.nextSibling)}),t);return a},function(e){e.off=he,e.on=ue,e.wheelEventPixels=xo,e.Doc=Di,e.splitLines=De,e.countColumn=F,e.findColumn=H,e.isWordChar=Z,e.Pass=z,e.signal=fe,e.Line=Vt,e.changeEnd=Po,e.scrollbarModel=qn,e.Pos=et,e.cmpPos=tt,e.modes=Re,e.mimeModes=Me,e.resolveMode=Fe,e.getMode=Ge,e.modeExtensions=Be,e.extendMode=ze,e.copyState=Ue,e.startState=$e,e.innerMode=qe,e.commands=ts,e.keyMap=qi,e.keyName=Xi,e.isModifierKey=Wi,e.lookupKey=Vi,e.normalizeKeyMap=Hi,e.StringStream=He,e.SharedTextMarker=Pi,e.TextMarker=Si,e.LineWidget=ki,e.e_preventDefault=be,e.e_stopPropagation=we,e.e_stop=ke,e.addClass=j,e.contains=D,e.rmClass=C,e.keyNames=Gi}(Ps),Ps.version="5.58.2",Ps}()},function(e,t,r){"use strict";r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return c})),r.d(t,"a",(function(){return l}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let n,o,i=/(url\()([^)]*)(\))/g,s=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function a(e,t){if(e&&s.test(e))return e;if("//"===e)return e;if(void 0===n){n=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",n="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),n)try{return new URL(e,t).href}catch(t){return e}return o||(o=document.implementation.createHTMLDocument("temp"),o.base=o.createElement("base"),o.head.appendChild(o.base),o.anchor=o.createElement("a"),o.body.appendChild(o.anchor)),o.base.href=t,o.anchor.href=e,o.anchor.href||e}function c(e,t){return e.replace(i,(function(e,r,n,o){return r+"'"+a(n.replace(/["']/g,""),t)+"'"+o}))}function l(e){return e.substring(0,e.lastIndexOf("/")+1)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,o="/"===s.charAt(0))}return(o?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!o).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===o(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),i=n(r.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var l=[];for(c=a;c<o.length;c++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(o=!1,n=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(6))},function(e,t,r){var n={};n.fbpGraph=r(505),n.Ease=r(509),"undefined"!=typeof window&&void 0===window.Ease&&(window.Ease=n.Ease);var o={contextPortSize:36,zbpBig:1.2,zbpNormal:.4,zbpSmall:.01,config:{nodeSize:72,nodeWidth:72,nodeRadius:8,nodeHeight:72,autoSizeNode:!0,maxPortCount:9,nodeHeightIncrement:12,focusAnimationDuration:1500}};for(var i in o)n[i]=o[i];"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);var s={TheGraph:n};n.factories=r(71),n.merge=r(72),r(512).register(s),r(517).register(s),r(518).register(s),r(519).register(s),r(520).register(s),r(521).register(s),r(522).register(s),r(523).register(s),r(524).register(s),r(525).register(s),n.menu=r(526),n.Menu=n.menu.Menu,n.factories.menu=n.menu.factories,n.config.menu=n.menu.config,n.config.menu.iconRect.rx=n.config.nodeRadius,n.config.menu.iconRect.ry=n.config.nodeRadius,n.modalbg=r(162),n.ModalBG=n.modalbg.ModalBG,n.config.ModalBG=n.config.factories,n.factories.ModalBG=n.modalbg.factories,n.FONT_AWESOME=r(164);var a=r(73);n.findMinMax=a.findMinMax,n.findNodeFit=a.findNodeFit,n.findFit=a.findFit,n.tooltip=r(527),n.Tooltip=n.tooltip.Tooltip,n.config.tooltip=n.tooltip.config,n.factories.tooltip=n.tooltip.factories,n.mixins=r(74),n.arcs=r(98),n.TextBG=r(163),n.SVGImage=r(161),n.thumb=r(165),n.nav=r(528),n.autolayout=r(529),n.library=r(530),n.clipboard=r(166),n.editor=r(531),n.render=r(532),n.render.register(s),e.exports=n},function(e,t){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));if(3!==arguments.length)return n[t];n[t]=r}},function(e,t,r){"use strict";r.r(t),r.d(t,"v1",(function(){return l})),r.d(t,"v3",(function(){return w})),r.d(t,"v4",(function(){return x.a})),r.d(t,"v5",(function(){return _})),r.d(t,"NIL",(function(){return S})),r.d(t,"version",(function(){return C})),r.d(t,"validate",(function(){return p.a})),r.d(t,"stringify",(function(){return s.a})),r.d(t,"parse",(function(){return u}));var n,o,i=r(75),s=r(34),a=0,c=0;var l=function(e,t,r){var l=t&&r||0,p=t||new Array(16),u=(e=e||{}).node||n,d=void 0!==e.clockseq?e.clockseq:o;if(null==u||null==d){var h=e.random||(e.rng||i.a)();null==u&&(u=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=o=16383&(h[6]<<8|h[7]))}var f=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1,g=f-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(d=d+1&16383),(g<0||f>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=f,c=m,o=d;var y=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;p[l++]=y>>>24&255,p[l++]=y>>>16&255,p[l++]=y>>>8&255,p[l++]=255&y;var v=f/4294967296*1e4&268435455;p[l++]=v>>>8&255,p[l++]=255&v,p[l++]=v>>>24&15|16,p[l++]=v>>>16&255,p[l++]=d>>>8|128,p[l++]=255&d;for(var b=0;b<6;++b)p[l+b]=u[b];return t||Object(s.a)(p)},p=r(35);var u=function(e){if(!Object(p.a)(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};var d=function(e,t,r){function n(e,n,o,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=u(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var c=0;c<16;++c)o[i+c]=a[c];return o}return Object(s.a)(a)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function h(e){return 14+(e+64>>>9<<4)+1}function f(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function m(e,t,r,n,o,i){return f((s=f(f(t,e),f(n,i)))<<(a=o)|s>>>32-a,r);var s,a}function g(e,t,r,n,o,i,s){return m(t&r|~t&n,e,t,o,i,s)}function y(e,t,r,n,o,i,s){return m(t&n|r&~n,e,t,o,i,s)}function v(e,t,r,n,o,i,s){return m(t^r^n,e,t,o,i,s)}function b(e,t,r,n,o,i,s){return m(r^(t|~n),e,t,o,i,s)}var w=d("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var o=e[n>>5]>>>n%32&255,i=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[h(t)-1]=t;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<e.length;s+=16){var a=r,c=n,l=o,p=i;r=g(r,n,o,i,e[s],7,-680876936),i=g(i,r,n,o,e[s+1],12,-389564586),o=g(o,i,r,n,e[s+2],17,606105819),n=g(n,o,i,r,e[s+3],22,-1044525330),r=g(r,n,o,i,e[s+4],7,-176418897),i=g(i,r,n,o,e[s+5],12,1200080426),o=g(o,i,r,n,e[s+6],17,-1473231341),n=g(n,o,i,r,e[s+7],22,-45705983),r=g(r,n,o,i,e[s+8],7,1770035416),i=g(i,r,n,o,e[s+9],12,-1958414417),o=g(o,i,r,n,e[s+10],17,-42063),n=g(n,o,i,r,e[s+11],22,-1990404162),r=g(r,n,o,i,e[s+12],7,1804603682),i=g(i,r,n,o,e[s+13],12,-40341101),o=g(o,i,r,n,e[s+14],17,-1502002290),n=g(n,o,i,r,e[s+15],22,1236535329),r=y(r,n,o,i,e[s+1],5,-165796510),i=y(i,r,n,o,e[s+6],9,-1069501632),o=y(o,i,r,n,e[s+11],14,643717713),n=y(n,o,i,r,e[s],20,-373897302),r=y(r,n,o,i,e[s+5],5,-701558691),i=y(i,r,n,o,e[s+10],9,38016083),o=y(o,i,r,n,e[s+15],14,-660478335),n=y(n,o,i,r,e[s+4],20,-405537848),r=y(r,n,o,i,e[s+9],5,568446438),i=y(i,r,n,o,e[s+14],9,-1019803690),o=y(o,i,r,n,e[s+3],14,-187363961),n=y(n,o,i,r,e[s+8],20,1163531501),r=y(r,n,o,i,e[s+13],5,-1444681467),i=y(i,r,n,o,e[s+2],9,-51403784),o=y(o,i,r,n,e[s+7],14,1735328473),n=y(n,o,i,r,e[s+12],20,-1926607734),r=v(r,n,o,i,e[s+5],4,-378558),i=v(i,r,n,o,e[s+8],11,-2022574463),o=v(o,i,r,n,e[s+11],16,1839030562),n=v(n,o,i,r,e[s+14],23,-35309556),r=v(r,n,o,i,e[s+1],4,-1530992060),i=v(i,r,n,o,e[s+4],11,1272893353),o=v(o,i,r,n,e[s+7],16,-155497632),n=v(n,o,i,r,e[s+10],23,-1094730640),r=v(r,n,o,i,e[s+13],4,681279174),i=v(i,r,n,o,e[s],11,-358537222),o=v(o,i,r,n,e[s+3],16,-722521979),n=v(n,o,i,r,e[s+6],23,76029189),r=v(r,n,o,i,e[s+9],4,-640364487),i=v(i,r,n,o,e[s+12],11,-421815835),o=v(o,i,r,n,e[s+15],16,530742520),n=v(n,o,i,r,e[s+2],23,-995338651),r=b(r,n,o,i,e[s],6,-198630844),i=b(i,r,n,o,e[s+7],10,1126891415),o=b(o,i,r,n,e[s+14],15,-1416354905),n=b(n,o,i,r,e[s+5],21,-57434055),r=b(r,n,o,i,e[s+12],6,1700485571),i=b(i,r,n,o,e[s+3],10,-1894986606),o=b(o,i,r,n,e[s+10],15,-1051523),n=b(n,o,i,r,e[s+1],21,-2054922799),r=b(r,n,o,i,e[s+8],6,1873313359),i=b(i,r,n,o,e[s+15],10,-30611744),o=b(o,i,r,n,e[s+6],15,-1560198380),n=b(n,o,i,r,e[s+13],21,1309151649),r=b(r,n,o,i,e[s+4],6,-145523070),i=b(i,r,n,o,e[s+11],10,-1120210379),o=b(o,i,r,n,e[s+2],15,718787259),n=b(n,o,i,r,e[s+9],21,-343485551),r=f(r,a),n=f(n,c),o=f(o,l),i=f(i,p)}return[r,n,o,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(h(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))})),x=r(106);function k(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function E(e,t){return e<<t|e>>>32-t}var _=d("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s),c=0;c<s;++c){for(var l=new Uint32Array(16),p=0;p<16;++p)l[p]=e[64*c+4*p]<<24|e[64*c+4*p+1]<<16|e[64*c+4*p+2]<<8|e[64*c+4*p+3];a[c]=l}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<s;++u){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=a[u][h];for(var f=16;f<80;++f)d[f]=E(d[f-3]^d[f-8]^d[f-14]^d[f-16],1);for(var m=r[0],g=r[1],y=r[2],v=r[3],b=r[4],w=0;w<80;++w){var x=Math.floor(w/20),_=E(m,5)+k(x,g,y,v)+b+t[x]+d[w]>>>0;b=v,v=y,y=E(g,30)>>>0,g=m,m=_}r[0]=r[0]+m>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]})),S="00000000-0000-0000-0000-000000000000";var C=function(e){if(!Object(p.a)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return h})),r.d(t,"a",(function(){return f}));r(9);var n=r(3),o=r(10),i=r(53),s=r(22),a=r(54),c=r(39),l=r(55),p=r(77);const u=Object(o.a)(e=>{const t=Object(p.a)(e);function r(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof o?t:null}function n(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const r=e.properties;r&&(t=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(e){const t={};for(let r in e){const n=e[r];t[r]="function"==typeof n?{type:n}:n}return t}(r))}e.__ownProperties=t}return e.__ownProperties}class o extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){Object(l.b)(this.prototype);const e=this._properties;this.__observedAttributes=e?Object.keys(e).map(e=>this.prototype._addPropertyToAttributeMap(e)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=r(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=n(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=r(this);this.__properties=Object.assign({},e&&e._properties,n(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){Object(l.a)(),this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return o});var d=r(1);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */const h=window.ShadyCSS&&window.ShadyCSS.cssBuild,f=Object(o.a)(e=>{const t=u(Object(c.a)(e));return class extends t{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){t._finalizeClass.call(this);const e=((r=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",r))||(r.__ownObservers=r.hasOwnProperty(JSCompiler_renameProperty("observers",r))?r.observers:null),r.__ownObservers);var r;e&&this.createObservers(e,this._properties),this._prepareTemplate()}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?(console.error("template getter must return HTMLTemplateElement"),e=null):n.e||(e=e.cloneNode(!0))),this.prototype._template=e}static createProperties(e){for(let i in e)t=this.prototype,r=i,n=e[i],o=e,n.computed&&(n.readOnly=!0),n.computed&&(t._hasReadOnlyEffect(r)?console.warn(`Cannot redefine computed property '${r}'.`):t._createComputedProperty(r,n.computed,o)),n.readOnly&&!t._hasReadOnlyEffect(r)?t._createReadOnlyProperty(r,!n.computed):!1===n.readOnly&&t._hasReadOnlyEffect(r)&&console.warn(`Cannot make readOnly property '${r}' non-readOnly.`),n.reflectToAttribute&&!t._hasReflectEffect(r)?t._createReflectedProperty(r):!1===n.reflectToAttribute&&t._hasReflectEffect(r)&&console.warn(`Cannot make reflected property '${r}' non-reflected.`),n.notify&&!t._hasNotifyEffect(r)?t._createNotifyingProperty(r):!1===n.notify&&t._hasNotifyEffect(r)&&console.warn(`Cannot make notify property '${r}' non-notify.`),n.observer&&t._createPropertyObserver(r,n.observer,o[n.observer]),t._addPropertyToAttributeMap(r);var t,r,n,o}static createObservers(e,t){const r=this.prototype;for(let n=0;n<e.length;n++)r._createMethodObserver(e[n],t)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const e=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==e?e:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(e){let t=null;if(e&&(!n.m||n.a)&&(t=a.a.import(e,"template"),n.m&&!t))throw new Error("strictTemplatePolicy: expecting dom-module or null template for "+e);return t}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(e){this._template=e}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=Object(s.a)(e.url);else{const e=a.a.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=n.k,this.importPath=this.constructor.importPath;let e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let r in t){let n=t[r];"value"in n&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[r]=n)}}return e.__propertyDefaults}(this.constructor);if(e)for(let t in e){let r=e[t];if(this._canApplyPropertyDefault(t)){let e="function"==typeof r.value?r.value.call(this):r.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}_canApplyPropertyDefault(e){return!this.hasOwnProperty(e)}static _processStyleText(e,t){return Object(s.b)(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const r=this.importPath;!function(e,t,r,o){if(!h){const n=t.content.querySelectorAll("style"),s=Object(i.c)(t),a=Object(i.b)(r),c=t.content.firstElementChild;for(let r=0;r<a.length;r++){let n=a[r];n.textContent=e._processStyleText(n.textContent,o),t.content.insertBefore(n,c)}let l=0;for(let t=0;t<s.length;t++){let r=s[t],i=n[l];i!==r?(r=r.cloneNode(!0),i.parentNode.insertBefore(r,i)):l++,r.textContent=e._processStyleText(r.textContent,o)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,r),n.q&&h&&n.n){const r=t.content.querySelectorAll("style");if(r){let t="";Array.from(r).forEach(e=>{t+=e.textContent,e.parentNode.removeChild(e)}),e._styleSheet=new CSSStyleSheet,e._styleSheet.replaceSync(t)}}}(this,t,e,r?Object(s.c)(r):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){const t=Object(d.a)(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e),this.constructor._styleSheet&&(t.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),n.p&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=Object(s.c)(this.importPath)),Object(s.c)(e,t)}static _parseTemplateContent(e,r,n){return r.dynamicFns=r.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,r,n)}static _addTemplatePropertyEffect(e,r,o){return!n.g||r in this._properties||o.info.part.signature&&o.info.part.signature.static||o.info.part.hostProp||e.nestedTemplate||console.warn(`Property '${r}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,e,r,o)}}})},function(e,t){t.getComponentHash=(e,t)=>t.runtime?["runtime",t.runtime,"component",e]:["project",t.id,"component",e],t.getGraphHash=(e,t)=>t.runtime?["runtime",t.runtime,e]:["project",t.id,e],t.hashToString=e=>"#"+e.map(e=>encodeURIComponent(e)).join("/")},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(178),o=r(179),i=r(180);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return l(this,e,t,r)}function l(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|h(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(p(t),e=a(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return B(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return P(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var p=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===p?0:i-p)){if(-1===p&&(p=i),i-p+1===c)return p*s}else-1!==p&&(i-=i-p),p=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var u=!0,d=0;d<c;d++)if(l(e,i+d)!==l(t,d)){u=!1;break}if(u)return i}return-1}function b(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function w(e,t,r,n){return U(B(t,e.length-r),e,r,n)}function x(e,t,r,n){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function k(e,t,r,n){return x(e,t,r,n)}function E(e,t,r,n){return U(z(t),e,r,n)}function _(e,t,r,n){return U(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,c,l=e[o],p=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u<=r)switch(u){case 1:l<128&&(p=l);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&l)<<6|63&i)>127&&(p=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(p=c)}null===p?(p=65533,u=1):p>65535&&(p-=65536,n.push(p>>>10&1023|55296),p=56320|1023&p),n.push(p),o+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return l(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return p(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return u(null,e)},c.allocUnsafeSlow=function(e){return u(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),l=this.slice(n,o),p=e.slice(t,r),u=0;u<a;++u)if(l[u]!==p[u]){i=l[u],s=p[u];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return k(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=G(e[i]);return o}function T(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function D(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function R(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,i){return i||R(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,i){return i||R(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||D(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||N(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);N(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);N(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=c.isBuffer(e)?e:B(new c(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function U(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(23))},function(e,t){t.findMainGraph=e=>{if(!e.graphs.length)return null;if(e.main){if(e.graphs.find(t=>t.properties.id===e.main))return e.main}const t=e.graphs.find(e=>"main"===e.name||!!e.properties.main);return t?t.properties.id:e.graphs[0].properties.id},t.findGraph=(e,t)=>t.graphs?t.graphs.find(t=>t.name===e||t.properties.id===e):null,t.findComponent=(e,t)=>t.components?t.components.find(t=>t.name===e):null,t.findByComponent=(e,r)=>{let[n,o]=e.split("/");o||(o=n,n=void 0);const i=t.findGraph(o,r);if(i)return["graph",i];const s=t.findComponent(o,r);return s?["component",s]:["runtime",e]},t.findProject=(e,t)=>t?t.find(t=>t.id===e):null,t.getProjectHash=(e,r)=>{if(e.runtime)return e.main?void r(null,["runtime",e.runtime,e.main]):void r(null,["runtime",e.runtime]);if(!e.graphs.length)return e.components.length?void r(null,["project",e.id,"component",e.components[0].name]):void setTimeout(()=>e.graphs.length||e.components.length?t.getProjectHash(e,r):r(new Error(`Project ${e.id} has no graphs or components`)),100);const n=e.main||e.graphs[0].properties.id;n?r(null,["project",e.id,n]):r(new Error("Unable find a main graph for project "+e.id))},t.isReadOnly=e=>!e.project||(!(!e.graph||-1!==e.project.graphs.indexOf(e.graph))||!(!e.component||-1!==e.project.components.indexOf(e.component))),t.guessLanguage=(e,t="javascript")=>-1!==e.indexOf("topic: ")&&-1!==e.indexOf("cases:")?"yaml":t},function(e,t,r){(function(t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var r,n,o;try{r=Map}catch(e){r=function(){}}try{n=Set}catch(e){n=function(){}}try{o=Promise}catch(e){o=function(){}}function i(s,c,l,p,u){"object"==typeof c&&(l=c.depth,p=c.prototype,u=c.includeNonEnumerable,c=c.circular);var d=[],h=[],f=void 0!==t;return void 0===c&&(c=!0),void 0===l&&(l=1/0),function s(l,m){if(null===l)return null;if(0===m)return l;var g,y;if("object"!=typeof l)return l;if(e(l,r))g=new r;else if(e(l,n))g=new n;else if(e(l,o))g=new o((function(e,t){l.then((function(t){e(s(t,m-1))}),(function(e){t(s(e,m-1))}))}));else if(i.__isArray(l))g=[];else if(i.__isRegExp(l))g=new RegExp(l.source,a(l)),l.lastIndex&&(g.lastIndex=l.lastIndex);else if(i.__isDate(l))g=new Date(l.getTime());else{if(f&&t.isBuffer(l))return g=t.allocUnsafe?t.allocUnsafe(l.length):new t(l.length),l.copy(g),g;e(l,Error)?g=Object.create(l):void 0===p?(y=Object.getPrototypeOf(l),g=Object.create(y)):(g=Object.create(p),y=p)}if(c){var v=d.indexOf(l);if(-1!=v)return h[v];d.push(l),h.push(g)}for(var b in e(l,r)&&l.forEach((function(e,t){var r=s(t,m-1),n=s(e,m-1);g.set(r,n)})),e(l,n)&&l.forEach((function(e){var t=s(e,m-1);g.add(t)})),l){var w;y&&(w=Object.getOwnPropertyDescriptor(y,b)),w&&null==w.set||(g[b]=s(l[b],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var k=x[b];(!(_=Object.getOwnPropertyDescriptor(l,k))||_.enumerable||u)&&(g[k]=s(l[k],m-1),_.enumerable||Object.defineProperty(g,k,{enumerable:!1}))}}if(u){var E=Object.getOwnPropertyNames(l);for(b=0;b<E.length;b++){var _,S=E[b];(_=Object.getOwnPropertyDescriptor(l,S))&&_.enumerable||(g[S]=s(l[S],m-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(s,l)}function s(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=s,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===s(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===s(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===s(e)},i.__getRegExpFlags=a,i}();e.exports&&(e.exports=r)}).call(this,r(30).Buffer)},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}e.exports=function(){var e=function(){function e(){var t,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(t in n(this,e),this.type=o,this.data=i,this._isIP=!0,this.scope=null,this.owner=null,this.clonable=!1,this.index=null,this.schema=null,this.datatype="all",s)r=s[t],this[t]=r}return i(e,null,[{key:"isIP",value:function(e){return e&&"object"===r(e)&&!0===e._isIP}}]),i(e,[{key:"clone",value:function(){var t,n,o;for(n in t=new e(this.type),this,this)o=this[n],-1===["owner"].indexOf(n)&&null!==o&&("object"===r(o)?t[n]=JSON.parse(JSON.stringify(o)):t[n]=o);return t}},{key:"move",value:function(e){this.owner=e}},{key:"drop",value:function(){var e,t;for(e in this,t=[],this)this[e],t.push(delete this[e]);return t}}]),e}();return e.types=["data","openBracket","closeBracket"],e}.call(this)},function(e,t,r){"use strict";for(var n=r(35),o=[],i=0;i<256;++i)o.push((i+256).toString(16).substr(1));t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase();if(!Object(n.a)(r))throw TypeError("Stringified UUID is invalid");return r}},function(e,t,r){"use strict";var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;t.a=function(e){return"string"==typeof e&&n.test(e)}},function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return a}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const n={},o=/-[a-z]/g,i=/([A-Z])/g;function s(e){return n[e]||(n[e]=e.indexOf("-")<0?e:e.replace(o,e=>e[1].toUpperCase()))}function a(e){return n[e]||(n[e]=e.replace(i,"-$1").toLowerCase())}},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=[];
/*!
 * Chai version
 */t.version="4.2.0",
/*!
 * Assertion Error
 */
t.AssertionError=r(137);
/*!
 * Utils for plugins (not exported)
 */
var o=r(340);t.use=function(e){return~n.indexOf(e)||(e(t,o),n.push(e)),t},
/*!
 * Utility Functions
 */
t.util=o;
/*!
 * Configuration
 */
var i=r(46);t.config=i;
/*!
 * Primary `Assertion` prototype
 */
var s=r(357);t.use(s);
/*!
 * Core Assertions
 */
var a=r(358);t.use(a);
/*!
 * Expect interface
 */
var c=r(359);t.use(c);
/*!
 * Should interface
 */
var l=r(360);t.use(l);
/*!
 * Assert interface
 */
var p=r(361);t.use(p)},function(e,t){
/*!
 * Chai - transferFlags utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t,r){var n=e.__flags||(e.__flags=Object.create(null));for(var o in t.__flags||(t.__flags=Object.create(null)),r=3!==arguments.length||r,n)(r||"object"!==o&&"ssfi"!==o&&"lockSsfi"!==o&&"message"!=o)&&(t.__flags[o]=n[o])}},function(e,t,r){"use strict";r.d(t,"a",(function(){return K}));r(9);var n=r(1),o=r(10),i=r(4),s=r(36),a=r(76);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const c={"dom-if":!0,"dom-repeat":!0};let l=!1,p=!1;function u(e){(function(){if(!l){l=!0;const e=document.createElement("textarea");e.placeholder="a",p=e.placeholder===e.textContent}return p})()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function d(e){let t=e.getAttribute("is");if(t&&c[t]){let r=e;for(r.removeAttribute("is"),e=r.ownerDocument.createElement(t),r.parentNode.replaceChild(e,r),e.appendChild(r);r.attributes.length;)e.setAttribute(r.attributes[0].name,r.attributes[0].value),r.removeAttribute(r.attributes[0].name)}return e}function h(e,t){let r=t.parentInfo&&h(e,t.parentInfo);if(!r)return e;for(let e=r.firstChild,n=0;e;e=e.nextSibling)if(t.parentIndex===n++)return e}function f(e,t,r,n){n.id&&(t[n.id]=r)}function m(e,t,r){if(r.events&&r.events.length)for(let n,o=0,i=r.events;o<i.length&&(n=i[o]);o++)e._addMethodEventListenerToNode(t,n.name,n.value,e)}function g(e,t,r,n){r.templateInfo&&(t._templateInfo=r.templateInfo,t._parentTemplateInfo=n)}const y=Object(o.a)(e=>class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let r=e._templateInfo={};r.nodeInfoList=[],r.nestedTemplate=Boolean(t),r.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,r,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,r){return this._parseTemplateNode(e.content,t,r)}static _parseTemplateNode(e,t,r){let n=!1,o=e;return"template"!=o.localName||o.hasAttribute("preserve-content")?"slot"===o.localName&&(t.hasInsertionPoint=!0):n=this._parseTemplateNestedTemplate(o,t,r)||n,u(o),o.firstChild&&this._parseTemplateChildNodes(o,t,r),o.hasAttributes&&o.hasAttributes()&&(n=this._parseTemplateNodeAttributes(o,t,r)||n),n||r.noted}static _parseTemplateChildNodes(e,t,r){if("script"!==e.localName&&"style"!==e.localName)for(let n,o=e.firstChild,i=0;o;o=n){if("template"==o.localName&&(o=d(o)),n=o.nextSibling,o.nodeType===Node.TEXT_NODE){let r=n;for(;r&&r.nodeType===Node.TEXT_NODE;)o.textContent+=r.textContent,n=r.nextSibling,e.removeChild(r),r=n;if(t.stripWhiteSpace&&!o.textContent.trim()){e.removeChild(o);continue}}let s={parentIndex:i,parentInfo:r};this._parseTemplateNode(o,t,s)&&(s.infoIndex=t.nodeInfoList.push(s)-1),o.parentNode&&i++}}static _parseTemplateNestedTemplate(e,t,r){let n=e,o=this._parseTemplate(n,t);return(o.content=n.content.ownerDocument.createDocumentFragment()).appendChild(n.content),r.templateInfo=o,!0}static _parseTemplateNodeAttributes(e,t,r){let n=!1,o=Array.from(e.attributes);for(let i,s=o.length-1;i=o[s];s--)n=this._parseTemplateNodeAttribute(e,t,r,i.name,i.value)||n;return n}static _parseTemplateNodeAttribute(e,t,r,n,o){return"on-"===n.slice(0,3)?(e.removeAttribute(n),r.events=r.events||[],r.events.push({name:n.slice(3),value:o}),!0):"id"===n&&(r.id=o,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e,t){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let r=(t=t||this.constructor._parseTemplate(e)).nodeInfoList,n=t.content||e.content,o=document.importNode(n,!0);o.__noInsertionPoint=!t.hasInsertionPoint;let i=o.nodeList=new Array(r.length);o.$={};for(let e,n=0,s=r.length;n<s&&(e=r[n]);n++){let r=i[n]=h(o,e);f(0,o.$,r,e),g(0,r,e,t),m(this,r,e)}return o=o,o}_addMethodEventListenerToNode(e,t,r,n){let o=function(e,t,r){return e=e._methodHost||e,function(t){e[r]?e[r](t,t.detail):console.warn("listener method `"+r+"` not defined")}}(n=n||e,0,r);return this._addEventListenerToNode(e,t,o),o}_addEventListenerToNode(e,t,r){e.addEventListener(t,r)}_removeEventListenerFromNode(e,t,r){e.removeEventListener(t,r)}});var v=r(3);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let b=0;const w=[],x={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},k=/[A-Z]/;function E(e,t,r){let n=e[t];if(n){if(!e.hasOwnProperty(t)&&(n=e[t]=Object.create(e[t]),r))for(let e in n){let t=n[e],r=n[e]=Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[e]}}else n=e[t]={};return n}function _(e,t,r,n,o,s){if(t){let a=!1;const c=b++;for(let l in r){let p=t[o?Object(i.g)(l):l];if(p)for(let t,i=0,u=p.length;i<u&&(t=p[i]);i++)t.info&&t.info.lastRun===c||o&&!C(l,t.trigger)||(t.info&&(t.info.lastRun=c),t.fn(e,l,r,n,t.info,o,s),a=!0)}return a}return!1}function S(e,t,r,n,o,s,a,c){let l=!1,p=t[a?Object(i.g)(n):n];if(p)for(let t,i=0,u=p.length;i<u&&(t=p[i]);i++)t.info&&t.info.lastRun===r||a&&!C(n,t.trigger)||(t.info&&(t.info.lastRun=r),t.fn(e,n,o,s,t.info,a,c),l=!0);return l}function C(e,t){if(t){let r=t.name;return r==e||!(!t.structured||!Object(i.b)(r,e))||!(!t.wildcard||!Object(i.c)(r,e))}return!0}function P(e,t,r,n,o){let i="string"==typeof o.method?e[o.method]:o.method,s=o.property;i?i.call(e,e.__data[s],n[s]):o.dynamicFn||console.warn("observer method `"+o.method+"` not defined")}function A(e,t,r){let n=Object(i.g)(t);if(n!==t){return O(e,Object(s.a)(n)+"-changed",r[t],t),!0}return!1}function O(e,t,r,o){let i={value:r,queueProperty:!0};o&&(i.path=o),Object(n.a)(e).dispatchEvent(new CustomEvent(t,{detail:i}))}function T(e,t,r,n,o,s){let a=(s?Object(i.g)(t):t)!=t?t:null,c=a?Object(i.a)(e,a):e.__data[t];a&&void 0===c&&(c=r[t]),O(e,o.eventName,c,a)}function D(e,t,r,n,o){let i=e.__data[t];v.l&&(i=Object(v.l)(i,o.attrName,"attribute",e)),e._propertyToAttribute(t,o.attrName,i)}function N(e,t,r,n){let o=e[x.COMPUTE];if(o)if(v.h){b++;const i=function(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const r=e[x.COMPUTE];let n,{counts:o,ready:i,total:s}=function(e){const t=e.__computeInfo,r={},n=e[x.COMPUTE],o=[];let i=0;for(let e in t){const n=t[e];i+=r[e]=n.args.filter(e=>!e.literal).length+(n.dynamicFn?1:0)}for(let e in n)t[e]||o.push(e);return{counts:r,ready:o,total:i}}(e);for(;n=i.shift();){t.set(n,t.size);const e=r[n];e&&e.forEach(e=>{const t=e.info.methodInfo;--s,0==--o[t]&&i.push(t)})}if(0!==s){const t=e;console.warn(`Computed graph for ${t.localName} incomplete; circular?`)}e.constructor.__orderedComputedDeps=t}return t}(e),s=[];for(let e in t)I(e,o,s,i,n);let a;for(;a=s.shift();)R(e,"",t,r,a)&&I(a.methodInfo,o,s,i,n);Object.assign(r,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let i=t;for(;_(e,o,i,r,n);)Object.assign(r,e.__dataOld),Object.assign(t,e.__dataPending),i=e.__dataPending,e.__dataPending=null}}const j=(e,t,r)=>{let n=0,o=t.length-1,i=-1;for(;n<=o;){const s=n+o>>1,a=r.get(t[s].methodInfo)-r.get(e.methodInfo);if(a<0)n=s+1;else{if(!(a>0)){i=s;break}o=s-1}}i<0&&(i=o+1),t.splice(i,0,e)},I=(e,t,r,n,o)=>{const s=t[o?Object(i.g)(e):e];if(s)for(let t=0;t<s.length;t++){const i=s[t];i.info.lastRun===b||o&&!C(e,i.trigger)||(i.info.lastRun=b,j(i.info,r,n))}};function R(e,t,r,n,o){let i=U(e,t,r,n,o);if(i===w)return!1;let s=o.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[s]?e._setPendingProperty(s,i,!0):(e[s]=i,!1)}function M(e,t,r,n,o,i,a){r.bindings=r.bindings||[];let c={kind:n,target:o,parts:i,literal:a,isCompound:1!==i.length};if(r.bindings.push(c),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(c)){let{event:e,negate:t}=c.parts[0];c.listenerEvent=e||Object(s.a)(o)+"-changed",c.listenerNegate=t}let l=t.nodeInfoList.length;for(let r=0;r<c.parts.length;r++){let n=c.parts[r];n.compoundIndex=r,L(e,t,c,n,l)}}function L(e,t,r,n,o){if(!n.literal)if("attribute"===r.kind&&"-"===r.target[0])console.warn("Cannot set attribute "+r.target+' because "-" is not a valid attribute starting character');else{let i=n.dependencies,s={index:o,binding:r,part:n,evaluator:e};for(let r=0;r<i.length;r++){let n=i[r];"string"==typeof n&&(n=W(n),n.wildcard=!0),e._addTemplatePropertyEffect(t,n.rootProperty,{fn:F,info:s,trigger:n})}}}function F(e,t,r,n,o,s,a){let c=a[o.index],l=o.binding,p=o.part;if(s&&p.source&&t.length>p.source.length&&"property"==l.kind&&!l.isCompound&&c.__isPropertyEffectsClient&&c.__dataHasAccessor&&c.__dataHasAccessor[l.target]){let n=r[t];t=Object(i.i)(p.source,l.target,t),c._setPendingPropertyOrPath(t,n,!1,!0)&&e._enqueueClient(c)}else{let i=o.evaluator._evaluateBinding(e,p,t,r,n,s);i!==w&&function(e,t,r,n,o){o=function(e,t,r,n){if(r.isCompound){let o=e.__dataCompoundStorage[r.target];o[n.compoundIndex]=t,t=o.join("")}"attribute"!==r.kind&&("textContent"!==r.target&&("value"!==r.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t));return t}(t,o,r,n),v.l&&(o=Object(v.l)(o,r.target,r.kind,t));if("attribute"==r.kind)e._valueToNodeAttribute(t,o,r.target);else{let n=r.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[n]?t[x.READ_ONLY]&&t[x.READ_ONLY][n]||t._setPendingProperty(n,o)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,n,o)}}(e,c,l,p,i)}}function G(e,t){if(t.isCompound){let r=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),o=t.parts,i=new Array(o.length);for(let e=0;e<o.length;e++)i[e]=o[e].literal;let s=t.target;r[s]=i,t.literal&&"property"==t.kind&&("className"===s&&(e=Object(n.a)(e)),e[s]=t.literal)}}function B(e,t,r){if(r.listenerEvent){let n=r.parts[0];e.addEventListener(r.listenerEvent,(function(e){!function(e,t,r,n,o){let s,a=e.detail,c=a&&a.path;c?(n=Object(i.i)(r,n,c),s=a&&a.value):s=e.currentTarget[r],s=o?!s:s,t[x.READ_ONLY]&&t[x.READ_ONLY][n]||!t._setPendingPropertyOrPath(n,s,!0,Boolean(c))||a&&a.queueProperty||t._invalidateProperties()}(e,t,r.target,n.source,n.negate)}))}}function z(e,t,r,n,o,i){i=t.static||i&&("object"!=typeof i||i[t.methodName]);let s={methodName:t.methodName,args:t.args,methodInfo:o,dynamicFn:i};for(let o,i=0;i<t.args.length&&(o=t.args[i]);i++)o.literal||e._addPropertyEffect(o.rootProperty,r,{fn:n,info:s,trigger:o});return i&&e._addPropertyEffect(t.methodName,r,{fn:n,info:s}),s}function U(e,t,r,n,o){let i=e._methodHost||e,s=i[o.methodName];if(s){let n=e._marshalArgs(o.args,t,r);return n===w?w:s.apply(i,n)}o.dynamicFn||console.warn("method `"+o.methodName+"` not defined")}const q=[],$=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function H(e){let t="";for(let r=0;r<e.length;r++){t+=e[r].literal||""}return t}function V(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:q};if(t[2].trim()){return function(e,t){return t.args=e.map((function(e){let r=W(e);return r.literal||(t.static=!1),r}),this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function W(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),r={name:t,value:"",literal:!1},n=t[0];switch("-"===n&&(n=t[1]),n>="0"&&n<="9"&&(n="#"),n){case"'":case'"':r.value=t.slice(1,-1),r.literal=!0;break;case"#":r.value=Number(t),r.literal=!0}return r.literal||(r.rootProperty=Object(i.g)(t),r.structured=Object(i.d)(t),r.structured&&(r.wildcard=".*"==t.slice(-2),r.wildcard&&(r.name=t.slice(0,-2)))),r}function J(e,t,r){let n=Object(i.a)(e,r);return void 0===n&&(n=t[r]),n}function X(e,t,r,n){const o={indexSplices:n};v.f&&!e._overrideLegacyUndefined&&(t.splices=o),e.notifyPath(r+".splices",o),e.notifyPath(r+".length",t.length),v.f&&!e._overrideLegacyUndefined&&(o.indexSplices=[])}function Y(e,t,r,n,o,i){X(e,t,r,[{index:n,addedCount:o,removed:i,object:t,type:"splice"}])}const K=Object(o.a)(e=>{const t=y(Object(a.a)(e));return class extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return x}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Q.length){let e=Q[Q.length-1];e._enqueueClient(this),this.__dataHost=e}}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[x.READ_ONLY];for(let r in e)t&&t[r]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[r]=this.__dataPending[r]=e[r])}_addPropertyEffect(e,t,r){this._createPropertyAccessor(e,t==x.READ_ONLY);let n=E(this,t,!0)[e];n||(n=this[t][e]=[]),n.push(r)}_removePropertyEffect(e,t,r){let n=E(this,t,!0)[e],o=n.indexOf(r);o>=0&&n.splice(o,1)}_hasPropertyEffect(e,t){let r=this[t];return Boolean(r&&r[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,x.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,x.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,x.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,x.COMPUTE)}_setPendingPropertyOrPath(e,t,r,n){if(n||Object(i.g)(Array.isArray(e)?e[0]:e)!==e){if(!n){let r=Object(i.a)(this,e);if(!(e=Object(i.h)(this,e,t))||!super._shouldPropertyChange(e,t,r))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,r))return function(e,t,r){let n=e.__dataLinkedPaths;if(n){let o;for(let s in n){let a=n[s];Object(i.c)(s,t)?(o=Object(i.i)(s,a,t),e._setPendingPropertyOrPath(o,r,!0,!0)):Object(i.c)(a,t)&&(o=Object(i.i)(a,s,t),e._setPendingPropertyOrPath(o,r,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,r);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,r){r===e[t]&&"object"!=typeof r||("className"===t&&(e=Object(n.a)(e)),e[t]=r)}_setPendingProperty(e,t,r){let n=this.__dataHasPaths&&Object(i.d)(e),o=n?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,o[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),n?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(n||this[x.NOTIFY]&&this[x.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=r),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let r=e[t];r.__dataEnabled?r.__dataPending&&r._flushProperties():r._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let r in e)!t&&this[x.READ_ONLY]&&this[x.READ_ONLY][r]||this._setPendingPropertyOrPath(r,e[r],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,t,r){let n,o=this.__dataHasPaths;this.__dataHasPaths=!1,N(this,t,r,o),n=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(t,r,o),this._flushClients(),_(this,this[x.REFLECT],t,r,o),_(this,this[x.OBSERVE],t,r,o),n&&function(e,t,r,n,o){let i,s,a=e[x.NOTIFY],c=b++;for(let s in t)t[s]&&(a&&S(e,a,c,s,r,n,o)||o&&A(e,s,r))&&(i=!0);i&&(s=e.__dataHost)&&s._invalidateProperties&&s._invalidateProperties()}(this,n,t,r,o),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,r){this[x.PROPAGATE]&&_(this,this[x.PROPAGATE],e,t,r),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,e,t,r)}_runEffectsForTemplate(e,t,r,n){const o=(t,n)=>{_(this,e.propertyEffects,t,r,n,e.nodeList);for(let o=e.firstChild;o;o=o.nextSibling)this._runEffectsForTemplate(o,t,r,n)};e.runEffects?e.runEffects(o,t,n):o(t,n)}linkPaths(e,t){e=Object(i.f)(e),t=Object(i.f)(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Object(i.f)(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let r={path:""};X(this,Object(i.a)(this,e,r),r.path,t)}get(e,t){return Object(i.a)(t||this,e)}set(e,t,r){r?Object(i.h)(r,e,t):this[x.READ_ONLY]&&this[x.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let r={path:""},n=Object(i.a)(this,e,r),o=n.length,s=n.push(...t);return t.length&&Y(this,n,r.path,o,t.length,[]),s}pop(e){let t={path:""},r=Object(i.a)(this,e,t),n=Boolean(r.length),o=r.pop();return n&&Y(this,r,t.path,r.length,0,[o]),o}splice(e,t,r,...n){let o,s={path:""},a=Object(i.a)(this,e,s);return t<0?t=a.length-Math.floor(-t):t&&(t=Math.floor(t)),o=2===arguments.length?a.splice(t):a.splice(t,r,...n),(n.length||o.length)&&Y(this,a,s.path,t,n.length,o),o}shift(e){let t={path:""},r=Object(i.a)(this,e,t),n=Boolean(r.length),o=r.shift();return n&&Y(this,r,t.path,0,0,[o]),o}unshift(e,...t){let r={path:""},n=Object(i.a)(this,e,r),o=n.unshift(...t);return t.length&&Y(this,n,r.path,0,t.length,[]),o}notifyPath(e,t){let r;if(1==arguments.length){let n={path:""};t=Object(i.a)(this,e,n),r=n.path}else r=Array.isArray(e)?Object(i.f)(e):e;this._setPendingPropertyOrPath(r,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var r;this._addPropertyEffect(e,x.READ_ONLY),t&&(this["_set"+(r=e,r[0].toUpperCase()+r.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,r){let n={property:e,method:t,dynamicFn:Boolean(r)};this._addPropertyEffect(e,x.OBSERVE,{fn:P,info:n,trigger:{name:e}}),r&&this._addPropertyEffect(t,x.OBSERVE,{fn:P,info:n,trigger:{name:t}})}_createMethodObserver(e,t){let r=V(e);if(!r)throw new Error("Malformed observer expression '"+e+"'");z(this,r,x.OBSERVE,U,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,x.NOTIFY,{fn:T,info:{eventName:Object(s.a)(e)+"-changed",property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,x.REFLECT,{fn:D,info:{attrName:t}})}_createComputedProperty(e,t,r){let n=V(t);if(!n)throw new Error("Malformed computed expression '"+t+"'");const o=z(this,n,x.COMPUTE,R,e,r);E(this,"__computeInfo")[e]=o}_marshalArgs(e,t,r){const n=this.__data,o=[];for(let s=0,a=e.length;s<a;s++){let{name:a,structured:c,wildcard:l,value:p,literal:u}=e[s];if(!u)if(l){const e=Object(i.c)(a,t),o=J(n,r,e?t:a);p={path:e?t:a,value:o,base:e?Object(i.a)(n,a):o}}else p=c?J(n,r,a):n[a];if(v.f&&!this._overrideLegacyUndefined&&void 0===p&&e.length>1)return w;o[s]=p}return o}static addPropertyEffect(e,t,r){this.prototype._addPropertyEffect(e,t,r)}static createPropertyObserver(e,t,r){this.prototype._createPropertyObserver(e,t,r)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,r){this.prototype._createComputedProperty(e,t,r)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let r=this.constructor._parseTemplate(e),n=this.__preBoundTemplateInfo==r;if(!n)for(let e in r.propertyEffects)this._createPropertyAccessor(e);if(t)if(r=Object.create(r),r.wasPreBound=n,this.__templateInfo){const t=e._parentTemplateInfo||this.__templateInfo,n=t.lastChild;r.parent=t,t.lastChild=r,r.previousSibling=n,n?n.nextSibling=r:t.firstChild=r}else this.__templateInfo=r;else this.__preBoundTemplateInfo=r;return r}static _addTemplatePropertyEffect(e,t,r){(e.hostProps=e.hostProps||{})[t]=!0;let n=e.propertyEffects=e.propertyEffects||{};(n[t]=n[t]||[]).push(r)}_stampTemplate(e,t){t=t||this._bindTemplate(e,!0),Q.push(this);let r=super._stampTemplate(e,t);if(Q.pop(),t.nodeList=r.nodeList,!t.wasPreBound){let e=t.childNodes=[];for(let t=r.firstChild;t;t=t.nextSibling)e.push(t)}return r.templateInfo=t,function(e,t){let{nodeList:r,nodeInfoList:n}=t;if(n.length)for(let t=0;t<n.length;t++){let o=n[t],i=r[t],s=o.bindings;if(s)for(let t=0;t<s.length;t++){let r=s[t];G(i,r),B(i,e,r)}i.__dataHost=e}}(this,t),this.__dataClientsReady&&(this._runEffectsForTemplate(t,this.__data,null,!1),this._flushClients()),r}_removeBoundDom(e){const t=e.templateInfo,{previousSibling:r,nextSibling:o,parent:i}=t;r?r.nextSibling=o:i&&(i.firstChild=o),o?o.previousSibling=r:i&&(i.lastChild=r),t.nextSibling=t.previousSibling=null;let s=t.childNodes;for(let e=0;e<s.length;e++){let t=s[e];Object(n.a)(Object(n.a)(t).parentNode).removeChild(t)}}static _parseTemplateNode(e,r,n){let o=t._parseTemplateNode.call(this,e,r,n);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,r);t&&(e.textContent=H(t)||" ",M(this,r,n,"text","textContent",t),o=!0)}return o}static _parseTemplateNodeAttribute(e,r,n,o,i){let a=this._parseBindings(i,r);if(a){let t=o,i="property";k.test(o)?i="attribute":"$"==o[o.length-1]&&(o=o.slice(0,-1),i="attribute");let c=H(a);return c&&"attribute"==i&&("class"==o&&e.hasAttribute("class")&&(c+=" "+e.getAttribute(o)),e.setAttribute(o,c)),"attribute"==i&&"disable-upgrade$"==t&&e.setAttribute(o,""),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===i&&(o=Object(s.b)(o)),M(this,r,n,i,o,a,c),!0}return t._parseTemplateNodeAttribute.call(this,e,r,n,o,i)}static _parseTemplateNestedTemplate(e,r,n){let o=t._parseTemplateNestedTemplate.call(this,e,r,n);const i=e.parentNode,s=n.templateInfo,a="dom-if"===i.localName,c="dom-repeat"===i.localName;v.j&&(a||c)&&(i.removeChild(e),(n=n.parentInfo).templateInfo=s,n.noted=!0,o=!1);let l=s.hostProps;if(v.c&&a)l&&(r.hostProps=Object.assign(r.hostProps||{},l),v.j||(n.parentInfo.noted=!0));else{let e="{";for(let t in l){M(this,r,n,"property","_host_"+t,[{mode:e,source:t,dependencies:[t],hostProp:!0}])}}return o}static _parseBindings(e,t){let r,n=[],o=0;for(;null!==(r=$.exec(e));){r.index>o&&n.push({literal:e.slice(o,r.index)});let i=r[1][0],s=Boolean(r[2]),a=r[3].trim(),c=!1,l="",p=-1;"{"==i&&(p=a.indexOf("::"))>0&&(l=a.substring(p+2),a=a.substring(0,p),c=!0);let u=V(a),d=[];if(u){let{args:e,methodName:r}=u;for(let t=0;t<e.length;t++){let r=e[t];r.literal||d.push(r)}let n=t.dynamicFns;(n&&n[r]||u.static)&&(d.push(r),u.dynamicFn=!0)}else d.push(a);n.push({source:a,mode:i,negate:s,customEvent:c,signature:u,dependencies:d,event:l}),o=$.lastIndex}if(o&&o<e.length){let t=e.substring(o);t&&n.push({literal:t})}return n.length?n:null}static _evaluateBinding(e,t,r,n,o,s){let a;return a=t.signature?U(e,r,n,0,t.signature):r!=t.source?Object(i.a)(e,t.source):s&&Object(i.d)(r)?Object(i.a)(e,r):e.__data[r],t.negate&&(a=!a),a}}}),Q=[]},function(e,t,r){"use strict";var n={};function o(e,t,r){r||(r=Error);var o=function(e){var r,n;function o(r,n,o){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,o))||this}return n=e,(r=o).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,o}(r);o.prototype.name=r.name,o.prototype.code=e,n[e]=o}function i(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}o("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),o("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,o,s,a;if("string"==typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(n," ").concat(i(t,"type"));else{var c=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(n," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=n},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){"use strict";(function(t){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=l;var o=r(116),i=r(120);r(41)(l,o);for(var s=n(i.prototype),a=0;a<s.length;a++){var c=s[a];l.prototype[c]||(l.prototype[c]=i.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",p)))}function p(){this._writableState.ended||t.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,r(6))},function(e,t,r){"use strict";function n(e,t,r,n){var o=n?" !== ":" === ",i=n?" || ":" && ",s=n?"!":"",a=n?"":"!";switch(e){case"null":return t+o+"null";case"array":return s+"Array.isArray("+t+")";case"object":return"("+s+t+i+"typeof "+t+o+'"object"'+i+a+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+o+'"number"'+i+a+"("+t+" % 1)"+i+t+o+t+(r?i+s+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+o+'"'+e+'"'+(r?i+s+"isFinite("+t+")":"")+")";default:return"typeof "+t+o+'"'+e+'"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var o="",s=i(e);for(var a in s.array&&s.object&&(o=s.null?"(":"(!"+t+" || ",o+="typeof "+t+' !== "object")',delete s.null,delete s.array,delete s.object),s.number&&delete s.integer,s)o+=(o?" && ":"")+n(a,t,r,!0);return o}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var i=t[n];(o[i]||"array"===e&&"array"===i)&&(r[r.length]=i)}if(r.length)return r}else{if(o[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:l,equal:r(85),ucs2length:r(268),varOccurences:function(e,t){t+="[^0-9]";var r=e.match(new RegExp(t,"g"));return r?r.length:0},varReplace:function(e,t,r){return t+="([^0-9])",r=r.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),r+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if("boolean"==typeof e)return!e&&"not"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:p,getPathExpr:function(e,t,r,n){return h(e,r?"'/' + "+t+(n?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):n?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,r){var n=p(r?"/"+f(t):c(t));return h(e,n)},getData:function(e,t,r){var n,o,i,s;if(""===e)return"rootData";if("/"==e[0]){if(!u.test(e))throw new Error("Invalid JSON-pointer: "+e);o=e,i="rootData"}else{if(!(s=e.match(d)))throw new Error("Invalid JSON-pointer: "+e);if(n=+s[1],"#"==(o=s[2])){if(n>=t)throw new Error("Cannot access property/index "+n+" levels up, current level is "+t);return r[t-n]}if(n>t)throw new Error("Cannot access data "+n+" levels up, current level is "+t);if(i="data"+(t-n||""),!o)return i}for(var a=i,l=o.split("/"),p=0;p<l.length;p++){var h=l[p];h&&(i+=c(m(h)),a+=" && "+i)}return a},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var o=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(a,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function p(e){return"'"+l(e)+"'"}var u=/^\/(?:[^~]|~0|~1)*$/,d=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function f(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,r){"use strict";function n(e){return null==e}e.exports.isNothing=n,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:n(e)?[]:[e]},e.exports.repeat=function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var r,n,o,i;if(t)for(r=0,n=(i=Object.keys(t)).length;r<n;r+=1)e[o=i[r]]=t[o];return e}},function(e,t,r){"use strict";var n=r(44),o=r(50),i=r(17);function s(e,t,r){var n=[];return e.include.forEach((function(e){r=s(e,t,r)})),e[t].forEach((function(e){r.forEach((function(t,r){t.tag===e.tag&&t.kind===e.kind&&n.push(r)})),r.push(e)})),r.filter((function(e,t){return-1===n.indexOf(t)}))}function a(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new o("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{}};function n(e){r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(this.compiledImplicit,this.compiledExplicit)}a.DEFAULT=null,a.create=function(){var e,t;switch(arguments.length){case 1:e=a.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new o("Wrong number of arguments for Schema.create function")}if(e=n.toArray(e),t=n.toArray(t),!e.every((function(e){return e instanceof a})))throw new o("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof i})))throw new o("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new a({include:e,explicit:t})},e.exports=a},function(e,t){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"]}},function(e,t,r){var n=r(182),o=r(184);e.exports={SyntaxError:n.SyntaxError,parse:n.parse,serialize:o}},function(e,t,r){"use strict";var n=r(196),o=r(198);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),p=["'"].concat(l),u=["%","/","?",";","#"].concat(p),d=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(60);function b(e,t,r){if(e&&o.isObject(e)&&e instanceof i)return e;var n=new i;return n.parse(e,t,r),n}i.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),a=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(a);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(a);if(b=b.trim(),!r&&1===e.split("#").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(b);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,b=b.substr(x.length)}if(r||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===b.substr(0,2);!E||x&&g[x]||(b=b.substr(2),this.slashes=!0)}if(!g[x]&&(E||x&&!y[x])){for(var _,S,C=-1,P=0;P<d.length;P++){-1!==(A=b.indexOf(d[P]))&&(-1===C||A<C)&&(C=A)}-1!==(S=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(_=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(_)),C=-1;for(P=0;P<u.length;P++){var A;-1!==(A=b.indexOf(u[P]))&&(-1===C||A<C)&&(C=A)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var T=this.hostname.split(/\./),D=(P=0,T.length);P<D;P++){var N=T[P];if(N&&!N.match(h)){for(var j="",I=0,R=N.length;I<R;I++)N.charCodeAt(I)>127?j+="x":j+=N[I];if(!j.match(h)){var M=T.slice(0,P),L=T.slice(P+1),F=N.match(f);F&&(M.push(F[1]),L.unshift(F[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var G=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+G,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[k])for(P=0,D=p.length;P<D;P++){var z=p[P];if(-1!==b.indexOf(z)){var U=encodeURIComponent(z);U===z&&(U=escape(z)),b=b.split(z).join(U)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var $=b.indexOf("?");if(-1!==$?(this.search=b.substr($),this.query=b.substr($+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,$)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var H=this.search||"";this.path=G+H}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+n},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var r=new i,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var p=c[l];"protocol"!==p&&(r[p]=e[p])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var h=u[d];r[h]=e[h]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||g[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=w||b||r.host&&e.pathname,k=x,E=r.pathname&&r.pathname.split("/")||[],_=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===E[0]?E[0]=r.host:E.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),x=x&&(""===f[0]||""===E[0])),w)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,E=f;else if(f.length)E||(E=[]),E.pop(),E=E.concat(f),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(_)r.hostname=r.host=E.shift(),(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift());return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!E.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=E.slice(-1)[0],C=(r.host||e.host||E.length>1)&&("."===S||".."===S)||""===S,P=0,A=E.length;A>=0;A--)"."===(S=E[A])?E.splice(A,1):".."===S?(E.splice(A,1),P++):P&&(E.splice(A,1),P--);if(!x&&!k)for(;P--;P)E.unshift("..");!x||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),C&&"/"!==E.join("/").substr(-1)&&E.push("");var O,T=""===E[0]||E[0]&&"/"===E[0].charAt(0);_&&(r.hostname=r.host=T?"":E.length?E.shift():"",(O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift()));return(x=x||r.host&&E.length)&&!T&&E.unshift(""),E.length?r.pathname=E.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){const n=r(61);class o extends n.EventEmitter{constructor(e){super(),this.definition=e,this.definition.capabilities||(this.definition.capabilities=[]),this.graph=null}setMain(e){this.graph=e}getType(){return this.definition.protocol}getAddress(){return this.definition.address}canDo(e){return-1!==this.definition.capabilities.indexOf(e)}isConnected(){return!1}connect(){}disconnect(){}reconnect(){return this.disconnect(),this.connect()}start(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("start",{graph:this.graph.name||this.graph.properties.id})}stop(){if(!this.graph)throw new Error("No graph defined for execution");return this.sendNetwork("stop",{graph:this.graph.name||this.graph.properties.id})}setParentElement(){}getElement(){}recvMessage(e){switch(this.emit("message",e),e.protocol){case"runtime":return this.recvRuntime(e.command,e.payload);case"graph":return this.recvGraph(e.command,e.payload);case"network":return this.recvNetwork(e.command,e.payload);case"component":return this.recvComponent(e.command,e.payload);case"trace":return this.recvTrace(e.command,e.payload);default:return null}}recvRuntime(e,t){"runtime"===e&&(Object.keys(t).forEach(e=>{const r=t[e];this.definition[e]=r}),this.emit("capabilities",t.capabilities||[])),this.emit("runtime",{command:e,payload:t})}recvComponent(e,t){switch(e){case"error":return void this.emit("network",{command:e,payload:t});default:this.emit("component",{command:e,payload:t})}}recvGraph(e,t){this.emit("graph",{command:e,payload:t})}recvNetwork(e,t){switch(e){case"started":return void this.emit("execution",{running:null==t||null==t.running||t.running,started:null==t||!t.started||t.started});case"stopped":return void this.emit("execution",{running:null!=t&&null!=t.running&&t.running,started:!(null==t||!t.started)&&t.started});case"status":return void this.emit("execution",{running:t.running,started:t.started});case"icon":return void this.emit("icon",t);default:this.emit("network",{command:e,payload:t})}}recvTrace(e,t){this.emit("trace",{command:e,payload:t})}sendRuntime(e,t={}){return this.send("runtime",e,{...t,secret:this.definition.secret})}sendGraph(e,t={}){return this.send("graph",e,{...t,secret:this.definition.secret})}sendNetwork(e,t={}){return this.send("network",e,{...t,secret:this.definition.secret})}sendComponent(e,t={}){return this.send("component",e,{...t,secret:this.definition.secret})}sendTrace(e,t={}){return this.send("trace",e,{...t,secret:this.definition.secret})}send(){}}e.exports=o},function(e,t,r){"use strict";function n(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=n},function(e,t,r){"use strict";var n=r(45);e.exports=new n({include:[r(134)],implicit:[r(328),r(329)],explicit:[r(330),r(331),r(332),r(333)]})},function(e,t,r){e.exports=r(441)},function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return d}));var n=r(54),o=r(22);function i(e){return n.a.import(e)}function s(e){let t=e.body?e.body:e;const r=Object(o.b)(t.textContent,e.baseURI),n=document.createElement("style");return n.textContent=r,n}function a(e){const t=e.trim().split(/\s+/),r=[];for(let e=0;e<t.length;e++)r.push(...c(t[e]));return r}function c(e){const t=i(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){const e=[];e.push(...u(t));const r=t.querySelector("template");r&&e.push(...l(r,t.assetpath)),t._styles=e}return t._styles}function l(e,t){if(!e._styles){const r=[],n=e.content.querySelectorAll("style");for(let e=0;e<n.length;e++){let i=n[e],s=i.getAttribute("include");s&&r.push(...a(s).filter((function(e,t,r){return r.indexOf(e)===t}))),t&&(i.textContent=Object(o.b)(i.textContent,t)),r.push(i)}e._styles=r}return e._styles}function p(e){let t=i(e);return t?u(t):[]}function u(e){const t=[],r=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<r.length;e++){let n=r[e];if(n.import){const e=n.import,r=n.hasAttribute("shady-unscoped");if(r&&!e._unscopedStyle){const t=s(e);t.setAttribute("shady-unscoped",""),e._unscopedStyle=t}else e._style||(e._style=s(e));t.push(r?e._unscopedStyle:e._style)}}return t}function d(e){let t=e.trim().split(/\s+/),r="";for(let e=0;e<t.length;e++)r+=h(t[e]);return r}function h(e){let t=i(e);if(t&&void 0===t._cssText){let e=f(t),r=t.querySelector("template");r&&(e+=function(e,t){let r="";const n=l(e,t);for(let e=0;e<n.length;e++){let t=n[e];t.parentNode&&t.parentNode.removeChild(t),r+=t.textContent}return r}(r,t.assetpath)),t._cssText=e||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function f(e){let t="",r=u(e);for(let e=0;e<r.length;e++)t+=r[e].textContent;return t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(9);var n=r(22),o=r(3);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let i={},s={};function a(e,t){i[e]=s[e.toLowerCase()]=t}function c(e){return i[e]||s[e.toLowerCase()]}class l extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let r=c(e);return r&&t?r.querySelector(t):r}return null}attributeChangedCallback(e,t,r,n){t!==r&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=Object(n.c)(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=Object(n.a)(t)}return this.__assetpath}register(e){if(e=e||this.id){if(o.m&&void 0!==c(e))throw a(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,a(e,this),(t=this).querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}var t}}l.prototype.modules=i,customElements.define("dom-module",l)},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));function n(){0}const o=[];function i(e){o.push(e)}},function(e,t,r){t.graph=r(177),t.Graph=t.graph.Graph,t.journal=r(185),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,d,h;u=r(11).EventEmitter,d=r(33),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,e);var t=c(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),(e=t.call(this)).metadata=n,e.brackets=[],e.connected=!1,e.dataDelegate=null,e.debug=!1,e.emitEvent=e.regularEmitEvent,e}return s(r,[{key:"regularEmitEvent",value:function(e,t){return this.emit(e,t)}},{key:"debugEmitEvent",value:function(e,t){var r;try{return this.emit(e,t)}catch(e){if((r=e).id&&r.metadata&&r.error){if(0===this.listeners("error").length)throw r.error;return void this.emit("error",r)}if(0===this.listeners("error").length)throw r;return this.emit("error",{id:this.to.process.id,error:r,metadata:this.metadata})}}}]),s(r,[{key:"connect",value:function(){if(!this.connected)return this.connected=!0,this.emitEvent("connect",null)}},{key:"disconnect",value:function(){if(this.connected)return this.connected=!1,this.emitEvent("disconnect",null)}},{key:"isConnected",value:function(){return this.connected}},{key:"send",value:function(e){return void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.handleSocketEvent("data",e)}},{key:"post",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e&&"function"==typeof this.dataDelegate&&(e=this.dataDelegate()),this.isConnected()||0!==this.brackets.length||this.connect(),this.handleSocketEvent("ip",e,!1),t&&this.isConnected()&&0===this.brackets.length)return this.disconnect()}},{key:"beginGroup",value:function(e){return this.handleSocketEvent("begingroup",e)}},{key:"endGroup",value:function(){return this.handleSocketEvent("endgroup")}},{key:"setDataDelegate",value:function(e){if("function"!=typeof e)throw Error("A data delegate must be a function.");return this.dataDelegate=e}},{key:"setDebug",value:function(e){return this.debug=e,this.emitEvent=this.debug?this.debugEmitEvent:this.regularEmitEvent}},{key:"getId",value:function(){var e,t;return e=function(e){return"".concat(e.process.id,"() ").concat(e.port.toUpperCase())},t=function(e){return"".concat(e.port.toUpperCase()," ").concat(e.process.id,"()")},this.from||this.to?this.from&&!this.to?"".concat(e(this.from)," -> ANON"):this.from?"".concat(e(this.from)," -> ").concat(t(this.to)):"DATA -> ".concat(t(this.to)):"UNDEFINED"}},{key:"legacyToIp",value:function(e,t){if(d.isIP(t))return t;switch(e){case"begingroup":return new d("openBracket",t);case"endgroup":return new d("closeBracket");case"data":return new d("data",t);default:return null}}},{key:"ipToLegacy",value:function(e){switch(e.type){case"openBracket":return{event:"begingroup",payload:e.data};case"data":return{event:"data",payload:e.data};case"closeBracket":return{event:"endgroup",payload:e.data}}}},{key:"handleSocketEvent",value:function(e,t){var r,n,o,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r=(n="ip"===e&&d.isIP(t))?t:this.legacyToIp(e,t)){if(!this.isConnected()&&i&&0===this.brackets.length&&this.connect(),"begingroup"===e&&this.brackets.push(t),n&&"openBracket"===r.type&&this.brackets.push(r.data),"endgroup"===e){if(0===this.brackets.length)return;r.data=this.brackets.pop(),t=r.data}if(n&&"closeBracket"===t.type){if(0===this.brackets.length)return;this.brackets.pop()}if(this.emitEvent("ip",r),r&&r.type)return n&&(e=(o=this.ipToLegacy(r)).event,t=o.payload),"connect"===e&&(this.connected=!0),"disconnect"===e&&(this.connected=!1),this.emitEvent(e,t)}}}]),r}(u),t.InternalSocket=h,t.createSocket=function(){return new h}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(6))},function(e,t,r){e.exports=r(192)},function(e,t,r){"use strict";t.decode=t.parse=r(199),t.encode=t.stringify=r(200)},function(e,t,r){(function(t){const{EventEmitter:n}=r(11),o=()=>!(void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node"));e.exports={isBrowser:o,EventEmitter:n,WebSocket:o()?window.WebSocket:r(238).w3cwebsocket}}).call(this,r(6))},function(e,t,r){(function(e){const n=r(87);t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.randomString=function(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0,o=e,i=o>=0;i?n<o:n>o;i?n+=1:n-=1){const e=Math.floor(Math.random()*r.length);t+=r.charAt(e)}return t},t.asyncSeries=function(e,t,r){const n=e.slice(0),o=[];!function e(){if(0===n.length)return void r(null,o);const i=n.shift();t(i,(t,n)=>{t?r(t):(o.push(n),e())})}()},t.isArray=Array.isArray||(e=>"[object Array]"==={}.toString.call(e)),t.startsWith=(e,t)=>0===e.indexOf(t);const o=function(e){return t=>new n((r,n)=>setTimeout(n.bind(null,t),e))};t.retryUntil=function(e,t,r=500,i=5){let s=n.reject(new Error("retry starter"));for(let n=0,a=i,c=a>=0;c?n<=a:n>=a;c?n+=1:n-=1)s=s.catch(e).then(t).catch(o(r));return s}}).call(this,r(6))},function(e,t,r){"use strict";var n=r(45);e.exports=n.DEFAULT=new n({include:[r(51)],explicit:[r(334),r(335),r(336)]})},function(e,t,r){var n=r(46);
/*!
 * Chai - isProxyEnabled helper
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(){return n.useProxy&&"undefined"!=typeof Proxy&&"undefined"!=typeof Reflect}},function(e,t){var r=Object.getOwnPropertyDescriptor((function(){}),"length");
/*!
 * Chai - addLengthGuard utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */e.exports=function(e,t,n){return r.configurable?(Object.defineProperty(e,"length",{get:function(){if(n)throw Error("Invalid Chai property: "+t+'.length. Due to a compatibility issue, "length" cannot directly follow "'+t+'". Use "'+t+'.lengthOf" instead.');throw Error("Invalid Chai property: "+t+'.length. See docs for proper usage of "'+t+'".')}}),e):e}},function(e,t,r){var n=r(46),o=r(26),i=r(141),s=r(64),a=["__flags","__methods","_obj","assert"];e.exports=function(e,t){return s()?new Proxy(e,{get:function e(r,s){if("string"==typeof s&&-1===n.proxyExcludedKeys.indexOf(s)&&!Reflect.has(r,s)){if(t)throw Error("Invalid Chai property: "+t+"."+s+'. See docs for proper usage of "'+t+'".');var c=null,l=4;throw i(r).forEach((function(e){if(!Object.prototype.hasOwnProperty(e)&&-1===a.indexOf(e)){var t=function(e,t,r){if(Math.abs(e.length-t.length)>=r)return r;for(var n=[],o=0;o<=e.length;o++)n[o]=Array(t.length+1).fill(0),n[o][0]=o;for(var i=0;i<t.length;i++)n[0][i]=i;for(o=1;o<=e.length;o++){var s=e.charCodeAt(o-1);for(i=1;i<=t.length;i++)Math.abs(o-i)>=r?n[o][i]=r:n[o][i]=Math.min(n[o-1][i]+1,n[o][i-1]+1,n[o-1][i-1]+(s===t.charCodeAt(i-1)?0:1))}return n[e.length][t.length]}(s,e,l);t<l&&(c=e,l=t)}})),null!==c?Error("Invalid Chai property: "+s+'. Did you mean "'+c+'"?'):Error("Invalid Chai property: "+s)}return-1!==a.indexOf(s)||o(r,"lockSsfi")||o(r,"ssfi",e),Reflect.get(r,s)}}):e}},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var i,s={};function a(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),p(n,e,n.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function l(e,t){return e}function p(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return y(o)||(o=p(e,o,n)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),k(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(r);if(0===s.length){if(E(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(k(r))return u(r)}var l,w="",_=!1,S=["{","}"];(h(r)&&(_=!0,S=["[","]"]),E(r))&&(w=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(w=" "+RegExp.prototype.toString.call(r)),x(r)&&(w=" "+Date.prototype.toUTCString.call(r)),k(r)&&(w=" "+u(r)),0!==s.length||_&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=_?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)A(t,String(s))?i.push(d(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,r,n,a,s):s.map((function(t){return d(e,r,n,a,t,_)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,w,S)):S[0]+w+S[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),A(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===_(e)}function k(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function E(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(v(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else s[r]=function(){};return s[r]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=x,t.isError=k,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(433);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=r(434),t._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(O&&e[O]){var t;if("function"!=typeof(t=e[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),O&&Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=O,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(T,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(6))},function(e,t,r){"use strict";(function(n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":o(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(468)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(6))},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function s(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,c=s(e),l=1;l<arguments.length;l++){for(var p in r=Object(arguments[l]))o.call(r,p)&&(c[p]=r[p]);if(n){a=n(r);for(var u=0;u<a.length;u++)i.call(r,a[u])&&(c[a[u]]=r[a[u]])}}return c}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r(9);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class n{constructor(e){this.value=e.toString()}toString(){return this.value}}function o(e){if(e instanceof n)return e.value;throw new Error("non-literal value passed to Polymer's htmlLiteral function: "+e)}const i=function(e,...t){const r=document.createElement("template");return r.innerHTML=t.reduce((t,r,i)=>t+function(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof n)return o(e);throw new Error("non-template value passed to Polymer's html function: "+e)}(r)+e[i+1],e[0]),r}},function(e,t,r){var n=r(5),o=r(161);t.createGroup=function(e,t){var r=["g",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)},t.createRect=function(e){return n.createElement("rect",e)},t.createText=function(e){return n.createElement("text",e)},t.createCircle=function(e){return n.createElement("circle",e)},t.createPath=function(e){return n.createElement("path",e)},t.createPolygon=function(e){return n.createElement("polygon",e)},t.createImg=function(e){return o(e)},t.createCanvas=function(e){return n.createElement("canvas",e)},t.createSvg=function(e,t){var r=["svg",e];return Array.isArray(t)&&(r=r.concat(t)),n.createElement.apply(n,r)}},function(e,t){e.exports=function(e,t,r){if(Array.isArray(e)||Array.isArray(t)||"object"!=typeof e||"object"!=typeof t)return t;for(var n in r=r||!1,e)"function"==typeof e[n]||t[n]&&!r||(t[n]=e[n]);return t}},function(e,t){var r=function(e,t){var r,n;if(void 0===t&&(t=e.nodes.map((function(e){return e.id})),r=e.inports,n=e.outports),!(t.length<1)){for(var o,i,s=1/0,a=1/0,c=-1/0,l=-1/0,p=t.length,u=0;u<p;u++){var d=t[u],h=e.getNode(d);if(h&&h.metadata){h.metadata.x<s&&(s=h.metadata.x),h.metadata.y<a&&(a=h.metadata.y);var f=h.metadata.x+h.metadata.width,m=h.metadata.y+h.metadata.height;f>c&&(c=f),m>l&&(l=m)}}if(r)for(p=(o=Object.keys(r)).length,u=0;u<p;u++)(i=r[o[u]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>l&&(l=i.metadata.y));if(n)for(p=(o=Object.keys(n)).length,u=0;u<p;u++)(i=n[o[u]]).metadata&&(i.metadata.x<s&&(s=i.metadata.x),i.metadata.y<a&&(a=i.metadata.y),i.metadata.x>c&&(c=i.metadata.x),i.metadata.y>l&&(l=i.metadata.y));return isFinite(s)&&isFinite(a)&&isFinite(c)&&isFinite(l)?{minX:s,minY:a,maxX:c,maxY:l}:null}};e.exports={findMinMax:r,findNodeFit:function(e,t,r,n){var o,i,s,a=e.metadata.x-n,c=e.metadata.y-n,l=e.metadata.x+2*n-a,p=e.metadata.y+2*n-c,u=t/l,d=r/p;return u<d?(i=0-a*(o=u),s=0-c*o+(r-p*o)/2):(i=0-a*(o=d)+(t-l*o)/2,s=0-c*o),{x:i,y:s,scale:o}},findFit:function(e,t,n,o){var i=r(e);if(!i)return{x:0,y:0,scale:1};i.minX-=o,i.minY-=o,i.maxX+=2*o,i.maxY+=2*o;var s,a,c,l=i.maxX-i.minX,p=i.maxY-i.minY,u=t/l,d=n/p;return u<d?(s=u,a=0-i.minX*s,c=0-i.minY*s+(n-p*s)/2):(s=d,a=0-i.minX*s+(t-l*s)/2,c=0-i.minY*s),{x:a,y:c,scale:s,graphWidth:l,graphHeight:p}}}},function(e,t,r){var n=r(15),o={showTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip",{detail:{tooltip:this.props.label,x:e.clientX,y:e.clientY},bubbles:!0});n.findDOMNode(this).dispatchEvent(t)}},hideTooltip:function(e){if(this.shouldShowTooltip()){var t=new CustomEvent("the-graph-tooltip-hide",{bubbles:!0});this.mounted&&n.findDOMNode(this).dispatchEvent(t)}},componentDidMount:function(){if(this.mounted=!0,!navigator||-1===navigator.userAgent.indexOf("Firefox")){var e=this.getTooltipTrigger();e.addEventListener("tap",this.showTooltip),e.addEventListener("mouseenter",this.showTooltip),e.addEventListener("mouseleave",this.hideTooltip)}},componentWillUnmount:function(){this.mounted=!1}};e.exports={Tooltip:o}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),o=new Uint8Array(16);function i(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r(9);var n=r(10),o=r(36),i=r(77);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const s={};let a=HTMLElement.prototype;for(;a;){let e=Object.getOwnPropertyNames(a);for(let t=0;t<e.length;t++)s[e[t]]=!0;a=Object.getPrototypeOf(a)}const c=Object(n.a)(e=>{const t=Object(i.a)(e);return class extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(Object(o.b)(e[t]))}static attributeNameForProperty(e){return Object(o.a)(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const r=this;r.hasAttribute(e)||this._valueToNodeAttribute(r,t,e)}_serializeValue(e){switch(typeof e){case"object":if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}default:return super._serializeValue(e)}}_deserializeValue(e,t){let r;switch(t){case Object:try{r=JSON.parse(e)}catch(t){r=e}break;case Array:try{r=JSON.parse(e)}catch(t){r=null,console.warn("Polymer::Attributes: couldn't decode Array as JSON: "+e)}break;case Date:r=isNaN(e)?String(e):Number(e),r=new Date(r);break;default:r=super._deserializeValue(e,t)}return r}_definePropertyAccessor(e,t){!function(e,t){if(!s[t]){let r=e[t];void 0!==r&&(e.__data?e._setPendingProperty(t,r):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=r))}}(this,e),super._definePropertyAccessor(e,t)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}})},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r(9);var n=r(10),o=r(14),i=r(1);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const s=o.a,a=Object(n.a)(e=>class extends e{static createProperties(e){const t=this.prototype;for(let r in e)r in t||t._createPropertyAccessor(r)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,r){let n=this.__data[e],o=this._shouldPropertyChange(e,t,n);return o&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=n),this.__data[e]=t,this.__dataPending[e]=t),o}_isPropertyPending(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,s.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,r=this.__dataOld;this._shouldPropertiesChange(e,t,r)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,r)),this.__dataCounter--}_shouldPropertiesChange(e,t,r){return Boolean(t)}_propertiesChanged(e,t,r){}_shouldPropertyChange(e,t,r){return r!==t&&(r==r||t==t)}attributeChangedCallback(e,t,r,n){t!==r&&this._attributeToProperty(e,r),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,r,n)}_attributeToProperty(e,t,r){if(!this.__serializing){const n=this.__dataAttributes,o=n&&n[e]||e;this[o]=this._deserializeValue(t,r||this.constructor.typeForProperty(o))}}_propertyToAttribute(e,t,r){this.__serializing=!0,r=arguments.length<3?this[e]:r,this._valueToNodeAttribute(this,r,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,r){const n=this._serializeValue(t);"class"!==r&&"name"!==r&&"slot"!==r||(e=Object(i.a)(e)),void 0===n?e.removeAttribute(r):e.setAttribute(r,n)}_serializeValue(e){switch(typeof e){case"boolean":return e?"":void 0;default:return null!=e?e.toString():void 0}}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}})},function(e,t,r){const n=r(25);t.getIcon=(e,t="")=>{const r=n.FONT_AWESOME;return r?r[e]?r[e]:t?r[t]:t:e},t.getIcons=()=>{const e=n.FONT_AWESOME;return e||{}}},function(e,t,r){(function(e){function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m,g;f=r(56),h=r(11).EventEmitter,g=r(186),m=r(58),d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,t);var r,o,p,u=l(d);function d(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(this,d),(t=u.call(this)).baseDir=e,t.options=r,t.components=null,t.libraryIcons={},t.processing=!1,t.ready=!1,t.setMaxListeners(0),t}return r=d,(o=[{key:"getModulePrefix",value:function(e){return e?"noflo"===e?"":("@"===e[0]&&(e=e.replace(/\@[a-z\-]+\//,"")),e.replace(/^noflo-/,"")):""}},{key:"listComponents",value:function(e){var t=this;if(this.processing)this.once("ready",(function(){return e(null,t.components)}));else{if(this.components)return e(null,this.components);this.ready=!1,this.processing=!0,this.components={},g.register(this,(function(r){if(r){if(e)return e(r);throw r}if(t.processing=!1,t.ready=!0,t.emit("ready",!0),e)return e(null,t.components)}))}}},{key:"load",value:function(t,r,n){var o,i,s=this;if(this.ready){if(!(o=this.components[t])){for(i in this.components)if(i.split("/")[1]===t){o=this.components[i];break}if(!o)return void r(new Error("Component ".concat(t," not available with base ").concat(this.baseDir)))}if(!this.isGraph(o))return this.createComponent(t,o,n,(function(e,n){return e?r(e):n?("Graph"===t&&(n.baseDir=s.baseDir),"string"==typeof t&&(n.componentName=t),n.isLegacy()&&m.deprecated("Component ".concat(t," uses legacy NoFlo APIs. Please port to Process API")),s.setIcon(t,n),r(null,n)):void r(new Error("Component ".concat(t," could not be loaded.")))}));m.isBrowser()?setTimeout((function(){return s.loadGraph(t,o,r,n)}),0):e.nextTick((function(){return s.loadGraph(t,o,r,n)}))}else this.listComponents((function(e){return e?r(e):s.load(t,r,n)}))}},{key:"createComponent",value:function(e,t,r,n){var o,s;if(!(o=t))return n(new Error("Component ".concat(e," not available")));if("string"==typeof o)return"function"==typeof g.dynamicLoad?void g.dynamicLoad(e,o,r,n):n(Error("Dynamic loading of ".concat(o," for component ").concat(e," not available on this platform.")));if("function"==typeof o.getComponent)try{s=o.getComponent(r)}catch(e){return n(e)}else{if("function"!=typeof o)return void n(new Error("Invalid type ".concat(i(o)," for component ").concat(e,".")));try{s=o(r)}catch(e){return n(e)}}return n(null,s)}},{key:"isGraph",value:function(e){return"object"===i(e)&&e instanceof f.Graph||!("object"!==i(e)||!e.processes||!e.connections)||"string"==typeof e&&(-1!==e.indexOf(".fbp")||-1!==e.indexOf(".json"))}},{key:"loadGraph",value:function(e,t,r,n){var o=this;this.createComponent(e,this.components.Graph,n,(function(n,i){if(n)return r(n);i.loader=o,i.baseDir=o.baseDir,i.inPorts.remove("graph"),i.setGraph(t,(function(t){return t?r(t):(o.setIcon(e,i),r(null,i))}))}))}},{key:"setIcon",value:function(e,t){var r;if(t.getIcon&&!t.getIcon()){var o=n(e.split("/"),2);r=o[0],o[1]&&this.getLibraryIcon(r)?t.setIcon(this.getLibraryIcon(r)):t.isSubgraph()?t.setIcon("sitemap"):t.setIcon("gear")}}},{key:"getLibraryIcon",value:function(e){return this.libraryIcons[e]?this.libraryIcons[e]:null}},{key:"setLibraryIcon",value:function(e,t){return this.libraryIcons[e]=t}},{key:"normalizeName",value:function(e,t){var r,n;return n=this.getModulePrefix(e),r="".concat(n,"/").concat(t),e||(r=t),r}},{key:"registerComponent",value:function(e,t,r,n){var o;if(o=this.normalizeName(e,t),this.components[o]=r,n)return n()}},{key:"registerGraph",value:function(e,t,r,n){return this.registerComponent(e,t,r,n)}},{key:"registerLoader",value:function(e,t){return e(this,t)}},{key:"setSource",value:function(e,t,r,n,o){var i=this;return g.setSource?this.ready?g.setSource(this,e,t,r,n,o):void this.listComponents((function(s){return s?o(s):i.setSource(e,t,r,n,o)})):o(new Error("setSource not allowed"))}},{key:"getSource",value:function(e,t){var r=this;return g.getSource?this.ready?g.getSource(this,e,t):void this.listComponents((function(n){return n?t(n):r.getSource(e,t)})):t(new Error("getSource not allowed"))}},{key:"clear",value:function(){return this.components=null,this.ready=!1,this.processing=!1}}])&&a(r.prototype,o),p&&a(r,p),d}(h),t.ComponentLoader=d}).call(this,r(6))},function(e,t,r){const n=r(218),o={host:"https://api.flowhub.io"};Object.defineProperty(t,"PING_INTERVAL",{value:6e5,enumerable:!0});e.exports.Runtime=class{constructor(e,t){if("object"!=typeof e)throw new Error("Runtime options expected");if(!e.id)throw new Error("Runtime requires an UUID");this.runtime=e,this.options={},Object.keys(o).forEach(e=>{this.options[e]=o[e]}),t&&Object.keys(t).forEach(e=>{this.options[e]=t[e]})}register(e,t){let r=e,o=t;"function"==typeof r&&(o=e,r=null),this.runtime.user?this.runtime.address?this.runtime.protocol?this.runtime.type?r?n.put(`${this.options.host}/runtimes/${this.runtime.id}`).set("Authorization","Bearer "+r).send(this.runtime).end(o):n.put(`${this.options.host}/runtimes/${this.runtime.id}`).send(this.runtime).end(o):o(new Error("Runtime registration requires a type")):o(new Error("Runtime registration requires a protocol")):o(new Error("Runtime registration requires an address URL")):o(new Error("Runtime registration requires a user UUID"))}ping(e){n.post(`${this.options.host}/runtimes/${this.runtime.id}`).send({}).end(t=>{e&&e(t)})}get(e,t){e?n.get(`${this.options.host}/runtimes/${this.runtime.id}`).set("Authorization","Bearer "+e).end((e,r)=>{e?t(e):200===r.status?(Object.keys(r.body).forEach(e=>{this.runtime[e]="seen"!==e&&"registered"!==e?r.body[e]:new Date(r.body[e])}),t(null,this.runtime)):t(new Error("Request returned "+r.status))}):t(new Error("API token required for fetching"))}del(e,t){e?n.del(`${this.options.host}/runtimes/${this.runtime.id}`).set("Authorization","Bearer "+e).end((e,r)=>{e&&404===e.status?t():t(e,r)}):t(new Error("API token required for deletion"))}},e.exports.list=function(e,r,i){let s=r,a=i;a||(a=s,s={}),e?(Object.keys(o).forEach(e=>{s[e]||(s[e]=o[e])}),n.get(s.host+"/runtimes/").set("Authorization","Bearer "+e).end((e,r)=>{if(e)return void a(e);if(200!==r.status)return void a(new Error("Request returned "+r.status));const n=[];r.body.forEach(e=>{n.push(new t.Runtime({...e,registered:new Date(e.registered),seen:new Date(e.seen)},s))}),a(null,n)})):a(new Error("API token required for fetching"))}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],s=i.obj[i.prop],a=Object.keys(s),c=0;c<a.length;++c){var l=a[c],p=s[l];"object"==typeof p&&null!==p&&-1===r.indexOf(p)&&(t.push({obj:s,prop:l}),r.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n=e;if("symbol"==typeof e?n=Symbol.prototype.toString.call(e):"string"!=typeof e&&(n=String(e)),"iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var o="",s=0;s<n.length;++s){var a=n.charCodeAt(s);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?o+=n.charAt(s):a<128?o+=i[a]:a<2048?o+=i[192|a>>6]+i[128|63&a]:a<55296||a>=57344?o+=i[224|a>>12]+i[128|a>>6&63]+i[128|63&a]:(s+=1,a=65536+((1023&a)<<10|1023&n.charCodeAt(s)),o+=i[240|a>>18]+i[128|a>>12&63]+i[128|a>>6&63]+i[128|63&a])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(o(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(i&&(i.plainObjects||i.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return o(t)&&!o(r)&&(a=s(t,i)),o(t)&&o(r)?(r.forEach((function(r,o){if(n.call(t,o)){var s=t[o];s&&"object"==typeof s&&r&&"object"==typeof r?t[o]=e(s,r,i):t.push(r)}else t[o]=r})),t):Object.keys(r).reduce((function(t,o){var s=r[o];return n.call(t,o)?t[o]=e(t[o],s,i):t[o]=s,t}),a)}}},function(e,t,r){"use strict";var n=r(40).codes.ERR_STREAM_PREMATURE_CLOSE;function o(){}e.exports=function e(t,r,i){if("function"==typeof r)return e(t,null,r);r||(r={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||o);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||p()},l=t._writableState&&t._writableState.finished,p=function(){a=!1,l=!0,s||i.call(t)},u=t._readableState&&t._readableState.endEmitted,d=function(){s=!1,u=!0,a||i.call(t)},h=function(e){i.call(t,e)},f=function(){var e;return s&&!u?(t._readableState&&t._readableState.ended||(e=new n),i.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new n),i.call(t,e)):void 0},m=function(){t.req.on("finish",p)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",p),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",d),t.on("finish",p),!1!==r.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",p),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",d),t.removeListener("error",h),t.removeListener("close",f)}}},function(e,t){e.exports={component:{title:"Component protocol",description:"Protocol for handling the component registry.",output:{error:{id:"output/error",description:"Error response to a command on component protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},component:{id:"output/component",description:"Transmit the metadata about a component instance.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["component"]},payload:{required:["name","subgraph","inPorts","outPorts"],additionalProperties:!1,properties:{name:{type:"string",description:"component name in format that can be used in graphs. Should contain the component library prefix.",example:"my-project/MyComponent"},description:{type:"string",description:"textual description on what the component does"},icon:{type:"string",description:'Visual icon for the component, matching icon names in <a href="http://fortawesome.github.io/Font-Awesome/icons/">Font Awesome</a>'},subgraph:{type:"boolean",description:"boolean telling whether the component is a subgraph"},inPorts:{description:"list of input ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the component",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}}}}}}]},componentsready:{id:"output/componentsready",description:"Indication that a component listing has finished",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{enum:["component"],type:"string",description:"type of protocol"},command:{enum:["componentsready"],description:"command to be executed",example:"addnode"},payload:{type:"integer",description:"number of components transmitted in this batch",example:42},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},source:{id:"output/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix",example:"MyComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"components-common"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"unit tests for the component"}}}}}]}},input:{list:{id:"input/list",description:"Request a list of currently available components. Will be responded with a set of `component` messages.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["list"]},payload:{required:[]}}}]},getsource:{id:"input/getsource",description:"Request for the source code of a given component. Will be responded with a `source` message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["getsource"]},payload:{required:["name"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component to for which to get source code. Should contain the library prefix",example:"my-project/SomeComponent"}}}}}]},source:{id:"input/source",description:"Source code for a component. In cases where a runtime receives a `source` message, it should do whatever operations are needed for making that component available for graphs, including possible compilation.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["component"]},command:{enum:["source"]},payload:{required:["name","language","code"],additionalProperties:!1,properties:{name:{type:"string",description:"Name of the component. Must not contain library prefix.",example:"SomeComponent"},language:{type:"string",description:"The programming language used for the component code",example:"c++"},library:{type:"string",description:"Component library identifier",example:"my-project"},code:{type:"string",description:"Component source code"},tests:{type:"string",description:"Unit tests for the component"}}}}}]}}},graph:{$schema:"http://json-schema.org/draft-04/schema#",title:"Graph protocol",description:"This protocol is utilized for communicating about graph changes in both directions.",messages:{error:{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}},clear:{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}},addnode:{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removenode:{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamenode:{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changenode:{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addedge:{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changeedge:{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinitial:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addinport:{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeinport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameinport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removeoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renameoutport:{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},addgroup:{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},removegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},renamegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},changegroup:{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{error:{id:"output/error",description:"Error response to a command on graph protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/error",properties:{protocol:{enum:["graph"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},clear:{id:"output/clear",description:"An empty graph was initialized",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"output/addnode",description:"A node was added to a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"output/removenode",description:"A node was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"output/renamenode",description:"A node was renamed in a graph.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"output/changenode",description:"Metadata of a node was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"output/addedge",description:"An edge was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"output/removeedge",description:"An edge was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"output/changeedge",description:"Metadata of an edge was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"output/addinitial",description:"An IIP was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"output/removeinitial",description:"An IIP was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"output/addinport",description:"An exported inport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"output/removeinport",description:"An exported inport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"output/renameinport",description:"An exported inport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"output/addoutport",description:"An exported outport was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"output/removeoutport",description:"An exported outport was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"output/renameoutport",description:"An exported outport was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"output/addgroup",description:"A group was added to a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"output/removegroup",description:"A group was removed from a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"output/renamegroup",description:"A group was renamed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"output/changegroup",description:"Metadata of a group was changed in a graph",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{clear:{id:"input/clear",description:"Initialize an empty graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{id:"messages/clear",properties:{protocol:{enum:["graph"]},command:{enum:["clear"]},payload:{required:["id"],additionalProperties:!1,properties:{id:{description:"identifier for the graph being created. Used for all subsequent messages related to the graph instance",id:"graph_id",type:"string"},name:{type:"string",description:"Human-readable label for the graph"},library:{type:"string",description:"Component library identifier"},main:{type:"boolean",description:"Identifies the graph as a main graph of a project that should not be registered as a component\nGraphs registered in this way should also be available for use as subgraphs in other graphs. Therefore a graph registration and later changes to it may cause component messages of the Component protocol to be sent back to the client informing of possible changes in the ports of the subgraph component."},icon:{type:"string",description:"Icon to use for the graph when used as a component"},description:{type:"string",description:"Description to use for the graph when used as a component"}}}}}]},addnode:{id:"input/addnode",description:"Add node to a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addnode"]},payload:{required:["id","component","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},component:{type:"string",description:"component name used for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removenode:{id:"input/removenode",description:"Remove a node from a graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removenode"]},payload:{required:["id","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamenode:{id:"input/renamenode",description:"Change the ID of a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamenode"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{type:"string",description:"original identifier for the node"},to:{type:"string",description:"new identifier for the node"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changenode:{id:"input/changenode",description:"Change the metadata associated to a node in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changenode"]},payload:{required:["id","metadata","graph"],additionalProperties:!1,properties:{id:{type:"string",description:"identifier for the node"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addedge:{id:"input/addedge",description:"Add an edge to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addedge"]},payload:{required:["src","tgt","graph"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},metadata:{description:"Structure of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeedge:{id:"input/removeedge",description:"Remove an edge from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changeedge:{id:"input/changeedge",description:"Change an edge's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changeedge"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{description:"struct of key-value pairs for edge metadata",id:"metadata_edge",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinitial:{id:"input/addinitial",description:"Add an IIP to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinitial"]},payload:{additionalProperties:!1,required:["graph","src","tgt"],properties:{metadata:{type:"object",description:"structure of key-value pairs for IIP metadata",id:"metadata_edge",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},src:{description:"source data for the edge",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinitial:{id:"input/removeinitial",description:"Remove an IIP from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinitial"]},payload:{required:["tgt","graph"],additionalProperties:!1,properties:{src:{description:"IIP data",id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},tgt:{description:"target node/port for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addinport:{id:"input/addinport",description:"Add an exported inport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addinport"]},payload:{additionalProperties:!1,required:["public","port","node","graph"],properties:{public:{description:"the exported name of the port",id:"port_id",type:"string",example:"in"},node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{description:"internal port name in the graph",id:"port_id",type:"string",example:"in"},metadata:{description:"structure of key-value pairs for node metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeinport:{id:"input/removeinport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeinport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameinport:{id:"input/renameinport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameinport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addoutport:{id:"input/addoutport",description:"Add an exported outport to the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addoutport"]},payload:{required:["public","node","port","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port",example:"out",id:"port_id",type:"string"},node:{description:"node identifier",id:"node_id",type:"string",example:"Repeat"},port:{description:"internal port name",example:"out[2]",id:"port_id",type:"string"},metadata:{description:"structure of key-value pairs for port metadata",id:"metadata_node",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removeoutport:{id:"input/removeoutport",description:"Remove an exported port from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removeoutport"]},payload:{required:["public","graph"],additionalProperties:!1,properties:{public:{description:"the exported name of the port to remove",example:"out",id:"port_id",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renameoutport:{id:"input/renameoutport",description:"Rename an exported port in the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renameoutport"]},payload:{required:["from","to","graph"],additionalProperties:!1,properties:{from:{description:"original exported port name",id:"port_id",type:"string",example:"in"},to:{description:"new exported port name",id:"port_id",type:"string",example:"in"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},addgroup:{id:"input/addgroup",description:"Add a group to the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["addgroup"]},payload:{required:["name","nodes","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},nodes:{type:"array",description:"an array of node ids part of the group",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},removegroup:{id:"input/removegroup",description:"Remove a group from the graph",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["removegroup"]},payload:{required:["name","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},renamegroup:{id:"input/renamegroup",description:"Rename a group in the graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["renamegroup"]},payload:{required:["from","to","graph"],properties:{from:{type:"string",description:"original group name"},to:{type:"string",description:"new group name"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},changegroup:{id:"input/changegroup",description:"Change a group's metadata",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["graph"]},command:{enum:["changegroup"]},payload:{required:["name","metadata","graph"],additionalProperties:!1,properties:{name:{type:"string",description:"the group name"},metadata:{description:"structure of key-value pairs for group metadata",id:"metadata_group",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},network:{$schema:"http://json-schema.org/draft-04/schema#",title:"Network protocol",description:"Protocol for starting and stopping FBP networks, and finding out about their state.",output:{stopped:{id:"output/stopped",description:"Inform that a given network has stopped.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stopped"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was stopped"},uptime:{type:"number",description:"time the network was running, in seconds"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},running:{type:"boolean",description:"whether or not network is currently running"},started:{type:"boolean",description:"whether or not network has been started"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},started:{id:"output/started",description:"Inform that a given network has been started.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["started"]},payload:{required:["graph"],additionalProperties:!1,properties:{time:{type:"string",format:"date-time",description:"time when the network was started"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"whether or not network is currently running"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},status:{id:"output/status",description:"Response to a getstatus message.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["status"]},payload:{required:["running","graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},uptime:{type:"number",description:"time the network has been running, in seconds"},started:{type:"boolean",description:"whether or not network has started running"},running:{type:"boolean",description:"boolean tells whether the network is running or not"},debug:{type:"boolean",description:"whether or not network is in debug mode"}}}}}]},output:{id:"output/output",description:"An output message from a running network, roughly similar to STDOUT output of a Unix process, or a line of console.log in JavaScript. Output can also be used for passing images from the runtime to the UI.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["output"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{type:"string",description:"contents of the output line"},type:{type:"string",enum:["message","previewurl"],description:"type of output, either message or previewurl"},url:{type:"string",format:"uri",description:"URL for an image generated by the runtime"}}}}}]},error:{id:"output/error",description:"An error from a running network, roughly similar to STDERR output of a Unix process, or a line of console.error in JavaScript.'",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["error"]},payload:{required:["message"],additionalProperties:!1,properties:{message:{description:"contents of the error message",type:"string"},stack:{description:"stack trace",type:"string"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},processerror:{id:"output/processerror",description:"When in debug mode, a network can signal an error happening inside a process.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["processerror"]},payload:{required:["id","error","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},error:{type:"string",description:"error from the component"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},icon:{id:"output/icon",description:"Icon of a component instance has changed.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["icon"]},payload:{required:["id","icon","graph"],additionalProperties:!1,properties:{id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},icon:{type:"string",description:"new icon for the component instance"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},connect:{id:"output/connect",description:"Beginning of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["connect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},begingroup:{id:"output/begingroup",description:"Beginning of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["begingroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,tgt:!0,src:!0,graph:!0,subgraph:!0}}]}}}]},data:{id:"output/data",description:"Data transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["data"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["data"],properties:{data:{description:"actual data being transmitted, encoded in a way that can be carried over the protocol transport"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"}}},{additionalProperties:!1,properties:{data:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},endgroup:{id:"output/endgroup",description:"Ending of a group (bracket IP) on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["endgroup"]},payload:{allOf:[{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},{required:["group"],properties:{group:{description:"group name",type:"string"}}},{additionalProperties:!1,properties:{group:!0,id:!0,src:!0,tgt:!0,graph:!0,subgraph:!0}}]}}}]},disconnect:{id:"output/disconnect",description:"End of transmission on an edge.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["network"]},command:{enum:["disconnect"]},payload:{additionalProperties:!1,id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}}}}]},edges:{id:"output/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from runtime to UI.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},input:{start:{id:"input/start",description:"Start execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},getstatus:{id:"input/getstatus",description:"Get the current status of the runtime. The runtime should respond with a status message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["getstatus"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},stop:{id:"input/stop",description:"Stop execution of a FBP network based on a given graph.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},persist:{id:"input/persist",description:"Tells the runtime to persist the current state of graphs and components so that they are available between restarts. Requires the network:persist capability.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["persist"]},payload:{required:[],additionalProperties:!1,properties:null}}}]},debug:{id:"input/debug",description:"Set a network into debug mode",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["debug"]},payload:{additionalProperties:!1,required:["enable","graph"],properties:{enable:{description:"tells whether to put the network in debug mode",type:"boolean"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},edges:{id:"input/edges",description:"List of edges user has selected for inspection in a user interface or debugger, sent from UI to a runtime.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["network"]},command:{enum:["edges"]},payload:{required:["graph","edges"],additionalProperties:!1,properties:{edges:{type:"array",description:"list of selected edges",items:{type:"object",required:["src","tgt"],additionalProperties:!1,properties:{src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},runtime:{title:"Runtime protocol",description:"When a client connects to a FBP procotol it may choose to discover the capabilities and other information about the runtime.",input:{getruntime:{id:"input/getruntime",description:"Request the information about the runtime. When receiving this message the runtime should response with a runtime message. If the runtime is currently running a graph and it is able to speak the full Runtime protocol, it should follow up with a ports message.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["getruntime"]},payload:{required:[],properties:{secret:{type:"string",description:"access token to authorize the client. Provided also in payload for compatibility with older runtimes"}}}}}]},packet:{id:"input/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}},output:{error:{id:"output/error",description:"Error response to a command on runtime protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]},ports:{id:"output/ports",description:"Message sent by the runtime to signal its available ports. The runtime is responsible for sending the up-to-date list of available ports back to client whenever it changes.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["ports"]},payload:{required:["graph","inPorts","outPorts"],additionalProperties:!1,properties:{inPorts:{description:"list of input ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},outPorts:{description:"list of output ports of the runtime",id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},runtime:{id:"output/runtime",description:"Response from the runtime to the getruntime request.",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["runtime"]},payload:{required:["version","capabilities","type"],additionalProperties:!1,properties:{id:{type:"string",description:"unique runtime ID. Must be a UUID, version 4",example:"f18a4924-9d4f-414d-a37c-cd24b39bba10"},label:{description:"Human-readable description of the runtime",type:"string"},version:{description:"version of the runtime protocol that the runtime supports",type:"string",example:"0.6"},allCapabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do. May include things not permitted for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},capabilities:{description:"<a href='#capabilities'>capability strings</a> for things the runtime is able to do for this client.",id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}},graph:{description:"ID of the currently configured main graph running on the runtime, if any",type:"string",example:"service-main",id:"graph_id"},type:{description:"type of the runtime",type:"string",example:"microflo"},namespace:{description:"Library namespace of the project running on the runtime, if any. Must match that of components belonging to the (top-level) of project.",type:"string",example:"my-project-foo"},repository:{description:"Source-code repository URL of the project running on the runtime, if any",type:"string",example:"https://github.com/flowbased/fbp-protocol.git"},repositoryVersion:{description:"Unique version identifier of the source code of the project, if known. The version should be available in @repository.",type:"string",example:"0.6.3-8-g90edcfc"}}}}}]},packetsent:{id:"output/packetsent",description:"Confirmation that a packet has been sent",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packetsent"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{description:"port name for the input port",id:"port_id",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},packet:{id:"output/packet",description:"Runtimes that can be used as remote subgraphs (i.e. ones that have reported supporting the protocol:runtime capability) need to be able to receive and transmit information packets at their exposed ports.\nThese packets can be send from the client to the runtimes input ports, or from runtimes output ports to the client.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["runtime"]},command:{enum:["packet"]},payload:{required:["port","event","graph"],additionalProperties:!1,properties:{port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},event:{type:"string",enum:["connect","begingroup","data","endgroup","disconnect"],description:"packet event"},type:{type:"string",description:"The basic datatype sent",example:"array"},schema:{type:"string",format:"uri",description:"Link to JSON schema describing the format of the data",example:"https://example.net/schemas/person.json"},payload:{description:"payload for the packet. Used only with begingroup (for group names) and data packets"},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}},shared:{$schema:"http://json-schema.org/draft-04/schema#",title:"Shared",description:"Shared schema fragments",graph_id:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},node_id:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port_id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},input_message:{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},output_message:{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},metadata_node:{id:"metadata_node",description:"structure of key-value pairs for graph node metadata",type:"object",additionalProperties:!0,required:[],properties:{x:{type:"integer",description:"X coordinate of a graph entity"},y:{type:"integer",description:"Y coordinate of a graph entity"}}},metadata_edge:{id:"metadata_edge",description:"structure of key-value pairs for graph edge metadata",type:"object",additionalProperties:!0,required:[],properties:{route:{type:"integer",description:"Route identifier of a graph entity"},schema:{type:"string",format:"uri",description:"JSON schema associated with a graph entity"},secure:{type:"boolean",description:"Whether graph entity data should be treated as secure"}}},metadata_group:{id:"metadata_group",description:"structure of key-value pairs for graph group metadata",type:"object",additionalProperties:!0,required:[],properties:{description:{type:"string",description:"Longer textual description of the group"}}},port:{id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},port_definition:{id:"port_definition",type:"array",items:{type:"object",required:["id","type"],additionalProperties:!1,properties:{id:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},type:{description:"port datatype",type:"string",example:"boolean"},schema:{type:"string",format:"uri",description:"Link to JSON schema for data on this port",example:"https://example.net/schemas/person.json"},required:{description:"whether the port needs to be connected for the component to work",type:"boolean",example:!0},addressable:{type:"boolean",description:"whether the port is an ArrayPort",example:!1},description:{type:"string",description:"textual description of the port"},values:{type:"array",description:"list of values accepted for the port"},default:{description:"default value for the port"}}}},iip:{id:"iip",type:"object",required:["data"],additionalProperties:!1,properties:{data:{description:"IIP value in its actual data type",type:["object","array","string","number","integer","boolean","null"]}}},network_event:{id:"network_event",required:["id","tgt","graph"],properties:{id:{type:"string",description:"textual edge identifier, usually in form of a FBP language line"},src:{description:"source node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},tgt:{description:"target node for the edge",id:"port",type:"object",required:["node","port"],additionalProperties:!1,properties:{node:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"},port:{id:"port_id",description:"Port identifier in a component or process",type:"string",example:"in"},index:{type:["string","number"],description:"connection index, for addressable ports"}}},graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},subgraph:{type:"array",description:"Subgraph identifier for the event. An array of node IDs.",items:{id:"node_id",description:"Node identifier in a graph",type:"string",example:"Repeat"}}}},capabilities:{id:"capabilities",type:"array",items:{type:"string",enums:["protocol:network","network:persist","network:status","network:data","network:control","protocol:component","component:getsource","component:setsource","protocol:runtime","protocol:graph","graph:readonly","protocol:trace"],_enumDescriptions:[{name:"protocol:network",description:"can control and introspect its running networks using the Network protocol. DEPRECATED. Instead the individual network:... capabilities should be used. Implies capabilities network:status, network:data, network:control. Does not imply capability network:persist.",inputs:["network:start","network:getstatus","network:stop","network:debug","network:edges"],outputs:["network:stopped","network:started","network:status","network:output","network:error","network:processerror","network:icon","network:connect","network:begingroup","network:data","network:endgroup","network:disconnect","network:edges"]},{name:"network:persist",description:"can *flash* a running graph setup to the runtime, making it persistent across restarts",inputs:["network:persist"],outputs:["network:persist","network:error"]},{name:"network:status",description:"can get and follow changes to network status",inputs:["network:getstatus"],outputs:["network:status","network:started","network:stopped","network:error"]},{name:"network:data",description:"can listen to data flowing through the network and processes",inputs:["network:edges"],outputs:["network:edges","network:output","network:error","network:data","network:begingroup","network:endgroup","network:connect","network:disconnect","network:icon","network:processerror","network:error"]},{name:"network:control",description:"can start and stop networks",inputs:["network:start","network:stop","network:getstatus","network:debug"],outputs:["network:started","network:stopped","network:status","network:error"]},{name:"protocol:component",description:"can list components of the runtime using the component:list message.",inputs:["component:list"],outputs:["component:component","component:componentsready","component:error"]},{name:"component:getsource",description:"read and send component source code back to client",inputs:["component:getsource"],outputs:["component:source","component:error"]},{name:"component:setsource",description:"runtime is able to compile and run custom components sent as source code strings",inputs:["component:source"],outputs:["component:component","component:error"]},{name:"protocol:runtime",description:"can expose ports of main graph and transmit packet information to/from them",inputs:["runtime:packet"],outputs:["runtime:ports","runtime:packetsent","runtime:packet","runtime:error"]},{name:"graph:readonly",description:"read and follow changes to runtime graphs (but not modify)",inputs:[],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"]},{name:"protocol:graph",description:"read & modify runtime graphs using the Graph protocol.",inputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup"],outputs:["graph:clear","graph:addnode","graph:removenode","graph:renamenode","graph:changenode","graph:addedge","graph:removeedge","graph:changeedge","graph:addinitial","graph:removeinitial","graph:addinport","graph:removeinport","graph:renameinport","graph:addoutport","graph:removeoutport","graph:renameoutport","graph:addgroup","graph:removegroup","graph:renamegroup","graph:changegroup","graph:error"]},{name:"protocol:trace",description:"runtime is able to record and send over flowtraces, used for retroactive debugging.",inputs:["trace:start","trace:stop","trace:clear","trace:dump"],outputs:["trace:start","trace:stop","trace:clear","trace:dump","trace:error"]}]}}},trace:{$schema:"http://json-schema.org/draft-04/schema#",title:"Trace protocol",description:"This protocol is utilized for triggering and transmitting [Flowtrace](https://github.com/flowbased/flowtrace)s",messages:{start:{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}},stop:{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}},clear:{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}},output:{start:{id:"output/start",description:"Tracing was started",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{id:"output/stop",description:"Tracing was stopped",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},clear:{id:"output/clear",description:"Tracing buffer was cleared",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"output/dump",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type","flowtrace"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"String describing type of trace.",type:"string",enum:["flowtrace.json"]},flowtrace:{description:"A Flowtrace file of `type`",type:"string"}}}}}]},error:{id:"output/error",description:"Error response to a command on trace protocol",allOf:[{id:"message",description:"protocol message sent by a runtime",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message"},responseTo:{type:"string",description:"unique identifier of the request message is response to"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["error"]},payload:{required:["message"],properties:{message:{type:"string",description:"Error message describing what went wrong"}}}}}]}},input:{start:{id:"input/start",description:"Enable/start tracing of a network.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["start"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},buffersize:{description:"Size of tracing buffer to keep. In bytes",type:"integer"}}}}}]},stop:{description:"Stop/disable tracing of a network.",id:"input/stop",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["stop"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]},dump:{id:"input/dump",description:"Trigger dumping of the current tracing buffer, to return it back to server.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["dump"]},payload:{required:["graph","type"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"},type:{description:"Type/format of trace to output",type:"string",enum:["flowtrace.json"]}}}}}]},clear:{id:"input/clear",description:"Clear current tracing buffer.",allOf:[{id:"message",description:"protocol message sent by a client",additionalProperties:!1,required:["protocol","command","payload"],properties:{protocol:{type:"string",description:"type of protocol",example:"graph"},command:{type:"string",description:"command to be executed",example:"addnode"},payload:{type:"object",description:"content of message",properties:{secret:{type:"string",description:"access token to authorize the client. Legacy location, use toplevel secret instead"}}},secret:{type:"string",description:"access token to authorize the client"},requestId:{type:"string",description:"unique request identifier"}}},{properties:{protocol:{enum:["trace"]},command:{enum:["clear"]},payload:{required:["graph"],additionalProperties:!1,properties:{graph:{id:"graph_id",description:"Graph identifier the message targets",type:"string"}}}}}]}}}}},function(e,t,r){"use strict";var n=r(267),o=r(85),i=r(43),s=r(124),a=r(269);function c(e,t,r){var n=this._refs[r];if("string"==typeof n){if(!this._refs[n])return c.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof s)return f(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,i,a,p=l.call(this,t,r);return p&&(o=p.schema,t=p.root,a=p.baseId),o instanceof s?i=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(i=f(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),i}function l(e,t){var r=n.parse(t),o=g(r),i=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==i){var a=v(o),c=this._refs[a];if("string"==typeof c)return p.call(this,e,c,r);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[a])instanceof s))return;if(c.validate||this._compile(c),a==v(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=m(this._getId(e.schema))}return d.call(this,r,i,e.schema,e)}function p(e,t,r){var n=l.call(this,e,t);if(n){var o=n.schema,i=n.baseId;e=n.root;var s=this._getId(o);return s&&(i=b(i,s)),d.call(this,r,i,o,e)}}e.exports=c,c.normalizeId=v,c.fullPath=m,c.url=b,c.ids=function(e){var t=v(this._getId(e)),r={"":t},s={"":m(t,!1)},c={},l=this;return a(e,{allKeys:!0},(function(e,t,a,p,u,d,h){if(""!==t){var f=l._getId(e),m=r[p],g=s[p]+"/"+u;if(void 0!==h&&(g+="/"+("number"==typeof h?h:i.escapeFragment(h))),"string"==typeof f){f=m=v(m?n.resolve(m,f):f);var y=l._refs[f];if("string"==typeof y&&(y=l._refs[y]),y&&y.schema){if(!o(e,y.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=v(g))if("#"==f[0]){if(c[f]&&!o(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}r[t]=m,s[t]=g}})),c},c.inlineRef=f,c.schema=l;var u=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function d(e,t,r,n){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var o=e.fragment.split("/"),s=1;s<o.length;s++){var a=o[s];if(a){if(void 0===(r=r[a=i.unescapeFragment(a)]))break;var c;if(!u[a]&&((c=this._getId(r))&&(t=b(t,c)),r.$ref)){var p=b(t,r.$ref),d=l.call(this,n,p);d&&(r=d.schema,n=d.root,t=d.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var h=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(r=t[n])&&!e(r))return!1}else for(var o in t){if("$ref"==o)return!1;if("object"==typeof(r=t[o])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if("object"==typeof(r=t[o])&&(n+=e(r)),n==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(h[i])n++;else if("object"==typeof(r=t[i])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=v(e)),g(n.parse(e))}function g(e){return n.serialize(e).split("#")[0]+"#"}var y=/#\/?$/;function v(e){return e?e.replace(y,""):""}function b(e,t){return t=v(t),n.resolve(e,t)}},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;0!=o--;){var s=i[o];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";var n=r(84);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:i(o)},o.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,r){(function(t,r,n){var o;o=function(){var e,o,i;return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=r[s]={exports:{}};t[s][0].call(p.exports,(function(e){var r=t[s][1][e];return o(r||e)}),p,p.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(e,r,n){"use strict";var o;try{throw new Error}catch(e){o=e}var i=e("./schedule"),s=e("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=i}function c(e){for(;e.length()>0;)l(e)}function l(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(e,r){r?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()},a.prototype.invoke=function(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()},a.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},a.prototype._drainQueues=function(){c(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,c(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},r.exports=a,r.exports.firstLineError=o},{"./queue":26,"./schedule":29}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var o=!1,i=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(i,i,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(i){o||(o=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var l=r(i),p=new e(t);p._propagateFrom(this,1);var u=this._target();if(p._setBoundTo(l),l instanceof e){var d={promiseRejectionQueued:!1,promise:p,target:u,bindingPromise:l};u._then(t,s,void 0,p,d),l._then(a,c,void 0,p,d),p._setOnCancel(l)}else p._resolveCallback(u);return p},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var o=e("./promise")();o.noConflict=function(){try{Promise===o&&(Promise=n)}catch(e){}return o},t.exports=o},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var o=n(null),i=n(null);o[" size"]=i[" size"]=0}t.exports=function(t){var r=e("./util"),n=r.canEvaluate;function o(e){return function(e,n){var o;if(null!=e&&(o=e[n]),"function"!=typeof o){var i="Object "+r.classString(e)+" has no method '"+r.toString(n)+"'";throw new t.TypeError(i)}return o}(e,this.pop()).apply(e,this)}function i(e){return e[this]}function s(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}r.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=s;else if(n){var r=(void 0)(e);t=null!==r?r:i}else t=i;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util"),s=i.tryCatch,a=i.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!o.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(i.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=s(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),c.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,o=r.tryCatch,i=r.errorObj;return function(e,s,a){return function(c){var l=a._boundValue();e:for(var p=0;p<e.length;++p){var u=e[p];if(u===Error||null!=u&&u.prototype instanceof Error){if(c instanceof u)return o(s).call(l,c)}else if("function"==typeof u){var d=o(u).call(l,c);if(d===i)return d;if(d)return o(s).call(l,c)}else if(r.isObject(c)){for(var h=n(u),f=0;f<h.length;++f){var m=h[f];if(u[m]!=c[m])continue e}return o(s).call(l,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(o())}function o(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,i=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=i,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=o,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(e,r,n){"use strict";r.exports=function(r,n,o,i){var s,a,c,l,p=r._async,u=e("./errors").Warning,d=e("./util"),h=e("./es5"),f=d.canAttachTrace,m=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,b=null,w=!1,x=!(0==d.env("BLUEBIRD_DEBUG")),k=!(0==d.env("BLUEBIRD_WARNINGS")||!x&&!d.env("BLUEBIRD_WARNINGS")),E=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!x&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),_=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(k||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var e=[];function t(){for(var t=0;t<e.length;++t)e[t]._notifyUnhandledRejection();n()}function n(){e.length=0}l=function(r){e.push(r),setTimeout(t,1)},h.defineProperty(r,"_unhandledRejectionCheck",{value:t}),h.defineProperty(r,"_unhandledRejectionClear",{value:n})}(),r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),l(this))},r.prototype._notifyUnhandledRejectionIsHandled=function(){J("rejectionHandled",s,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),J("unhandledRejection",a,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return $(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=r._getContext();a=d.contextBind(t,e)},r.onUnhandledRejectionHandled=function(e){var t=r._getContext();s=d.contextBind(t,e)};var S=function(){};r.longStackTraces=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&Y()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,o=r.prototype._dereferenceTrace;re.longStackTraces=!0,S=function(){if(p.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=o,n.deactivateLongStackTraces(),re.longStackTraces=!1},r.prototype._captureStackTrace=z,r.prototype._attachExtraTrace=U,r.prototype._dereferenceTrace=q,n.activateLongStackTraces()}},r.hasLongStackTraces=function(){return re.longStackTraces&&Y()};var C={unhandledrejection:{before:function(){var e=d.global.onunhandledrejection;return d.global.onunhandledrejection=null,e},after:function(e){d.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=d.global.onrejectionhandled;return d.global.onrejectionhandled=null,e},after:function(e){d.global.onrejectionhandled=e}}},P=function(){var e=function(e,t){if(!e)return!d.global.dispatchEvent(t);var r;try{return r=e.before(),!d.global.dispatchEvent(t)}finally{e.after(r)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new CustomEvent(t,{detail:r,cancelable:!0});return h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(C[t],n)}}return"function"==typeof Event?(t=new Event("CustomEvent"),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new Event(t,{cancelable:!0});return n.detail=r,h.defineProperty(n,"promise",{value:r.promise}),h.defineProperty(n,"reason",{value:r.reason}),e(C[t],n)}):((t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,r),e(C[t],n)})}catch(e){}return function(){return!1}}(),A=d.isNode?function(){return t.emit.apply(t,arguments)}:d.global?function(e){var t="on"+e.toLowerCase(),r=d.global[t];return!!r&&(r.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function O(e,t){return{promise:t}}var T={promiseCreated:O,promiseFulfilled:O,promiseRejected:O,promiseResolved:O,promiseCancelled:O,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:O},D=function(e){var t=!1;try{t=A.apply(null,arguments)}catch(e){p.throwLater(e),t=!0}var r=!1;try{r=P(e,T[e].apply(null,arguments))}catch(e){p.throwLater(e),r=!0}return r||t};function N(){return!1}function j(e,t,r){var n=this;try{e(t,r,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+d.toString(e));n._attachCancellationCallback(e)}))}catch(e){return e}}function I(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?d.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function R(){return this._onCancelField}function M(e){this._onCancelField=e}function L(){this._cancellationParent=void 0,this._onCancelField=void 0}function F(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&S()),"warnings"in e){var t=e.warnings;re.warnings=!!t,_=re.warnings,d.isObject(t)&&"wForgottenReturn"in t&&(_=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(p.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=L,r.prototype._propagateFrom=F,r.prototype._onCancel=R,r.prototype._setOnCancel=M,r.prototype._attachCancellationCallback=I,r.prototype._execute=j,G=F,re.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,r.prototype._fireEvent=D):!e.monitoring&&re.monitoring&&(re.monitoring=!1,r.prototype._fireEvent=N)),"asyncHooks"in e&&d.nodeSupportsAsyncResource){var n=re.asyncHooks,s=!!e.asyncHooks;n!==s&&(re.asyncHooks=s,s?o():i())}return r},r.prototype._fireEvent=N,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var G=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function B(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function z(){this._trace=new ee(this._peekContext())}function U(e,t){if(f(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=V(e);d.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),d.notEnumerableProp(e,"__stackCleaned__",!0)}}}function q(){this._trace=void 0}function $(e,t,n){if(re.warnings){var o,i=new u(e);if(t)n._attachExtraTrace(i);else if(re.longStackTraces&&(o=r._peekContext()))o.attachExtraTrace(i);else{var s=V(i);i.stack=s.message+"\n"+s.stack.join("\n")}D("warning",i)||W(i,"",!0)}}function H(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],o="    (No stack trace)"===n||v.test(n),i=o&&K(n);o&&!i&&(w&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function V(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:H(t)}}function W(e,t,r){if("undefined"!=typeof console){var n;if(d.isObject(e)){var o=e.stack;n=t+b(o,e)}else n=t+String(e);"function"==typeof c?c(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function J(e,t,r,n){var o=!1;try{"function"==typeof t&&(o=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){p.throwLater(e)}"unhandledRejection"===e?D(e,r,n)||o||W(r,"Unhandled rejection "):D(e,n)}function X(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():d.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function Y(){return"function"==typeof te}var K=function(){return!1},Q=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Z(e){var t=e.match(Q);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function ee(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);te(this,ee),t>32&&this.uncycle()}d.inherits(ee,Error),n.CapturedTrace=ee,ee.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,o=this;void 0!==o;++n)t.push(o),o=o._parent;for(n=(e=this._length=n)-1;n>=0;--n){var i=t[n].stack;void 0===r[i]&&(r[i]=n)}for(n=0;n<e;++n){var s=r[t[n].stack];if(void 0!==s&&s!==n){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var a=n>0?t[n-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,l=n-2;l>=0;--l)t[l]._length=c,c++;return}}}},ee.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=V(e),r=t.message,n=[t.stack],o=this;void 0!==o;)n.push(H(o.stack.split("\n"))),o=o._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],o=t.length-1,i=t[o],s=-1,a=n.length-1;a>=0;--a)if(n[a]===i){s=a;break}for(a=s;a>=0;--a){var c=n[a];if(t[o]!==c)break;t.pop(),o--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),d.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),d.notEnumerableProp(e,"__stackCleaned__",!0)}};var te=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():X(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,b=t;var r=Error.captureStackTrace;return K=function(e){return m.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,o=new Error;if("string"==typeof o.stack&&o.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,b=t,w=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return!("stack"in o)&&n&&"number"==typeof Error.stackTraceLimit?(v=e,b=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(b=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?X(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(c=function(e){console.warn(e)},d.isNode&&t.stderr.isTTY?c=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:d.isNode||"string"!=typeof(new Error).stack||(c=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:k,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return E&&r.longStackTraces(),{asyncHooks:function(){return re.asyncHooks},longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return G},boundValueFunction:function(){return B},checkForgottenReturns:function(e,t,r,n,o){if(void 0===e&&null!==t&&_){if(void 0!==o&&o._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var i="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=H(a),l=c.length-1;l>=0;--l){var p=c[l];if(!g.test(p)){var u=p.match(y);u&&(i="at "+u[1]+":"+u[2]+":"+u[3]+" ");break}}if(c.length>0){var d=c[0];for(l=0;l<a.length;++l)if(a[l]===d){l>0&&(s="\n"+a[l-1]);break}}}var h="a promise was created in a "+r+"handler "+i+"but was not returned from it, see http://goo.gl/rRqMUw"+s;n._warn(h,!0,t)}},setBounds:function(e,t){if(Y()){for(var r,n,o=(e.stack||"").split("\n"),i=(t.stack||"").split("\n"),s=-1,a=-1,c=0;c<o.length;++c)if(l=Z(o[c])){r=l.fileName,s=l.line;break}for(c=0;c<i.length;++c){var l;if(l=Z(i[c])){n=l.fileName,a=l.line;break}}s<0||a<0||!r||!n||r!==n||s>=a||(K=function(e){if(m.test(e))return!0;var t=Z(e);return!!(t&&t.fileName===r&&s<=t.line&&t.line<=a)})}},warn:$,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),$(r)},CapturedTrace:ee,fireDomEvent:P,fireGlobalEvent:A}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var o=function(){return n};return this.caught(r,o)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function o(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(o,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(o,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,o,i=e("./es5"),s=i.freeze,a=e("./util"),c=a.inherits,l=a.notEnumerableProp;function p(e,t){function r(n){if(!(this instanceof r))return new r(n);l(this,"message","string"==typeof n?n:t),l(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(r,Error),r}var u=p("Warning","warning"),d=p("CancellationError","cancellation error"),h=p("TimeoutError","timeout error"),f=p("AggregateError","aggregate error");try{n=TypeError,o=RangeError}catch(e){n=p("TypeError","type error"),o=p("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(f.prototype[m[g]]=Array.prototype[m[g]]);i.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var y=0;function v(e){if(!(this instanceof v))return new v(e);l(this,"name","OperationalError"),l(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(l(this,"message",e.message),l(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var e=Array(4*y+1).join(" "),t="\n"+e+"AggregateError of:\n";y++,e=Array(4*y+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",o=n.split("\n"),i=0;i<o.length;++i)o[i]=e+o[i];t+=(n=o.join("\n"))+"\n"}return y--,t},c(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=s({CancellationError:d,TimeoutError:h,OperationalError:v,RejectionError:v,AggregateError:f}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:o,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:u}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var o={}.hasOwnProperty,i={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===i.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return s}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,o){return r(e,n,o,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.CancellationError,s=o.errorObj,a=e("./catch_filter")(n);function c(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function l(e){this.finallyHandler=e}function p(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function u(){return h.call(this,this.promise._target()._settledValue())}function d(e){if(!p(this,e))return s.e=e,s}function h(e){var o=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(o._boundValue()):a.call(o._boundValue(),e);if(c===n)return c;if(void 0!==c){o._setReturnedNonUndefined();var h=r(c,o);if(h instanceof t){if(null!=this.cancelPromise){if(h._isCancelled()){var f=new i("late cancellation observer");return o._attachExtraTrace(f),s.e=f,s}h.isPending()&&h._attachCancellationCallback(new l(this))}return h._then(u,d,void 0,this,void 0)}}}return o.isRejected()?(p(this),s.e=e,s):(p(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){p(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,h,h)},t.prototype.tap=function(e){return this._passThrough(e,1,h)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,h);var n,i=new Array(r-1),s=0;for(n=0;n<r-1;++n){var c=arguments[n];if(!o.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+o.classString(c)));i[s++]=c}i.length=s;var l=arguments[n];return this._passThrough(a(i,l,this),1,void 0,h)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./errors").TypeError,c=e("./util"),l=c.errorObj,p=c.tryCatch,u=[];function d(e,r,o,i){if(s.cancellation()){var a=new t(n),c=this._finallyPromise=new t(n);this._promise=a.lastly((function(){return c})),a._captureStackTrace(),a._setOnCancel(this)}else(this._promise=new t(n))._captureStackTrace();this._stack=i,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof o?[o].concat(u):u,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,i),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=p(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=p(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var r=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var i=o(n,this._promise);if(i instanceof t||null!==(i=function(e,r,n){for(var i=0;i<r.length;++i){n._pushContext();var s=p(r[i])(e);if(n._popContext(),s===l){n._pushContext();var a=t.reject(l.e);return n._popContext(),a}var c=o(s,n);if(c instanceof t)return c}return null}(i,this._yieldHandlers,this._promise))){var s=(i=i._target())._bitField;0==(50397184&s)?(this._yieldedPromise=i,i._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,i._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,i._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=d,o=(new Error).stack;return function(){var t=e.apply(this,arguments),i=new n(void 0,void 0,r,o),s=i.promise();return i._generator=t,i._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+c.classString(e));u.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new d(e,this),o=n.promise();return n._run(t.spawn),o}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var o=new r(n).promise();return void 0!==e?o.spread(e):o}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=a.tryCatch,l=a.errorObj,p=t._async;function u(e,r,n,o){this.constructor$(e),this._promise._captureStackTrace();var s=t._getContext();if(this._callback=a.contextBind(s,r),this._preservedValues=o===i?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0),a.isArray(e))for(var c=0;c<e.length;++c){var l=e[c];l instanceof t&&l.suppressUnhandledRejections()}}function d(e,r,o,i){if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var s=0;if(void 0!==o){if("object"!=typeof o||null===o)return t.reject(new TypeError("options argument must be an object but it is "+a.classString(o)));if("number"!=typeof o.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(o.concurrency)));s=o.concurrency}return new u(e,r,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,i).promise()}a.inherits(u,r),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,r){var n=this._values,i=this.length(),a=this._preservedValues,p=this._limit;if(r<0){if(n[r=-1*r-1]=e,p>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(p>=1&&this._inFlight>=p)return n[r]=e,this._queue.push(r),!1;null!==a&&(a[r]=e);var u=this._promise,d=this._callback,h=u._boundValue();u._pushContext();var f=c(d).call(h,e,r,i),m=u._popContext();if(s.checkForgottenReturns(f,m,null!==a?"Promise.filter":"Promise.map",u),f===l)return this._reject(f.e),!0;var g=o(f,this._promise);if(g instanceof t){var y=(g=g._target())._bitField;if(0==(50397184&y))return p>=1&&this._inFlight++,n[r]=g,g._proxy(this,-1*(r+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}n[r]=f}return++this._totalResolved>=i&&(null!==a?this._filter(n,a):this._resolve(n),!0)},u.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},u.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),o=0,i=0;i<r;++i)e[i]&&(n[o++]=t[i]);n.length=o,this._resolve(n)},u.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,r,n){return d(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var o=a(e).apply(this,arguments),s=n._popContext();return i.checkForgottenReturns(o,s,"Promise.method",n),n._resolveFromSyncValue(o),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return o("expecting a function but got "+s.classString(e));var n,c=new t(r);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],p=arguments[2];n=s.isArray(l)?a(e).apply(p,l):a(e).call(p,l)}else n=a(e)();var u=c._popContext();return i.checkForgottenReturns(n,u,"Promise.try",c),c._resolveFromSyncValue(n),c},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),o=n.maybeWrapAsError,i=e("./errors").OperationalError,s=e("./es5"),a=/^(?:name|message|stack|cause)$/;function c(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new i(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=s.keys(e),o=0;o<r.length;++o){var c=r[o];a.test(c)||(t[c]=e[c])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var i=c(o(r));e._attachExtraTrace(i),e._reject(i)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,o=r.tryCatch,i=r.errorObj;function s(e,t){if(!r.isArray(e))return a.call(this,e,t);var s=o(t).apply(this._boundValue(),[null].concat(e));s===i&&n.throwLater(s.e)}function a(e,t){var r=this._boundValue(),s=void 0===e?o(t).call(r,null):o(t).call(r,null,e);s===i&&n.throwLater(s.e)}function c(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var s=o(t).call(this._boundValue(),e);s===i&&n.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=a;void 0!==t&&Object(t).spread&&(r=s),this._then(r,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,r,n){"use strict";r.exports=function(){var n=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},o=function(){return new j.PromiseInspection(this._target())},i=function(e){return j.reject(new v(e))};function s(){}var a={},c=e("./util");c.setReflectHandler(o);var l=function(){var e=t.domain;return void 0===e?null:e},p=function(){return{domain:l(),async:null}},u=c.isNode&&c.nodeSupportsAsyncResource?e("async_hooks").AsyncResource:null,d=function(){return{domain:l(),async:new u("Bluebird::Promise")}},h=c.isNode?p:function(){return null};c.notEnumerableProp(j,"_getContext",h);var f=e("./es5"),m=e("./async"),g=new m;f.defineProperty(j,"_async",{value:g});var y=e("./errors"),v=j.TypeError=y.TypeError;j.RangeError=y.RangeError;var b=j.CancellationError=y.CancellationError;j.TimeoutError=y.TimeoutError,j.OperationalError=y.OperationalError,j.RejectionError=y.OperationalError,j.AggregateError=y.AggregateError;var w=function(){},x={},k={},E=e("./thenables")(j,w),_=e("./promise_array")(j,w,E,i,s),S=e("./context")(j),C=S.create,P=e("./debuggability")(j,S,(function(){h=d,c.notEnumerableProp(j,"_getContext",d)}),(function(){h=p,c.notEnumerableProp(j,"_getContext",p)})),A=(P.CapturedTrace,e("./finally")(j,E,k)),O=e("./catch_filter")(k),T=e("./nodeback"),D=c.errorObj,N=c.tryCatch;function j(e){e!==w&&function(e,t){if(null==e||e.constructor!==j)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new v("expecting a function but got "+c.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(e){this.promise._resolveCallback(e)}function R(e){this.promise._rejectCallback(e,!1)}function M(e){var t=new j(w);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return j.prototype.toString=function(){return"[object Promise]"},j.prototype.caught=j.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),o=0;for(r=0;r<t-1;++r){var s=arguments[r];if(!c.isObject(s))return i("Catch statement predicate: expecting an object but got "+c.classString(s));n[o++]=s}if(n.length=o,"function"!=typeof(e=arguments[r]))throw new v("The last argument to .catch() must be a function, got "+c.toString(e));return this.then(void 0,O(n,e,this))}return this.then(void 0,e)},j.prototype.reflect=function(){return this._then(o,o,void 0,this,void 0)},j.prototype.then=function(e,t){if(P.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+c.classString(e);arguments.length>1&&(r+=", "+c.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},j.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},j.prototype.spread=function(e){return"function"!=typeof e?i("expecting a function but got "+c.classString(e)):this.all()._then(e,void 0,void 0,x,void 0)},j.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},j.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},j.prototype.error=function(e){return this.caught(c.originatesFromRejection,e)},j.getNewLibraryCopy=r.exports,j.is=function(e){return e instanceof j},j.fromNode=j.fromCallback=function(e){var t=new j(w);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=N(e)(T(t,r));return n===D&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},j.all=function(e){return new _(e).promise()},j.cast=function(e){var t=E(e);return t instanceof j||((t=new j(w))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},j.resolve=j.fulfilled=j.cast,j.reject=j.rejected=function(e){var t=new j(w);return t._captureStackTrace(),t._rejectCallback(e,!0),t},j.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+c.classString(e));return g.setScheduler(e)},j.prototype._then=function(e,t,r,n,o){var i=void 0!==o,s=i?o:new j(w),a=this._target(),l=a._bitField;i||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&l)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=h();if(0!=(50397184&l)){var u,d,f=a._settlePromiseCtx;0!=(33554432&l)?(d=a._rejectionHandler0,u=e):0!=(16777216&l)?(d=a._fulfillmentHandler0,u=t,a._unsetRejectionIsUnhandled()):(f=a._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),a._attachExtraTrace(d),u=t),g.invoke(f,a,{handler:c.contextBind(p,u),promise:s,receiver:n,value:d})}else a._addCallbacks(e,t,s,n,p);return s},j.prototype._length=function(){return 65535&this._bitField},j.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},j.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},j.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},j.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},j.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},j.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},j.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},j.prototype._isFinal=function(){return(4194304&this._bitField)>0},j.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},j.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},j.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},j.prototype._setAsyncGuaranteed=function(){if(!g.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},j.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},j.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==a)return void 0===t&&this._isBound()?this._boundValue():t},j.prototype._promiseAt=function(e){return this[4*e-4+2]},j.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},j.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},j.prototype._boundValue=function(){},j.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,o=e._receiverAt(0);void 0===o&&(o=a),this._addCallbacks(t,r,n,o,null)},j.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),o=e._promiseAt(t),i=e._receiverAt(t);void 0===i&&(i=a),this._addCallbacks(r,n,o,i,null)},j.prototype._addCallbacks=function(e,t,r,n,o){var i=this._length();if(i>=65531&&(i=0,this._setLength(0)),0===i)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=c.contextBind(o,e)),"function"==typeof t&&(this._rejectionHandler0=c.contextBind(o,t));else{var s=4*i-4;this[s+2]=r,this[s+3]=n,"function"==typeof e&&(this[s+0]=c.contextBind(o,e)),"function"==typeof t&&(this[s+1]=c.contextBind(o,t))}return this._setLength(i+1),i},j.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},j.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=E(e,this);if(!(r instanceof j))return this._fulfill(e);t&&this._propagateFrom(r,2);var o=r._target();if(o!==this){var i=o._bitField;if(0==(50397184&i)){var s=this._length();s>0&&o._migrateCallback0(this);for(var a=1;a<s;++a)o._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&i))this._fulfill(o._value());else if(0!=(16777216&i))this._reject(o._reason());else{var c=new b("late cancellation observer");o._attachExtraTrace(c),this._reject(c)}}else this._reject(n())}},j.prototype._rejectCallback=function(e,t,r){var n=c.ensureErrorObject(e),o=n===e;if(!o&&!r&&P.warnings()){var i="a promise was rejected with a non-error: "+c.classString(e);this._warn(i,!0)}this._attachExtraTrace(n,!!t&&o),this._reject(e)},j.prototype._resolveFromExecutor=function(e){if(e!==w){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,r)}));r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},j.prototype._settlePromiseFromHandler=function(e,t,r,n){var o=n._bitField;if(0==(65536&o)){var i;n._pushContext(),t===x?r&&"number"==typeof r.length?i=N(e).apply(this._boundValue(),r):(i=D).e=new v("cannot .spread() a non-array: "+c.classString(r)):i=N(e).call(t,r);var s=n._popContext();0==(65536&(o=n._bitField))&&(i===k?n._reject(r):i===D?n._rejectCallback(i.e,!1):(P.checkForgottenReturns(i,s,"",n,this),n._resolveCallback(i)))}},j.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},j.prototype._followee=function(){return this._rejectionHandler0},j.prototype._setFollowee=function(e){this._rejectionHandler0=e},j.prototype._settlePromise=function(e,t,r,n){var i=e instanceof j,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(i&&e._invokeInternalOnCancel(),r instanceof A&&r.isFinallyHandler()?(r.cancelPromise=e,N(t).call(r,n)===D&&e._reject(D.e)):t===o?e._fulfill(o.call(r)):r instanceof s?r._promiseCancelled(e):i||e instanceof _?e._cancel():r.cancel()):"function"==typeof t?i?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof s?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):i&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(n):e._reject(n))},j.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,o=e.value;"function"==typeof t?r instanceof j?this._settlePromiseFromHandler(t,n,o,r):t.call(n,o,r):r instanceof j&&r._reject(o)},j.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},j.prototype._settlePromise0=function(e,t,r){var n=this._promise0,o=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,o,t)},j.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},j.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},j.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return g.fatalError(e,c.isNode);(65535&t)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},j.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},j.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),o=this._promiseAt(r),i=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(o,n,i,t)}},j.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},j.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(j.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),j.defer=j.pending=function(){return P.deprecated("Promise.defer","new Promise"),{promise:new j(w),resolve:I,reject:R}},c.notEnumerableProp(j,"_makeSelfResolutionError",n),e("./method")(j,w,E,i,P),e("./bind")(j,w,E,P),e("./cancel")(j,_,i,P),e("./direct_resolve")(j),e("./synchronous_inspection")(j),e("./join")(j,_,E,w,g),j.Promise=j,j.version="3.7.2",e("./call_get.js")(j),e("./generators.js")(j,i,w,E,s,P),e("./map.js")(j,_,i,E,w,P),e("./nodeify.js")(j),e("./promisify.js")(j,w),e("./props.js")(j,_,E,i),e("./race.js")(j,w,E,i),e("./reduce.js")(j,_,i,E,w,P),e("./settle.js")(j,_,P),e("./some.js")(j,_,i),e("./timers.js")(j,w,P),e("./using.js")(j,i,E,C,w,P),e("./any.js")(j),e("./each.js")(j,w),e("./filter.js")(j,w),c.toFastProperties(j),c.toFastProperties(j.prototype),M({a:1}),M({b:2}),M({c:3}),M(1),M((function(){})),M(void 0),M(!1),M(new j(w)),P.setBounds(m.firstLineError,c.lastLineError),j}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i){var s=e("./util");function a(e){var n=this._promise=new t(r);e instanceof t&&(n._propagateFrom(e,3),e.suppressUnhandledRejections()),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.isArray,s.inherits(a,i),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(r,i){var a=n(this._values,this._promise);if(a instanceof t){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,i);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===i?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(i));else{var l=o("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var o=this._promise,i=!1,s=null,a=0;a<r;++a){var c=n(e[a],o);s=c instanceof t?(c=c._target())._bitField:null,i?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):i=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):i=this._promiseFulfilled(c,a)}i||o._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},o=e("./util"),i=e("./nodeback"),s=o.withAppended,a=o.maybeWrapAsError,c=o.canEvaluate,l=e("./errors").TypeError,p={__isPromisified__:!0},u=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return o.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function h(e){return!u.test(e)}function f(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=o.getDataPropertyOrDefault(e,t+r,p);return!!n&&f(n)}function g(e,t,r,n){for(var i=o.inheritedDataKeys(e),s=[],a=0;a<i.length;++a){var c=i[a],p=e[c],u=n===d||d(c);"function"!=typeof p||f(p)||m(e,c,t)||!n(c,p,e,u)||s.push(c,p)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var o=e[n];if(r.test(o))for(var i=o.replace(r,""),s=0;s<e.length;s+=2)if(e[s]===i)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,r),s}var y=c?void 0:function(e,c,l,p,u,d){var h=function(){return this}(),f=e;function m(){var o=c;c===n&&(o=this);var l=new t(r);l._captureStackTrace();var p="string"==typeof f&&this!==h?this[f]:e,u=i(l,d);try{p.apply(o,s(arguments,u))}catch(e){l._rejectCallback(a(e),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return"string"==typeof f&&(e=p),o.notEnumerableProp(m,"__isPromisified__",!0),m};function v(e,t,r,i,s){for(var a=new RegExp(t.replace(/([$])/,"\\$")+"$"),c=g(e,t,a,r),l=0,p=c.length;l<p;l+=2){var u=c[l],d=c[l+1],h=u+t;if(i===y)e[h]=y(u,n,u,d,t,s);else{var f=i(d,(function(){return y(u,n,u,d,t,s)}));o.notEnumerableProp(f,"__isPromisified__",!0),e[h]=f}}return o.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+o.classString(e));if(f(e))return e;var r=function(e,t,r){return y(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return o.copyDescriptors(e,r,h),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var i=t.filter;"function"!=typeof i&&(i=d);var s=t.promisifier;if("function"!=typeof s&&(s=y),!o.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=o.inheritedDataKeys(e),c=0;c<a.length;++c){var p=e[a[c]];"constructor"!==a[c]&&o.isClass(p)&&(v(p.prototype,n,i,s,r),v(p,n,i,s,r))}return v(e,n,i,s,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,s=e("./util"),a=s.isObject,c=e("./es5");"function"==typeof Map&&(i=Map);var l=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var o=new Array(2*n.size);return n.forEach(r,o),o}}();function p(e){var t,r=!1;if(void 0!==i&&e instanceof i)t=l(e),r=!0;else{var n=c.keys(e),o=n.length;t=new Array(2*o);for(var s=0;s<o;++s){var a=n[s];t[s]=e[a],t[s+o]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function u(e){var r,i=n(e);return a(i)?(r=i instanceof t?i._then(t.props,void 0,void 0,void 0,void 0):new p(i).promise(),i instanceof t&&r._propagateFrom(i,2),r):o("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}s.inherits(p,r),p.prototype._init=function(){},p.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new i,r=e.length/2|0,n=0;n<r;++n){var o=e[r+n],s=e[n];t.set(o,s)}return t}(this._values);else{r={};for(var n=this.length(),o=0,s=this.length();o<s;++o)r[this._values[o+n]]=this._values[o]}return this._resolve(r),!0}return!1},p.prototype.shouldCopyValues=function(){return!1},p.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return u(this)},t.props=function(e){return u(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var o=this._front+n-3;this._checkCapacity(n);var i=this._capacity-1;this[o+0&i]=e,this[o+1&i]=t,this[o+2&i]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+t],e[i+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i=e("./util");function s(e,a){var c,l=n(e);if(l instanceof t)return(c=l).then((function(e){return s(e,c)}));if(null===(e=i.asArray(e)))return o("expecting an array or an iterable object but got "+i.classString(e));var p=new t(r);void 0!==a&&p._propagateFrom(a,3);for(var u=p._fulfill,d=p._reject,h=0,f=e.length;h<f;++h){var m=e[h];(void 0!==m||h in e)&&t.cast(m)._then(u,d,void 0,p,null)}return p}t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=a.tryCatch;function l(e,r,n,o){this.constructor$(e);var s=t._getContext();this._fn=a.contextBind(s,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=o===i?Array(this._length):0===o?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function p(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function u(e,t,r,o){return"function"!=typeof t?n("expecting a function but got "+a.classString(t)):new l(e,t,r,o).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=o(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(h,void 0,void 0,this,void 0)):h.call(this,r)}function h(e){var r,n=this.array,o=n._promise,i=c(n._fn);o._pushContext(),(r=void 0!==n._eachValues?i.call(o._boundValue(),e,this.index,this.length):i.call(o._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=o._popContext();return s.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",o),r}a.inherits(l,r),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==i&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var r,n;this._values=e;var o=e.length;void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r;for(var i=n;i<o;++i){var s=e[i];s instanceof t&&s.suppressUnhandledRejections()}if(!r.isRejected())for(;n<o;++n){var a={accum:null,value:e[n],index:n,length:o,array:this};r=r._then(d,void 0,void 0,a,void 0),0==(127&n)&&r._setNoAsyncGuarantee()}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(p,p,void 0,r,this)},t.prototype.reduce=function(e,t){return u(this,e,t,null)},t.reduce=function(e,t,r,n){return u(e,t,r,n)}}},{"./util":36}],29:[function(e,o,i){"use strict";var s,a,c,l,p,u=e("./util"),d=u.getNativePromise();if(u.isNode&&"undefined"==typeof MutationObserver){var h=r.setImmediate,f=t.nextTick;s=u.isRecentNode?function(e){h.call(r,e)}:function(e){f.call(t,e)}}else if("function"==typeof d&&"function"==typeof d.resolve){var m=d.resolve();s=function(e){m.then(e)}}else s="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?void 0!==n?function(e){n(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(a=document.createElement("div"),c={attributes:!0},l=!1,p=document.createElement("div"),new MutationObserver((function(){a.classList.toggle("foo"),l=!1})).observe(p,c),function(e){var t=new MutationObserver((function(){t.disconnect(),e()}));t.observe(a,c),l||(l=!0,p.classList.toggle("foo"))});o.exports=s},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=t.PromiseInspection;function i(e){this.constructor$(e)}e("./util").inherits(i,r),i.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(e,t){var r=new o;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},i.prototype._promiseRejected=function(e,t){var r=new o;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new i(e).promise()},t.allSettled=function(e){return new i(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=e("./errors").RangeError,s=e("./errors").AggregateError,a=o.isArray,c={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function p(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new l(e),o=r.promise();return r.setHowMany(t),r.init(),o}o.inherits(l,r),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new i(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return p(e,t)},t.prototype.some=function(e){return p(this,e)},t._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},o=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},i=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return i.call(this._target())},e.prototype.isFulfilled=function(){return o.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),o=n.errorObj,i=n.isObject,s={}.hasOwnProperty;return function(e,a){if(i(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return o.e=e,o}}(e);if(c===o){a&&a._pushContext();var l=t.reject(c.e);return a&&a._popContext(),l}if("function"==typeof c)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(l=new t(r),e._then(l._fulfill,l._reject,void 0,l,null),l):function(e,i,s){var a=new t(r),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var l=n.tryCatch(i).call(e,(function(e){a&&(a._resolveCallback(e),a=null)}),(function(e){a&&(a._rejectCallback(e,!1,!0),a=null)}));return a&&l===o&&(a._rejectCallback(l.e,!0,!0),a=null),c}(e,c,a)}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o=e("./util"),i=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,o){var i,c;return void 0!==o?(i=t.resolve(o)._then(a,null,null,e,void 0),n.cancellation()&&o instanceof t&&i._setOnCancel(o)):(i=new t(r),c=setTimeout((function(){i._fulfill()}),+e),n.cancellation()&&i._setOnCancel(new s(c)),i._captureStackTrace()),i._setAsyncGuaranteed(),i};function l(e){return clearTimeout(this.handle),e}function p(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){var r,a;e=+e;var c=new s(setTimeout((function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new i("operation timed out"):new i(t),o.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,a)}),e));return n.cancellation()?(a=this.then(),(r=a._then(l,p,void 0,c,void 0))._setOnCancel(c)):r=this._then(l,p,void 0,c,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,s){var a=e("./util"),c=e("./errors").TypeError,l=e("./util").inherits,p=a.errorObj,u=a.tryCatch,d={};function h(e){setTimeout((function(){throw e}),0)}function f(e,r){var o=0,s=e.length,a=new t(i);return function i(){if(o>=s)return a._fulfill();var c=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[o++]);if(c instanceof t&&c._isDisposable()){try{c=n(c._getDisposer().tryDispose(r),e.promise)}catch(e){return h(e)}if(c instanceof t)return c._then(i,h,null,null,null)}i()}(),a}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function g(e,t,r){this.constructor$(e,t,r)}function y(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==d?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},l(g,m),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var o,i=arguments[e-1];if("function"!=typeof i)return r("expecting a function but got "+a.classString(i));var c=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,c=!1):(o=arguments,e--);for(var l=new v(e),d=0;d<e;++d){var h=o[d];if(m.isDisposer(h)){var g=h;(h=h.promise())._setDisposable(g)}else{var b=n(h);b instanceof t&&(h=b._then(y,null,null,{resources:l,index:d},void 0))}l[d]=h}var w=new Array(l.length);for(d=0;d<w.length;++d)w[d]=t.resolve(l[d]).reflect();var x=t.all(w).then((function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return p.e=r.error(),p;if(!r.isFulfilled())return void x.cancel();e[t]=r.value()}k._pushContext(),i=u(i);var n=c?i.apply(void 0,e):i(e),o=k._popContext();return s.checkForgottenReturns(n,o,"Promise.using",k),n})),k=x.lastly((function(){var e=new t.PromiseInspection(x);return f(l,e)}));return l.promise=k,k._setOnCancel(l),k},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,o());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,n,o){"use strict";var i=e("./es5"),s="undefined"==typeof navigator,a={e:{}},c,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function p(){try{var e=c;return c=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function u(e){return c=e,p}var d=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function h(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function f(e){return"function"==typeof e||"object"==typeof e&&null!==e}function m(e){return h(e)?new Error(P(e)):e}function g(e,t){var r,n=e.length,o=new Array(n+1);for(r=0;r<n;++r)o[r]=e[r];return o[r]=t,o}function y(e,t,r){if(!i.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(e,t,r){if(h(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return i.defineProperty(e,t,n),e}function b(e){throw e}var w=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(i.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],o=Object.create(null);null!=e&&!t(e);){var s;try{s=r(e)}catch(e){return n}for(var a=0;a<s.length;++a){var c=s[a];if(!o[c]){o[c]=!0;var l=Object.getOwnPropertyDescriptor(e,c);null!=l&&null==l.get&&null==l.set&&n.push(c)}}e=i.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var o=[];e:for(var i in r)if(n.call(r,i))o.push(i);else{for(var s=0;s<e.length;++s)if(n.call(e[s],i))continue e;o.push(i)}return o}}(),x=/this\s*\.\s*\S+\s*=/;function k(e){try{if("function"==typeof e){var t=i.names(e.prototype),r=i.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),o=x.test(e+"")&&i.names(e).length>0;if(r||n||o)return!0}return!1}catch(e){return!1}}function E(e){function t(){}t.prototype=e;var r=new t;function n(){return typeof r.foo}return n(),n(),e}var _=/^[a-z$_][a-z$_0-9]*$/i;function S(e){return _.test(e)}function C(e,t,r){for(var n=new Array(e),o=0;o<e;++o)n[o]=t+o+r;return n}function P(e){try{return e+""}catch(e){return"[no string representation]"}}function A(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function O(e){try{v(e,"isOperational",!0)}catch(e){}}function T(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function D(e){return A(e)&&i.propertyIsWritable(e,"stack")}var N="stack"in new Error?function(e){return D(e)?e:new Error(P(e))}:function(e){if(D(e))return e;try{throw new Error(P(e))}catch(e){return e}};function j(e){return{}.toString.call(e)}function I(e,t,r){for(var n=i.names(e),o=0;o<n.length;++o){var s=n[o];if(r(s))try{i.defineProperty(t,s,i.getDescriptor(e,s))}catch(e){}}}var R=function(e){return i.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var M="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};R=function(e){return i.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?M(e):null}}var L=void 0!==t&&"[object process]"===j(t).toLowerCase(),F=void 0!==t&&void 0!==t.env,G;function B(e){return F?t.env[e]:void 0}function z(){if("function"==typeof Promise)try{if("[object Promise]"===j(new Promise((function(){}))))return Promise}catch(e){}}function U(e,t){if(null===e||"function"!=typeof t||t===G)return t;null!==e.domain&&(t=e.domain.bind(t));var r=e.async;if(null!==r){var n=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=n,e[1]=this,r.runInAsyncScope.apply(r,e)}}return t}var q={setReflectHandler:function(e){G=e},isClass:k,isIdentifier:S,inheritedDataKeys:w,getDataPropertyOrDefault:y,thrower:b,isArray:i.isArray,asArray:R,notEnumerableProp:v,isPrimitive:h,isObject:f,isError:A,canEvaluate:s,errorObj:a,tryCatch:u,inherits:d,withAppended:g,maybeWrapAsError:m,toFastProperties:E,filledRange:C,toString:P,canAttachTrace:D,ensureErrorObject:N,originatesFromRejection:T,markAsOriginatingFromRejection:O,classString:j,copyDescriptors:I,isNode:L,hasEnvVariables:F,env:B,global:l,getNativePromise:z,contextBind:U},$;q.isRecentNode=q.isNode&&(t.versions&&t.versions.node?$=t.versions.node.split(".").map(Number):t.version&&($=t.version.split(".").map(Number)),0===$[0]&&$[1]>10||$[0]>0),q.nodeSupportsAsyncResource=q.isNode&&function(){var t=!1;try{t="function"==typeof e("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(e){t=!1}return t}(),q.isNode&&q.toFastProperties(t);try{throw new Error}catch(e){q.lastLineError=e}n.exports=q},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},e.exports=o(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,r(6),r(23),r(303).setImmediate)},function(e,t,r){const n=r(310),o=r(24),i=r(62),s=r(132);function a(e){const t=e;return e.name||(t.name=e.topic),e.cases||(t.cases=[]),e}t.validate=function(e){const t="undefined"!=typeof window&&window.tv4?window.tv4:r(104);if(!t)throw new Error("TV4 not available, unable to validate");t.reset(),Object.keys(s).forEach(e=>{const r=s[e];t.addSchema(r.id,r)});const n=t.validateMultiple(e,"testsfile.json");return n.missing.length&&(n.passed=!1),n},t.create=e=>a(e),t.loadYAML=function(e,t){const n=[];try{("undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(133)).safeLoadAll(e,e=>n.push(a(e)))}catch(e){return void t(e)}t(null,n)},t.loadYAMLSync=function(e){const t="undefined"!=typeof window&&window.jsyaml?window.jsyaml:r(133),n=[];return t.safeLoadAll(e,e=>n.push(a(e))),n},t.getSuitesSync=function(e){if(!i.isArray(e))return t.getSuitesSync([e]);let n=[];return e.forEach(e=>{n=n.concat(function(e){const n=r(12);if(n.statSync(e).isDirectory()){const r=n.readdirSync(e).filter(e=>".yaml"===o.extname(e)).map(t=>o.join(e,t));return t.getSuitesSync(r)}const i=n.readFileSync(e,"utf-8");return t.loadYAMLSync(i)}(e))}),n},t.getSuites=function(e,s){if(!i.isArray(e))return void t.getSuites([e],s);i.asyncSeries(e,(e,s)=>{i.startsWith(e,"http://")?function(e,r){n(e).then(e=>e.text()).then(e=>new Promise((r,n)=>{t.loadYAML(e,(e,t)=>{e?n(e):r(t)})})).then(e=>{r(null,e)},r)}(e,s):function(e,n){const i=r(12);i.stat(e,(r,s)=>{r?n(r):s.isDirectory()?i.readdir(e,(r,i)=>{if(r)return void n(r);const s=i.filter(e=>".yaml"===o.extname(e)).map(t=>o.join(e,t));t.getSuites(s,n)}):i.readFile(e,"utf-8",(e,r)=>{e?n(e):t.loadYAML(r,n)})})}(e,s)},(e,t)=>{if(e)return void s(e);const r=t.reduce((e,t)=>e.concat(t),[]);s(null,r)})}},function(e,t,r){"use strict";var n=r(45);e.exports=new n({explicit:[r(321),r(322),r(323)]})},function(e,t,r){(function(t){var r;r=function(){"use strict";var e="function"==typeof Promise,r="object"==typeof self?self:t,n="undefined"!=typeof Symbol,o="undefined"!=typeof Map,i="undefined"!=typeof Set,s="undefined"!=typeof WeakMap,a="undefined"!=typeof WeakSet,c="undefined"!=typeof DataView,l=n&&void 0!==Symbol.iterator,p=n&&void 0!==Symbol.toStringTag,u=i&&"function"==typeof Set.prototype.entries,d=o&&"function"==typeof Map.prototype.entries,h=u&&Object.getPrototypeOf((new Set).entries()),f=d&&Object.getPrototypeOf((new Map).entries()),m=l&&"function"==typeof Array.prototype[Symbol.iterator],g=m&&Object.getPrototypeOf([][Symbol.iterator]()),y=l&&"function"==typeof String.prototype[Symbol.iterator],v=y&&Object.getPrototypeOf(""[Symbol.iterator]());return function(t){var n=typeof t;if("object"!==n)return n;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(!1===p||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var l=p&&t[Symbol.toStringTag];if("string"==typeof l)return l;var u=Object.getPrototypeOf(t);return u===RegExp.prototype?"RegExp":u===Date.prototype?"Date":e&&u===Promise.prototype?"Promise":i&&u===Set.prototype?"Set":o&&u===Map.prototype?"Map":a&&u===WeakSet.prototype?"WeakSet":s&&u===WeakMap.prototype?"WeakMap":c&&u===DataView.prototype?"DataView":o&&u===f?"Map Iterator":i&&u===h?"Set Iterator":m&&u===g?"Array Iterator":y&&u===v?"String Iterator":null===u?"Object":Object.prototype.toString.call(t).slice(8,-1)}},e.exports=r()}).call(this,r(23))},function(e,t,r){var n=r(140),o=r(141),i=r(345),s=r(46);e.exports=function(e,t,r,n){return a({showHidden:t,seen:[],stylize:function(e){return e}},e,void 0===r?2:r)};function a(e,r,f){if(r&&"function"==typeof r.inspect&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var m=r.inspect(f,e);return"string"!=typeof m&&(m=a(e,m,f)),m}var g,y=function(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string");case"number":return 0===t&&1/t==-1/0?e.stylize("-0","number"):e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean");case"symbol":return e.stylize(t.toString(),"symbol")}if(null===t)return e.stylize("null","null")}(e,r);if(y)return y;if(g=r,"object"==typeof HTMLElement?g instanceof HTMLElement:g&&"object"==typeof g&&"nodeType"in g&&1===g.nodeType&&"string"==typeof g.nodeName){if("outerHTML"in r)return r.outerHTML;try{if(document.xmlVersion)return(new XMLSerializer).serializeToString(r);var v=document.createElementNS("http://www.w3.org/1999/xhtml","_");v.appendChild(r.cloneNode(!1));var b=v.innerHTML.replace("><",">"+r.innerHTML+"<");return v.innerHTML="",b}catch(e){}}var w,x,k=i(r),E=e.showHidden?o(r):k;if(0===E.length||d(r)&&(1===E.length&&"stack"===E[0]||2===E.length&&"description"===E[0]&&"stack"===E[1])){if("function"==typeof r)return x=(w=n(r))?": "+w:"",e.stylize("[Function"+x+"]","special");if(p(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(u(r))return e.stylize(Date.prototype.toUTCString.call(r),"date");if(d(r))return c(r)}var _,S,C="",P=!1,A=!1,O=["{","}"];if("object"==typeof(_=r)&&/\w+Array]$/.test(h(_))&&(A=!0,O=["[","]"]),function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===h(e)}(r)&&(P=!0,O=["[","]"]),"function"==typeof r&&(C=" [Function"+(x=(w=n(r))?": "+w:"")+"]"),p(r)&&(C=" "+RegExp.prototype.toString.call(r)),u(r)&&(C=" "+Date.prototype.toUTCString.call(r)),d(r))return c(r);if(0===E.length&&(!P||0==r.length))return O[0]+C+O[1];if(f<0)return p(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");if(e.seen.push(r),P)S=function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)Object.prototype.hasOwnProperty.call(t,String(s))?i.push(l(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(e,t,r,n,o,!0))})),i}(e,r,f,k,E);else{if(A)return function(e){for(var t="[ ",r=0;r<e.length;++r){if(t.length>=s.truncateThreshold-7){t+="...";break}t+=e[r]+", "}-1!==(t+=" ]").indexOf(",  ]")&&(t=t.replace(",  ]"," ]"));return t}(r);S=E.map((function(t){return l(e,r,f,k,t,P)}))}return e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return e+t.length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(S,C,O)}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o,i){var s,c,l=Object.getOwnPropertyDescriptor(t,o);if(l&&(l.get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special"))),n.indexOf(o)<0&&(s="["+o+"]"),c||(e.seen.indexOf(t[o])<0?(c=a(e,t[o],null===r?null:r-1)).indexOf("\n")>-1&&(c=i?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),void 0===s){if(i&&o.match(/^\d+$/))return c;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+c}function p(e){return"object"==typeof e&&"[object RegExp]"===h(e)}function u(e){return"object"==typeof e&&"[object Date]"===h(e)}function d(e){return"object"==typeof e&&"[object Error]"===h(e)}function h(e){return Object.prototype.toString.call(e)}},function(e,t){e.exports=function(e){return[":~:",e,":~:"].join("")}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(d,e);var t,r,n,l=c(d);function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,d);var r=t;return e=l.call(this,r),r.catchExceptions&&(window.onerror=function(e){return this.client&&this.send("network","error",e,{href:this.context?this.context.href:this.client.location.href}),console.error(e),!0}.bind(p(e))),r.defaultPermissions.length||(r.defaultPermissions=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","network:data","network:control","network:status"]),e.client=null,e}return t=d,(r=[{key:"setClient",value:function(e){this.client=e}},{key:"send",value:function(e,t,r,n){if(this.client){var o=r;r instanceof Error&&(o={message:r.message,stack:r.stack});var i=this.context;i||(i=n),this.client.postMessage(JSON.stringify({protocol:e,command:t,payload:o}),i.href),s(u(d.prototype),"send",this).call(this,e,t,r,i)}}},{key:"sendAll",value:function(e,t,r){this.send(e,t,r,this.context)}}])&&i(t.prototype,r),n&&i(t,n),d}(r(153));e.exports=d},function(e,t,r){"use strict";(function(t){var n=r(69);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function i(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(67),a=Object.prototype.hasOwnProperty,c=Array.prototype.slice,l="foo"===function(){}.name;function p(e){return Object.prototype.toString.call(e)}function u(e){return!i(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var d=e.exports=v,h=/\s*function\s+([^\(\s]*)\s*/;function f(e){if(s.isFunction(e)){if(l)return e.name;var t=e.toString().match(h);return t&&t[1]}}function m(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function g(e){if(l||!s.isFunction(e))return s.inspect(e);var t=f(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,n,o){throw new d.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function v(e,t){e||y(e,!0,t,"==",d.ok)}function b(e,t,r,n){if(e===t)return!0;if(i(e)&&i(t))return 0===o(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&p(e)===p(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var a=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==a&&a===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=w(e),i=w(t);if(o&&!i||!o&&i)return!1;if(o)return e=c.call(e),t=c.call(t),b(e,t,r);var a,l,p=E(e),u=E(t);if(p.length!==u.length)return!1;for(p.sort(),u.sort(),l=p.length-1;l>=0;l--)if(p[l]!==u[l])return!1;for(l=p.length-1;l>=0;l--)if(a=p[l],!b(e[a],t[a],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function w(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function k(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&y(o,r,"Missing expected exception"+n);var i="string"==typeof n,a=!e&&o&&!r;if((!e&&s.isError(o)&&i&&x(o,r)||a)&&y(o,r,"Got unwanted exception"+n),e&&o&&r&&!x(o,r)||!e&&o)throw o}d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return m(g(e.actual),128)+" "+e.operator+" "+m(g(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=f(t),i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},s.inherits(d.AssertionError,Error),d.fail=y,d.ok=v,d.equal=function(e,t,r){e!=t&&y(e,t,r,"==",d.equal)},d.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",d.notEqual)},d.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",d.deepEqual)},d.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",d.deepStrictEqual)},d.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",d.notDeepEqual)},d.notDeepStrictEqual=function e(t,r,n){b(t,r,!0)&&y(t,r,n,"notDeepStrictEqual",e)},d.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",d.strictEqual)},d.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",d.notStrictEqual)},d.throws=function(e,t,r){k(!0,e,t,r)},d.doesNotThrow=function(e,t,r){k(!1,e,t,r)},d.ifError=function(e){if(e)throw e},d.strict=n((function e(t,r){t||y(t,!0,r,"==",e)}),d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict;var E=Object.keys||function(e){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t}}).call(this,r(23))},function(e,t,r){e.exports=p,p.Minimatch=u;var n={sep:"/"};try{n=r(24)}catch(e){}var o=p.GLOBSTAR=u.GLOBSTAR={},i=r(489),s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function l(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),Object.keys(e).forEach((function(t){r[t]=e[t]})),r}function p(e,t,r){if("string"!=typeof t)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new u(t,r).match(e))}function u(e,t){if(!(this instanceof u))return new u(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==n.sep&&(e=e.split(n.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function d(e,t){if(t||(t=this instanceof u?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:i(e)}p.filter=function(e,t){return t=t||{},function(r,n,o){return p(r,e,t)}},p.defaults=function(e){if(!e||!Object.keys(e).length)return p;var t=p,r=function(r,n,o){return t.minimatch(r,n,l(e,o))};return r.Minimatch=function(r,n){return new t.Minimatch(r,l(e,n))},r},u.defaults=function(e){return e&&Object.keys(e).length?p.defaults(e).Minimatch:u},u.prototype.debug=function(){},u.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(e){return e.split(c)})),this.debug(this.pattern,r),r=r.map((function(e,t,r){return e.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},u.prototype.parseNegate=function(){var e=this.pattern,t=!1,r=this.options,n=0;if(r.nonegate)return;for(var o=0,i=e.length;o<i&&"!"===e.charAt(o);o++)t=!t,n++;n&&(this.pattern=e.substr(n));this.negate=t},p.braceExpand=function(e,t){return d(e,t)},u.prototype.braceExpand=d,u.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===e)return o;if(""===e)return"";var n,i="",c=!!r.nocase,l=!1,p=[],u=[],d=!1,f=-1,m=-1,g="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",y=this;function v(){if(n){switch(n){case"*":i+="[^/]*?",c=!0;break;case"?":i+="[^/]",c=!0;break;default:i+="\\"+n}y.debug("clearStateChar %j %j",n,i),n=!1}}for(var b,w=0,x=e.length;w<x&&(b=e.charAt(w));w++)if(this.debug("%s\t%s %s %j",e,w,i,b),l&&a[b])i+="\\"+b,l=!1;else switch(b){case"/":return!1;case"\\":v(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,w,i,b),d){this.debug("  in class"),"!"===b&&w===m+1&&(b="^"),i+=b;continue}y.debug("call clearStateChar %j",n),v(),n=b,r.noext&&v();continue;case"(":if(d){i+="(";continue}if(!n){i+="\\(";continue}p.push({type:n,start:w-1,reStart:i.length,open:s[n].open,close:s[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(d||!p.length){i+="\\)";continue}v(),c=!0;var k=p.pop();i+=k.close,"!"===k.type&&u.push(k),k.reEnd=i.length;continue;case"|":if(d||!p.length||l){i+="\\|",l=!1;continue}v(),i+="|";continue;case"[":if(v(),d){i+="\\"+b;continue}d=!0,m=w,f=i.length,i+=b;continue;case"]":if(w===m+1||!d){i+="\\"+b,l=!1;continue}if(d){var E=e.substring(m+1,w);try{RegExp("["+E+"]")}catch(e){var _=this.parse(E,h);i=i.substr(0,f)+"\\["+_[0]+"\\]",c=c||_[1],d=!1;continue}}c=!0,d=!1,i+=b;continue;default:v(),l?l=!1:!a[b]||"^"===b&&d||(i+="\\"),i+=b}d&&(E=e.substr(m+1),_=this.parse(E,h),i=i.substr(0,f)+"\\["+_[0],c=c||_[1]);for(k=p.pop();k;k=p.pop()){var S=i.slice(k.reStart+k.open.length);this.debug("setting tail",i,k),S=S.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,r){return r||(r="\\"),t+t+r+"|"})),this.debug("tail=%j\n   %s",S,S,k,i);var C="*"===k.type?"[^/]*?":"?"===k.type?"[^/]":"\\"+k.type;c=!0,i=i.slice(0,k.reStart)+C+"\\("+S}v(),l&&(i+="\\\\");var P=!1;switch(i.charAt(0)){case".":case"[":case"(":P=!0}for(var A=u.length-1;A>-1;A--){var O=u[A],T=i.slice(0,O.reStart),D=i.slice(O.reStart,O.reEnd-8),N=i.slice(O.reEnd-8,O.reEnd),j=i.slice(O.reEnd);N+=j;var I=T.split("(").length-1,R=j;for(w=0;w<I;w++)R=R.replace(/\)[+*?]?/,"");var M="";""===(j=R)&&t!==h&&(M="$"),i=T+D+j+M+N}""!==i&&c&&(i="(?=.)"+i);P&&(i=g+i);if(t===h)return[i,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var L=r.nocase?"i":"";try{var F=new RegExp("^"+i+"$",L)}catch(e){return new RegExp("$.")}return F._glob=e,F._src=i,F};var h={};p.makeRe=function(e,t){return new u(e,t||{}).makeRe()},u.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"",i=e.map((function(e){return e.map((function(e){return e===o?r:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp},p.match=function(e,t,r){var n=new u(t,r=r||{});return e=e.filter((function(e){return n.match(e)})),n.options.nonull&&!e.length&&e.push(t),e},u.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var r=this.options;"/"!==n.sep&&(e=e.split(n.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var o,i,s=this.set;for(this.debug(this.pattern,"set",s),i=e.length-1;i>=0&&!(o=e[i]);i--);for(i=0;i<s.length;i++){var a=s[i],l=e;if(r.matchBase&&1===a.length&&(l=[o]),this.matchOne(l,a,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},u.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,s=0,a=e.length,c=t.length;i<a&&s<c;i++,s++){this.debug("matchOne loop");var l,p=t[s],u=e[i];if(this.debug(t,p,u),!1===p)return!1;if(p===o){this.debug("GLOBSTAR",[t,p,u]);var d=i,h=s+1;if(h===c){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;d<a;){var f=e[d];if(this.debug("\nglobstar while",e,d,t,h,f),this.matchOne(e.slice(d),t.slice(h),r))return this.debug("globstar found match!",d,a,f),!0;if("."===f||".."===f||!n.dot&&"."===f.charAt(0)){this.debug("dot detected!",e,d,t,h);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,t,h),d!==a))}if("string"==typeof p?(l=n.nocase?u.toLowerCase()===p.toLowerCase():u===p,this.debug("string match",p,u,l)):(l=u.match(p),this.debug("pattern match",p,u,l)),!l)return!1}if(i===a&&s===c)return!0;if(i===a)return r;if(s===c)return i===a-1&&""===e[i];throw new Error("wtf?")}},function(e,t,r){"use strict";(function(t){function r(e){return"/"===e.charAt(0)}function n(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),r=t[1]||"",n=Boolean(r&&":"!==r.charAt(1));return Boolean(t[2]||n)}e.exports="win32"===t.platform?n:r,e.exports.posix=r,e.exports.win32=n}).call(this,r(6))},function(e,t,r){var n;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(o,i,s,a){"use strict";var c,l=["","webkit","Moz","MS","ms","o"],p=i.createElement("div"),u=Math.round,d=Math.abs,h=Date.now;function f(e,t,r){return setTimeout(x(e,r),t)}function m(e,t,r){return!!Array.isArray(e)&&(g(e,r[t],r),!0)}function g(e,t,r){var n;if(e)if(e.forEach)e.forEach(t,r);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(r,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n,e)}function y(e,t,r){var n="DEPRECATED METHOD: "+t+"\n"+r+" AT \n";return function(){var t=new Error("get-stack-trace"),r=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=o.console&&(o.console.warn||o.console.log);return i&&i.call(o.console,n,r),e.apply(this,arguments)}}c="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t}:Object.assign;var v=y((function(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;)(!r||r&&void 0===e[n[o]])&&(e[n[o]]=t[n[o]]),o++;return e}),"extend","Use `assign`."),b=y((function(e,t){return v(e,t,!0)}),"merge","Use `assign`.");function w(e,t,r){var n,o=t.prototype;(n=e.prototype=Object.create(o)).constructor=e,n._super=o,r&&c(n,r)}function x(e,t){return function(){return e.apply(t,arguments)}}function k(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function E(e,t){return void 0===e?t:e}function _(e,t,r){g(A(t),(function(t){e.addEventListener(t,r,!1)}))}function S(e,t,r){g(A(t),(function(t){e.removeEventListener(t,r,!1)}))}function C(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function P(e,t){return e.indexOf(t)>-1}function A(e){return e.trim().split(/\s+/g)}function O(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var n=0;n<e.length;){if(r&&e[n][r]==t||!r&&e[n]===t)return n;n++}return-1}function T(e){return Array.prototype.slice.call(e,0)}function D(e,t,r){for(var n=[],o=[],i=0;i<e.length;){var s=t?e[i][t]:e[i];O(o,s)<0&&n.push(e[i]),o[i]=s,i++}return r&&(n=t?n.sort((function(e,r){return e[t]>r[t]})):n.sort()),n}function N(e,t){for(var r,n,o=t[0].toUpperCase()+t.slice(1),i=0;i<l.length;){if((n=(r=l[i])?r+o:t)in e)return n;i++}}var j=1;function I(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}var R="ontouchstart"in o,M=void 0!==N(o,"PointerEvent"),L=R&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],G=["clientX","clientY"];function B(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){k(e.options.enable,[e])&&r.handler(t)},this.init()}function z(e,t,r){var n=r.pointers.length,o=r.changedPointers.length,i=1&t&&n-o==0,s=12&t&&n-o==0;r.isFirst=!!i,r.isFinal=!!s,i&&(e.session={}),r.eventType=t,function(e,t){var r=e.session,n=t.pointers,o=n.length;r.firstInput||(r.firstInput=U(t));o>1&&!r.firstMultiple?r.firstMultiple=U(t):1===o&&(r.firstMultiple=!1);var i=r.firstInput,s=r.firstMultiple,a=s?s.center:i.center,c=t.center=q(n);t.timeStamp=h(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=W(a,c),t.distance=V(a,c),function(e,t){var r=t.center,n=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},n=e.offsetDelta={x:r.x,y:r.y});t.deltaX=o.x+(r.x-n.x),t.deltaY=o.y+(r.y-n.y)}(r,t),t.offsetDirection=H(t.deltaX,t.deltaY);var l=$(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,t.scale=s?(p=s.pointers,u=n,V(u[0],u[1],G)/V(p[0],p[1],G)):1,t.rotation=s?function(e,t){return W(t[1],t[0],G)+W(e[1],e[0],G)}(s.pointers,n):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,function(e,t){var r,n,o,i,s=e.lastInterval||t,a=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(a>25||void 0===s.velocity)){var c=t.deltaX-s.deltaX,l=t.deltaY-s.deltaY,p=$(a,c,l);n=p.x,o=p.y,r=d(p.x)>d(p.y)?p.x:p.y,i=H(c,l),e.lastInterval=t}else r=s.velocity,n=s.velocityX,o=s.velocityY,i=s.direction;t.velocity=r,t.velocityX=n,t.velocityY=o,t.direction=i}(r,t);var p,u;var f=e.element;C(t.srcEvent.target,f)&&(f=t.srcEvent.target);t.target=f}(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function U(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:u(e.pointers[r].clientX),clientY:u(e.pointers[r].clientY)},r++;return{timeStamp:h(),pointers:t,center:q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function q(e){var t=e.length;if(1===t)return{x:u(e[0].clientX),y:u(e[0].clientY)};for(var r=0,n=0,o=0;o<t;)r+=e[o].clientX,n+=e[o].clientY,o++;return{x:u(r/t),y:u(n/t)}}function $(e,t,r){return{x:t/e||0,y:r/e||0}}function H(e,t){return e===t?1:d(e)>=d(t)?e<0?2:4:t<0?8:16}function V(e,t,r){r||(r=F);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return Math.sqrt(n*n+o*o)}function W(e,t,r){r||(r=F);var n=t[r[0]]-e[r[0]],o=t[r[1]]-e[r[1]];return 180*Math.atan2(o,n)/Math.PI}B.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(I(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4};function X(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,B.apply(this,arguments)}w(X,B,{handler:function(e){var t=J[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Y={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},K={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",Z="pointermove pointerup pointercancel";function ee(){this.evEl=Q,this.evWin=Z,B.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(Q="MSPointerDown",Z="MSPointerMove MSPointerUp MSPointerCancel"),w(ee,B,{handler:function(e){var t=this.store,r=!1,n=e.type.toLowerCase().replace("ms",""),o=Y[n],i=K[e.pointerType]||e.pointerType,s="touch"==i,a=O(t,e.pointerId,"pointerId");1&o&&(0===e.button||s)?a<0&&(t.push(e),a=t.length-1):12&o&&(r=!0),a<0||(t[a]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),r&&t.splice(a,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function re(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,B.apply(this,arguments)}function ne(e,t){var r=T(e.touches),n=T(e.changedTouches);return 12&t&&(r=D(r.concat(n),"identifier",!0)),[r,n]}w(re,B,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var r=ne.call(this,e,t);12&t&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}}});var oe={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ie(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},B.apply(this,arguments)}function se(e,t){var r=T(e.touches),n=this.targetIds;if(3&t&&1===r.length)return n[r[0].identifier]=!0,[r,r];var o,i,s=T(e.changedTouches),a=[],c=this.target;if(i=r.filter((function(e){return C(e.target,c)})),1===t)for(o=0;o<i.length;)n[i[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),12&t&&delete n[s[o].identifier],o++;return a.length?[D(i.concat(a),"identifier",!0),a]:void 0}w(ie,B,{handler:function(e){var t=oe[e.type],r=se.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:e})}});function ae(){B.apply(this,arguments);var e=x(this.handler,this);this.touch=new ie(this.manager,e),this.mouse=new X(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ce(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,le.call(this,t)):12&e&&le.call(this,t)}function le(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(r);e>-1&&n.splice(e,1)}),2500)}}function pe(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],i=Math.abs(t-o.x),s=Math.abs(r-o.y);if(i<=25&&s<=25)return!0}return!1}w(ae,B,{handler:function(e,t,r){var n="touch"==r.pointerType,o="mouse"==r.pointerType;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(n)ce.call(this,t,r);else if(o&&pe.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ue=N(p.style,"touchAction"),de=void 0!==ue,he=function(){if(!de)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){e[r]=!t||o.CSS.supports("touch-action",r)})),e}();function fe(e,t){this.manager=e,this.set(t)}fe.prototype={set:function(e){"compute"==e&&(e=this.compute()),de&&this.manager.element.style&&he[e]&&(this.manager.element.style[ue]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,(function(t){k(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(P(e,"none"))return"none";var t=P(e,"pan-x"),r=P(e,"pan-y");if(t&&r)return"none";if(t||r)return t?"pan-x":"pan-y";if(P(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,o=P(n,"none")&&!he.none,i=P(n,"pan-y")&&!he["pan-y"],s=P(n,"pan-x")&&!he["pan-x"];if(o){var a=1===e.pointers.length,c=e.distance<2,l=e.deltaTime<250;if(a&&c&&l)return}if(!s||!i)return o||i&&6&r||s&&24&r?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function me(e){this.options=c({},this.defaults,e||{}),this.id=j++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function ge(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ye(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ve(e,t){var r=t.manager;return r?r.get(e):e}function be(){me.apply(this,arguments)}function we(){be.apply(this,arguments),this.pX=null,this.pY=null}function xe(){be.apply(this,arguments)}function ke(){me.apply(this,arguments),this._timer=null,this._input=null}function Ee(){be.apply(this,arguments)}function _e(){be.apply(this,arguments)}function Se(){me.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ce(e,t){return(t=t||{}).recognizers=E(t.recognizers,Ce.defaults.preset),new Pe(e,t)}me.prototype={defaults:{},set:function(e){return c(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(m(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ve(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return m(e,"dropRecognizeWith",this)||(e=ve(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(m(e,"requireFailure",this))return this;var t=this.requireFail;return-1===O(t,e=ve(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this))return this;e=ve(e,this);var t=O(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function n(r){t.manager.emit(r,e)}r<8&&n(t.options.event+ge(r)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),r>=8&&n(t.options.event+ge(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=c({},e);if(!k(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},w(be,me,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,n=6&t,o=this.attrTest(e);return n&&(8&r||!o)?16|t:n||o?4&r?8|t:2&t?4|t:2:32}}),w(we,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,r=!0,n=e.distance,o=e.direction,i=e.deltaX,s=e.deltaY;return o&t.direction||(6&t.direction?(o=0===i?1:i<0?2:4,r=i!=this.pX,n=Math.abs(e.deltaX)):(o=0===s?1:s<0?8:16,r=s!=this.pY,n=Math.abs(e.deltaY))),e.direction=o,r&&n>t.threshold&&o&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ye(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),w(xe,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),w(ke,me,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!n||!r||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),w(Ee,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),w(_e,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return we.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return 30&r?t=e.overallVelocity:6&r?t=e.overallVelocityX:24&r&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&d(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ye(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),w(Se,me,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,n=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(n&&o&&r){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||V(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&i?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ce.VERSION="2.0.7",Ce.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Ee,{enable:!1}],[xe,{enable:!1},["rotate"]],[_e,{direction:6}],[we,{direction:6},["swipe"]],[Se],[Se,{event:"doubletap",taps:2},["tap"]],[ke]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Pe(e,t){var r;this.options=c({},Ce.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((r=this).options.inputClass||(M?ee:L?ie:R?ae:X))(r,z),this.touchAction=new fe(this,this.options.touchAction),Ae(this,!0),g(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Ae(e,t){var r,n=e.element;n.style&&(g(e.options.cssProps,(function(o,i){r=N(n.style,i),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""})),t||(e.oldCssProps={}))}Pe.prototype={set:function(e){return c(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var r;this.touchAction.preventDefaults(e);var n=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var i=0;i<n.length;)r=n[i],2===t.stopped||o&&r!=o&&!r.canRecognizeWith(o)?r.reset():r.recognize(e),!o&&14&r.state&&(o=t.curRecognizer=r),i++}},get:function(e){if(e instanceof me)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(m(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(m(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=O(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var r=this.handlers;return g(A(e),(function(e){r[e]=r[e]||[],r[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var r=this.handlers;return g(A(e),(function(e){t?r[e]&&r[e].splice(O(r[e],t),1):delete r[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var r=i.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=t,t.target.dispatchEvent(r)}(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](t),n++}},destroy:function(){this.element&&Ae(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Ce,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Pe,Input:B,TouchAction:fe,TouchInput:ie,MouseInput:X,PointerEventInput:ee,TouchMouseInput:ae,SingleTouchInput:re,Recognizer:me,AttrRecognizer:be,Tap:Se,Pan:we,Swipe:_e,Pinch:xe,Rotate:Ee,Press:ke,on:_,off:S,each:g,merge:b,extend:v,assign:c,inherit:w,bindFn:x,prefixed:N}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Ce,void 0===(n=function(){return Ce}.call(t,r,t,e))||(e.exports=n)}(window,document)},function(e,t){var r=function(e,t){return t*Math.cos(2*Math.PI*e)},n=function(e,t){return t*Math.sin(2*Math.PI*e)},o=function(e,t,o){return["M",r(e,o),n(e,o),"A",o,o,0,0,0,r(t,o),n(t,o)].join(" ")},i={n4:o(7/8,5/8,36),s4:o(3/8,1/8,36),e4:o(1/8,-1/8,36),w4:o(5/8,3/8,36),inport:o(-1/4,1/4,4),outport:o(1/4,-1/4,4),inportBig:o(-1/4,1/4,6),outportBig:o(1/4,-1/4,6)};e.exports=i},function(e,t){const r=document.createElement("template");r.innerHTML='<dom-module id="noflo-card-styles">\n  <template>\n    <style>\n    :host {\n      display: block;\n      width: 216px;\n      height: 105px;\n      overflow: hidden;\n      display: inline-block;\n      text-align: center;\n      background-color: var(--noflo-ui-background);\n      color: var(--noflo-ui-text);\n      border-radius: 3px;\n      margin-right: 18px;\n      margin-left: 18px;\n      margin-bottom: 36px;\n      position: relative;\n      cursor: pointer;\n    }\n    h2 {\n      position: absolute;\n      top: 36px;\n      line-height: 36px;\n      width: 150px;\n      text-transform: none;\n      font-size: 12px;\n      text-align: left;\n      white-space: nowrap;\n      left: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    p {\n      position: absolute;\n      top: 53px;\n      left: 18px;\n      width: 150px;\n      text-transform: uppercase;\n      font-size: 10px;\n      text-align: left;\n      max-height: 36px;\n      overflow: hidden;\n      color: hsl(189, 11%, 50%);\n    }\n    p span {\n      text-overflow: ellipsis;\n      max-width: 100px;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n    #menubutton {\n      position: absolute;\n      right: 36px;\n      top: 18px;\n      background-color: transparent;\n      color: var(--noflo-ui-text);\n      border: 0px;\n      outline: 0px;\n      cursor: pointer;\n    }\n    #menu {\n      position: absolute;\n      right: 36px;\n      top: 36px;\n      padding: 0px;\n      margin: 0px;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      box-shadow: 3px 3px var(--noflo-ui-background);\n      z-index: 1;\n    }\n    #menu li {\n      list-style: none;\n      text-align: left;\n      margin-bottom: 2px;\n      margin-top: 2px;\n    }\n    #menu li button {\n      background-color: transparent;\n      border: 0px;\n      outline: 0px;\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      font-family: "SourceCodePro",Helvetica,Arial,sans-serif;\n      text-align: left;\n    }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(r.content)},function(e,t,r){!function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};e.defineMode("xml",(function(n,o){var i,s,a=n.indentUnit,c={},l=o.htmlMode?t:r;for(var p in l)c[p]=l[p];for(var p in o)c[p]=o[p];function u(e,t){function r(r){return t.tokenize=r,r(e,t)}var n=e.next();return"<"==n?e.eat("!")?e.eat("[")?e.match("CDATA[")?r(h("atom","]]>")):null:e.match("--")?r(h("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),r(function e(t){return function(r,n){for(var o;null!=(o=r.next());){if("<"==o)return n.tokenize=e(t+1),n.tokenize(r,n);if(">"==o){if(1==t){n.tokenize=u;break}return n.tokenize=e(t-1),n.tokenize(r,n)}}return"meta"}}(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=h("meta","?>"),"meta"):(i=e.eat("/")?"closeTag":"openTag",t.tokenize=d,"tag bracket"):"&"==n?(e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"))?"atom":"error":(e.eatWhile(/[^&<]/),null)}function d(e,t){var r,n,o=e.next();if(">"==o||"/"==o&&e.eat(">"))return t.tokenize=u,i=">"==o?"endTag":"selfcloseTag","tag bracket";if("="==o)return i="equals",null;if("<"==o){t.tokenize=u,t.state=y,t.tagName=t.tagStart=null;var s=t.tokenize(e,t);return s?s+" tag error":"tag error"}return/[\'\"]/.test(o)?(t.tokenize=(r=o,(n=function(e,t){for(;!e.eol();)if(e.next()==r){t.tokenize=d;break}return"string"}).isInAttribute=!0,n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e,t){return function(r,n){for(;!r.eol();){if(r.match(t)){n.tokenize=u;break}r.next()}return e}}function f(e,t,r){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=r,(c.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function m(e){e.context&&(e.context=e.context.prev)}function g(e,t){for(var r;;){if(!e.context)return;if(r=e.context.tagName,!c.contextGrabbers.hasOwnProperty(r)||!c.contextGrabbers[r].hasOwnProperty(t))return;m(e)}}function y(e,t,r){return"openTag"==e?(r.tagStart=t.column(),v):"closeTag"==e?b:y}function v(e,t,r){return"word"==e?(r.tagName=t.current(),s="tag",k):c.allowMissingTagName&&"endTag"==e?(s="tag bracket",k(e,0,r)):(s="error",v)}function b(e,t,r){if("word"==e){var n=t.current();return r.context&&r.context.tagName!=n&&c.implicitlyClosed.hasOwnProperty(r.context.tagName)&&m(r),r.context&&r.context.tagName==n||!1===c.matchClosing?(s="tag",w):(s="tag error",x)}return c.allowMissingTagName&&"endTag"==e?(s="tag bracket",w(e,0,r)):(s="error",x)}function w(e,t,r){return"endTag"!=e?(s="error",w):(m(r),y)}function x(e,t,r){return s="error",w(e,0,r)}function k(e,t,r){if("word"==e)return s="attribute",E;if("endTag"==e||"selfcloseTag"==e){var n=r.tagName,o=r.tagStart;return r.tagName=r.tagStart=null,"selfcloseTag"==e||c.autoSelfClosers.hasOwnProperty(n)?g(r,n):(g(r,n),r.context=new f(r,n,o==r.indented)),y}return s="error",k}function E(e,t,r){return"equals"==e?_:(c.allowMissing||(s="error"),k(e,0,r))}function _(e,t,r){return"string"==e?S:"word"==e&&c.allowUnquoted?(s="string",k):(s="error",k(e,0,r))}function S(e,t,r){return"string"==e?S:k(e,0,r)}return u.isInText=!0,{startState:function(e){var t={tokenize:u,state:y,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;i=null;var r=t.tokenize(e,t);return(r||i)&&"comment"!=r&&(s=null,t.state=t.state(i||r,e,t),s&&(r="error"==s?r+" error":s)),r},indent:function(t,r,n){var o=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+a;if(o&&o.noIndent)return e.Pass;if(t.tokenize!=d&&t.tokenize!=u)return n?n.match(/^(\s*)/)[0].length:0;if(t.tagName)return!1!==c.multilineTagIndentPastTag?t.tagStart+t.tagName.length+2:t.tagStart+a*(c.multilineTagIndentFactor||1);if(c.alignCDATA&&/<!\[CDATA\[/.test(r))return 0;var i=r&&/^<(\/)?([\w_:\.-]*)/.exec(r);if(i&&i[1])for(;o;){if(o.tagName==i[2]){o=o.prev;break}if(!c.implicitlyClosed.hasOwnProperty(o.tagName))break;o=o.prev}else if(i)for(;o;){var s=c.contextGrabbers[o.tagName];if(!s||!s.hasOwnProperty(i[2]))break;o=o.prev}for(;o&&o.prev&&!o.startOfLine;)o=o.prev;return o?o.indent+a:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:c.htmlMode?"html":"xml",helperType:c.htmlMode?"html":"xml",skipAttribute:function(e){e.state==_&&(e.state=k)},xmlCurrentTag:function(e){return e.tagName?{name:e.tagName,close:"closeTag"==e.type}:null},xmlCurrentContext:function(e){for(var t=[],r=e.context;r;r=r.prev)r.tagName&&t.push(r.tagName);return t.reverse()}}})),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}(r(21))},function(e,t,r){!function(e){"use strict";e.defineMode("javascript",(function(t,r){var n,o,i=t.indentUnit,s=r.statementIndent,a=r.jsonld,c=r.json||a,l=r.typescript,p=r.wordCharacters||/[\w$\xa1-\uffff]/,u=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),r=e("keyword b"),n=e("keyword c"),o=e("keyword d"),i=e("operator"),s={type:"atom",style:"atom"};return{if:e("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:o,break:o,continue:o,new:e("new"),delete:n,void:n,throw:n,debugger:e("debugger"),var:e("var"),const:e("var"),let:e("var"),function:e("function"),catch:e("catch"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,typeof:i,instanceof:i,true:s,false:s,null:s,undefined:s,NaN:s,Infinity:s,this:e("this"),class:e("class"),super:e("atom"),yield:n,export:e("export"),import:e("import"),extends:n,await:n}}(),d=/[+\-*&%=<>!?|~^@]/,h=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function f(e,t,r){return n=e,o=r,t}function m(e,t){var r,n=e.next();if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){var n,o=!1;if(a&&"@"==e.peek()&&e.match(h))return t.tokenize=m,f("jsonld-keyword","meta");for(;null!=(n=e.next())&&(n!=r||o);)o=!o&&"\\"==n;return o||(t.tokenize=m),f("string","string")}),t.tokenize(e,t);if("."==n&&e.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return f("number","number");if("."==n&&e.match(".."))return f("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return f(n);if("="==n&&e.eat(">"))return f("=>","operator");if("0"==n&&e.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return f("number","number");if(/\d/.test(n))return e.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),f("number","number");if("/"==n)return e.eat("*")?(t.tokenize=g,g(e,t)):e.eat("/")?(e.skipToEnd(),f("comment","comment")):We(e,t,1)?(function(e){for(var t,r=!1,n=!1;null!=(t=e.next());){if(!r){if("/"==t&&!n)return;"["==t?n=!0:n&&"]"==t&&(n=!1)}r=!r&&"\\"==t}}(e),e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),f("regexp","string-2")):(e.eat("="),f("operator","operator",e.current()));if("`"==n)return t.tokenize=y,y(e,t);if("#"==n&&"!"==e.peek())return e.skipToEnd(),f("meta","meta");if("#"==n&&e.eatWhile(p))return f("variable","property");if("<"==n&&e.match("!--")||"-"==n&&e.match("->")&&!/\S/.test(e.string.slice(0,e.start)))return e.skipToEnd(),f("comment","comment");if(d.test(n))return">"==n&&t.lexical&&">"==t.lexical.type||(e.eat("=")?"!"!=n&&"="!=n||e.eat("="):/[<>*+\-|&?]/.test(n)&&(e.eat(n),">"==n&&e.eat(n))),"?"==n&&e.eat(".")?f("."):f("operator","operator",e.current());if(p.test(n)){e.eatWhile(p);var o=e.current();if("."!=t.lastType){if(u.propertyIsEnumerable(o)){var i=u[o];return f(i.type,i.style,o)}if("async"==o&&e.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return f("async","keyword",o)}return f("variable","variable",o)}}function g(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=m;break}n="*"==r}return f("comment","comment")}function y(e,t){for(var r,n=!1;null!=(r=e.next());){if(!n&&("`"==r||"$"==r&&e.eat("{"))){t.tokenize=m;break}n=!n&&"\\"==r}return f("quasi","string-2",e.current())}function v(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var r=e.string.indexOf("=>",e.start);if(!(r<0)){if(l){var n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start,r));n&&(r=n.index)}for(var o=0,i=!1,s=r-1;s>=0;--s){var a=e.string.charAt(s),c="([{}])".indexOf(a);if(c>=0&&c<3){if(!o){++s;break}if(0==--o){"("==a&&(i=!0);break}}else if(c>=3&&c<6)++o;else if(p.test(a))i=!0;else if(/["'\/`]/.test(a))for(;;--s){if(0==s)return;if(e.string.charAt(s-1)==a&&"\\"!=e.string.charAt(s-2)){s--;break}}else if(i&&!o){++s;break}}i&&!o&&(t.fatArrowAt=s)}}var b={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function w(e,t,r,n,o,i){this.indented=e,this.column=t,this.type=r,this.prev=o,this.info=i,null!=n&&(this.align=n)}function x(e,t){for(var r=e.localVars;r;r=r.next)if(r.name==t)return!0;for(var n=e.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==t)return!0}var k={state:null,column:null,marked:null,cc:null};function E(){for(var e=arguments.length-1;e>=0;e--)k.cc.push(arguments[e])}function _(){return E.apply(null,arguments),!0}function S(e,t){for(var r=t;r;r=r.next)if(r.name==e)return!0;return!1}function C(e){var t=k.state;if(k.marked="def",t.context)if("var"==t.lexical.info&&t.context&&t.context.block){var n=function e(t,r){if(r){if(r.block){var n=e(t,r.prev);return n?n==r.prev?r:new A(n,r.vars,!0):null}return S(t,r.vars)?r:new A(r.prev,new O(t,r.vars),!1)}return null}(e,t.context);if(null!=n)return void(t.context=n)}else if(!S(e,t.localVars))return void(t.localVars=new O(e,t.localVars));r.globalVars&&!S(e,t.globalVars)&&(t.globalVars=new O(e,t.globalVars))}function P(e){return"public"==e||"private"==e||"protected"==e||"abstract"==e||"readonly"==e}function A(e,t,r){this.prev=e,this.vars=t,this.block=r}function O(e,t){this.name=e,this.next=t}var T=new O("this",new O("arguments",null));function D(){k.state.context=new A(k.state.context,k.state.localVars,!1),k.state.localVars=T}function N(){k.state.context=new A(k.state.context,k.state.localVars,!0),k.state.localVars=null}function j(){k.state.localVars=k.state.context.vars,k.state.context=k.state.context.prev}function I(e,t){var r=function(){var r=k.state,n=r.indented;if("stat"==r.lexical.type)n=r.lexical.indented;else for(var o=r.lexical;o&&")"==o.type&&o.align;o=o.prev)n=o.indented;r.lexical=new w(n,k.stream.column(),e,null,r.lexical,t)};return r.lex=!0,r}function R(){var e=k.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function M(e){return function t(r){return r==e?_():";"==e||"}"==r||")"==r||"]"==r?E():_(t)}}function L(e,t){return"var"==e?_(I("vardef",t),ve,M(";"),R):"keyword a"==e?_(I("form"),z,L,R):"keyword b"==e?_(I("form"),L,R):"keyword d"==e?k.stream.match(/^\s*$/,!1)?_():_(I("stat"),q,M(";"),R):"debugger"==e?_(M(";")):"{"==e?_(I("}"),N,ie,R,j):";"==e?_():"if"==e?("else"==k.state.lexical.info&&k.state.cc[k.state.cc.length-1]==R&&k.state.cc.pop()(),_(I("form"),z,L,R,_e)):"function"==e?_(Ae):"for"==e?_(I("form"),Se,L,R):"class"==e||l&&"interface"==t?(k.marked="keyword",_(I("form","class"==e?e:t),je,R)):"variable"==e?l&&"declare"==t?(k.marked="keyword",_(L)):l&&("module"==t||"enum"==t||"type"==t)&&k.stream.match(/^\s*\w/,!1)?(k.marked="keyword","enum"==t?_(He):"type"==t?_(Te,M("operator"),pe,M(";")):_(I("form"),be,M("{"),I("}"),ie,R,R)):l&&"namespace"==t?(k.marked="keyword",_(I("form"),G,L,R)):l&&"abstract"==t?(k.marked="keyword",_(L)):_(I("stat"),Q):"switch"==e?_(I("form"),z,M("{"),I("}","switch"),N,ie,R,R,j):"case"==e?_(G,M(":")):"default"==e?_(M(":")):"catch"==e?_(I("form"),D,F,L,R,j):"export"==e?_(I("stat"),Le,R):"import"==e?_(I("stat"),Ge,R):"async"==e?_(L):"@"==t?_(G,L):E(I("stat"),G,M(";"),R)}function F(e){if("("==e)return _(De,M(")"))}function G(e,t){return U(e,t,!1)}function B(e,t){return U(e,t,!0)}function z(e){return"("!=e?E():_(I(")"),q,M(")"),R)}function U(e,t,r){if(k.state.fatArrowAt==k.stream.start){var n=r?X:J;if("("==e)return _(D,I(")"),ne(De,")"),R,M("=>"),n,j);if("variable"==e)return E(D,be,M("=>"),n,j)}var o=r?H:$;return b.hasOwnProperty(e)?_(o):"function"==e?_(Ae,o):"class"==e||l&&"interface"==t?(k.marked="keyword",_(I("form"),Ne,R)):"keyword c"==e||"async"==e?_(r?B:G):"("==e?_(I(")"),q,M(")"),R,o):"operator"==e||"spread"==e?_(r?B:G):"["==e?_(I("]"),$e,R,o):"{"==e?oe(ee,"}",null,o):"quasi"==e?E(V,o):"new"==e?_(function(e){return function(t){return"."==t?_(e?K:Y):"variable"==t&&l?_(me,e?H:$):E(e?B:G)}}(r)):"import"==e?_(G):_()}function q(e){return e.match(/[;\}\)\],]/)?E():E(G)}function $(e,t){return","==e?_(q):H(e,t,!1)}function H(e,t,r){var n=0==r?$:H,o=0==r?G:B;return"=>"==e?_(D,r?X:J,j):"operator"==e?/\+\+|--/.test(t)||l&&"!"==t?_(n):l&&"<"==t&&k.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?_(I(">"),ne(pe,">"),R,n):"?"==t?_(G,M(":"),o):_(o):"quasi"==e?E(V,n):";"!=e?"("==e?oe(B,")","call",n):"."==e?_(Z,n):"["==e?_(I("]"),q,M("]"),R,n):l&&"as"==t?(k.marked="keyword",_(pe,n)):"regexp"==e?(k.state.lastType=k.marked="operator",k.stream.backUp(k.stream.pos-k.stream.start-1),_(o)):void 0:void 0}function V(e,t){return"quasi"!=e?E():"${"!=t.slice(t.length-2)?_(V):_(G,W)}function W(e){if("}"==e)return k.marked="string-2",k.state.tokenize=y,_(V)}function J(e){return v(k.stream,k.state),E("{"==e?L:G)}function X(e){return v(k.stream,k.state),E("{"==e?L:B)}function Y(e,t){if("target"==t)return k.marked="keyword",_($)}function K(e,t){if("target"==t)return k.marked="keyword",_(H)}function Q(e){return":"==e?_(R,L):E($,M(";"),R)}function Z(e){if("variable"==e)return k.marked="property",_()}function ee(e,t){return"async"==e?(k.marked="property",_(ee)):"variable"==e||"keyword"==k.style?(k.marked="property","get"==t||"set"==t?_(te):(l&&k.state.fatArrowAt==k.stream.start&&(r=k.stream.match(/^\s*:\s*/,!1))&&(k.state.fatArrowAt=k.stream.pos+r[0].length),_(re))):"number"==e||"string"==e?(k.marked=a?"property":k.style+" property",_(re)):"jsonld-keyword"==e?_(re):l&&P(t)?(k.marked="keyword",_(ee)):"["==e?_(G,se,M("]"),re):"spread"==e?_(B,re):"*"==t?(k.marked="keyword",_(ee)):":"==e?E(re):void 0;var r}function te(e){return"variable"!=e?E(re):(k.marked="property",_(Ae))}function re(e){return":"==e?_(B):"("==e?E(Ae):void 0}function ne(e,t,r){function n(o,i){if(r?r.indexOf(o)>-1:","==o){var s=k.state.lexical;return"call"==s.info&&(s.pos=(s.pos||0)+1),_((function(r,n){return r==t||n==t?E():E(e)}),n)}return o==t||i==t?_():r&&r.indexOf(";")>-1?E(e):_(M(t))}return function(r,o){return r==t||o==t?_():E(e,n)}}function oe(e,t,r){for(var n=3;n<arguments.length;n++)k.cc.push(arguments[n]);return _(I(t,r),ne(e,t),R)}function ie(e){return"}"==e?_():E(L,ie)}function se(e,t){if(l){if(":"==e)return _(pe);if("?"==t)return _(se)}}function ae(e,t){if(l&&(":"==e||"in"==t))return _(pe)}function ce(e){if(l&&":"==e)return k.stream.match(/^\s*\w+\s+is\b/,!1)?_(G,le,pe):_(pe)}function le(e,t){if("is"==t)return k.marked="keyword",_()}function pe(e,t){return"keyof"==t||"typeof"==t||"infer"==t?(k.marked="keyword",_("typeof"==t?B:pe)):"variable"==e||"void"==t?(k.marked="type",_(fe)):"|"==t||"&"==t?_(pe):"string"==e||"number"==e||"atom"==e?_(fe):"["==e?_(I("]"),ne(pe,"]",","),R,fe):"{"==e?_(I("}"),ne(de,"}",",;"),R,fe):"("==e?_(ne(he,")"),ue,fe):"<"==e?_(ne(pe,">"),pe):void 0}function ue(e){if("=>"==e)return _(pe)}function de(e,t){return"variable"==e||"keyword"==k.style?(k.marked="property",_(de)):"?"==t||"number"==e||"string"==e?_(de):":"==e?_(pe):"["==e?_(M("variable"),ae,M("]"),de):"("==e?E(Oe,de):void 0}function he(e,t){return"variable"==e&&k.stream.match(/^\s*[?:]/,!1)||"?"==t?_(he):":"==e?_(pe):"spread"==e?_(he):E(pe)}function fe(e,t){return"<"==t?_(I(">"),ne(pe,">"),R,fe):"|"==t||"."==e||"&"==t?_(pe):"["==e?_(pe,M("]"),fe):"extends"==t||"implements"==t?(k.marked="keyword",_(pe)):"?"==t?_(pe,M(":"),pe):void 0}function me(e,t){if("<"==t)return _(I(">"),ne(pe,">"),R,fe)}function ge(){return E(pe,ye)}function ye(e,t){if("="==t)return _(pe)}function ve(e,t){return"enum"==t?(k.marked="keyword",_(He)):E(be,se,ke,Ee)}function be(e,t){return l&&P(t)?(k.marked="keyword",_(be)):"variable"==e?(C(t),_()):"spread"==e?_(be):"["==e?oe(xe,"]"):"{"==e?oe(we,"}"):void 0}function we(e,t){return"variable"!=e||k.stream.match(/^\s*:/,!1)?("variable"==e&&(k.marked="property"),"spread"==e?_(be):"}"==e?E():"["==e?_(G,M("]"),M(":"),we):_(M(":"),be,ke)):(C(t),_(ke))}function xe(){return E(be,ke)}function ke(e,t){if("="==t)return _(B)}function Ee(e){if(","==e)return _(ve)}function _e(e,t){if("keyword b"==e&&"else"==t)return _(I("form","else"),L,R)}function Se(e,t){return"await"==t?_(Se):"("==e?_(I(")"),Ce,R):void 0}function Ce(e){return"var"==e?_(ve,Pe):"variable"==e?_(Pe):E(Pe)}function Pe(e,t){return")"==e?_():";"==e?_(Pe):"in"==t||"of"==t?(k.marked="keyword",_(G,Pe)):E(G,Pe)}function Ae(e,t){return"*"==t?(k.marked="keyword",_(Ae)):"variable"==e?(C(t),_(Ae)):"("==e?_(D,I(")"),ne(De,")"),R,ce,L,j):l&&"<"==t?_(I(">"),ne(ge,">"),R,Ae):void 0}function Oe(e,t){return"*"==t?(k.marked="keyword",_(Oe)):"variable"==e?(C(t),_(Oe)):"("==e?_(D,I(")"),ne(De,")"),R,ce,j):l&&"<"==t?_(I(">"),ne(ge,">"),R,Oe):void 0}function Te(e,t){return"keyword"==e||"variable"==e?(k.marked="type",_(Te)):"<"==t?_(I(">"),ne(ge,">"),R):void 0}function De(e,t){return"@"==t&&_(G,De),"spread"==e?_(De):l&&P(t)?(k.marked="keyword",_(De)):l&&"this"==e?_(se,ke):E(be,se,ke)}function Ne(e,t){return"variable"==e?je(e,t):Ie(e,t)}function je(e,t){if("variable"==e)return C(t),_(Ie)}function Ie(e,t){return"<"==t?_(I(">"),ne(ge,">"),R,Ie):"extends"==t||"implements"==t||l&&","==e?("implements"==t&&(k.marked="keyword"),_(l?pe:G,Ie)):"{"==e?_(I("}"),Re,R):void 0}function Re(e,t){return"async"==e||"variable"==e&&("static"==t||"get"==t||"set"==t||l&&P(t))&&k.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(k.marked="keyword",_(Re)):"variable"==e||"keyword"==k.style?(k.marked="property",_(Me,Re)):"number"==e||"string"==e?_(Me,Re):"["==e?_(G,se,M("]"),Me,Re):"*"==t?(k.marked="keyword",_(Re)):l&&"("==e?E(Oe,Re):";"==e||","==e?_(Re):"}"==e?_():"@"==t?_(G,Re):void 0}function Me(e,t){if("?"==t)return _(Me);if(":"==e)return _(pe,ke);if("="==t)return _(B);var r=k.state.lexical.prev;return E(r&&"interface"==r.info?Oe:Ae)}function Le(e,t){return"*"==t?(k.marked="keyword",_(qe,M(";"))):"default"==t?(k.marked="keyword",_(G,M(";"))):"{"==e?_(ne(Fe,"}"),qe,M(";")):E(L)}function Fe(e,t){return"as"==t?(k.marked="keyword",_(M("variable"))):"variable"==e?E(B,Fe):void 0}function Ge(e){return"string"==e?_():"("==e?E(G):E(Be,ze,qe)}function Be(e,t){return"{"==e?oe(Be,"}"):("variable"==e&&C(t),"*"==t&&(k.marked="keyword"),_(Ue))}function ze(e){if(","==e)return _(Be,ze)}function Ue(e,t){if("as"==t)return k.marked="keyword",_(Be)}function qe(e,t){if("from"==t)return k.marked="keyword",_(G)}function $e(e){return"]"==e?_():E(ne(B,"]"))}function He(){return E(I("form"),be,M("{"),I("}"),ne(Ve,"}"),R,R)}function Ve(){return E(be,ke)}function We(e,t,r){return t.tokenize==m&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType)||"quasi"==t.lastType&&/\{\s*$/.test(e.string.slice(0,e.pos-(r||0)))}return j.lex=!0,R.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new w((e||0)-i,0,"block",!1),localVars:r.localVars,context:r.localVars&&new A(null,null,!1),indented:e||0};return r.globalVars&&"object"==typeof r.globalVars&&(t.globalVars=r.globalVars),t},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),v(e,t)),t.tokenize!=g&&e.eatSpace())return null;var r=t.tokenize(e,t);return"comment"==n?r:(t.lastType="operator"!=n||"++"!=o&&"--"!=o?n:"incdec",function(e,t,r,n,o){var i=e.cc;for(k.state=e,k.stream=o,k.marked=null,k.cc=i,k.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((i.length?i.pop():c?G:L)(r,n)){for(;i.length&&i[i.length-1].lex;)i.pop()();return k.marked?k.marked:"variable"==r&&x(e,n)?"variable-2":t}}(t,r,n,o,e))},indent:function(t,n){if(t.tokenize==g||t.tokenize==y)return e.Pass;if(t.tokenize!=m)return 0;var o,a=n&&n.charAt(0),c=t.lexical;if(!/^\s*else\b/.test(n))for(var l=t.cc.length-1;l>=0;--l){var p=t.cc[l];if(p==R)c=c.prev;else if(p!=_e)break}for(;("stat"==c.type||"form"==c.type)&&("}"==a||(o=t.cc[t.cc.length-1])&&(o==$||o==H)&&!/^[,\.=+\-*:?[\(]/.test(n));)c=c.prev;s&&")"==c.type&&"stat"==c.prev.type&&(c=c.prev);var u=c.type,h=a==u;return"vardef"==u?c.indented+("operator"==t.lastType||","==t.lastType?c.info.length+1:0):"form"==u&&"{"==a?c.indented:"form"==u?c.indented+i:"stat"==u?c.indented+(function(e,t){return"operator"==e.lastType||","==e.lastType||d.test(t.charAt(0))||/[,.]/.test(t.charAt(0))}(t,n)?s||i:0):"switch"!=c.info||h||0==r.doubleIndentSwitch?c.align?c.column+(h?0:1):c.indented+(h?0:i):c.indented+(/^(?:case|default)\b/.test(n)?i:2*i)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:c?null:"/*",blockCommentEnd:c?null:"*/",blockCommentContinue:c?null:" * ",lineComment:c?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:c?"json":"javascript",jsonldMode:a,jsonMode:c,expressionAllowed:We,skipExpression:function(e){var t=e.cc[e.cc.length-1];t!=G&&t!=B||e.cc.pop()}}})),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(r(21))},function(e,t,r){!function(e){"use strict";function t(e){for(var t={},r=0;r<e.length;++r)t[e[r].toLowerCase()]=!0;return t}e.defineMode("css",(function(t,r){var n=r.inline;r.propertyKeywords||(r=e.resolveMode("text/css"));var o,i,s=t.indentUnit,a=r.tokenHooks,c=r.documentTypes||{},l=r.mediaTypes||{},p=r.mediaFeatures||{},u=r.mediaValueKeywords||{},d=r.propertyKeywords||{},h=r.nonStandardPropertyKeywords||{},f=r.fontProperties||{},m=r.counterDescriptors||{},g=r.colorKeywords||{},y=r.valueKeywords||{},v=r.allowNested,b=r.lineComment,w=!0===r.supportsAtComponent,x=!1!==t.highlightNonStandardPropertyKeywords;function k(e,t){return o=t,e}function E(e,t){var r=e.next();if(a[r]){var n=a[r](e,t);if(!1!==n)return n}return"@"==r?(e.eatWhile(/[\w\\\-]/),k("def",e.current())):"="==r||("~"==r||"|"==r)&&e.eat("=")?k(null,"compare"):'"'==r||"'"==r?(t.tokenize=_(r),t.tokenize(e,t)):"#"==r?(e.eatWhile(/[\w\\\-]/),k("atom","hash")):"!"==r?(e.match(/^\s*\w*/),k("keyword","important")):/\d/.test(r)||"."==r&&e.eat(/\d/)?(e.eatWhile(/[\w.%]/),k("number","unit")):"-"!==r?/[,+>*\/]/.test(r)?k(null,"select-op"):"."==r&&e.match(/^-?[_a-z][_a-z0-9-]*/i)?k("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(r)?k(null,r):e.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(e.current().toLowerCase())&&(t.tokenize=S),k("variable callee","variable")):/[\w\\\-]/.test(r)?(e.eatWhile(/[\w\\\-]/),k("property","word")):k(null,null):/[\d.]/.test(e.peek())?(e.eatWhile(/[\w.%]/),k("number","unit")):e.match(/^-[\w\\\-]*/)?(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?k("variable-2","variable-definition"):k("variable-2","variable")):e.match(/^\w+-/)?k("meta","meta"):void 0}function _(e){return function(t,r){for(var n,o=!1;null!=(n=t.next());){if(n==e&&!o){")"==e&&t.backUp(1);break}o=!o&&"\\"==n}return(n==e||!o&&")"!=e)&&(r.tokenize=null),k("string","string")}}function S(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=_(")"),k(null,"(")}function C(e,t,r){this.type=e,this.indent=t,this.prev=r}function P(e,t,r,n){return e.context=new C(r,t.indentation()+(!1===n?0:s),e.context),r}function A(e){return e.context.prev&&(e.context=e.context.prev),e.context.type}function O(e,t,r){return N[r.context.type](e,t,r)}function T(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return O(e,t,r)}function D(e){var t=e.current().toLowerCase();i=y.hasOwnProperty(t)?"atom":g.hasOwnProperty(t)?"keyword":"variable"}var N={top:function(e,t,r){if("{"==e)return P(r,t,"block");if("}"==e&&r.context.prev)return A(r);if(w&&/@component/i.test(e))return P(r,t,"atComponentBlock");if(/^@(-moz-)?document$/i.test(e))return P(r,t,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(e))return P(r,t,"atBlock");if(/^@(font-face|counter-style)/i.test(e))return r.stateArg=e,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e))return"keyframes";if(e&&"@"==e.charAt(0))return P(r,t,"at");if("hash"==e)i="builtin";else if("word"==e)i="tag";else{if("variable-definition"==e)return"maybeprop";if("interpolation"==e)return P(r,t,"interpolation");if(":"==e)return"pseudo";if(v&&"("==e)return P(r,t,"parens")}return r.context.type},block:function(e,t,r){if("word"==e){var n=t.current().toLowerCase();return d.hasOwnProperty(n)?(i="property","maybeprop"):h.hasOwnProperty(n)?(i=x?"string-2":"property","maybeprop"):v?(i=t.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(i+=" error","maybeprop")}return"meta"==e?"block":v||"hash"!=e&&"qualifier"!=e?N.top(e,t,r):(i="error","block")},maybeprop:function(e,t,r){return":"==e?P(r,t,"prop"):O(e,t,r)},prop:function(e,t,r){if(";"==e)return A(r);if("{"==e&&v)return P(r,t,"propBlock");if("}"==e||"{"==e)return T(e,t,r);if("("==e)return P(r,t,"parens");if("hash"!=e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"==e)D(t);else if("interpolation"==e)return P(r,t,"interpolation")}else i+=" error";return"prop"},propBlock:function(e,t,r){return"}"==e?A(r):"word"==e?(i="property","maybeprop"):r.context.type},parens:function(e,t,r){return"{"==e||"}"==e?T(e,t,r):")"==e?A(r):"("==e?P(r,t,"parens"):"interpolation"==e?P(r,t,"interpolation"):("word"==e&&D(t),"parens")},pseudo:function(e,t,r){return"meta"==e?"pseudo":"word"==e?(i="variable-3",r.context.type):O(e,t,r)},documentTypes:function(e,t,r){return"word"==e&&c.hasOwnProperty(t.current())?(i="tag",r.context.type):N.atBlock(e,t,r)},atBlock:function(e,t,r){if("("==e)return P(r,t,"atBlock_parens");if("}"==e||";"==e)return T(e,t,r);if("{"==e)return A(r)&&P(r,t,v?"block":"top");if("interpolation"==e)return P(r,t,"interpolation");if("word"==e){var n=t.current().toLowerCase();i="only"==n||"not"==n||"and"==n||"or"==n?"keyword":l.hasOwnProperty(n)?"attribute":p.hasOwnProperty(n)?"property":u.hasOwnProperty(n)?"keyword":d.hasOwnProperty(n)?"property":h.hasOwnProperty(n)?x?"string-2":"property":y.hasOwnProperty(n)?"atom":g.hasOwnProperty(n)?"keyword":"error"}return r.context.type},atComponentBlock:function(e,t,r){return"}"==e?T(e,t,r):"{"==e?A(r)&&P(r,t,v?"block":"top",!1):("word"==e&&(i="error"),r.context.type)},atBlock_parens:function(e,t,r){return")"==e?A(r):"{"==e||"}"==e?T(e,t,r,2):N.atBlock(e,t,r)},restricted_atBlock_before:function(e,t,r){return"{"==e?P(r,t,"restricted_atBlock"):"word"==e&&"@counter-style"==r.stateArg?(i="variable","restricted_atBlock_before"):O(e,t,r)},restricted_atBlock:function(e,t,r){return"}"==e?(r.stateArg=null,A(r)):"word"==e?(i="@font-face"==r.stateArg&&!f.hasOwnProperty(t.current().toLowerCase())||"@counter-style"==r.stateArg&&!m.hasOwnProperty(t.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(e,t,r){return"word"==e?(i="variable","keyframes"):"{"==e?P(r,t,"top"):O(e,t,r)},at:function(e,t,r){return";"==e?A(r):"{"==e||"}"==e?T(e,t,r):("word"==e?i="tag":"hash"==e&&(i="builtin"),"at")},interpolation:function(e,t,r){return"}"==e?A(r):"{"==e||";"==e?T(e,t,r):("word"==e?i="variable":"variable"!=e&&"("!=e&&")"!=e&&(i="error"),"interpolation")}};return{startState:function(e){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new C(n?"block":"top",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var r=(t.tokenize||E)(e,t);return r&&"object"==typeof r&&(o=r[1],r=r[0]),i=r,"comment"!=o&&(t.state=N[t.state](o,e,t)),i},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!=r.type||"}"!=n&&")"!=n||(r=r.prev),r.prev&&("}"!=n||"block"!=r.type&&"top"!=r.type&&"interpolation"!=r.type&&"restricted_atBlock"!=r.type?(")"!=n||"parens"!=r.type&&"atBlock_parens"!=r.type)&&("{"!=n||"at"!=r.type&&"atBlock"!=r.type)||(o=Math.max(0,r.indent-s)):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:b,fold:"brace"}}));var r=["domain","regexp","url","url-prefix"],n=t(r),o=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],i=t(o),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],a=t(s),c=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],l=t(c),p=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(p),d=["border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],h=t(d),f=t(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),m=t(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),g=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],y=t(g),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],b=t(v),w=r.concat(o).concat(s).concat(c).concat(p).concat(d).concat(g).concat(v);function x(e,t){for(var r,n=!1;null!=(r=e.next());){if(n&&"/"==r){t.tokenize=null;break}n="*"==r}return["comment","comment"]}e.registerHelper("hintWords","css",w),e.defineMIME("text/css",{documentTypes:n,mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:m,colorKeywords:y,valueKeywords:b,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:y,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},":":function(e){return!!e.match(/\s*\{/,!1)&&[null,null]},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return!!e.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:i,mediaFeatures:a,mediaValueKeywords:l,propertyKeywords:u,nonStandardPropertyKeywords:h,colorKeywords:y,valueKeywords:b,fontProperties:f,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=x,x(e,t)):["operator","operator"]},"@":function(e){return e.eat("{")?[null,"interpolation"]:!e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),e.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:i,mediaFeatures:a,propertyKeywords:u,nonStandardPropertyKeywords:h,fontProperties:f,counterDescriptors:m,colorKeywords:y,valueKeywords:b,supportsAtComponent:!0,tokenHooks:{"/":function(e,t){return!!e.eat("*")&&(t.tokenize=x,x(e,t))}},name:"css",helperType:"gss"})}(r(21))},function(e,t){const r=document.createElement("template");r.innerHTML='<dom-module id="the-card-styles">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 0px;\n        padding: 10px 10px 10px;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        position: relative;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      h1 {\n        font-size: 12px;\n        line-height: 36px;\n        margin: 0px;\n        margin-bottom: 0px;\n        text-shadow: 0 1px var(--noflo-ui-background);\n        text-align: left;\n      }\n      header {\n        height: 36px;\n      }\n      header h1 {\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        width: calc(72px * 3 - 1px);\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      header h1.clear {\n        cursor: pointer;\n      }\n      header h2 {\n        line-height: 36px;\n        width: 72px;\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        margin: 0px;\n        text-align: right;\n        font-size: 10px;\n        color: var(--noflo-ui-border-highlight);\n        display: block;\n        cursor: default;\n      }\n      ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      ul li {\n        display: block;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.toolbar2right {\n        width: 180px;\n        display: block;\n        position: absolute;\n        right: 36px;\n        top: 10px;\n        text-align: right;\n      }\n      ul.toolbar li {\n        float: left;\n        display: block;\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n      }\n      ul.toolbar2right li {\n        float: right;\n        width: auto;\n      }\n      ul.toolbar li * {\n        line-height: 36px;\n      }\n      li button {\n        width:100%;\n        height:100%;\n      }\n      textarea {\n        width: 100%;\n        min-height: 100px;\n        max-height: calc(72px * 4);\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(r.content)},function(e,t,r){var n,o,i;o=[],void 0===(i="function"==typeof(n=function(){var e,t,r,n;Object.keys||(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var s in o)e.call(o,s)&&i.push(s);if(t)for(var a=0;a<n;a++)e.call(o,r[a])&&i.push(r[a]);return i})),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(e){return!0}});var o={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},i={"*":!0};function s(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,(function(e){return"%"+e.substring(3)}))}function a(e){var t="";o[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var r="",n="",a=!0,c=!1,l=!1;"+"===t?a=!1:"."===t?(n=".",r="."):"/"===t?(n="/",r="/"):"#"===t?(n="#",a=!1):";"===t?(n=";",r=";",c=!0,l=!0):"?"===t?(n="?",r="&",c=!0):"&"===t&&(n="&",r="&",c=!0);for(var p=[],u=e.split(","),d=[],h={},f=0;f<u.length;f++){var m=u[f],g=null;if(-1!==m.indexOf(":")){var y=m.split(":");m=y[0],g=parseInt(y[1],10)}for(var v={};i[m.charAt(m.length-1)];)v[m.charAt(m.length-1)]=!0,m=m.substring(0,m.length-1);var b={truncate:g,name:m,suffices:v};d.push(b),h[m]=b,p.push(m)}var w=function(e){for(var t="",o=0,i=0;i<d.length;i++){var p=d[i],u=e(p.name);if(null==u||Array.isArray(u)&&0===u.length||"object"==typeof u&&0===Object.keys(u).length)o++;else if(t+=i===o?n:r||",",Array.isArray(u)){c&&(t+=p.name+"=");for(var h=0;h<u.length;h++)h>0&&(t+=p.suffices["*"]&&r||",",p.suffices["*"]&&c&&(t+=p.name+"=")),t+=a?encodeURIComponent(u[h]).replace(/!/g,"%21"):s(u[h])}else if("object"==typeof u){c&&!p.suffices["*"]&&(t+=p.name+"=");var f=!0;for(var m in u)f||(t+=p.suffices["*"]&&r||","),f=!1,t+=a?encodeURIComponent(m).replace(/!/g,"%21"):s(m),t+=p.suffices["*"]?"=":",",t+=a?encodeURIComponent(u[m]).replace(/!/g,"%21"):s(u[m])}else c&&(t+=p.name,l&&""===u||(t+="=")),null!=p.truncate&&(u=u.substring(0,p.truncate)),t+=a?encodeURIComponent(u).replace(/!/g,"%21"):s(u)}return t};return w.varNames=p,{prefix:n,substitution:w}}function c(e){if(!(this instanceof c))return new c(e);for(var t=e.split("{"),r=[t.shift()],n=[],o=[],i=[];t.length>0;){var s=t.shift(),l=s.split("}")[0],p=s.substring(l.length+1),u=a(l);o.push(u.substitution),n.push(u.prefix),r.push(p),i=i.concat(u.substitution.varNames)}this.fill=function(e){for(var t=r[0],n=0;n<o.length;n++)t+=(0,o[n])(e),t+=r[n+1];return t},this.varNames=i,this.template=e}c.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill((function(t){return e[t]}))}};var l=function(e,t,r,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||y("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};function p(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!p(e[r],t[r]))return!1}else{var n;for(n in e)if(void 0===t[n]&&void 0!==e[n])return!1;for(n in t)if(void 0===e[n]&&void 0!==t[n])return!1;for(n in e)if(!p(e[n],t[n]))return!1}return!0}return!1}l.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},l.prototype.createError=function(e,t,r,n,o,i,s){var a=new k(e,t,r,n,o);return a.message=this.errorReporter(a,i,s),a},l.prototype.returnError=function(e){return e},l.prototype.collectError=function(e){return e&&this.errors.push(e),null},l.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},l.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(v.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),o=this.handleError(n);if(o)return o}return null},l.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},l.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},l.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,o="";if(-1!==e.indexOf("#")&&(o=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){r=this.schemas[n];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(r,t);if("/"!==i.charAt(0))return;for(var s=i.split("/").slice(1),a=0;a<s.length;a++){var c=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[c]){r=void 0;break}r=r[c]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},l.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"==typeof e)for(var n in"string"==typeof e.id&&function(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e),e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var o=m(e[n]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}},l.prototype.addSchema=function(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}e===m(e)+"#"&&(e=m(e)),this.schemas[e]=t,delete this.missingMap[e],g(t,e),this.searchSchemas(t,e)},l.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},l.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)e&&!e.test(r)||t.push(r);return t},l.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)e&&!e.test(r)||t.push(r);return t},l.prototype.dropSchemas=function(){this.schemas={},this.reset()},l.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},l.prototype.validateAll=function(e,t,r,n,o){var i;if(!(t=this.resolveRefs(t)))return null;if(t instanceof k)return this.errors.push(t),t;var s,a=this.errors.length,c=null,l=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var p=e[this.validatedSchemasKey].indexOf(t);if(-1!==p)return this.errors=this.errors.concat(e[this.validationErrorsKey][p]),null}if(Object.isFrozen(e)&&-1!==(s=this.scannedFrozen.indexOf(e))){var u=this.scannedFrozenSchemas[s].indexOf(t);if(-1!==u)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][u]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===s&&(s=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][c]=t,this.scannedFrozenValidationErrors[s][c]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}l=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][l]=t,e[this.validationErrorsKey][l]=[]}}var d=this.errors.length,h=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(h||d!==this.errors.length)for(;r&&r.length||n&&n.length;){var f=r&&r.length?""+r.pop():null,m=n&&n.length?""+n.pop():null;h&&(h=h.prefixWith(f,m)),this.prefixErrors(d,f,m)}return null!==c?this.scannedFrozenValidationErrors[s][c]=this.errors.slice(a):null!==l&&(e[this.validationErrorsKey][l]=this.errors.slice(a)),this.handleError(h)},l.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"==typeof r?this.createError(v.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},l.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if(void 0!==t[n])for(var o=this.definedKeywords[n],i=0;i<o.length;i++){var s=(0,o[i])(e,t[n],t,r);if("string"==typeof s||"number"==typeof s)return this.createError(v.KEYWORD_CUSTOM,{key:n,message:s},"","",null,e,t).prefixWith(null,n);if(s&&"object"==typeof s){var a=s.code;if("string"==typeof a){if(!v[a])throw new Error("Undefined error code (use defineError): "+a);a=v[a]}else"number"!=typeof a&&(a=v.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},l=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(a,c,s.dataPath||null,l,null,e,t)}}return null},l.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))||(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},l.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o];if(i===r||"integer"===i&&"number"===r&&e%1==0)return null}return this.createError(v.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},l.prototype.validateEnum=function(e,t){if(void 0===t.enum)return null;for(var r=0;r<t.enum.length;r++)if(p(e,t.enum[r]))return null;return this.createError(v.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},l.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var u=Math.pow(2,-51),d=1-u;function h(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function f(e,t){return t=h(t||""),e=h(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+(r=t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname,n=[],r.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,(function(e){"/.."===e?n.pop():n.push(e)})),n.join("").replace(/^\//,"/"===r.charAt(0)?"/":""))+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null;var r,n}function m(e){return e.split("#")[0]}function g(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=f(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)g(e[r],t);else for(var n in"string"==typeof e.$ref&&(e.$ref=f(t,e.$ref)),e)"enum"!==n&&g(e[n],t)}function y(e){var t=E[e=e||"en"];return function(e){var r=t[e.code]||x[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,(function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e}))}}l.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=u&&n<d)return this.createError(v.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},l.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(v.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},l.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(v.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},l.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},l.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},l.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(n=i[1],o=i[2]):n=t.pattern,r=new RegExp(n,o)}return r.test(e)?null:this.createError(v.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},l.prototype.validateArray=function(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null},l.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(v.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))||void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(v.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},l.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var n=r+1;n<e.length;n++)if(p(e[r],e[n])){var o=this.createError(v.ARRAY_UNIQUE,{match1:r,match2:n},"","/uniqueItems",null,e,t);if(this.handleError(o))return o}return null},l.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(n=this.validateAll(e[o],t.items[o],[o],["items",o],r+"/"+o))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],r+"/"+o))return n}else for(o=0;o<e.length;o++)if(n=this.validateAll(e[o],t.items,[o],["items"],r+"/"+o))return n;return null},l.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},l.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))||void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},l.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var o=this.createError(v.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(o))return o}}return null},l.prototype.validateObjectProperties=function(e,t,r){var n;for(var o in e){var i=r+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(s=!0,n=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return n;if(void 0!==t.patternProperties)for(var a in t.patternProperties)if(new RegExp(a).test(o)&&(s=!0,n=this.validateAll(e[o],t.patternProperties[a],[o],["patternProperties",a],i)))return n;if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},l.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(i))for(var s=0;s<i.length;s++){var a=i[s];if(void 0===e[a]&&(n=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:o,missing:a},"","/"+s,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,i,[],["dependencies",o],r))return n}return null},l.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},l.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(n=this.validateAll(e,i,[],["allOf",o],r))return n}return null},l.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,o,i=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var a=!0,c=0;c<t.anyOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=t.anyOf[c],p=this.errors.length,u=this.validateAll(e,l,[],["anyOf",c],r);if(null===u&&p===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0);a=!1;continue}return null}u&&i.push(u.prefixWith(null,""+c).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),a?(i=i.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},l.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,o,i=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var c=0;c<t.oneOf.length;c++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=t.oneOf[c],p=this.errors.length,u=this.validateAll(e,l,[],["oneOf",c],r);if(null===u&&p===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MULTIPLE,{index1:i,index2:c},"","/oneOf",null,e,t);if(i=c,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var h in this.unknownPropertyPaths)o[h]||(n[h]=!0)}}else u&&s.push(u)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===i?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",s,e,t)):(this.errors=this.errors.slice(0,a),null)},l.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,o,i=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(e,t.not,null,null,r),a=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===s&&0===a.length?this.createError(v.NOT_PASSED,{},"","/not",null,e,t):null},l.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var n,o=0;o<t.links.length;o++){var i=t.links[o];if("describedby"===i.rel){for(var s=new c(i.href),a=!0,l=0;l<s.varNames.length;l++)if(!(s.varNames[l]in e)){a=!1;break}if(a){var p={$ref:s.fillFromObject(e)};if(n=this.validateAll(e,p,[],["links",o],r))return n}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},b={};for(var w in v)b[v[w]]=w;var x={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};function k(e,t,r,n,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}k.prototype=Object.create(Error.prototype),k.prototype.constructor=k,k.prototype.name="ValidationError",k.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var E={},_=function e(t){var r,n,o=new l,i={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(n=e,!0)},addFormat:function(){o.addFormat.apply(o,arguments)},language:function(e){return e?(E[e]||(e=e.split("-")[0]),!!E[e]&&(r=e,e)):r},addLanguage:function(e,t){var r;for(r in v)t[r]&&!t[v[r]]&&(t[v[r]]=t[r]);var n=e.split("-")[0];if(E[n])for(r in E[e]=Object.create(E[n]),t)void 0===E[n][r]&&(E[n][r]=t[r]),E[e][r]=t[r];else E[e]=t,E[n]=t;return this},freshApi:function(t){var r=e();return t&&r.language(t),r},validate:function(e,t,i,s){var a=y(r),c=new l(o,!1,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t);var p=c.validateAll(e,t,null,null,"");return!p&&s&&(p=c.banUnknownProperties(e,t)),this.error=p,this.missing=c.missing,this.valid=null===p,this.valid},validateResult:function(){var e={toString:function(){return this.valid?"valid":this.error.message}};return this.validate.apply(e,arguments),e},validateMultiple:function(e,t,i,s){var a=y(r),c=new l(o,!0,n?function(e,t,r){return n(e,t,r)||a(e,t,r)}:a,i,s);"string"==typeof t&&(t={$ref:t}),c.addSchema("",t),c.validateAll(e,t,null,null,""),s&&c.banUnknownProperties(e,t);var p={toString:function(){return this.valid?"valid":this.error.message}};return p.errors=c.errors,p.missing=c.missing,p.valid=0===p.errors.length,p},addSchema:function(){return o.addSchema.apply(o,arguments)},getSchema:function(){return o.getSchema.apply(o,arguments)},getSchemaMap:function(){return o.getSchemaMap.apply(o,arguments)},getSchemaUris:function(){return o.getSchemaUris.apply(o,arguments)},getMissingUris:function(){return o.getMissingUris.apply(o,arguments)},dropSchemas:function(){o.dropSchemas.apply(o,arguments)},defineKeyword:function(){o.defineKeyword.apply(o,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==v[e])throw new Error("Error already defined: "+e+" as "+v[e]);if(void 0!==b[t])throw new Error("Error code already used: "+b[t]+" as "+t);for(var n in v[e]=t,b[t]=e,x[e]=x[t]=r,E){var o=E[n];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){o.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:g,resolveUrl:f,getDocumentUri:m,errorCodes:v};return i.language(t||"en"),i}();return _.addLanguage("en-gb",x),_.tv4=_,_})?n.apply(t,o):n)||(e.exports=i)},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,u,d,h,f,m,g;f=r(57),r(56);var y=r(11);p=y.EventEmitter,m=r(58),h=r(79),g=r(146),u=r(33),d=function(){var t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,t);var r,n,c,l=a(p);function p(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(r=l.call(this)).options=n,r.processes={},r.connections=[],r.initials=[],r.nextInitials=[],r.defaults=[],r.graph=t,r.started=!1,r.stopped=!0,r.debug=!0,r.eventBuffer=[],m.isBrowser()?r.baseDir=t.baseDir||"/":r.baseDir=t.baseDir||e.cwd(),r.startupDate=null,t.componentLoader?r.loader=t.componentLoader:r.loader=new h.ComponentLoader(r.baseDir,r.options),r}return r=p,(n=[{key:"uptime",value:function(){return this.startupDate?new Date-this.startupDate:0}},{key:"getActiveProcesses",value:function(){var e,t,r,n;if(e=[],!this.started)return e;for(t in n=this.processes)(r=n[t]).component.load>0&&e.push(t),r.component.__openConnections>0&&e.push(t);return e}},{key:"bufferedEmit",value:function(e,t){var r,n,o,i;if("icon"!==e&&"error"!==e&&"process-error"!==e&&"end"!==e)if(this.isStarted()||"end"===e){if(this.emit(e,t),"start"===e){for(n=0,o=(i=this.eventBuffer).length;n<o;n++)r=i[n],this.emit(r.type,r.payload);this.eventBuffer=[]}if("ip"===e)switch(t.type){case"openBracket":this.bufferedEmit("begingroup",t);break;case"closeBracket":this.bufferedEmit("endgroup",t);break;case"data":this.bufferedEmit("data",t)}}else this.eventBuffer.push({type:e,payload:t});else this.emit(e,t)}},{key:"load",value:function(e,t,r){return this.loader.load(e,r,t)}},{key:"addNode",value:function(e,t){var r,n=this;if(!this.processes[e.id])return r={id:e.id},e.component?this.load(e.component,e.metadata,(function(o,i){var s,a,c,l;if(o)return t(o);for(a in i.nodeId=e.id,r.component=i,r.componentName=e.component,s=r.component.inPorts.ports,c=r.component.outPorts.ports,s)(l=s[a]).node=e.id,l.nodeInstance=i,l.name=a;for(a in c)(l=c[a]).node=e.id,l.nodeInstance=i,l.name=a;return i.isSubgraph()&&n.subscribeSubgraph(r),n.subscribeNode(r),n.processes[r.id]=r,t(null,r)})):(this.processes[r.id]=r,void t(null,r));t(null,this.processes[e.id])}},{key:"removeNode",value:function(e,t){var r,n=this;return(r=this.getNode(e.id))?r.component.shutdown((function(r){return r?t(r):(delete n.processes[e.id],t(null))})):t(new Error("Node ".concat(e.id," not found")))}},{key:"renameNode",value:function(e,t,r){var n,o,i,s,a;if(!(a=this.getNode(e)))return r(new Error("Process ".concat(e," not found")));for(o in a.id=t,n=a.component.inPorts.ports,i=a.component.outPorts.ports,n)(s=n[o])&&(s.node=t);for(o in i)(s=i[o])&&(s.node=t);return this.processes[t]=a,delete this.processes[e],r(null)}},{key:"getNode",value:function(e){return this.processes[e]}},{key:"connect",value:function(){var e,t,r,n,o,i,s=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return e=0,n=function(t,r){return function(n){return s["add".concat(n)](r,(function(r){return r?a(r):++e%100!=0?t(n):void setTimeout((function(){return t(n)}),0)}))}},i=function(){return s.subscribeGraph(),a()},o=g.reduceRight(this.graph.nodes,n,i),r=g.reduceRight(this.graph.initializers,n,(function(){return o("Defaults")})),t=g.reduceRight(this.graph.edges,n,(function(){return r("Initial")})),g.reduceRight(this.graph.nodes,n,(function(){return t("Edge")}))("Node")}},{key:"connectPort",value:function(e,t,r,n,o,i){if(o)return e.to={process:t,port:r,index:n},t.component.inPorts&&t.component.inPorts[r]?t.component.inPorts[r].isAddressable()?(t.component.inPorts[r].attach(e,n),void i()):(t.component.inPorts[r].attach(e),void i()):void i(new Error("No inport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")));if(e.from={process:t,port:r,index:n},t.component.outPorts&&t.component.outPorts[r]){if(t.component.outPorts[r].isAddressable())return t.component.outPorts[r].attach(e,n),void i();t.component.outPorts[r].attach(e),i()}else i(new Error("No outport '".concat(r,"' defined in process ").concat(t.id," (").concat(e.getId(),")")))}},{key:"subscribeGraph",value:function(){var e,t,r,n,o=this;return e=[],r=!1,n=function(t,r){return e.push({op:t,details:r})},t=function(n){var i,s;if(n){if(0===o.listeners("process-error").length)throw n;o.bufferedEmit("process-error",n)}if(e.length)switch(r=!0,s=e.shift(),i=t,s.op){case"renameNode":return o.renameNode(s.details.from,s.details.to,i);default:return o[s.op](s.details,i)}else r=!1},this.graph.on("addNode",(function(e){if(n("addNode",e),!r)return t()})),this.graph.on("removeNode",(function(e){if(n("removeNode",e),!r)return t()})),this.graph.on("renameNode",(function(e,o){if(n("renameNode",{from:e,to:o}),!r)return t()})),this.graph.on("addEdge",(function(e){if(n("addEdge",e),!r)return t()})),this.graph.on("removeEdge",(function(e){if(n("removeEdge",e),!r)return t()})),this.graph.on("addInitial",(function(e){if(n("addInitial",e),!r)return t()})),this.graph.on("removeInitial",(function(e){if(n("removeInitial",e),!r)return t()}))}},{key:"subscribeSubgraph",value:function(e){var t,r=this;if(e.component.isReady()){if(e.component.network)return e.component.network.setDebug(this.debug),t=function(t,n){if("process-error"===t&&0===r.listeners("process-error").length){if(n.id&&n.metadata&&n.error)throw n.error;throw n}return n||(n={}),n.subgraph?(n.subgraph.unshift||(n.subgraph=[n.subgraph]),n.subgraph.unshift(e.id)):n.subgraph=[e.id],r.bufferedEmit(t,n)},e.component.network.on("ip",(function(e){return t("ip",e)})),e.component.network.on("process-error",(function(e){return t("process-error",e)}))}else e.component.once("ready",(function(){return r.subscribeSubgraph(e)}))}},{key:"subscribeSocket",value:function(e,t){var r,n=this;if(e.on("ip",(function(t){return n.bufferedEmit("ip",{id:e.getId(),type:t.type,socket:e,data:t.data,metadata:e.metadata})})),e.on("error",(function(e){if(0===n.listeners("process-error").length){if(e.id&&e.metadata&&e.error)throw e.error;throw e}return n.bufferedEmit("process-error",e)})),null!=t&&null!=(r=t.component)?r.isLegacy():void 0)return e.on("connect",(function(){return t.component.__openConnections||(t.component.__openConnections=0),t.component.__openConnections++})),e.on("disconnect",(function(){if(t.component.__openConnections--,t.component.__openConnections<0&&(t.component.__openConnections=0),0===t.component.__openConnections)return n.checkIfFinished()}))}},{key:"subscribeNode",value:function(e){var t=this;if(e.component.on("activate",(function(e){if(t.debouncedEnd)return t.abortDebounce=!0})),e.component.on("deactivate",(function(e){if(!(e>0))return t.checkIfFinished()})),e.component.getIcon)return e.component.on("icon",(function(){return t.bufferedEmit("icon",{id:e.id,icon:e.component.getIcon()})}))}},{key:"addEdge",value:function(e,t){var r,n,o,i=this;if((n=f.createSocket(e.metadata)).setDebug(this.debug),!(r=this.getNode(e.from.node)))return t(new Error("No process defined for outbound node ".concat(e.from.node)));if(!r.component)return t(new Error("No component defined for outbound node ".concat(e.from.node)));if(r.component.isReady()){if(!(o=this.getNode(e.to.node)))return t(new Error("No process defined for inbound node ".concat(e.to.node)));if(!o.component)return t(new Error("No component defined for inbound node ".concat(e.to.node)));if(o.component.isReady())return this.subscribeSocket(n,r),this.connectPort(n,o,e.to.port,e.to.index,!0,(function(o){return o?t(o):i.connectPort(n,r,e.from.port,e.from.index,!1,(function(e){return e?t(e):(i.connections.push(n),t())}))}));o.component.once("ready",(function(){return i.addEdge(e,t)}))}else r.component.once("ready",(function(){return i.addEdge(e,t)}))}},{key:"removeEdge",value:function(e,t){var r,n,o,i,s;for(s=[],n=0,o=(i=this.connections).length;n<o;n++)(r=i[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port&&(r.to.process.component.inPorts[r.to.port].detach(r),e.from.node&&r.from&&e.from.node===r.from.process.id&&e.from.port===r.from.port&&r.from.process.component.outPorts[r.from.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),s.push(t()));return s}},{key:"addDefaults",value:function(e,t){var r,n,o,i,s,a=this;if(!(o=this.getNode(e.id)))return t(new Error("Process ".concat(e.id," not defined")));if(!o.component)return t(new Error("No component defined for node ".concat(e.id)));if(!o.component.isReady())return o.component.setMaxListeners(0),void o.component.once("ready",(function(){return a.addDefaults(o,t)}));for(r in i=o.component.inPorts.ports)(n=i[r]).hasDefault()&&!n.isAttached()&&((s=f.createSocket()).setDebug(this.debug),this.subscribeSocket(s),this.connectPort(s,o,r,void 0,!0,(function(){})),this.connections.push(s),this.defaults.push(s));return t()}},{key:"addInitial",value:function(e,t){var r,n,o=this;return(r=f.createSocket(e.metadata)).setDebug(this.debug),this.subscribeSocket(r),(n=this.getNode(e.to.node))?n.component?n.component.isReady()||n.component.inPorts[e.to.port]?this.connectPort(r,n,e.to.port,e.to.index,!0,(function(n){var i;return n?t(n):(o.connections.push(r),i={socket:r,data:e.from.data},o.initials.push(i),o.nextInitials.push(i),o.isRunning()?o.sendInitials():o.isStopped()||(o.setStarted(!0),o.sendInitials()),t())})):(n.component.setMaxListeners(0),void n.component.once("ready",(function(){return o.addInitial(e,t)}))):t(new Error("No component defined for inbound node ".concat(e.to.node))):t(new Error("No process defined for inbound node ".concat(e.to.node)))}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,l,p,u,d;for(n=0,a=(p=this.connections).length;n<a;n++)if((r=p[n])&&e.to.node===r.to.process.id&&e.to.port===r.to.port){for(r.to.process.component.inPorts[r.to.port].detach(r),this.connections.splice(this.connections.indexOf(r),1),i=0,c=(u=this.initials).length;i<c;i++)(o=u[i])&&o.socket===r&&this.initials.splice(this.initials.indexOf(o),1);for(s=0,l=(d=this.nextInitials).length;s<l;s++)(o=d[s])&&o.socket===r&&this.nextInitials.splice(this.nextInitials.indexOf(o),1)}return t()}},{key:"sendInitial",value:function(e){return e.socket.post(new u("data",e.data,{initial:!0}))}},{key:"sendInitials",value:function(t){var r,n=this;return t||(t=function(){}),r=function(){var e,r,o,i;for(e=0,o=(i=n.initials).length;e<o;e++)r=i[e],n.sendInitial(r);return n.initials=[],t()},void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick(r):setTimeout(r,0)}},{key:"isStarted",value:function(){return this.started}},{key:"isStopped",value:function(){return this.stopped}},{key:"isRunning",value:function(){return this.getActiveProcesses().length>0}},{key:"startComponents",value:function(e){var t,r,n,o,i,s,a;if(e||(e=function(){}),t=0,n=this.processes?Object.keys(this.processes).length:0,o=function(r){return r?e(r):++t===n?e():void 0},!this.processes||!Object.keys(this.processes).length)return e();for(r in a=[],s=this.processes)(i=s[r]).component.isStarted()?o():0!==i.component.start.length?a.push(i.component.start(o)):(m.deprecated("component.start method without callback is deprecated"),i.component.start(),o());return a}},{key:"sendDefaults",value:function(e){var t,r,n,o;if(e||(e=function(){}),!this.defaults.length)return e();for(t=0,r=(n=this.defaults).length;t<r;t++)1===(o=n[t]).to.process.component.inPorts[o.to.port].sockets.length&&(o.connect(),o.send(),o.disconnect());return e()}},{key:"start",value:function(e){var t=this;e||(m.deprecated("Calling network.start() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),this.started?this.stop((function(r){return r?e(r):t.start(e)})):(this.initials=this.nextInitials.slice(0),this.eventBuffer=[],this.startComponents((function(r){if(r)return e(r);t.sendInitials((function(r){if(r)return e(r);t.sendDefaults((function(r){if(r)return e(r);t.setStarted(!0),e(null)}))}))})))}},{key:"stop",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d=this;if(e||(m.deprecated("Calling network.stop() without callback is deprecated"),e=function(){}),this.debouncedEnd&&(this.abortDebounce=!0),!this.started)return this.stopped=!0,e(null);for(n=0,i=(l=this.connections).length;n<i;n++)(t=l[n]).isConnected()&&t.disconnect();if(r=0,s=this.processes?Object.keys(this.processes).length:0,a=function(t){return t?e(t):++r===s?(d.setStarted(!1),d.stopped=!0,e()):void 0},!this.processes||!Object.keys(this.processes).length)return this.setStarted(!1),this.stopped=!0,e();for(o in u=[],p=this.processes)(c=p[o]).component.isStarted()?0!==c.component.shutdown.length?u.push(c.component.shutdown(a)):(m.deprecated("component.shutdown method without callback is deprecated"),c.component.shutdown(),a()):a();return u}},{key:"setStarted",value:function(e){if(this.started!==e)return e?(this.startupDate||(this.startupDate=new Date),this.started=!0,this.stopped=!1,this.bufferedEmit("start",{start:this.startupDate})):(this.started=!1,void this.bufferedEmit("end",{start:this.startupDate,end:new Date,uptime:this.uptime()}))}},{key:"checkIfFinished",value:function(){var e=this;if(!this.isRunning())return delete this.abortDebounce,this.debouncedEnd||(this.debouncedEnd=g.debounce((function(){if(!e.abortDebounce&&!e.isRunning())return e.setStarted(!1)}),50)),this.debouncedEnd()}},{key:"getDebug",value:function(){return this.debug}},{key:"setDebug",value:function(e){var t,r,n,o,i,s,a;if(e!==this.debug){for(this.debug=e,t=0,n=(i=this.connections).length;t<n;t++)i[t].setDebug(e);for(o in a=[],s=this.processes)(r=s[o].component).isSubgraph()?a.push(r.network.setDebug(e)):a.push(void 0);return a}}}])&&i(r.prototype,n),c&&i(r,c),p}(p);return t.prototype.processes={},t.prototype.connections=[],t.prototype.initials=[],t.prototype.defaults=[],t.prototype.graph=null,t.prototype.startupDate=null,t}.call(this),t.Network=d}).call(this,r(6))},function(e,t,r){"use strict";var n=r(75),o=r(34);t.a=function(e,t,r){var i=(e=e||{}).random||(e.rng||n.a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=i[s];return t}return Object(o.a)(i)}},function(e,t){e.exports=function(e,t,r){for(var n=0,o=e.length,i=3==arguments.length?r:e[n++];n<o;)i=t.call(null,i,e[n],++n,e);return i}},function(e,t,r){(function(t){!function(){"use strict";e.exports=function(e){return(e instanceof t?e:new t(e.toString(),"binary")).toString("base64")}}()}).call(this,r(30).Buffer)},function(e,t,r){"use strict";var n=String.prototype.replace,o=/%20/g,i=r(81),s={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=i.assign({default:s.RFC3986,formatters:{RFC1738:function(e){return n.call(e,o,"+")},RFC3986:function(e){return String(e)}}},s)},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(e){return null!==e&&"object"===n(e)}},function(e,t,r){e.exports=r(235)},function(e,t,r){const n=r(47),o=r(113),i=r(8)("fbp-spec:runner"),s=r(8)("fbp-spec:runner:received"),a=r(87),c=r(62),l=r(305),p=r(88),u=r(136);function d(e,t,r){var o,s;o=o=>{if(o)r(o);else if(t.fixture)if("json"!==t.fixture.type){if("fbp"===t.fixture.type){let e;try{e=n.parse(t.fixture.data)}catch(e){return void r(e)}return e.properties||(e.properties={}),void r(null,e)}r(new Error("Unknown fixture type "+t.fixture.type))}else{let e;try{e=JSON.parse(t.fixture.data)}catch(e){return void r(e)}r(null,e)}else!function(e,t,r){i("synthesizing fixture",e);const n=t[e];if(!n)return void r(new Error("Could not find component for topic: "+e));const o={properties:{},inports:{},outports:{},processes:{},connections:[]};o.processes.testee={component:e},n.inPorts.forEach(e=>{const t=e.id;o.inports[t]={process:"testee",port:t}}),n.outPorts.forEach(e=>{const t=e.id;o.outports[t]={process:"testee",port:t}}),Object.keys(o.outports).length<1?r(new Error(`Component '${e}' used as fixture has no outports`)):Object.keys(o.inports).length<1?r(new Error(`Component '${e}' used as fixture has no inports`)):r(null,o)}(t.topic,e.components,r)},null!=(s=e).components&&"object"==typeof s.components&&Object.keys(s.components).length?o(null):l.getComponents(e.client,(t,r)=>{t?o(t):(e.components=r,o(null))})}function h(e){return e.cases.filter(e=>!e.skip).length>0}function f(e,t,r){if(t.skip)return void r(null,{passed:!0});const n=c.isArray(t.inputs)?t.inputs:[t.inputs],o=c.isArray(t.expect)?t.expect:[t.expect];n.length===o.length?e.runTest(t,(e,t)=>{let n;if(e)return n={passed:!1,error:e},void r(null,n);n=function(e){let t;const r=e.filter(e=>null!=e.actual),n=e.filter(e=>null!=e.expect);if(r.length<n.length)return t={passed:!1,error:new Error(`Only got ${r.length} output messages out of ${n.length}`)},t;const o=e.map(e=>{e.error=null;try{u.expect(e.expect,e.actual)}catch(t){e.error=t}return e}),i=o.filter(e=>e.error);if(0===i.length)t={passed:!0};else if(1===n.length)t={error:i[0].error};else if(n.length>1&&1===i.length){const e=o.findIndex(e=>e.error),r=o[e];t={error:new Error(`Expectation ${e} of sequence failed: ${r.error.message}`)}}else{const e=o.map(e=>(null!=e.error?e.error.message:void 0)||"");t={error:new Error("Multiple failures in sequence: "+e)}}return t}(t),n.error&&(n.passed=!1),r(null,n)}):r(null,{passed:!1,error:new Error(`Test sequence length mismatch. Got ${n.length} inputs and ${o.length} expectations`)})}t.getComponentSuites=function(e,t){l.getCapabilities(e.client,(r,n)=>{r?t(r):-1!==n.indexOf("component:getsource")?l.getComponentTests(e.client,(e,r)=>{e?t(e):function(e,t){const r=Object.keys(e).map(t=>e[t]);c.asyncSeries(r,(function(e,t){p.loadYAML(e,(e,r)=>{t(null,e?null:r)})}),(e,r)=>{e?t(e):t(null,r.filter(e=>null!==e).reduce((e,t)=>e.concat(t),[]))})}(r,(e,n)=>{e?t(e):(i("get component suites",r.length,n.length),t(null,n))})}):t(null,[])})},t.Runner=class{constructor(e,t={}){this.client=e,this.currentGraphId=null,this.components={},this.parentElement=null,this.options=t,null==this.options.connectTimeout&&(this.options.connectTimeout=5e3),null==this.options.commandTimeout&&(this.options.commandTimeout=3e3)}prepareClient(e){null==this.client.protocol||null==this.client.address?e(null,this.client):a.resolve().then(()=>o(this.client,{commandTimeout:this.options.commandTimeout})).then(e=>(this.client=e,this.parentElement&&"iframe"===e.definition.protocol&&e.transport.setParentElement(this.parentElement),e)).nodeify(e)}connect(e){i("connect"),this.prepareClient(t=>{if(t)return void e(t);this.client.on("signal",({proto:e,command:t,payload:r})=>s(e,t,r)),this.client.on("network",({command:e,payload:t})=>{"output"===e&&t.message&&console.log(t.message)});const r=Math.floor(this.options.connectTimeout/500);c.retryUntil(()=>(i("trying to connect"),this.client.connect()),()=>this.client.isConnected()?a.resolve():a.reject(new Error("Not connected to runtime")),500,r).then(()=>this.checkCapabilities(["protocol:graph","protocol:network","protocol:runtime"])).nodeify(e)})}disconnect(e){i("disconnect"),(null!=this.client?this.client.isConnected():void 0)?a.resolve().then(()=>this.client.disconnect()).nodeify(e):e()}checkCapabilities(e){if(!this.client.isConnected())return a.reject(new Error("Not connected to runtime"));if(!this.client.definition||!this.client.definition.capabilities||!this.client.definition.capabilities.length)return a.reject(new Error("Runtime provides no capabilities"));for(let t=0;t<e.length;t+=1){const r=e[t];if(-1===this.client.definition.capabilities.indexOf(r))return a.reject(new Error("Runtime doesn't provide "+r))}return a.resolve()}setupSuite(e,t){i(`setup suite "${e.name}"`),h(e)?this.client.isConnected()?d(this,e,(e,r)=>{e?t(e):l.sendGraph(this.client,r,(e,r)=>{e?t(e):(this.currentGraphId=r,l.startNetwork(this.client,r,t))})}):t(new Error("Disconnected from runtime")):t(null)}teardownSuite(e,t){i(`teardown suite "${e.name}"`),h(e)?this.client.isConnected()?this.currentGraphId?l.stopNetwork(this.client,this.currentGraphId,t):t():t(new Error("Disconnected from runtime")):t(null)}runTest(e,t){if(i(`runtest "${e.name}"`),!this.client.isConnected())return void t(new Error("Disconnected from runtime"));const r=c.isArray(e.inputs)?e.inputs:[e.inputs],n=c.isArray(e.expect)?e.expect:[e.expect],o=[];for(let e=0,t=r.length,i=t>=0;i?e<t:e>t;i?e+=1:e-=1)o.push({inputs:r[e],expect:n[e]});c.asyncSeries(o,(e,t)=>function(e,t,r,n,o){const i=e.observe(e=>"runtime"===e.protocol&&"packet"===e.command&&e.payload.graph===t);function s(e){const t={};return e.forEach(e=>{t[e.payload.port]=e.payload.payload}),t}function c(e){if("runtime"!==e.protocol||"packet"!==e.command)return!1;if(e.payload.graph!==t)return!1;if("data"!==e.payload.event)return!1;const r=s(i.signals.slice(0,i.signals.indexOf(e)+1));return Object.keys(r).length===Object.keys(n).length}function p(e){return"network"===e.protocol&&"error"===e.command||"network"===e.protocol&&"processerror"===e.command?!e.payload.graph||e.payload.graph===t:"runtime"===e.protocol&&"packet"===e.command&&(e.payload.graph===t&&("data"===e.payload.event&&("error"===e.payload.port&&void 0===n.error)))}const u=a.promisify(l.sendPackets);a.resolve().then(()=>u(e,t,r)).then(()=>i.until(c,p)).then(e=>s(e)).nodeify(o)}(this.client,this.currentGraphId,e.inputs,e.expect,t),(e,r)=>{e?t(e):(r.forEach((e,t)=>{o[t].actual=e}),t(null,o))})}},t.runAll=function(e,t,r,n){function o(n,o){f(e,n,(e,s)=>{const a=n;var c;Object.keys(s).forEach(e=>{const t=s[e];a[e]=t}),n.error&&(a.error=n.error.message),i(`ran test "${n.name}"`,n.passed,e),c=null,r(t),o(c)})}i("running suites",t.map(e=>e.name)),c.asyncSeries(t,(t,r)=>function(e,t,r,n){t.skip?n(null,t):e.setupSuite(t,o=>{i("setup suite",o),o?n(o,t):c.asyncSeries(t.cases,r,r=>{i("testrun complete",r),r?e.teardownSuite(t,e=>{i("teardown suite",e),n(r,t)}):e.teardownSuite(t,e=>{i("teardown suite",e),n(e,t)})})})}(e,t,o,r),e=>n(e))},t.runTestAndCheck=f},function(e,t,r){const n=r(236),{EventEmitter:o}=r(11),i=r(83),{timedPromise:s,addressToProtocol:a}=r(262),{canSend:c,canReceive:l}=r(263),p=r(264)(),u=r(301),d=r(302);class h extends o{constructor(e,t){super(),this.definition=e;const r=n.getTransport(e.protocol);this.transport=new r(this.definition),this.options=t,this.options.connectionTimeout||(this.options.connectionTimeout=1e3),this.options.commandTimeout||(this.options.commandTimeout=1e3),this.options.skipPermissions||(this.options.skipPermissions=!1),this.options.skipValidation||(this.options.skipValidation=!1),this.prepareCommands()}validate(e,t){return p(e,t).catch(e=>this.options.skipValidation?(this.protocolError(e),Promise.resolve(t)):Promise.reject(e))}isConnected(){return this.transport.isConnected()}connect(){return s((e,t)=>{if(this.isConnected())return void e(this.definition);let r=null;const n=o=>{"runtime"===o.command?(this.transport.removeListener("error",r),this.validate("/runtime/output/runtime",o).then(()=>{this.prepareAdapter(o.payload.version),e(this.definition),this.emit("connected",this.definition),this.transport.once("disconnected",()=>{this.emit("disconnected",this.definition)})},e=>{this.transport.disconnect(),t(e)})):this.transport.once("runtime",n)};r=e=>{let r=e;e instanceof Error||(r=new Error(`Connection to ${this.definition.address} failed`)),this.transport.removeListener("runtime",n),this.transport.disconnect(),t(r)},this.transport.once("runtime",n),this.transport.once("error",r),this.transport.connect()},this.options.connectionTimeout,`Connection to ${this.definition.address} timed out`)}disconnect(){return new Promise(e=>{this.isConnected()?(this.transport.once("disconnected",()=>{e(null)}),this.transport.disconnect()):e(null)})}observe(e){return u(this,e)}signal(e){this.emit("signal",e),this.emit(e.protocol,{command:e.command,payload:e.payload})}protocolError(e){this.emit("protocolError",e)}canSend(e,t){return new Promise((r,n)=>{this.options.skipPermissions||c(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to send ${e}:${t} messages`))})}canReceive(e,t){return new Promise((r,n)=>{this.options.skipPermissions||l(e,t,this.definition.capabilities)?r(null):n(new Error(`Not permitted to receive ${e}:${t} messages`))})}prepareCommands(){this.protocol={},Object.keys(i).forEach(e=>{if(!i[e].input)return;const t={};Object.keys(i[e].input).forEach(r=>{t[r]=(t={})=>{const n={...t,secret:this.definition.secret};return this.validate(`/${e}/${i[e].input[r].id}`,{protocol:e,command:r,payload:t}).then(()=>new Promise((e,t)=>{this.adapter||t(new Error("FBP client must be connected to the runtime before sending commands")),e(null)})).then(()=>this.canSend(e,r)).then(()=>this.adapter.send(e,r,n))}}),this.protocol[e]=t}),this.protocol.graph.send=(e,t=!1)=>{const r=e.name||e.properties.id,{properties:n,nodes:o,edges:i,initializers:s,inports:a,outports:c}=e;return this.protocol.graph.clear({id:r,name:e.name,main:t,library:n.library||this.definition.namespace,icon:n.icon||"",description:n.description||""}).then(()=>Promise.all(o.map(e=>this.protocol.graph.addnode({id:e.id,component:e.component,metadata:e.metadata,graph:r})))).then(()=>Promise.all(i.map(e=>this.protocol.graph.addedge({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(s.map(e=>this.protocol.graph.addinitial({src:e.from,tgt:e.to,metadata:e.metadata,graph:r})))).then(()=>Promise.all(Object.keys(a).map(e=>this.protocol.graph.addinport({public:e,node:a[e].process,port:a[e].port,graph:r})))).then(()=>Promise.all(Object.keys(c).map(e=>this.protocol.graph.addoutport({public:e,node:c[e].process,port:c[e].port,graph:r})))).then(()=>e)}}prepareAdapter(e){if(this.adapter)return;const t=Number.parseFloat(e);if(!(t<=.9))throw new Error("Unsupported FBP protocol version "+e);this.adapter=d(this,t)}}e.exports=(e,t={})=>new Promise((r,o)=>{p("/definition/",e).then(()=>{const i=e;i.protocol=i.protocol||a(i.address),i.protocol?n.transports[i.protocol]?r(new h(i,t)):o(new Error("Unsupported FBP transport "+i.protocol)):o(new Error("Runtime connection protocol is required"))},o)})},function(e,t){var r=1e3,n=6e4,o=60*n,i=24*o;function s(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=i)return s(e,t,i,"day");if(t>=o)return s(e,t,o,"hour");if(t>=n)return s(e,t,n,"minute");if(t>=r)return s(e,t,r,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i)return Math.round(e/i)+"d";if(t>=o)return Math.round(e/o)+"h";if(t>=n)return Math.round(e/n)+"m";if(t>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(30),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=n:(i(n,t),t.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=o(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n){var o;e.exports=S,S.ReadableState=_;r(11).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=r(117),a=r(30).Buffer,c=t.Uint8Array||function(){};var l,p=r(250);l=p&&p.debuglog?p.debuglog("stream"):function(){};var u,d,h,f=r(251),m=r(118),g=r(119).getHighWaterMark,y=r(40).codes,v=y.ERR_INVALID_ARG_TYPE,b=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,x=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(41)(S,s);var k=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function _(e,t,n){o=o||r(42),e=e||{},"boolean"!=typeof n&&(n=t instanceof o),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",n),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(u||(u=r(121).StringDecoder),this.decoder=new u(e.encoding),this.encoding=e.encoding)}function S(e){if(o=o||r(42),!(this instanceof S))return new S(e);var t=this instanceof o;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function C(e,t,r,n,o){l("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,s);else if(o||(i=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new v("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(s,t)),i)k(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)s.endEmitted?k(e,new x):P(e,s,t,!0);else if(s.ended)k(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):D(e,s)):P(e,s,t,!1)}else n||(s.reading=!1,D(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),D(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),C(this,e,t,!1,r)},S.prototype.unshift=function(e){return C(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){u||(u=r(121).StringDecoder);var t=new u(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,o="";null!==n;)o+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==o&&this._readableState.buffer.push(o),this._readableState.length=o.length,this};function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(T,e))}function T(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,M(e)}function D(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(l("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function j(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){l("readable nexttick read 0"),e.read(0)}function R(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function F(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(G,t,e))}function G(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function B(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):O(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&F(this),null;var n,o=t.needReadable;return l("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",o=!0),t.ended||t.reading?l("reading or ended",o=!1):o&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){k(this,new w("_read()"))},S.prototype.pipe=function(e,t){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,l("pipe count=%d opts=%j",o.pipesCount,t);var s=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?c:g;function a(t,n){l("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",p),e.removeListener("error",h),e.removeListener("unpipe",a),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",d),u=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||p())}function c(){l("onend"),e.end()}o.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",a);var p=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,M(e))}}(r);e.on("drain",p);var u=!1;function d(t){l("ondata");var n=e.write(t);l("dest.write",n),!1===n&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!u&&(l("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function h(t){l("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&k(e,t)}function f(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",f),g()}function g(){l("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",m),e.emit("pipe",r),o.flowing||(l("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,l("on readable",o.length,o.reading),o.length?O(this):o.reading||n.nextTick(I,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(j,this),r},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(j,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(R,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",(function(){if(l("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(o){(l("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))})),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<E.length;i++)e.on(E[i],this.emit.bind(this,E[i]));return this._read=function(t){l("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(254)),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=L,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(e,t){return void 0===h&&(h=r(255)),h(S,e,t)})}).call(this,r(23),r(6))},function(e,t,r){e.exports=r(11).EventEmitter},function(e,t,r){"use strict";(function(t){function r(e,t){o(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(o,this,e)):t.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(n,s):(s._writableState.errorEmitted=!0,t.nextTick(r,s,e)):t.nextTick(r,s,e):i?(t.nextTick(n,s),i(e)):t.nextTick(n,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,r(6))},function(e,t,r){"use strict";var n=r(40).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,o,r);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new n(o?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},function(e,t,r){"use strict";(function(t,n){function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=S,S.WritableState=_;var s={deprecate:r(253)},a=r(117),c=r(30).Buffer,l=t.Uint8Array||function(){};var p,u=r(118),d=r(119).getHighWaterMark,h=r(40).codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,y=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,w=h.ERR_STREAM_WRITE_AFTER_END,x=h.ERR_UNKNOWN_ENCODING,k=u.errorOrDestroy;function E(){}function _(e,t,s){i=i||r(42),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,o=r.sync,i=r.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,o,i){--t.pendingcb,r?(n.nextTick(i,o),n.nextTick(D,e,t),e._writableState.errorEmitted=!0,k(e,o)):(i(o),e._writableState.errorEmitted=!0,k(e,o),D(e,t))}(e,r,o,t,i);else{var s=O(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),o?n.nextTick(P,e,r,s,i):P(e,r,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function S(e){var t=this instanceof(i=i||r(42));if(!t&&!p.call(S,this))return new S(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function C(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new v("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),D(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,C(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,p=r.encoding,u=r.callback;if(C(e,t,!1,t.objectMode?1:l.length,l,p,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(r){t.pendingcb--,r&&k(e,r),t.prefinished=!0,e.emit("prefinish"),D(e,t)}))}function D(e,t){var r=O(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return r}r(41)(S,a),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===S&&(e&&e._writableState instanceof _)}})):p=function(e){return e instanceof this},S.prototype.pipe=function(){k(this,new y)},S.prototype.write=function(e,t,r){var o,i=this._writableState,s=!1,a=!i.objectMode&&(o=e,c.isBuffer(o)||o instanceof l);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=E),i.ending?function(e,t){var r=new w;k(e,r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,o){var i;return null===r?i=new b:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(k(e,i),n.nextTick(o,i),!1)}(this,i,e,r))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var p=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},p?p.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,a,n,o,i);return l}(this,i,a,e,t,r)),s},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new x(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var o=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||function(e,t,r){t.ending=!0,D(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,o,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=u.destroy,S.prototype._undestroy=u.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this,r(23),r(6))},function(e,t,r){"use strict";var n=r(115).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=p,this.end=u,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function p(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=s(t[n]);if(o>=0)return o>0&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if((o=s(t[n]))>=0)return o>0&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=p;var n=r(40).codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(42);function l(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new i);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function p(e){if(!(this instanceof p))return new p(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,r){d(e,t,r)}))}function d(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(41)(p,c),p.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},p.prototype._transform=function(e,t,r){r(new o("_transform()"))},p.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},p.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},p.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,r){const n=r(8)("fbp-protocol-client:signaller"),{WebSocket:o,EventEmitter:i}=r(61);e.exports=class extends i{constructor(e,t="client",r="wss://api.flowhub.io"){super(),this.signaller=r,this.role=t,this.id=e,this.connection=null,this.connecting=!1,this.buffer=[]}isConnected(){return!(!this.connection||this.connection.readyState!==this.connection.OPEN)}connect(){if(this.isConnected()||this.connecting)return;n(`${this.id} ${this.role} connecting`);const e=new o(this.signaller);this.connecting=!0,e.addEventListener("open",()=>{n(`${this.id} ${this.role} connected to ${this.signaller}`),this.connection=e,this.connecting=!1,this.emit("connected"),this.flush()}),e.addEventListener("message",e=>{this.handleMessage(e)}),e.addEventListener("close",()=>{this.connection=null,this.connecting=!1,this.emit("disconnected"),n(`${this.id} ${this.role} disconnected`)}),e.addEventListener("error",e=>{this.connection=null,this.connecting=!1,this.emit("error",e),n(`${this.id} ${this.role} error`,e)})}signal(e,t={}){const r={id:this.id};this.send(`/to|${e}|/signal|${JSON.stringify(r)}|${JSON.stringify(t)}`)}join(e){const t={id:this.id},r={room:e,id:this.id};this.send(`/announce|${JSON.stringify(t)}|${JSON.stringify(r)}`)}joinReply(e,t){const r={id:this.id},n={room:t,id:this.id};this.send(`/to|${e}|/announce|${JSON.stringify(r)}|${JSON.stringify(n)}`)}send(e){if(!this.isConnected())return n(`${this.id} ${this.role} push buffer`),void this.buffer.push(e);const[t]=e.split("|");n(`${this.id} ${this.role} send ${t}`),this.connection.send(e)}disconnect(){this.isConnected()&&(n(`${this.id} ${this.role} disconnecting`),this.connection.close())}handleMessage(e){const[t,r,o,...i]=e.data.split("|");if("/to"===t){if(r!==this.id)return void n(`${this.id} ${this.role} wrongly-addressed DM, was sent to ${r}`);const t=`${o}|${i.join("|")}`;return void this.handleMessage({...e,data:t})}n(`${this.id} ${this.role} recv ${t}`);let s=null;switch(s=o?JSON.parse(o):JSON.parse(r),t){case"/announce":this.emit("join",s,JSON.parse(r));break;case"/signal":this.emit("signal",s,JSON.parse(r));break;case"/roominfo":break;default:n(`${this.id} ${this.role} unhandled command ${t}`,s)}}flush(){this.buffer.length&&(n(`${this.id} ${this.role} flush buffer`,this.buffer.length),this.buffer.forEach(e=>{this.send(e)}),this.buffer=[])}}},function(e,t,r){"use strict";var n=r(43);e.exports=function(e){n.copy(e,this)}},function(e,t,r){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r,n="boolean"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var o={key:t,value:e[t]},i={key:n,value:e[n]};return r(o,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var r,s;if(Array.isArray(t)){for(s="[",r=0;r<t.length;r++)r&&(s+=","),s+=e(t[r])||"null";return s+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=i.push(t)-1,c=Object.keys(t).sort(o&&o(t));for(s="",r=0;r<c.length;r++){var l=c[r],p=e(t[l]);p&&(s&&(s+=","),s+=JSON.stringify(l)+":"+p)}return i.splice(a,1),"{"+s+"}"}}(e)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n="",o=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var c="unknown keyword: "+a;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(n+=" var validate = ",o&&(e.async=!0,n+="async "),n+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(n+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var l=e.level,p=e.dataLevel,u=e.schema["false schema"],d=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(p||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:n+=" var "+g+" = false; ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'boolean schema is false' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";var y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?n+=o?" return data; ":" validate.errors = null; return true; ":n+=" var "+g+" = true; ";return e.isTop&&(n+=" }; return validate; "),n}if(e.isTop){var v=e.isTop;l=e.level=0,p=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}n+=" var vErrors = null; ",n+=" var errors = 0;     ",n+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((p=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),o&&!e.async)throw new Error("async schema in sync schema");n+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var w="",x="",k=e.schema.type,E=Array.isArray(k);if(k&&e.opts.nullable&&!0===e.schema.nullable&&(E?-1==k.indexOf("null")&&(k=k.concat("null")):"null"!=k&&(k=[k,"null"],E=!0)),E&&1==k.length&&(k=k[0],E=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=" "+e.RULES.all.$comment.code(e,"$comment")),k){if(e.opts.coerceTypes)var _=e.util.coerceToTypes(e.opts.coerceTypes,k);var S=e.RULES.types[k];if(_||E||!0===S||S&&!K(S)){d=e.schemaPath+".type",h=e.errSchemaPath+"/type",d=e.schemaPath+".type",h=e.errSchemaPath+"/type";var C=E?"checkDataTypes":"checkDataType";if(n+=" if ("+e.util[C](k,m,e.opts.strictNumbers,!0)+") { ",_){var P="dataType"+l,A="coerced"+l;n+=" var "+P+" = typeof "+m+"; var "+A+" = undefined; ","array"==e.opts.coerceTypes&&(n+=" if ("+P+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+P+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+A+" = "+m+"; } "),n+=" if ("+A+" !== undefined) ; ";var O=_;if(O)for(var T,D=-1,N=O.length-1;D<N;)"string"==(T=O[D+=1])?n+=" else if ("+P+" == 'number' || "+P+" == 'boolean') "+A+" = '' + "+m+"; else if ("+m+" === null) "+A+" = ''; ":"number"==T||"integer"==T?(n+=" else if ("+P+" == 'boolean' || "+m+" === null || ("+P+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==T&&(n+=" && !("+m+" % 1)"),n+=")) "+A+" = +"+m+"; "):"boolean"==T?n+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+A+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+A+" = true; ":"null"==T?n+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==T&&(n+=" else if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+m+" == null) "+A+" = ["+m+"]; ");n+=" else {   ",(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+k.join(","):""+k,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+k.join(","):""+k,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } if ("+A+" !== undefined) {  ";var j=p?"data"+(p-1||""):"parentData";n+=" "+m+" = "+A+"; ",p||(n+="if ("+j+" !== undefined)"),n+=" "+j+"["+(p?e.dataPathArr[p]:"parentDataProperty")+"] = "+A+"; } "}else{(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+k.join(","):""+k,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+k.join(","):""+k,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}n+=" } "}}if(e.schema.$ref&&!i)n+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(n+=" } if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",x+="}");else{var I=e.RULES;if(I)for(var R=-1,M=I.length-1;R<M;)if(K(S=I[R+=1])){if(S.type&&(n+=" if ("+e.util.checkDataType(S.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==S.type&&e.schema.properties){u=e.schema.properties;var L=Object.keys(u);if(L)for(var F,G=-1,B=L.length-1;G<B;){if(void 0!==(q=u[F=L[G+=1]]).default){var z=m+e.util.getProperty(F);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+z;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}else if("array"==S.type&&Array.isArray(e.schema.items)){var U=e.schema.items;if(U){D=-1;for(var q,$=U.length-1;D<$;)if(void 0!==(q=U[D+=1]).default){z=m+"["+D+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+z;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else n+=" if ("+z+" === undefined ","empty"==e.opts.useDefaults&&(n+=" || "+z+" === null || "+z+" === '' "),n+=" ) "+z+" = ","shared"==e.opts.useDefaults?n+=" "+e.useDefault(q.default)+" ":n+=" "+JSON.stringify(q.default)+" ",n+="; "}}}var H=S.rules;if(H)for(var V,W=-1,J=H.length-1;W<J;)if(Q(V=H[W+=1])){var X=V.code(e,V.keyword,S.type);X&&(n+=" "+X+" ",f&&(w+="}"))}if(f&&(n+=" "+w+" ",w=""),S.type&&(n+=" } ",k&&k===S.type&&!_)){n+=" else { ";var Y;d=e.schemaPath+".type",h=e.errSchemaPath+"/type";(Y=Y||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",n+=E?""+k.join(","):""+k,n+="' } ",!1!==e.opts.messages&&(n+=" , message: 'should be ",n+=E?""+k.join(","):""+k,n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),n+=" } "):n+=" {} ";y=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } "}f&&(n+=" if (errors === ",n+=v?"0":"errs_"+l,n+=") { ",x+="}")}}function K(e){for(var t=e.rules,r=0;r<t.length;r++)if(Q(t[r]))return!0}function Q(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=" "+x+" "),v?(o?(n+=" if (errors === 0) return data;           ",n+=" else throw new ValidationError(vErrors); "):(n+=" validate.errors = vErrors; ",n+=" return errors === 0;       "),n+=" }; return validate;"):n+=" var "+g+" = errors === errs_"+l+";",n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,y=h?"<":">",v=h?">":"<",b=void 0;if(!d&&"number"!=typeof a&&void 0!==a)throw new Error(t+" must be number");if(!g&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(f+" must be number or boolean");if(g){var w=e.util.getData(m.$data,s,e.dataPathArr),x="exclusive"+i,k="exclType"+i,E="exclIsNumber"+i,_="' + "+(P="op"+i)+" + '";o+=" var schemaExcl"+i+" = "+w+"; ",o+=" var "+x+"; var "+k+" = typeof "+(w="schemaExcl"+i)+"; if ("+k+" != 'boolean' && "+k+" != 'undefined' && "+k+" != 'number') { ";var S;b=f;(S=S||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(o+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(o+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var C=o;o=S.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } else if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+k+" == 'number' ? ( ("+x+" = "+n+" === undefined || "+w+" "+y+"= "+n+") ? "+u+" "+v+"= "+w+" : "+u+" "+v+" "+n+" ) : ( ("+x+" = "+w+" === true) ? "+u+" "+v+"= "+n+" : "+u+" "+v+" "+n+" ) || "+u+" !== "+u+") { var op"+i+" = "+x+" ? '"+y+"' : '"+y+"='; ",void 0===a&&(b=f,l=e.errSchemaPath+"/"+f,n=w,d=g)}else{_=y;if((E="number"==typeof m)&&d){var P="'"+_+"'";o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" ( "+n+" === undefined || "+m+" "+y+"= "+n+" ? "+u+" "+v+"= "+m+" : "+u+" "+v+" "+n+" ) || "+u+" !== "+u+") { "}else{E&&void 0===a?(x=!0,b=f,l=e.errSchemaPath+"/"+f,n=m,v+="="):(E&&(n=Math[h?"min":"max"](m,a)),m===(!E||n)?(x=!0,b=f,l=e.errSchemaPath+"/"+f,v+="="):(x=!1,_+="="));P="'"+_+"'";o+=" if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+u+" "+v+" "+n+" || "+u+" !== "+u+") { "}}b=b||t,(S=S||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+P+", limit: "+n+", exclusive: "+x+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be "+_+" ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";C=o;return o=S.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+C+"]); ":o+=" validate.errors = ["+C+"]; return false; ":o+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" "+u+".length "+("maxItems"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxItems"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" items' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");var h="maxLength"==t?">":"<";o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),!1===e.opts.unicode?o+=" "+u+".length ":o+=" ucs2length("+u+") ",o+=" "+h+" "+n+") { ";var f=t,m=m||[];m.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT be ",o+="maxLength"==t?"longer":"shorter",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" characters' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var g=o;return o=m.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+g+"]); ":o+=" validate.errors = ["+g+"]; return false; ":o+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'number') || "),o+=" Object.keys("+u+").length "+("maxProperties"==t?">":"<")+" "+n+") { ";var h=t,f=f||[];f.push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have ",o+="maxProperties"==t?"more":"fewer",o+=" than ",o+=d?"' + "+n+" + '":""+a,o+=" properties' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var m=o;return o=f.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,r){try{e.exports={base:r(312),testcase:r(313),testsuite:r(314),testsuites:r(315),expectations:r(316),testsfile:r(317)}}catch(e){console.log("fbp-spec: Failed to load schemas",e)}},function(e,t,r){"use strict";var n=r(318);e.exports=n},function(e,t,r){"use strict";var n=r(45);e.exports=new n({include:[r(135)]})},function(e,t,r){"use strict";var n=r(45);e.exports=new n({include:[r(89)],implicit:[r(324),r(325),r(326),r(327)]})},function(e,t,r){const n=r(8)("fbp-spec:expectation"),o=r(339),i=r(362),s=r(62),a={type:(e,t)=>o.expect(e).to.be.a(t),equals:(e,t)=>o.expect(e).to.eql(t),above:(e,t)=>o.expect(e).to.be.above(t),below:(e,t)=>o.expect(e).to.be.below(t),haveKeys:(e,t)=>o.expect(e).to.have.keys(t),includeKeys:(e,t)=>o.expect(e).to.include.keys(t),contains:(e,t)=>o.expect(e).to.contain(t),noterror(e){if(null!=e?e.message:void 0)throw e}};t.expect=function e(t,r){s.isArray(t)?t.forEach(e=>{Object.keys(e).forEach(t=>{(s.isArray(e[t])?e[t]:[e[t]]).forEach(e=>{n("checking port for expectation",t,e);const o=r[t];if(void 0===o)throw new Error("No data received on port "+t);const s=function(e){const t=Object.keys(e);for(let r=0;r<t.length;r+=1){const n=t[r],o=e[n];if("path"!==n){const e=a[n];if(e){const t=t=>e(t,o);return t.toString=()=>`${n} ${o}`,t}}}throw new Error(`fbp-spec: No operator matching ${Object.keys(e)}. Available: ${Object.keys(a)}`)}(e);(function(e,t){let r;if(e.path){if(n("extracting JSONPath from",e.path,t),r=i.query(t,e.path),!r.length)throw new Error(`expected JSONPath '${e.path}' to match data in ${JSON.stringify(t)}`)}else r=[t];return n("matching against",r),r})(e,o).forEach(e=>{n("checking against predicate",e,s.toString()),s(e)})})})}):e([t],r)},t.noError=e=>o.expect(e).to.not.exist},function(e,t){
/*!
 * assertion-error
 * Copyright(c) 2013 Jake Luer <jake@qualiancy.com>
 * MIT Licensed
 */
/*!
 * Return a function that will copy properties from
 * one object to another excluding any originally
 * listed. Returned function will create a new `{}`.
 *
 * @param {String} excluded properties ...
 * @return {Function}
 */
function r(){var e=[].slice.call(arguments);function t(t,r){Object.keys(r).forEach((function(n){~e.indexOf(n)||(t[n]=r[n])}))}return function(){for(var e=[].slice.call(arguments),r=0,n={};r<e.length;r++)t(n,e[r]);return n}}function n(e,t,o){var i=r("name","message","stack","constructor","toJSON")(t||{});for(var s in this.message=e||"Unspecified AssertionError",this.showDiff=!1,i)this[s]=i[s];if(o=o||n,Error.captureStackTrace)Error.captureStackTrace(this,o);else try{throw new Error}catch(e){this.stack=e.stack}}
/*!
 * Inherit from Error.prototype
 */
/*!
 * Primary Exports
 */
e.exports=n,n.prototype=Object.create(Error.prototype),
/*!
 * Statically set name
 */
n.prototype.name="AssertionError",
/*!
 * Ensure correct constructor
 */
n.prototype.constructor=n,n.prototype.toJSON=function(e){var t=r("constructor","toJSON","stack")({name:this.name},this);return!1!==e&&this.stack&&(t.stack=this.stack),t}},function(e,t){
/*!
 * Chai - getActual utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){return t.length>4?t[4]:e._obj}},function(e,t,r){
/*!
 * Chai - flag utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(91),o=r(46);e.exports=function(e){var t=n(e),r=Object.prototype.toString.call(e);if(o.truncateThreshold&&t.length>=o.truncateThreshold){if("[object Function]"===r)return e.name&&""!==e.name?"[Function: "+e.name+"]":"[Function]";if("[object Array]"===r)return"[ Array("+e.length+") ]";if("[object Object]"===r){var i=Object.keys(e);return"{ Object ("+(i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", "))+") }"}return t}return t}},function(e,t,r){"use strict";var n=Function.prototype.toString,o=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\s\(\/]+)/;e.exports=function(e){if("function"!=typeof e)return null;var t="";if(void 0===Function.prototype.name&&void 0===e.name){var r=n.call(e).match(o);r&&(t=r[1])}else t=e.name;return t}},function(e,t){
/*!
 * Chai - getProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=Object.getOwnPropertyNames(e);function r(e){-1===t.indexOf(e)&&t.push(e)}for(var n=Object.getPrototypeOf(e);null!==n;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return t}},function(e,t){
/*!
 * Chai - getOwnEnumerablePropertySymbols utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){return"function"!=typeof Object.getOwnPropertySymbols?[]:Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}},function(e,t,r){const n=r(8)("fbp-spec:subprocess");t.start=function(e,t,o){let i;try{i=r(12)}catch(e){return o(e),null}if(null==t.timeout){t.timeout=300}let s=!1,a="";const c=["-c",e],l=i.spawn("sh",c);return n("spawned",`'sh ${c.join(" ")}'`),n("waiting for output"),l.on("error",e=>o(e)),l.stdout.on("data",e=>{const t=e.toString();n("sub stdout",t),s||(n("got output, transitioning to started"),s=!0,setTimeout(o,100))}),l.stderr.on("data",e=>{const t=e.toString();a+=t,n("sub stderr",t),s||(n("got stderr, failing"),s=!0,o(new Error(`Subprocess wrote on stderr: '${a}'`)))}),setTimeout(()=>{s||(n("timeout waiting for output, assuming started"),s=!0,o(null))},t.timeout),l}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).graph=e,t.lastRevision=0,t}return t=c,(r=[{key:"countTransactions",value:function(){return 0}},{key:"putTransaction",value:function(e,t){e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e,t)}},{key:"fetchTransaction",value:function(e){return[]}}])&&o(t.prototype,r),n&&o(t,n),c}(r(11).EventEmitter);t.default=l},function(e,t){e.exports={inports:{},outports:{},groups:[],processes:{AppView:{component:"polymer/noflo-ui"},StoreDispatch:{component:"ui/Store"},State:{component:"ui/State"},MapStateToProps:{component:"ui/MapStateToProps"},Logger:{component:"ui/LoggingMiddleware"},UrlMiddleware:{component:"ui/UrlMiddleware"},StorageMiddleware:{component:"ui/StorageMiddleware"},UserMiddleware:{component:"ui/UserMiddleware"},RegistryMiddleware:{component:"ui/RegistryMiddleware"},GithubMiddleware:{component:"ui/GithubMiddleware"},RuntimeMiddleware:{component:"ui/RuntimeMiddleware"},Dispatch:{component:"ui/DispatchAction"},UserReducer:{component:"ui/UserReducer"},MainContext:{component:"ui/CreateContext"},StorageReducer:{component:"ui/StorageReducer"},GithubReducer:{component:"ui/GithubReducer"},RegistryReducer:{component:"ui/RegistryReducer"},RuntimeReducer:{component:"ui/RuntimeReducer"},ContextReducer:{component:"ui/ContextReducer"},ShowErrors:{component:"core/Output"},ListenWindow:{component:"interaction/ListenResize"}},connections:[{src:{process:"AppView",port:"event"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"State",port:"state"},tgt:{process:"StoreDispatch",port:"state"}},{src:{process:"State",port:"state"},tgt:{process:"MapStateToProps",port:"state"}},{src:{process:"State",port:"updated"},tgt:{process:"MapStateToProps",port:"updated"}},{src:{process:"MapStateToProps",port:"props"},tgt:{process:"AppView",port:"updated"}},{src:{process:"StoreDispatch",port:"pass"},tgt:{process:"Logger",port:"in"}},{src:{process:"Logger",port:"pass"},tgt:{process:"UrlMiddleware",port:"in"}},{src:{process:"UrlMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UrlMiddleware",port:"pass"},tgt:{process:"StorageMiddleware",port:"in"}},{src:{process:"StorageMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"StorageMiddleware",port:"pass"},tgt:{process:"UserMiddleware",port:"in"}},{src:{process:"UserMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"UserMiddleware",port:"pass"},tgt:{process:"RegistryMiddleware",port:"in"}},{src:{process:"RegistryMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RegistryMiddleware",port:"pass"},tgt:{process:"GithubMiddleware",port:"in"}},{src:{process:"GithubMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"GithubMiddleware",port:"pass"},tgt:{process:"RuntimeMiddleware",port:"in"}},{src:{process:"RuntimeMiddleware",port:"new"},tgt:{process:"StoreDispatch",port:"action"}},{src:{process:"RuntimeMiddleware",port:"pass"},tgt:{process:"Dispatch",port:"in"}},{data:"user:*,main:*,storage:*,storage:*:*,github:*,flowhub:*,runtime:*,context:*",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"UserReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"MainContext",port:"start"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"StorageReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GithubReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"RegistryReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"RuntimeReducer",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"ContextReducer",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"ShowErrors",port:"in"}},{src:{process:"UserReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"GithubReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RegistryReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"RuntimeReducer",port:"context"},tgt:{process:"State",port:"in"}},{src:{process:"StorageReducer",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"MainContext",port:"out"},tgt:{process:"State",port:"in"}},{src:{process:"ContextReducer",port:"context"},tgt:{process:"State",port:"in"}},{data:"noflo-ui",tgt:{process:"AppView",port:"selector"}},{data:"",tgt:{process:"ListenWindow",port:"start"}},{src:{process:"ListenWindow",port:"width"},tgt:{process:"AppView",port:"width"}},{src:{process:"ListenWindow",port:"height"},tgt:{process:"AppView",port:"height"}}],properties:{environment:{type:"noflo-browser"},icon:"code"},caseSensitive:!1}},function(e,t){var r,n,o,i,s;n=function(e){return/.*\.coffee$/.test(e)?"coffeescript":"javascript"},o=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(arg)},i=function(e,t,r){if(void 0===t)return e;switch(null===r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}},s=function(e){var t;return t=function(t,r,n,o,i,s){for(var a;i>=0&&i<s;)n=r(n,t[a=o?o[i]:i],a,t),i+=e;return n},function(r,n,o,s){var a,c,l;return n=i(n,s,4),l=((c=Object.keys(r))||r).length,a=e>0?0:l-1,arguments.length<3&&(o=r[c?c[a]:a],a+=e),t(r,n,o,c,a,l)}}(-1),r=function(e,t,r){var n,o,i,s,a,c;return a=void 0,n=void 0,o=void 0,c=void 0,s=void 0,i=function(){var l;(l=Date.now-c)<t&&l>=0?a=setTimeout(i,t-l):(a=null,r||(s=e.apply(o,n),a||(o=n=null)))},function(){var l;return o=this,n=arguments,c=Date.now,l=r&&!a,a||(a=setTimeout(i,t)),l&&(s=e.apply(o,n),o=n=null),s}},t.guessLanguageFromFilename=n,t.reduceRight=s,t.debounce=r,t.isArray=o},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,x,k,E,_=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},S=r(11);m=S.EventEmitter,E=r(148),g=r(33),w=r(68)("noflo:component"),x=r(68)("noflo:component:brackets"),k=r(68)("noflo:component:send"),f=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(r,e);var t=p(r);function r(e){var n,o,i,a;return s(this,r),(n=t.call(this)).error=n.error.bind(d(n)),e||(e={}),e.inPorts||(e.inPorts={}),e.inPorts instanceof E.InPorts?n.inPorts=e.inPorts:n.inPorts=new E.InPorts(e.inPorts),e.outPorts||(e.outPorts={}),e.outPorts instanceof E.OutPorts?n.outPorts=e.outPorts:n.outPorts=new E.OutPorts(e.outPorts),e.icon&&(n.icon=e.icon),e.description&&(n.description=e.description),n.started=!1,n.load=0,n.ordered=null!=(o=e.ordered)&&o,n.autoOrdering=null!=(i=e.autoOrdering)?i:null,n.outputQ=[],n.bracketContext={in:{},out:{}},n.activateOnInput=null==(a=e.activateOnInput)||a,n.forwardBrackets={in:["out","error"]},"forwardBrackets"in e&&(n.forwardBrackets=e.forwardBrackets),"function"==typeof e.process&&n.process(e.process),n}return c(r,[{key:"getDescription",value:function(){return this.description}},{key:"isReady",value:function(){return!0}},{key:"isSubgraph",value:function(){return!1}},{key:"setIcon",value:function(e){return this.icon=e,this.emit("icon",this.icon)}},{key:"getIcon",value:function(){return this.icon}},{key:"error",value:function(e){var t,n,o,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(_(this,r),!this.outPorts[c]||!this.outPorts[c].isAttached()&&this.outPorts[c].isRequired())throw e;for(n=0,i=a.length;n<i;n++)t=a[n],this.outPorts[c].openBracket(t,{scope:l});for(this.outPorts[c].data(e,{scope:l}),o=0,s=a.length;o<s;o++)t=a[o],this.outPorts[c].closeBracket(t,{scope:l})}},{key:"setUp",value:function(e){e()}},{key:"tearDown",value:function(e){e()}},{key:"start",value:function(e){var t=this;if(this.isStarted())return e();this.setUp((function(r){if(r)return e(r);t.started=!0,t.emit("start"),e(null)}))}},{key:"shutdown",value:function(e){var t,r=this;t=function(){var t,n,o;for(o in n=r.inPorts.ports||r.inPorts)"function"==typeof(t=n[o]).clear&&t.clear();if(r.bracketContext={in:{},out:{}},!r.isStarted())return e();r.started=!1,r.emit("end"),e()},this.tearDown((function(n){var o;return n?e(n):r.load>0?(o=function(e){e>0||(this.removeListener("deactivate",o),t())},void r.on("deactivate",o)):void t()}))}},{key:"isStarted",value:function(){return this.started}},{key:"prepareForwarding",value:function(){var e,t,r,n,o,i,s,a;for(t in s=[],i=this.forwardBrackets)if(o=i[t],t in this.inPorts.ports){for(a=[],e=0,r=o.length;e<r;e++)(n=o[e])in this.outPorts.ports&&a.push(n);0===a.length?s.push(delete this.forwardBrackets[t]):s.push(this.forwardBrackets[t]=a)}else delete this.forwardBrackets[t];return s}},{key:"isLegacy",value:function(){return!this.handle}},{key:"process",value:function(e){var t,r,n=this;if("function"!=typeof e)throw new Error("Process handler must be a function");if(!this.inPorts)throw new Error("Component ports must be defined before process function");for(t in this.prepareForwarding(),this.handle=e,r=this.inPorts.ports)!function(e,t){t.name||(t.name=e),t.on("ip",(function(e){return n.handleIP(e,t)}))}(t,r[t]);return this}},{key:"isForwardingInport",value:function(e){return("string"==typeof e?e:e.name)in this.forwardBrackets}},{key:"isForwardingOutport",value:function(e,t){var r,n;return r="string"==typeof e?e:e.name,n="string"==typeof t?t:t.name,!!this.forwardBrackets[r]&&-1!==this.forwardBrackets[r].indexOf(n)}},{key:"isOrdered",value:function(){return!!this.ordered||!!this.autoOrdering}},{key:"handleIP",value:function(e,t){var r,n,o,i,s,a,c;if(t.options.triggering){if("openBracket"!==e.type||null!==this.autoOrdering||this.ordered||(w("".concat(this.nodeId," port '").concat(t.name,"' entered auto-ordering mode")),this.autoOrdering=!0),c={},this.isForwardingInport(t)){if("openBracket"===e.type)return;if("closeBracket"===e.type){if(o=(r=t.getBuffer(e.scope,e.index)).filter((function(e){return"data"===e.type})),this.outputQ.length>=this.load&&0===o.length){if(r[0]!==e)return;t.get(e.scope,e.index),(n=this.getBracketContext("in",t.name,e.scope,e.index).pop()).closeIp=e,x("".concat(this.nodeId," closeBracket-C from '").concat(n.source,"' to ").concat(n.ports,": '").concat(e.data,"'")),c={__resolved:!0,__bracketClosingAfter:[n]},this.outputQ.push(c),this.processOutputQueue()}if(!o.length)return}}n=new y(e,this,t,c),s=new v(this.inPorts,n),a=new b(this.outPorts,n);try{this.handle(s,a,n)}catch(e){i=e,this.deactivate(n),a.sendDone(i)}n.activated||(t.isAddressable()?w("".concat(this.nodeId," packet on '").concat(t.name,"[").concat(e.index,"]' didn't match preconditions: ").concat(e.type)):w("".concat(this.nodeId," packet on '").concat(t.name,"' didn't match preconditions: ").concat(e.type)))}}},{key:"getBracketContext",value:function(e,t,r,n){var o,i,s=E.normalizePortName(t);return i=s.name,o=s.index,null!=n&&(o=n),("in"===e?this.inPorts:this.outPorts)[i].isAddressable()&&(t="".concat(i,"[").concat(o,"]")),this.bracketContext[e][t]||(this.bracketContext[e][t]={}),this.bracketContext[e][t][r]||(this.bracketContext[e][t][r]=[]),this.bracketContext[e][t][r]}},{key:"addToResult",value:function(e,t,r){var n,o,i,s,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=E.normalizePortName(t);return s=c.name,o=c.index,i=a?"unshift":"push",this.outPorts[s].isAddressable()?(n=o?parseInt(o):r.index,e[s]||(e[s]={}),e[s][n]||(e[s][n]=[]),r.index=n,void e[s][n][i](r)):(e[s]||(e[s]=[]),e[s][i](r))}},{key:"getForwardableContexts",value:function(e,t,r){var n,o,i,s=this,a=E.normalizePortName(t);return i=a.name,o=a.index,n=[],r.forEach((function(r,a){var c;if(s.isForwardingOutport(e,i)&&-1===r.ports.indexOf(t)&&(!(c=s.getBracketContext("out",i,r.ip.scope,o)[a])||c.ip.data!==r.ip.data||-1===c.ports.indexOf(t)))return n.push(r)})),n}},{key:"addBracketForwards",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v=this;if(null!=(d=e.__bracketClosingBefore)?d.length:void 0)for(r=0,a=(h=e.__bracketClosingBefore).length;r<a;r++)if(t=h[r],x("".concat(this.nodeId," closeBracket-A from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(o=0,c=(f=t.ports).length;o<c;o++)u=f[o],n=t.closeIp.clone(),this.addToResult(e,u,n,!0),this.getBracketContext("out",u,n.scope).pop();if(e.__bracketContext&&Object.keys(e.__bracketContext).reverse().forEach((function(r){var o,i,s,a,c,l,p,u,d,h,f,m,g,y,b;if((t=e.__bracketContext[r]).length){for(m in y=[],e)if(c=e[m],0!==m.indexOf("__"))if(v.outPorts[m].isAddressable()){for(s in c)if(c[s].filter((function(e){return"data"===e.type})).length&&(g="".concat(m,"[").concat(s,"]"),(b=v.getForwardableContexts(r,g,t)).length)){for(i=[],l=0,u=b.length;l<u;l++)o=b[l],x("".concat(v.nodeId," openBracket from '").concat(r,"' to '").concat(g,"': '").concat(o.ip.data,"'")),(n=o.ip.clone()).index=parseInt(s),i.push(n),o.ports.push(g),v.getBracketContext("out",m,o.ip.scope,s).push(o);for(i.reverse(),p=0,d=i.length;p<d;p++)a=i[p],v.addToResult(e,m,a,!0)}}else if(c.filter((function(e){return"data"===e.type})).length&&(b=v.getForwardableContexts(r,m,t)).length){for(i=[],f=0,h=b.length;f<h;f++)o=b[f],x("".concat(v.nodeId," openBracket from '").concat(r,"' to '").concat(m,"': '").concat(o.ip.data,"'")),i.push(o.ip.clone()),o.ports.push(m),v.getBracketContext("out",m,o.ip.scope).push(o);i.reverse(),y.push(function(){var t,r,n;for(n=[],r=0,t=i.length;r<t;r++)a=i[r],n.push(this.addToResult(e,m,a,!0));return n}.call(v))}return y}})),null!=(m=e.__bracketClosingAfter)?m.length:void 0)for(i=0,l=(g=e.__bracketClosingAfter).length;i<l;i++)if(t=g[i],x("".concat(this.nodeId," closeBracket-B from '").concat(t.source,"' to ").concat(t.ports,": '").concat(t.closeIp.data,"'")),t.ports.length)for(s=0,p=(y=t.ports).length;s<p;s++)u=y[s],n=t.closeIp.clone(),this.addToResult(e,u,n,!1),this.getBracketContext("out",u,n.scope).pop();return delete e.__bracketClosingBefore,delete e.__bracketContext,delete e.__bracketClosingAfter}},{key:"processOutputQueue",value:function(){var e,t,r,n,o,i,s,a;for(a=[];this.outputQ.length>0&&this.outputQ[0].__resolved;)s=this.outputQ.shift(),this.addBracketForwards(s),a.push(function(){var a,c,l;for(o in l=[],s)if(n=s[o],0!==o.indexOf("__"))if(this.outPorts.ports[o].isAddressable()){for(e in n)if(t=n[e],e=parseInt(e),this.outPorts.ports[o].isAttached(e))for(a=0,c=t.length;a<c;a++)r=t[a],i="".concat(o,"[").concat(r.index,"]"),"openBracket"===r.type?k("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?k("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):k("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),this.outPorts[o].sendIP(r)}else this.outPorts.ports[o].isAttached()&&l.push(function(){var e,t,s;for(s=[],e=0,t=n.length;e<t;e++)r=n[e],i=o,"openBracket"===r.type?k("".concat(this.nodeId," sending ").concat(i," < '").concat(r.data,"'")):"closeBracket"===r.type?k("".concat(this.nodeId," sending ").concat(i," > '").concat(r.data,"'")):k("".concat(this.nodeId," sending ").concat(i," DATA")),this.outPorts[o].options.scoped||(r.scope=null),s.push(this.outPorts[o].sendIP(r));return s}.call(this));return l}.call(this));return a}},{key:"activate",value:function(e){if(!e.activated)return e.activated=!0,e.deactivated=!1,this.load++,this.emit("activate",this.load),this.ordered||this.autoOrdering?this.outputQ.push(e.result):void 0}},{key:"deactivate",value:function(e){if(!e.deactivated)return e.deactivated=!0,e.activated=!1,this.isOrdered()&&this.processOutputQueue(),this.load--,this.emit("deactivate",this.load)}}]),r}(m);return e.prototype.description="",e.prototype.icon=null,e}.call(this),y=function(){function e(t,r,n,o){s(this,e),this.ip=t,this.nodeInstance=r,this.port=n,this.result=o,this.scope=this.ip.scope,this.activated=!1,this.deactivated=!1}return c(e,[{key:"activate",value:function(){return(this.result.__resolved||-1===this.nodeInstance.outputQ.indexOf(this.result))&&(this.result={}),this.nodeInstance.activate(this)}},{key:"deactivate",value:function(){return this.result.__resolved||(this.result.__resolved=!0),this.nodeInstance.deactivate(this)}}]),e}(),v=function(){function e(t,r){s(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.port=this.context.port,this.result=this.context.result,this.scope=this.context.scope}return c(e,[{key:"activate",value:function(){if(!this.context.activated)return this.nodeInstance.isOrdered()&&(this.result.__resolved=!1),this.nodeInstance.activate(this.context),this.port.isAddressable()?w("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"[").concat(this.ip.index,"]' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type)):w("".concat(this.nodeInstance.nodeId," packet on '").concat(this.port.name,"' caused activation ").concat(this.nodeInstance.load,": ").concat(this.ip.type))}},{key:"attached",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s=[],n=0,o=t.length;n<o;n++){if(i=t[n],!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));s.push(this.ports[i].listAttached())}return 1===t.length?s.pop():s}},{key:"has",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s;for(t.length||(t=["in"]),s="function"==typeof t[t.length-1]?t.pop():function(){return!0},n=0,o=t.length;n<o;n++)if(i=t[n],Array.isArray(i)){if(!this.ports[i[0]])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i[0],"'"));if(!this.ports[i[0]].isAddressable())throw new Error("Non-addressable ports, access must be with string ".concat(i[0]));if(!this.ports[i[0]].has(this.scope,i[1],s))return!1}else{if(!this.ports[i])throw new Error("Node ".concat(this.nodeInstance.nodeId," has no port '").concat(i,"'"));if(this.ports[i].isAddressable())throw new Error("For addressable ports, access must be with array [".concat(i,", idx]"));if(!this.ports[i].has(this.scope,s))return!1}return!0}},{key:"hasData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length||(t=["in"]),t.push((function(e){return"data"===e.type})),this.has.apply(this,t)}},{key:"hasStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,l;for(t.length||(t=["in"]),l="function"==typeof t[t.length-1]?t.pop():function(){return!0},o=0,i=t.length;o<i;o++)if(s=t[o],a=[],[],n=!1,c=function(e){return"openBracket"===e.type?(a.push(e.data),!1):"data"===e.type?(n=l(e,a),!a.length&&n):"closeBracket"===e.type?(a.pop(),!a.length&&!!n):void 0},!this.has(s,c))return!1;return!0}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i,s,a,c,l,p;for(this.activate(),t.length||(t=["in"]),p=[],n=0,a=t.length;n<a;n++){if(c=t[n],Array.isArray(c)){var u=c,d=o(u,2);if(l=d[0],i=d[1],!this.ports[l].isAddressable())throw new Error("Non-addressable ports, access must be with string portname")}else if(l=c,this.ports[l].isAddressable())throw new Error("For addressable ports, access must be with array [portname, idx]");this.nodeInstance.isForwardingInport(l)?(s=this.__getForForwarding(l,i),p.push(s)):(s=this.ports[l].get(this.scope,i),p.push(s))}return 1===t.length?p[0]:p}},{key:"__getForForwarding",value:function(e,t){var r,n,o,i,s,a;for(a=[],n=null;i=this.ports[e].get(this.scope,t);){if("data"===i.type){n=i;break}a.push(i)}for(o=0,s=a.length;o<s;o++)"closeBracket"!==(i=a[o]).type?"openBracket"!==i.type||this.nodeInstance.getBracketContext("in",e,this.scope,t).push({ip:i,ports:[],source:e}):(this.result.__bracketClosingBefore||(this.result.__bracketClosingBefore=[]),(r=this.nodeInstance.getBracketContext("in",e,this.scope,t).pop()).closeIp=i,this.result.__bracketClosingBefore.push(r));return this.result.__bracketContext||(this.result.__bracketContext={}),this.result.__bracketContext[e]=this.nodeInstance.getBracketContext("in",e,this.scope,t).slice(0),n}},{key:"getData",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a;for(t.length||(t=["in"]),n=[],o=0,i=t.length;o<i;o++)if(a=t[o],null!=(s=this.get(a))){for(;"data"!==s.type&&(s=this.get(a)););n.push(s.data)}else n.push(s);return 1===t.length?n.pop():n}},{key:"getStream",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o,i,s,a,c,l,p;for(t.length||(t=["in"]),n=[],i=0,a=t.length;i<a;i++){for(c=t[i],l=[],p=[],o=!1,(s=this.get(c))||n.push(void 0);s&&("openBracket"===s.type&&(l.length||(p=[],o=!1),l.push(s.data),p.push(s)),"data"!==s.type||(p.push(s),o=!0,l.length))&&("closeBracket"!==s.type||(p.push(s),l.pop(),!o||l.length));)s=this.get(c);n.push(p)}return 1===t.length?n.pop():n}}]),e}(),b=function(){function e(t,r){s(this,e),this.ports=t,this.context=r,this.nodeInstance=this.context.nodeInstance,this.ip=this.context.ip,this.result=this.context.result,this.scope=this.context.scope}return c(e,[{key:"isError",value:function(e){return e instanceof Error||Array.isArray(e)&&e.length>0&&e[0]instanceof Error}},{key:"error",value:function(e){var t,r,n,o,i,s,a;if((s=Array.isArray(e))||(e=[e]),!("error"in this.ports)||!this.ports.error.isAttached()&&this.ports.error.isRequired()){for(a=[],n=0,i=e.length;n<i;n++)throw t=e[n];return a}for(s&&this.sendIP("error",new g("openBracket")),r=0,o=e.length;r<o;r++)t=e[r],this.sendIP("error",t);if(s)return this.sendIP("error",new g("closeBracket"))}},{key:"sendIP",value:function(e,t){var r;if(r=g.isIP(t)?t:new g("data",t),null!==this.scope&&null===r.scope&&(r.scope=this.scope),this.nodeInstance.outPorts[e].isAddressable()&&null===r.index)throw new Error("Sending packets to addressable ports requires specifying index");if(!this.nodeInstance.isOrdered())return this.nodeInstance.outPorts[e].options.scoped||(r.scope=null),this.nodeInstance.outPorts[e].sendIP(r);this.nodeInstance.addToResult(this.result,e,r)}},{key:"send",value:function(e){var t,r,o,i,s,a,c,l;if(this.isError(e))return this.error(e);for(t=[],i=!1,r=0,o=(c=Object.keys(this.ports.ports)).length;r<o;r++)"error"!==(a=c[r])&&"ports"!==a&&"_callbacks"!==a&&t.push(a),i||null==e||"object"!==n(e)||-1===Object.keys(e).indexOf(a)||(i=!0);if(1!==t.length||i){if(t.length>1&&!i)throw new Error("Port must be specified for sending output");for(a in l=[],e)s=e[a],l.push(this.sendIP(a,s));return l}this.sendIP(t[0],e)}},{key:"sendDone",value:function(e){return this.send(e),this.done()}},{key:"pass",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("out"in this.ports))throw new Error('output.pass() requires port "out" to be present');for(t in n)r=n[t],this.ip[t]=r;return this.ip.data=e,this.sendIP("out",this.ip),this.done()}},{key:"done",value:function(e){var t,r,n,o,i,s,a,c,l,p=this;if(this.result.__resolved=!0,this.nodeInstance.activate(this.context),e&&this.error(e),s=function(){var e,t,r,n;return r=(n=p.nodeInstance.outputQ.filter((function(e){return!e.__resolved||(2!==Object.keys(e).length||!e.__bracketClosingAfter)}))).indexOf(p.result),e=n.length,t=p.nodeInstance.load,r===e-1||(-1===r&&t===e+1||e<=1&&1===t)},this.nodeInstance.isOrdered()&&s())for(c in l=this.nodeInstance.bracketContext.in)if((n=l[c])[this.scope]&&(a=n[this.scope]).length)for(r=a[a.length-1],t=this.nodeInstance.inPorts[r.source].getBuffer(r.ip.scope,r.ip.index);t.length&&"closeBracket"===t[0].type;)i=this.nodeInstance.inPorts[r.source].get(r.ip.scope,r.ip.index),(o=a.pop()).closeIp=i,this.result.__bracketClosingAfter||(this.result.__bracketClosingAfter=[]),this.result.__bracketClosingAfter.push(o);return w("".concat(this.nodeInstance.nodeId," finished processing ").concat(this.nodeInstance.load)),this.nodeInstance.deactivate(this.context)}}]),e}(),t.Component=f},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m,g=r(11);d=g.EventEmitter,h=r(149),f=r(151),m=function(){var e=function(e){a(r,e);var t=l(r);function r(e){var n,i,s;if(o(this,r),(n=t.call(this)).ports={},!e)return p(n);for(i in e)s=e[i],n.add(i,s);return n}return s(r,[{key:"add",value:function(e,t,r){if("add"===e||"remove"===e)throw new Error("Add and remove are restricted port names");if(!e.match(/^[a-z0-9_\.\/]+$/))throw new Error("Port names can only contain lowercase alphanumeric characters and underscores. '".concat(e,"' not allowed"));return this.ports[e]&&this.remove(e),"object"===n(t)&&t.canAttach?this.ports[e]=t:this.ports[e]=new this.model(t,r),this[e]=this.ports[e],this.emit("add",e),this}},{key:"remove",value:function(e){if(!this.ports[e])throw new Error("Port ".concat(e," not defined"));return delete this.ports[e],delete this[e],this.emit("remove",e),this}}]),r}(d);return e.prototype.model=h,e}.call(this),t.InPorts=function(e){a(r,e);var t=l(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"on",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].on(t,r)}},{key:"once",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].once(t,r)}}]),r}(m),t.OutPorts=function(){var e=function(e){a(r,e);var t=l(r);function r(){return o(this,r),t.apply(this,arguments)}return s(r,[{key:"connect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].connect(t)}},{key:"beginGroup",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].beginGroup(t,r)}},{key:"send",value:function(e,t,r){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].send(t,r)}},{key:"endGroup",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].endGroup(t)}},{key:"disconnect",value:function(e,t){if(!this.ports[e])throw new Error("Port ".concat(e," not available"));return this.ports[e].disconnect(t)}}]),r}(m);return e.prototype.model=f,e}.call(this),t.normalizePortName=function(e){var t,r;return r={name:e},-1===e.indexOf("[")?r:(null!=(t=e.match(/(.*)\[([0-9]+)\]/))?t.length:void 0)?(r.name=t[1],r.index=t[2],r):e}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,u;p=r(150),r(33),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,r,n,c=a(l);function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,l),null==t.control&&(t.control=!1),null==t.scoped&&(t.scoped=!0),null==t.triggering&&(t.triggering=!0),t.process)throw new Error("InPort process callback is deprecated. Please use Process API");if(t.handle)throw new Error("InPort handle callback is deprecated. Please use Process API");return(e=c.call(this,t)).prepareBuffer(),e}return t=l,(r=[{key:"attachSocket",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.hasDefault()&&e.setDataDelegate((function(){return t.options.default})),e.on("connect",(function(){return t.handleSocketEvent("connect",e,r)})),e.on("begingroup",(function(e){return t.handleSocketEvent("begingroup",e,r)})),e.on("data",(function(e){return t.validateData(e),t.handleSocketEvent("data",e,r)})),e.on("endgroup",(function(e){return t.handleSocketEvent("endgroup",e,r)})),e.on("disconnect",(function(){return t.handleSocketEvent("disconnect",e,r)})),e.on("ip",(function(e){return t.handleIP(e,r)}))}},{key:"handleIP",value:function(e,t){var r;if(!this.options.control||"data"===e.type)return e.owner=this.nodeInstance,this.isAddressable()&&(e.index=t),"all"===e.datatype&&(e.datatype=this.getDataType()),this.getSchema()&&!e.schema&&(e.schema=this.getSchema()),(r=this.prepareBufferForIP(e)).push(e),this.options.control&&r.length>1&&r.shift(),this.emit("ip",e,t)}},{key:"handleSocketEvent",value:function(e,t,r){return this.isAddressable()?this.emit(e,t,r):this.emit(e,t)}},{key:"hasDefault",value:function(){return void 0!==this.options.default}},{key:"prepareBuffer",value:function(){if(this.isAddressable())return this.options.scoped&&(this.scopedBuffer={}),this.indexedBuffer={},void(this.iipBuffer={});this.options.scoped&&(this.scopedBuffer={}),this.iipBuffer=[],this.buffer=[]}},{key:"prepareBufferForIP",value:function(e){return this.isAddressable()?null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),e.index in this.scopedBuffer[e.scope]||(this.scopedBuffer[e.scope][e.index]=[]),this.scopedBuffer[e.scope][e.index]):e.initial?(e.index in this.iipBuffer||(this.iipBuffer[e.index]=[]),this.iipBuffer[e.index]):(e.index in this.indexedBuffer||(this.indexedBuffer[e.index]=[]),this.indexedBuffer[e.index]):null!=e.scope&&this.options.scoped?(e.scope in this.scopedBuffer||(this.scopedBuffer[e.scope]=[]),this.scopedBuffer[e.scope]):e.initial?this.iipBuffer:this.buffer}},{key:"validateData",value:function(e){if(this.options.values&&-1===this.options.values.indexOf(e))throw new Error("Invalid data='".concat(e,"' received, not in [").concat(this.options.values,"]"))}},{key:"getBuffer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.isAddressable()){if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;if(!(t in this.scopedBuffer[e]))return;return this.scopedBuffer[e][t]}if(r){if(!(t in this.iipBuffer))return;return this.iipBuffer[t]}if(!(t in this.indexedBuffer))return;return this.indexedBuffer[t]}if(null!=e&&this.options.scoped){if(!(e in this.scopedBuffer))return;return this.scopedBuffer[e]}return r?this.iipBuffer:this.buffer}},{key:"getFromBuffer",value:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!=(r=this.getBuffer(e,t,n))?r.length:void 0)return this.options.control?r[r.length-1]:r.shift()}},{key:"get",value:function(e,t){var r;return void 0!==(r=this.getFromBuffer(e,t))?r:this.getFromBuffer(null,t,!0)}},{key:"hasIPinBuffer",value:function(e,t,r){var n,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(null!=(n=this.getBuffer(e,t,s))?n.length:void 0))return!1;for(o=0,i=n.length;o<i;o++)if(r(n[o]))return!0;return!1}},{key:"hasIIP",value:function(e,t){return this.hasIPinBuffer(null,e,t,!0)}},{key:"has",value:function(e,t,r){return this.isAddressable()||(r=t,t=null),!!this.hasIPinBuffer(e,t,r)||!!this.hasIIP(t,r)}},{key:"length",value:function(e,t){var r;return(r=this.getBuffer(e,t))?r.length:0}},{key:"ready",value:function(e,t){return this.length(e)>0}},{key:"clear",value:function(){return this.prepareBuffer()}}])&&i(t.prototype,r),n&&i(t,n),l}(p),e.exports=u},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p,u;p=r(11).EventEmitter,u=["all","string","number","int","object","array","boolean","color","date","bang","function","buffer","stream"],l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).options=t.handleOptions(e),t.sockets=[],t.node=null,t.name=null,t}return t=c,(r=[{key:"handleOptions",value:function(e){if(e||(e={}),e.datatype||(e.datatype="all"),void 0===e.required&&(e.required=!1),"integer"===e.datatype&&(e.datatype="int"),-1===u.indexOf(e.datatype))throw new Error("Invalid port datatype '".concat(e.datatype,"' specified, valid are ").concat(u.join(", ")));if(e.type&&!e.schema&&(e.schema=e.type,delete e.type),e.schema&&-1===e.schema.indexOf("/"))throw new Error("Invalid port schema '".concat(e.schema,"' specified. Should be URL or MIME type"));return e}},{key:"getId",value:function(){return this.node&&this.name?"".concat(this.node," ").concat(this.name.toUpperCase()):"Port"}},{key:"getDataType",value:function(){return this.options.datatype}},{key:"getSchema",value:function(){return this.options.schema||null}},{key:"getDescription",value:function(){return this.options.description}},{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isAddressable()&&null!==t||(t=this.sockets.length),this.sockets[t]=e,this.attachSocket(e,t),!this.isAddressable())return this.emit("attach",e);this.emit("attach",e,t)}},{key:"attachSocket",value:function(){}},{key:"detach",value:function(e){var t;if(-1!==(t=this.sockets.indexOf(e))){if(this.sockets[t]=void 0,!this.isAddressable())return this.emit("detach",e);this.emit("detach",e,t)}}},{key:"isAddressable",value:function(){return!!this.options.addressable}},{key:"isBuffered",value:function(){return!!this.options.buffered}},{key:"isRequired",value:function(){return!!this.options.required}},{key:"isAttached",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.isAddressable()&&null!==e?!!this.sockets[e]:!!this.sockets.length}},{key:"listAttached",value:function(){var e,t,r,n,o;for(e=[],r=t=0,n=(o=this.sockets).length;t<n;r=++t)o[r]&&e.push(r);return e}},{key:"isConnected",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isAddressable()){if(null===t)throw new Error("".concat(this.getId(),": Socket ID required"));if(!this.sockets[t])throw new Error("".concat(this.getId(),": Socket ").concat(t," not available"));return this.sockets[t].isConnected()}return e=!1,this.sockets.forEach((function(t){if(t)return t.isConnected()?e=!0:void 0})),e}},{key:"canAttach",value:function(){return!0}}])&&o(t.prototype,r),n&&o(t,n),c}(p),e.exports=l},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u,d,h;u=r(150),d=r(33),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,r,n,l=c(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,u),null==t.scoped&&(t.scoped=!0),(e=l.call(this,t)).cache={},e}return t=u,(r=[{key:"attach",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(s(p(u.prototype),"attach",this).call(this,e,t),this.isCaching()&&null!=this.cache[t])return this.send(this.cache[t],t)}},{key:"connect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.connect());return r}},{key:"beginGroup",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),t.forEach((function(t){if(t)return t.beginGroup(e)}))}},{key:"send",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=this.getSockets(r),this.checkRequired(t),this.isCaching()&&e!==this.cache[r]&&(this.cache[r]=e),t.forEach((function(t){if(t)return t.send(e)}))}},{key:"endGroup",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.endGroup());return r}},{key:"disconnect",value:function(){var e,t,r,n,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;for(o=this.getSockets(i),this.checkRequired(o),r=[],e=0,t=o.length;e<t;e++)(n=o[e])&&r.push(n.disconnect());return r}},{key:"sendIP",value:function(e,t,r,n){var o,i,s,a,c,l,p,u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];for(d.isIP(e)?n=(i=e).index:i=new d(e,t,r),p=this.getSockets(n),this.checkRequired(p),"all"===i.datatype&&(i.datatype=this.getDataType()),this.getSchema()&&!i.schema&&(i.schema=this.getSchema()),this.isCaching()&&t!==(null!=(c=this.cache[n])?c.data:void 0)&&(this.cache[n]=i),a=!0,o=0,s=p.length;o<s;o++)(l=p[o])&&(a?(l.post(i,u),a=!1):(i.clonable&&(i=i.clone()),l.post(i,u)));return this}},{key:"openBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("openBracket",e,t,r)}},{key:"data",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("data",e,t,r)}},{key:"closeBracket",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.sendIP("closeBracket",e,t,r)}},{key:"checkRequired",value:function(e){if(0===e.length&&this.isRequired())throw new Error("".concat(this.getId(),": No connections available"))}},{key:"getSockets",value:function(e){if(this.isAddressable()){if(null===e)throw new Error("".concat(this.getId()," Socket ID required"));return this.sockets[e]?[this.sockets[e]]:[]}return this.sockets}},{key:"isCaching",value:function(){return!!this.options.caching}}])&&i(t.prototype,r),n&&i(t,n),u}(u),e.exports=h},function(e,t){e.exports={stringPatterns:[/'[^]*?'/g,/"[^]*?"/g,/`[^]*?`/g],prePatterns:[/\[[^]*?\]/,/{[^]*?}/,/=>\s*?\([^]*?\)/,/=\s*?function\s*?\([^]*(?=[^]*\))/,/=\s*?\([^]*(?=[^]*\))/,/\s*?=[^>][^,\)]*/],postPatterns:[/\([^]*?\)/]}},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,i,s,a,c,l,p=[].indexOf;l={Runtime:r(477),Graph:r(478),Network:r(479),Component:r(480)},i=r(8)("noflo-runtime-base:messaging:receive"),s=r(8)("noflo-runtime-base:messaging:receive:payload"),a=r(8)("noflo-runtime-base:messaging:send"),c=r(8)("noflo-runtime-base:messaging:send:payload"),o=function(){function e(t){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.options||(this.options={}),this.version="0.7",this.component=new l.Component(this),this.graph=new l.Graph(this),this.network=new l.Network(this),this.runtime=new l.Runtime(this),this.context=null,null!=this.options.defaultGraph&&(this.options.defaultGraph.baseDir=this.options.baseDir,r=this._getGraphName(this.options.defaultGraph),this.context="none",this.graph.registerGraph(r,this.options.defaultGraph),this.runtime.setMainGraph(r,this.options.defaultGraph),this.network._startNetwork(this.options.defaultGraph,r,this.context,(function(e){if(e)throw e}))),null!=this.options.captureOutput&&this.options.captureOutput&&this.startCapture(),this.options.capabilities||(this.options.capabilities=["protocol:graph","protocol:component","protocol:network","protocol:runtime","component:setsource","component:getsource","graph:readonly","network:data","network:control","network:status"]),this.options.defaultPermissions||(this.options.defaultPermissions=[]),this.options.permissions||(this.options.permissions={})}var t,r,o;return t=e,(r=[{key:"_getGraphName",value:function(e){var t,r;return r=this.options.namespace||"default",t=e.name||"main","".concat(r,"/").concat(t)}},{key:"canDo",value:function(e,t){var r,n;return r="string"==typeof e?[e]:e,n=this.getPermitted(t),r.filter((function(e){return p.call(n,e)>=0})).length>0}},{key:"canInput",value:function(e,t,r){if("graph"===e)return this.canDo(["protocol:graph"],r);switch("".concat(e,":").concat(t)){case"component:list":return this.canDo(["protocol:component"],r);case"component:getsource":return this.canDo(["component:getsource"],r);case"component:source":return this.canDo(["component:setsource"],r);case"network:edges":return this.canDo(["network:data","protocol:network"],r);case"network:start":case"network:stop":case"network:debug":return this.canDo(["network:control","protocol:network"],r);case"network:getstatus":return this.canDo(["network:status","network:control","protocol:network"],r);case"runtime:getruntime":return!0;case"runtime:packet":return this.canDo(["protocol:runtime"],r)}return!1}},{key:"getPermitted",value:function(e){return e?this.options.permissions[e]?this.options.permissions[e]:[]:this.options.defaultPermissions}},{key:"send",value:function(e,t,r,n){return a("".concat(e," ").concat(t)),c(r)}},{key:"sendAll",value:function(e,t,r,n){}},{key:"receive",value:function(e,t,r,n){if(r||(r={}),i("".concat(e," ").concat(t)),s(r),this.canInput(e,t,r.secret))switch(this.context=n,e){case"runtime":return this.runtime.receive(t,r,n);case"graph":return this.graph.receive(t,r,n);case"network":return this.network.receive(t,r,n);case"component":return this.component.receive(t,r,n);default:return this.send(e,"error",new Error("Protocol ".concat(e," is not supported")),n)}else this.send(e,"error",new Error("".concat(e,":").concat(t," is not permitted")),n)}}])&&n(t.prototype,r),o&&n(t,o),e}(),e.exports=o,e.exports.trace=r(483),e.exports.direct=r(495)},function(e,t,r){(function(t){e.exports=b;var n=r(12),o=r(155),i=r(95),s=(i.Minimatch,r(41)),a=r(11).EventEmitter,c=r(24),l=r(94),p=r(96),u=r(492),d=r(156),h=(d.alphasort,d.alphasorti,d.setopts),f=d.ownProp,m=r(493),g=(r(67),d.childrenIgnored),y=d.isIgnored,v=r(158);function b(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return u(e,t)}return new x(e,t,r)}b.sync=u;var w=b.GlobSync=u.GlobSync;function x(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new w(e,t)}if(!(this instanceof x))return new x(e,t,r);h(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=v(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var o=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return s();for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1,s);function s(){--o._processing,o._processing<=0&&o._finish()}}b.glob=b,b.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new x(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var o=0;o<n[0].length;o++)if("string"!=typeof n[0][o])return!0;return!1},b.Glob=x,s(x,a),x.prototype._finish=function(){if(l(this instanceof x),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},x.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},x.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,s=n.length;if(0===s)return t();var a=this.matches[e]=Object.create(null);n.forEach((function(r,n){r=i._makeAbs(r),o.realpath(r,i.realpathCache,(function(n,o){n?"stat"===n.syscall?a[r]=!0:i.emit("error",n):a[o]=!0,0==--s&&(i.matches[e]=a,t())}))}))},x.prototype._mark=function(e){return d.mark(this,e)},x.prototype._makeAbs=function(e){return d.makeAbs(this,e)},x.prototype.abort=function(){this.aborted=!0,this.emit("abort")},x.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},x.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var o=n[t];this._processing--,this._process(o[0],o[1],o[2],o[3])}}}},x.prototype._process=function(e,t,r,n){if(l(this instanceof x),l("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var o,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:o=null;break;default:o=e.slice(0,s).join("/")}var a,c=e.slice(s);null===o?a=".":p(o)||p(e.join("/"))?(o&&p(o)||(o="/"+o),a=o):a=o;var u=this._makeAbs(a);if(g(this,a))return n();c[0]===i.GLOBSTAR?this._processGlobStar(o,a,u,c,t,r,n):this._processReaddir(o,a,u,c,t,r,n)}},x.prototype._processReaddir=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,l){return a._processReaddir2(e,t,r,n,o,i,l,s)}))},x.prototype._processReaddir2=function(e,t,r,n,o,i,s,a){if(!s)return a();for(var l=n[0],p=!!this.minimatch.negate,u=l._glob,d=this.dot||"."===u.charAt(0),h=[],f=0;f<s.length;f++){if("."!==(g=s[f]).charAt(0)||d)(p&&!e?!g.match(l):g.match(l))&&h.push(g)}var m=h.length;if(0===m)return a();if(1===n.length&&!this.mark&&!this.stat){this.matches[o]||(this.matches[o]=Object.create(null));for(f=0;f<m;f++){var g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=c.join(this.root,g)),this._emitMatch(o,g)}return a()}n.shift();for(f=0;f<m;f++){g=h[f];e&&(g="/"!==e?e+"/"+g:e+g),this._process([g].concat(n),o,i,a)}a()},x.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=p(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var o=this.statCache[r];o&&this.emit("stat",t,o),this.emit("match",t)}}},x.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,o=m("lstat\0"+e,(function(n,o){if(n&&"ENOENT"===n.code)return t();var i=o&&o.isSymbolicLink();r.symlinks[e]=i,i||!o||o.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));o&&n.lstat(e,o)}},x.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=m("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var o=this.cache[e];if(!o||"FILE"===o)return r();if(Array.isArray(o))return r(null,o)}n.readdir(e,function(e,t,r){return function(n,o){n?e._readdirError(t,n,r):e._readdirEntries(t,o,r)}}(this,e,r))}},x.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var o=t[n];o="/"===e?e+o:e+"/"+o,this.cache[o]=!0}return this.cache[e]=t,r(null,t)}},x.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var o=new Error(t.code+" invalid cwd "+this.cwd);o.path=this.cwd,o.code=t.code,this.emit("error",o),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},x.prototype._processGlobStar=function(e,t,r,n,o,i,s){var a=this;this._readdir(r,i,(function(c,l){a._processGlobStar2(e,t,r,n,o,i,l,s)}))},x.prototype._processGlobStar2=function(e,t,r,n,o,i,s,a){if(!s)return a();var c=n.slice(1),l=e?[e]:[],p=l.concat(c);this._process(p,o,!1,a);var u=this.symlinks[r],d=s.length;if(u&&i)return a();for(var h=0;h<d;h++){if("."!==s[h].charAt(0)||this.dot){var f=l.concat(s[h],c);this._process(f,o,!0,a);var m=l.concat(s[h],n);this._process(m,o,!0,a)}}a()},x.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(o,i){n._processSimple2(e,t,o,i,r)}))},x.prototype._processSimple2=function(e,r,n,o,i){if(this.matches[r]||(this.matches[r]=Object.create(null)),!o)return i();if(e&&p(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),s&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e),i()},x.prototype._stat=function(e,t){var r=this._makeAbs(e),o="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!o||"DIR"===i)return t(null,i);if(o&&"FILE"===i)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var a=s.isDirectory()?"DIR":"FILE";return o&&"FILE"===a?t():t(null,a,s)}var c=this,l=m("stat\0"+r,(function(o,i){if(i&&i.isSymbolicLink())return n.stat(r,(function(n,o){n?c._stat2(e,r,null,i,t):c._stat2(e,r,n,o,t)}));c._stat2(e,r,o,i,t)}));l&&n.lstat(r,l)},x.prototype._stat2=function(e,t,r,n,o){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,o();var i="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return o(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,i&&"FILE"===s?o():o(null,s,n)}}).call(this,r(6))},function(e,t,r){(function(t){e.exports=p,p.realpath=p,p.sync=u,p.realpathSync=u,p.monkeypatch=function(){n.realpath=p,n.realpathSync=u},p.unmonkeypatch=function(){n.realpath=o,n.realpathSync=i};var n=r(12),o=n.realpath,i=n.realpathSync,s=t.version,a=/^v[0-5]\./.test(s),c=r(488);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function p(e,t,r){if(a)return o(e,t,r);"function"==typeof t&&(r=t,t=null),o(e,t,(function(n,o){l(n)?c.realpath(e,t,r):r(n,o)}))}function u(e,t){if(a)return i(e,t);try{return i(e,t)}catch(r){if(l(r))return c.realpathSync(e,t);throw r}}}).call(this,r(6))},function(e,t,r){(function(e){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=l,t.alphasorti=c,t.setopts=function(t,r,i){i||(i={});if(i.matchBase&&-1===r.indexOf("/")){if(i.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}t.silent=!!i.silent,t.pattern=r,t.strict=!1!==i.strict,t.realpath=!!i.realpath,t.realpathCache=i.realpathCache||Object.create(null),t.follow=!!i.follow,t.dot=!!i.dot,t.mark=!!i.mark,t.nodir=!!i.nodir,t.nodir&&(t.mark=!0);t.sync=!!i.sync,t.nounique=!!i.nounique,t.nonull=!!i.nonull,t.nosort=!!i.nosort,t.nocase=!!i.nocase,t.stat=!!i.stat,t.noprocess=!!i.noprocess,t.absolute=!!i.absolute,t.maxLength=i.maxLength||1/0,t.cache=i.cache||Object.create(null),t.statCache=i.statCache||Object.create(null),t.symlinks=i.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(p))}(t,i),t.changedCwd=!1;var c=e.cwd();n(i,"cwd")?(t.cwd=o.resolve(i.cwd),t.changedCwd=t.cwd!==c):t.cwd=c;t.root=i.root||o.resolve(t.cwd,"/"),t.root=o.resolve(t.root),"win32"===e.platform&&(t.root=t.root.replace(/\\/g,"/"));t.cwdAbs=s(t.cwd)?t.cwd:u(t,t.cwd),"win32"===e.platform&&(t.cwdAbs=t.cwdAbs.replace(/\\/g,"/"));t.nomount=!!i.nomount,i.nonegate=!0,i.nocomment=!0,t.minimatch=new a(r,i),t.options=t.minimatch.options},t.ownProp=n,t.makeAbs=u,t.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,o=e.matches.length;n<o;n++){var i=e.matches[n];if(i&&0!==Object.keys(i).length){var s=Object.keys(i);t?r.push.apply(r,s):s.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(e.nocase?c:l));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[u(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!d(e,t)})));e.found=r},t.mark=function(e,t){var r=u(e,t),n=e.cache[r],o=t;if(n){var i="DIR"===n||Array.isArray(n),s="/"===t.slice(-1);if(i&&!s?o+="/":!i&&s&&(o=o.slice(0,-1)),o!==t){var a=u(e,o);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return o},t.isIgnored=d,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var o=r(24),i=r(95),s=r(96),a=i.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function l(e,t){return e.localeCompare(t)}function p(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new a(r,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function u(t,r){var n=r;return n="/"===r.charAt(0)?o.join(t.root,r):s(r)||""===r?r:t.changedCwd?o.resolve(t.cwd,r):o.resolve(r),"win32"===e.platform&&(n=n.replace(/\\/g,"/")),n}function d(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}}).call(this,r(6))},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),o=e[e.length-1];return"function"==typeof n&&n!==o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),n}}},function(e,t,r){var n=r(157);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(o),e.exports.strict=n(i),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})}))},function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t){t.normalizeOptions=function(e){var t=e;return void 0===e.catchExceptions&&(t.catchExceptions=!0,window.location.search&&"debug"===window.location.search.substring(1)&&(t.catchExceptions=!1)),t},t.subscribe=function(e,t){e.addEventListener("message",(function(e){var r=e.data;"string"==typeof e.data&&(r=JSON.parse(e.data)),r.protocol&&r.command&&t(r,e)}))}},function(e,t,r){var n=r(5),o=r(20),i=n.createFactory(o({displayName:"TheGraphSVGImage",render:function(){var e="<image ";return e=(e=(e=(e=(e=e+'xlink:href="'+this.props.src+'"')+'x="'+this.props.x+'"')+'y="'+this.props.y+'"')+'width="'+this.props.width+'"')+'height="'+this.props.height+'"',e+="/>",n.createElement("g",{className:this.props.className,dangerouslySetInnerHTML:{__html:e}})}}));e.exports=i},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(71),a=r(72),c={container:{},rect:{ref:"rect",className:"context-modal-bg"}},l={createModalBackgroundGroup:s.createGroup,createModalBackgroundRect:s.createRect},p=n.createFactory(i({displayName:"TheGraphModalBG",componentDidMount:function(){var e=o.findDOMNode(this),t=this.refs.rect;e.addEventListener("mousedown",function(e){e&&e.target===t&&this.hideModal()}.bind(this))},hideModal:function(e){this.props.triggerHideContext()},render:function(){var e={width:this.props.width,height:this.props.height};e=a(c.rect,e);var t=[l.createModalBackgroundRect.call(this,e),this.props.children],r=a(c.container,{});return l.createModalBackgroundGroup.call(this,r,t)}}));e.exports={ModalBG:p,config:c,factories:l}},function(e,t,r){var n=r(5),o=r(20),i=n.createFactory(o({displayName:"TheGraphTextBG",render:function(){var e=this.props.text;e||(e="");var t=this.props.height,r=e.length*this.props.height*2/3,o=this.props.height/2,i=this.props.x,s=this.props.y-t/2;return"center"===this.props.halign&&(i-=r/2,"middle"),"right"===this.props.halign&&(i-=r,"end"),n.createElement("g",{className:this.props.className?this.props.className:"text-bg"},n.createElement("rect",{className:"text-bg-rect",x:i,y:s,rx:o,ry:o,height:1.1*t,width:r}),n.createElement("text",{className:this.props.textClassName?this.props.textClassName:"text-bg-text",x:this.props.x,y:this.props.y,children:e}))}}));e.exports=i},function(e,t){FONT_AWESOME={"500px":"","address-book":"","address-book-o":"","address-card":"","address-card-o":"",adjust:"",adn:"","align-center":"","align-justify":"","align-left":"","align-right":"",amazon:"",ambulance:"","american-sign-language-interpreting":"",anchor:"",android:"",angellist:"","angle-double-down":"","angle-double-left":"","angle-double-right":"","angle-double-up":"","angle-down":"","angle-left":"","angle-right":"","angle-up":"",apple:"",archive:"","area-chart":"","arrow-circle-down":"","arrow-circle-left":"","arrow-circle-o-down":"","arrow-circle-o-left":"","arrow-circle-o-right":"","arrow-circle-o-up":"","arrow-circle-right":"","arrow-circle-up":"","arrow-down":"","arrow-left":"","arrow-right":"","arrow-up":"",arrows:"","arrows-alt":"","arrows-h":"","arrows-v":"","asl-interpreting":"","assistive-listening-systems":"",asterisk:"",at:"","audio-description":"",automobile:"",backward:"","balance-scale":"",ban:"",bandcamp:"",bank:"","bar-chart":"","bar-chart-o":"",barcode:"",bars:"",bath:"",bathtub:"",battery:"","battery-0":"","battery-1":"","battery-2":"","battery-3":"","battery-4":"","battery-empty":"","battery-full":"","battery-half":"","battery-quarter":"","battery-three-quarters":"",bed:"",beer:"",behance:"","behance-square":"",bell:"","bell-o":"","bell-slash":"","bell-slash-o":"",bicycle:"",binoculars:"","birthday-cake":"",bitbucket:"","bitbucket-square":"",bitcoin:"","black-tie":"",blind:"",bluetooth:"","bluetooth-b":"",bold:"",bolt:"",bomb:"",book:"",bookmark:"","bookmark-o":"",braille:"",briefcase:"",btc:"",bug:"",building:"","building-o":"",bullhorn:"",bullseye:"",bus:"",buysellads:"",cab:"",calculator:"",calendar:"","calendar-check-o":"","calendar-minus-o":"","calendar-o":"","calendar-plus-o":"","calendar-times-o":"",camera:"","camera-retro":"",car:"","caret-down":"","caret-left":"","caret-right":"","caret-square-o-down":"","caret-square-o-left":"","caret-square-o-right":"","caret-square-o-up":"","caret-up":"","cart-arrow-down":"","cart-plus":"",cc:"","cc-amex":"","cc-diners-club":"","cc-discover":"","cc-jcb":"","cc-mastercard":"","cc-paypal":"","cc-stripe":"","cc-visa":"",certificate:"",chain:"","chain-broken":"",check:"","check-circle":"","check-circle-o":"","check-square":"","check-square-o":"","chevron-circle-down":"","chevron-circle-left":"","chevron-circle-right":"","chevron-circle-up":"","chevron-down":"","chevron-left":"","chevron-right":"","chevron-up":"",child:"",chrome:"",circle:"","circle-o":"","circle-o-notch":"","circle-thin":"",clipboard:"","clock-o":"",clone:"",close:"",cloud:"","cloud-download":"","cloud-upload":"",cny:"",code:"","code-fork":"",codepen:"",codiepie:"",coffee:"",cog:"",cogs:"",columns:"",comment:"","comment-o":"",commenting:"","commenting-o":"",comments:"","comments-o":"",compass:"",compress:"",connectdevelop:"",contao:"",copy:"",copyright:"","creative-commons":"","credit-card":"","credit-card-alt":"",crop:"",crosshairs:"",css3:"",cube:"",cubes:"",cut:"",cutlery:"",dashboard:"",dashcube:"",database:"",deaf:"",deafness:"",dedent:"",delicious:"",desktop:"",deviantart:"",diamond:"",digg:"",dollar:"","dot-circle-o":"",download:"",dribbble:"","drivers-license":"","drivers-license-o":"",dropbox:"",drupal:"",edge:"",edit:"",eercast:"",eject:"","ellipsis-h":"","ellipsis-v":"",empire:"",envelope:"","envelope-o":"","envelope-open":"","envelope-open-o":"","envelope-square":"",envira:"",eraser:"",etsy:"",eur:"",euro:"",exchange:"",exclamation:"","exclamation-circle":"","exclamation-triangle":"",expand:"",expeditedssl:"","external-link":"","external-link-square":"",eye:"","eye-slash":"",eyedropper:"",fa:"",facebook:"","facebook-f":"","facebook-official":"","facebook-square":"","fast-backward":"","fast-forward":"",fax:"",feed:"",female:"","fighter-jet":"",file:"","file-archive-o":"","file-audio-o":"","file-code-o":"","file-excel-o":"","file-image-o":"","file-movie-o":"","file-o":"","file-pdf-o":"","file-photo-o":"","file-picture-o":"","file-powerpoint-o":"","file-sound-o":"","file-text":"","file-text-o":"","file-video-o":"","file-word-o":"","file-zip-o":"","files-o":"",film:"",filter:"",fire:"","fire-extinguisher":"",firefox:"","first-order":"",flag:"","flag-checkered":"","flag-o":"",flash:"",flask:"",flickr:"","floppy-o":"",folder:"","folder-o":"","folder-open":"","folder-open-o":"",font:"","font-awesome":"",fonticons:"","fort-awesome":"",forumbee:"",forward:"",foursquare:"","free-code-camp":"","frown-o":"","futbol-o":"",gamepad:"",gavel:"",gbp:"",ge:"",gear:"",gears:"",genderless:"","get-pocket":"",gg:"","gg-circle":"",gift:"",git:"","git-square":"",github:"","github-alt":"","github-square":"",gitlab:"",gittip:"",glass:"",glide:"","glide-g":"",globe:"",google:"","google-plus":"","google-plus-circle":"","google-plus-official":"","google-plus-square":"","google-wallet":"","graduation-cap":"",gratipay:"",grav:"",group:"","h-square":"","hacker-news":"","hand-grab-o":"","hand-lizard-o":"","hand-o-down":"","hand-o-left":"","hand-o-right":"","hand-o-up":"","hand-paper-o":"","hand-peace-o":"","hand-pointer-o":"","hand-rock-o":"","hand-scissors-o":"","hand-spock-o":"","hand-stop-o":"","handshake-o":"","hard-of-hearing":"",hashtag:"","hdd-o":"",header:"",headphones:"",heart:"","heart-o":"",heartbeat:"",history:"",home:"","hospital-o":"",hotel:"",hourglass:"","hourglass-1":"","hourglass-2":"","hourglass-3":"","hourglass-end":"","hourglass-half":"","hourglass-o":"","hourglass-start":"",houzz:"",html5:"","i-cursor":"","id-badge":"","id-card":"","id-card-o":"",ils:"",image:"",imdb:"",inbox:"",indent:"",industry:"",info:"","info-circle":"",inr:"",instagram:"",institution:"","internet-explorer":"",intersex:"",ioxhost:"",italic:"",joomla:"",jpy:"",jsfiddle:"",key:"","keyboard-o":"",krw:"",language:"",laptop:"",lastfm:"","lastfm-square":"",leaf:"",leanpub:"",legal:"","lemon-o":"","level-down":"","level-up":"","life-bouy":"","life-buoy":"","life-ring":"","life-saver":"","lightbulb-o":"","line-chart":"",link:"",linkedin:"","linkedin-square":"",linode:"",linux:"",list:"","list-alt":"","list-ol":"","list-ul":"","location-arrow":"",lock:"","long-arrow-down":"","long-arrow-left":"","long-arrow-right":"","long-arrow-up":"","low-vision":"",magic:"",magnet:"","mail-forward":"","mail-reply":"","mail-reply-all":"",male:"",map:"","map-marker":"","map-o":"","map-pin":"","map-signs":"",mars:"","mars-double":"","mars-stroke":"","mars-stroke-h":"","mars-stroke-v":"",maxcdn:"",meanpath:"",medium:"",medkit:"",meetup:"","meh-o":"",mercury:"",microchip:"",microphone:"","microphone-slash":"",minus:"","minus-circle":"","minus-square":"","minus-square-o":"",mixcloud:"",mobile:"","mobile-phone":"",modx:"",money:"","moon-o":"","mortar-board":"",motorcycle:"","mouse-pointer":"",music:"",navicon:"",neuter:"","newspaper-o":"","object-group":"","object-ungroup":"",odnoklassniki:"","odnoklassniki-square":"",opencart:"",openid:"",opera:"","optin-monster":"",outdent:"",pagelines:"","paint-brush":"","paper-plane":"","paper-plane-o":"",paperclip:"",paragraph:"",paste:"",pause:"","pause-circle":"","pause-circle-o":"",paw:"",paypal:"",pencil:"","pencil-square":"","pencil-square-o":"",percent:"",phone:"","phone-square":"",photo:"","picture-o":"","pie-chart":"","pied-piper":"","pied-piper-alt":"","pied-piper-pp":"",pinterest:"","pinterest-p":"","pinterest-square":"",plane:"",play:"","play-circle":"","play-circle-o":"",plug:"",plus:"","plus-circle":"","plus-square":"","plus-square-o":"",podcast:"","power-off":"",print:"","product-hunt":"","puzzle-piece":"",qq:"",qrcode:"",question:"","question-circle":"","question-circle-o":"",quora:"","quote-left":"","quote-right":"",ra:"",random:"",ravelry:"",rebel:"",recycle:"",reddit:"","reddit-alien":"","reddit-square":"",refresh:"",registered:"",remove:"",renren:"",reorder:"",repeat:"",reply:"","reply-all":"",resistance:"",retweet:"",rmb:"",road:"",rocket:"","rotate-left":"","rotate-right":"",rouble:"",rss:"","rss-square":"",rub:"",ruble:"",rupee:"",s15:"",safari:"",save:"",scissors:"",scribd:"",search:"","search-minus":"","search-plus":"",sellsy:"",send:"","send-o":"",server:"",share:"","share-alt":"","share-alt-square":"","share-square":"","share-square-o":"",shekel:"",sheqel:"",shield:"",ship:"",shirtsinbulk:"","shopping-bag":"","shopping-basket":"","shopping-cart":"",shower:"","sign-in":"","sign-language":"","sign-out":"",signal:"",signing:"",simplybuilt:"",sitemap:"",skyatlas:"",skype:"",slack:"",sliders:"",slideshare:"","smile-o":"",snapchat:"","snapchat-ghost":"","snapchat-square":"","snowflake-o":"","soccer-ball-o":"",sort:"","sort-alpha-asc":"","sort-alpha-desc":"","sort-amount-asc":"","sort-amount-desc":"","sort-asc":"","sort-desc":"","sort-down":"","sort-numeric-asc":"","sort-numeric-desc":"","sort-up":"",soundcloud:"","space-shuttle":"",spinner:"",spoon:"",spotify:"",square:"","square-o":"","stack-exchange":"","stack-overflow":"",star:"","star-half":"","star-half-empty":"","star-half-full":"","star-half-o":"","star-o":"",steam:"","steam-square":"","step-backward":"","step-forward":"",stethoscope:"","sticky-note":"","sticky-note-o":"",stop:"","stop-circle":"","stop-circle-o":"","street-view":"",strikethrough:"",stumbleupon:"","stumbleupon-circle":"",subscript:"",subway:"",suitcase:"","sun-o":"",superpowers:"",superscript:"",support:"",table:"",tablet:"",tachometer:"",tag:"",tags:"",tasks:"",taxi:"",telegram:"",television:"","tencent-weibo":"",terminal:"","text-height":"","text-width":"",th:"","th-large":"","th-list":"",themeisle:"",thermometer:"","thermometer-0":"","thermometer-1":"","thermometer-2":"","thermometer-3":"","thermometer-4":"","thermometer-empty":"","thermometer-full":"","thermometer-half":"","thermometer-quarter":"","thermometer-three-quarters":"","thumb-tack":"","thumbs-down":"","thumbs-o-down":"","thumbs-o-up":"","thumbs-up":"",ticket:"",times:"","times-circle":"","times-circle-o":"","times-rectangle":"","times-rectangle-o":"",tint:"","toggle-down":"","toggle-left":"","toggle-off":"","toggle-on":"","toggle-right":"","toggle-up":"",trademark:"",train:"",transgender:"","transgender-alt":"",trash:"","trash-o":"",tree:"",trello:"",tripadvisor:"",trophy:"",truck:"",try:"",tty:"",tumblr:"","tumblr-square":"","turkish-lira":"",tv:"",twitch:"",twitter:"","twitter-square":"",umbrella:"",underline:"",undo:"","universal-access":"",university:"",unlink:"",unlock:"","unlock-alt":"",unsorted:"",upload:"",usb:"",usd:"",user:"","user-circle":"","user-circle-o":"","user-md":"","user-o":"","user-plus":"","user-secret":"","user-times":"",users:"",vcard:"","vcard-o":"",venus:"","venus-double":"","venus-mars":"",viacoin:"",viadeo:"","viadeo-square":"","video-camera":"",vimeo:"","vimeo-square":"",vine:"",vk:"","volume-control-phone":"","volume-down":"","volume-off":"","volume-up":"",warning:"",wechat:"",weibo:"",weixin:"",whatsapp:"",wheelchair:"","wheelchair-alt":"",wifi:"","wikipedia-w":"","window-close":"","window-close-o":"","window-maximize":"","window-minimize":"","window-restore":"",windows:"",won:"",wordpress:"",wpbeginner:"",wpexplorer:"",wpforms:"",wrench:"",xing:"","xing-square":"","y-combinator":"","y-combinator-square":"",yahoo:"",yc:"","yc-square":"",yelp:"",yen:"",yoast:"",youtube:"","youtube-play":"","youtube-square":""},e.exports=FONT_AWESOME},function(e,t){function r(e,t,r,n,o,i){try{e.strokeStyle=i.edgeColors[0],o&&(e.strokeStyle=i.edgeColors[o]);var s=Math.round(r.metadata.x*t)-.5,a=Math.round(r.metadata.y*t)-.5,c=Math.round(n.metadata.x*t)-.5,l=Math.round(n.metadata.y*t)-.5;e.beginPath(),e.moveTo(s,a),e.lineTo(c,l),e.stroke()}catch(e){}}e.exports={render:function(e,t,n){e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n.width,n.height),e.lineWidth=n.lineWidth;var o=[],i=1/0,s=1/0,a=-1/0,c=-1/0,l={};if(t.nodes.forEach(function(e){!e.metadata||isNaN(e.metadata.x)||isNaN(e.metadata.y)||(o.push(e),l[e.id]=e,i=Math.min(i,e.metadata.x),s=Math.min(s,e.metadata.y),a=Math.max(a,e.metadata.x),c=Math.max(c,e.metadata.y))}.bind(this)),t.inports&&Object.keys(t.inports).forEach(function(e){var r=t.inports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(e){var r=t.outports[e];!r.metadata||isNaN(r.metadata.x)||isNaN(r.metadata.y)||(o.push(r),i=Math.min(i,r.metadata.x),s=Math.min(s,r.metadata.y),a=Math.max(a,r.metadata.x),c=Math.max(c,r.metadata.y))}.bind(this)),0===o.length)return{scale:1,rectangle:[0,0,0,0]};if(!(isFinite(i)&&isFinite(s)&&isFinite(a)&&isFinite(c)))throw new Error("the-graph-thumb: Invalid space spanned");i-=n.nodeSize,s-=n.nodeSize,a+=2*n.nodeSize,c+=2*n.nodeSize;var p=a-i,u=c-s,d=[];d[0]=i,d[1]=s,d[2]=p,d[3]=u;var h=p>u?n.width/p:n.height/u,f=h,m=Math.round(n.nodeSize*h)/2;return e.setTransform(1,0,0,1,0-i*h,0-s*h),t.inports&&Object.keys(t.inports).forEach(function(o){var i=t.inports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=l[i.process];if(!s)return;r(e,h,i,s,2,n)}}.bind(this)),t.outports&&Object.keys(t.outports).forEach(function(o){var i=t.outports[o];if(i.metadata&&!isNaN(i.metadata.x)&&!isNaN(i.metadata.y)){var s=l[i.process];if(!s)return;r(e,h,s,i,5,n)}}.bind(this)),t.edges.forEach(function(t){var o=l[t.from.node],i=l[t.to.node];o&&i&&r(e,h,o,i,t.metadata.route,n)}.bind(this)),o.forEach(function(t){var r=Math.round(t.metadata.x*h),o=Math.round(t.metadata.y*h);e.strokeStyle=n.strokeStyle,e.fillStyle=n.fillStyle,e.beginPath(),t.process&&!t.component?e.arc(r,o,m/2,0,2*Math.PI,!1):e.arc(r,o,m,0,2*Math.PI,!1),e.fill(),e.stroke(),e.beginPath();var i=Math.max(m-1.5,1);t.process&&!t.component?e.arc(r,o,i/2,0,2*Math.PI,!1):e.arc(r,o,i,0,2*Math.PI,!1),e.fill()}.bind(this)),{rectangle:d,scale:f}},styleFromTheme:function(e){var t={};return"dark"===e?(t.fill="hsl(184, 8%, 10%)",t.stroke="hsl(180, 11%, 70%)",t.edgeColors=["white","hsl(  0, 100%, 46%)","hsl( 35, 100%, 46%)","hsl( 60, 100%, 46%)","hsl(135, 100%, 46%)","hsl(160, 100%, 46%)","hsl(185, 100%, 46%)","hsl(210, 100%, 46%)","hsl(285, 100%, 46%)","hsl(310, 100%, 46%)","hsl(335, 100%, 46%)"]):(t.fill="hsl(184, 8%, 75%)",t.stroke="hsl(180, 11%, 20%)",t.edgeColors=["hsl(  0,   0%, 50%)","hsl(  0, 100%, 40%)","hsl( 29, 100%, 40%)","hsl( 47, 100%, 40%)","hsl(138, 100%, 40%)","hsl(160,  73%, 50%)","hsl(181, 100%, 40%)","hsl(216, 100%, 40%)","hsl(260, 100%, 40%)","hsl(348, 100%, 50%)","hsl(328, 100%, 40%)"]),t}}},function(e,t){var r={};function n(e){return JSON.parse(JSON.stringify(e))}function o(e){var t=60466176;return e+"_"+(t=Math.floor(Math.random()*t)).toString(36)}e.exports={copy:function(e,t){r={nodes:[],edges:[]};var i,s,a={};for(i=0,s=t.length;i<s;i++){var c=e.getNode(t[i]),l=n(c);l.id=o(c.component),r.nodes.push(l),a[c.id]=l.id}for(i=0,s=e.edges.length;i<s;i++){var p=e.edges[i],u=p.from.node,d=p.to.node;if(a.hasOwnProperty(u)&&a.hasOwnProperty(d)){var h=n(p);h.from.node=a[u],h.to.node=a[d],r.edges.push(h)}}},paste:function(e){var t,i,s={},a={nodes:[],edges:[]};for(t=0,i=r.nodes.length;t<i;t++){var c=r.nodes[t],l=n(c.metadata);l.x+=36,l.y+=36;var p=e.addNode(o(c.component),c.component,l);s[c.id]=p.id,a.nodes.push(p)}for(t=0,i=r.edges.length;t<i;t++){var u,d=r.edges[t],h=n(d.metadata);if(d.from.hasOwnProperty("index")||d.to.hasOwnProperty("index")){var f=d.from.index||null,m=d.to.index||null;u=e.addEdgeIndex(s[d.from.node],d.from.port,f,s[d.to.node],d.to.port,m,h)}else u=e.addEdge(s[d.from.node],d.from.port,s[d.to.node],d.to.port,h);a.edges.push(u)}return a}}},function(e,t,r){!function(e){"use strict";e.defineMode("vbscript",(function(e,t){function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b","i")}var n=new RegExp("^[\\+\\-\\*/&\\\\\\^<>=]"),o=new RegExp("^((<>)|(<=)|(>=))"),i=new RegExp("^[\\.,]"),s=new RegExp("^[\\(\\)]"),a=new RegExp("^[A-Za-z][_A-Za-z0-9]*"),c=r(["and","or","not","xor","is","mod","eqv","imp"]),l=["WScript","err","debug","RegExp"],p=["clear","execute","raise","replace","test","write","writeline","close","open","state","eof","update","addnew","end","createobject","quit"].concat(["description","firstindex","global","helpcontext","helpfile","ignorecase","length","number","pattern","source","value","count"]);l=l.concat(["vbBlack","vbRed","vbGreen","vbYellow","vbBlue","vbMagenta","vbCyan","vbWhite","vbBinaryCompare","vbTextCompare","vbSunday","vbMonday","vbTuesday","vbWednesday","vbThursday","vbFriday","vbSaturday","vbUseSystemDayOfWeek","vbFirstJan1","vbFirstFourDays","vbFirstFullWeek","vbGeneralDate","vbLongDate","vbShortDate","vbLongTime","vbShortTime","vbObjectError","vbOKOnly","vbOKCancel","vbAbortRetryIgnore","vbYesNoCancel","vbYesNo","vbRetryCancel","vbCritical","vbQuestion","vbExclamation","vbInformation","vbDefaultButton1","vbDefaultButton2","vbDefaultButton3","vbDefaultButton4","vbApplicationModal","vbSystemModal","vbOK","vbCancel","vbAbort","vbRetry","vbIgnore","vbYes","vbNo","vbCr","VbCrLf","vbFormFeed","vbLf","vbNewLine","vbNullChar","vbNullString","vbTab","vbVerticalTab","vbUseDefault","vbTrue","vbFalse","vbEmpty","vbNull","vbInteger","vbLong","vbSingle","vbDouble","vbCurrency","vbDate","vbString","vbObject","vbError","vbBoolean","vbVariant","vbDataObject","vbDecimal","vbByte","vbArray"]),e.isASP&&(l=l.concat(["server","response","request","session","application"]),p=p.concat(["addheader","appendtolog","binarywrite","end","flush","redirect","binaryread","remove","removeall","lock","unlock","abandon","getlasterror","htmlencode","mappath","transfer","urlencode"],["buffer","cachecontrol","charset","contenttype","expires","expiresabsolute","isclientconnected","pics","status","clientcertificate","cookies","form","querystring","servervariables","totalbytes","contents","staticobjects","codepage","lcid","sessionid","timeout","scripttimeout"]));var u=r(["dim","redim","then","until","randomize","byval","byref","new","property","exit","in","const","private","public","get","set","let","stop","on error resume next","on error goto 0","option explicit","call","me"]),d=r(["true","false","nothing","empty","null"]),h=r(["abs","array","asc","atn","cbool","cbyte","ccur","cdate","cdbl","chr","cint","clng","cos","csng","cstr","date","dateadd","datediff","datepart","dateserial","datevalue","day","escape","eval","execute","exp","filter","formatcurrency","formatdatetime","formatnumber","formatpercent","getlocale","getobject","getref","hex","hour","inputbox","instr","instrrev","int","fix","isarray","isdate","isempty","isnull","isnumeric","isobject","join","lbound","lcase","left","len","loadpicture","log","ltrim","rtrim","trim","maths","mid","minute","month","monthname","msgbox","now","oct","replace","rgb","right","rnd","round","scriptengine","scriptenginebuildversion","scriptenginemajorversion","scriptengineminorversion","second","setlocale","sgn","sin","space","split","sqr","strcomp","string","strreverse","tan","time","timer","timeserial","timevalue","typename","ubound","ucase","unescape","vartype","weekday","weekdayname","year"]),f=r(l),m=r(p),g=r(["class","sub","select","while","if","function","property","with","for"]),y=r(["else","elseif","case"]),v=r(["next","loop","wend"]),b=r(["end"]),w=r(["do"]),x=r(["on error resume next","exit"]),k=r(["rem"]);function E(e,t){t.currentIndent++}function _(e,t){t.currentIndent--}function S(e,r){if(e.eatSpace())return"space";var l,p;if("'"===e.peek())return e.skipToEnd(),"comment";if(e.match(k))return e.skipToEnd(),"comment";if(e.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!e.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var C=!1;if((e.match(/^\d*\.\d+/i)||e.match(/^\d+\.\d*/)||e.match(/^\.\d+/))&&(C=!0),C)return e.eat(/J/i),"number";var P=!1;if(e.match(/^&H[0-9a-f]+/i)||e.match(/^&O[0-7]+/i)?P=!0:e.match(/^[1-9]\d*F?/)?(e.eat(/J/i),P=!0):e.match(/^0(?![\dx])/i)&&(P=!0),P)return e.eat(/L/i),"number"}return e.match('"')?(r.tokenize=(l=e.current(),p=1==l.length,function(e,r){for(;!e.eol();){if(e.eatWhile(/[^'"]/),e.match(l))return r.tokenize=S,"string";e.eat(/['"]/)}if(p){if(t.singleLineStringErrors)return"error";r.tokenize=S}return"string"}),r.tokenize(e,r)):e.match(o)||e.match(n)||e.match(c)?"operator":e.match(i)?null:e.match(s)?"bracket":e.match(x)?(r.doInCurrentLine=!0,"keyword"):e.match(w)?(E(0,r),r.doInCurrentLine=!0,"keyword"):e.match(g)?(r.doInCurrentLine?r.doInCurrentLine=!1:E(0,r),"keyword"):e.match(y)?"keyword":e.match(b)?(_(0,r),_(0,r),"keyword"):e.match(v)?(r.doInCurrentLine?r.doInCurrentLine=!1:_(0,r),"keyword"):e.match(u)?"keyword":e.match(d)?"atom":e.match(m)?"variable-2":e.match(h)?"builtin":e.match(f)?"variable-2":e.match(a)?"variable":(e.next(),"error")}return{electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:S,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(e,t){e.sol()&&(t.currentIndent+=t.nextLineIndent,t.nextLineIndent=0,t.doInCurrentLine=0);var r=function(e,t){var r=t.tokenize(e,t),n=e.current();return"."===n?(r=t.tokenize(e,t),n=e.current(),!r||"variable"!==r.substr(0,8)&&"builtin"!==r&&"keyword"!==r?"error":("builtin"!==r&&"keyword"!==r||(r="variable"),p.indexOf(n.substr(1))>-1&&(r="variable-2"),r)):r}(e,t);return t.lastToken={style:r,content:e.current()},"space"===r&&(r=null),r},indent:function(t,r){var n=r.replace(/^\s+|\s+$/g,"");return n.match(v)||n.match(b)||n.match(y)?e.indentUnit*(t.currentIndent-1):t.currentIndent<0?0:t.currentIndent*e.indentUnit}}})),e.defineMIME("text/vbscript","vbscript")}(r(21))},function(e,t,r){!function(e){"use strict";e.defineMode("coffeescript",(function(e,t){function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var n=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,o=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,i=/^[_A-Za-z$][_A-Za-z$0-9]*/,s=/^@[_A-Za-z$][_A-Za-z$0-9]*/,a=r(["and","or","not","is","isnt","in","instanceof","typeof"]),c=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],l=r(c.concat(["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"]));c=r(c);var p=/^('{3}|\"{3}|['\"])/,u=/^(\/{3}|\/)/,d=r(["Infinity","NaN","undefined","null","true","false","on","off","yes","no"]);function h(e,t){if(e.sol()){null===t.scope.align&&(t.scope.align=!1);var r=t.scope.offset;if(e.eatSpace()){var c=e.indentation();return c>r&&"coffee"==t.scope.type?"indent":c<r?"dedent":null}r>0&&y(e,t)}if(e.eatSpace())return null;var h=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return t.tokenize=m,t.tokenize(e,t);if("#"===h)return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var g=!1;if(e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(g=!0),e.match(/^-?\d+\.\d*/)&&(g=!0),e.match(/^-?\.\d+/)&&(g=!0),g)return"."==e.peek()&&e.backUp(1),"number";var v=!1;if(e.match(/^-?0x[0-9a-f]+/i)&&(v=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(v=!0),e.match(/^-?0(?![\dx])/i)&&(v=!0),v)return"number"}if(e.match(p))return t.tokenize=f(e.current(),!1,"string"),t.tokenize(e,t);if(e.match(u)){if("/"!=e.current()||e.match(/^.*\//,!1))return t.tokenize=f(e.current(),!0,"string-2"),t.tokenize(e,t);e.backUp(1)}return e.match(n)||e.match(a)?"operator":e.match(o)?"punctuation":e.match(d)?"atom":e.match(s)||t.prop&&e.match(i)?"property":e.match(l)?"keyword":e.match(i)?"variable":(e.next(),"error")}function f(e,r,n){return function(o,i){for(;!o.eol();)if(o.eatWhile(/[^'"\/\\]/),o.eat("\\")){if(o.next(),r&&o.eol())return n}else{if(o.match(e))return i.tokenize=h,n;o.eat(/['"\/]/)}return r&&(t.singleLineStringErrors?n="error":i.tokenize=h),n}}function m(e,t){for(;!e.eol();){if(e.eatWhile(/[^#]/),e.match("###")){t.tokenize=h;break}e.eatWhile("#")}return"comment"}function g(t,r,n){n=n||"coffee";for(var o=0,i=!1,s=null,a=r.scope;a;a=a.prev)if("coffee"===a.type||"}"==a.type){o=a.offset+e.indentUnit;break}"coffee"!==n?(i=null,s=t.column()+t.current().length):r.scope.align&&(r.scope.align=!1),r.scope={offset:o,type:n,prev:r.scope,align:i,alignOffset:s}}function y(e,t){if(t.scope.prev){if("coffee"===t.scope.type){for(var r=e.indentation(),n=!1,o=t.scope;o;o=o.prev)if(r===o.offset){n=!0;break}if(!n)return!0;for(;t.scope.prev&&t.scope.offset!==r;)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}}return{startState:function(e){return{tokenize:h,scope:{offset:e||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(e,t){var r=null===t.scope.align&&t.scope;r&&e.sol()&&(r.align=!1);var n=function(e,t){var r=t.tokenize(e,t),n=e.current();"return"===n&&(t.dedent=!0),(("->"===n||"=>"===n)&&e.eol()||"indent"===r)&&g(e,t);var o="[({".indexOf(n);if(-1!==o&&g(e,t,"])}".slice(o,o+1)),c.exec(n)&&g(e,t),"then"==n&&y(e,t),"dedent"===r&&y(e,t))return"error";if(-1!==(o="])}".indexOf(n))){for(;"coffee"==t.scope.type&&t.scope.prev;)t.scope=t.scope.prev;t.scope.type==n&&(t.scope=t.scope.prev)}return t.dedent&&e.eol()&&("coffee"==t.scope.type&&t.scope.prev&&(t.scope=t.scope.prev),t.dedent=!1),r}(e,t);return n&&"comment"!=n&&(r&&(r.align=!0),t.prop="punctuation"==n&&"."==e.current()),n},indent:function(e,t){if(e.tokenize!=h)return 0;var r=e.scope,n=t&&"])}".indexOf(t.charAt(0))>-1;if(n)for(;"coffee"==r.type&&r.prev;)r=r.prev;var o=n&&r.type===t.charAt(0);return r.align?r.alignOffset-(o?1:0):(o?r.prev:r).offset},lineComment:"#",fold:"indent"}})),e.defineMIME("application/vnd.coffeescript","coffeescript"),e.defineMIME("text/x-coffeescript","coffeescript"),e.defineMIME("text/coffeescript","coffeescript")}(r(21))},function(e,t,r){!function(e){"use strict";function t(e,t,r,n,o,i){this.indented=e,this.column=t,this.type=r,this.info=n,this.align=o,this.prev=i}function r(e,r,n,o){var i=e.indented;return e.context&&"statement"==e.context.type&&"statement"!=n&&(i=e.context.indented),e.context=new t(i,r,n,o,null,e.context)}function n(e){var t=e.context.type;return")"!=t&&"]"!=t&&"}"!=t||(e.indented=e.context.indented),e.context=e.context.prev}function o(e,t,r){return"variable"==t.prevToken||"type"==t.prevToken||!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(e.string.slice(0,r))||!(!t.typeAtEndOfLine||e.column()!=e.indentation())||void 0}function i(e){for(;;){if(!e||"top"==e.type)return!0;if("}"==e.type&&"namespace"!=e.prev.info)return!1;e=e.prev}}function s(e){for(var t={},r=e.split(" "),n=0;n<r.length;++n)t[r[n]]=!0;return t}function a(e,t){return"function"==typeof e?e(t):e.propertyIsEnumerable(t)}e.defineMode("clike",(function(s,c){var l,p,u=s.indentUnit,d=c.statementIndentUnit||u,h=c.dontAlignCalls,f=c.keywords||{},m=c.types||{},g=c.builtin||{},y=c.blockKeywords||{},v=c.defKeywords||{},b=c.atoms||{},w=c.hooks||{},x=c.multiLineStrings,k=!1!==c.indentStatements,E=!1!==c.indentSwitch,_=c.namespaceSeparator,S=c.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,C=c.numberStart||/[\d\.]/,P=c.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,A=c.isOperatorChar||/[+\-*&%=<>!?|\/]/,O=c.isIdentifierChar||/[\w\$_\xa1-\uffff]/,T=c.isReservedIdentifier||!1;function D(e,t){var r,n=e.next();if(w[n]){var o=w[n](e,t);if(!1!==o)return o}if('"'==n||"'"==n)return t.tokenize=(r=n,function(e,t){for(var n,o=!1,i=!1;null!=(n=e.next());){if(n==r&&!o){i=!0;break}o=!o&&"\\"==n}return(i||!o&&!x)&&(t.tokenize=null),"string"}),t.tokenize(e,t);if(S.test(n))return l=n,null;if(C.test(n)){if(e.backUp(1),e.match(P))return"number";e.next()}if("/"==n){if(e.eat("*"))return t.tokenize=N,N(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(A.test(n)){for(;!e.match(/^\/[\/*]/,!1)&&e.eat(A););return"operator"}if(e.eatWhile(O),_)for(;e.match(_);)e.eatWhile(O);var i=e.current();return a(f,i)?(a(y,i)&&(l="newstatement"),a(v,i)&&(p=!0),"keyword"):a(m,i)?"type":a(g,i)||T&&T(i)?(a(y,i)&&(l="newstatement"),"builtin"):a(b,i)?"atom":"variable"}function N(e,t){for(var r,n=!1;r=e.next();){if("/"==r&&n){t.tokenize=null;break}n="*"==r}return"comment"}function j(e,t){c.typeFirstDefinitions&&e.eol()&&i(t.context)&&(t.typeAtEndOfLine=o(e,t,e.pos))}return{startState:function(e){return{tokenize:null,context:new t((e||0)-u,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(e,t){var s=t.context;if(e.sol()&&(null==s.align&&(s.align=!1),t.indented=e.indentation(),t.startOfLine=!0),e.eatSpace())return j(e,t),null;l=p=null;var a=(t.tokenize||D)(e,t);if("comment"==a||"meta"==a)return a;if(null==s.align&&(s.align=!0),";"==l||":"==l||","==l&&e.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==t.context.type;)n(t);else if("{"==l)r(t,e.column(),"}");else if("["==l)r(t,e.column(),"]");else if("("==l)r(t,e.column(),")");else if("}"==l){for(;"statement"==s.type;)s=n(t);for("}"==s.type&&(s=n(t));"statement"==s.type;)s=n(t)}else l==s.type?n(t):k&&(("}"==s.type||"top"==s.type)&&";"!=l||"statement"==s.type&&"newstatement"==l)&&r(t,e.column(),"statement",e.current());if("variable"==a&&("def"==t.prevToken||c.typeFirstDefinitions&&o(e,t,e.start)&&i(t.context)&&e.match(/^\s*\(/,!1))&&(a="def"),w.token){var u=w.token(e,t,a);void 0!==u&&(a=u)}return"def"==a&&!1===c.styleDefs&&(a="variable"),t.startOfLine=!1,t.prevToken=p?"def":a||l,j(e,t),a},indent:function(t,r){if(t.tokenize!=D&&null!=t.tokenize||t.typeAtEndOfLine)return e.Pass;var n=t.context,o=r&&r.charAt(0),i=o==n.type;if("statement"==n.type&&"}"==o&&(n=n.prev),c.dontIndentStatements)for(;"statement"==n.type&&c.dontIndentStatements.test(n.info);)n=n.prev;if(w.indent){var s=w.indent(t,n,r,u);if("number"==typeof s)return s}var a=n.prev&&"switch"==n.prev.info;if(c.allmanIndentation&&/[{(]/.test(o)){for(;"top"!=n.type&&"}"!=n.type;)n=n.prev;return n.indented}return"statement"==n.type?n.indented+("{"==o?0:d):!n.align||h&&")"==n.type?")"!=n.type||i?n.indented+(i?0:u)+(i||!a||/^(?:case|default)\b/.test(r)?0:u):n.indented+d:n.column+(i?0:1)},electricInput:E?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}}));var c="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",l="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",p="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",u="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",d=s("int long char short double float unsigned signed void bool"),h=s("SEL instancetype id Class Protocol BOOL");function f(e){return a(d,e)||/.+_t$/.test(e)}function m(e){return f(e)||a(h,e)}var g="case do else for if switch while struct enum union";function y(e,t){if(!t.startOfLine)return!1;for(var r,n=null;r=e.peek();){if("\\"==r&&e.match(/^.$/)){n=y;break}if("/"==r&&e.match(/^\/[\/\*]/,!1))break;e.next()}return t.tokenize=n,"meta"}function v(e,t){return"type"==t.prevToken&&"type"}function b(e){return!(!e||e.length<2||"_"!=e[0]||"_"!=e[1]&&e[1]===e[1].toLowerCase())}function w(e){return e.eatWhile(/[\w\.']/),"number"}function x(e,t){if(e.backUp(1),e.match(/(R|u8R|uR|UR|LR)/)){var r=e.match(/"([^\s\\()]{0,16})\(/);return!!r&&(t.cpp11RawStringDelim=r[1],t.tokenize=_,_(e,t))}return e.match(/(u8|u|U|L)/)?!!e.match(/["']/,!1)&&"string":(e.next(),!1)}function k(e){var t=/(\w+)::~?(\w+)$/.exec(e);return t&&t[1]==t[2]}function E(e,t){for(var r;null!=(r=e.next());)if('"'==r&&!e.eat('"')){t.tokenize=null;break}return"string"}function _(e,t){var r=t.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return e.match(new RegExp(".*?\\)"+r+'"'))?t.tokenize=null:e.skipToEnd(),"string"}function S(t,r){"string"==typeof t&&(t=[t]);var n=[];function o(e){if(e)for(var t in e)e.hasOwnProperty(t)&&n.push(t)}o(r.keywords),o(r.types),o(r.builtin),o(r.atoms),n.length&&(r.helperType=t[0],e.registerHelper("hintWords",t[0],n));for(var i=0;i<t.length;++i)e.defineMIME(t[i],r)}function C(e,t){for(var r=!1;!e.eol();){if(!r&&e.match('"""')){t.tokenize=null;break}r="\\"==e.next()&&!r}return"string"}function P(e){return function(t,r){for(var n;n=t.next();){if("*"==n&&t.eat("/")){if(1==e){r.tokenize=null;break}return r.tokenize=P(e-1),r.tokenize(t,r)}if("/"==n&&t.eat("*"))return r.tokenize=P(e+1),r.tokenize(t,r)}return"comment"}}S(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:s(c),types:f,blockKeywords:s(g),defKeywords:s("struct enum union"),typeFirstDefinitions:!0,atoms:s("NULL true false"),isReservedIdentifier:b,hooks:{"#":y,"*":v},modeProps:{fold:["brace","include"]}}),S(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:s(c+" "+l),types:f,blockKeywords:s(g+" class try catch"),defKeywords:s("struct enum union class namespace"),typeFirstDefinitions:!0,atoms:s("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:b,hooks:{"#":y,"*":v,u:x,U:x,L:x,R:x,0:w,1:w,2:w,3:w,4:w,5:w,6:w,7:w,8:w,9:w,token:function(e,t,r){if("variable"==r&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&k(e.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),S("text/x-java",{name:"clike",keywords:s("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:s("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:s("catch class do else finally for if switch try while"),defKeywords:s("class interface enum @interface"),typeFirstDefinitions:!0,atoms:s("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(e){return!e.match("interface",!1)&&(e.eatWhile(/[\w\$_]/),"meta")}},modeProps:{fold:["brace","import"]}}),S("text/x-csharp",{name:"clike",keywords:s("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:s("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:s("catch class do else finally for foreach if struct switch try while"),defKeywords:s("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=E,E(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),S("text/x-scala",{name:"clike",keywords:s("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:s("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:s("catch class enum do else finally for forSome if match switch try while"),defKeywords:s("class enum def object package trait type val var"),atoms:s("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return!!e.match('""')&&(t.tokenize=C,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(e,r){var n=r.context;return!("}"!=n.type||!n.align||!e.eat(">"))&&(r.context=new t(n.indented,n.column,n.type,n.info,null,n.prev),"operator")},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=P(1),t.tokenize(e,t))}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}}),S("text/x-kotlin",{name:"clike",keywords:s("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam"),types:s("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:s("catch class do else finally for if where try while enum"),defKeywords:s("class val var object interface fun"),atoms:s("true false null this"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},"*":function(e,t){return"."==t.prevToken?"variable":"operator"},'"':function(e,t){var r;return t.tokenize=(r=e.match('""'),function(e,t){for(var n,o=!1,i=!1;!e.eol();){if(!r&&!o&&e.match('"')){i=!0;break}if(r&&e.match('"""')){i=!0;break}n=e.next(),!o&&"$"==n&&e.match("{")&&e.skipTo("}"),o=!o&&"\\"==n&&!r}return!i&&r||(t.tokenize=null),"string"}),t.tokenize(e,t)},"/":function(e,t){return!!e.eat("*")&&(t.tokenize=P(1),t.tokenize(e,t))},indent:function(e,t,r,n){var o=r&&r.charAt(0);return"}"!=e.prevToken&&")"!=e.prevToken||""!=r?"operator"==e.prevToken&&"}"!=r&&"}"!=e.context.type||"variable"==e.prevToken&&"."==o||("}"==e.prevToken||")"==e.prevToken)&&"."==o?2*n+t.indented:t.align&&"}"==t.type?t.indented+(e.context.type==(r||"").charAt(0)?0:n):void 0:e.indented}},modeProps:{closeBrackets:{triples:'"'}}}),S(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:s("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:s("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:s("for while do if else struct"),builtin:s("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:s("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":y},modeProps:{fold:["brace","include"]}}),S("text/x-nesc",{name:"clike",keywords:s(c+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:f,blockKeywords:s(g),atoms:s("null true false"),hooks:{"#":y},modeProps:{fold:["brace","include"]}}),S("text/x-objectivec",{name:"clike",keywords:s(c+" "+p),types:m,builtin:s(u),blockKeywords:s(g+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:s("struct enum union @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:s("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:b,hooks:{"#":y,"*":v},modeProps:{fold:["brace","include"]}}),S("text/x-objectivec++",{name:"clike",keywords:s(c+" "+p+" "+l),types:m,builtin:s(u),blockKeywords:s(g+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:s("struct enum union @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:s("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:b,hooks:{"#":y,"*":v,u:x,U:x,L:x,R:x,0:w,1:w,2:w,3:w,4:w,5:w,6:w,7:w,8:w,9:w,token:function(e,t,r){if("variable"==r&&"("==e.peek()&&(";"==t.prevToken||null==t.prevToken||"}"==t.prevToken)&&k(e.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),S("text/x-squirrel",{name:"clike",keywords:s("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:f,blockKeywords:s("case catch class else for foreach if switch try while"),defKeywords:s("function local class"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"#":y},modeProps:{fold:["brace","include"]}});var A=null;S("text/x-ceylon",{name:"clike",keywords:s("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(e){var t=e.charAt(0);return t===t.toUpperCase()&&t!==t.toLowerCase()},blockKeywords:s("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:s("class dynamic function interface module object package value"),builtin:s("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:s("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"},'"':function(e,t){return t.tokenize=function e(t){return function(r,n){for(var o,i=!1,s=!1;!r.eol();){if(!i&&r.match('"')&&("single"==t||r.match('""'))){s=!0;break}if(!i&&r.match("``")){A=e(t),s=!0;break}o=r.next(),i="single"==t&&!i&&"\\"==o}return s&&(n.tokenize=null),"string"}}(e.match('""')?"triple":"single"),t.tokenize(e,t)},"`":function(e,t){return!(!A||!e.match("`"))&&(t.tokenize=A,A=null,t.tokenize(e,t))},"'":function(e){return e.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(e,t,r){if(("variable"==r||"type"==r)&&"."==t.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})}(r(21))},function(e,t,r){!function(e){"use strict";var t={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},r={};function n(e,t){var n=e.match(function(e){var t=r[e];return t||(r[e]=new RegExp("\\s+"+e+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(t));return n?/^\s*(.*?)\s*$/.exec(n[2])[1]:""}function o(e,t){return new RegExp((t?"^":"")+"</s*"+e+"s*>","i")}function i(e,t){for(var r in e)for(var n=t[r]||(t[r]=[]),o=e[r],i=o.length-1;i>=0;i--)n.unshift(o[i])}e.defineMode("htmlmixed",(function(r,s){var a=e.getMode(r,{name:"xml",htmlMode:!0,multilineTagIndentFactor:s.multilineTagIndentFactor,multilineTagIndentPastTag:s.multilineTagIndentPastTag}),c={},l=s&&s.tags,p=s&&s.scriptTypes;if(i(t,c),l&&i(l,c),p)for(var u=p.length-1;u>=0;u--)c.script.unshift(["type",p[u].matches,p[u].mode]);function d(t,i){var s,l=a.token(t,i.htmlState),p=/\btag\b/.test(l);if(p&&!/[<>\s\/]/.test(t.current())&&(s=i.htmlState.tagName&&i.htmlState.tagName.toLowerCase())&&c.hasOwnProperty(s))i.inTag=s+" ";else if(i.inTag&&p&&/>$/.test(t.current())){var u=/^([\S]+) (.*)/.exec(i.inTag);i.inTag=null;var h=">"==t.current()&&function(e,t){for(var r=0;r<e.length;r++){var o=e[r];if(!o[0]||o[1].test(n(t,o[0])))return o[2]}}(c[u[1]],u[2]),f=e.getMode(r,h),m=o(u[1],!0),g=o(u[1],!1);i.token=function(e,t){return e.match(m,!1)?(t.token=d,t.localState=t.localMode=null,null):function(e,t,r){var n=e.current(),o=n.search(t);return o>-1?e.backUp(n.length-o):n.match(/<\/?$/)&&(e.backUp(n.length),e.match(t,!1)||e.match(n)),r}(e,g,t.localMode.token(e,t.localState))},i.localMode=f,i.localState=e.startState(f,a.indent(i.htmlState,"",""))}else i.inTag&&(i.inTag+=t.current(),t.eol()&&(i.inTag+=" "));return l}return{startState:function(){return{token:d,inTag:null,localMode:null,localState:null,htmlState:e.startState(a)}},copyState:function(t){var r;return t.localState&&(r=e.copyState(t.localMode,t.localState)),{token:t.token,inTag:t.inTag,localMode:t.localMode,localState:r,htmlState:e.copyState(a,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,r,n){return!t.localMode||/^\s*<\//.test(r)?a.indent(t.htmlState,r,n):t.localMode.indent?t.localMode.indent(t.localState,r,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||a}}}}),"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}(r(21),r(100),r(101),r(102))},function(e,t,r){!function(e){"use strict";e.defineMode("smalltalk",(function(e){var t=/[+\-\/\\*~<>=@%|&?!.,:;^]/,r=/true|false|nil|self|super|thisContext/,n=function(e,t){this.next=e,this.parent=t},o=function(e,t,r){this.name=e,this.context=t,this.eos=r},i=function(){this.context=new n(s,null),this.expectVariable=!0,this.indentation=0,this.userIndentationDelta=0};i.prototype.userIndent=function(t){this.userIndentationDelta=t>0?t/e.indentUnit-this.indentation:0};var s=function(e,i,s){var u=new o(null,i,!1),d=e.next();return'"'===d?u=a(e,new n(a,i)):"'"===d?u=c(e,new n(c,i)):"#"===d?"'"===e.peek()?(e.next(),u=l(e,new n(l,i))):e.eatWhile(/[^\s.{}\[\]()]/)?u.name="string-2":u.name="meta":"$"===d?("<"===e.next()&&(e.eatWhile(/[^\s>]/),e.next()),u.name="string-2"):"|"===d&&s.expectVariable?u.context=new n(p,i):/[\[\]{}()]/.test(d)?(u.name="bracket",u.eos=/[\[{(]/.test(d),"["===d?s.indentation++:"]"===d&&(s.indentation=Math.max(0,s.indentation-1))):t.test(d)?(e.eatWhile(t),u.name="operator",u.eos=";"!==d):/\d/.test(d)?(e.eatWhile(/[\w\d]/),u.name="number"):/[\w_]/.test(d)?(e.eatWhile(/[\w\d_]/),u.name=s.expectVariable?r.test(e.current())?"keyword":"variable":null):u.eos=s.expectVariable,u},a=function(e,t){return e.eatWhile(/[^"]/),new o("comment",e.eat('"')?t.parent:t,!0)},c=function(e,t){return e.eatWhile(/[^']/),new o("string",e.eat("'")?t.parent:t,!1)},l=function(e,t){return e.eatWhile(/[^']/),new o("string-2",e.eat("'")?t.parent:t,!1)},p=function(e,t){var r=new o(null,t,!1);return"|"===e.next()?(r.context=t.parent,r.eos=!0):(e.eatWhile(/[^|]/),r.name="variable"),r};return{startState:function(){return new i},token:function(e,t){if(t.userIndent(e.indentation()),e.eatSpace())return null;var r=t.context.next(e,t.context,t);return t.context=r.context,t.expectVariable=r.eos,r.name},blankLine:function(e){e.userIndent(0)},indent:function(t,r){var n=t.context.next===s&&r&&"]"===r.charAt(0)?-1:t.userIndentationDelta;return(t.indentation+n)*e.indentUnit},electricChars:"]"}})),e.defineMIME("text/x-stsrc",{name:"smalltalk"})}(r(21))},function(e,t,r){!function(e){"use strict";e.defineMode("yaml",(function(){var e=new RegExp("\\b(("+["true","false","on","off","yes","no"].join(")|(")+"))$","i");return{token:function(t,r){var n=t.peek(),o=r.escaped;if(r.escaped=!1,"#"==n&&(0==t.pos||/\s/.test(t.string.charAt(t.pos-1))))return t.skipToEnd(),"comment";if(t.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(r.literal&&t.indentation()>r.keyCol)return t.skipToEnd(),"string";if(r.literal&&(r.literal=!1),t.sol()){if(r.keyCol=0,r.pair=!1,r.pairStart=!1,t.match(/---/))return"def";if(t.match(/\.\.\./))return"def";if(t.match(/\s*-\s+/))return"meta"}if(t.match(/^(\{|\}|\[|\])/))return"{"==n?r.inlinePairs++:"}"==n?r.inlinePairs--:"["==n?r.inlineList++:r.inlineList--,"meta";if(r.inlineList>0&&!o&&","==n)return t.next(),"meta";if(r.inlinePairs>0&&!o&&","==n)return r.keyCol=0,r.pair=!1,r.pairStart=!1,t.next(),"meta";if(r.pairStart){if(t.match(/^\s*(\||\>)\s*/))return r.literal=!0,"meta";if(t.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==r.inlinePairs&&t.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(r.inlinePairs>0&&t.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(t.match(e))return"keyword"}return!r.pair&&t.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(r.pair=!0,r.keyCol=t.indentation(),"atom"):r.pair&&t.match(/^:\s*/)?(r.pairStart=!0,"meta"):(r.pairStart=!1,r.escaped="\\"==n,t.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:"#",fold:"indent"}})),e.defineMIME("text/x-yaml","yaml"),e.defineMIME("text/yaml","yaml")}(r(21))},function(e,t,r){!function(e){"use strict";function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}var r,n=t(["and","or","not","is"]),o=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield","in"],i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"];function s(e){return e.scopes[e.scopes.length-1]}e.registerHelper("hintWords","python",o.concat(i)),e.defineMode("python",(function(r,a){for(var c=a.delimiters||a.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.\\]/,l=[a.singleOperators,a.doubleOperators,a.doubleDelimiters,a.tripleDelimiters,a.operators||/^([-+*/%\/&|^]=?|[<>=]+|\/\/=?|\*\*=?|!=|[~!@]|\.\.\.)/],p=0;p<l.length;p++)l[p]||l.splice(p--,1);var u=a.hangingIndent||r.indentUnit,d=o,h=i;null!=a.extra_keywords&&(d=d.concat(a.extra_keywords)),null!=a.extra_builtins&&(h=h.concat(a.extra_builtins));var f=!(a.version&&Number(a.version)<3);if(f){var m=a.identifiers||/^[_A-Za-z\u00A1-\uFFFF][_A-Za-z0-9\u00A1-\uFFFF]*/;d=d.concat(["nonlocal","False","True","None","async","await"]),h=h.concat(["ascii","bytes","exec","print"]);var g=new RegExp("^(([rbuf]|(br)|(fr))?('{3}|\"{3}|['\"]))","i")}else m=a.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/,d=d.concat(["exec","print"]),h=h.concat(["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"]),g=new RegExp("^(([rubf]|(ur)|(br))?('{3}|\"{3}|['\"]))","i");var y=t(d),v=t(h);function b(e,t){var r=e.sol()&&"\\"!=t.lastToken;if(r&&(t.indent=e.indentation()),r&&"py"==s(t).type){var n=s(t).offset;if(e.eatSpace()){var o=e.indentation();return o>n?x(t):o<n&&k(e,t)&&"#"!=e.peek()&&(t.errorToken=!0),null}var i=w(e,t);return n>0&&k(e,t)&&(i+=" error"),i}return w(e,t)}function w(e,t,r){if(e.eatSpace())return null;if(!r&&e.match(/^#.*/))return"comment";if(e.match(/^[0-9\.]/,!1)){var o=!1;if(e.match(/^[\d_]*\.\d+(e[\+\-]?\d+)?/i)&&(o=!0),e.match(/^[\d_]+\.\d*/)&&(o=!0),e.match(/^\.\d+/)&&(o=!0),o)return e.eat(/J/i),"number";var i=!1;if(e.match(/^0x[0-9a-f_]+/i)&&(i=!0),e.match(/^0b[01_]+/i)&&(i=!0),e.match(/^0o[0-7_]+/i)&&(i=!0),e.match(/^[1-9][\d_]*(e[\+\-]?[\d_]+)?/)&&(e.eat(/J/i),i=!0),e.match(/^0(?![\dx])/i)&&(i=!0),i)return e.eat(/L/i),"number"}if(e.match(g))return-1!==e.current().toLowerCase().indexOf("f")?(t.tokenize=function(e,t){for(;"rubf".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var r=1==e.length;function n(e){return function(t,r){var i=w(t,r,!0);return"punctuation"==i&&("{"==t.current()?r.tokenize=n(e+1):"}"==t.current()&&(r.tokenize=e>1?n(e-1):o)),i}}function o(o,i){for(;!o.eol();)if(o.eatWhile(/[^'"\{\}\\]/),o.eat("\\")){if(o.next(),r&&o.eol())return"string"}else{if(o.match(e))return i.tokenize=t,"string";if(o.match("{{"))return"string";if(o.match("{",!1))return i.tokenize=n(0),o.current()?"string":i.tokenize(o,i);if(o.match("}}"))return"string";if(o.match("}"))return"error";o.eat(/['"]/)}if(r){if(a.singleLineStringErrors)return"error";i.tokenize=t}return"string"}return o.isString=!0,o}(e.current(),t.tokenize),t.tokenize(e,t)):(t.tokenize=function(e,t){for(;"rubf".indexOf(e.charAt(0).toLowerCase())>=0;)e=e.substr(1);var r=1==e.length;function n(n,o){for(;!n.eol();)if(n.eatWhile(/[^'"\\]/),n.eat("\\")){if(n.next(),r&&n.eol())return"string"}else{if(n.match(e))return o.tokenize=t,"string";n.eat(/['"]/)}if(r){if(a.singleLineStringErrors)return"error";o.tokenize=t}return"string"}return n.isString=!0,n}(e.current(),t.tokenize),t.tokenize(e,t));for(var s=0;s<l.length;s++)if(e.match(l[s]))return"operator";return e.match(c)?"punctuation":"."==t.lastToken&&e.match(m)?"property":e.match(y)||e.match(n)?"keyword":e.match(v)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(m)?"def"==t.lastToken||"class"==t.lastToken?"def":"variable":(e.next(),r?null:"error")}function x(e){for(;"py"!=s(e).type;)e.scopes.pop();e.scopes.push({offset:s(e).offset+r.indentUnit,type:"py",align:null})}function k(e,t){for(var r=e.indentation();t.scopes.length>1&&s(t).offset>r;){if("py"!=s(t).type)return!0;t.scopes.pop()}return s(t).offset!=r}function E(e,t){e.sol()&&(t.beginningOfLine=!0);var r=t.tokenize(e,t),n=e.current();if(t.beginningOfLine&&"@"==n)return e.match(m,!1)?"meta":f?"operator":"error";if(/\S/.test(n)&&(t.beginningOfLine=!1),"variable"!=r&&"builtin"!=r||"meta"!=t.lastToken||(r="meta"),"pass"!=n&&"return"!=n||(t.dedent+=1),"lambda"==n&&(t.lambda=!0),":"!=n||t.lambda||"py"!=s(t).type||x(t),1==n.length&&!/string|comment/.test(r)){var o="[({".indexOf(n);if(-1!=o&&function(e,t,r){var n=e.match(/^([\s\[\{\(]|#.*)*$/,!1)?null:e.column()+1;t.scopes.push({offset:t.indent+u,type:r,align:n})}(e,t,"])}".slice(o,o+1)),-1!=(o="])}".indexOf(n))){if(s(t).type!=n)return"error";t.indent=t.scopes.pop().offset-u}}return t.dedent>0&&e.eol()&&"py"==s(t).type&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1),r}return{startState:function(e){return{tokenize:b,scopes:[{offset:e||0,type:"py",align:null}],indent:e||0,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var r=t.errorToken;r&&(t.errorToken=!1);var n=E(e,t);return n&&"comment"!=n&&(t.lastToken="keyword"==n||"punctuation"==n?e.current():n),"punctuation"==n&&(n=null),e.eol()&&t.lambda&&(t.lambda=!1),r?n+" error":n},indent:function(t,r){if(t.tokenize!=b)return t.tokenize.isString?e.Pass:0;var n=s(t),o=n.type==r.charAt(0);return null!=n.align?n.align-(o?1:0):n.offset-(o?u:0)},electricInput:/^\s*[\}\]\)]$/,closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"}})),e.defineMIME("text/x-python","python"),e.defineMIME("text/x-cython",{name:"python",extra_keywords:(r="by cdef cimport cpdef ctypedef enum except extern gil include nogil property public readonly struct union DEF IF ELIF ELSE",r.split(" "))})}(r(21))},function(e,t){const r=document.createElement("template");r.innerHTML='\n<dom-module id="codemirror-styles">\n  <template>\n    <style>\n      /* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn\'t touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element\'s real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: \'\'; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/*\n  MDN-LIKE Theme - Mozilla\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues\n  GitHub: @peterkroon\n\n  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation\n\n*/\n.cm-s-mdn-like.CodeMirror { color: #999; background-color: #fff; }\n.cm-s-mdn-like div.CodeMirror-selected { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::selection, .cm-s-mdn-like .CodeMirror-line > span::selection, .cm-s-mdn-like .CodeMirror-line > span > span::selection { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span > span::-moz-selection { background: #cfc; }\n\n.cm-s-mdn-like .CodeMirror-gutters { background: #f8f8f8; border-left: 6px solid rgba(0,83,159,0.65); color: #333; }\n.cm-s-mdn-like .CodeMirror-linenumber { color: #aaa; padding-left: 8px; }\n.cm-s-mdn-like .CodeMirror-cursor { border-left: 2px solid #222; }\n\n.cm-s-mdn-like .cm-keyword { color: #6262FF; }\n.cm-s-mdn-like .cm-atom { color: #F90; }\n.cm-s-mdn-like .cm-number { color:  #ca7841; }\n.cm-s-mdn-like .cm-def { color: #8DA6CE; }\n.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag { color: #690; }\n.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def, .cm-s-mdn-like span.cm-type { color: #07a; }\n\n.cm-s-mdn-like .cm-variable { color: #07a; }\n.cm-s-mdn-like .cm-property { color: #905; }\n.cm-s-mdn-like .cm-qualifier { color: #690; }\n\n.cm-s-mdn-like .cm-operator { color: #cda869; }\n.cm-s-mdn-like .cm-comment { color:#777; font-weight:normal; }\n.cm-s-mdn-like .cm-string { color:#07a; font-style:italic; }\n.cm-s-mdn-like .cm-string-2 { color:#bd6b18; } /*?*/\n.cm-s-mdn-like .cm-meta { color: #000; } /*?*/\n.cm-s-mdn-like .cm-builtin { color: #9B7536; } /*?*/\n.cm-s-mdn-like .cm-tag { color: #997643; }\n.cm-s-mdn-like .cm-attribute { color: #d6bb6d; } /*?*/\n.cm-s-mdn-like .cm-header { color: #FF6400; }\n.cm-s-mdn-like .cm-hr { color: #AEAEAE; }\n.cm-s-mdn-like .cm-link { color:#ad9361; font-style:italic; text-decoration:none; }\n.cm-s-mdn-like .cm-error { border-bottom: 1px solid red; }\n\ndiv.cm-s-mdn-like .CodeMirror-activeline-background { background: #efefff; }\ndiv.cm-s-mdn-like span.CodeMirror-matchingbracket { outline:1px solid grey; color: inherit; }\n\n.cm-s-mdn-like.CodeMirror { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAAyCAYAAAAp8UeFAAAHvklEQVR42s2b63bcNgyEQZCSHCdt2vd/0tWF7I+Q6XgMXiTtuvU5Pl57ZQKkKHzEAOtF5KeIJBGJ8uvL599FRFREZhFx8DeXv8trn68RuGaC8TRfo3SNp9dlDDHedyLyTUTeRWStXKPZrjtpZxaRw5hPqozRs1N8/enzIiQRWcCgy4MUA0f+XWliDhyL8Lfyvx7ei/Ae3iQFHyw7U/59pQVIMEEPEz0G7XiwdRjzSfC3UTtz9vchIntxvry5iMgfIhJoEflOz2CQr3F5h/HfeFe+GTdLaKcu9L8LTeQb/R/7GgbsfKedyNdoHsN31uRPWrfZ5wsj/NzzRQHuToIdU3ahwnsKPxXCjJITuOsi7XLc7SG/v5GdALs7wf8JjTFiB5+QvTEfRyGOfX3Lrx8wxyQi3sNq46O7QahQiCsRFgqddjBouVEHOKDgXAQHD9gJCr5sMKkEdjwsarG/ww3BMHBU7OBjXnzdyY7SfCxf5/z6ATccrwlKuwC/jhznnPF4CgVzhhVf4xp2EixcBActO75iZ8/fM9zAs2OMzKdslgXWJ9XG8PQoOAMA5fGcsvORgv0doBXyHrCwfLJAOwo71QLNkb8n2Pl6EWiR7OCibtkPaz4Kc/0NNAze2gju3zOwekALDaCFPI5vjPFmgGY5AZqyGEvH1x7QfIb8YtxMnA/b+QQ0aQDAwc6JMFg8CbQZ4qoYEEHbRwNojuK3EHwd7VALSgq+MNDKzfT58T8qdpADrgW0GmgcAS1lhzztJmkAzcPNOQbsWEALBDSlMKUG0Eq4CLAQWvEVQ9WU57gZJwZtgPO3r9oBTQ9WO8TjqXINx8R0EYpiZEUWOF3FxkbJkgU9B2f41YBrIj5ZfsQa0M5kTgiAAqM3ShXLgu8XMqcrQBvJ0CL5pnTsfMB13oB8athpAq2XOQmcGmoACCLydx7nToa23ATaSIY2ichfOdPTGxlasXMLaL0MLZAOwAKIM+y8CmicobGdCcbbK9DzN+yYGVoNNI5iUKTMyYOjPse4A8SM1MmcXgU0toOq1yO/v8FOxlASyc7TgeYaAMBJHcY1CcCwGI/TK4AmDbDyKYBBtFUkRwto8gygiQEaByFgJ00BH2M8JWwQS1nafDXQCidWyOI8AcjDCSjCLk8ngObuAm3JAHAdubAmOaK06V8MNEsKPJOhobSprwQa6gD7DclRQdqcwL4zxqgBrQcabUiBLclRDKAlWp+etPkBaNMA0AKlrHwTdEByZAA4GM+SNluSY6wAzcMNewxmgig5Ks0nkrSpBvSaQHMdKTBAnLojOdYyGpQ254602ZILPdTD1hdlggdIm74jbTp8vDwF5ZYUeLWGJpWsh6XNyXgcYwVoJQTEhhTYkxzZjiU5npU2TaB979TQehlaAVq4kaGpiPwwwLkYUuBbQwocyQTv1tA0+1UFWoJF3iv1oq+qoSk8EQdJmwHkziIF7oOZk14EGitibAdjLYYK78H5vZOhtWpoI0ATGHs0Q8OMb4Ey+2bU2UYztCtA0wFAs7TplGLRVQCcqaFdGSPCeTI1QNIC52iWNzof6Uib7xjEp07mNNoUYmVosVItHrHzRlLgBn9LFyRHaQCtVUMbtTNhoXWiTOO9k/V8BdAc1Oq0ArSQs6/5SU0hckNy9NnXqQY0PGYo5dWJ7nINaN6o958FWin27aBaWRka1r5myvLOAm0j30eBJqCxHLReVclxhxOEN2JfDWjxBtAC7MIH1fVaGdoOp4qJYDgKtKPSFNID2gSnGldrCqkFZ+5UeQXQBIRrSwocbdZYQT/2LwRahBPBXoHrB8nxaGROST62DKUbQOMMzZIC9abkuELfQzQALWTnDNAm8KHWFOJgJ5+SHIvTPcmx1xQyZRhNL5Qci689aXMEaN/uNIWkEwDAvFpOZmgsBaaGnbs1NPa1Jm32gBZAIh1pCtG7TSH4aE0y1uVY4uqoFPisGlpP2rSA5qTecWn5agK6BzSpgAyD+wFaqhnYoSZ1Vwr8CmlTQbrcO3ZaX0NAEyMbYaAlyquFoLKK3SPby9CeVUPThrSJmkCAE0CrKUQadi4DrdSlWhmah0YL9z9vClH59YGbHx1J8VZTyAjQepJjmXwAKTDQI3omc3p1U4gDUf6RfcdYfrUp5ClAi2J3Ba6UOXGo+K+bQrjjssitG2SJzshaLwMtXgRagUNpYYoVkMSBLM+9GGiJZMvduG6DRZ4qc04DMPtQQxOjEtACmhO7K1AbNbQDEggZyJwscFpAGwENhoBeUwh3bWolhe8BTYVKxQEWrSUn/uhcM5KhvUu/+eQu0Lzhi+VrK0PrZZNDQKs9cpYUuFYgMVpD4/NxenJTiMCNqdUEUf1qZWjppLT5qSkkUZbCwkbZMSuVnu80hfSkzRbQeqCZSAh6huR4VtoM2gHAlLf72smuWgE+VV7XpE25Ab2WFDgyhnSuKbs4GuGzCjR+tIoUuMFg3kgcWKLTwRqanJQ2W00hAsenfaApRC42hbCvK1SlE0HtE9BGgneJO+ELamitD1YjjOYnNYVcraGhtKkW0EqVVeDx733I2NH581k1NNxNLG0i0IJ8/NjVaOZ0tYZ2Vtr0Xv7tPV3hkWp9EFkgS/J0vosngTaSoaG06WHi+xObQkaAdlbanP8B2+2l0f90LmUAAAAASUVORK5CYII=); }\n\n/*\nCopyright (C) 2013-2017 Flowhub UG\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\n.cm-s-noflo.CodeMirror {\n  color: hsl(188,6%,50%);\n  background-color: rgb(0, 0, 0);\n  font-family: "SourceCodePro",Helvetica,Arial,sans-serif !important;\n  font-size: 14px;\n  line-height: 17px;\n}\n\n.cm-s-noflo .CodeMirror-selected {\n  background: hsl(185,100%,26%) !important;\n}\n\n.cm-s-noflo .CodeMirror-gutters {\n  background-color: black;\n  border-right: 1px solid hsla(190, 90%, 80%, 0.1);\n}\n\n.cm-s-noflo .CodeMirror-linenumber {\n  color: hsl(188, 6%, 26%);\n}\n\n.cm-s-noflo .CodeMirror-cursor {\n  border-left: 1px solid hsl(185,98%,46%) !important;\n}\n\n.cm-s-noflo span.cm-keyword {\n  color: hsl(35,100%,75%); \n}\n\n.cm-s-noflo span.cm-atom {\n  color: hsl(35,98%,46%);\n}\n\n.cm-s-noflo span.cm-number {\n  color: hsl(160,100%,75%);\n}\n\n.cm-s-noflo span.cm-def {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-2 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-3 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-property {\n  color: #fff;\n}\n\n.cm-s-noflo span.cm-operator {\n}\n\n.cm-s-noflo span.cm-comment {\n  color: gray;\n}\n\n.cm-s-noflo span.cm-string {\n  color: hsl(135,100%,75%);\n}\n\n.cm-s-noflo span.cm-meta {\n  color: yellow;\n}\n\n.cm-s-noflo span.cm-qualifier {\n  color: #FFF700;\n}\n\n.cm-s-noflo span.cm-builtin {\n  color: #30a;\n}\n\n.cm-s-noflo span.cm-bracket {\n    color: #cc7;\n}\n\n.cm-s-noflo span.cm-tag {\n    color: #FFBD40;\n}\n\n.cm-s-noflo span.cm-attribute {\n    color: #FFF700;\n}\n\n.cm-s-noflo span.cm-error {\n    color: #f00;\n}\n\n.cm-s-noflo .CodeMirror-activeline-background {\n    background: #27282E !important;\n}\n\n.cm-s-noflo .CodeMirror-matchingbracket {\n    outline: 1px solid grey;\n    color: white !important;\n}\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(r.content)},function(e,t,r){const n=r(0);class o extends n.journal.JournalStore{constructor(e,t){super(e),this.db=t,this.transactions=[]}genKey(e){return`${this.graph.properties.id}_${e}`}putTransaction(e,t){super.putTransaction(e,t);return this.db.transaction(["journals"],"readwrite").objectStore("journals").add({id:this.genKey(e),graph:this.graph.properties.id,revId:e,entries:t}),this.transactions[e]=t,super.putTransaction(e,t)}fetchTransaction(e){return this.transactions[e]}init(e){this.db.transaction(["journals"]).objectStore("journals").index("graph").openCursor().onsuccess=t=>{const r=t.target.result;return r?(this.transactions[r.value.revId]=r.value.entries,r.value.revId>this.lastRevision&&(this.lastRevision=r.value.revId),r.continue()):e()}}}t.IDBJournalStore=o},function(e,t,r){const n=r(0),o=r(476),i=r(145);r(498),r(534);const s={noflo:n};window.require=function(e){if(void 0!==s[e])return s[e];throw new Error(`Module ${e} not available`)},window.addEventListener("WebComponentsReady",()=>{const e=function(e){const t=Math.random().toString(36).substring(7);n.graph.loadJSON(i,(r,n)=>{if(r)return void e(r);const i={defaultGraph:n,baseDir:n.baseDir,permissions:{}};i.permissions[t]=["protocol:component","protocol:runtime","protocol:graph","protocol:network","component:getsource","component:setsource"],i.label="NoFlo Development Environment",i.id="2b487ea3-287b-43f7-b7eb-806f02b402f9",i.namespace="ui",i.repository="git+https://github.com/noflo/noflo-ui.git";const s=document.createElement("button");s.id="flowhub_debug_url",s.innerText="Debug in Flowhub";const a="https://app.flowhub.io#runtime/endpoint?"+encodeURIComponent(`protocol=opener&address=${window.location.href}&id=${i.id}`);s.setAttribute("href",a),document.body.appendChild(s),o.opener(i,s),e()})};window.nofloStarted=!1;let t=function(e){n.graph.loadJSON(i,(t,r)=>{t?e(t):n.createNetwork(r,(t,r)=>{t?e(t):(r.on("process-error",e=>{"function"==typeof console.error?console.error(e.error):console.log(e.error)}),e())})})};"true"===String(localStorage.getItem("flowhub-debug"))&&(t=e),t(e=>{if(e)throw e;document.body.classList.remove("loading"),window.nofloStarted=!0,setTimeout(()=>{const e=document.getElementById("loading");document.body.removeChild(e)},400)})})},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,u,d,h,f,m,g=r(11);p=g.EventEmitter,d=r(32),f=r(181),u=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,l=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=l.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S,C;if(v=this.getNode(e)){for(this.checkTransactionStart(),C=[],n=0,l=(x=this.edges).length;n<l;n++)(t=x[n]).from.node!==v.id&&t.to.node!==v.id||C.push(t);for(s=0,p=C.length;s<p;s++)t=C[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(C=[],a=0,u=(k=this.initializers).length;a<u;a++)(i=k[a]).to.node===v.id&&C.push(i);for(c=0,d=C.length;c<d;c++)i=C[c],this.removeInitial(i.to.node,i.to.port);for(w in C=[],E=this.inports)E[w].process===e&&C.push(w);for(g=0,h=C.length;g<h;g++)w=C[g],this.removeInport(w);for(w in C=[],_=this.outports)_[w].process===e&&C.push(w);for(y=0,f=C.length;y<f;y++)w=C[y],this.removeOutport(w);for(b=0,m=(S=this.groups).length;b<m;b++)(r=S[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,l=(m=this.edges).length;o<l;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,u=(b=this.groups).length;c<u;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,l,p,u,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,l=(d=this.edges).length;i<l;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,u=m.length;c<u;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],l=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):l.push(r);for(this.initializers=l,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,u=(m=this.initializers).length;c<u;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(l=0,d=(g=this.edges).length;l<d;l++)o=g[l],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)S=v[g],a.properties[g]=S;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(x=this.groups).length;o<p;o++)n={name:(r=x[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,u=(k=this.nodes).length;s<u;s++)f=k[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(E=this.edges).length;c<d;c++)e={src:{process:(t=E[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(l=0,h=(_=this.initializers).length;l<h;l++)i=_[l],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(12).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=u,t.createGraph=function(e,t){return new u(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,l,p,d,h,f,m,g,y,v,b,w,x,k,E,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(m in"string"==typeof e&&(e=JSON.parse(e)),e.properties||(e.properties={}),e.processes||(e.processes={}),e.connections||(e.connections=[]),r=e.caseSensitive||!1,(i=new u(e.properties.name,{caseSensitive:r})).startTransaction("loadJSON",_),f={},y=e.properties)E=y[m],"name"!==m&&(f[m]=E);for(c in i.setProperties(f),v=e.processes)(o=v[c]).metadata||(o.metadata={}),i.addNode(c,o.component,o.metadata);for(a=0,p=(b=e.connections).length;a<p;a++)_=(n=b[a]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?i.addEdge(n.src.process,i.getPortName(n.src.port),n.tgt.process,i.getPortName(n.tgt.port),_):i.addEdgeIndex(n.src.process,i.getPortName(n.src.port),n.src.index,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,_):"number"==typeof n.tgt.index?i.addInitialIndex(n.data,n.tgt.process,i.getPortName(n.tgt.port),n.tgt.index,_):i.addInitial(n.data,n.tgt.process,i.getPortName(n.tgt.port),_);if(e.inports)for(g in w=e.inports)h=w[g],i.addInport(g,h.process,i.getPortName(h.port),h.metadata);if(e.outports)for(g in x=e.outports)h=x[g],i.addOutport(g,h.process,i.getPortName(h.port),h.metadata);if(e.groups)for(l=0,d=(k=e.groups).length;l<d;l++)s=k[l],i.addGroup(s.name,s.nodes,s.metadata||{});return i.endTransaction("loadJSON"),t(null,i)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(47).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(12).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,l,p,u,h,f,m,g,y,v,b,w,x;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,l=(v=d(e.initializers).reverse()).length;i<l;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(x=[],a=0,u=(w=d(e.nodes).reverse()).length;a<u;a++)h=w[a],x.push(e.removeNode(h.id));return x},h=function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,g,y,v,b,w,x,k,E;for(m(e),o=0,l=(y=t.nodes).length;o<l;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,u=(b=t.initializers).length;a<u;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in x=t.outports)f=x[g],e.addOutport(g,f.process,f.port,f.metadata);for(E=[],c=0,d=(k=t.groups).length;c<d;c++)n=k[c],E.push(e.addGroup(n.name,n.nodes,n.metadata));return E},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=l(e),s=n[0],a=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),p=0,u=a>0?s-4:s;for(r=0;r<u;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[p++]=t>>16&255,c[p++]=t>>8&255,c[p++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[p++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[p++]=t>>8&255,c[p++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(p(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function p(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,l=c>>1,p=-7,u=r?o-1:0,d=r?-1:1,h=e[t+u];for(u+=d,i=h&(1<<-p)-1,h>>=-p,p+=a;p>0;i=256*i+e[t+u],u+=d,p-=8);for(s=i&(1<<-p)-1,i>>=-p,p+=n;p>0;s=256*s+e[t+u],u+=d,p-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),i-=l}return(h?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,l=8*i-o-1,p=(1<<l)-1,u=p>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=p):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+u>=1?d/c:d*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=p?(a=0,s=p):s+u>=1?(a=(t*c-1)*Math.pow(2,o),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,o),s=0));o>=8;e[r+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;e[r+h]=255&s,h+=f,s/=256,l-=8);e[r+h-f]|=128*m}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(6))},function(e,t,r){e.exports=function(){"use strict";function e(t,r,n,o){this.message=t,this.expected=r,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,e)}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),{SyntaxError:e,parse:function(t){var n,o,i=arguments.length>1?arguments[1]:{},s=this,a={},c={start:pr},l=pr,p=function(){return s.getResult()},u="INPORT=",d={type:"literal",value:"INPORT=",description:'"INPORT="'},h=".",f={type:"literal",value:".",description:'"."'},m=":",g={type:"literal",value:":",description:'":"'},y=function(e,t,r){return s.registerInports(e,t,r)},v="OUTPORT=",b={type:"literal",value:"OUTPORT=",description:'"OUTPORT="'},w=function(e,t,r){return s.registerOutports(e,t,r)},x="DEFAULT_INPORT=",k={type:"literal",value:"DEFAULT_INPORT=",description:'"DEFAULT_INPORT="'},E=function(e){vn=e},_="DEFAULT_OUTPORT=",S={type:"literal",value:"DEFAULT_OUTPORT=",description:'"DEFAULT_OUTPORT="'},C=function(e){bn=e},P=function(e){return s.registerAnnotation(e[0],e[1])},A=function(e){return s.registerEdges(e)},O=",",T={type:"literal",value:",",description:'","'},D=/^[\n\r\u2028\u2029]/,N={type:"class",value:"[\\n\\r\\u2028\\u2029]",description:"[\\n\\r\\u2028\\u2029]"},j="#",I={type:"literal",value:"#",description:'"#"'},R="->",M={type:"literal",value:"->",description:'"->"'},L=function(e,t){return[e,t]},F=function(e,t,r){return[{tgt:Sn(t,e)},{src:Cn(t,r)}]},G=function(e,t){return{src:Cn(e,t)}},B=function(e,t){return{tgt:Sn(t,e)}},z="'",U={type:"literal",value:"'",description:'"\'"'},q=function(e){return{data:e.join("")}},$=function(e){return{data:e}},H=function(e){return e},V=/^[a-zA-Z_]/,W={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},J=/^[a-zA-Z0-9_\-]/,X={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},Y=function(e){return En(e)},K=function(e,t){return s.addNode(e,t),e},Q=function(e){return s.addAnonymousNode(e,ir().start.offset)},Z="(",ee={type:"literal",value:"(",description:'"("'},te=/^[a-zA-Z\/\-0-9_]/,re={type:"class",value:"[a-zA-Z/\\-0-9_]",description:"[a-zA-Z/\\-0-9_]"},ne=")",oe={type:"literal",value:")",description:'")"'},ie=function(e,t){var r={};return r.comp=e?e.join(""):"",t&&(r.meta=t.join("").split(",")),r},se=/^[a-zA-Z\/=_,0-9]/,ae={type:"class",value:"[a-zA-Z/=_,0-9]",description:"[a-zA-Z/=_,0-9]"},ce=function(e){return e},le="@",pe={type:"literal",value:"@",description:'"@"'},ue=/^[a-zA-Z0-9\-_]/,de={type:"class",value:"[a-zA-Z0-9\\-_]",description:"[a-zA-Z0-9\\-_]"},he=/^[a-zA-Z0-9\-_ .]/,fe={type:"class",value:"[a-zA-Z0-9\\-_ \\.]",description:"[a-zA-Z0-9\\-_ \\.]"},me=function(e,t){return[e.join(""),t.join("")]},ge=function(e,t){return{port:i.caseSensitive?e:e.toLowerCase(),index:null!=t?t:void 0}},ye=function(e){return e},ve=/^[a-zA-Z.0-9_]/,be={type:"class",value:"[a-zA-Z.0-9_]",description:"[a-zA-Z.0-9_]"},we=function(e){return En(e)},xe="[",ke={type:"literal",value:"[",description:'"["'},Ee=/^[0-9]/,_e={type:"class",value:"[0-9]",description:"[0-9]"},Se="]",Ce={type:"literal",value:"]",description:'"]"'},Pe=function(e){return parseInt(e.join(""))},Ae=/^[^\n\r\u2028\u2029]/,Oe={type:"class",value:"[^\\n\\r\\u2028\\u2029]",description:"[^\\n\\r\\u2028\\u2029]"},Te=/^[\\]/,De={type:"class",value:"[\\\\]",description:"[\\\\]"},Ne=/^[']/,je={type:"class",value:"[']",description:"[']"},Ie=function(){return"'"},Re=/^[^']/,Me={type:"class",value:"[^']",description:"[^']"},Le=" ",Fe={type:"literal",value:" ",description:'" "'},Ge=function(e){return e},Be="{",ze={type:"literal",value:"{",description:'"{"'},Ue="}",qe={type:"literal",value:"}",description:'"}"'},$e={type:"other",description:"whitespace"},He=/^[ \t\n\r]/,Ve={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},We="false",Je={type:"literal",value:"false",description:'"false"'},Xe=function(){return!1},Ye="null",Ke={type:"literal",value:"null",description:'"null"'},Qe=function(){return null},Ze="true",et={type:"literal",value:"true",description:'"true"'},tt=function(){return!0},rt=function(e,t){return t},nt=function(e,t){var r,n={};for(n[e.name]=e.value,r=0;r<t.length;r++)n[t[r].name]=t[r].value;return n},ot=function(e){return null!==e?e:{}},it=function(e,t){return{name:e,value:t}},st=function(e,t){return t},at=function(e,t){return[e].concat(t)},ct=function(e){return null!==e?e:[]},lt={type:"other",description:"number"},pt=function(){return parseFloat(or())},ut=/^[1-9]/,dt={type:"class",value:"[1-9]",description:"[1-9]"},ht=/^[eE]/,ft={type:"class",value:"[eE]",description:"[eE]"},mt="-",gt={type:"literal",value:"-",description:'"-"'},yt="+",vt={type:"literal",value:"+",description:'"+"'},bt="0",wt={type:"literal",value:"0",description:'"0"'},xt={type:"other",description:"string"},kt=function(e){return e.join("")},Et='"',_t={type:"literal",value:'"',description:'"\\""'},St="\\",Ct={type:"literal",value:"\\",description:'"\\\\"'},Pt="/",At={type:"literal",value:"/",description:'"/"'},Ot="b",Tt={type:"literal",value:"b",description:'"b"'},Dt=function(){return"\b"},Nt="f",jt={type:"literal",value:"f",description:'"f"'},It=function(){return"\f"},Rt="n",Mt={type:"literal",value:"n",description:'"n"'},Lt=function(){return"\n"},Ft="r",Gt={type:"literal",value:"r",description:'"r"'},Bt=function(){return"\r"},zt="t",Ut={type:"literal",value:"t",description:'"t"'},qt=function(){return"\t"},$t="u",Ht={type:"literal",value:"u",description:'"u"'},Vt=function(e){return String.fromCharCode(parseInt(e,16))},Wt=function(e){return e},Jt=/^[^\0-\x1F"\\]/,Xt={type:"class",value:"[^\\0-\\x1F\\x22\\x5C]",description:"[^\\0-\\x1F\\x22\\x5C]"},Yt=/^[0-9a-f]/i,Kt={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},Qt=0,Zt=0,er=[{line:1,column:1,seenCR:!1}],tr=0,rr=[],nr=0;if("startRule"in i){if(!(i.startRule in c))throw new Error("Can't start parsing from rule \""+i.startRule+'".');l=c[i.startRule]}function or(){return t.substring(Zt,Qt)}function ir(){return ar(Zt,Qt)}function sr(e){var r,n,o=er[e];if(o)return o;for(r=e-1;!er[r];)r--;for(o={line:(o=er[r]).line,column:o.column,seenCR:o.seenCR};r<e;)"\n"===(n=t.charAt(r))?(o.seenCR||o.line++,o.column=1,o.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(o.line++,o.column=1,o.seenCR=!0):(o.column++,o.seenCR=!1),r++;return er[e]=o,o}function ar(e,t){var r=sr(e),n=sr(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function cr(e){Qt<tr||(Qt>tr&&(tr=Qt,rr=[]),rr.push(e))}function lr(t,r,n,o){return null!==r&&function(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(r),new e(null!==t?t:function(e,t){var r,n=new Array(e.length);for(r=0;r<e.length;r++)n[r]=e[r].description;return"Expected "+(e.length>1?n.slice(0,-1).join(", ")+" or "+n[e.length-1]:n[0])+" but "+(t?'"'+function(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+t(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+t(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+t(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+t(e)}))}(t)+'"':"end of input")+" found."}(r,n),r,n,o)}function pr(){var e,t,r;for(e=Qt,t=[],r=ur();r!==a;)t.push(r),r=ur();return t!==a&&(Zt=e,t=p()),e=t}function ur(){var e,r,n,o,i,s,c,l,p;return e=Qt,(r=Lr())!==a?(t.substr(Qt,7)===u?(n=u,Qt+=7):(n=a,0===nr&&cr(d)),n!==a&&(o=kr())!==a?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=a,0===nr&&cr(f)),i!==a&&(s=jr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&cr(g)),c!==a&&(l=jr())!==a&&Lr()!==a?((p=dr())===a&&(p=null),p!==a?(Zt=e,e=r=y(o,s,l)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Lr())!==a?(t.substr(Qt,8)===v?(n=v,Qt+=8):(n=a,0===nr&&cr(b)),n!==a&&(o=kr())!==a?(46===t.charCodeAt(Qt)?(i=h,Qt++):(i=a,0===nr&&cr(f)),i!==a&&(s=jr())!==a?(58===t.charCodeAt(Qt)?(c=m,Qt++):(c=a,0===nr&&cr(g)),c!==a&&(l=jr())!==a&&Lr()!==a?((p=dr())===a&&(p=null),p!==a?(Zt=e,e=r=w(o,s,l)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Lr())!==a?(t.substr(Qt,15)===x?(n=x,Qt+=15):(n=a,0===nr&&cr(k)),n!==a&&(o=jr())!==a&&(i=Lr())!==a?((s=dr())===a&&(s=null),s!==a?(Zt=e,e=r=E(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Lr())!==a?(t.substr(Qt,16)===_?(n=_,Qt+=16):(n=a,0===nr&&cr(S)),n!==a&&(o=jr())!==a&&(i=Lr())!==a?((s=dr())===a&&(s=null),s!==a?(Zt=e,e=r=C(o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Or())!==a&&(n=hr())!==a?(Zt=e,e=r=P(r)):(Qt=e,e=a),e===a&&(e=Qt,(r=fr())!==a?((n=hr())===a&&(n=null),n!==a?e=r=[r,n]:(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=Qt,(r=Lr())!==a&&(n=hr())!==a?e=r=[r,n]:(Qt=e,e=a),e===a&&(e=Qt,(r=Lr())!==a&&(n=mr())!==a&&(o=Lr())!==a?((i=dr())===a&&(i=null),i!==a?(Zt=e,e=r=A(n)):(Qt=e,e=a)):(Qt=e,e=a)))))))),e}function dr(){var e,r,n,o,i;return e=Qt,(r=Lr())!==a?(44===t.charCodeAt(Qt)?(n=O,Qt++):(n=a,0===nr&&cr(T)),n===a&&(n=null),n!==a?((o=fr())===a&&(o=null),o!==a?((i=hr())===a&&(i=null),i!==a?e=r=[r,n,o,i]:(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),e}function hr(){var e;return D.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(N)),e}function fr(){var e,r,n,o,i;if(e=Qt,(r=Lr())!==a)if(35===t.charCodeAt(Qt)?(n=j,Qt++):(n=a,0===nr&&cr(I)),n!==a){for(o=[],i=Rr();i!==a;)o.push(i),i=Rr();o!==a?e=r=[r,n,o]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}function mr(){var e,r,n,o;return e=Qt,(r=gr())!==a&&Lr()!==a?(t.substr(Qt,2)===R?(n=R,Qt+=2):(n=a,0===nr&&cr(M)),n!==a&&Lr()!==a&&(o=mr())!==a?(Zt=e,e=r=L(r,o)):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(e=yr()),e}function gr(){var e;return(e=vr())===a&&(e=br())===a&&(e=xr()),e}function yr(){var e;return(e=wr())===a&&(e=vr()),e}function vr(){var e,t,r,n;return e=Qt,(t=Dr())!==a&&(r=kr())!==a&&(n=Nr())!==a?(Zt=e,e=t=F(t,r,n)):(Qt=e,e=a),e===a&&(e=Qt,(t=Dr())===a&&(t=null),t!==a&&(r=Cr())!==a?((n=Nr())===a&&(n=null),n!==a?(Zt=e,e=t=F(t,r,n)):(Qt=e,e=a)):(Qt=e,e=a)),e}function br(){var e,t,r;return e=Qt,(t=kr())!==a?((r=Nr())===a&&(r=null),r!==a?(Zt=e,e=t=G(t,r)):(Qt=e,e=a)):(Qt=e,e=a),e}function wr(){var e,t,r;return e=Qt,(t=Dr())===a&&(t=null),t!==a&&(r=kr())!==a?(Zt=e,e=t=B(t,r)):(Qt=e,e=a),e}function xr(){var e,r,n,o;if(e=Qt,39===t.charCodeAt(Qt)?(r=z,Qt++):(r=a,0===nr&&cr(U)),r!==a){for(n=[],o=Mr();o!==a;)n.push(o),o=Mr();n!==a?(39===t.charCodeAt(Qt)?(o=z,Qt++):(o=a,0===nr&&cr(U)),o!==a?(Zt=e,e=r=q(n)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e===a&&(e=Qt,(r=Gr())!==a&&(Zt=e,r=$(r)),e=r),e}function kr(){var e,t;return e=Qt,(t=_r())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=Er())!==a&&(Zt=e,t=H(t)),(e=t)===a&&(e=Qt,(t=Sr())!==a&&(Zt=e,t=H(t)),e=t)),e}function Er(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(W)),n!==a){for(o=[],J.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(X));i!==a;)o.push(i),J.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(X));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=Y(r)),e=r}function _r(){var e,t,r;return e=Qt,(t=Er())!==a&&(r=Pr())!==a?(Zt=e,e=t=K(t,r)):(Qt=e,e=a),e}function Sr(){var e,t;return e=Qt,(t=Pr())!==a&&(Zt=e,t=Q(t)),e=t}function Cr(){var e;return(e=_r())===a&&(e=Sr()),e}function Pr(){var e,r,n,o,i;if(e=Qt,40===t.charCodeAt(Qt)?(r=Z,Qt++):(r=a,0===nr&&cr(ee)),r!==a){for(n=[],te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(re));o!==a;)n.push(o),te.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(re));n===a&&(n=null),n!==a?((o=Ar())===a&&(o=null),o!==a?(41===t.charCodeAt(Qt)?(i=ne,Qt++):(i=a,0===nr&&cr(oe)),i!==a?(Zt=e,e=r=ie(n,o)):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Ar(){var e,r,n,o;if(e=Qt,58===t.charCodeAt(Qt)?(r=m,Qt++):(r=a,0===nr&&cr(g)),r!==a){if(n=[],se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ae)),o!==a)for(;o!==a;)n.push(o),se.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(ae));else n=a;n!==a?(Zt=e,e=r=ce(n)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Or(){var e,r,n,o,i,s,c;if(e=Qt,35===t.charCodeAt(Qt)?(r=j,Qt++):(r=a,0===nr&&cr(I)),r!==a)if(Fr()!==a)if(64===t.charCodeAt(Qt)?(n=le,Qt++):(n=a,0===nr&&cr(pe)),n!==a){if(o=[],ue.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(de)),i!==a)for(;i!==a;)o.push(i),ue.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(de));else o=a;if(o!==a)if((i=Fr())!==a){if(s=[],he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&cr(fe)),c!==a)for(;c!==a;)s.push(c),he.test(t.charAt(Qt))?(c=t.charAt(Qt),Qt++):(c=a,0===nr&&cr(fe));else s=a;s!==a?(Zt=e,e=r=me(o,s)):(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a}else Qt=e,e=a;else Qt=e,e=a;else Qt=e,e=a;return e}function Tr(){var e,t,r;return e=Qt,(t=jr())!==a?((r=Ir())===a&&(r=null),r!==a?(Zt=e,e=t=ge(t,r)):(Qt=e,e=a)):(Qt=e,e=a),e}function Dr(){var e,t;return e=Qt,(t=Tr())!==a&&Fr()!==a?(Zt=e,e=t=ye(t)):(Qt=e,e=a),e}function Nr(){var e,t;return e=Qt,Fr()!==a&&(t=Tr())!==a?(Zt=e,e=ye(t)):(Qt=e,e=a),e}function jr(){var e,r,n,o,i;if(e=Qt,r=Qt,V.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(W)),n!==a){for(o=[],ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(be));i!==a;)o.push(i),ve.test(t.charAt(Qt))?(i=t.charAt(Qt),Qt++):(i=a,0===nr&&cr(be));o!==a?r=n=[n,o]:(Qt=r,r=a)}else Qt=r,r=a;return r!==a&&(Zt=e,r=we(r)),e=r}function Ir(){var e,r,n,o;if(e=Qt,91===t.charCodeAt(Qt)?(r=xe,Qt++):(r=a,0===nr&&cr(ke)),r!==a){if(n=[],Ee.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(_e)),o!==a)for(;o!==a;)n.push(o),Ee.test(t.charAt(Qt))?(o=t.charAt(Qt),Qt++):(o=a,0===nr&&cr(_e));else n=a;n!==a?(93===t.charCodeAt(Qt)?(o=Se,Qt++):(o=a,0===nr&&cr(Ce)),o!==a?(Zt=e,e=r=Pe(n)):(Qt=e,e=a)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Rr(){var e;return Ae.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Oe)),e}function Mr(){var e,r,n;return e=Qt,Te.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(De)),r!==a?(Ne.test(t.charAt(Qt))?(n=t.charAt(Qt),Qt++):(n=a,0===nr&&cr(je)),n!==a?(Zt=e,e=r=Ie()):(Qt=e,e=a)):(Qt=e,e=a),e===a&&(Re.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Me))),e}function Lr(){var e,r;for(e=[],32===t.charCodeAt(Qt)?(r=Le,Qt++):(r=a,0===nr&&cr(Fe));r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Le,Qt++):(r=a,0===nr&&cr(Fe));return e===a&&(e=null),e}function Fr(){var e,r;if(e=[],32===t.charCodeAt(Qt)?(r=Le,Qt++):(r=a,0===nr&&cr(Fe)),r!==a)for(;r!==a;)e.push(r),32===t.charCodeAt(Qt)?(r=Le,Qt++):(r=a,0===nr&&cr(Fe));else e=a;return e}function Gr(){var e,t;return e=Qt,Vr()!==a&&(t=Wr())!==a&&Vr()!==a?(Zt=e,e=Ge(t)):(Qt=e,e=a),e}function Br(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(91===t.charCodeAt(Qt)?(n=xe,Qt++):(n=a,0===nr&&cr(ke)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function zr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(123===t.charCodeAt(Qt)?(n=Be,Qt++):(n=a,0===nr&&cr(ze)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Ur(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(93===t.charCodeAt(Qt)?(n=Se,Qt++):(n=a,0===nr&&cr(Ce)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function qr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(125===t.charCodeAt(Qt)?(n=Ue,Qt++):(n=a,0===nr&&cr(qe)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function $r(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(58===t.charCodeAt(Qt)?(n=m,Qt++):(n=a,0===nr&&cr(g)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Hr(){var e,r,n,o;return e=Qt,(r=Vr())!==a?(44===t.charCodeAt(Qt)?(n=O,Qt++):(n=a,0===nr&&cr(T)),n!==a&&(o=Vr())!==a?e=r=[r,n,o]:(Qt=e,e=a)):(Qt=e,e=a),e}function Vr(){var e,r;for(nr++,e=[],He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(Ve));r!==a;)e.push(r),He.test(t.charAt(Qt))?(r=t.charAt(Qt),Qt++):(r=a,0===nr&&cr(Ve));return nr--,e===a&&(r=a,0===nr&&cr($e)),e}function Wr(){var e;return(e=Jr())===a&&(e=Xr())===a&&(e=Yr())===a&&(e=Kr())===a&&(e=Zr())===a&&(e=en())===a&&(e=un()),e}function Jr(){var e,r;return e=Qt,t.substr(Qt,5)===We?(r=We,Qt+=5):(r=a,0===nr&&cr(Je)),r!==a&&(Zt=e,r=Xe()),e=r}function Xr(){var e,r;return e=Qt,t.substr(Qt,4)===Ye?(r=Ye,Qt+=4):(r=a,0===nr&&cr(Ke)),r!==a&&(Zt=e,r=Qe()),e=r}function Yr(){var e,r;return e=Qt,t.substr(Qt,4)===Ze?(r=Ze,Qt+=4):(r=a,0===nr&&cr(et)),r!==a&&(Zt=e,r=tt()),e=r}function Kr(){var e,t,r,n,o,i;if(e=Qt,zr()!==a){if(t=Qt,(r=Qr())!==a){for(n=[],o=Qt,Hr()!==a&&(i=Qr())!==a?(Zt=o,o=rt(r,i)):(Qt=o,o=a);o!==a;)n.push(o),o=Qt,Hr()!==a&&(i=Qr())!==a?(Zt=o,o=rt(r,i)):(Qt=o,o=a);n!==a?(Zt=t,t=r=nt(r,n)):(Qt=t,t=a)}else Qt=t,t=a;t===a&&(t=null),t!==a&&(r=qr())!==a?(Zt=e,e=ot(t)):(Qt=e,e=a)}else Qt=e,e=a;return e}function Qr(){var e,t,r;return e=Qt,(t=un())!==a&&$r()!==a&&(r=Wr())!==a?(Zt=e,e=t=it(t,r)):(Qt=e,e=a),e}function Zr(){var e,t,r,n,o,i;if(e=Qt,Br()!==a){if(t=Qt,(r=Wr())!==a){for(n=[],o=Qt,Hr()!==a&&(i=Wr())!==a?(Zt=o,o=st(r,i)):(Qt=o,o=a);o!==a;)n.push(o),o=Qt,Hr()!==a&&(i=Wr())!==a?(Zt=o,o=st(r,i)):(Qt=o,o=a);n!==a?(Zt=t,t=r=at(r,n)):(Qt=t,t=a)}else Qt=t,t=a;t===a&&(t=null),t!==a&&(r=Ur())!==a?(Zt=e,e=ct(t)):(Qt=e,e=a)}else Qt=e,e=a;return e}function en(){var e,t,r,n;return nr++,e=Qt,(t=cn())===a&&(t=null),t!==a&&an()!==a?((r=sn())===a&&(r=null),r!==a?((n=on())===a&&(n=null),n!==a?(Zt=e,e=t=pt()):(Qt=e,e=a)):(Qt=e,e=a)):(Qt=e,e=a),nr--,e===a&&(t=a,0===nr&&cr(lt)),e}function tn(){var e;return 46===t.charCodeAt(Qt)?(e=h,Qt++):(e=a,0===nr&&cr(f)),e}function rn(){var e;return ut.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(dt)),e}function nn(){var e;return ht.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(ft)),e}function on(){var e,t,r,n,o;if(e=Qt,(t=nn())!==a)if((r=cn())===a&&(r=ln()),r===a&&(r=null),r!==a){if(n=[],(o=gn())!==a)for(;o!==a;)n.push(o),o=gn();else n=a;n!==a?e=t=[t,r,n]:(Qt=e,e=a)}else Qt=e,e=a;else Qt=e,e=a;return e}function sn(){var e,t,r,n;if(e=Qt,(t=tn())!==a){if(r=[],(n=gn())!==a)for(;n!==a;)r.push(n),n=gn();else r=a;r!==a?e=t=[t,r]:(Qt=e,e=a)}else Qt=e,e=a;return e}function an(){var e,t,r,n;if((e=pn())===a)if(e=Qt,(t=rn())!==a){for(r=[],n=gn();n!==a;)r.push(n),n=gn();r!==a?e=t=[t,r]:(Qt=e,e=a)}else Qt=e,e=a;return e}function cn(){var e;return 45===t.charCodeAt(Qt)?(e=mt,Qt++):(e=a,0===nr&&cr(gt)),e}function ln(){var e;return 43===t.charCodeAt(Qt)?(e=yt,Qt++):(e=a,0===nr&&cr(vt)),e}function pn(){var e;return 48===t.charCodeAt(Qt)?(e=bt,Qt++):(e=a,0===nr&&cr(wt)),e}function un(){var e,t,r;if(nr++,e=Qt,fn()!==a){for(t=[],r=dn();r!==a;)t.push(r),r=dn();t!==a&&(r=fn())!==a?(Zt=e,e=kt(t)):(Qt=e,e=a)}else Qt=e,e=a;return nr--,e===a&&(a,0===nr&&cr(xt)),e}function dn(){var e,r,n,o,i,s,c,l,p;return(e=mn())===a&&(e=Qt,hn()!==a?(34===t.charCodeAt(Qt)?(r=Et,Qt++):(r=a,0===nr&&cr(_t)),r===a&&(92===t.charCodeAt(Qt)?(r=St,Qt++):(r=a,0===nr&&cr(Ct)),r===a&&(47===t.charCodeAt(Qt)?(r=Pt,Qt++):(r=a,0===nr&&cr(At)),r===a&&(r=Qt,98===t.charCodeAt(Qt)?(n=Ot,Qt++):(n=a,0===nr&&cr(Tt)),n!==a&&(Zt=r,n=Dt()),(r=n)===a&&(r=Qt,102===t.charCodeAt(Qt)?(n=Nt,Qt++):(n=a,0===nr&&cr(jt)),n!==a&&(Zt=r,n=It()),(r=n)===a&&(r=Qt,110===t.charCodeAt(Qt)?(n=Rt,Qt++):(n=a,0===nr&&cr(Mt)),n!==a&&(Zt=r,n=Lt()),(r=n)===a&&(r=Qt,114===t.charCodeAt(Qt)?(n=Ft,Qt++):(n=a,0===nr&&cr(Gt)),n!==a&&(Zt=r,n=Bt()),(r=n)===a&&(r=Qt,116===t.charCodeAt(Qt)?(n=zt,Qt++):(n=a,0===nr&&cr(Ut)),n!==a&&(Zt=r,n=qt()),(r=n)===a&&(r=Qt,117===t.charCodeAt(Qt)?(n=$t,Qt++):(n=a,0===nr&&cr(Ht)),n!==a?(o=Qt,i=Qt,(s=yn())!==a&&(c=yn())!==a&&(l=yn())!==a&&(p=yn())!==a?i=s=[s,c,l,p]:(Qt=i,i=a),(o=i!==a?t.substring(o,Qt):i)!==a?(Zt=r,r=n=Vt(o)):(Qt=r,r=a)):(Qt=r,r=a))))))))),r!==a?(Zt=e,e=Wt(r)):(Qt=e,e=a)):(Qt=e,e=a)),e}function hn(){var e;return 92===t.charCodeAt(Qt)?(e=St,Qt++):(e=a,0===nr&&cr(Ct)),e}function fn(){var e;return 34===t.charCodeAt(Qt)?(e=Et,Qt++):(e=a,0===nr&&cr(_t)),e}function mn(){var e;return Jt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Xt)),e}function gn(){var e;return Ee.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(_e)),e}function yn(){var e;return Yt.test(t.charAt(Qt))?(e=t.charAt(Qt),Qt++):(e=a,0===nr&&cr(Kt)),e}var vn="IN",bn="OUT";delete(s=this).properties,delete s.inports,delete s.outports,delete s.groups,s.edges=[],o={},s.validateContents=function(e,t){e.processes&&Object.keys(e.processes).forEach((function(t){if(!e.processes[t].component)throw new Error('Node "'+t+'" does not have a component defined')})),e.inports&&Object.keys(e.inports).forEach((function(t){var r=e.inports[t];if(!e.processes[r.process])throw new Error('Inport "'+t+'" is connected to an undefined target node "'+r.process+'"')})),e.outports&&Object.keys(e.outports).forEach((function(t){var r=e.outports[t];if(!e.processes[r.process])throw new Error('Outport "'+t+'" is connected to an undefined source node "'+r.process+'"')})),e.connections&&e.connections.forEach((function(t){if(t.tgt&&!e.processes[t.tgt.process]){if(t.data)throw new Error('IIP containing "'+t.data+'" is connected to an undefined target node "'+t.tgt.process+'"');throw new Error('Edge from "'+t.src.process+'" port "'+t.src.port+'" is connected to an undefined target node "'+t.tgt.process+'"')}if(t.src&&!e.processes[t.src.process])throw new Error('Edge to "'+t.tgt.process+'" port "'+t.tgt.port+'" is connected to an undefined source node "'+t.src.process+'"')}))},s.addNode=function(e,t){if(o[e]||(o[e]={}),t.comp&&(o[e].component=t.comp),t.meta){for(var r={},n=0;n<t.meta.length;n++){var i=t.meta[n].split("=");1===i.length&&(i=["routes",i[0]]);var s=i[0],a=i[1];"x"!==s&&"y"!==s||(a=parseFloat(a)),r[s]=a}o[e].metadata=r}};var wn={},xn={};s.addAnonymousNode=function(e,t){if(!xn[t]){var r=e.comp.replace(/[^a-zA-Z0-9]+/,"_");wn[r]=(wn[r]||0)+1,xn[t]="_"+r+"_"+wn[r],this.addNode(xn[t],e)}return xn[t]},s.getResult=function(){var e={inports:s.inports||{},outports:s.outports||{},groups:s.groups||[],processes:o||{},connections:s.processEdges()};s.properties&&(e.properties=s.properties),e.caseSensitive=i.caseSensitive||!1;var t=s.validateSchema;if(void 0!==i.validateSchema&&(t=i.validateSchema),t){if(void 0===n)var n=r(104);var a=r(183),c=n.validateMultiple(e,a);if(!c.valid)throw new Error("fbp: Did not validate againt graph schema:\n"+JSON.stringify(c.errors,null,2))}return(void 0===i.validateContents||i.validateContents)&&s.validateContents(e),e};var kn=function(e,t){for(var r=-1,n=e?e.length:0,o=[];++r<n;){var i=e[r];i instanceof Array?Array.prototype.push.apply(o,t?i:kn(i)):o.push(i)}return o};function En(e){return e[0]+e[1].join("")}function _n(e,t,r){i.caseSensitive||(r=r.toLowerCase());var n={process:e,port:t?t.port:r};return t&&null!=t.index&&(n.index=t.index),n}function Sn(e,t){return _n(e,t,vn)}function Cn(e,t){return _n(e,t,bn)}if(s.registerAnnotation=function(e,t){if(s.properties||(s.properties={}),"runtime"===e)return s.properties.environment={},void(s.properties.environment.type=t);s.properties[e]=t},s.registerInports=function(e,t,r){s.inports||(s.inports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.inports[r]={process:e,port:t}},s.registerOutports=function(e,t,r){s.outports||(s.outports={}),i.caseSensitive||(r=r.toLowerCase(),t=t.toLowerCase()),s.outports[r]={process:e,port:t}},s.registerEdges=function(e){Array.isArray(e)&&e.forEach((function(e,t){s.edges.push(e)}))},s.processEdges=function(){var e,t;e=kn(s.edges),t=[];for(var r=1;r<e.length;r+=1)("src"in e[r-1]||"data"in e[r-1])&&"tgt"in e[r]&&(e[r-1].tgt=e[r].tgt,t.push(e[r-1]),r++);return t},(n=l())!==a&&Qt===t.length)return n;throw n!==a&&Qt<t.length&&cr({type:"end",description:"end of input"}),lr(null,rr,tr<t.length?t.charAt(tr):null,tr<t.length?ar(tr,tr+1):ar(tr,tr))}}}()},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-04/schema","id":"graph.json","title":"FBP graph","description":"A graph of FBP processes and connections between them.\\nThis is the primary way of specifying FBP programs.\\n","name":"graph","type":"object","additionalProperties":false,"properties":{"caseSensitive":{"type":"boolean","description":"Whether the graph port identifiers should be treated as case-sensitive"},"properties":{"type":"object","description":"User-defined properties attached to the graph.","additionalProperties":true,"properties":{"name":{"type":"string","description":"Name of the graph"},"environment":{"type":"object","description":"Information about the execution environment for the graph","additionalProperties":true,"required":["type"],"properties":{"type":{"type":"string","description":"Runtime type the graph is for","example":"noflo-nodejs"},"content":{"type":"string","description":"HTML fixture for browser-based graphs"}}},"description":{"type":"string","description":"Graph description"},"icon":{"type":"string","description":"Name of the icon that can be used for depicting the graph"}}},"inports":{"type":["object","undefined"],"description":"Exported inports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph inport"},"y":{"type":"integer","description":"Y coordinate of a graph inport"}}}}}}},"outports":{"type":["object","undefined"],"description":"Exported outports of the graph","additionalProperties":true,"patternProperties":{"[a-z0-9]+":{"type":"object","properties":{"process":{"type":"string"},"port":{"type":"string"},"metadata":{"type":"object","required":[],"additionalProperties":true,"properties":{"x":{"type":"integer","description":"X coordinate of a graph outport"},"y":{"type":"integer","description":"Y coordinate of a graph outport"}}}}}}},"groups":{"type":"array","description":"List of groups of processes","items":{"type":"object","additionalProperties":false,"properties":{"name":{"type":"string"},"nodes":{"type":"array","items":{"type":"string"}},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"description":{"type":"string"}}}}}},"processes":{"type":"object","description":"The processes of this graph.\\nEach process is an instance of a component.\\n","additionalProperties":false,"patternProperties":{"[a-zA-Z0-9_]+":{"type":"object","properties":{"component":{"type":"string"},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"x":{"type":"integer","description":"X coordinate of a graph node"},"y":{"type":"integer","description":"Y coordinate of a graph node"}}}}}}},"connections":{"type":"array","description":"Connections of the graph.\\nA connection either connects ports of two processes, or specifices an IIP as initial input packet to a port.\\n","items":{"type":"object","additionalProperties":false,"properties":{"src":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"tgt":{"type":"object","additionalProperties":false,"properties":{"process":{"type":"string"},"port":{"type":"string"},"index":{"type":"integer"}}},"data":{},"metadata":{"type":"object","additionalProperties":true,"required":[],"properties":{"route":{"type":"integer","description":"Route identifier of a graph edge"},"schema":{"type":"string","format":"uri","description":"JSON schema associated with a graph edge"},"secure":{"type":"boolean","description":"Whether edge data should be treated as secure"}}}}}}}}')},function(e,t){var r=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};e.exports=function(e,t){var n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S;for(p in null==t&&(t={}),c="string"==typeof e?JSON.parse(e):e,u=[],h="",i=function(e){return null!=c.processes[e].metadata&&(e=c.processes[e].metadata.label),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},o=function(e,t){return null!=t.process&&null!=c.processes[t.process].metadata?e=c.processes[t.process].metadata.label:null!=t.process&&(e=t.process),e.indexOf("/")>-1&&(e=e.split("/").pop()),e},c.properties&&(c.properties.environment&&c.properties.environment.type&&(h+="# @runtime "+c.properties.environment.type+"\n"),Object.keys(c.properties).forEach((function(e){if(e.match(/^[a-zA-Z0-9\-_]+$/)){var t=c.properties[e];"string"==typeof t&&t.match(/^[a-zA-Z0-9\-_\s\.]+$/)&&(h+="# @"+e+" "+t+"\n")}}))),m=c.inports)f=o(p,a=m[p]),p=c.caseSensitive?p:p.toUpperCase(),a.port=c.caseSensitive?a.port:a.port.toUpperCase(),h+="INPORT="+f+"."+a.port+":"+p+"\n";for(p in g=c.outports)f=o(p,d=g[p]),p=c.caseSensitive?p:p.toUpperCase(),d.port=c.caseSensitive?d.port:d.port.toUpperCase(),h+="OUTPORT="+f+"."+d.port+":"+p+"\n";for(h+="\n",s=0,l=(y=c.connections).length;s<l;s++)null!=(n=y[s]).data?(_=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),E=n.tgt.process,S=c.processes[E].component,k=i(E),r.call(u,S)<0&&(k+="("+S+")",u.push(S)),h+='"'+n.data+'" -> '+_+" "+k+"\n"):(w=c.caseSensitive?n.src.port:n.src.port.toUpperCase(),b=n.src.process,x=c.processes[b].component,v=i(b),r.call(u,x)<0&&(v+="("+x+")",u.push(x)),_=c.caseSensitive?n.tgt.port:n.tgt.port.toUpperCase(),E=n.tgt.process,S=c.processes[E].component,k=i(E),r.call(u,S)<0&&(k+="("+S+")",u.push(S)),h+=v+" "+w+" -> "+_+" "+k+"\n");return h}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},k=r(11);f=k.EventEmitter,b=r(32),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,l,p,u,h,f,m,g,v,b,w,x,k,E,_,S,C,P,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(k=s.graph.nodes).length;p<f;p++)x=k[p],s.appendCommand("addNode",x);for(h=0,m=(E=s.graph.edges).length;h<m;h++)a=E[h],s.appendCommand("addEdge",a);for(b=0,g=(_=s.graph.initializers).length;b<g;b++)l=_[b],s.appendCommand("addInitial",l);for(u in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),S=s.graph.inports)A=S[u],s.appendCommand("addInport",{name:u,port:A});for(u in C=s.graph.outports)A=C[u],s.appendCommand("addOutport",{name:u,port:A});for(w=0,v=(P=s.graph.groups).length;w<v;w++)c=P[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(x(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(x(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(l=o=p=this.currentRevision+1,u=e;p<=u?o<=u:o>=u;l=p<=u?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(l)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(l=a=this.currentRevision,h=e+1;a>=h;l=a+=-1)for(n=c=(t=this.store.fetchTransaction(l)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(a=[],c=o=l=e|=0,p=t|=this.store.lastRevision;l<=p?o<p:o>p;c=l<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,l;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(l=this.store.fetchTransaction(a)).length;i<s;i++)n=l[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(12).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t,r){var n=r(187),o={};t.setSource=function(e,t,r,i,s,a){n.setSource(o,e,t,r,i,s,a)},t.getSource=function(e,t,r){n.getSource(o,e,t,r)},t.getLanguages=n.getLanguages,t.register=function(e,t){e.setLibraryIcon("flow","random"),e.setLibraryIcon("github","github"),e.setLibraryIcon("indexeddb","database"),e.setLibraryIcon("objects","list"),e.setLibraryIcon("strings","font"),e.registerComponent("ui","BlobToEntry",r(188)),e.registerComponent("ui","CheckGistExists",r(189)),e.registerComponent("ui","CheckRepoExists",r(190)),e.registerComponent("ui","CheckSyncState",r(191)),e.registerComponent("ui","CheckTokenGrant",r(195)),e.registerComponent("ui","CleanAction",r(201)),e.registerComponent("ui","CleanProject",r(202)),e.registerComponent("ui","ClearUserData",r(203)),e.registerComponent("ui","CollectInitialData",r(204)),e.registerComponent("ui","CreateContext",r(205)),e.registerComponent("ui","CreateEmptyContext",r(206)),e.registerComponent("ui","CreateLoadingContext",r(207)),e.registerComponent("ui","DatabaseReady",r(208)),e.registerComponent("ui","DispatchAction",r(209)),e.registerComponent("ui","EnsureId",r(210)),e.registerComponent("ui","EnsureLocalRuntimes",r(211)),e.registerComponent("ui","ErrorToContext",r(212)),e.registerComponent("ui","ExchangeGrantToken",r(213)),e.registerComponent("ui","FindNodesInGraph",r(214)),e.registerComponent("ui","GetActionValues",r(215)),e.registerComponent("ui","GetRemoteProjects",r(216)),e.registerComponent("ui","GetRemoteRuntimes",r(217)),e.registerComponent("ui","GetRemoteUser",r(228)),e.registerComponent("ui","GetUrl",r(229)),e.registerComponent("ui","GetUserToken",r(230)),e.registerComponent("ui","GistToProject",r(231)),e.registerComponent("ui","HasActionRuntime",r(232)),e.registerComponent("ui","ListenRuntime",r(233)),e.registerComponent("ui","LoadTests",r(234)),e.registerComponent("ui","LoadUserData",r(364)),e.registerComponent("ui","LoggingMiddleware",r(365)),e.registerComponent("ui","LoginOAuth",r(366)),e.registerComponent("ui","MapStateToProps",r(367)),e.registerComponent("ui","OpenLiveMode",r(373)),e.registerComponent("ui","OpenNewProject",r(374)),e.registerComponent("ui","OpenProject",r(375)),e.registerComponent("ui","OpenProjectMode",r(376)),e.registerComponent("ui","PopulateProjectRuntime",r(377)),e.registerComponent("ui","PopulateRuntimeData",r(378)),e.registerComponent("ui","PreparePulls",r(379)),e.registerComponent("ui","PreparePush",r(380)),e.registerComponent("ui","ReconnectRuntime",r(381)),e.registerComponent("ui","RefreshRemoteUser",r(382)),e.registerComponent("ui","RemoveRemoteProject",r(383)),e.registerComponent("ui","RemoveRemoteRuntime",r(384)),e.registerComponent("ui","Router",r(385)),e.registerComponent("ui","RunTests",r(386)),e.registerComponent("ui","RuntimeReducer",r(387)),e.registerComponent("ui","RuntimeToProject",r(389)),e.registerComponent("ui","SearchGraphNodeToContext",r(390)),e.registerComponent("ui","SendComponentChanges",r(391)),e.registerComponent("ui","SendCurrentHash",r(392)),e.registerComponent("ui","SendEdges",r(393)),e.registerComponent("ui","SendGraphChanges",r(394)),e.registerComponent("ui","SendNewGraph",r(395)),e.registerComponent("ui","SetAction",r(396)),e.registerComponent("ui","SetToContext",r(397)),e.registerComponent("ui","SetUrl",r(398)),e.registerComponent("ui","SetUrlHash",r(399)),e.registerComponent("ui","StartNetwork",r(400)),e.registerComponent("ui","State",r(401)),e.registerComponent("ui","StopNetwork",r(402)),e.registerComponent("ui","StorageReducer",r(403)),e.registerComponent("ui","Store",r(404)),e.registerComponent("ui","StoreRemoteProject",r(405)),e.registerComponent("ui","StoreRemoteRuntime",r(406)),e.registerComponent("ui","StoreUser",r(407)),e.registerComponent("ui","StoreUserPreferences",r(408)),e.registerComponent("ui","UpdateFromTree",r(409)),e.registerComponent("ui","Save",r(410)),e.registerComponent("ui","SaveData",r(411)),e.registerComponent("ui","GetRuntimeClient",r(412)),e.registerComponent("ui","MigrateLocalStorage",r(413)),e.registerComponent("ui","ContextReducer",r(414)),e.registerComponent("ui","Delete",r(415)),e.registerComponent("ui","DeleteData",r(416)),e.registerComponent("ui","GithubMiddleware",r(417)),e.registerComponent("ui","GithubReducer",r(418)),e.registerComponent("ui","GithubSynchronization",r(419)),e.registerComponent("ui","Load",r(420)),e.registerComponent("ui","LoadData",r(421)),e.registerComponent("ui","PrepareStorage",r(422)),e.registerComponent("ui","RegistryMiddleware",r(423)),e.registerComponent("ui","RegistryReducer",r(424)),e.registerComponent("ui","RuntimeMiddleware",r(425)),e.registerComponent("ui","StorageMiddleware",r(426)),e.registerComponent("ui","UrlMiddleware",r(427)),e.registerComponent("ui","UserMiddleware",r(428)),e.registerComponent("ui","UserReducer",r(429)),e.registerComponent("ui","main",r(145)),e.registerComponent("core","Kick",r(430)),e.registerComponent("core","Merge",r(431)),e.registerComponent("core","Output",r(432)),e.registerComponent("core","Repeat",r(435)),e.registerComponent("core","RepeatAsync",r(436)),e.registerComponent("core","SendNext",r(437)),e.registerComponent("core","Split",r(438)),e.registerComponent("flow","Race",r(439)),e.registerComponent("github","CreateCommit",r(440)),e.registerComponent("github","CreateTree",r(444)),e.registerComponent("github","GetBlob",r(445)),e.registerComponent("github","GetReference",r(446)),e.registerComponent("github","UpdateReference",r(447)),e.registerComponent("graph","LoadJson",r(448)),e.registerComponent("indexeddb","BeginTransaction",r(449)),e.registerComponent("indexeddb","CreateIndex",r(450)),e.registerComponent("indexeddb","CreateStore",r(451)),e.registerComponent("indexeddb","Delete",r(452)),e.registerComponent("indexeddb","GetStore",r(453)),e.registerComponent("indexeddb","Open",r(454)),e.registerComponent("indexeddb","Put",r(456)),e.registerComponent("indexeddb","Query",r(457)),e.registerComponent("indexeddb","UpgradeRouter",r(458)),e.registerComponent("interaction","ListenHash",r(459)),e.registerComponent("interaction","ListenResize",r(460)),e.registerComponent("objects","CallMethod",r(461)),e.registerComponent("objects","CreateObject",r(462)),e.registerComponent("objects","GetObjectKey",r(463)),e.registerComponent("strings","SendString",r(464)),e.registerComponent(null,"Graph",r(465));var o=[];o.push(r(466)),n.registerCustomLoaders(e,o,t)}},function(module,exports){exports.registerCustomLoaders=function(e,t,r){if(!t.length)return r();var n=t.shift();e.registerLoader(n,(function(n){if(n)return r(n);exports.registerCustomLoaders(e,t,r)}))},exports.setSource=function(sources,loader,packageId,name,source,language,callback){var implementation,originalSource=source;if("coffeescript"===language){if("undefined"!=typeof window&&!window.CoffeeScript)return callback(new Error("CoffeeScript compiler needed for "+packageId+"/"+name+" not available"));try{source=window.CoffeeScript.compile(source,{bare:!0})}catch(e){return callback(e)}}if(("es6"===language||"es2015"===language)&&"undefined"!=typeof window&&window.babel)try{source=window.babel.transform(source).code}catch(e){return callback(e)}try{var withExports="(function () { var exports = {}; "+source+"; return exports; })();";implementation=eval(withExports)}catch(e){return callback(e)}if("function"!=typeof implementation&&(!implementation.getComponent||"function"!=typeof implementation.getComponent))return callback(new Error("Provided source for "+packageId+"/"+name+" failed to create a runnable component"));var fullName=packageId+"/"+name;sources[fullName]={language:language,source:originalSource},loader.registerComponent(packageId,name,implementation,callback)},exports.getSource=function(e,t,r,n){if(!t.components[r])return n(new Error("Component "+r+" not available"));var o=t.components[r];if(-1!==r.indexOf("/"))var i=r.split("/"),s={name:i[1],library:i[0]};else s={name:r,library:""};return t.isGraph(o)?(s.code=JSON.stringify(o,null,2),s.language="json",n(null,s)):e[r]?(s.code=e[r].source,s.language=e[r].language,s.tests=e[r].tests,n(null,s)):"function"==typeof o?(s.code=o.toString(),s.language="javascript",n(null,s)):"function"==typeof o.getComponent?(s.code=o.getComponent.toString(),s.language="javascript",n(null,s)):n(new Error("Unable to get sources for "+r))},exports.getLanguages=function(){var e=["javascript","es2015"];return"undefined"!=typeof window&&window.CoffeeScript&&e.push("coffeescript"),e}},function(e,t,r){const n=r(0),o=r(7),i=r(31),s=(e,t,r,i,s)=>{let a=t;const c=r;let l="loadJSON";"fbp"===c.remote.language&&(l="loadFBP"),"json"===c.remote.language&&(a=JSON.parse(a)),n.graph[l](a,(t,r)=>{if(t)return void s(new Error(`Failed to load ${c.remote.name}: ${t.message}`));const a=r;if(a.properties||(a.properties={}),a.properties.sha=e,a.properties.changed=!1,a.properties.project=i.id,c.local)return c.local.startTransaction(e),n.graph.mergeResolveTheirs(c.local,a),c.local.endTransaction(e),c.local.properties.changed=!1,o.addToList(i.graphs,c.local),void s(null,c.local);a.properties.name=c.remote.name,a.name=c.remote.name,a.properties.id=`${i.id}/${a.name}`,a.properties.environment||(a.properties.environment={}),a.properties.environment.type||(a.properties.environment.type=i.type),o.addToList(i.graphs,a),s(null,a),s()})},a=(e,t,r,n,i)=>{const s=r;if(s.local)return s.local.code=t,s.local.sha=e,s.local.changed=!1,o.addToList(n.components,s.local),void i(null,s.local);const a={id:`${n.id}/${s.remote.name}`,project:n.id,name:s.remote.name,code:t,language:s.remote.language,sha:e,changed:!1};o.addToList(n.components,a),i(null,a)},c=(e,t,r,n,i)=>{const s=r;if(s.local)return s.local.code=t,s.local.sha=e,s.local.changed=!1,o.addToList(n.specs,s.local),void i(null,s.local);const a={id:`${n.id}/${s.remote.name}`,project:n.id,type:"spec",name:s.remote.name,code:t,language:s.remote.language,sha:e,changed:!1};o.addToList(n.specs,a),i(null,a)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("blob",{datatype:"array",description:"Git blob entries"}),e.inPorts.add("operation",{datatype:"object",description:"Sync operation",required:!0}),e.outPorts.add("graph",{datatype:"object",scoped:!1}),e.outPorts.add("component",{datatype:"object",scoped:!1}),e.outPorts.add("spec",{datatype:"object",scoped:!1}),e.outPorts.add("project",{datatype:"object",scoped:!1}),e.outPorts.add("error",{datatype:"object",scoped:!1}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("operation"))return;if(!e.hasData("blob"))return;const[r,n]=e.getData("operation","blob");if(!(null!=r.pull?r.pull.length:void 0))return void t.done(new Error("Operation does not provide any pull entries"));const o=[],l=[];n.forEach(e=>{const{sha:t}=e;let n=e.content.replace(/\s/g,"");"base64"===e.encoding&&(n=decodeURIComponent(escape(atob(n))));const i=r.pull.find(e=>e.remote&&e.remote.sha===t);if(!i)return void l.push("No entry found for blob "+t);let p,u;switch(i.type){case"graph":p=s,u="graph";break;case"spec":p=c,u="spec";break;default:p=a,u="component"}p(t,n,i,r.project,(e,t)=>{e?l.push(e):o.push({type:u,entity:t})})}),l.length?t.done(l[0]):(o.forEach(e=>{const r={};r[e.type]=e.entity,t.send(r)}),r.project.main=i.findMainGraph(r.project),t.sendDone({project:r.project}))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),n.helpers.WirePattern(e,{out:["existing","new"],async:!0},(e,t,r,n)=>{if(!e.state||!e.state.projects||!e.state.projects.length)return r.new.send(e),void n();const o=e.state.projects.filter(t=>t.gist===e.payload.graph);if(!o.length)return r.new.send(e),void n();r.existing.send(["project",o[0].id,o[0].main]),n()})}},function(e,t,r){const n=r(0),o=r(24),{v4:i}=r(27),s=r(31),a=e=>{const t=e.payload.repo.split("/");return{project:{id:i(),name:t[1],namespace:t[1].replace(/^noflo-/,""),repo:e.payload.repo,branch:e.payload.branch,graphs:[],components:[],specs:[]},repo:e.payload.repo}};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("existing",{datatype:"array"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("openmain",{datatype:"array"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(!r.state||!r.state.projects||!r.state.projects.length)return void t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)});const n=r.state.projects.filter(e=>e.repo===r.payload.repo&&("master"===r.payload.branch&&!e.branch||e.branch===r.payload.branch));n.length?s.getProjectHash(n[0],(e,i)=>{let s=i;if(s||(s=["project",n[0].id,n[0].main]),r.payload.component){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.components.find(e=>e.name===r);return n?n.name:null})(r.payload.component,n[0]);e&&(s[2]="component",s[3]=e)}if(r.payload.graph){const e=((e,t)=>{const r=o.basename(e,o.extname(e)),n=t.graphs.find(e=>e.name===r);return n?n.properties.id:null})(r.payload.graph,n[0]);e&&(delete s[3],s[2]=e)}t.sendDone({existing:s})}):t.sendDone({openmain:{route:"main",runtime:null,project:null,graph:null,component:null,nodes:[]},new:a(r)})})}},function(e,t,r){const n=r(0),o=r(59),i=(e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()},s=(e,t,r,n)=>i(`/repos/${e}/git/trees/${t}`,r,n),a=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(coffee|js|hpp|c|py)$"));n.components=n.components.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf("."));const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;case"js":t.language="javascript";break;case"hpp":t.language="c++";break;case"c":t.language="c";break;case"py":t.language="python";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},c=(e,t,r)=>{const n=t;if(!e)return;const o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(yaml|coffee)$"));n.specs=n.specs.concat(o.map(e=>{const t=e;t.name=t.path.substr(0,t.path.indexOf(".")),t.type="spec";const n=t.path.substr(t.path.lastIndexOf(".")+1);switch(n){case"coffee":t.language="coffeescript";break;default:t.language=n}return t.fullPath=`${r}${t.path}`,t}))},l=(e,t,r,n)=>((e,t,r,n)=>i(`/repos/${e}/git/commits/${t}`,r,n))(e,t,r,(o,i)=>{o?n(o):i?s(e,i.tree.sha,r,(t,o)=>{if(t)return void n(t);let l=null,p=null,u=null;const d={tree:i.tree.sha,graphs:[],components:[],specs:[]};o.tree.forEach(e=>{"fbp.json"===e.path&&"blob"===e.type||("graphs"!==e.path||"tree"!==e.type?"components"!==e.path||"tree"!==e.type?"spec"===e.path&&"tree"===e.type&&(u=e.sha):p=e.sha:l=e.sha)}),l?s(e,l,r,(t,o)=>{t?n(t):(((e,t,r)=>{const n=t;if(!e)return;let o=e.tree.filter(e=>"blob"===e.type&&!!e.path.match(".*.(fbp|json)$"));o=o.filter(e=>{if(-1===e.path.indexOf(".fbp"))return!0;const t=e.path.replace(".fbp",".json");return!o.find(e=>e.path===t)}),n.graphs=n.graphs.concat(o.map(e=>{const t=e;return t.name=t.path.substr(0,t.path.indexOf(".")),t.language=t.path.substr(t.path.lastIndexOf(".")+1),t.fullPath=`${r}${t.path}`,t}))})(o,d,"graphs/"),p?s(e,p,r,(t,o)=>{t?n(t):(a(o,d,"components/"),u?s(e,u,r,(e,t)=>{e?n(e):(c(t,d,"spec/"),n(null,d))}):n(null,d))}):n(null,d))}):p?s(e,p,r,(t,o)=>{t?n(t):(a(o,d,"components/"),u?s(e,u,r,(e,t)=>{e?n(e):(c(t,d,"spec/"),n(null,d))}):n(null,d))}):u?s(e,u,r,(e,t)=>e?n(e):(c(t,d,"spec/"),n(null,d))):n(null,d)}):n(new Error(`No commit found for ${e} ${t}`))}),p=e=>e.replace(/\s/g,"_"),u=(e,t)=>{const r=p(t.name);if("graph"===e)return`graphs/${r}.json`;let n="components";switch("spec"===e&&(n="spec"),t.language){case"coffeescript":return`${n}/${r}.coffee`;case"javascript":case"es2015":return`${n}/${r}.js`;case"c++":return`${n}/${r}.hpp`;case"python":return`${n}/${r}.py`;default:return`${n}/${r}.${t.language}`}},d=(e,t,r,n)=>n.pull.push({path:r.fullPath,type:e,local:t,remote:r}),h=(e,t,r,n)=>n.push.push({path:(null!=r?r.fullPath:void 0)||u(e,t),type:e,local:t,remote:r}),f=(e,t,r,n)=>n.conflict.push({path:r.fullPath,type:e,local:t,remote:r});t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("reference",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("noop",{datatype:"object"}),e.outPorts.add("local",{datatype:"object"}),e.outPorts.add("remote",{datatype:"object"}),e.outPorts.add("both",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["reference","project"],params:"token",out:["noop","local","remote","both"],async:!0},(t,r,n,o)=>{const i={repo:t.project.repo,project:t.project,ref:t.reference.ref,commit:t.reference.object.sha,push:[],pull:[],conflict:[]};l(i.repo,i.commit,e.params.token,(e,r)=>{if(e)return void o(e);i.tree=r.tree,r.graphs.forEach(e=>{const r=t.project.graphs.filter(t=>t.properties.sha===e.sha||p(t.name)===e.name);r.length?r[0].properties.sha!==e.sha?!1!==r[0].properties.changed?f("graph",r[0],e,i):d("graph",r[0],e,i):r[0].properties.changed&&h("graph",r[0],e,i):d("graph",null,e,i)});let s=t.project.graphs.filter(e=>{let t=!0;return r.graphs.forEach(r=>{e.properties.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t});return s.forEach(e=>{h("graph",e,null,i)}),r.components.forEach(e=>{const r=t.project.components.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("component",r[0],e,i):d("component",r[0],e,i):r[0].changed&&h("component",r[0],e,i):d("component",null,e,i)}),s=t.project.components.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.components.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t}),s.forEach(e=>{h("component",e,null,i)}),r.specs.forEach(e=>{const r=t.project.specs.filter(t=>t.sha===e.sha||p(t.name)===e.name);r.length?r[0].sha!==e.sha?!1!==r[0].changed?f("spec",r[0],e,i):d("spec",r[0],e,i):r[0].changed&&h("spec",r[0],e,i):d("spec",null,e,i)}),s=t.project.specs.filter(e=>{if(!e.code.length)return!1;let t=!0;return r.specs.forEach(r=>{e.sha===r.sha&&(t=!1),p(e.name)===r.name&&(t=!1)}),t}),s.forEach(e=>{h("spec",e,null,i)}),i.conflict.length||i.push.length&&i.pull.length?(n.both.send(i),void o()):i.push.length?(n.local.send(i),void o()):i.pull.length?(n.remote.send(i),void o()):(n.noop.send(i),void o())})}),e}},function(e,t,r){(function(t){
/*!
 * octo.js
 * Copyright (c) 2012 Justin Palmer <justin@labratrevenge.com>
 * MIT Licensed
 */
!function(){"undefined"==typeof superagent&&(superagent=r(193),void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node")&&(btoa=r(108)));var n={api:function(){var e,r,n,o,i,s="https://api.github.com";superagent;function a(){}function c(s,c,l){var p=1,u=30,d={},h=!1,f=!1,m={};void 0!==t&&t.execPath&&t.execPath.match(/node/)&&(d["User-Agent"]="Octo.js");var g=function(){var t=superagent[s](a.host()+c);t.on("error",(function(e){y._handledError=e,y.trigger("error",e)})),i&&t.set("Authorization","token "+i),!i&&n&&o&&t.set("Authorization","Basic "+btoa(n+":"+o)),t.set(d).query({page:p,per_page:u}).timeout(3e3).send(l).end((function(t){if(!y._handledError){if(t.error)return y._handledError=t,void y.trigger("error",t);e=~~t.header["x-ratelimit-limit"],r=~~t.header["x-ratelimit-remaining"];var n=t.header.link;h=/rel=\"next\"/i.test(n),f=/rel=\"next\"/.test(n),y.trigger("end",t),t.ok&&y.trigger("success",t)}}))};function y(){g()}return y.page=function(e){return arguments.length?(p=e,y):p},y.perpage=function(e){return arguments.length?(u=e,y):u},y.next=function(){return p+=1,g(),y},y.prev=function(){return p-=1,g(),y},y.hasnext=function(){return h},y.hasprev=function(){return f},y.on=function(e,t){return void 0===m[e]&&(m[e]=[]),m[e].push(t),y},y.off=function(e,t){if(m[e]instanceof Array)for(var r=m[e],n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1);break}return y},y.trigger=function(e,t){return m[e]instanceof Array&&m[e].forEach((function(e){e.call(y,t)})),y},y.set=function(e,t){return d[e]=t,y},y}return a.host=function(e){return arguments.length?(s=e,a):s},a.get=function(e,t){return new c("get",e)},a.post=function(e,t){return new c("post",e,t)},a.patch=function(e,t){return new c("patch",e,t)},a.put=function(e,t){return new c("put",e,t)},a.del=function(e,t){return new c("del",e,t)},a.limit=function(){return e},a.remaining=function(){return r},a.username=function(e){return arguments.length?(n=e,a):n},a.password=function(e){return arguments.length?(o=e,a):o},a.token=function(e){return arguments.length?(i=e,a):i},a}};e.exports=n}()}).call(this,r(6))},function(e,t,r){var n=r(194),o=r(107),i="undefined"==typeof window?this:window;function s(){}var a="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function c(e){return e===Object(e)}function l(e){if(!c(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function p(e){for(var t,r={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o].split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function u(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var c=0,l=i.length;c<l;++c)t=(r=i[c]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=a(r.slice(t+1)),s[n]=o;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function d(e,t){var r=this;n.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var t=new u(r);"HEAD"==e&&(t.text=null),r.callback(null,t)}))}function h(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}h.serializeObject=l,h.parseString=p,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":l,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},u.prototype.get=function(e){return this.header[e.toLowerCase()]},u.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=t.split(/ *; */).shift();var r=function(e){return o(e.split(/ *; */),(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})}(t);for(var n in r)this[n]=r[n]},u.prototype.parseBody=function(e){var t=h.parse[this.type];return t?t(e):null},u.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},u.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=u,n(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},d.prototype.set=function(e,t){if(c(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},d.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=l(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},d.prototype.send=function(e){var t=c(e),r=this.getHeader("Content-Type");if(t&&c(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},d.prototype.callback=function(e,t){var r=this._callback;return 2==r.length?r(e,t):e?this.emit("error",e):void r(t)},d.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,r=this.xhr=function(){if(i.XMLHttpRequest&&("file:"!=i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;if(this._callback=e||s,r.onreadystatechange=function(){if(4==r.readyState)return 0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end")},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),o&&!this._timer&&(this._timer=setTimeout((function(){t.abort()}),o)),n&&(n=h.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}(a)){var c=h.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var l in this.header)null!=this.header[l]&&r.setRequestHeader(l,this.header[l]);return this.emit("request",this),r.send(a),this},h.Request=d,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=function(e,t){var r=h("DELETE",e);return t&&r.end(t),r},h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=h},function(e,t){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){const n=r(48),o=r(60),i=r(0);t.getComponent=()=>{const e=new i.Component;return e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("code",{datatype:"string"}),e.outPorts.add("error",{datatype:"string"}),i.helpers.WirePattern(e,{in:["in"],out:["pass","code"],forwardGroups:!0,async:!0},(e,t,r,i)=>{if("string"!=typeof e.payload)return i(new Error("URL must be a string"));const s=n.parse(e.payload);if(!s.query)return r.pass.send(e),i();const a=o.parse(s.query);return a.error&&a.error_description&&i(new Error(a.error_description)),a.code?(r.code.send(a.code),i()):(r.pass.send(e),i())})}},function(e,t,r){(function(e,n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,l=/^xn--/,p=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(d[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function y(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(u,".")).split("."),t).join(".")}function v(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?h(e/700):e>>1,e+=h(e/t);e>455;n+=36)e=h(e/35);return h(n+36*e/(e+38))}function k(e){var t,r,n,o,i,s,a,l,p,u,d,f=[],g=e.length,y=0,v=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&m("not-basic"),f.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(i=y,s=1,a=36;o>=g&&m("invalid-input"),((l=(d=e.charCodeAt(o++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||l>h((c-y)/s))&&m("overflow"),y+=l*s,!(l<(p=a<=w?1:a>=w+26?26:a-w));a+=36)s>h(c/(u=36-p))&&m("overflow"),s*=u;w=x(y-i,t=f.length+1,0==i),h(y/t)>c-v&&m("overflow"),v+=h(y/t),y%=t,f.splice(y++,0,v)}return b(f)}function E(e){var t,r,n,o,i,s,a,l,p,u,d,g,y,b,k,E=[];for(g=(e=v(e)).length,t=128,r=0,i=72,s=0;s<g;++s)(d=e[s])<128&&E.push(f(d));for(n=o=E.length,o&&E.push("-");n<g;){for(a=c,s=0;s<g;++s)(d=e[s])>=t&&d<a&&(a=d);for(a-t>h((c-r)/(y=n+1))&&m("overflow"),r+=(a-t)*y,t=a,s=0;s<g;++s)if((d=e[s])<t&&++r>c&&m("overflow"),d==t){for(l=r,p=36;!(l<(u=p<=i?1:p>=i+26?26:p-i));p+=36)k=l-u,b=36-u,E.push(f(w(u+k%b,0))),l=h(k/b);E.push(f(w(l,0))),i=x(r,y,n==o),r=0,++n}++r,++t}return E.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:b},decode:k,encode:E,toASCII:function(e){return y(e,(function(e){return p.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return a}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r(197)(e),r(23))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var p=0;p<l;++p){var u,d,h,f,m=e[p].replace(a,"%20"),g=m.indexOf(r);g>=0?(u=m.substr(0,g),d=m.substr(g+1)):(u=m,d=""),h=decodeURIComponent(u),f=decodeURIComponent(d),n(s,h)?o(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,a){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var a=encodeURIComponent(n(s))+r;return o(e[s])?i(e[s],(function(e){return a+encodeURIComponent(n(e))})).join(t):a+encodeURIComponent(n(e[s]))})).join(t):a?encodeURIComponent(n(a))+r+encodeURIComponent(n(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Strips state from action payloads for backwards compat",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"all"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!0},(e,t,r,n)=>{r.send(e.payload||e),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{r.send({id:e.id,name:e.name,namespace:e.namespace,runtime:e.runtime,type:e.type,repo:e.repo,branch:e.branch,gist:e.gist,main:e.main}),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("clear",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"clear",out:"user",async:!0},(e,t,r,n)=>{const o={};["flowhub-avatar","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{localStorage.removeItem(e),o[e]=null}),r.send(o),n()})}},function(e,t,r){const n=r(0),o=(e,t)=>e.getStream(t).filter(e=>"data"===e.type&&!(!e.data||!0===e.data)).map(e=>e.data);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("component",{datatype:"object"}),e.inPorts.add("spec",{datatype:"object"}),e.inPorts.add("runtime",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.process((e,t)=>{if(!e.hasStream("project","graph","component","spec","runtime"))return;const r={projects:o(e,"project"),graphs:o(e,"graph"),components:o(e,"component"),specs:o(e,"spec"),runtimes:o(e,"runtime")};t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok"),project:null,runtime:null,component:null,graphs:[],remote:[]};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="file-o",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","ok")};r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="spinner",e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"start",out:"out",async:!0},(e,t,r,n)=>{const o={state:("","loading")};return r.send(o),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),window.nofloDBReady=!0,t.done())})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="code-fork",e.inPorts.add("routes",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),e.outPorts.add("handle",{datatype:"all",addressable:!0}),e.outPorts.add("handling",{datatype:"integer"}),e.forwardBrackets={},e.process((e,t)=>{if(!e.hasData("routes","in"))return;const[r,o]=e.getData("routes","in");if(!(null!=o?o.action:void 0))return void t.sendDone({pass:o});const i=r.split(","),s=((e,t)=>t.map(t=>{if(-1===t.indexOf("*"))return t;return t.split(":").map((t,r)=>"*"!==t?t:e[r]?e[r]:t).join(":")}).indexOf(e.join(":")))(o.action.split(":"),i);-1!==s?(t.send({handling:s,handle:new n.IP("data",o,{index:s})}),t.done()):t.sendDone({pass:o})})}},function(e,t,r){const n=r(0),o=e=>{let t=e;return null==t&&(t=60466176),t=Math.floor(Math.random()*t),t.toString(36)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("id",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","id"],async:!0},(e,t,r,n)=>{const i=e;if(i.properties){if(i.properties.id)return i.id=i.properties.id,r.out.send(i),r.id.send(i.id),void n();const e=o();return i.properties.id=e,i.id=e,r.out.send(i),r.id.send(i.id),void n()}if(i.id)return r.out.send(i),r.id.send(i.id),void n();i.id=o(),r.out.send(i),r.id.send(i.id),n()})}},function(e,t,r){const n=r(0),{v4:o}=r(27),i="https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe";t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("runtimes",{datatype:"array"}),n.helpers.WirePattern(e,{out:["out","runtimes"],async:!0,forwardGroups:!1},(e,t,r,n)=>{const s=e||[],a=(e=>{if(e.find(e=>"iframe"===e.protocol&&e.address===i))return null;return{label:"NoFlo HTML5 environment",id:o(),protocol:"iframe",address:i,type:"noflo-browser",seen:Date.now()}})(s);a&&(r.out.send(a),s.push(a)),r.runtimes.send(s),n()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="exclamation-triangle",e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),n.helpers.WirePattern(e,{in:"error",out:"out",async:!0},(e,t,r,n)=>{r.send({state:"error",error:e.payload||e}),n()})}},function(e,t,r){const n=r(60),o=r(0);t.getComponent=()=>{const e=new o.Component;return e.inPorts.add("code",{datatype:"string"}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),o.helpers.WirePattern(e,{in:"code",out:"token",async:!0},(e,t,r,o)=>{const i={redirect:"http://localhost:9999",clientid:"46fe25abef8d07e6dc2d",clientsecret:"",token_server:"https://github.com",token_endpoint:"/login/oauth/access_token",gatekeeper_server:"https://noflo-gate.herokuapp.com",gatekeeper_endpoint:"/authenticate"};return"https:"===window.location.protocol&&(i.redirect="",i.clientid="",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/ssl"),"undefined"!=typeof chrome&&chrome.identity&&(i.redirect="https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/",i.clientid="f29ae9f73bfb223d69d7",i.clientsecret="",i.gatekeeper_endpoint="/authenticate/chrome"),((e,t,r)=>{const o=new XMLHttpRequest;if(o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);r(new Error("Authentication token exchange failed with "+e.error))}catch(e){r(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void r(e)}const t=e.token||e.access_token||null;r(null,t)},t.clientsecret){const r={code:e,client_id:t.clientid,client_secret:t.clientsecret,grant_type:"authorization_code",redirect_uri:t.redirect||window.location.href};return o.open("POST",`${t.token_server}${t.token_endpoint}`,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.setRequestHeader("Accept","application/json"),void o.send(n.stringify(r))}o.open("GET",`${t.gatekeeper_server}${t.gatekeeper_endpoint}/${e}`,!0),o.send(null)})(e,i,(e,t)=>e?o(e):t?(r.send(t),o()):o(new Error("OAuth token exchange didn't return a token")))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graph",{datatype:"object"}),e.inPorts.add("search",{datatype:"string"}),e.outPorts.add("nodes",{datatype:"object"}),n.helpers.WirePattern(e,{in:"search",params:["graph"],out:"nodes",async:!0},(t,r,n,o)=>{if(null==t)return void o();if(!e.params.graph)return void o();if(t.length<1)return n.send(null),void o();const i=t.toLowerCase();e.params.graph.nodes.forEach(e=>{e.metadata.label.toLowerCase().indexOf(i)>=0&&n.send(e)}),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Reads requested keys from action and sends them out alongside the action payload",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("keys",{datatype:"string",control:!0}),e.outPorts.add("values",{datatype:"all",addressable:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("keys").length&&!e.hasData("keys"))return;const r=e.getData("in");if(e.hasData("keys")){const o=((e,t)=>e.map(e=>{if(-1===e.indexOf("["))return t[e];const r=e.match(/(.*)\[([0-9]+|last)\]/);if(!r)return null;const n=t[r[1]];return"last"===r[2]?n[n.length-1]:n[r[2]]}))(e.getData("keys").split(","),r.state);for(let e=0;e<o.length;e+=1){const r=o[e];t.send({values:new n.IP("data",r,{index:e})})}}t.sendDone({state:r.state||{},out:r.payload||r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("projects",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"user",out:"projects",async:!0},(e,t,r,n)=>{if(!e["flowhub-token"])return void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(200===o.status){let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}return r.send(e),void n()}n(new Error(o.responseText))}},o.open("GET","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization","Bearer "+e["flowhub-token"]),o.send(null)})}},function(e,t,r){const n=r(0),o=r(80);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array",required:!0}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{params:["runtimes"],in:"user",out:"runtime",async:!0},(t,r,n,i)=>{if(!t["flowhub-token"])return void i();const s=e.params.runtimes||[];o.list(t["flowhub-token"],{host:"https://api.flowhub.io"},(e,t)=>{if(e)return void i(e);const r=t.filter(e=>{const t=e,r=s.find(e=>e.id===t.runtime.id);if(!r)return!0;const n=new Date(r.seen);return(t.runtime.seen.getTime()!==n.getTime()||t.runtime.address!==r.address||t.runtime.secret!==r.secret)&&(t.runtime.capabilities=r.capabilities,t.runtime.components=r.components,!0)});r.length?(n.beginGroup("https://api.flowhub.io"),r.forEach(e=>{n.send(e.runtime)}),n.endGroup(),i()):i()})})}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;"undefined"!=typeof window?o=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),o=void 0):o=self;var i=r(219),s=r(220),a=r(221),c=r(224),l=r(110),p=r(225),u=r(227);function d(){}e.exports=function(e,r){return"function"==typeof r?new t.Request("GET",e).end(r):1===arguments.length?new t.Request("GET",e):new t.Request(e,r)};var h=t=e.exports;t.Request=w,h.getXHR=function(){if(o.XMLHttpRequest&&(!o.location||"file:"!==o.location.protocol||!o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("Browser-only version of superagent could not find XHR")};var f="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function m(e){if(!l(e))return e;var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&g(t,r,e[r]);return t.join("&")}function g(e,t,r){if(void 0!==r)if(null!==r)if(Array.isArray(r))r.forEach((function(r){g(e,t,r)}));else if(l(r))for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&g(e,"".concat(t,"[").concat(n,"]"),r[n]);else e.push(encodeURI(t)+"="+encodeURIComponent(r));else e.push(encodeURI(t))}function y(e){for(var t,r,n={},o=e.split("&"),i=0,s=o.length;i<s;++i)-1===(r=(t=o[i]).indexOf("="))?n[decodeURIComponent(t)]="":n[decodeURIComponent(t.slice(0,r))]=decodeURIComponent(t.slice(r+1));return n}function v(e){return/[/+]json($|[^-\w])/i.test(e)}function b(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.headers=function(e){for(var t,r,n,o,i=e.split(/\r?\n/),s={},a=0,c=i.length;a<c;++a)-1!==(t=(r=i[a]).indexOf(":"))&&(n=r.slice(0,t).toLowerCase(),o=f(r.slice(t+1)),s[n]=o);return s}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function w(e,t){var r=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,n=null;try{n=new b(r)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,r.xhr?(t.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,t.status=r.xhr.status?r.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),r.callback(t)}r.emit("response",n);try{r._isResponseOK(n)||(e=new Error(n.statusText||n.text||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=n,e.status=n.status,r.callback(e,n)):r.callback(null,n)}))}function x(e,t,r){var n=h("DELETE",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}h.serializeObject=m,h.parseString=y,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":a.stringify,"application/json":s},h.parse={"application/x-www-form-urlencoded":y,"application/json":JSON.parse},p(b.prototype),b.prototype._parseBody=function(e){var t=h.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&v(this.type)&&(t=h.parse["application/json"]),t&&e&&(e.length>0||e instanceof Object)?t(e):null)},b.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot ".concat(t," ").concat(r," (").concat(this.status,")"),o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=b,i(w.prototype),c(w.prototype),w.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},w.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},w.prototype.auth=function(e,t,r){1===arguments.length&&(t=""),"object"===n(t)&&null!==t&&(r=t,t=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});var o=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,r,o)},w.prototype.query=function(e){return"string"!=typeof e&&(e=m(e)),e&&this._query.push(e),this},w.prototype.attach=function(e,t,r){if(t){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,r||t.name)}return this},w.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},w.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var r=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),r(e,t)},w.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},w.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},w.prototype.ca=w.prototype.agent,w.prototype.buffer=w.prototype.ca,w.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},w.prototype.pipe=w.prototype.write,w.prototype._isHost=function(e){return e&&"object"===n(e)&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},w.prototype.end=function(e){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||d,this._finalizeQueryString(),this._end()},w.prototype._setUploadTimeout=function(){var e=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout((function(){e._timeoutError("Upload timeout of ",e._uploadTimeout,"ETIMEDOUT")}),this._uploadTimeout))},w.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var e=this;this.xhr=h.getXHR();var t=this.xhr,r=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var r=t.readyState;if(r>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4===r){var n;try{n=t.status}catch(e){n=0}if(!n){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var n=function(t,r){r.total>0&&(r.percent=r.loaded/r.total*100,100===r.percent&&clearTimeout(e._uploadTimeoutTimer)),r.direction=t,e.emit("progress",r)};if(this.hasListeners("progress"))try{t.addEventListener("progress",n.bind(null,"download")),t.upload&&t.upload.addEventListener("progress",n.bind(null,"upload"))}catch(e){}t.upload&&this._setUploadTimeout();try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof r&&!this._isHost(r)){var o=this._header["content-type"],i=this._serializer||h.serialize[o?o.split(";")[0]:""];!i&&v(o)&&(i=h.serialize["application/json"]),i&&(r=i(r))}for(var s in this.header)null!==this.header[s]&&Object.prototype.hasOwnProperty.call(this.header,s)&&t.setRequestHeader(s,this.header[s]);this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0===r?null:r)},h.agent=function(){return new u},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){u.prototype[e.toLowerCase()]=function(t,r){var n=new h.Request(e,t);return this._setDefaults(n),r&&n.end(r),n}})),u.prototype.del=u.prototype.delete,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.options=function(e,t,r){var n=h("OPTIONS",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=x,h.delete=x,h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=o,o.default=o,o.stable=s,o.stableStringify=s;var r=[],n=[];function o(e,t,o){var i;for(!function e(t,o,i,s){var a;if("object"==typeof t&&null!==t){for(a=0;a<i.length;a++)if(i[a]===t){var c=Object.getOwnPropertyDescriptor(s,o);return void(void 0!==c.get?c.configurable?(Object.defineProperty(s,o,{value:"[Circular]"}),r.push([s,o,t,c])):n.push([t,o]):(s[o]="[Circular]",r.push([s,o,t])))}if(i.push(t),Array.isArray(t))for(a=0;a<t.length;a++)e(t[a],a,i,t);else{var l=Object.keys(t);for(a=0;a<l.length;a++){var p=l[a];e(t[p],p,i,t)}}i.pop()}}(e,"",[],void 0),i=0===n.length?JSON.stringify(e,t,o):JSON.stringify(e,a(t),o);0!==r.length;){var s=r.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}return i}function i(e,t){return e<t?-1:e>t?1:0}function s(e,t,o){var s,c=function e(t,o,s,a){var c;if("object"==typeof t&&null!==t){for(c=0;c<s.length;c++)if(s[c]===t){var l=Object.getOwnPropertyDescriptor(a,o);return void(void 0!==l.get?l.configurable?(Object.defineProperty(a,o,{value:"[Circular]"}),r.push([a,o,t,l])):n.push([t,o]):(a[o]="[Circular]",r.push([a,o,t])))}if("function"==typeof t.toJSON)return;if(s.push(t),Array.isArray(t))for(c=0;c<t.length;c++)e(t[c],c,s,t);else{var p={},u=Object.keys(t).sort(i);for(c=0;c<u.length;c++){var d=u[c];e(t[d],d,s,t),p[d]=t[d]}if(void 0===a)return p;r.push([a,o,t]),a[o]=p}s.pop()}}(e,"",[],void 0)||e;for(s=0===n.length?JSON.stringify(c,t,o):JSON.stringify(c,a(t),o);0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}return s}function a(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(n.length>0)for(var o=0;o<n.length;o++){var i=n[o];if(i[1]===t&&i[0]===r){r="[Circular]",n.splice(o,1);break}}return e.call(this,t,r)}}},function(e,t,r){"use strict";var n=r(222),o=r(223),i=r(109);e.exports={formats:i,parse:o,stringify:n}},function(e,t,r){"use strict";var n=r(81),o=r(109),i=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,a(t)?t:[t])},p=Date.prototype.toISOString,u=o.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:u,formatter:o.formatters[u],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},h=function e(t,r,o,i,s,c,p,u,h,f,m,g,y){var v,b=t;if("function"==typeof p?b=p(r,b):b instanceof Date?b=f(b):"comma"===o&&a(b)&&(b=n.maybeMap(b,(function(e){return e instanceof Date?f(e):e})).join(",")),null===b){if(i)return c&&!g?c(r,d.encoder,y,"key"):r;b=""}if("string"==typeof(v=b)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||n.isBuffer(b))return c?[m(g?r:c(r,d.encoder,y,"key"))+"="+m(c(b,d.encoder,y,"value"))]:[m(r)+"="+m(String(b))];var w,x=[];if(void 0===b)return x;if(a(p))w=p;else{var k=Object.keys(b);w=u?k.sort(u):k}for(var E=0;E<w.length;++E){var _=w[E],S=b[_];if(!s||null!==S){var C=a(b)?"function"==typeof o?o(r,_):r:r+(h?"."+_:"["+_+"]");l(x,e(S,C,o,i,s,c,p,u,h,f,m,g,y))}}return x};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=o.formatters[r],s=d.filter;return("function"==typeof e.filter||a(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:s,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):a(c.filter)&&(r=c.filter);var p,u=[];if("object"!=typeof n||null===n)return"";p=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var f=s[p];r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var m=0;m<r.length;++m){var g=r[m];c.skipNulls&&null===n[g]||l(u,h(n[g],g,f,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=u.join(c.delimiter),v=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),y.length>0?v+y:""}},function(e,t,r){"use strict";var n=r(81),o=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},l=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(i),l=a?i.slice(0,a.index):i,p=[];if(l){if(!r.plainObjects&&o.call(Object.prototype,l)&&!r.allowPrototypes)return;p.push(l)}for(var u=0;r.depth>0&&null!==(a=s.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;p.push(a[1])}return a&&p.push("["+i.slice(a.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var s,a=e[i];if("[]"===a&&r.parseArrays)s=[].concat(o);else{s=r.plainObjects?Object.create(null):{};var l="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,p=parseInt(l,10);r.parseArrays||""!==l?!isNaN(p)&&a!==l&&String(p)===l&&p>=0&&r.parseArrays&&p<=r.arrayLimit?(s=[])[p]=o:s[l]=o:s={0:o}}o=s}return o}(p,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset;return{allowDots:void 0===e.allowDots?s.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var p="string"==typeof e?function(e,t){var r,l={},p=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,d=p.split(t.delimiter,u),h=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?f="utf-8":"utf8=%26%2310003%3B"===d[r]&&(f="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var m,g,y=d[r],v=y.indexOf("]="),b=-1===v?y.indexOf("="):v+1;-1===b?(m=t.decoder(y,s.decoder,f,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(y.slice(0,b),s.decoder,f,"key"),g=n.maybeMap(c(y.slice(b+1),t),(function(e){return t.decoder(e,s.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=a(g)),y.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(l,m)?l[m]=n.combine(l[m],g):l[m]=g}return l}(e,r):e,u=r.plainObjects?Object.create(null):{},d=Object.keys(p),h=0;h<d.length;++h){var f=d[h],m=l(f,p[f],r,"string"==typeof e);u=n.merge(u,m,r)}return n.compact(u)}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r(110);function i(e){if(e)return function(e){for(var t in i.prototype)Object.prototype.hasOwnProperty.call(i.prototype,t)&&(e[t]=i.prototype[t]);return e}(e)}e.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},i.prototype.parse=function(e){return this._parser=e,this},i.prototype.responseType=function(e){return this._responseType=e,this},i.prototype.serialize=function(e){return this._serializer=e,this},i.prototype.timeout=function(e){if(!e||"object"!==n(e))return this._timeout=e,this._responseTimeout=0,this._uploadTimeout=0,this;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;case"upload":this._uploadTimeout=e.upload;break;default:console.warn("Unknown timeout option",t)}return this},i.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),a=new Set([408,413,429,500,502,503,504,521,522,524]);i.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(e,t);if(!0===r)return!0;if(!1===r)return!1}catch(e){console.error(e)}if(t&&t.status&&a.has(t.status))return!0;if(e){if(e.code&&s.has(e.code))return!0;if(e.timeout&&"ECONNABORTED"===e.code)return!0;if(e.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},i.prototype.then=function(e,t){var r=this;if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){n.on("abort",(function(){if(!(r._maxRetries&&r._maxRetries>r._retries))if(r.timedout&&r.timedoutError)t(r.timedoutError);else{var e=new Error("Aborted");e.code="ABORTED",e.status=r.status,e.method=r.method,e.url=r.url,t(e)}})),n.end((function(r,n){r?t(r):e(n)}))}))}return this._fullfilledPromise.then(e,t)},i.prototype.catch=function(e){return this.then(void 0,e)},i.prototype.use=function(e){return e(this),this},i.prototype.ok=function(e){if("function"!=typeof e)throw new Error("Callback required");return this._okCallback=e,this},i.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},i.prototype.get=function(e){return this._header[e.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(e,t){if(o(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},i.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},i.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(o(e)){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.field(r,e[r]);return this}if(Array.isArray(t)){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=String(t)),this._getFormData().append(e,t),this},i.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},i.prototype._auth=function(e,t,r,n){switch(r.type){case"basic":this.set("Authorization","Basic ".concat(n("".concat(e,":").concat(t))));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer ".concat(e))}return this},i.prototype.withCredentials=function(e){return void 0===e&&(e=!0),this._withCredentials=e,this},i.prototype.redirects=function(e){return this._maxRedirects=e,this},i.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw new TypeError("Invalid argument");return this._maxResponseSize=e,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(e){var t=o(e),r=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(t&&o(this._data))for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._data[n]=e[n]);else"string"==typeof e?(r||this.type("form"),(r=this._header["content-type"])&&(r=r.toLowerCase().trim()),this._data="application/x-www-form-urlencoded"===r?this._data?"".concat(this._data,"&").concat(e):e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||r||this.type("json"),this},i.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},i.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.includes("?")?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var r=this.url.slice(t+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,t)+"?"+r.join("&")}}},i.prototype._appendQueryString=function(){console.warn("Unsupported")},i.prototype._timeoutError=function(e,t,r){if(!this._aborted){var n=new Error("".concat(e+t,"ms exceeded"));n.timeout=t,n.code="ECONNABORTED",n.errno=r,this.timedout=!0,this.timedoutError=n,this.abort(),this.callback(n)}},i.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,r){"use strict";var n=r(226);function o(e){if(e)return function(e){for(var t in o.prototype)Object.prototype.hasOwnProperty.call(o.prototype,t)&&(e[t]=o.prototype[t]);return e}(e)}e.exports=o,o.prototype.get=function(e){return this.header[e.toLowerCase()]},o.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=n.type(t);var r=n.params(t);for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(this[o]=r[o]);this.links={};try{e.link&&(this.links=n.parseLinks(e.link))}catch(e){}},o.prototype._setStatusProperties=function(e){var t=e/100|0;this.statusCode=e,this.status=this.statusCode,this.statusType=t,this.info=1===t,this.ok=2===t,this.redirect=3===t,this.clientError=4===t,this.serverError=5===t,this.error=(4===t||5===t)&&this.toError(),this.created=201===e,this.accepted=202===e,this.noContent=204===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.forbidden=403===e,this.notFound=404===e,this.unprocessableEntity=422===e}},function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){c=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw s}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){var t,r={},o=n(e.split(/ *; */));try{for(o.s();!(t=o.n()).done;){var i=t.value.split(/ *= */),s=i.shift(),a=i.shift();s&&a&&(r[s]=a)}}catch(e){o.e(e)}finally{o.f()}return r},t.parseLinks=function(e){var t,r={},o=n(e.split(/ *, */));try{for(o.s();!(t=o.n()).done;){var i=t.value.split(/ *; */),s=i[0].slice(1,-1);r[i[1].split(/ *= */)[1].slice(1,-1)]=s}}catch(e){o.e(e)}finally{o.f()}return r},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach((function(e){i.prototype[e]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return this._defaults.push({fn:e,args:r}),this}})),i.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,n(t.args))}))},e.exports=i},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"token",out:"user",async:!0},(e,t,r,n)=>{const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4!==o.readyState)return;if(200!==o.status){try{const e=JSON.parse(o.responseText);n(new Error(e.message||"User fetching failed with "+o.status))}catch(e){n(new Error(o.responseText))}return}let e;try{e=JSON.parse(o.responseText)}catch(e){return void n(e)}r.send(e),n()},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization","Bearer "+e),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(r.send(window.location.href),n()))}},function(e,t,r){const n=r(0),o=r(59);t.getComponent=()=>{const e=new n.Component;return e.description="Get user token from action",e.icon="key",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("limit",{datatype:"int",default:50}),e.outPorts.add("token",{datatype:"string"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["limit"],out:["token","out"],async:!0},(t,r,n,i)=>{let s;t.state&&t.state.user&&t.state.user["github-token"]&&(s=t.state.user["github-token"]);const a=o.api();s&&a.token(s);const c=a.get("/rate_limit");c.on("success",r=>{if(((null!=r.body.rate?r.body.rate.remaining:void 0)||0)<(e.params.limit?parseInt(e.params.limit,10):50))return s?void i(new Error("GitHub API access rate limited, try again later")):void i(new Error("GitHub API access rate limited. Please log in to increase the limit"));n.token.send(s),n.out.send(t.payload),i()}),c.on("error",e=>{const t=e.error||e.body;i(t?new Error("Failed to communicate with GitHub: "+t):new Error("Failed to communicate with GitHub. Try again later"))}),c()})}},function(e,t,r){const n=r(0),o=r(59),i=r(24);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object",required:!0}),e.inPorts.add("token",{datatype:"string",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:["token"],out:["graph","component","project"],async:!0},(t,r,s,a)=>{const c=o.api();e.params.token&&c.token(e.params.token);const l={id:t.graph,gist:t.graph,graphs:[],components:[],specs:[]},p=c.get("/gists/"+t.graph);return p.on("success",e=>{(null!=e.body?e.body.files:void 0)?(l.name=e.body.description,Object.keys(e.body.files).forEach(t=>{const r=e.body.files[t],o=i.basename(t,i.extname(t));if(".json"===i.extname(t))return void n.graph.loadJSON(r.content,(e,t)=>(t.setProperties({project:l.id,id:`${l.id}/${o}`}),l.main||(l.main=t.properties.id),l.name||(l.name=t.name),t.properties&&t.properties.environment&&t.properties.environment.type&&!l.type&&(l.type=t.properties.environment.type),l.graphs.push(t)));const s={name:o,language:r.language,project:l.id,id:`${l.id}/${o}`,code:r.content,tests:""};l.components.push(s)}),s.project.send(l),l.graphs.forEach(e=>{s.graph.send(e)}),l.components.forEach(e=>{s.components.send(e)}),a()):a(new Error(`Gist ${t.gist} didn't provide any files`))}),p.on("error",e=>a(e.error||e.body)),p()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("missed",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");r.state.runtime?t.sendDone({out:r}):t.sendDone({missed:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;e.inPorts.add("in",{description:"Runtime client instance",datatype:"object"}),e.outPorts.add("runtimeupdate",{datatype:"object"}),e.outPorts.add("status",{description:"Runtime status change",datatype:"object"}),e.outPorts.add("components",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("started",{datatype:"object"}),e.outPorts.add("stopped",{datatype:"object"}),e.outPorts.add("packet",{datatype:"object"}),e.outPorts.add("output",{datatype:"object"}),e.outPorts.add("icon",{datatype:"object"}),e.outPorts.add("networkerror",{datatype:"object"}),e.outPorts.add("processerror",{datatype:"object"}),e.outPorts.add("protocolerror",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={};const t=t=>{e.clients[t]&&(e.clients[t].client.removeListener("connected",e.clients[t].onConnected),e.clients[t].client.transport.removeListener("status",e.clients[t].onStatus),e.clients[t].client.removeListener("signal",e.clients[t].onSignal),e.clients[t].client.removeListener("protocolError",e.clients[t].onProtocolError),e.clients[t].context.deactivate(),delete e.clients[t])};return e.tearDown=r=>{Object.keys(e.clients).forEach(e=>{t(e)}),r()},e.process((r,n,o)=>{if(!r.hasData("in"))return;const i=r.getData("in");let{id:s}=i.definition;t(s);const a=()=>{i.definition.id!==s&&(e.clients[i.definition.id]=e.clients[s],delete e.clients[s],s=i.definition.id)};e.clients[s]={context:o,client:i,onConnected(){a(),n.send({runtimeupdate:i.definition}),i.canSend("component","list")&&setTimeout(()=>i.protocol.component.list().then(e=>n.send({components:{components:e,runtime:s}})).then(()=>i.definition.graph?i.protocol.network.getstatus({graph:i.definition.graph}).then(e=>{e.running&&n.send({started:{status:e,runtime:s}})}):Promise.resolve()).catch(e=>{const t=e;t.runtime=s,n.send({error:t})}),1)},onStatus(e){a(),i.definition.seen=new Date,n.send({status:{status:e,runtime:s}})},onSignal(e){((e,t,r)=>{const n=e;switch("error"===n.command&&(n.payload.runtime=t,r.send({error:{payload:n.payload}})),`${n.protocol}:${n.command}`){case"component:component":return void r.send({component:{component:n.payload,runtime:t}});case"network:started":return void r.send({started:{status:n.payload,runtime:t}});case"network:stopped":return void r.send({stopped:{status:n.payload,runtime:t}});case"network:begingroup":return n.payload.type="openBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:data":return n.payload.type="data",void r.send({packet:{packet:n.payload,runtime:t}});case"network:endgroup":return n.payload.type="closeBracket",void r.send({packet:{packet:n.payload,runtime:t}});case"network:output":return void r.send({output:{output:n.payload,runtime:t}});case"network:error":return void r.send({networkerror:{error:n.payload,runtime:t}});case"network:processerror":return void r.send({processerror:{error:n.payload,runtime:t}});case"network:icon":r.send({icon:{icon:n.payload,runtime:t}})}})(e,s,n)},onProtocolError(e){n.send({protocolerror:{error:e,runtime:s}})}},i.on("connected",e.clients[s].onConnected),i.transport.on("status",e.clients[s].onStatus),i.on("signal",e.clients[s].onSignal),i.on("protocolError",e.clients[s].onProtocolError)})}},function(e,t,r){const n=r(0),o=r(111);t.getComponent=()=>{const e=new n.Component;return e.description="Load fbp-spedc tests for the project",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const{project:r}=e.getData("in"),n=r.specs.filter(e=>"yaml"===e.language&&e.code).map(e=>{try{return o.testsuite.loadYAML(e.code)}catch(e){return[]}}).reduce((e,t)=>e.concat(t),[]);t.sendDone({out:[...n]})})}},function(e,t,r){e.exports={runner:r(112),subprocess:r(143),mocha:r(363),testsuite:r(88),schema:r(132),getSchema:function(t){const r=t.replace(".json","");return e.exports.schema[r]},ui:{}}},function(e,t,r){t.transports={websocket:r(237),iframe:r(242),opener:r(243),webrtc:r(244),base:r(49)},t.connection=r(261),t.Signaller=r(123),t.getTransport=function(e){return t.transports[e]}},function(e,t,r){const n=r(49),o=r(61);e.exports=class extends n{constructor(e){super(e),this.handleError=this.handleError.bind(this),this.handleMessage=this.handleMessage.bind(this),this.connecting=!1,this.connection=null,this.protocol="noflo",this.buffer=[],this.container=null}getElement(){if(this.container)return this.container;this.container=document.createElement("div"),this.container.classList.add("preview-container");const e=document.createElement("pre"),t=document.createElement("img");return this.container.appendChild(t),this.container.appendChild(e),this.on("network",r=>{if("output"!==r.command)return;const n=r.payload;if(null!=n.type&&"previewurl"===n.type){const e=n.url.indexOf(!0)?"&":"?";t.src=`${n.url+e}timestamp=${(new Date).getTime()}`}if(null!=n.message){const t=n.message.replace(/[\u00A0-\u99999<>&]/gim,e=>`&#${e.charCodeAt(0)};`);e.innerHTML+=t+"\n",e.scrollTop=e.scrollHeight}}),this.on("disconnected",()=>{e.innerHTML=""}),this.container}isConnected(){return this.connection&&!1===this.connecting}connect(){this.connection||this.connecting||(this.protocol?this.connection=new o.WebSocket(this.getAddress(),this.protocol):this.connection=new o.WebSocket(this.getAddress()),this.connection.addEventListener("open",()=>(this.connecting=!1,this.sendRuntime("getruntime",{}),this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.flush()),!1),this.connection.addEventListener("message",this.handleMessage,!1),this.connection.addEventListener("error",this.handleError,!1),this.connection.addEventListener("close",()=>{this.connection=null,this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")},!1),this.connecting=!0)}disconnect(){this.connection&&(this.connecting=!1,this.connection.close())}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.connection&&this.connection.send(JSON.stringify({protocol:e,command:t,payload:r}))}handleError(e){if("noflo"===this.protocol)return delete this.protocol,this.connecting=!1,this.connection=null,void setTimeout(()=>{this.connect()},1);this.connection=null,this.connecting=!1;const t=new Error("Connection failed");t.event=e,this.emit("error",t)}handleMessage(e){const t=JSON.parse(e.data);return this.recvMessage(t)}flush(){this.buffer.forEach(e=>{this.send(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){var n;try{n=r(239)}catch(e){}finally{if(n||"undefined"==typeof window||(n=window),!n)throw new Error("Could not determine global this")}var o=n.WebSocket||n.MozWebSocket,i=r(240);function s(e,t){return t?new o(e,t):new o(e)}o&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return o[e]}})})),e.exports={w3cwebsocket:o?s:null,version:i}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){e.exports=r(241).version},function(e){e.exports=JSON.parse('{"_from":"websocket@^1.0.8","_id":"websocket@1.0.32","_inBundle":false,"_integrity":"sha512-i4yhcllSP4wrpoPMU2N0TQ/q0O94LRG/eUQjEAamRltjQ1oT1PFFKOG4i877OlJgCG8rw6LrrowJp+TYCEWF7Q==","_location":"/websocket","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"websocket@^1.0.8","name":"websocket","escapedName":"websocket","rawSpec":"^1.0.8","saveSpec":null,"fetchSpec":"^1.0.8"},"_requiredBy":["/fbp-protocol","/fbp-protocol-client"],"_resolved":"https://registry.npmjs.org/websocket/-/websocket-1.0.32.tgz","_shasum":"1f16ddab3a21a2d929dec1687ab21cfdc6d3dbb1","_spec":"websocket@^1.0.8","_where":"/home/runner/work/noflo-ui/noflo-ui/node_modules/fbp-protocol","author":{"name":"Brian McKelvey","email":"theturtle32@gmail.com","url":"https://github.com/theturtle32"},"browser":"lib/browser.js","bugs":{"url":"https://github.com/theturtle32/WebSocket-Node/issues"},"bundleDependencies":false,"config":{"verbose":false},"contributors":[{"name":"Iñaki Baz Castillo","email":"ibc@aliax.net","url":"http://dev.sipdoc.net"}],"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"deprecated":false,"description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint":"^2.0.0","jshint-stylish":"^2.2.1","tape":"^4.9.1"},"directories":{"lib":"./lib"},"engines":{"node":">=4.0.0"},"homepage":"https://github.com/theturtle32/WebSocket-Node","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"license":"Apache-2.0","main":"index","name":"websocket","repository":{"type":"git","url":"git+https://github.com/theturtle32/WebSocket-Node.git"},"scripts":{"gulp":"gulp","test":"tape test/unit/*.js"},"version":"1.0.32"}')},function(e,t,r){const n=r(49);e.exports=class extends n{constructor(e){super(e),this.updateIframe=this.updateIframe.bind(this),this.onLoaded=this.onLoaded.bind(this),this.onMessage=this.onMessage.bind(this),this.origin=window.location.origin,this.connecting=!1,this.connected=!1,this.buffer=[],this.iframe=null}getElement(){return this.iframe}isConnected(){return this.connected}setMain(e){this.graph&&this.graph.removeListener("changeProperties",this.updateIframe),e?(e.on("changeProperties",this.updateIframe),super.setMain(e),this.updateIframe()):super.setMain(e)}setParentElement(e){return this.iframe=document.createElement("iframe"),this.iframe.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),e.appendChild(this.iframe)}connect(){if(!this.iframe)throw new Error("Unable to connect without a parent element");return this.iframe.addEventListener("load",this.onLoaded,!1),this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),this.iframe.setAttribute("src",this.getAddress()),this.iframe.id="preview-iframe",window.addEventListener("message",this.onMessage,!1)}updateIframe(){if(!this.iframe||!this.graph)return;const e=this.graph.properties.environment;e&&e.content&&this.send("iframe","setcontent",e.content)}disconnect(){return this.iframe&&this.iframe.removeEventListener("load",this.onLoaded,!1),this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}onLoaded(){let e;this.once("capabilities",()=>(e&&clearTimeout(e),this.connecting=!1,this.connected=!0,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.updateIframe(),this.flush())),this.postMessage("runtime","getruntime",{}),e=setTimeout(()=>{this.postMessage("runtime","getruntime",{})},500)}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}postMessage(e,t,r){const n=this.iframe.contentWindow;if(n){try{if("about:blank"===n.location.href)return;if(-1!==n.location.href.indexOf("chrome-extension://"))throw new Error("Use * for IFRAME communications in a Chrome app")}catch(o){return void n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}n.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),n.location.href)}}onMessage(e){let t;e.source&&e.source!==this.iframe.contentWindow||("string"==typeof e.data?t=JSON.parse(e.data):({data:t}=e),this.recvMessage(t))}flush(){this.buffer.forEach(e=>{this.postMessage(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){const n=r(49);e.exports=class extends n{constructor(e){super(e),this.onMessage=this.onMessage.bind(this),this.connecting=!1,this.connected=!1,this.buffer=[]}getElement(){return null}isConnected(){return this.connected}setParentElement(){}connect(){let e;this.connecting=!0,this.emit("status",{online:!1,label:"connecting"}),window.addEventListener("message",this.onMessage,!1),this.once("capabilities",()=>{e&&clearTimeout(e),this.connecting=!1,this.connected=!0,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.flush()}),this.postMessage("runtime","getruntime",{}),e=setTimeout(()=>{this.postMessage("runtime","getruntime",{})},500)}updateIframe(){}disconnect(){this.connected=!1,window.removeEventListener("message",this.onMessage,!1),this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected")}send(e,t,r){this.connecting?this.buffer.push({protocol:e,command:t,payload:r}):this.postMessage(e,t,r)}postMessage(e,t,r){window.opener&&window.opener.postMessage(JSON.stringify({protocol:e,command:t,payload:r}),"*")}onMessage(e){let t;e.source&&e.source!==window.opener||("string"==typeof e.data?t=JSON.parse(e.data):({data:t}=e),this.recvMessage(t))}flush(){this.buffer.forEach(e=>{this.postMessage(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){const n=r(8)("fbp-protocol-client:webrtc"),o=r(246),{v4:i}=r(27),s=r(49),{isBrowser:a}=r(61),c=r(123);e.exports=class extends s{constructor(e){super(e),this.id=i(),this.handleMessage=this.handleMessage.bind(this),this.signaller=null,this.connecting=!1,this.protocol="webrtc",this.buffer=[],this.peers={}}getElement(){return null}isConnected(){return!!Object.keys(this.peers).filter(e=>this.peers[e].connected).length}maybeDisconnected(){this.signaller&&!this.signaller.isConnected()&&(this.signaller=null,this.connecting=!1),this.isConnected()||(this.emit("status",{online:!1,label:"disconnected"}),this.emit("disconnected"))}connect(){let e,t;if(this.isConnected()||this.connecting)return;if(this.signaller&&this.signaller.isConnected())return;const o=this.getAddress();-1!==o.indexOf("#")?([t,e]=o.split("#"),"webrtc://"===t&&(t=null)):e=o,t||(t="wss://api.flowhub.io/"),this.signaller=new c(this.id,"client",t);const i={channelName:e,initiator:!0};a()||(i.wrtc=r(260)),this.signaller.connect(),this.signaller.once("connected",()=>{this.signaller.join(e)}),this.signaller.on("join",e=>{this.peers[e.id]||(this.signaller.joinReply(e.id,this.id),this.connectPeer(e,i))}),this.signaller.on("signal",(e,t)=>{const r=this.peers[t.id];r||r.destroyed?(n(`${this.id} received signalling data for peer ${t.id}`),r.signal(e)):n(`${this.id} received signalling data for unknown/destroyed peer ${t.id}`)}),this.signaller.on("error",e=>{n(this.id+" signaller errored",e),this.connecting=!1,this.signaller=null,this.maybeDisconnected(),this.emit("error",e)}),this.signaller.on("disconnected",()=>{this.signaller=null,this.connecting=!1,this.maybeDisconnected()}),this.connecting=!0}connectPeer(e,t){n(`${this.id} connecting to peer ${e.id}`);const r=new o(t);this.peers[e.id]=r,r.on("signal",t=>{n(`${this.id} sending signalling data to peer ${e.id}`),this.signaller.signal(e.id,t)}),r.on("connect",()=>{n(`${this.id} connected to peer ${e.id}`),this.connecting=!1,this.emit("status",{online:!0,label:"connected"}),this.emit("connected"),this.sendRuntime("getruntime",{}),this.flush()}),r.on("data",this.handleMessage),r.on("close",()=>{n(`${this.id} disconnected from peer ${e.id}`),delete this.peers[e.id],this.maybeDisconnected()}),r.on("error",t=>{n(`${this.id} peer ${e.id} errored`,t),delete this.peers[e.id],this.maybeDisconnected(),this.emit("error",t)})}disconnect(){this.connecting=!1,Object.keys(this.peers).forEach(e=>{this.peers[e].destroy(),delete this.peers[e]}),this.signaller&&(this.signaller.disconnect(),this.signaller=null)}send(e,t,r){const n={protocol:e,command:t,payload:r};this.isConnected()?Object.keys(this.peers).forEach(e=>{const t=this.peers[e];t.connected&&t.send(JSON.stringify(n))}):this.buffer.push(n)}handleMessage(e){const t=JSON.parse(e);return this.recvMessage(t)}flush(){this.buffer.forEach(e=>{this.send(e.protocol,e.command,e.payload)}),this.buffer=[]}}},function(e,t,r){e.exports=function(e){function t(e){let r;function i(...e){if(!i.enabled)return;const n=i,o=Number(new Date),s=o-(r||o);n.diff=s,n.prev=r,n.curr=o,r=o,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,o)=>{if("%%"===r)return r;a++;const i=t.formatters[o];if("function"==typeof i){const t=e[a];r=i.call(n,t),e.splice(a,1),a--}return r}),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=t.selectColor(e),i.destroy=n,i.extend=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function n(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function o(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){const e=t.instances[r];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(114),Object.keys(e).forEach(r=>{t[r]=e[r]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},function(e,t,r){(function(t){/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(8)("simple-peer"),o=r(247),i=r(248),s=r(249),a=r(258),c=r(259);function l(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}class p extends s.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=i(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||i(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||p.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},p.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||5e3,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!this._wrtc)throw"undefined"==typeof window?c(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):c(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(e){return void a(()=>this.destroy(c(e,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=e=>{this._onIceCandidate(e)},this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=e=>{this._setupData(e)},this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=e=>{this._onTrack(e)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{var r;!t.address||t.address.endsWith(".local")?(r="Ignoring unsupported ICE candidate.",console.warn(r)):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(c(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var r=this._senderMap.get(e)||new Map,n=r.get(t);if(n)throw n.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");n=this._pc.addTrack(e,t),r.set(t,n),this._senderMap.set(e,r),this._needsNegotiation()}replaceTrack(e,t,r){this._debug("replaceTrack()");var n=this._senderMap.get(e),o=n?n.get(r):null;if(!o)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,n),null!=o.replaceTrack?o.replaceTrack(t):this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var r=this._senderMap.get(e),n=r?r.get(t):null;if(!n)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{n.removed=!0,this._pc.removeTrack(n)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(n):this.destroy(c(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=65536),this.channelName=this._channel.label,this._channel.onmessage=e=>{this._onChannelMessage(e)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=e=>{this.destroy(c(e,"ERR_DATA_CHANNEL"))};var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},5e3)}_read(){}_write(e,t,r){if(this.destroyed)return r(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(c(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>65536?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=r):r(null)}else this._debug("write before connect"),this._chunk=e,this._cb=r}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=l(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=l(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(r=>{var n=[];r.forEach(e=>{n.push(t(e))}),e(null,n)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(r=>{if(!this.destroyed){var n=[];r.result().forEach(e=>{var r={};e.names().forEach(t=>{r[t]=e.stat(t)}),r.id=e.id,r.type=e.type,r.timestamp=e.timestamp,n.push(t(r))}),e(null,n)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,r)=>{if(this.destroyed)return;t&&(r=[]);var n={},o={},i={},s=!1;r.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(n[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(i[e.id]=e)});const a=e=>{s=!0;var t=o[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var r=n[e.remoteCandidateId];r&&(r.ip||r.address)?(this.remoteAddress=r.ip||r.address,this.remotePort=Number(r.port)):r&&r.ipAddress?(this.remoteAddress=r.ipAddress,this.remotePort=Number(r.portNumber)):"string"==typeof e.googRemoteAddress&&(r=e.googRemoteAddress.split(":"),this.remoteAddress=r[0],this.remotePort=Number(r[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(r.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&a(i[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&a(e)}),s||Object.keys(i).length&&!Object.keys(o).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var l=this._cb;this._cb=null,l(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>65536||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiate"),this.emit("negotiate"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(e){if(!this.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=t.from(r)),this.push(r)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],n.apply(null,e)}}p.WEBRTC_SUPPORT=!!o(),p.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},p.channelConfig={},e.exports=p}).call(this,r(30).Buffer)},function(e,t){e.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},function(e,t,r){"use strict";(function(t,n){var o=r(115).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)i.getRandomValues(r.slice(s,s+65536));else i.getRandomValues(r);if("function"==typeof t)return n.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,r(23),r(6))},function(e,t,r){(t=e.exports=r(116)).Stream=t,t.Readable=t,t.Writable=r(120),t.Duplex=r(42),t.Transform=r(122),t.PassThrough=r(256),t.finished=r(82),t.pipeline=r(257)},function(e,t){},function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=r(30).Buffer,a=r(252).inspect,c=a&&a.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,l;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,r,n,o=s.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,r=o,n=a,s.prototype.copy.call(t,r,n),a+=i.data.length,i=i.next;return o}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0==(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,i=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,i),0==(e-=i)){i===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(i));break}++n}return this.length-=n,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,r),l&&i(t,l),e}()},function(e,t){},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(23))},function(e,t,r){"use strict";(function(t){var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(82),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),p=Symbol("lastPromise"),u=Symbol("handlePromise"),d=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var r=e[d].read();null!==r&&(e[p]=null,e[s]=null,e[a]=null,t(h(r,!1)))}}function m(e){t.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(n={get stream(){return this[d]},next:function(){var e=this,r=this[c];if(null!==r)return Promise.reject(r);if(this[l])return Promise.resolve(h(void 0,!0));if(this[d].destroyed)return new Promise((function(r,n){t.nextTick((function(){e[c]?n(e[c]):r(h(void 0,!0))}))}));var n,o=this[p];if(o)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[l]?r(h(void 0,!0)):t[u](r,n)}),n)}}(o,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(h(i,!1));n=new Promise(this[u])}return this[p]=n,n}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[d].destroy(null,(function(e){e?r(e):t(h(void 0,!0))}))}))})),n),g);e.exports=function(e){var t,r=Object.create(y,(o(t={},d,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,a,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,u,{value:function(e,t){var n=r[d].read();n?(r[p]=null,r[s]=null,r[a]=null,e(h(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[p]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[p]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[p]=null,r[s]=null,r[a]=null,n(h(void 0,!0))),r[l]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this,r(6))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,r){"use strict";e.exports=o;var n=r(122);function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}r(41)(o,n),o.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";var n;var o=r(40).codes,i=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(82)),n(e,{readable:t,writable:o},(function(e){if(e)return i(e);a=!0,i()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new s("pipe"))}}function l(e){e()}function p(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var s=t.map((function(e,r){var i=r<t.length-1;return c(e,i,r>0,(function(e){n||(n=e),e&&s.forEach(l),i||(s.forEach(l),o(n))}))}));return t.reduce(p)}},function(e,t){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let r;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind(globalThis):e=>(r||(r=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},function(e,t,r){"use strict";function n(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=void 0),null!=t&&(r.code=t);try{return n(e,r)}catch(t){r.message=e.message,r.stack=e.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),n(new o,r)}}},function(e,t,r){"use strict";t.MediaStream=window.MediaStream,t.MediaStreamTrack=window.MediaStreamTrack,t.RTCDataChannel=window.RTCDataChannel,t.RTCDataChannelEvent=window.RTCDataChannelEvent,t.RTCDtlsTransport=window.RTCDtlsTransport,t.RTCIceCandidate=window.RTCIceCandidate,t.RTCIceTransport=window.RTCIceTransport,t.RTCPeerConnection=window.RTCPeerConnection,t.RTCPeerConnectionIceEvent=window.RTCPeerConnectionIceEvent,t.RTCRtpReceiver=window.RTCRtpReceiver,t.RTCRtpSender=window.RTCRtpSender,t.RTCRtpTransceiver=window.RTCRtpTransceiver,t.RTCSctpTransport=window.RTCSctpTransport,t.RTCSessionDescription=window.RTCSessionDescription,t.getUserMedia=window.getUserMedia,t.mediaDevices=navigator.mediaDevices},function(e,t){t.sendGraph=function(e,t,r,n){if((null!=e.properties.environment?e.properties.environment.type:void 0)&&!["all",t.definition.type].includes(e.properties.environment.type))return void r(new Error(`Graph type ${e.properties.environment.type} doesn't match runtime type ${t.definition.type}`));if(!t.canDo("protocol:graph"))return void r(new Error("Runtime doesn't support graph protocol"));const o=e.name||e.properties.id;t.sendGraph("clear",{id:o,name:e.name,main:n,library:e.properties.project,icon:e.properties.icon||"",description:e.properties.description||""}),e.nodes.forEach(e=>{t.sendGraph("addnode",{id:e.id,component:e.component,metadata:e.metadata,graph:o})}),e.edges.forEach(e=>{t.sendGraph("addedge",{src:{node:e.from.node,port:e.from.port},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})}),e.initializers.forEach(e=>{t.sendGraph("addinitial",{src:{data:e.from.data},tgt:{node:e.to.node,port:e.to.port},metadata:e.metadata,graph:o})}),e.inports&&Object.keys(e.inports).forEach(r=>{const n=e.inports[r];t.sendGraph("addinport",{public:r,node:n.process,port:n.port,graph:o})}),e.outports&&Object.keys(e.outports).forEach(r=>{const n=e.outports[r];t.sendGraph("addoutport",{public:r,node:n.process,port:n.port,graph:o})}),r()}},function(e,t,r){const{parse:n}=r(48);t.addressToProtocol=e=>{const t=n(e);switch(t.protocol){case"ws:":case"wss:":return"websocket";case"http:":case"https:":return t.query&&-1!==t.query.indexOf("fbp_protocol=webrtc")?"webrtc":"iframe";default:return null}},t.timedPromise=(e,t,r="Request timed out")=>Promise.race([new Promise(e),new Promise((e,n)=>{setTimeout(()=>{n(new Error(r))},t)})])},function(e,t,r){const n=r(83);function o(e,t,r=!0){return n.shared.capabilities.items._enumDescriptions.filter(n=>r?!(!n.inputs||!n.inputs.length)&&-1!==n.inputs.indexOf(`${e}:${t}`):!(!n.outputs||!n.outputs.length)&&-1!==n.outputs.indexOf(`${e}:${t}`)).map(e=>e.name)}t.canSend=(e,t,r)=>{if("runtime"===e&&"getruntime"===t)return!0;const n=o(e,t,!0);return r.filter(e=>-1!==n.indexOf(e)).length>0},t.canReceive=(e,t,r)=>{if("runtime"===e&&"runtime"===t)return!0;const n=o(e,t,!1);return r.filter(e=>-1!==n.indexOf(e)).length>0}},function(e,t,r){const n=r(265),o=r(299),i=r(83),s=r(300);function a(){}e.exports=()=>{const e=new n({extendRefs:!0,schemaId:"id",logger:{log:a,warn:a,error:console.log}});return e.addMetaSchema(o),e._opts.defaultMeta="http://json-schema.org/draft-04/schema#",Object.keys(i).forEach(t=>{i[t].id=`/${t}/`,e.addSchema(i[t])}),e.addSchema(s),(t,r)=>new Promise((n,o)=>{const[i,s,a]=t.slice(1).split("/");if(!s)return e.validate(t,r)?void n(r):void o(new Error("Runtime definition "+e.errorsText()));const c=r;c.protocol=i,e.validate(t,c)?n(r):o("input"!==s?new Error(`Runtime sent invalid payload for ${i}:${a}: ${e.errorsText()}`):new Error(`Client sent invalid payload for ${i}:${a}: ${e.errorsText()}`))})}},function(e,t,r){"use strict";var n=r(266),o=r(84),i=r(270),s=r(124),a=r(125),c=r(271),l=r(272),p=r(293),u=r(43);e.exports=y,y.prototype.validate=function(e,t){var r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},y.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},y.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,r,n);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return E(this,t=o.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,r,n,!0),this},y.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},y.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var n=this.validate(r,e);if(!n&&t){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return n},y.prototype.getSchema=function(e){var t=v(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var i=r.schema,a=r.root,c=r.baseId,l=n.call(e,i,a,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:i,root:a,baseId:c,validate:l}),l}}(this,e)}},y.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=v(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var i=this._getId(e);i&&(i=o.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},y.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},y.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var r=void 0===(t=t||{}).separator?", ":t.separator,n=void 0===t.dataVar?"data":t.dataVar,o="",i=0;i<e.length;i++){var s=e[i];s&&(o+=n+s.dataPath+" "+s.message+r)}return o.slice(0,-r.length)},y.prototype._addSchema=function(e,t,r,n){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,a=i?i(e):e,c=this._cache.get(a);if(c)return c;n=n||!1!==this._opts.addUsedSchema;var l=o.normalizeId(this._getId(e));l&&n&&E(this,l);var p,u=!1!==this._opts.validateSchema&&!t;u&&!(p=l&&l==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=o.ids.call(this,e),h=new s({id:l,schema:e,localRefs:d,cacheKey:a,meta:r});"#"!=l[0]&&n&&(this._refs[l]=h);this._cache.put(a,h),u&&p&&this.validateSchema(e,!0);return h},y.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function i(){var t=e.validate,r=t.apply(this,arguments);return i.errors=t.errors,r}},y.prototype.compileAsync=r(294);var d=r(295);y.prototype.addKeyword=d.add,y.prototype.getKeyword=d.get,y.prototype.removeKeyword=d.remove,y.prototype.validateKeyword=d.validate;var h=r(86);y.ValidationError=h.Validation,y.MissingRefError=h.MissingRef,y.$dataMetaSchema=p;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function y(e){if(!(this instanceof y))return new y(e);e=this._opts=u.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:_,warn:_,error:_};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return k;case"id":return w;default:return x}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=u.copy(e._opts),r=0;r<m.length;r++)delete t[m[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(298),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(131);e._opts.$data&&(n=p(n,g));e.addMetaSchema(n,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function v(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function x(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function k(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function E(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function _(){}},function(e,t,r){"use strict";var n=r(84),o=r(43),i=r(86),s=r(125),a=r(126),c=o.ucs2length,l=r(85),p=i.Validation;function u(e,t,r){var n=h.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}function d(e,t,r){var n=h.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}function h(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+o.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function y(e){return"var customRule"+e+" = customRules["+e+"];"}function v(e,t){if(!e.length)return"";for(var r="",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,h,b){var w=this,x=this._opts,k=[void 0],E={},_=[],S={},C=[],P={},A=[];r=r||{schema:t,refVal:k,refs:E};var O=u.call(this,t,r,b),T=this._compilations[O.index];if(O.compiling)return T.callValidate=function e(){var t=T.validate,r=t.apply(this,arguments);return e.errors=t.errors,r};var D=this._formats,N=this.RULES;try{var j=R(t,r,h,b);T.validate=j;var I=T.callValidate;return I&&(I.schema=j.schema,I.errors=null,I.refs=j.refs,I.refVal=j.refVal,I.root=j.root,I.$async=j.$async,x.sourceCode&&(I.source=j.source)),j}finally{d.call(this,t,r,b)}function R(t,s,u,d){var h=!s||s&&s.schema==t;if(s.schema!=r.schema)return e.call(w,t,s,u,d);var b,S=!0===t.$async,P=a({isTop:!0,schema:t,isRoot:h,baseId:d,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:N,validate:a,util:o,resolve:n,resolveRef:M,usePattern:G,useDefault:B,useCustomRule:z,opts:x,formats:D,logger:w.logger,self:w});P=v(k,g)+v(_,f)+v(C,m)+v(A,y)+P,x.processCode&&(P=x.processCode(P,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",P)(w,N,D,r,k,C,A,l,c,p),k[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",P),e}return b.schema=t,b.errors=null,b.refs=E,b.refVal=k,b.root=h?b:s,S&&(b.$async=!0),!0===x.sourceCode&&(b.source={code:P,patterns:_,defaults:C}),b}function M(t,o,i){o=n.url(t,o);var s,a,c=E[o];if(void 0!==c)return F(s=k[c],a="refVal["+c+"]");if(!i&&r.refs){var l=r.refs[o];if(void 0!==l)return F(s=r.refVal[l],a=L(o,s))}a=L(o);var p=n.call(w,R,r,o);if(void 0===p){var u=h&&h[o];u&&(p=n.inlineRef(u,x.inlineRefs)?u:e.call(w,u,r,h,t))}if(void 0!==p)return function(e,t){var r=E[e];k[r]=t}(o,p),F(p,a);!function(e){delete E[e]}(o)}function L(e,t){var r=k.length;return k[r]=t,E[e]=r,"refVal"+r}function F(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function G(e){var t=S[e];return void 0===t&&(t=S[e]=_.length,_[t]=e),"pattern"+t}function B(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return o.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),r=P[t];return void 0===r&&(r=P[t]=C.length,C[r]=e),"default"+r}}function z(e,t,r,n){if(!1!==w._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every((function(e){return Object.prototype.hasOwnProperty.call(r,e)})))throw new Error("parent schema must have all required keywords: "+o.join(","));var i=e.definition.validateSchema;if(i)if(!i(t)){var s="keyword schema is invalid: "+w.errorsText(i.errors);if("log"!=w._opts.validateSchema)throw new Error(s);w.logger.error(s)}}var a,c=e.definition.compile,l=e.definition.inline,p=e.definition.macro;if(c)a=c.call(w,t,r,n);else if(p)a=p.call(w,t,r,n),!1!==x.validateSchema&&w.validateSchema(a,!0);else if(l)a=l.call(w,n,e.keyword,t,r);else if(!(a=e.definition.validate))return;if(void 0===a)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var u=A.length;return A[u]=a,{code:"customRule"+u,validate:a}}}},function(e,t,r){
/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function o(e){return e.toUpperCase()}function i(e){var n=t("[0-9]","[A-Fa-f]"),o=r(r("%[EFef]"+n+"%"+n+n+"%"+n+n)+"|"+r("%[89A-Fa-f]"+n+"%"+n+n)+"|"+r("%"+n+n)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",i),a=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=r("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),p=r(r(o+"|"+t(c,i,"[\\:]"))+"*"),u=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|[0-9]"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?[0-9]")),d=r(u+"\\."+u+"\\."+u+"\\."+u),h=r(n+"{1,4}"),f=r(r(h+"\\:"+h)+"|"+d),m=r(r(h+"\\:")+"{6}"+f),g=r("\\:\\:"+r(h+"\\:")+"{5}"+f),y=r(r(h)+"?\\:\\:"+r(h+"\\:")+"{4}"+f),v=r(r(r(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+r(h+"\\:")+"{3}"+f),b=r(r(r(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+r(h+"\\:")+"{2}"+f),w=r(r(r(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),x=r(r(r(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),k=r(r(r(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),E=r(r(r(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),_=r([m,g,y,v,b,w,x,k,E].join("|")),S=r(r(c+"|"+o)+"+"),C=(r(_+"\\%25"+S),r(_+r("\\%25|\\%(?!"+n+"{2})")+S)),P=r("[vV]"+n+"+\\."+t(c,i,"[\\:]")+"+"),A=r("\\["+r(C+"|"+_+"|"+P)+"\\]"),O=r(r(o+"|"+t(c,i))+"*"),T=r(A+"|"+d+"(?!"+O+")|"+O),D=r("[0-9]*"),N=r(r(p+"@")+"?"+T+r("\\:"+D)+"?"),j=r(o+"|"+t(c,i,"[\\:\\@]")),I=r(j+"*"),R=r(j+"+"),M=r(r(o+"|"+t(c,i,"[\\@]"))+"+"),L=r(r("\\/"+I)+"*"),F=r("\\/"+r(R+L)+"?"),G=r(M+L),B=r(R+L),z="(?!"+j+")",U=(r(L+"|"+F+"|"+G+"|"+B+"|"+z),r(r(j+"|"+t("[\\/\\?]",a))+"*")),q=r(r(j+"|[\\/\\?]")+"*"),$=r(r("\\/\\/"+N+L)+"|"+F+"|"+B+"|"+z),H=r(l+"\\:"+$+r("\\?"+U)+"?"+r("\\#"+q)+"?"),V=r(r("\\/\\/"+N+L)+"|"+F+"|"+G+"|"+z),W=r(V+r("\\?"+U)+"?"+r("\\#"+q)+"?");return r(H+"|"+W),r(l+"\\:"+$+r("\\?"+U)+"?"),r(r("\\/\\/("+r("("+p+")@")+"?("+T+")"+r("\\:("+D+")")+"?)")+"?("+L+"|"+F+"|"+B+"|"+z+")"),r("\\?("+U+")"),r("\\#("+q+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+T+")"+r("\\:("+D+")")+"?)")+"?("+L+"|"+F+"|"+G+"|"+z+")"),r("\\?("+U+")"),r("\\#("+q+")"),r(r("\\/\\/("+r("("+p+")@")+"?("+T+")"+r("\\:("+D+")")+"?)")+"?("+L+"|"+F+"|"+B+"|"+z+")"),r("\\?("+U+")"),r("\\#("+q+")"),r("("+p+")@"),r("\\:("+D+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",a),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,s),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+d+")$"),IPV6ADDRESS:new RegExp("^\\[?("+_+")"+r(r("\\%25|\\%(?!"+n+"{2})")+"("+S+")")+"?\\]?$")}}var s=i(!1),a=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,p=/^xn--/,u=/[^\0-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function y(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var o=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(d,".")).split("."),t).join(".");return n+o}function v(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),r--)}else t.push(o)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},x=function(e){var t,r=[],n=e.length,o=0,i=128,s=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var c=0;c<a;++c)e.charCodeAt(c)>=128&&g("not-basic"),r.push(e.charCodeAt(c));for(var p=a>0?a+1:0;p<n;){for(var u=o,d=1,h=36;;h+=36){p>=n&&g("invalid-input");var m=(t=e.charCodeAt(p++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-o)/d))&&g("overflow"),o+=m*d;var y=h<=s?1:h>=s+26?26:h-s;if(m<y)break;var v=36-y;d>f(l/v)&&g("overflow"),d*=v}var b=r.length+1;s=w(o-u,b,0==u),f(o/b)>l-i&&g("overflow"),i+=f(o/b),o%=b,r.splice(o++,0,i)}return String.fromCodePoint.apply(String,r)},k=function(e){var t=[],r=(e=v(e)).length,n=128,o=0,i=72,s=!0,a=!1,c=void 0;try{for(var p,u=e[Symbol.iterator]();!(s=(p=u.next()).done);s=!0){var d=p.value;d<128&&t.push(m(d))}}catch(e){a=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(a)throw c}}var h=t.length,y=h;for(h&&t.push("-");y<r;){var x=l,k=!0,E=!1,_=void 0;try{for(var S,C=e[Symbol.iterator]();!(k=(S=C.next()).done);k=!0){var P=S.value;P>=n&&P<x&&(x=P)}}catch(e){E=!0,_=e}finally{try{!k&&C.return&&C.return()}finally{if(E)throw _}}var A=y+1;x-n>f((l-o)/A)&&g("overflow"),o+=(x-n)*A,n=x;var O=!0,T=!1,D=void 0;try{for(var N,j=e[Symbol.iterator]();!(O=(N=j.next()).done);O=!0){var I=N.value;if(I<n&&++o>l&&g("overflow"),I==n){for(var R=o,M=36;;M+=36){var L=M<=i?1:M>=i+26?26:M-i;if(R<L)break;var F=R-L,G=36-L;t.push(m(b(L+F%G,0))),R=f(F/G)}t.push(m(b(R,0))),i=w(o,A,y==h),o=0,++y}}}catch(e){T=!0,D=e}finally{try{!O&&j.return&&j.return()}finally{if(T)throw D}}++o,++n}return t.join("")},E=function(e){return y(e,(function(e){return u.test(e)?"xn--"+k(e):e}))},_=function(e){return y(e,(function(e){return p.test(e)?x(e.slice(4).toLowerCase()):e}))},S={};function C(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var i=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&i)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var s=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function A(e,t){function r(e){var r=P(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,C).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,C).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,C).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,C).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,C).replace(t.PCT_ENCODED,o)),e}function O(e){return e.replace(/^0*(.*)/,"$1")||"0"}function T(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=c(r,2)[1];return n?n.split(".").map(O).join("."):e}function D(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=c(r,3),o=n[1],i=n[2];if(o){for(var s=o.toLowerCase().split("::").reverse(),a=c(s,2),l=a[0],p=a[1],u=p?p.split(":").map(O):[],d=l.split(":").map(O),h=t.IPV4ADDRESS.test(d[d.length-1]),f=h?7:8,m=d.length-f,g=Array(f),y=0;y<f;++y)g[y]=u[y]||d[m+y]||"";h&&(g[f-1]=T(g[f-1],t));var v=g.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var w=g.slice(0,v.index),x=g.slice(v.index+v.length);b=w.join(":")+"::"+x.join(":")}else b=g.join(":");return i&&(b+="%"+i),b}return e}var N=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,j=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var o=e.match(N);if(o){j?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf("@")?o[3]:void 0,r.host=-1!==e.indexOf("//")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=-1!==e.indexOf("?")?o[7]:void 0,r.fragment=-1!==e.indexOf("#")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?o[4]:void 0)),r.host&&(r.host=D(T(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var i=S[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)A(r,n);else{if(r.host&&(t.domainHost||i&&i.domainHost))try{r.host=E(r.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}A(r,s)}i&&i.parse&&i.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function R(e,t){var r=!1!==t.iri?a:s,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(D(T(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var M=/^\.\.?\//,L=/^\/\.(\/|$)/,F=/^\/\.\.(\/|$)/,G=/^\/?(?:.|\n)*?(?=\/|$)/;function B(e){for(var t=[];e.length;)if(e.match(M))e=e.replace(M,"");else if(e.match(L))e=e.replace(L,"/");else if(e.match(F))e=e.replace(F,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(G);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:s,n=[],o=S[(t.scheme||e.scheme||"").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?_(e.host):E(e.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}A(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var i=R(e,t);if(void 0!==i&&("suffix"!==t.reference&&n.push("//"),n.push(i),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||o&&o.absolutePath||(c=B(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),n.push(c)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function U(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=I(z(e,r),r),t=I(z(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||""),o.query=t.query):(t.path?("/"===t.path.charAt(0)?o.path=B(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=B(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function q(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:s.PCT_ENCODED,P)}var $={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},H={scheme:"https",domainHost:$.domainHost,parse:$.parse,serialize:$.serialize};function V(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var W={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=V(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(V(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=c(r,2),o=n[0],i=n[1];e.path=o&&"/"!==o?o:void 0,e.query=i,e.resourceName=void 0}return e.fragment=void 0,e}},J={scheme:"wss",domainHost:W.domainHost,parse:W.parse,serialize:W.serialize},X={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",K="[0-9A-Fa-f]",Q=r(r("%[EFef]"+K+"%"+K+K+"%"+K+K)+"|"+r("%[89A-Fa-f]"+K+"%"+K+K)+"|"+r("%"+K+K)),Z=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),ee=new RegExp(Y,"g"),te=new RegExp(Q,"g"),re=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Z),"g"),ne=new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),oe=ne;function ie(e){var t=P(e);return t.match(ee)?t:e}var se={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var o=!1,i={},s=r.query.split("&"),a=0,c=s.length;a<c;++a){var l=s[a].split("=");switch(l[0]){case"to":for(var p=l[1].split(","),u=0,d=p.length;u<d;++u)n.push(p[u]);break;case"subject":r.subject=q(l[1],t);break;case"body":r.body=q(l[1],t);break;default:o=!0,i[q(l[0],t)]=q(l[1],t)}}o&&(r.headers=i)}r.query=void 0;for(var h=0,f=n.length;h<f;++h){var m=n[h].split("@");if(m[0]=q(m[0]),t.unicodeSupport)m[1]=q(m[1],t).toLowerCase();else try{m[1]=E(q(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[h]=m.join("@")}return r},serialize:function(e,t){var r,n=e,i=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(i){for(var s=0,a=i.length;s<a;++s){var c=String(i[s]),l=c.lastIndexOf("@"),p=c.slice(0,l).replace(te,ie).replace(te,o).replace(re,C),u=c.slice(l+1);try{u=t.iri?_(u):E(q(u,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=p+"@"+u}n.path=i.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var h=[];for(var f in d)d[f]!==X[f]&&h.push(f.replace(te,ie).replace(te,o).replace(ne,C)+"="+d[f].replace(te,ie).replace(te,o).replace(oe,C));return h.length&&(n.query=h.join("&")),n}},ae=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ae),n=e;if(r){var o=t.scheme||n.scheme||"urn",i=r[1].toLowerCase(),s=r[2],a=o+":"+(t.nid||i),c=S[a];n.nid=i,n.nss=s,n.path=void 0,c&&(n=c.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,o=r+":"+(t.nid||n),i=S[o];i&&(e=i.serialize(e,t));var s=e,a=e.nss;return s.path=(n||t.nid)+":"+a,s}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,pe={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};S[$.scheme]=$,S[H.scheme]=H,S[W.scheme]=W,S[J.scheme]=J,S[se.scheme]=se,S[ce.scheme]=ce,S[pe.scheme]=pe,e.SCHEMES=S,e.pctEncChar=C,e.pctDecChars=P,e.parse=I,e.removeDotSegments=B,e.serialize=z,e.resolveComponents=U,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return z(U(I(e,n),I(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=z(I(e,t),t):"object"===n(e)&&(e=I(z(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=z(I(e,r),r):"object"===n(e)&&(e=z(e,r)),"string"==typeof t?t=z(I(t,r),r):"object"===n(t)&&(t=z(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:s.ESCAPE,C)},e.unescapeComponent=q,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,r){"use strict";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){"use strict";var n=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),function e(t,r,o,i,s,a,c,l,p,u){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var d in r(i,s,a,c,l,p,u),i){var h=i[d];if(Array.isArray(h)){if(d in n.arrayKeywords)for(var f=0;f<h.length;f++)e(t,r,o,h[f],s+"/"+d+"/"+f,a,s,d,i,f)}else if(d in n.propsKeywords){if(h&&"object"==typeof h)for(var m in h)e(t,r,o,h[m],s+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,s,d,i,m)}else(d in n.keywords||t.allKeys&&!(d in n.skipKeywords))&&e(t,r,o,h,s+"/"+d,a,s,d,i)}o(i,s,a,c,l,p,u)}}(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){"use strict";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){"use strict";var n=r(43),o=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,a=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,p=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,u=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",n.copy(m[e])}function g(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[n])}function y(e,t){var r=e.match(s);if(!r)return!1;var n=r[1],o=r[2],i=r[3],a=r[5];return(n<=23&&o<=59&&i<=59||23==n&&59==o&&60==i)&&(!t||a)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:p,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:u,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f},m.full={date:g,time:y,"date-time":function(e){var t=e.split(v);return 2==t.length&&g(t[0])&&y(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:p,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:u,"json-pointer":d,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var v=/t|\s/i;var b=/\/|:/;var w=/[^\\]\\Z/;function x(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(273),o=r(43).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=o(t),e.types=o(["number","integer","string","array","object","boolean","null"]),e.forEach((function(r){r.rules=r.rules.map((function(r){var o;if("object"==typeof r){var i=Object.keys(r)[0];o=r[i],r=i,o.forEach((function(r){t.push(r),e.all[r]=!0}))}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}})),e.all.$comment={keyword:"$comment",code:n.$comment},r.type&&(e.types[r.type]=r)})),e.keywords=o(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,r){"use strict";e.exports={$ref:r(274),allOf:r(275),anyOf:r(276),$comment:r(277),const:r(278),contains:r(279),dependencies:r(280),enum:r(281),format:r(282),if:r(283),items:r(284),maximum:r(127),minimum:r(127),maxItems:r(128),minItems:r(128),maxLength:r(129),minLength:r(129),maxProperties:r(130),minProperties:r(130),multipleOf:r(285),not:r(286),oneOf:r(287),pattern:r(288),properties:r(289),propertyNames:r(290),required:r(291),uniqueItems:r(292),validate:r(126)}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(a||""),d="valid"+s;if("#"==c||"#/"==c)e.isRoot?(n=e.async,o="validate"):(n=!0===e.root.schema.$async,o="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(v=v||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),!e.compositeRule&&p?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),p&&(i+=" if (true) { ")}}else if(h.inline){var g=e.util.copy(e);g.level++;var y="valid"+g.level;g.schema=h.schema,g.schemaPath="",g.errSchemaPath=c,i+=" "+e.validate(g).replace(/validate\.schema/g,h.code)+" ",p&&(i+=" if ("+y+") { ")}else n=!0===h.$async||e.async&&!1!==h.$async,o=h.code}if(o){var v;(v=v||[]).push(i),i="",e.opts.passContext?i+=" "+o+".call(this, ":i+=" "+o+"( ",i+=" "+u+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var b=i+=" , "+(a?"data"+(a-1||""):"parentData")+" , "+(a?e.dataPathArr[a]:"parentDataProperty")+", rootData)  ";if(i=v.pop(),n){if(!e.async)throw new Error("async schema referenced by sync schema");p&&(i+=" var "+d+"; "),i+=" try { await "+b+"; ",p&&(i+=" "+d+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",p&&(i+=" "+d+" = false; "),i+=" } ",p&&(i+=" if ("+d+") { ")}else i+=" if (!"+b+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",p&&(i+=" else { ")}return i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var p="valid"+c.level,u=c.baseId,d=!0,h=o;if(h)for(var f,m=-1,g=h.length-1;m<g;)f=h[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(d=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=s+"/"+m,n+="  "+e.validate(c)+" ",c.baseId=u,a&&(n+=" if ("+p+") { ",l+="}"));return a&&(n+=d?" if (true) { ":" "+l.slice(0,-1)+" "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level;if(s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)}))){var g=h.baseId;n+=" var "+d+" = errors; var "+u+" = false;  ";var y=e.compositeRule;e.compositeRule=h.compositeRule=!0;var v=s;if(v)for(var b,w=-1,x=v.length-1;w<x;)b=v[w+=1],h.schema=b,h.schemaPath=a+"["+w+"]",h.errSchemaPath=c+"/"+w,n+="  "+e.validate(h)+" ",h.baseId=g,n+=" "+u+" = "+u+" || "+m+"; if (!"+u+") { ",f+="}";e.compositeRule=h.compositeRule=y,n+=" "+f+" if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.schema[t],i=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(n+=" self._opts.$comment("+s+", "+e.util.toQuotedString(i)+", validate.root.schema);"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; "),d||(n+=" var schema"+o+" = validate.schema"+a+";"),n+="var "+u+" = equal("+p+", schema"+o+"); if (!"+u+") {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to constant' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level,m="i"+o,g=h.dataLevel=e.dataLevel+1,y="data"+g,v=e.baseId,b=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all);if(n+="var "+d+" = errors;var "+u+";",b){var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+p+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var x=p+"["+m+"]";h.dataPathArr[g]=m;var k=e.validate(h);h.baseId=v,e.util.varOccurences(k,y)<2?n+=" "+e.util.varReplace(k,y,x)+" ":n+=" var "+y+" = "+x+"; "+k+" ",n+=" if ("+f+") break; }  ",e.compositeRule=h.compositeRule=w,n+="  if (!"+f+") {"}else n+=" if ("+p+".length == 0) {";var E=E||[];E.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should contain a valid item' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var _=n;return n=E.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { ",b&&(n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="errs__"+o,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m={},g={},y=e.opts.ownProperties;for(x in s)if("__proto__"!=x){var v=s[x],b=Array.isArray(v)?g:m;b[x]=v}n+="var "+u+" = errors;";var w=e.errorPath;for(var x in n+="var missing"+o+";",g)if((b=g[x]).length){if(n+=" if ( "+p+e.util.getProperty(x)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(x)+"') "),l){n+=" && ( ";var k=b;if(k)for(var E=-1,_=k.length-1;E<_;){T=k[E+=1],E&&(n+=" || "),n+=" ( ( "+(I=p+(j=e.util.getProperty(T)))+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(T)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:j)+") ) "}n+=")) {  ";var S="missing"+o,C="' + "+S+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,S,!0):w+" + "+S);var P=P||[];P.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(x)+"', missingProperty: '"+C+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(x)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var A=n;n=P.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+A+"]); ":n+=" validate.errors = ["+A+"]; return false; ":n+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{n+=" ) { ";var O=b;if(O)for(var T,D=-1,N=O.length-1;D<N;){T=O[D+=1];var j=e.util.getProperty(T),I=(C=e.util.escapeQuotes(T),p+j);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,T,e.opts.jsonPointers)),n+=" if ( "+I+" === undefined ",y&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(T)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(x)+"', missingProperty: '"+C+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(n+=" , message: 'should have ",1==b.length?n+="property "+e.util.escapeQuotes(b[0]):n+="properties "+e.util.escapeQuotes(b.join(", ")),n+=" when property "+e.util.escapeQuotes(x)+" is present' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}n+=" }   ",l&&(h+="}",n+=" else { ")}e.errorPath=w;var R=d.baseId;for(var x in m){v=m[x];(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0||!1===v:e.util.schemaHasRules(v,e.RULES.all))&&(n+=" "+f+" = true; if ( "+p+e.util.getProperty(x)+" !== undefined ",y&&(n+=" && Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(x)+"') "),n+=") { ",d.schema=v,d.schemaPath=a+e.util.getProperty(x),d.errSchemaPath=c+"/"+e.util.escapeFragment(x),n+="  "+e.validate(d)+" ",d.baseId=R,n+=" }  ",l&&(n+=" if ("+f+") { ",h+="}"))}return l&&(n+="   "+h+" if ("+u+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="i"+o,f="schema"+o;d||(n+=" var "+f+" = validate.schema"+a+";"),n+="var "+u+";",d&&(n+=" if (schema"+o+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+o+")) "+u+" = false; else {"),n+=u+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+p+", "+f+"["+h+"])) { "+u+" = true; break; }",d&&(n+="  }  "),n+=" if (!"+u+") {   ";var m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" }",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||"");if(!1===e.opts.format)return l&&(n+=" if (true) { "),n;var u,d=e.opts.$data&&s&&s.$data;d?(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",u="schema"+o):u=s;var h=e.opts.unknownFormats,f=Array.isArray(h);if(d){n+=" var "+(m="format"+o)+" = formats["+u+"]; var "+(g="isObject"+o)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(y="formatType"+o)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(n+=" var async"+o+" = "+m+".async; "),n+=" "+m+" = "+m+".validate; } if (  ",d&&(n+=" ("+u+" !== undefined && typeof "+u+" != 'string') || "),n+=" (","ignore"!=h&&(n+=" ("+u+" && !"+m+" ",f&&(n+=" && self._opts.unknownFormats.indexOf("+u+") == -1 "),n+=") || "),n+=" ("+m+" && "+y+" == '"+r+"' && !(typeof "+m+" == 'function' ? ",e.async?n+=" (async"+o+" ? await "+m+"("+p+") : "+m+"("+p+")) ":n+=" "+m+"("+p+") ",n+=" : "+m+".test("+p+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==h)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(n+=" if (true) { "),n;if(f&&h.indexOf(s)>=0)return l&&(n+=" if (true) { "),n;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,y=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var v=!0===m.async;m=m.validate}if(y!=r)return l&&(n+=" if (true) { "),n;if(v){if(!e.async)throw new Error("async format in sync schema");n+=" if (!(await "+(b="formats"+e.util.getProperty(s)+".validate")+"("+p+"))) { "}else{n+=" if (! ";var b="formats"+e.util.getProperty(s);g&&(b+=".validate"),n+="function"==typeof m?" "+b+"("+p+") ":" "+b+".test("+p+") ",n+=") { "}}var w=w||[];w.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",n+=d?""+u:""+e.util.toQuotedString(s),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match format \"",n+=d?"' + "+u+" + '":""+e.util.escapeQuotes(s),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=d?"validate.schema"+a:""+e.util.toQuotedString(s),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var x=n;return n=w.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+x+"]); ":n+=" validate.errors = ["+x+"]; return false; ":n+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",l&&(n+=" else { "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d="errs__"+o,h=e.util.copy(e);h.level++;var f="valid"+h.level,m=e.schema.then,g=e.schema.else,y=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0||!1===m:e.util.schemaHasRules(m,e.RULES.all)),v=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all)),b=h.baseId;if(y||v){var w;h.createErrors=!1,h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+=" var "+d+" = errors; var "+u+" = true;  ";var x=e.compositeRule;e.compositeRule=h.compositeRule=!0,n+="  "+e.validate(h)+" ",h.baseId=b,h.createErrors=!0,n+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=x,y?(n+=" if ("+f+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+u+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'then'; ":w="'then'",n+=" } ",v&&(n+=" else { ")):n+=" if (!"+f+") { ",v&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",n+="  "+e.validate(h)+" ",h.baseId=b,n+=" "+u+" = "+f+"; ",y&&v?n+=" var "+(w="ifClause"+o)+" = 'else'; ":w="'else'",n+=" } "),n+=" if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+=" }   ",l&&(n+=" else { ")}else l&&(n+=" if (true) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g="i"+o,y=h.dataLevel=e.dataLevel+1,v="data"+y,b=e.baseId;if(n+="var "+d+" = errors;var "+u+";",Array.isArray(s)){var w=e.schema.additionalItems;if(!1===w){n+=" "+u+" = "+p+".length <= "+s.length+"; ";var x=c;c=e.errSchemaPath+"/additionalItems",n+="  if (!"+u+") {   ";var k=k||[];k.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var E=n;n=k.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",c=x,l&&(f+="}",n+=" else { ")}var _=s;if(_)for(var S,C=-1,P=_.length-1;C<P;)if(S=_[C+=1],e.opts.strictKeywords?"object"==typeof S&&Object.keys(S).length>0||!1===S:e.util.schemaHasRules(S,e.RULES.all)){n+=" "+m+" = true; if ("+p+".length > "+C+") { ";var A=p+"["+C+"]";h.schema=S,h.schemaPath=a+"["+C+"]",h.errSchemaPath=c+"/"+C,h.errorPath=e.util.getPathExpr(e.errorPath,C,e.opts.jsonPointers,!0),h.dataPathArr[y]=C;var O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,A)+" ":n+=" var "+v+" = "+A+"; "+O+" ",n+=" }  ",l&&(n+=" if ("+m+") { ",f+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0||!1===w:e.util.schemaHasRules(w,e.RULES.all))){h.schema=w,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",n+=" "+m+" = true; if ("+p+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+p+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";h.dataPathArr[y]=g;O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,A)+" ":n+=" var "+v+" = "+A+"; "+O+" ",l&&(n+=" if (!"+m+") break; "),n+=" } }  ",l&&(n+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=a,h.errSchemaPath=c,n+="  for (var "+g+" = 0; "+g+" < "+p+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=p+"["+g+"]";h.dataPathArr[y]=g;O=e.validate(h);h.baseId=b,e.util.varOccurences(O,v)<2?n+=" "+e.util.varReplace(O,v,A)+" ":n+=" var "+v+" = "+A+"; "+O+" ",l&&(n+=" if (!"+m+") break; "),n+=" }"}return l&&(n+=" "+f+" if ("+d+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;if(d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,!d&&"number"!=typeof a)throw new Error(t+" must be number");o+="var division"+i+";if (",d&&(o+=" "+n+" !== undefined && ( typeof "+n+" != 'number' || "),o+=" (division"+i+" = "+u+" / "+n+", ",e.opts.multipleOfPrecision?o+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":o+=" division"+i+" !== parseInt(division"+i+") ",o+=" ) ",d&&(o+="  )  "),o+=" ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+n+" } ",!1!==e.opts.messages&&(o+=" , message: 'should be multiple of ",o+=d?"' + "+n:n+"'"),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="errs__"+o,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c,n+=" var "+u+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=" "+e.validate(d)+" ",d.createErrors=!0,f&&(d.opts.allErrors=f),e.compositeRule=d.compositeRule=m,n+=" if ("+h+") {   ";var g=g||[];g.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var y=n;n=g.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else {  errors = "+u+"; if (vErrors !== null) { if ("+u+") vErrors.length = "+u+"; else vErrors = null; } ",e.opts.allErrors&&(n+=" } ")}else n+="  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be valid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(n+=" if (false) { ");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d="errs__"+o,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g=h.baseId,y="prevValid"+o,v="passingSchemas"+o;n+="var "+d+" = errors , "+y+" = false , "+u+" = false , "+v+" = null; ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var w=s;if(w)for(var x,k=-1,E=w.length-1;k<E;)x=w[k+=1],(e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0||!1===x:e.util.schemaHasRules(x,e.RULES.all))?(h.schema=x,h.schemaPath=a+"["+k+"]",h.errSchemaPath=c+"/"+k,n+="  "+e.validate(h)+" ",h.baseId=g):n+=" var "+m+" = true; ",k&&(n+=" if ("+m+" && "+y+") { "+u+" = false; "+v+" = ["+v+", "+k+"]; } else { ",f+="}"),n+=" if ("+m+") { "+u+" = "+y+" = true; "+v+" = "+k+"; }";return e.compositeRule=h.compositeRule=b,n+=f+"if (!"+u+") {   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+v+" } ",!1!==e.opts.messages&&(n+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),n+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",e.opts.allErrors&&(n+=" } "),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d=e.opts.$data&&a&&a.$data;d?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,o+="if ( ",d&&(o+=" ("+n+" !== undefined && typeof "+n+" != 'string') || "),o+=" !"+(d?"(new RegExp("+n+"))":e.usePattern(a))+".test("+u+") ) {   ";var h=h||[];h.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",o+=d?""+n:""+e.util.toQuotedString(a),o+="  } ",!1!==e.opts.messages&&(o+=" , message: 'should match pattern \"",o+=d?"' + "+n+" + '":""+e.util.escapeQuotes(a),o+="\"' "),e.opts.verbose&&(o+=" , schema:  ",o+=d?"validate.schema"+c:""+e.util.toQuotedString(a),o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var f=o;return o=h.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+f+"]); ":o+=" validate.errors = ["+f+"]; return false; ":o+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+="} ",p&&(o+=" else { "),o}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="errs__"+o,d=e.util.copy(e),h="";d.level++;var f="valid"+d.level,m="key"+o,g="idx"+o,y=d.dataLevel=e.dataLevel+1,v="data"+y,b="dataProperties"+o,w=Object.keys(s||{}).filter(j),x=e.schema.patternProperties||{},k=Object.keys(x).filter(j),E=e.schema.additionalProperties,_=w.length||k.length,S=!1===E,C="object"==typeof E&&Object.keys(E).length,P=e.opts.removeAdditional,A=S||C||P,O=e.opts.ownProperties,T=e.baseId,D=e.schema.required;if(D&&(!e.opts.$data||!D.$data)&&D.length<e.opts.loopRequired)var N=e.util.toHash(D);function j(e){return"__proto__"!==e}if(n+="var "+u+" = errors;var "+f+" = true;",O&&(n+=" var "+b+" = undefined;"),A){if(n+=O?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+p+") { ",_){if(n+=" var isAdditional"+o+" = !(false ",w.length)if(w.length>8)n+=" || validate.schema"+a+".hasOwnProperty("+m+") ";else{var I=w;if(I)for(var R=-1,M=I.length-1;R<M;)X=I[R+=1],n+=" || "+m+" == "+e.util.toQuotedString(X)+" "}if(k.length){var L=k;if(L)for(var F=-1,G=L.length-1;F<G;)ie=L[F+=1],n+=" || "+e.usePattern(ie)+".test("+m+") "}n+=" ); if (isAdditional"+o+") { "}if("all"==P)n+=" delete "+p+"["+m+"]; ";else{var B=e.errorPath,z="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),S)if(P)n+=" delete "+p+"["+m+"]; ";else{n+=" "+f+" = false; ";var U=c;c=e.errSchemaPath+"/additionalProperties",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+z+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is an invalid additional property":n+="should NOT have additional properties",n+="' "),e.opts.verbose&&(n+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var q=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,l&&(n+=" break; ")}else if(C)if("failing"==P){n+=" var "+u+" = errors;  ";var $=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var H=p+"["+m+"]";d.dataPathArr[y]=m;var V=e.validate(d);d.baseId=T,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",n+=" if (!"+f+") { errors = "+u+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+p+"["+m+"]; }  ",e.compositeRule=d.compositeRule=$}else{d.schema=E,d.schemaPath=e.schemaPath+".additionalProperties",d.errSchemaPath=e.errSchemaPath+"/additionalProperties",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=p+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=T,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",l&&(n+=" if (!"+f+") break; ")}e.errorPath=B}_&&(n+=" } "),n+=" }  ",l&&(n+=" if ("+f+") { ",h+="}")}var W=e.opts.useDefaults&&!e.compositeRule;if(w.length){var J=w;if(J)for(var X,Y=-1,K=J.length-1;Y<K;){var Q=s[X=J[Y+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){var Z=e.util.getProperty(X),ee=(H=p+Z,W&&void 0!==Q.default);d.schema=Q,d.schemaPath=a+Z,d.errSchemaPath=c+"/"+e.util.escapeFragment(X),d.errorPath=e.util.getPath(e.errorPath,X,e.opts.jsonPointers),d.dataPathArr[y]=e.util.toQuotedString(X);V=e.validate(d);if(d.baseId=T,e.util.varOccurences(V,v)<2){V=e.util.varReplace(V,v,H);var te=H}else{te=v;n+=" var "+v+" = "+H+"; "}if(ee)n+=" "+V+" ";else{if(N&&N[X]){n+=" if ( "+te+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(X)+"') "),n+=") { "+f+" = false; ";B=e.errorPath,U=c;var re,ne=e.util.escapeQuotes(X);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(B,X,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(re=re||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ne+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+ne+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";q=n;n=re.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+q+"]); ":n+=" validate.errors = ["+q+"]; return false; ":n+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=B,n+=" } else { "}else l?(n+=" if ( "+te+" === undefined ",O&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(X)+"') "),n+=") { "+f+" = true; } else { "):(n+=" if ("+te+" !== undefined ",O&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(X)+"') "),n+=" ) { ");n+=" "+V+" } "}}l&&(n+=" if ("+f+") { ",h+="}")}}if(k.length){var oe=k;if(oe)for(var ie,se=-1,ae=oe.length-1;se<ae;){Q=x[ie=oe[se+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0||!1===Q:e.util.schemaHasRules(Q,e.RULES.all)){d.schema=Q,d.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ie),d.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ie),n+=O?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+g+"=0; "+g+"<"+b+".length; "+g+"++) { var "+m+" = "+b+"["+g+"]; ":" for (var "+m+" in "+p+") { ",n+=" if ("+e.usePattern(ie)+".test("+m+")) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=p+"["+m+"]";d.dataPathArr[y]=m;V=e.validate(d);d.baseId=T,e.util.varOccurences(V,v)<2?n+=" "+e.util.varReplace(V,v,H)+" ":n+=" var "+v+" = "+H+"; "+V+" ",l&&(n+=" if (!"+f+") break; "),n+=" } ",l&&(n+=" else "+f+" = true; "),n+=" }  ",l&&(n+=" if ("+f+") { ",h+="}")}}}return l&&(n+=" "+h+" if ("+u+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="errs__"+o,d=e.util.copy(e);d.level++;var h="valid"+d.level;if(n+="var "+u+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0||!1===s:e.util.schemaHasRules(s,e.RULES.all)){d.schema=s,d.schemaPath=a,d.errSchemaPath=c;var f="key"+o,m="idx"+o,g="i"+o,y="' + "+f+" + '",v="data"+(d.dataLevel=e.dataLevel+1),b="dataProperties"+o,w=e.opts.ownProperties,x=e.baseId;w&&(n+=" var "+b+" = undefined; "),n+=w?" "+b+" = "+b+" || Object.keys("+p+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+f+" = "+b+"["+m+"]; ":" for (var "+f+" in "+p+") { ",n+=" var startErrs"+o+" = errors; ";var k=f,E=e.compositeRule;e.compositeRule=d.compositeRule=!0;var _=e.validate(d);d.baseId=x,e.util.varOccurences(_,v)<2?n+=" "+e.util.varReplace(_,v,k)+" ":n+=" var "+v+" = "+k+"; "+_+" ",e.compositeRule=d.compositeRule=E,n+=" if (!"+h+") { for (var "+g+"=startErrs"+o+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(n+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",!1!==e.opts.messages&&(n+=" , message: 'property name \\'"+y+"\\' is invalid' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?n+=" throw new ValidationError(vErrors); ":n+=" validate.errors = vErrors; return false; "),l&&(n+=" break; "),n+=" } }"}return l&&(n+="  if ("+u+" == errors) {"),n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=" ",o=e.level,i=e.dataLevel,s=e.schema[t],a=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,p="data"+(i||""),u="valid"+o,d=e.opts.$data&&s&&s.$data;d&&(n+=" var schema"+o+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="schema"+o;if(!d)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=s;if(m)for(var g,y=-1,v=m.length-1;y<v;){g=m[y+=1];var b=e.schema.properties[g];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all))||(f[f.length]=g)}}else f=s;if(d||f.length){var w=e.errorPath,x=d||f.length>=e.opts.loopRequired,k=e.opts.ownProperties;if(l)if(n+=" var missing"+o+"; ",x){d||(n+=" var "+h+" = validate.schema"+a+"; ");var E="' + "+(O="schema"+o+"["+(C="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,O,e.opts.jsonPointers)),n+=" var "+u+" = true; ",d&&(n+=" if (schema"+o+" === undefined) "+u+" = true; else if (!Array.isArray(schema"+o+")) "+u+" = false; else {"),n+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { "+u+" = "+p+"["+h+"["+C+"]] !== undefined ",k&&(n+=" &&   Object.prototype.hasOwnProperty.call("+p+", "+h+"["+C+"]) "),n+="; if (!"+u+") break; } ",d&&(n+="  }  "),n+="  if (!"+u+") {   ",(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";var _=n;n=A.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else{n+=" if ( ";var S=f;if(S)for(var C=-1,P=S.length-1;C<P;){D=S[C+=1],C&&(n+=" || "),n+=" ( ( "+(R=p+(I=e.util.getProperty(D)))+" === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(D)+"') "),n+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?D:I)+") ) "}n+=") {  ";var A;E="' + "+(O="missing"+o)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,O,!0):w+" + "+O),(A=A||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ";_=n;n=A.pop(),!e.compositeRule&&l?e.async?n+=" throw new ValidationError(["+_+"]); ":n+=" validate.errors = ["+_+"]; return false; ":n+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else { "}else if(x){d||(n+=" var "+h+" = validate.schema"+a+"; ");var O;E="' + "+(O="schema"+o+"["+(C="i"+o)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,O,e.opts.jsonPointers)),d&&(n+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),n+=" for (var "+C+" = 0; "+C+" < "+h+".length; "+C+"++) { if ("+p+"["+h+"["+C+"]] === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", "+h+"["+C+"]) "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(n+="  }  ")}else{var T=f;if(T)for(var D,N=-1,j=T.length-1;N<j;){D=T[N+=1];var I=e.util.getProperty(D),R=(E=e.util.escapeQuotes(D),p+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,D,e.opts.jsonPointers)),n+=" if ( "+R+" === undefined ",k&&(n+=" || ! Object.prototype.hasOwnProperty.call("+p+", '"+e.util.escapeQuotes(D)+"') "),n+=") {  var err =   ",!1!==e.createErrors?(n+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+E+"' } ",!1!==e.opts.messages&&(n+=" , message: '",e.opts._errorDataPathProperty?n+="is a required property":n+="should have required property \\'"+E+"\\'",n+="' "),e.opts.verbose&&(n+=" , schema: validate.schema"+a+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),n+=" } "):n+=" {} ",n+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else l&&(n+=" if (true) {");return n}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o=" ",i=e.level,s=e.dataLevel,a=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,p=!e.opts.allErrors,u="data"+(s||""),d="valid"+i,h=e.opts.$data&&a&&a.$data;if(h?(o+=" var schema"+i+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",n="schema"+i):n=a,(a||h)&&!1!==e.opts.uniqueItems){h&&(o+=" var "+d+"; if ("+n+" === false || "+n+" === undefined) "+d+" = true; else if (typeof "+n+" != 'boolean') "+d+" = false; else { "),o+=" var i = "+u+".length , "+d+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))o+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+u+"[i], "+u+"[j])) { "+d+" = false; break outer; } } } ";else{o+=" var itemIndices = {}, item; for (;i--;) { var item = "+u+"[i]; ";var g="checkDataType"+(m?"s":"");o+=" if ("+e.util[g](f,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(o+=" if (typeof item == 'string') item = '\"' + item; "),o+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}o+=" } ",h&&(o+="  }  "),o+=" if (!"+d+") {   ";var y=y||[];y.push(o),o="",!1!==e.createErrors?(o+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(o+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(o+=" , schema:  ",o+=h?"validate.schema"+c:""+a,o+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),o+=" } "):o+=" {} ";var v=o;o=y.pop(),!e.compositeRule&&p?e.async?o+=" throw new ValidationError(["+v+"]); ":o+=" validate.errors = ["+v+"]; return false; ":o+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",o+=" } ",p&&(o+=" else { ")}else p&&(o+=" if (true) { ");return o}},function(e,t,r){"use strict";var n=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,i=t[r].split("/"),s=e;for(o=1;o<i.length;o++)s=s[i[o]];for(o=0;o<n.length;o++){var a=n[o],c=s[a];c&&(s[a]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,r){"use strict";var n=r(86).MissingRef;e.exports=function e(t,r,o){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof r&&(o=r,r=void 0);var s=a(t).then((function(){var e=i._addSchema(t,void 0,r);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof n)return o(e);throw e}function o(n){var o=n.missingSchema;if(l(o))throw new Error("Schema "+o+" is loaded but "+n.missingRef+" cannot be resolved");var s=i._loadingSchemas[o];return s||(s=i._loadingSchemas[o]=i._opts.loadSchema(o)).then(c,c),s.then((function(e){if(!l(o))return a(e).then((function(){l(o)||i.addSchema(e,o,void 0,r)}))})).then((function(){return e(t)}));function c(){delete i._loadingSchemas[o]}function l(e){return i._refs[e]||i._schemas[e]}}}(e)}));o&&s.then((function(e){o(null,e)}),o);return s;function a(t){var r=t.$schema;return r&&!i.getSchema(r)?e.call(i,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){"use strict";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(296),i=r(297);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!n.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var s=0;s<i.length;s++)c(e,i[s],t);else c(e,i,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}function c(e,t,n){for(var i,s=0;s<r.length;s++){var a=r[s];if(a.type==t){i=a;break}}i||(i={type:t,rules:[]},r.push(i));var c={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};i.rules.push(c),r.custom[e]=c}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(n(t))return!0;if(e.errors=n.errors,r)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,o,i=" ",s=e.level,a=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(a||""),h="valid"+s,f="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+s+" = "+e.util.getData(c.$data,a,e.dataPathArr)+"; ",o="schema"+s):o=c;var g,y,v,b,w,x="definition"+s,k=this.definition,E="";if(m&&k.$data){w="keywordValidate"+s;var _=k.validateSchema;i+=" var "+x+" = RULES.custom['"+t+"'].definition; var "+w+" = "+x+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;o="validate.schema"+l,w=b.code,g=k.compile,y=k.inline,v=k.macro}var S=w+".errors",C="i"+s,P="ruleErr"+s,A=k.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(y||v||(i+=S+" = null;"),i+="var "+f+" = errors;var "+h+";",m&&k.$data&&(E+="}",i+=" if ("+o+" === undefined) { "+h+" = true; } else { ",_&&(E+="}",i+=" "+h+" = "+x+".validateSchema("+o+"); if ("+h+") { ")),y)k.statements?i+=" "+b.validate+" ":i+=" "+h+" = "+b.validate+"; ";else if(v){var O=e.util.copy(e);E="";O.level++;var T="valid"+O.level;O.schema=b.validate,O.schemaPath="";var D=e.compositeRule;e.compositeRule=O.compositeRule=!0;var N=e.validate(O).replace(/validate\.schema/g,w);e.compositeRule=O.compositeRule=D,i+=" "+N}else{(M=M||[]).push(i),i="",i+="  "+w+".call( ",e.opts.passContext?i+="this":i+="self",g||!1===k.schema?i+=" , "+d+" ":i+=" , "+o+" , "+d+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var j=a?"data"+(a-1||""):"parentData",I=a?e.dataPathArr[a]:"parentDataProperty",R=i+=" , "+j+" , "+I+" , rootData )  ";i=M.pop(),!1===k.errors?(i+=" "+h+" = ",A&&(i+="await "),i+=R+"; "):i+=A?" var "+(S="customErrors"+s)+" = null; try { "+h+" = await "+R+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+S+" = e.errors; else throw e; } ":" "+S+" = null; "+h+" = "+R+"; "}if(k.modifying&&(i+=" if ("+j+") "+d+" = "+j+"["+I+"];"),i+=""+E,k.valid)u&&(i+=" if (true) { ");else{var M;i+=" if ( ",void 0===k.valid?(i+=" !",i+=v?""+T:""+h):i+=" "+!k.valid+" ",i+=") { ",n=this.keyword,(M=M||[]).push(i),i="",(M=M||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var L=i;i=M.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+L+"]); ":i+=" validate.errors = ["+L+"]; return false; ":i+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var F=i;i=M.pop(),y?k.errors?"full"!=k.errors&&(i+="  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+P+" = vErrors["+C+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } "):!1===k.errors?i+=" "+F+" ":(i+=" if ("+f+" == errors) { "+F+" } else {  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+P+" = vErrors["+C+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+p+'"; } ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } } "):v?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(n||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===k.errors?i+=" "+F+" ":(i+=" if (Array.isArray("+S+")) { if (vErrors === null) vErrors = "+S+"; else vErrors = vErrors.concat("+S+"); errors = vErrors.length;  for (var "+C+"="+f+"; "+C+"<errors; "+C+"++) { var "+P+" = vErrors["+C+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+p+'";  ',e.opts.verbose&&(i+=" "+P+".schema = "+o+"; "+P+".data = "+d+"; "),i+=" } } else { "+F+" } "),i+=" } ",u&&(i+=" else { ")}return i}},function(e,t,r){"use strict";var n=r(131);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:n.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:n.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e){e.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},function(e){e.exports=JSON.parse('{"id":"/definition/","type":"object","properties":{"id":{"type":"string","format":"uuid"},"label":{"type":"string"},"address":{"type":"string"},"type":{"type":"string"},"protocol":{"type":"string"},"secret":{"type":"string"},"allCapabilities":{"$ref":"/shared/capabilities"},"capabilities":{"$ref":"/shared/capabilities"}},"required":["address"],"additionalProperties":true}')},function(e,t,r){const n=r(8)("fbp-client:observer"),o=r(8)("fbp-client:observer:ignored");function i(e,t){return"*"===t||e===t}function s(e,t){if("function"==typeof t)return t(e);return t.filter(t=>{const[r,n]=t.split(":");return i(e.protocol,r)&&i(e.command,n)}).length>0}function a(e){const t=`${e.protocol}:${e.command}`;let r=`Unexpected ${t} message`,n="";"runtime:packet"===t&&e.payload.payload&&e.payload.payload.message&&(r=e.payload.payload.message,n=e.payload.payload.stack),"network:data"===t&&e.payload.src&&"error"===e.payload.src.port&&(r=e.payload.data.message||e.payload.data,n=e.payload.data.stack),e.payload.error&&(r=e.payload.error,n=e.payload.stack);const o=new Error(r);return o.signature=t,n&&(o.stack=n),o}class c{constructor(e,t){this.client=e,this.signals=[],this.protocolErrors=[],this.listener=null,this.errorListener=null,this.subscribe(t)}subscribe(e){this.listener=t=>{s(t,e)?(n(`Observed ${t.protocol}:${t.command}`),this.signals.push(t)):o(`${t.protocol}:${t.command}`)},this.client.on("signal",this.listener),this.client.options.skipValidation||(this.errorListener=e=>{this.protocolErrors.push(e)},this.client.on("protocolError",this.errorListener))}unsubscribe(){this.listener&&(this.client.removeListener("signal",this.listener),this.listener=null),this.errorListener&&(this.client.removeListener("protocolError",this.errorListener),this.errorListener=null)}until(e,t){return new Promise((r,o)=>{if(this.protocolErrors.length){const e=this.protocolErrors[0];return n("Failed with protocol error "+e.message),e.signals=this.signals.slice(0),this.unsubscribe(),this.signals=[],void o(e)}for(let i=0;i<this.signals.length;i+=1){const c=this.signals[i];if(s(c,t)){const e=a(c);return n(`Failed with ${c.protocol}:${c.command}`),e.signals=this.signals.slice(0,i+1),this.unsubscribe(),this.signals=[],void o(e)}if(s(c,e)){n(`Succeeded with ${c.protocol}:${c.command}`);const e=this.signals.slice(0,i+1);return this.unsubscribe(),this.signals=[],void r(e)}}let i=null;const c=l=>{if(s(l,t)){n(`Failed with ${l.protocol}:${l.command}`);const e=a(l);return e.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],void o(e)}if(s(l,e)){n(`Succeeded with ${l.protocol}:${l.command}`);const e=this.signals.slice(0);this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],r(e)}};i=e=>{n("Failed with protocol error "+e.message);const t=e;t.signals=this.signals.slice(0),this.unsubscribe(),this.client.removeListener("signal",c),this.client.options.skipValidation||this.client.removeListener("protocolError",i),this.signals=[],o(t)},this.client.on("signal",c),this.client.options.skipValidation||this.client.on("protocolError",i)})}}e.exports=(e,t)=>new c(e,t)},function(e,t,r){const n=r(8)("fbp-client:adapter:signal"),o=r(8)("fbp-client:adapter:request"),i=r(8)("fbp-client:adapter:response");class s{constructor(e,t){this.client=e,this.commands=[],this.listener=null,this.version=t,this.subscribe(),this.tick()}subscribe(){this.client.transport.on("message",e=>{this.listener?this.listener(e):(n(`${e.protocol}:${e.command}`),this.client.validate(`/${e.protocol}/output/${e.command}`,e).then(()=>this.client.canReceive(e.protocol,e.command)).then(()=>this.client.signal(e),e=>this.client.protocolError(e)))}),this.client.transport.on("status",({online:e})=>{e&&this.tick()})}send(e,t,r){return new Promise((s,a)=>{const c=[];this.commands.push(()=>{let l=null;this.listener=r=>{this.client.validate(`/${r.protocol}/output/${r.command}`,r).then(()=>this.client.canReceive(r.protocol,r.command)).then(()=>{if(!(r=>{if(r.protocol!==e)return!1;const n=[];switch(`${e}:${t}`){case"runtime:packet":n.push("packetsent");break;case"component:getsource":n.push("source");break;case"component:source":n.push("component");break;case"component:list":n.push("component"),n.push("componentsready");break;case"network:start":n.push("started");break;case"network:stop":n.push("stopped");break;case"network:getstatus":n.push("status");break;default:n.push(t)}return n.push("error"),-1!==n.indexOf(r.command)})(r))return n(`${r.protocol}:${r.command}`),void this.client.signal(r);if(l&&(clearTimeout(l),l=null),i(`${r.protocol}:${r.command} for request ${e}:${t}`),"error"===r.command){const e=new Error(r.payload.message);return e.stack=r.payload.stack,this.listener=null,a(e),void this.tick()}if("component"===e&&"list"===t)return"componentsready"===r.command?(this.listener=null,s(c),void this.tick()):void c.push(r.payload);this.listener=null,s(r.payload),this.tick()},e=>{this.listener=null,a(e),this.tick()})},o(`${e}:${t}`),this.client.transport.send(e,t,r),"component"!==e&&(l="runtime"===e&&"packet"===t&&this.version<=.6?setTimeout(()=>{this.listener=null,s(r),this.tick()},10):setTimeout(()=>{this.listener=null,a(new Error(`${e}:${t} timed out`)),this.tick()},this.client.options.commandTimeout))}),this.tick()})}tick(){if(!this.commands.length)return;if(!this.client.isConnected())return;if(this.listener)return;this.commands.shift()()}}e.exports=(e,t)=>new s(e,t)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(304),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(23))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,s,a,c=1,l={},p=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(f,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),n=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return l[c]=o,n(c),c++},d.clearImmediate=h}function h(e){delete l[e]}function f(e){if(p)setTimeout(f,0,e);else{var t=l[e];if(t){p=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),p=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(23),r(6))},function(e,t,r){const n=r(306),o=r(8)("fbp-spec:protocol"),i=r(87),s=r(62);t.sendGraph=function(e,r,a){if(!r)return void a(new Error("Graph not defined"));let c=r.name||r.properties.id;c||(c="fixture."+s.randomString(10));r.name=c,r instanceof n.Graph?(o("sendgraph",c),i.resolve().then(()=>e.protocol.graph.send(r,!1)).then(()=>c).nodeify(a)):n.graph.loadJSON(r,(r,n)=>{r?a(r):t.sendGraph(e,n,a)})},t.startNetwork=function(e,t,r){o("startnetwork",t),i.resolve().then(()=>e.protocol.network.start({graph:t})).nodeify(r)},t.stopNetwork=function(e,t,r){o("stopnetwork",t),i.resolve().then(()=>e.protocol.network.stop({graph:t})).nodeify(r)},t.sendPackets=function(e,t,r,n){o("sendpackets",t,r),i.all(Object.keys(r).map(n=>e.protocol.runtime.packet({event:"data",port:n,payload:r[n],graph:t}))).nodeify(n)},t.getComponents=function(e,t){o("get components"),i.resolve().then(()=>e.protocol.component.list()).then(e=>{const t={};return e.forEach(e=>{t[e.name]=e}),t}).nodeify(t)},t.getCapabilities=function(e,t){const r=e.definition;r&&r.capabilities&&r.capabilities.length?t(null,r.capabilities):i.resolve().then(()=>e.protocol.runtime.getruntime()).then(e=>e.capabilities).nodeify(t)},t.getComponentTests=function(e,t){o("get component tests"),i.resolve().then(()=>e.protocol.component.list()).then(t=>i.all(t.map(t=>e.protocol.component.getsource({name:t.name}).then(e=>e,()=>({tests:null}))))).then(e=>{const t={};return e.forEach(e=>{if(!e.tests)return;const r=e.library?`${e.library}/${e.name}`:e.name;t[r]=e.tests}),t}).nodeify(t)}},function(e,t,r){t.graph=r(307),t.Graph=t.graph.Graph,t.journal=r(309),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,u,d,h,f,m,g=r(11);p=g.EventEmitter,d=r(32),f=r(308),u=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,l=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=l.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S,C;if(v=this.getNode(e)){for(this.checkTransactionStart(),C=[],n=0,l=(x=this.edges).length;n<l;n++)(t=x[n]).from.node!==v.id&&t.to.node!==v.id||C.push(t);for(s=0,p=C.length;s<p;s++)t=C[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(C=[],a=0,u=(k=this.initializers).length;a<u;a++)(i=k[a]).to.node===v.id&&C.push(i);for(c=0,d=C.length;c<d;c++)i=C[c],this.removeInitial(i.to.node,i.to.port);for(w in C=[],E=this.inports)E[w].process===e&&C.push(w);for(g=0,h=C.length;g<h;g++)w=C[g],this.removeInport(w);for(w in C=[],_=this.outports)_[w].process===e&&C.push(w);for(y=0,f=C.length;y<f;y++)w=C[y],this.removeOutport(w);for(b=0,m=(S=this.groups).length;b<m;b++)(r=S[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,l=(m=this.edges).length;o<l;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,u=(b=this.groups).length;c<u;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,l,p,u,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,l=(d=this.edges).length;i<l;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,u=m.length;c<u;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],l=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):l.push(r);for(this.initializers=l,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,u=(m=this.initializers).length;c<u;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(l=0,d=(g=this.edges).length;l<d;l++)o=g[l],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)S=v[g],a.properties[g]=S;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(x=this.groups).length;o<p;o++)n={name:(r=x[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,u=(k=this.nodes).length;s<u;s++)f=k[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(E=this.edges).length;c<d;c++)e={src:{process:(t=E[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(l=0,h=(_=this.initializers).length;l<h;l++)i=_[l],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(12).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=u,t.createGraph=function(e,t){return new u(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,l,p,d,h,f,m,g,y,v,b,w,x,k,E,_,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(g in(i="string"==typeof e?JSON.parse(e):JSON.parse(JSON.stringify(e))).properties||(i.properties={}),i.processes||(i.processes={}),i.connections||(i.connections=[]),r=i.caseSensitive||!1,(s=new u(i.properties.name,{caseSensitive:r})).startTransaction("loadJSON",S),m={},v=i.properties)_=v[g],"name"!==g&&(m[g]=_);for(l in s.setProperties(m),b=i.processes)(o=b[l]).metadata||(o.metadata={}),s.addNode(l,o.component,o.metadata);for(c=0,d=(w=i.connections).length;c<d;c++)S=(n=w[c]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?s.addEdge(n.src.process,s.getPortName(n.src.port),n.tgt.process,s.getPortName(n.tgt.port),S):s.addEdgeIndex(n.src.process,s.getPortName(n.src.port),n.src.index,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,S):"number"==typeof n.tgt.index?s.addInitialIndex(n.data,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,S):s.addInitial(n.data,n.tgt.process,s.getPortName(n.tgt.port),S);if(i.inports)for(y in x=i.inports)f=x[y],s.addInport(y,f.process,s.getPortName(f.port),f.metadata);if(i.outports)for(y in k=i.outports)f=k[y],s.addOutport(y,f.process,s.getPortName(f.port),f.metadata);if(i.groups)for(p=0,h=(E=i.groups).length;p<h;p++)a=E[p],s.addGroup(a.name,a.nodes,a.metadata||{});return s.endTransaction("loadJSON"),t(null,s)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(47).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(12).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,l,p,u,h,f,m,g,y,v,b,w,x;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,l=(v=d(e.initializers).reverse()).length;i<l;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(x=[],a=0,u=(w=d(e.nodes).reverse()).length;a<u;a++)h=w[a],x.push(e.removeNode(h.id));return x},h=function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,g,y,v,b,w,x,k,E;for(m(e),o=0,l=(y=t.nodes).length;o<l;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,u=(b=t.initializers).length;a<u;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in x=t.outports)f=x[g],e.addOutport(g,f.process,f.port,f.metadata);for(E=[],c=0,d=(k=t.groups).length;c<d;c++)n=k[c],E.push(e.addGroup(n.name,n.nodes,n.metadata));return E},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(6))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},k=r(11);f=k.EventEmitter,b=r(32),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,l,p,u,h,f,m,g,v,b,w,x,k,E,_,S,C,P,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(k=s.graph.nodes).length;p<f;p++)x=k[p],s.appendCommand("addNode",x);for(h=0,m=(E=s.graph.edges).length;h<m;h++)a=E[h],s.appendCommand("addEdge",a);for(b=0,g=(_=s.graph.initializers).length;b<g;b++)l=_[b],s.appendCommand("addInitial",l);for(u in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),S=s.graph.inports)A=S[u],s.appendCommand("addInport",{name:u,port:A});for(u in C=s.graph.outports)A=C[u],s.appendCommand("addOutport",{name:u,port:A});for(w=0,v=(P=s.graph.groups).length;w<v;w++)c=P[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(x(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(x(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(l=o=p=this.currentRevision+1,u=e;p<=u?o<=u:o>=u;l=p<=u?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(l)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(l=a=this.currentRevision,h=e+1;a>=h;l=a+=-1)for(n=c=(t=this.store.fetchTransaction(l)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(a=[],c=o=l=e|=0,p=t|=this.store.lastRevision;l<=p?o<p:o>p;c=l<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,l;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(l=this.store.fetchTransaction(a)).length;i<s;i++)n=l[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(12).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t,r){r(311),e.exports=self.fetch.bind(self)},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",(function(){return f})),r.d(t,"Request",(function(){return x})),r.d(t,"Response",(function(){return E})),r.d(t,"DOMException",(function(){return S})),r.d(t,"fetch",(function(){return C}));var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n&&n,o="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:o&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&s&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||p(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y)}),this.text=function(){var e,t,r,n=m(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=g(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=d(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,o=(t=t||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),w.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},b.call(x.prototype),b.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];E.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})};var S=n.DOMException;try{new S}catch(e){(S=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),S.prototype.constructor=S}function C(e,t){return new Promise((function(r,o){var i=new x(e,t);if(i.signal&&i.signal.aborted)return o(new S("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e,t,n={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;setTimeout((function(){r(new E(o,n))}),0)},a.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){o(new S("Aborted","AbortError"))}),0)},a.open(i.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&(s?a.responseType="blob":c&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof f?i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,d(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&i.signal.removeEventListener("abort",l)}),a.send(void 0===i._bodyInit?null:i._bodyInit)}))}C.polyfill=!0,n.fetch||(n.fetch=C,n.Headers=f,n.Request=x,n.Response=E)},function(e){e.exports=JSON.parse('{"id":"base.json","$schema":"http://json-schema.org/draft-04/schema","title":"Base definitions","definitions":{"JsonPath":{"type":"string","description":"JsonPath, see http://goessner.net/articles/JsonPath/","format":"jsonpath","example":"products.book[2]"}}}')},function(e){e.exports=JSON.parse('{"id":"testcase.json","$schema":"http://json-schema.org/draft-04/schema","title":"Testcase","description":"A single test case","type":"object","properties":{"name":{"type":"string","description":"Name of this testcase/scenario"},"assertion":{"type":"string","description":"Description of what this testcase asserts"},"inputs":{"description":"The inputs send to the fixture input ports, or a sequence of such inputs","oneOf":[{"type":"object"},{"type":"array","items":{"type":"object"}}]},"expect":{"description":"Expected data on fixture output ports.\\nCan either be an object, or a sequence of such objects.\\n","oneOf":[{"$ref":"outputdata.json"},{"type":"array","items":[{"$ref":"outputdata.json"}]}]},"timeout":{"type":"number","description":"Timeout (in milliseconds). Overrides that set in the suite","default":2000},"skip":{"type":"string","description":"Flag to skip testcase.\\nShould be a description of the reason for skipping.\\n"}},"required":["name","assertion","inputs","expect"]}')},function(e){e.exports=JSON.parse('{"id":"testsuite.json","$schema":"http://json-schema.org/draft-04/schema","title":"Test suite","description":"A collection of test cases","type":["object"],"properties":{"topic":{"type":"string","description":"The component/graph under test","example":"MyComponent3"},"name":{"type":"string","description":"Name of this test suite. Topic is used if no name is provided.","default":""},"fixture":{"type":"object","description":"The graph fixture to run for each test case"},"cases":{"type":"array","description":"The test cases","items":{"$ref":"testcase.json"},"default":[]},"timeout":{"type":"number","description":"Timeout (in milliseconds) for setup and default for each test case.","default":2000},"skip":{"type":"string","description":"Flag to skip test suite (and all containing test cases).\\nShould be a description of the reason for skipping.\\n"}},"required":["topic"]}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"TestSuite list","description":"Array of TestSuite","type":"array","items":{"$ref":"testsuite.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsuites.json","$schema":"http://json-schema.org/draft-04/schema","title":"Expectation list","description":"Array of Expectation","type":"array","items":{"$ref":"expectation.json"}}')},function(e){e.exports=JSON.parse('{"id":"testsfile.json","$schema":"http://json-schema.org/draft-04/schema","title":"Tests file","description":"One or more suites","oneOf":[{"$ref":"testsuites.json"},{"$ref":"testsuite.json"}]}')},function(e,t,r){"use strict";var n=r(319),o=r(338);function i(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=r(17),e.exports.Schema=r(45),e.exports.FAILSAFE_SCHEMA=r(89),e.exports.JSON_SCHEMA=r(135),e.exports.CORE_SCHEMA=r(134),e.exports.DEFAULT_SAFE_SCHEMA=r(51),e.exports.DEFAULT_FULL_SCHEMA=r(63),e.exports.load=n.load,e.exports.loadAll=n.loadAll,e.exports.safeLoad=n.safeLoad,e.exports.safeLoadAll=n.safeLoadAll,e.exports.dump=o.dump,e.exports.safeDump=o.safeDump,e.exports.YAMLException=r(50),e.exports.MINIMAL_SCHEMA=r(89),e.exports.SAFE_SCHEMA=r(51),e.exports.DEFAULT_SCHEMA=r(63),e.exports.scan=i("scan"),e.exports.parse=i("parse"),e.exports.compose=i("compose"),e.exports.addConstructor=i("addConstructor")},function(e,t,r){"use strict";var n=r(44),o=r(50),i=r(320),s=r(51),a=r(63),c=Object.prototype.hasOwnProperty,l=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/[\x85\u2028\u2029]/,u=/[,\[\]\{\}]/,d=/^(?:!|!!|![a-z\-]+!)$/i,h=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function f(e){return Object.prototype.toString.call(e)}function m(e){return 10===e||13===e}function g(e){return 9===e||32===e}function y(e){return 9===e||32===e||10===e||13===e}function v(e){return 44===e||91===e||93===e||123===e||125===e}function b(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function w(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function x(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var k=new Array(256),E=new Array(256),_=0;_<256;_++)k[_]=w(_)?1:0,E[_]=w(_);function S(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||a,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function C(e,t){return new o(t,new i(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function P(e,t){throw C(e,t)}function A(e,t){e.onWarning&&e.onWarning.call(null,C(e,t))}var O={YAML:function(e,t,r){var n,o,i;null!==e.version&&P(e,"duplication of %YAML directive"),1!==r.length&&P(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&P(e,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),i=parseInt(n[2],10),1!==o&&P(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=i<2,1!==i&&2!==i&&A(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,o;2!==r.length&&P(e,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],d.test(n)||P(e,"ill-formed tag handle (first argument) of the TAG directive"),c.call(e.tagMap,n)&&P(e,'there is a previously declared suffix for "'+n+'" tag handle'),h.test(o)||P(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[n]=o}};function T(e,t,r,n){var o,i,s,a;if(t<r){if(a=e.input.slice(t,r),n)for(o=0,i=a.length;o<i;o+=1)9===(s=a.charCodeAt(o))||32<=s&&s<=1114111||P(e,"expected valid JSON character");else l.test(a)&&P(e,"the stream contains non-printable characters");e.result+=a}}function D(e,t,r,o){var i,s,a,l;for(n.isObject(r)||P(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,l=(i=Object.keys(r)).length;a<l;a+=1)s=i[a],c.call(t,s)||(t[s]=r[s],o[s]=!0)}function N(e,t,r,n,o,i,s,a){var l,p;if(Array.isArray(o))for(l=0,p=(o=Array.prototype.slice.call(o)).length;l<p;l+=1)Array.isArray(o[l])&&P(e,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===f(o[l])&&(o[l]="[object Object]");if("object"==typeof o&&"[object Object]"===f(o)&&(o="[object Object]"),o=String(o),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(i))for(l=0,p=i.length;l<p;l+=1)D(e,t,i[l],r);else D(e,t,i,r);else e.json||c.call(r,o)||!c.call(t,o)||(e.line=s||e.line,e.position=a||e.position,P(e,"duplicated mapping key")),t[o]=i,delete r[o];return t}function j(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):P(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function I(e,t,r){for(var n=0,o=e.input.charCodeAt(e.position);0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(t&&35===o)do{o=e.input.charCodeAt(++e.position)}while(10!==o&&13!==o&&0!==o);if(!m(o))break;for(j(e),o=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&A(e,"deficient indentation"),n}function R(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!y(t)))}function M(e,t){1===t?e.result+=" ":t>1&&(e.result+=n.repeat("\n",t-1))}function L(e,t){var r,n,o=e.tag,i=e.anchor,s=[],a=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),n=e.input.charCodeAt(e.position);0!==n&&45===n&&y(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,I(e,!0,-1)&&e.lineIndent<=t)s.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,B(e,t,3,!1,!0),s.push(e.result),I(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)P(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=o,e.anchor=i,e.kind="sequence",e.result=s,!0)}function F(e){var t,r,n,o,i=!1,s=!1;if(33!==(o=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&P(e,"duplication of a tag property"),60===(o=e.input.charCodeAt(++e.position))?(i=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,r="!!",o=e.input.charCodeAt(++e.position)):r="!",t=e.position,i){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&62!==o);e.position<e.length?(n=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):P(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!y(o);)33===o&&(s?P(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),d.test(r)||P(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),u.test(n)&&P(e,"tag suffix cannot contain flow indicator characters")}return n&&!h.test(n)&&P(e,"tag name cannot contain such characters: "+n),i?e.tag=n:c.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:P(e,'undeclared tag handle "'+r+'"'),!0}function G(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&P(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!y(r)&&!v(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&P(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function B(e,t,r,o,i){var s,a,l,p,u,d,h,f,w=1,_=!1,S=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=l=4===r||3===r,o&&I(e,!0,-1)&&(_=!0,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)),1===w)for(;F(e)||G(e);)I(e,!0,-1)?(_=!0,l=s,e.lineIndent>t?w=1:e.lineIndent===t?w=0:e.lineIndent<t&&(w=-1)):l=!1;if(l&&(l=_||i),1!==w&&4!==r||(h=1===r||2===r?t:t+1,f=e.position-e.lineStart,1===w?l&&(L(e,f)||function(e,t,r){var n,o,i,s,a,c=e.tag,l=e.anchor,p={},u={},d=null,h=null,f=null,m=!1,v=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=p),a=e.input.charCodeAt(e.position);0!==a;){if(n=e.input.charCodeAt(e.position+1),i=e.line,s=e.position,63!==a&&58!==a||!y(n)){if(!B(e,r,2,!1,!0))break;if(e.line===i){for(a=e.input.charCodeAt(e.position);g(a);)a=e.input.charCodeAt(++e.position);if(58===a)y(a=e.input.charCodeAt(++e.position))||P(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(N(e,p,u,d,h,null),d=h=f=null),v=!0,m=!1,o=!1,d=e.tag,h=e.result;else{if(!v)return e.tag=c,e.anchor=l,!0;P(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=c,e.anchor=l,!0;P(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(m&&(N(e,p,u,d,h,null),d=h=f=null),v=!0,m=!0,o=!0):m?(m=!1,o=!0):P(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,a=n;if((e.line===i||e.lineIndent>t)&&(B(e,t,4,!0,o)&&(m?h=e.result:f=e.result),m||(N(e,p,u,d,h,f,i,s),d=h=f=null),I(e,!0,-1),a=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==a)P(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&N(e,p,u,d,h,null),v&&(e.tag=c,e.anchor=l,e.kind="mapping",e.result=p),v}(e,f,h))||function(e,t){var r,n,o,i,s,a,c,l,p,u,d=!0,h=e.tag,f=e.anchor,m={};if(91===(u=e.input.charCodeAt(e.position)))o=93,a=!1,n=[];else{if(123!==u)return!1;o=125,a=!0,n={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=n),u=e.input.charCodeAt(++e.position);0!==u;){if(I(e,!0,t),(u=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=h,e.anchor=f,e.kind=a?"mapping":"sequence",e.result=n,!0;d||P(e,"missed comma between flow collection entries"),p=null,i=s=!1,63===u&&y(e.input.charCodeAt(e.position+1))&&(i=s=!0,e.position++,I(e,!0,t)),r=e.line,B(e,t,1,!1,!0),l=e.tag,c=e.result,I(e,!0,t),u=e.input.charCodeAt(e.position),!s&&e.line!==r||58!==u||(i=!0,u=e.input.charCodeAt(++e.position),I(e,!0,t),B(e,t,1,!1,!0),p=e.result),a?N(e,n,m,l,c,p):i?n.push(N(e,null,m,l,c,p)):n.push(c),I(e,!0,t),44===(u=e.input.charCodeAt(e.position))?(d=!0,u=e.input.charCodeAt(++e.position)):d=!1}P(e,"unexpected end of the stream within a flow collection")}(e,h)?S=!0:(a&&function(e,t){var r,o,i,s,a,c=1,l=!1,p=!1,u=t,d=0,h=!1;if(124===(s=e.input.charCodeAt(e.position)))o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)1===c?c=43===s?3:2:P(e,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=s)&&a<=57?a-48:-1)>=0))break;0===i?P(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?P(e,"repeat of an indentation width identifier"):(u=t+i-1,p=!0)}if(g(s)){do{s=e.input.charCodeAt(++e.position)}while(g(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!m(s)&&0!==s)}for(;0!==s;){for(j(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!p||e.lineIndent<u)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!p&&e.lineIndent>u&&(u=e.lineIndent),m(s))d++;else{if(e.lineIndent<u){3===c?e.result+=n.repeat("\n",l?1+d:d):1===c&&l&&(e.result+="\n");break}for(o?g(s)?(h=!0,e.result+=n.repeat("\n",l?1+d:d)):h?(h=!1,e.result+=n.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=n.repeat("\n",d):e.result+=n.repeat("\n",l?1+d:d),l=!0,p=!0,d=0,r=e.position;!m(s)&&0!==s;)s=e.input.charCodeAt(++e.position);T(e,r,e.position,!1)}}return!0}(e,h)||function(e,t){var r,n,o;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(T(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,o=e.position}else m(r)?(T(e,n,o,!0),M(e,I(e,!1,t)),n=o=e.position):e.position===e.lineStart&&R(e)?P(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);P(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var r,n,o,i,s,a,c;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return T(e,r,e.position,!0),e.position++,!0;if(92===a){if(T(e,r,e.position,!0),m(a=e.input.charCodeAt(++e.position)))I(e,!1,t);else if(a<256&&k[a])e.result+=E[a],e.position++;else if((s=120===(c=a)?2:117===c?4:85===c?8:0)>0){for(o=s,i=0;o>0;o--)(s=b(a=e.input.charCodeAt(++e.position)))>=0?i=(i<<4)+s:P(e,"expected hexadecimal character");e.result+=x(i),e.position++}else P(e,"unknown escape sequence");r=n=e.position}else m(a)?(T(e,r,n,!0),M(e,I(e,!1,t)),r=n=e.position):e.position===e.lineStart&&R(e)?P(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}P(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?S=!0:!function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!y(n)&&!v(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&P(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(r)||P(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],I(e,!0,-1),!0}(e)?function(e,t,r){var n,o,i,s,a,c,l,p,u=e.kind,d=e.result;if(y(p=e.input.charCodeAt(e.position))||v(p)||35===p||38===p||42===p||33===p||124===p||62===p||39===p||34===p||37===p||64===p||96===p)return!1;if((63===p||45===p)&&(y(n=e.input.charCodeAt(e.position+1))||r&&v(n)))return!1;for(e.kind="scalar",e.result="",o=i=e.position,s=!1;0!==p;){if(58===p){if(y(n=e.input.charCodeAt(e.position+1))||r&&v(n))break}else if(35===p){if(y(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&R(e)||r&&v(p))break;if(m(p)){if(a=e.line,c=e.lineStart,l=e.lineIndent,I(e,!1,-1),e.lineIndent>=t){s=!0,p=e.input.charCodeAt(e.position);continue}e.position=i,e.line=a,e.lineStart=c,e.lineIndent=l;break}}s&&(T(e,o,i,!1),M(e,e.line-a),o=i=e.position,s=!1),g(p)||(i=e.position+1),p=e.input.charCodeAt(++e.position)}return T(e,o,i,!1),!!e.result||(e.kind=u,e.result=d,!1)}(e,h,1===r)&&(S=!0,null===e.tag&&(e.tag="?")):(S=!0,null===e.tag&&null===e.anchor||P(e,"alias node should not have any properties")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===w&&(S=l&&L(e,f))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&P(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,u=e.implicitTypes.length;p<u;p+=1)if((d=e.implicitTypes[p]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else c.call(e.typeMap[e.kind||"fallback"],e.tag)?(d=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&d.kind!==e.kind&&P(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result)?(e.result=d.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):P(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):P(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||S}function z(e){var t,r,n,o,i=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(o=e.input.charCodeAt(e.position))&&(I(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==o));){for(s=!0,o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&P(e,"directive name must not be less than one character in length");0!==o;){for(;g(o);)o=e.input.charCodeAt(++e.position);if(35===o){do{o=e.input.charCodeAt(++e.position)}while(0!==o&&!m(o));break}if(m(o))break;for(t=e.position;0!==o&&!y(o);)o=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==o&&j(e),c.call(O,r)?O[r](e,r,n):A(e,'unknown document directive "'+r+'"')}I(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,I(e,!0,-1)):s&&P(e,"directives end mark is expected"),B(e,e.lineIndent-1,4,!1,!0),I(e,!0,-1),e.checkLineBreaks&&p.test(e.input.slice(i,e.position))&&A(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&R(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,I(e,!0,-1)):e.position<e.length-1&&P(e,"end of the stream or a document separator is expected")}function U(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new S(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,P(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)z(r);return r.documents}function q(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=U(e,r);if("function"!=typeof t)return n;for(var o=0,i=n.length;o<i;o+=1)t(n[o])}function $(e,t){var r=U(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new o("expected a single document in the stream, but found more")}}e.exports.loadAll=q,e.exports.load=$,e.exports.safeLoadAll=function(e,t,r){return"object"==typeof t&&null!==t&&void 0===r&&(r=t,t=null),q(e,t,n.extend({schema:s},r))},e.exports.safeLoad=function(e,t){return $(e,n.extend({schema:s},t))}},function(e,t,r){"use strict";var n=r(44);function o(e,t,r,n,o){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=o}o.prototype.getSnippet=function(e,t){var r,o,i,s,a;if(!this.buffer)return null;for(e=e||4,t=t||75,r="",o=this.position;o>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o-1));)if(o-=1,this.position-o>t/2-1){r=" ... ",o+=5;break}for(i="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){i=" ... ",s-=5;break}return a=this.buffer.slice(o,s),n.repeat(" ",e)+r+a+i+"\n"+n.repeat(" ",e+this.position-o+r.length)+"^"},o.prototype.toString=function(e){var t,r="";return this.name&&(r+='in "'+this.name+'" '),r+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(r+=":\n"+t),r},e.exports=o},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(44),o=r(17);function i(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new o("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,o=0,a=!1;if(!n)return!1;if("-"!==(t=e[o])&&"+"!==t||(t=e[++o]),"0"===t){if(o+1===n)return!0;if("b"===(t=e[++o])){for(o++;o<n;o++)if("_"!==(t=e[o])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(o++;o<n;o++)if("_"!==(t=e[o])){if(!(48<=(r=e.charCodeAt(o))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;a=!0}return a&&"_"!==t}for(;o<n;o++)if("_"!==(t=e[o])){if(!i(e.charCodeAt(o)))return!1;a=!0}return a&&"_"!==t}if("_"===t)return!1;for(;o<n;o++)if("_"!==(t=e[o])){if(":"===t)break;if(!s(e.charCodeAt(o)))return!1;a=!0}return!(!a||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(o)))},construct:function(e){var t,r,n=e,o=1,i=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(o=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?o*parseInt(n.slice(2),2):"x"===n[1]?o*parseInt(n,16):o*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(e){i.unshift(parseInt(e,10))})),n=0,r=1,i.forEach((function(e){n+=e*r,r*=60})),o*n):o*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!n.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,r){"use strict";var n=r(44),o=r(17),i=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var s=/^[-+]?[0-9]+e/;e.exports=new o("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!i.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r,n,o;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,o=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){o.unshift(parseFloat(e,10))})),t=0,n=1,o.forEach((function(e){t+=e*n,n*=60})),r*t):r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||n.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(n.isNegativeZero(e))return"-0.0";return r=e.toString(10),s.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"})},function(e,t,r){"use strict";var n=r(17),o=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),i=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new n("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==o.exec(e)||null!==i.exec(e))},construct:function(e){var t,r,n,s,a,c,l,p,u=0,d=null;if(null===(t=o.exec(e))&&(t=i.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(a=+t[4],c=+t[5],l=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(d=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(d=-d)),p=new Date(Date.UTC(r,n,s,a,c,l,u)),d&&p.setTime(p.getTime()-d),p},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,r){"use strict";var n;try{n=r(30).Buffer}catch(e){}var o=r(17),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new o("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,o=e.length,s=i;for(r=0;r<o;r++)if(!((t=s.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,o=e.replace(/[\r\n=]/g,""),s=o.length,a=i,c=0,l=[];for(t=0;t<s;t++)t%4==0&&t&&(l.push(c>>16&255),l.push(c>>8&255),l.push(255&c)),c=c<<6|a.indexOf(o.charAt(t));return 0===(r=s%4*6)?(l.push(c>>16&255),l.push(c>>8&255),l.push(255&c)):18===r?(l.push(c>>10&255),l.push(c>>2&255)):12===r&&l.push(c>>4&255),n?n.from?n.from(l):new n(l):l},predicate:function(e){return n&&n.isBuffer(e)},represent:function(e){var t,r,n="",o=0,s=e.length,a=i;for(t=0;t<s;t++)t%3==0&&t&&(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]),o=(o<<8)+e[t];return 0===(r=s%3)?(n+=a[o>>18&63],n+=a[o>>12&63],n+=a[o>>6&63],n+=a[63&o]):2===r?(n+=a[o>>10&63],n+=a[o>>4&63],n+=a[o<<2&63],n+=a[64]):1===r&&(n+=a[o>>2&63],n+=a[o<<4&63],n+=a[64],n+=a[64]),n}})},function(e,t,r){"use strict";var n=r(17),o=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,s,a,c=[],l=e;for(t=0,r=l.length;t<r;t+=1){if(n=l[t],a=!1,"[object Object]"!==i.call(n))return!1;for(s in n)if(o.call(n,s)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==c.indexOf(s))return!1;c.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,r){"use strict";var n=r(17),o=Object.prototype.toString;e.exports=new n("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,s,a=e;for(s=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(n=a[t],"[object Object]"!==o.call(n))return!1;if(1!==(i=Object.keys(n)).length)return!1;s[t]=[i[0],n[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,o,i,s=e;for(i=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],o=Object.keys(n),i[t]=[o[0],n[o[0]]];return i}})},function(e,t,r){"use strict";var n=r(17),o=Object.prototype.hasOwnProperty;e.exports=new n("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if(o.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,r){"use strict";var n=r(17);e.exports=new n("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";if("/"===t[0]){if(r&&(n=r[1]),n.length>3)return!1;if("/"!==t[t.length-n.length-1])return!1}return!0},construct:function(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return"/"===t[0]&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,r){"use strict";var n;try{n=r(337)}catch(e){"undefined"!=typeof window&&(n=window.esprima)}var o=r(17);e.exports=new o("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",r=n.parse(t,{range:!0});return"Program"===r.type&&1===r.body.length&&"ExpressionStatement"===r.body[0].type&&("ArrowFunctionExpression"===r.body[0].expression.type||"FunctionExpression"===r.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,r="("+e+")",o=n.parse(r,{range:!0}),i=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach((function(e){i.push(e.name)})),t=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?new Function(i,r.slice(t[0]+1,t[1]-1)):new Function(i,"return "+r.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,r){var n;n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=e,r.c=t,r.p="",r(0)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(8),s=r(15);function a(e,t,r){var s=null,a=function(e,t){r&&r(e,t),s&&s.visit(e,t)},c="function"==typeof r?a:null,l=!1;if(t){l="boolean"==typeof t.comment&&t.comment;var p="boolean"==typeof t.attachComment&&t.attachComment;(l||p)&&((s=new n.CommentHandler).attach=p,t.comment=!0,c=a)}var u,d=!1;t&&"string"==typeof t.sourceType&&(d="module"===t.sourceType),u=t&&"boolean"==typeof t.jsx&&t.jsx?new o.JSXParser(e,t,c):new i.Parser(e,t,c);var h=d?u.parseModule():u.parseScript();return l&&s&&(h.comments=s.comments),u.config.tokens&&(h.tokens=u.tokens),u.config.tolerant&&(h.errors=u.errorHandler.errors),h}t.parse=a,t.parseModule=function(e,t,r){var n=t||{};return n.sourceType="module",a(e,n,r)},t.parseScript=function(e,t,r){var n=t||{};return n.sourceType="script",a(e,n,r)},t.tokenize=function(e,t,r){var n,o=new s.Tokenizer(e,t);n=[];try{for(;;){var i=o.getNextToken();if(!i)break;r&&(i=r(i)),n.push(i)}}catch(e){o.errorHandler.tolerate(e)}return o.errorHandler.tolerant&&(n.errors=o.errors()),n};var c=r(2);t.Syntax=c.Syntax,t.version="4.0.1"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===n.Syntax.BlockStatement&&0===e.body.length){for(var r=[],o=this.leading.length-1;o>=0;--o){var i=this.leading[o];t.end.offset>=i.start&&(r.unshift(i.comment),this.leading.splice(o,1),this.trailing.splice(o,1))}r.length&&(e.innerComments=r)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var r=this.trailing.length-1;r>=0;--r){var n=this.trailing[r];n.start>=e.end.offset&&t.unshift(n.comment)}return this.trailing.length=0,t}var o=this.stack[this.stack.length-1];if(o&&o.node.trailingComments){var i=o.node.trailingComments[0];i&&i.range[0]>=e.end.offset&&(t=o.node.trailingComments,delete o.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,r=[];this.stack.length>0&&((i=this.stack[this.stack.length-1])&&i.start>=e.start.offset);)t=i.node,this.stack.pop();if(t){for(var n=(t.leadingComments?t.leadingComments.length:0)-1;n>=0;--n){var o=t.leadingComments[n];o.range[1]<=e.start.offset&&(r.unshift(o),t.leadingComments.splice(n,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,r}for(n=this.leading.length-1;n>=0;--n){var i;(i=this.leading[n]).start<=e.start.offset&&(r.unshift(i.comment),this.leading.splice(n,1))}return r},e.prototype.visitNode=function(e,t){if(!(e.type===n.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var r=this.findTrailingComments(t),o=this.findLeadingComments(t);o.length>0&&(e.leadingComments=o),r.length>0&&(e.trailingComments=r),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var r="L"===e.type[0]?"Line":"Block",n={type:r,value:e.value};if(e.range&&(n.range=e.range),e.loc&&(n.loc=e.loc),this.comments.push(n),this.attach){var o={comment:{type:r,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(o.comment.loc=e.loc),e.type=r,this.leading.push(o),this.trailing.push(o)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),s=r(5),a=r(6),c=r(7),l=r(8),p=r(13),u=r(14);function d(e){var t;switch(e.type){case a.JSXSyntax.JSXIdentifier:t=e.name;break;case a.JSXSyntax.JSXNamespacedName:var r=e;t=d(r.namespace)+":"+d(r.name);break;case a.JSXSyntax.JSXMemberExpression:var n=e;t=d(n.object)+"."+d(n.property)}return t}p.TokenName[100]="JSXIdentifier",p.TokenName[101]="JSXText";var h=function(e){function t(t,r,n){return e.call(this,t,r,n)||this}return o(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",r=!0,n=!1,o=!1,s=!1;!this.scanner.eof()&&r&&!n;){var a=this.scanner.source[this.scanner.index];if(a===e)break;if(n=";"===a,t+=a,++this.scanner.index,!n)switch(t.length){case 2:o="#"===a;break;case 3:o&&(r=(s="x"===a)||i.Character.isDecimalDigit(a.charCodeAt(0)),o=o&&!s);break;default:r=(r=r&&!(o&&!i.Character.isDecimalDigit(a.charCodeAt(0))))&&!(s&&!i.Character.isHexDigit(a.charCodeAt(0)))}}if(r&&n&&t.length>2){var c=t.substr(1,t.length-2);o&&c.length>1?t=String.fromCharCode(parseInt(c.substr(1),10)):s&&c.length>2?t=String.fromCharCode(parseInt("0"+c.substr(1),16)):o||s||!u.XHTMLEntities[c]||(t=u.XHTMLEntities[c])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:a=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,r=this.scanner.source[this.scanner.index++],n="";!this.scanner.eof()&&(c=this.scanner.source[this.scanner.index++])!==r;)n+="&"===c?this.scanXHTMLEntity(r):c;return{type:8,value:n,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var o=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),a=46===o&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=a.length,{type:7,value:a,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var c=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(c)&&92!==c)++this.scanner.index;else{if(45!==c)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var r=this.scanner.source[this.scanner.index];if("{"===r||"<"===r)break;++this.scanner.index,t+=r,i.Character.isLineTerminator(r.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===r&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var n={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(n)),n},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=t;this.expectJSX(":");var n=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(r,n))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var o=t;this.expectJSX(".");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(o,i))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),r=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=r;this.expectJSX(":");var o=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(n,o))}else e=r;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var r=this.getTokenRaw(t);return this.finalize(e,new c.Literal(t.value,r))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),r=null;return this.matchJSX("=")&&(this.expectJSX("="),r=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,r))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),r=this.parseJSXAttributes(),n=this.matchJSX("/");return n&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,n,r))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var r=this.parseJSXElementName(),n=this.parseJSXAttributes(),o=this.matchJSX("/");return o&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(r,o,n))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),r=this.nextJSXText();if(r.start<r.end){var n=this.getTokenRaw(r),o=this.finalize(t,new s.JSXText(r.value,n));e.push(o)}if("{"!==this.scanner.source[this.scanner.index])break;var i=this.parseJSXExpressionContainer();e.push(i)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var r=this.createJSXChildNode(),n=this.parseJSXBoundaryElement();if(n.type===a.JSXSyntax.JSXOpeningElement){var o=n;if(o.selfClosing){var i=this.finalize(r,new s.JSXElement(o,[],null));e.children.push(i)}else t.push(e),e={node:r,opening:o,closing:null,children:[]}}if(n.type===a.JSXSyntax.JSXClosingElement){e.closing=n;var c=d(e.opening.name);if(c!==d(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",c),!(t.length>0))break;i=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(i),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),r=[],n=null;if(!t.selfClosing){var o=this.parseComplexJSXElement({node:e,opening:t,closing:n,children:r});r=o.children,n=o.closing}return this.finalize(e,new s.JSXElement(t,r,n))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(l.Parser);t.JSXParser=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&r.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&r.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),o=function(e){this.type=n.JSXSyntax.JSXClosingElement,this.name=e};t.JSXClosingElement=o;var i=function(e,t,r){this.type=n.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=r};t.JSXElement=i;var s=function(){this.type=n.JSXSyntax.JSXEmptyExpression};t.JSXEmptyExpression=s;var a=function(e){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXExpressionContainer=a;var c=function(e){this.type=n.JSXSyntax.JSXIdentifier,this.name=e};t.JSXIdentifier=c;var l=function(e,t){this.type=n.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXMemberExpression=l;var p=function(e,t){this.type=n.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXAttribute=p;var u=function(e,t){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXNamespacedName=u;var d=function(e,t,r){this.type=n.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=r};t.JSXOpeningElement=d;var h=function(e){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXSpreadAttribute=h;var f=function(e,t){this.type=n.JSXSyntax.JSXText,this.value=e,this.raw=t};t.JSXText=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(e){this.type=n.Syntax.ArrayExpression,this.elements=e};t.ArrayExpression=o;var i=function(e){this.type=n.Syntax.ArrayPattern,this.elements=e};t.ArrayPattern=i;var s=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!1};t.ArrowFunctionExpression=s;var a=function(e,t,r){this.type=n.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=r};t.AssignmentExpression=a;var c=function(e,t){this.type=n.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AssignmentPattern=c;var l=function(e,t,r){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=r,this.async=!0};t.AsyncArrowFunctionExpression=l;var p=function(e,t,r){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionDeclaration=p;var u=function(e,t,r){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=u;var d=function(e){this.type=n.Syntax.AwaitExpression,this.argument=e};t.AwaitExpression=d;var h=function(e,t,r){var o="||"===e||"&&"===e;this.type=o?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=r};t.BinaryExpression=h;var f=function(e){this.type=n.Syntax.BlockStatement,this.body=e};t.BlockStatement=f;var m=function(e){this.type=n.Syntax.BreakStatement,this.label=e};t.BreakStatement=m;var g=function(e,t){this.type=n.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CallExpression=g;var y=function(e,t){this.type=n.Syntax.CatchClause,this.param=e,this.body=t};t.CatchClause=y;var v=function(e){this.type=n.Syntax.ClassBody,this.body=e};t.ClassBody=v;var b=function(e,t,r){this.type=n.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=r};t.ClassDeclaration=b;var w=function(e,t,r){this.type=n.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=r};t.ClassExpression=w;var x=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ComputedMemberExpression=x;var k=function(e,t,r){this.type=n.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=r};t.ConditionalExpression=k;var E=function(e){this.type=n.Syntax.ContinueStatement,this.label=e};t.ContinueStatement=E;var _=function(){this.type=n.Syntax.DebuggerStatement};t.DebuggerStatement=_;var S=function(e,t){this.type=n.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.Directive=S;var C=function(e,t){this.type=n.Syntax.DoWhileStatement,this.body=e,this.test=t};t.DoWhileStatement=C;var P=function(){this.type=n.Syntax.EmptyStatement};t.EmptyStatement=P;var A=function(e){this.type=n.Syntax.ExportAllDeclaration,this.source=e};t.ExportAllDeclaration=A;var O=function(e){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportDefaultDeclaration=O;var T=function(e,t,r){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=r};t.ExportNamedDeclaration=T;var D=function(e,t){this.type=n.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExportSpecifier=D;var N=function(e){this.type=n.Syntax.ExpressionStatement,this.expression=e};t.ExpressionStatement=N;var j=function(e,t,r){this.type=n.Syntax.ForInStatement,this.left=e,this.right=t,this.body=r,this.each=!1};t.ForInStatement=j;var I=function(e,t,r){this.type=n.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=r};t.ForOfStatement=I;var R=function(e,t,r,o){this.type=n.Syntax.ForStatement,this.init=e,this.test=t,this.update=r,this.body=o};t.ForStatement=R;var M=function(e,t,r,o){this.type=n.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionDeclaration=M;var L=function(e,t,r,o){this.type=n.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=r,this.generator=o,this.expression=!1,this.async=!1};t.FunctionExpression=L;var F=function(e){this.type=n.Syntax.Identifier,this.name=e};t.Identifier=F;var G=function(e,t,r){this.type=n.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=r};t.IfStatement=G;var B=function(e,t){this.type=n.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDeclaration=B;var z=function(e){this.type=n.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportDefaultSpecifier=z;var U=function(e){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportNamespaceSpecifier=U;var q=function(e,t){this.type=n.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.ImportSpecifier=q;var $=function(e,t){this.type=n.Syntax.LabeledStatement,this.label=e,this.body=t};t.LabeledStatement=$;var H=function(e,t){this.type=n.Syntax.Literal,this.value=e,this.raw=t};t.Literal=H;var V=function(e,t){this.type=n.Syntax.MetaProperty,this.meta=e,this.property=t};t.MetaProperty=V;var W=function(e,t,r,o,i){this.type=n.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=r,this.kind=o,this.static=i};t.MethodDefinition=W;var J=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="module"};t.Module=J;var X=function(e,t){this.type=n.Syntax.NewExpression,this.callee=e,this.arguments=t};t.NewExpression=X;var Y=function(e){this.type=n.Syntax.ObjectExpression,this.properties=e};t.ObjectExpression=Y;var K=function(e){this.type=n.Syntax.ObjectPattern,this.properties=e};t.ObjectPattern=K;var Q=function(e,t,r,o,i,s){this.type=n.Syntax.Property,this.key=t,this.computed=r,this.value=o,this.kind=e,this.method=i,this.shorthand=s};t.Property=Q;var Z=function(e,t,r,o){this.type=n.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:r,flags:o}};t.RegexLiteral=Z;var ee=function(e){this.type=n.Syntax.RestElement,this.argument=e};t.RestElement=ee;var te=function(e){this.type=n.Syntax.ReturnStatement,this.argument=e};t.ReturnStatement=te;var re=function(e){this.type=n.Syntax.Program,this.body=e,this.sourceType="script"};t.Script=re;var ne=function(e){this.type=n.Syntax.SequenceExpression,this.expressions=e};t.SequenceExpression=ne;var oe=function(e){this.type=n.Syntax.SpreadElement,this.argument=e};t.SpreadElement=oe;var ie=function(e,t){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.StaticMemberExpression=ie;var se=function(){this.type=n.Syntax.Super};t.Super=se;var ae=function(e,t){this.type=n.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchCase=ae;var ce=function(e,t){this.type=n.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.SwitchStatement=ce;var le=function(e,t){this.type=n.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TaggedTemplateExpression=le;var pe=function(e,t){this.type=n.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateElement=pe;var ue=function(e,t){this.type=n.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.TemplateLiteral=ue;var de=function(){this.type=n.Syntax.ThisExpression};t.ThisExpression=de;var he=function(e){this.type=n.Syntax.ThrowStatement,this.argument=e};t.ThrowStatement=he;var fe=function(e,t,r){this.type=n.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=r};t.TryStatement=fe;var me=function(e,t){this.type=n.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UnaryExpression=me;var ge=function(e,t,r){this.type=n.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=r};t.UpdateExpression=ge;var ye=function(e,t){this.type=n.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclaration=ye;var ve=function(e,t){this.type=n.Syntax.VariableDeclarator,this.id=e,this.init=t};t.VariableDeclarator=ve;var be=function(e,t){this.type=n.Syntax.WhileStatement,this.test=e,this.body=t};t.WhileStatement=be;var we=function(e,t){this.type=n.Syntax.WithStatement,this.object=e,this.body=t};t.WithStatement=we;var xe=function(e,t){this.type=n.Syntax.YieldExpression,this.argument=e,this.delegate=t};t.YieldExpression=xe},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(10),i=r(11),s=r(7),a=r(12),c=r(2),l=r(13),p=function(){function e(e,t,r){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=r,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),s=this.lastMarker.index,a=this.lastMarker.line,c=this.lastMarker.column+1;throw this.errorHandler.createError(s,a,c,i)},e.prototype.tolerateError=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o=Array.prototype.slice.call(arguments,1),i=e.replace(/%(\d)/g,(function(e,t){return n.assert(t<o.length,"Message reference must be in range"),o[t]})),s=this.lastMarker.index,a=this.scanner.lineNumber,c=this.lastMarker.column+1;this.errorHandler.tolerateError(s,a,c,i)},e.prototype.unexpectedTokenError=function(e,t){var r,n=t||i.Messages.UnexpectedToken;if(e?(t||(n=2===e.type?i.Messages.UnexpectedEOS:3===e.type?i.Messages.UnexpectedIdentifier:6===e.type?i.Messages.UnexpectedNumber:8===e.type?i.Messages.UnexpectedString:10===e.type?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?n=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=i.Messages.StrictReservedWord))),r=e.value):r="ILLEGAL",n=n.replace("%0",r),e&&"number"==typeof e.lineNumber){var o=e.start,s=e.lineNumber,a=this.lastMarker.index-this.lastMarker.column,c=e.start-a+1;return this.errorHandler.createError(o,s,c,n)}return o=this.lastMarker.index,s=this.lastMarker.line,c=this.lastMarker.column+1,this.errorHandler.createError(o,s,c,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var r=e[t],n=void 0;n={type:r.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(r.slice[0],r.slice[1])},this.config.range&&(n.range=r.range),this.config.loc&&(n.loc=r.loc);var o={start:{line:r.loc.start.line,column:r.loc.start.column,offset:r.range[0]},end:{line:r.loc.end.line,column:r.loc.end.column,offset:r.range[1]}};this.delegate(n,o)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:l.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var r=e.pattern,n=e.flags;t.regex={pattern:r,flags:n}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var r=e.start-e.lineStart,n=e.lineNumber;return r<0&&(r+=t,n--),{index:e.start,line:n,column:r}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var r={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,r)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,i.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=r,this.context.firstCoverInitializedNameError=n,o},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,r=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var o=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&r,this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError,o},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,r,n=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(n,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(t.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal("true"===t.value,r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.Literal(null,r));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),r=this.getTokenRaw(t),e=this.finalize(n,new s.RegexLiteral(t.regex,r,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(n,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(n,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var r=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(r)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,r=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var n=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=r,n},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,r=this.context.await;this.context.allowYield=!1,this.context.await=!0;var n=this.parseFormalParameters(),o=this.parsePropertyMethod(n);return this.context.allowYield=t,this.context.await=r,this.finalize(e,new s.AsyncFunctionExpression(null,n.params,o))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),r=this.nextToken();switch(r.type){case 8:case 6:this.context.strict&&r.octal&&this.tolerateUnexpectedToken(r,i.Messages.StrictOctalLiteral);var n=this.getTokenRaw(r);e=this.finalize(t,new s.Literal(r.value,n));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(r.value));break;case 7:"["===r.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(r);break;default:e=this.throwUnexpectedToken(r)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===c.Syntax.Identifier&&e.name===t||e.type===c.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,r=this.createNode(),n=this.lookahead,o=null,a=null,c=!1,l=!1,p=!1,u=!1;if(3===n.type){var d=n.value;this.nextToken(),c=this.match("["),o=(u=!(this.hasLineTerminator||"async"!==d||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(r,new s.Identifier(d))}else this.match("*")?this.nextToken():(c=this.match("["),o=this.parseObjectPropertyKey());var h=this.qualifiedPropertyName(this.lookahead);if(3===n.type&&!u&&"get"===n.value&&h)t="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod();else if(3===n.type&&!u&&"set"===n.value&&h)t="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod();else if(7===n.type&&"*"===n.value&&h)t="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),l=!0;else if(o||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!u)!c&&this.isPropertyKey(o,"__proto__")&&(e.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),a=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))a=u?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),l=!0;else if(3===n.type)if(d=this.finalize(r,new s.Identifier(n.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),p=!0;var f=this.isolateCoverGrammar(this.parseAssignmentExpression);a=this.finalize(r,new s.AssignmentPattern(d,f))}else p=!0,a=d;else this.throwUnexpectedToken(this.nextToken());return this.finalize(r,new s.Property(t,o,c,a,l,p))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],r={value:!1};!this.match("}");)t.push(this.parseObjectProperty(r)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),r=t.value,o=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:o},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),r=t.value,n=t.cooked;return this.finalize(e,new s.TemplateElement({raw:r,cooked:n},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],r=[],n=this.parseTemplateHead();for(r.push(n);!n.tail;)t.push(this.parseExpression()),n=this.parseTemplateElement(),r.push(n);return this.finalize(e,new s.TemplateLiteral(r,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case c.Syntax.Identifier:case c.Syntax.MemberExpression:case c.Syntax.RestElement:case c.Syntax.AssignmentPattern:break;case c.Syntax.SpreadElement:e.type=c.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case c.Syntax.ArrayExpression:e.type=c.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case c.Syntax.ObjectExpression:for(e.type=c.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case c.Syntax.AssignmentExpression:e.type=c.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var t=this.lookahead,r=[];if(this.match("..."))e=this.parseRestElement(r),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:"ArrowParameterPlaceHolder",params:[e],async:!1};else{var n=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var o=[];for(this.context.isAssignmentTarget=!1,o.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),o.push(this.parseRestElement(r)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,i=0;i<o.length;i++)this.reinterpretExpressionAsPattern(o[i]);n=!0,e={type:"ArrowParameterPlaceHolder",params:o,async:!1}}else o.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(n)break}n||(e=this.finalize(this.startNode(t),new s.SequenceExpression(o)))}if(!n){if(this.expect(")"),this.match("=>")&&(e.type===c.Syntax.Identifier&&"yield"===e.name&&(n=!0,e={type:"ArrowParameterPlaceHolder",params:[e],async:!1}),!n)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===c.Syntax.SequenceExpression)for(i=0;i<e.expressions.length;i++)this.reinterpretExpressionAsPattern(e.expressions[i]);else this.reinterpretExpressionAsPattern(e);e={type:"ArrowParameterPlaceHolder",params:e.type===c.Syntax.SequenceExpression?e.expressions:[e],async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),r=this.parseIdentifierName();if(n.assert("new"===r.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var o=this.parseIdentifierName();e=new s.MetaProperty(r,o)}else this.throwUnexpectedToken(this.lookahead);else{var i=this.isolateCoverGrammar(this.parseLeftHandSideExpression),a=this.match("(")?this.parseArguments():[];e=new s.NewExpression(i,a),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,r=this.matchContextualKeyword("async"),n=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var o=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,o))}else if(this.match("(")){var i=r&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var a=i?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,a)),i&&this.match("=>")){for(var c=0;c<a.length;++c)this.reinterpretExpressionAsPattern(a[c]);e={type:"ArrowParameterPlaceHolder",params:a,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),o=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,o));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var l=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,l))}return this.context.allowIn=n,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var r=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,r))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,r));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var o=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,o))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var r=this.startNode(t),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var o=!0;e=this.finalize(r,new s.UpdateExpression(n.value,e,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=this.nextToken().value;o=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(a,e,o))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(r.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===c.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==c.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var r=t,n=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",r,n))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),r=this.lookahead,n=this.binaryPrecedence(r);if(n>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var o=[e,this.lookahead],i=t,a=this.isolateCoverGrammar(this.parseExponentiationExpression),c=[i,r.value,a],l=[n];!((n=this.binaryPrecedence(this.lookahead))<=0);){for(;c.length>2&&n<=l[l.length-1];){a=c.pop();var p=c.pop();l.pop(),i=c.pop(),o.pop();var u=this.startNode(o[o.length-1]);c.push(this.finalize(u,new s.BinaryExpression(p,i,a)))}c.push(this.nextToken().value),l.push(n),o.push(this.lookahead),c.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var d=c.length-1;t=c[d];for(var h=o.pop();d>1;){var f=o.pop(),m=h&&h.lineStart;u=this.startNode(f,m),p=c[d-1],t=this.finalize(u,new s.BinaryExpression(p,c[d-2],t)),d-=2,h=f}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var r=this.context.allowIn;this.context.allowIn=!0;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=r,this.expect(":");var o=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,n,o)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case c.Syntax.Identifier:this.validateParam(e,t,t.name);break;case c.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case c.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case c.Syntax.ArrayPattern:for(var r=0;r<t.elements.length;r++)null!==t.elements[r]&&this.checkPatternParam(e,t.elements[r]);break;case c.Syntax.ObjectPattern:for(r=0;r<t.properties.length;r++)this.checkPatternParam(e,t.properties[r].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,r=[e],n=!1;switch(e.type){case c.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":r=e.params,n=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var o=0;o<r.length;++o)(s=r[o]).type===c.Syntax.AssignmentPattern?s.right.type===c.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=c.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):n&&s.type===c.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),r[o]=s;if(this.context.strict||!this.context.allowYield)for(o=0;o<r.length;++o){var s;(s=r[o]).type===c.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===i.Messages.StrictParamDupe){var a=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(a,t.message)}return{simple:t.simple,params:r,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,r=t;if(e=this.parseConditionalExpression(),3===r.type&&r.lineNumber===this.lookahead.lineNumber&&"async"===r.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var n=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(n),e={type:"ArrowParameterPlaceHolder",params:[n],async:!0}}if("ArrowParameterPlaceHolder"===e.type||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=e.async,a=this.reinterpretAsCoverFormalsList(e);if(a){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var l=this.context.strict,p=this.context.allowStrictDirective;this.context.allowStrictDirective=a.simple;var u=this.context.allowYield,d=this.context.await;this.context.allowYield=!0,this.context.await=o;var h=this.startNode(t);this.expect("=>");var f=void 0;if(this.match("{")){var m=this.context.allowIn;this.context.allowIn=!0,f=this.parseFunctionSourceElements(),this.context.allowIn=m}else f=this.isolateCoverGrammar(this.parseAssignmentExpression);var g=f.type!==c.Syntax.BlockStatement;this.context.strict&&a.firstRestricted&&this.throwUnexpectedToken(a.firstRestricted,a.message),this.context.strict&&a.stricted&&this.tolerateUnexpectedToken(a.stricted,a.message),e=o?this.finalize(h,new s.AsyncArrowFunctionExpression(a.params,f,g)):this.finalize(h,new s.ArrowFunctionExpression(a.params,f,g)),this.context.strict=l,this.context.allowStrictDirective=p,this.context.allowYield=u,this.context.await=d}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===c.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var v=(r=this.nextToken()).value,b=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(v,e,b)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var r=[];for(r.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),r.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(r))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var r=this.createNode(),n=this.parsePattern([],e);this.context.strict&&n.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(i.Messages.StrictVarName);var o=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),o=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&n.type!==c.Syntax.Identifier||this.match("="))&&(this.expect("="),o=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(r,new s.VariableDeclarator(n,o))},e.prototype.parseBindingList=function(e,t){for(var r=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),r.push(this.parseLexicalBinding(e,t));return r},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),r=this.nextToken().value;n.assert("let"===r||"const"===r,"Lexical declaration must be either let or const");var o=this.parseBindingList(r,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(o,r))},e.prototype.parseBindingRestElement=function(e,t){var r=this.createNode();this.expect("...");var n=this.parsePattern(e,t);return this.finalize(r,new s.RestElement(n))},e.prototype.parseArrayPattern=function(e,t){var r=this.createNode();this.expect("[");for(var n=[];!this.match("]");)if(this.match(","))this.nextToken(),n.push(null);else{if(this.match("...")){n.push(this.parseBindingRestElement(e,t));break}n.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(r,new s.ArrayPattern(n))},e.prototype.parsePropertyPattern=function(e,t){var r,n,o=this.createNode(),i=!1,a=!1;if(3===this.lookahead.type){var c=this.lookahead;r=this.parseVariableIdentifier();var l=this.finalize(o,new s.Identifier(c.value));if(this.match("=")){e.push(c),a=!0,this.nextToken();var p=this.parseAssignmentExpression();n=this.finalize(this.startNode(c),new s.AssignmentPattern(l,p))}else this.match(":")?(this.expect(":"),n=this.parsePatternWithDefault(e,t)):(e.push(c),a=!0,n=l)}else i=this.match("["),r=this.parseObjectPropertyKey(),this.expect(":"),n=this.parsePatternWithDefault(e,t);return this.finalize(o,new s.Property("init",r,i,n,!1,a))},e.prototype.parseObjectPattern=function(e,t){var r=this.createNode(),n=[];for(this.expect("{");!this.match("}");)n.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(r,new s.ObjectPattern(n))},e.prototype.parsePattern=function(e,t){var r;return this.match("[")?r=this.parseArrayPattern(e,t):this.match("{")?r=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),e.push(this.lookahead),r=this.parseVariableIdentifier(t)),r},e.prototype.parsePatternWithDefault=function(e,t){var r=this.lookahead,n=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var o=this.context.allowYield;this.context.allowYield=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=o,n=this.finalize(this.startNode(r),new s.AssignmentPattern(n,i))}return n},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),r=this.nextToken();return 4===r.type&&"yield"===r.value?this.context.strict?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(r):3!==r.type?this.context.strict&&4===r.type&&this.scanner.isStrictModeReservedWord(r.value)?this.tolerateUnexpectedToken(r,i.Messages.StrictReservedWord):(this.context.strict||"let"!==r.value||"var"!==e)&&this.throwUnexpectedToken(r):(this.context.isModule||this.context.await)&&3===r.type&&"await"===r.value&&this.tolerateUnexpectedToken(r),this.finalize(t,new s.Identifier(r.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),r=this.parsePattern([],"var");this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictVarName);var n=null;return this.match("=")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type===c.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(r,n))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},r=[];for(r.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),r.push(this.parseVariableDeclaration(t));return r},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),r=null;this.expectKeyword("if"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),r=this.parseIfClause())),this.finalize(t,new s.IfStatement(n,e,r))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var r=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(r,n))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var n=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=n}return this.finalize(t,new s.WhileStatement(r,e))},e.prototype.parseForStatement=function(){var e,t,r,n=null,o=null,a=null,l=!0,p=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){n=this.createNode(),this.nextToken();var u=this.context.allowIn;this.context.allowIn=!1;var d=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=u,1===d.length&&this.matchKeyword("in")){var h=d[0];h.init&&(h.id.type===c.Syntax.ArrayPattern||h.id.type===c.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseExpression(),n=null}else 1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,l=!1):(n=this.finalize(n,new s.VariableDeclaration(d,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){n=this.createNode();var f=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(u=this.context.allowIn,this.context.allowIn=!1,d=this.parseBindingList(f,{inFor:!0}),this.context.allowIn=u,1===d.length&&null===d[0].init&&this.matchKeyword("in")?(n=this.finalize(n,new s.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseExpression(),n=null):1===d.length&&null===d[0].init&&this.matchContextualKeyword("of")?(n=this.finalize(n,new s.VariableDeclaration(d,f)),this.nextToken(),e=n,t=this.parseAssignmentExpression(),n=null,l=!1):(this.consumeSemicolon(),n=this.finalize(n,new s.VariableDeclaration(d,f)))):(n=this.finalize(n,new s.Identifier(f)),this.nextToken(),e=n,t=this.parseExpression(),n=null)}else{var m=this.lookahead;if(u=this.context.allowIn,this.context.allowIn=!1,n=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=u,this.matchKeyword("in"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseExpression(),n=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&n.type!==c.Syntax.AssignmentExpression||this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(n),e=n,t=this.parseAssignmentExpression(),n=null,l=!1;else{if(this.match(",")){for(var g=[n];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));n=this.finalize(this.startNode(m),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(o=this.parseExpression()),this.expect(";"),this.match(")")||(a=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),r=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var y=this.context.inIteration;this.context.inIteration=!0,r=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=y}return void 0===e?this.finalize(p,new s.ForStatement(n,o,a,r)):l?this.finalize(p,new s.ForInStatement(e,t,r)):this.finalize(p,new s.ForOfStatement(e,t,r))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier();t=r;var n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(i.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var r=this.parseVariableIdentifier(),n="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,n)||this.throwError(i.Messages.UnknownLabel,r.name),t=r}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(i.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(r,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var r=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)r.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,r))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var r=this.context.inSwitch;this.context.inSwitch=!0;var n=[],o=!1;for(this.expect("{");!this.match("}");){var a=this.parseSwitchCase();null===a.test&&(o&&this.throwError(i.Messages.MultipleDefaultsInSwitch),o=!0),n.push(a)}return this.expect("}"),this.context.inSwitch=r,this.finalize(e,new s.SwitchStatement(t,n))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),r=this.parseExpression();if(r.type===c.Syntax.Identifier&&this.match(":")){this.nextToken();var n=r,o="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,o)&&this.throwError(i.Messages.Redeclaration,"Label",n.name),this.context.labelSet[o]=!0;var a=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),a=this.parseClassDeclaration();else if(this.matchKeyword("function")){var l=this.lookahead,p=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(l,i.Messages.StrictFunction):p.generator&&this.tolerateUnexpectedToken(l,i.Messages.GeneratorInLegacyContext),a=p}else a=this.parseStatement();delete this.context.labelSet[o],e=new s.LabeledStatement(n,a)}else this.consumeSemicolon(),e=new s.ExpressionStatement(r);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],r=this.parsePattern(t),n={},o=0;o<t.length;o++){var a="$"+t[o].value;Object.prototype.hasOwnProperty.call(n,a)&&this.tolerateError(i.Messages.DuplicateBinding,t[o].value),n[a]=!0}this.context.strict&&r.type===c.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var l=this.parseBlock();return this.finalize(e,new s.CatchClause(r,l))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),r=this.matchKeyword("catch")?this.parseCatchClause():null,n=this.matchKeyword("finally")?this.parseFinallyClause():null;return r||n||this.throwError(i.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,r,n))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),r=this.context.labelSet,n=this.context.inIteration,o=this.context.inSwitch,i=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=r,this.context.inIteration=n,this.context.inSwitch=o,this.context.inFunctionBody=i,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,r){var n="$"+r;this.context.strict?(this.scanner.isRestrictedWord(r)&&(e.stricted=t,e.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(r)?(e.firstRestricted=t,e.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,n)&&(e.stricted=t,e.message=i.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,n,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[n]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(r))},e.prototype.parseFormalParameter=function(e){for(var t=[],r=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),n=0;n<t.length;n++)this.validateParam(e,t[n],t[n].value);e.simple=e.simple&&r instanceof s.Identifier,e.params.push(r)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var r=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===r.lineNumber&&4===r.type&&"function"===r.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),r=this.matchContextualKeyword("async");r&&this.nextToken(),this.expectKeyword("function");var n,o=!r&&this.match("*");o&&this.nextToken();var a=null,c=null;if(!e||!this.match("(")){var l=this.lookahead;a=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(l.value)&&this.tolerateUnexpectedToken(l,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(l.value)?(c=l,n=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(l.value)&&(c=l,n=i.Messages.StrictReservedWord)}var p=this.context.await,u=this.context.allowYield;this.context.await=r,this.context.allowYield=!o;var d=this.parseFormalParameters(c),h=d.params,f=d.stricted;c=d.firstRestricted,d.message&&(n=d.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var y=this.parseFunctionSourceElements();return this.context.strict&&c&&this.throwUnexpectedToken(c,n),this.context.strict&&f&&this.tolerateUnexpectedToken(f,n),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=p,this.context.allowYield=u,r?this.finalize(t,new s.AsyncFunctionDeclaration(a,h,y)):this.finalize(t,new s.FunctionDeclaration(a,h,y,o))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var r,n=!t&&this.match("*");n&&this.nextToken();var o,a=null,c=this.context.await,l=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!n,!this.match("(")){var p=this.lookahead;a=this.context.strict||n||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(p.value)&&this.tolerateUnexpectedToken(p,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(p.value)?(o=p,r=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(p.value)&&(o=p,r=i.Messages.StrictReservedWord)}var u=this.parseFormalParameters(o),d=u.params,h=u.stricted;o=u.firstRestricted,u.message&&(r=u.message);var f=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=u.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&o&&this.throwUnexpectedToken(o,r),this.context.strict&&h&&this.tolerateUnexpectedToken(h,r),this.context.strict=f,this.context.allowStrictDirective=m,this.context.await=c,this.context.allowYield=l,t?this.finalize(e,new s.AsyncFunctionExpression(a,d,g)):this.finalize(e,new s.FunctionExpression(a,d,g,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),r=this.parseExpression(),n=r.type===c.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,n?new s.Directive(r,n):new s.ExpressionStatement(r))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var r=this.lookahead;if(8!==r.type)break;var n=this.parseDirective();t.push(n);var o=n.directive;if("string"!=typeof o)break;"use strict"===o?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(r,i.Messages.IllegalLanguageModeDirective)):!e&&r.octal&&(e=r)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();1!==r.params.length?this.tolerateError(i.Messages.BadSetterArity):r.params[0]instanceof s.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var n=this.parsePropertyMethod(r);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,r.params,n,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,r=!1;if(!this.hasLineTerminator){var n=this.context.allowYield;this.context.allowYield=!1,(r=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=n}return this.finalize(e,new s.YieldExpression(t,r))},e.prototype.parseClassElement=function(e){var t=this.lookahead,r=this.createNode(),n="",o=null,a=null,c=!1,l=!1,p=!1,u=!1;if(this.match("*"))this.nextToken();else if(c=this.match("["),"static"===(o=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,p=!0,c=this.match("["),this.match("*")?this.nextToken():o=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var d=this.lookahead.value;":"!==d&&"("!==d&&"*"!==d&&(u=!0,t=this.lookahead,o=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,i.Messages.ConstructorIsAsync))}var h=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&h?(n="get",c=this.match("["),o=this.parseObjectPropertyKey(),this.context.allowYield=!1,a=this.parseGetterMethod()):"set"===t.value&&h&&(n="set",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseSetterMethod()):7===t.type&&"*"===t.value&&h&&(n="init",c=this.match("["),o=this.parseObjectPropertyKey(),a=this.parseGeneratorMethod(),l=!0),!n&&o&&this.match("(")&&(n="init",a=u?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),l=!0),n||this.throwUnexpectedToken(this.lookahead),"init"===n&&(n="method"),c||(p&&this.isPropertyKey(o,"prototype")&&this.throwUnexpectedToken(t,i.Messages.StaticPrototype),!p&&this.isPropertyKey(o,"constructor")&&(("method"!==n||!l||a&&a.generator)&&this.throwUnexpectedToken(t,i.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,i.Messages.DuplicateConstructor):e.value=!0,n="constructor")),this.finalize(r,new s.MethodDefinition(o,c,a,n,p))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),r=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),o=null;this.matchKeyword("extends")&&(this.nextToken(),o=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=r,this.finalize(t,new s.ClassDeclaration(n,o,i))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=3===this.lookahead.type?this.parseVariableIdentifier():null,n=null;this.matchKeyword("extends")&&(this.nextToken(),n=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var o=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(r,n,o))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(i.Messages.InvalidModuleSpecifier);var t=this.nextToken(),r=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,r))},e.prototype.parseImportSpecifier=function(){var e,t,r=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(r,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var r=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?r=r.concat(this.parseNamedImports()):this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(r.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?r.push(this.parseImportNamespaceSpecifier()):this.match("{")?r=r.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(r,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),r=t;return this.matchContextualKeyword("as")&&(this.nextToken(),r=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,r))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var r=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(r))}else this.matchKeyword("class")?(r=this.parseClassDeclaration(!0),e=this.finalize(t,new s.ExportDefaultDeclaration(r))):this.matchContextualKeyword("async")?(r=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new s.ExportDefaultDeclaration(r))):(this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value),r=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(r)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(n,this.lookahead.value)}this.nextToken();var o=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(o))}else if(4===this.lookahead.type){switch(r=void 0,this.lookahead.value){case"let":case"const":r=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":r=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null))}else if(this.matchAsyncFunction())r=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(r,[],null));else{var a=[],c=null,l=!1;for(this.expect("{");!this.match("}");)l=l||this.matchKeyword("default"),a.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),c=this.parseModuleSpecifier(),this.consumeSemicolon()):l?(n=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause,this.throwError(n,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,a,c))}return e},e}();t.Parser=p},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var r=new Error(e);try{throw r}catch(e){Object.create&&Object.defineProperty&&(r=Object.create(e),Object.defineProperty(r,"column",{value:t}))}return r},e.prototype.createError=function(e,t,r,n){var o="Line "+t+": "+n,i=this.constructError(o,r);return i.index=e,i.lineNumber=t,i.description=n,i},e.prototype.throwError=function(e,t,r,n){throw this.createError(e,t,r,n)},e.prototype.tolerateError=function(e,t,r,n){var o=this.createError(e,t,r,n);if(!this.tolerant)throw o;this.recordError(o)},e}();t.ErrorHandler=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=r(4),i=r(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function a(e){return"01234567".indexOf(e)}var c=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,r,n=[];for(this.trackComment&&(n=[],t=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(i)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:r};n.push(s)}return 13===i&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,n}}return this.trackComment&&(r.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:r},n.push(s)),n},e.prototype.skipMultiLineComment=function(){var e,t,r=[];for(this.trackComment&&(r=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var n=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(n))13===n&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===n){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var i={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};r.push(i)}return r}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},i={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},r.push(i)),this.tolerateUnexpectedToken(),r},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var r=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(r))++this.index;else if(o.Character.isLineTerminator(r))++this.index,13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===r)if(47===(r=this.source.charCodeAt(this.index+1))){this.index+=2;var n=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(n)),t=!0}else{if(42!==r)break;this.index+=2,n=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(n))}else if(t&&45===r){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,n=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(n))}else{if(60!==r||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,n=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(n))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var r=this.source.charCodeAt(e+1);r>=56320&&r<=57343&&(t=1024*(t-55296)+r-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,r=0,n=0;n<t;++n){if(this.eof()||!o.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;r=16*r+s(this.source[this.index++])}return String.fromCharCode(r)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],o.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),o.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!o.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),r=o.Character.fromCodePoint(t);for(this.index+=r.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),r=e);!this.eof()&&(t=this.codePointAt(this.index),o.Character.isIdentifierPart(t));)r+=e=o.Character.fromCodePoint(t),this.index+=e.length,92===t&&(r=r.substr(0,r.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&o.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),r+=e);return r},e.prototype.octalToDecimal=function(e){var t="0"!==e,r=a(e);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,r=8*r+a(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(r=8*r+a(this.source[this.index++]))),{code:r,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,r=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===r.length?3:this.isKeyword(r)?4:"null"===r?5:"true"===r||"false"===r?1:3)&&t+r.length!==this.index){var n=this.index;this.index=t,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=n}return{type:e,value:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,r="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)r+=this.source[this.index++];return 0===r.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(t)||o.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(r,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var r="",n=!1;for(o.Character.isOctalDigit(e.charCodeAt(0))?(n=!0,r="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];return n||0!==r.length||this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(r,8),octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!o.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];n.assert(o.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var r="";if("."!==t){if(r=this.source[this.index++],t=this.source[this.index],"0"===r){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&o.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(r+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(r+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(r+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)r+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];n.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var r=!1,s="";!this.eof();){var a=this.source[this.index++];if(a===t){t="";break}if("\\"===a)if((a=this.source[this.index++])&&o.Character.isLineTerminator(a.charCodeAt(0)))++this.lineNumber,"\r"===a&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(a){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var c=this.scanHexEscape(a);null===c&&this.throwUnexpectedToken(),s+=c}break;case"x":var l=this.scanHexEscape(a);null===l&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),s+=l;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=a,this.tolerateUnexpectedToken();break;default:if(a&&o.Character.isOctalDigit(a.charCodeAt(0))){var p=this.octalToDecimal(a);r=p.octal||r,s+=String.fromCharCode(p.code)}else s+=a}else{if(o.Character.isLineTerminator(a.charCodeAt(0)))break;s+=a}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,r=this.index,n="`"===this.source[r],s=!1,a=2;for(++this.index;!this.eof();){var c=this.source[this.index++];if("`"===c){a=1,s=!0,t=!0;break}if("$"===c){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=c}else if("\\"===c)if(c=this.source[this.index++],o.Character.isLineTerminator(c.charCodeAt(0)))++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(c){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var l=this.index,p=this.scanHexEscape(c);null!==p?e+=p:(this.index=l,e+=c)}break;case"x":var u=this.scanHexEscape(c);null===u&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),e+=u;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===c?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),e+="\0"):o.Character.isOctalDigit(c.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):e+=c}else o.Character.isLineTerminator(c.charCodeAt(0))?(++this.lineNumber,"\r"===c&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=c}return t||this.throwUnexpectedToken(),n||this.curlyStack.pop(),{type:10,value:this.source.slice(r+1,this.index-a),cooked:e,head:n,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:r,end:this.index}},e.prototype.testRegExp=function(e,t){var r=e,n=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&n.throwUnexpectedToken(i.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):"￿"})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(r)}catch(e){this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];n.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],r=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],o.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t+=e;else if(o.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){s=!0;break}"["===e&&(r=!0)}return s||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!o.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var r=this.index,n=this.scanHexEscape("u");if(null!==n)for(e+=n;r<this.index;++r)this.source[r];else this.index=r,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),r=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:r,regex:this.testRegExp(t,r),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=c},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),o=r(12),i=r(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var r=this.values[this.paren-1];t="if"===r||"while"===r||"for"===r||"with"===r;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(n=this.values[this.curly-4])&&!this.beforeFunctionExpression(n);else if("function"===this.values[this.curly-4]){var n;t=!(n=this.values[this.curly-5])||!this.beforeFunctionExpression(n)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),a=function(){function e(e,t){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var r=e[t],n=this.scanner.source.slice(r.slice[0],r.slice[1]),o={type:r.multiLine?"BlockComment":"LineComment",value:n};this.trackRange&&(o.range=r.range),this.trackLoc&&(o.loc=r.loc),this.buffer.push(o)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var a="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(a);var c={type:i.TokenName[a.type],value:this.scanner.source.slice(a.start,a.end)};if(this.trackRange&&(c.range=[a.start,a.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=s),9===a.type){var l=a.pattern,p=a.flags;c.regex={pattern:l,flags:p}}this.buffer.push(c)}}return this.buffer.shift()},e}();t.Tokenizer=a}])},e.exports=n()},function(e,t,r){"use strict";var n=r(44),o=r(50),i=r(63),s=r(51),a=Object.prototype.toString,c=Object.prototype.hasOwnProperty,l={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},p=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function u(e){var t,r,i;if(t=e.toString(16).toUpperCase(),e<=255)r="x",i=2;else if(e<=65535)r="u",i=4;else{if(!(e<=4294967295))throw new o("code point within a string may not be greater than 0xFFFFFFFF");r="U",i=8}return"\\"+r+n.repeat("0",i-t.length)+t}function d(e){this.schema=e.schema||i,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=n.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,o,i,s,a,l;if(null===t)return{};for(r={},o=0,i=(n=Object.keys(t)).length;o<i;o+=1)s=n[o],a=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=e.compiledTypeMap.fallback[s])&&c.call(l.styleAliases,a)&&(a=l.styleAliases[a]),r[s]=a;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function h(e,t){for(var r,o=n.repeat(" ",t),i=0,s=-1,a="",c=e.length;i<c;)-1===(s=e.indexOf("\n",i))?(r=e.slice(i),i=c):(r=e.slice(i,s+1),i=s+1),r.length&&"\n"!==r&&(a+=o),a+=r;return a}function f(e,t){return"\n"+n.repeat(" ",e.indent*t)}function m(e){return 32===e||9===e}function g(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function y(e,t){return g(e)&&65279!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&58!==e&&(35!==e||t&&function(e){return g(e)&&!m(e)&&65279!==e&&13!==e&&10!==e}(t))}function v(e){return/^\n* /.test(e)}function b(e,t,r,n,o){var i,s,a,c,l=!1,p=!1,u=-1!==n,d=-1,h=g(c=e.charCodeAt(0))&&65279!==c&&!m(c)&&45!==c&&63!==c&&58!==c&&44!==c&&91!==c&&93!==c&&123!==c&&125!==c&&35!==c&&38!==c&&42!==c&&33!==c&&124!==c&&61!==c&&62!==c&&39!==c&&34!==c&&37!==c&&64!==c&&96!==c&&!m(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(!g(s=e.charCodeAt(i)))return 5;a=i>0?e.charCodeAt(i-1):null,h=h&&y(s,a)}else{for(i=0;i<e.length;i++){if(10===(s=e.charCodeAt(i)))l=!0,u&&(p=p||i-d-1>n&&" "!==e[d+1],d=i);else if(!g(s))return 5;a=i>0?e.charCodeAt(i-1):null,h=h&&y(s,a)}p=p||u&&i-d-1>n&&" "!==e[d+1]}return l||p?r>9&&v(e)?5:p?4:3:h&&!o(e)?1:2}function w(e,t,r,n){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==p.indexOf(t))return"'"+t+"'";var i=e.indent*Math.max(1,r),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),a=n||e.flowLevel>-1&&r>=e.flowLevel;switch(b(t,a,e.indent,s,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}))){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+x(t,e.indent)+k(h(t,i));case 4:return">"+x(t,e.indent)+k(h(function(e,t){var r,n,o=/(\n+)([^\n]*)/g,i=(a=e.indexOf("\n"),a=-1!==a?a:e.length,o.lastIndex=a,E(e.slice(0,a),t)),s="\n"===e[0]||" "===e[0];var a;for(;n=o.exec(e);){var c=n[1],l=n[2];r=" "===l[0],i+=c+(s||r||""===l?"":"\n")+E(l,t),s=r}return i}(t,s),i));case 5:return'"'+function(e){for(var t,r,n,o="",i=0;i<e.length;i++)(t=e.charCodeAt(i))>=55296&&t<=56319&&(r=e.charCodeAt(i+1))>=56320&&r<=57343?(o+=u(1024*(t-55296)+r-56320+65536),i++):(n=l[t],o+=!n&&g(t)?e[i]:n||u(t));return o}(t)+'"';default:throw new o("impossible error: invalid scalar style")}}()}function x(e,t){var r=v(e)?String(t):"",n="\n"===e[e.length-1];return r+(n&&("\n"===e[e.length-2]||"\n"===e)?"+":n?"":"-")+"\n"}function k(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function E(e,t){if(""===e||" "===e[0])return e;for(var r,n,o=/ [^ ]/g,i=0,s=0,a=0,c="";r=o.exec(e);)(a=r.index)-i>t&&(n=s>i?s:a,c+="\n"+e.slice(i,n),i=n+1),s=a;return c+="\n",e.length-i>t&&s>i?c+=e.slice(i,s)+"\n"+e.slice(s+1):c+=e.slice(i),c.slice(1)}function _(e,t,r){var n,i,s,l,p,u;for(s=0,l=(i=r?e.explicitTypes:e.implicitTypes).length;s<l;s+=1)if(((p=i[s]).instanceOf||p.predicate)&&(!p.instanceOf||"object"==typeof t&&t instanceof p.instanceOf)&&(!p.predicate||p.predicate(t))){if(e.tag=r?p.tag:"?",p.represent){if(u=e.styleMap[p.tag]||p.defaultStyle,"[object Function]"===a.call(p.represent))n=p.represent(t,u);else{if(!c.call(p.represent,u))throw new o("!<"+p.tag+'> tag resolver accepts not "'+u+'" style');n=p.represent[u](t,u)}e.dump=n}return!0}return!1}function S(e,t,r,n,i,s){e.tag=null,e.dump=r,_(e,r,!1)||_(e,r,!0);var c=a.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var l,p,u="[object Object]"===c||"[object Array]"===c;if(u&&(p=-1!==(l=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(i=!1),p&&e.usedDuplicates[l])e.dump="*ref_"+l;else{if(u&&p&&!e.usedDuplicates[l]&&(e.usedDuplicates[l]=!0),"[object Object]"===c)n&&0!==Object.keys(e.dump).length?(!function(e,t,r,n){var i,s,a,c,l,p,u="",d=e.tag,h=Object.keys(r);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new o("sortKeys must be a boolean or a function");for(i=0,s=h.length;i<s;i+=1)p="",n&&0===i||(p+=f(e,t)),c=r[a=h[i]],S(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,l&&(p+=f(e,t)),S(e,t+1,c,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?p+=":":p+=": ",u+=p+=e.dump));e.tag=d,e.dump=u||"{}"}(e,t,e.dump,i),p&&(e.dump="&ref_"+l+e.dump)):(!function(e,t,r){var n,o,i,s,a,c="",l=e.tag,p=Object.keys(r);for(n=0,o=p.length;n<o;n+=1)a="",0!==n&&(a+=", "),e.condenseFlow&&(a+='"'),s=r[i=p[n]],S(e,t,i,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),S(e,t,s,!1,!1)&&(c+=a+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+l+" "+e.dump));else if("[object Array]"===c){var d=e.noArrayIndent&&t>0?t-1:t;n&&0!==e.dump.length?(!function(e,t,r,n){var o,i,s="",a=e.tag;for(o=0,i=r.length;o<i;o+=1)S(e,t+1,r[o],!0,!0)&&(n&&0===o||(s+=f(e,t)),e.dump&&10===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=a,e.dump=s||"[]"}(e,d,e.dump,i),p&&(e.dump="&ref_"+l+e.dump)):(!function(e,t,r){var n,o,i="",s=e.tag;for(n=0,o=r.length;n<o;n+=1)S(e,t,r[n],!1,!1)&&(0!==n&&(i+=","+(e.condenseFlow?"":" ")),i+=e.dump);e.tag=s,e.dump="["+i+"]"}(e,d,e.dump),p&&(e.dump="&ref_"+l+" "+e.dump))}else{if("[object String]"!==c){if(e.skipInvalid)return!1;throw new o("unacceptable kind of an object to dump "+c)}"?"!==e.tag&&w(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function C(e,t){var r,n,o=[],i=[];for(function e(t,r,n){var o,i,s;if(null!==t&&"object"==typeof t)if(-1!==(i=r.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(r.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)e(t[i],r,n);else for(o=Object.keys(t),i=0,s=o.length;i<s;i+=1)e(t[o[i]],r,n)}(e,o,i),r=0,n=i.length;r<n;r+=1)t.duplicates.push(o[i[r]]);t.usedDuplicates=new Array(n)}function P(e,t){var r=new d(t=t||{});return r.noRefs||C(e,r),S(r,0,e,!0,!0)?r.dump+"\n":""}e.exports.dump=P,e.exports.safeDump=function(e,t){return P(e,n.extend({schema:s},t))}},function(e,t,r){e.exports=r(37)},function(e,t,r){
/*!
 * chai
 * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Dependencies that are used for multiple exports are required here only once
 */
var n=r(341);
/*!
 * test utility
 */t.test=r(342),
/*!
 * type utility
 */
t.type=r(90),
/*!
 * expectTypes utility
 */
t.expectTypes=r(343),
/*!
 * message utility
 */
t.getMessage=r(344),
/*!
 * actual utility
 */
t.getActual=r(138),
/*!
 * Inspect util
 */
t.inspect=r(91),
/*!
 * Object Display util
 */
t.objDisplay=r(139),
/*!
 * Flag utility
 */
t.flag=r(26),
/*!
 * Flag transferring utility
 */
t.transferFlags=r(38),
/*!
 * Deep equal utility
 */
t.eql=r(346),
/*!
 * Deep path info
 */
t.getPathInfo=n.getPathInfo,
/*!
 * Check if a property exists
 */
t.hasProperty=n.hasProperty,
/*!
 * Function name
 */
t.getName=r(140),
/*!
 * add Property
 */
t.addProperty=r(347),
/*!
 * add Method
 */
t.addMethod=r(348),
/*!
 * overwrite Property
 */
t.overwriteProperty=r(349),
/*!
 * overwrite Method
 */
t.overwriteMethod=r(350),
/*!
 * Add a chainable method
 */
t.addChainableMethod=r(351),
/*!
 * Overwrite chainable method
 */
t.overwriteChainableMethod=r(352),
/*!
 * Compare by inspect method
 */
t.compareByInspect=r(353),
/*!
 * Get own enumerable property symbols method
 */
t.getOwnEnumerablePropertySymbols=r(142),
/*!
 * Get own enumerable properties method
 */
t.getOwnEnumerableProperties=r(354),
/*!
 * Checks error against a given set of criteria
 */
t.checkError=r(355),
/*!
 * Proxify util
 */
t.proxify=r(66),
/*!
 * addLengthGuard util
 */
t.addLengthGuard=r(65),
/*!
 * isProxyEnabled helper
 */
t.isProxyEnabled=r(64),
/*!
 * isNaN method
 */
t.isNaN=r(356)},function(e,t,r){"use strict";function n(e,t){return null!=e&&t in Object(e)}function o(e){return e.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map((function(e){var t=/^\[(\d+)\]$/.exec(e);return t?{i:parseFloat(t[1])}:{p:e.replace(/\\([.\[\]])/g,"$1")}}))}function i(e,t,r){var n=e,o=null;r=void 0===r?t.length:r;for(var i=0;i<r;i++){var s=t[i];n&&(n=void 0===s.p?n[s.i]:n[s.p],i===r-1&&(o=n))}return o}function s(e,t){var r=o(t),s=r[r.length-1],a={parent:r.length>1?i(e,r,r.length-1):e,name:s.p||s.i,value:i(e,r)};return a.exists=n(a.parent,a.name),a}e.exports={hasProperty:n,getPathInfo:s,getPathValue:function(e,t){return s(e,t).value},setPathValue:function(e,t,r){return function(e,t,r){for(var n=e,o=r.length,i=null,s=0;s<o;s++){var a=null,c=null;if(i=r[s],s===o-1)n[a=void 0===i.p?i.i:i.p]=t;else if(void 0!==i.p&&n[i.p])n=n[i.p];else if(void 0!==i.i&&n[i.i])n=n[i.i];else{var l=r[s+1];a=void 0===i.p?i.i:i.p,c=void 0===l.p?[]:{},n[a]=c,n=n[a]}}}(e,r,o(t)),e}}},function(e,t,r){
/*!
 * Chai - test utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(26);e.exports=function(e,t){var r=n(e,"negate"),o=t[0];return r?!o:o}},function(e,t,r){
/*!
 * Chai - expectTypes utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(137),o=r(26),i=r(90);e.exports=function(e,t){var r=o(e,"message"),s=o(e,"ssfi");r=r?r+": ":"",e=o(e,"object"),(t=t.map((function(e){return e.toLowerCase()}))).sort();var a=t.map((function(e,r){var n=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an":"a";return(t.length>1&&r===t.length-1?"or ":"")+n+" "+e})).join(", "),c=i(e).toLowerCase();if(!t.some((function(e){return c===e})))throw new n(r+"object tested must be "+a+", but "+c+" given",void 0,s)}},function(e,t,r){
/*!
 * Chai - message composition utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(26),o=r(138),i=r(139);e.exports=function(e,t){var r=n(e,"negate"),s=n(e,"object"),a=t[3],c=o(e,t),l=r?t[2]:t[1],p=n(e,"message");return"function"==typeof l&&(l=l()),l=(l=l||"").replace(/#\{this\}/g,(function(){return i(s)})).replace(/#\{act\}/g,(function(){return i(c)})).replace(/#\{exp\}/g,(function(){return i(a)})),p?p+": "+l:l}},function(e,t){
/*!
 * Chai - getEnumerableProperties utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e){var t=[];for(var r in e)t.push(r);return t}},function(e,t,r){"use strict";
/*!
 * deep-eql
 * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */var n=r(90);function o(){this._key="chai/deep-eql__"+Math.random()+Date.now()}o.prototype={get:function(e){return e[this._key]},set:function(e,t){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:t,configurable:!0})}};var i="function"==typeof WeakMap?WeakMap:o;
/*!
 * Check to see if the MemoizeMap has recorded a result of the two operands
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @returns {Boolean|null} result
*/function s(e,t,r){if(!r||g(e)||g(t))return null;var n=r.get(e);if(n){var o=n.get(t);if("boolean"==typeof o)return o}return null}
/*!
 * Set the result of the equality into the MemoizeMap
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {MemoizeMap} memoizeMap
 * @param {Boolean} result
*/function a(e,t,r,n){if(r&&!g(e)&&!g(t)){var o=r.get(e);o?o.set(t,n):((o=new i).set(t,n),r.set(e,o))}}
/*!
 * Primary Export
 */function c(e,t,r){if(r&&r.comparator)return p(e,t,r);var n=l(e,t);return null!==n?n:p(e,t,r)}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t||!g(e)&&!g(t)&&null}
/*!
 * The main logic of the `deepEqual` function.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (optional) Additional options
 * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
 * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
    complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
    references to blow the stack.
 * @return {Boolean} equal match
*/function p(e,t,r){(r=r||{}).memoize=!1!==r.memoize&&(r.memoize||new i);var o=r&&r.comparator,p=s(e,t,r.memoize);if(null!==p)return p;var g=s(t,e,r.memoize);if(null!==g)return g;if(o){var y=o(e,t);if(!1===y||!0===y)return a(e,t,r.memoize,y),y;var v=l(e,t);if(null!==v)return v}var b=n(e);if(b!==n(t))return a(e,t,r.memoize,!1),!1;a(e,t,r.memoize,!0);var w=function(e,t,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return c(e.valueOf(),t.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":case"Error":return e===t;case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return d(e,t,n);case"RegExp":
/*!
 * Compare two Regular Expressions for equality.
 *
 * @param {RegExp} leftHandOperand
 * @param {RegExp} rightHandOperand
 * @return {Boolean} result
 */
return function(e,t){return e.toString()===t.toString()}
/*!
 * Compare two Sets/Maps for equality. Faster than other equality functions.
 *
 * @param {Set} leftHandOperand
 * @param {Set} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */(e,t);case"Generator":
/*!
 * Simple equality for generator objects such as those returned by generator functions.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){return d(f(e),f(t),r)}
/*!
 * Determine if the given object has an @@iterator function.
 *
 * @param {Object} target
 * @return {Boolean} `true` if the object has an @@iterator function.
 */(e,t,n);case"DataView":return d(new Uint8Array(e.buffer),new Uint8Array(t.buffer),n);case"ArrayBuffer":return d(new Uint8Array(e),new Uint8Array(t),n);case"Set":case"Map":return u(e,t,n);default:
/*!
 * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
 * for each enumerable key in the object.
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
return function(e,t,r){var n=m(e),o=m(t);if(n.length&&n.length===o.length)return n.sort(),o.sort(),!1!==d(n,o)&&
/*!
 * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
 * each key. If any value of the given key is not equal, the function will return false (early).
 *
 * @param {Mixed} leftHandOperand
 * @param {Mixed} rightHandOperand
 * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */
function(e,t,r,n){var o=r.length;if(0===o)return!0;for(var i=0;i<o;i+=1)if(!1===c(e[r[i]],t[r[i]],n))return!1;return!0}(e,t,n,r);var i=h(e),s=h(t);if(i.length&&i.length===s.length)return i.sort(),s.sort(),d(i,s,r);if(0===n.length&&0===i.length&&0===o.length&&0===s.length)return!0;return!1}
/*!
 * Returns true if the argument is a primitive.
 *
 * This intentionally returns true for all objects that can be compared by reference,
 * including functions and symbols.
 *
 * @param {Mixed} value
 * @return {Boolean} result
 */(e,t,n)}}(e,t,b,r);return a(e,t,r.memoize,w),w}function u(e,t,r){if(e.size!==t.size)return!1;if(0===e.size)return!0;var n=[],o=[];return e.forEach((function(e,t){n.push([e,t])})),t.forEach((function(e,t){o.push([e,t])})),d(n.sort(),o.sort(),r)}
/*!
 * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
 *
 * @param {Iterable} leftHandOperand
 * @param {Iterable} rightHandOperand
 * @param {Object} [options] (Optional)
 * @return {Boolean} result
 */function d(e,t,r){var n=e.length;if(n!==t.length)return!1;if(0===n)return!0;for(var o=-1;++o<n;)if(!1===c(e[o],t[o],r))return!1;return!0}
/*!
 * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
 * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
 *
 * @param {Object} target
 * @returns {Array} an array of entries from the @@iterator function
 */
function h(e){if(function(e){return"undefined"!=typeof Symbol&&"object"==typeof e&&void 0!==Symbol.iterator&&"function"==typeof e[Symbol.iterator]}(e))try{return f(e[Symbol.iterator]())}catch(e){return[]}return[]}
/*!
 * Gets all entries from a Generator. This will consume the generator - which could have side effects.
 *
 * @param {Generator} target
 * @returns {Array} an array of entries from the Generator.
 */function f(e){for(var t=e.next(),r=[t.value];!1===t.done;)t=e.next(),r.push(t.value);return r}
/*!
 * Gets all own and inherited enumerable keys from a target.
 *
 * @param {Object} target
 * @returns {Array} an array of own and inherited enumerable keys from the target.
 */function m(e){var t=[];for(var r in e)t.push(r);return t}function g(e){return null===e||"object"!=typeof e}e.exports=c,e.exports.MemoizeMap=i},function(e,t,r){
/*!
 * Chai - addProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(37),o=r(26),i=r(64),s=r(38);e.exports=function(e,t,r){r=void 0===r?function(){}:r,Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=r.call(this);if(void 0!==t)return t;var a=new n.Assertion;return s(this,a),a},configurable:!0})}},function(e,t,r){
/*!
 * Chai - addMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(65),o=r(37),i=r(26),s=r(66),a=r(38);e.exports=function(e,t,r){var c=function(){i(this,"lockSsfi")||i(this,"ssfi",c);var e=r.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};n(c,t,!1),e[t]=s(c,t)}},function(e,t,r){
/*!
 * Chai - overwriteProperty utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(37),o=r(26),i=r(64),s=r(38);e.exports=function(e,t,r){var a=Object.getOwnPropertyDescriptor(e,t),c=function(){};a&&"function"==typeof a.get&&(c=a.get),Object.defineProperty(e,t,{get:function e(){i()||o(this,"lockSsfi")||o(this,"ssfi",e);var t=o(this,"lockSsfi");o(this,"lockSsfi",!0);var a=r(c).call(this);if(o(this,"lockSsfi",t),void 0!==a)return a;var l=new n.Assertion;return s(this,l),l},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(65),o=r(37),i=r(26),s=r(66),a=r(38);e.exports=function(e,t,r){var c=e[t],l=function(){throw new Error(t+" is not a function")};c&&"function"==typeof c&&(l=c);var p=function(){i(this,"lockSsfi")||i(this,"ssfi",p);var e=i(this,"lockSsfi");i(this,"lockSsfi",!0);var t=r(l).apply(this,arguments);if(i(this,"lockSsfi",e),void 0!==t)return t;var n=new o.Assertion;return a(this,n),n};n(p,t,!1),e[t]=s(p,t)}},function(e,t,r){
/*!
 * Chai - addChainingMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(65),o=r(37),i=r(26),s=r(66),a=r(38),c="function"==typeof Object.setPrototypeOf,l=function(){},p=Object.getOwnPropertyNames(l).filter((function(e){var t=Object.getOwnPropertyDescriptor(l,e);return"object"!=typeof t||!t.configurable})),u=Function.prototype.call,d=Function.prototype.apply;e.exports=function(e,t,r,l){"function"!=typeof l&&(l=function(){});var h={method:r,chainingBehavior:l};e.__methods||(e.__methods={}),e.__methods[t]=h,Object.defineProperty(e,t,{get:function(){h.chainingBehavior.call(this);var r=function(){i(this,"lockSsfi")||i(this,"ssfi",r);var e=h.method.apply(this,arguments);if(void 0!==e)return e;var t=new o.Assertion;return a(this,t),t};if(n(r,t,!0),c){var l=Object.create(this);l.call=u,l.apply=d,Object.setPrototypeOf(r,l)}else{Object.getOwnPropertyNames(e).forEach((function(t){if(-1===p.indexOf(t)){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}}))}return a(this,r),s(r)},configurable:!0})}},function(e,t,r){
/*!
 * Chai - overwriteChainableMethod utility
 * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(37),o=r(38);e.exports=function(e,t,r,i){var s=e.__methods[t],a=s.chainingBehavior;s.chainingBehavior=function(){var e=i(a).call(this);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t};var c=s.method;s.method=function(){var e=r(c).apply(this,arguments);if(void 0!==e)return e;var t=new n.Assertion;return o(this,t),t}}},function(e,t,r){
/*!
 * Chai - compareByInspect utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(91);e.exports=function(e,t){return n(e)<n(t)?-1:1}},function(e,t,r){
/*!
 * Chai - getOwnEnumerableProperties utility
 * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
/*!
 * Module dependencies
 */
var n=r(142);e.exports=function(e){return Object.keys(e).concat(n(e))}},function(e,t,r){"use strict";var n=/\s*function(?:\s|\s*\/\*[^(?:*\/)]+\*\/\s*)*([^\(\/]+)/;function o(e){var t="";if(void 0===e.name){var r=String(e).match(n);r&&(t=r[1])}else t=e.name;return t}e.exports={compatibleInstance:function(e,t){return t instanceof Error&&e===t},compatibleConstructor:function(e,t){return t instanceof Error?e.constructor===t.constructor||e instanceof t.constructor:(t.prototype instanceof Error||t===Error)&&(e.constructor===t||e instanceof t)},compatibleMessage:function(e,t){var r="string"==typeof e?e:e.message;return t instanceof RegExp?t.test(r):"string"==typeof t&&-1!==r.indexOf(t)},getMessage:function(e){var t="";return e&&e.message?t=e.message:"string"==typeof e&&(t=e),t},getConstructorName:function(e){var t=e;return e instanceof Error?t=o(e.constructor):"function"==typeof e&&(t=o(e).trim()||o(new e)),t}}},function(e,t){e.exports=Number.isNaN||
/*!
 * Chai - isNaN utility
 * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
 * MIT Licensed
 */
function(e){return e!=e}},function(e,t,r){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
var n=r(46);e.exports=function(e,t){
/*!
   * Module dependencies.
   */
var r=e.AssertionError,o=t.flag;
/*!
   * Module export.
   */
/*!
   * Assertion Constructor
   *
   * Creates object for chaining.
   *
   * `Assertion` objects contain metadata in the form of flags. Three flags can
   * be assigned during instantiation by passing arguments to this constructor:
   *
   * - `object`: This flag contains the target of the assertion. For example, in
   *   the assertion `expect(numKittens).to.equal(7);`, the `object` flag will
   *   contain `numKittens` so that the `equal` assertion can reference it when
   *   needed.
   *
   * - `message`: This flag contains an optional custom error message to be
   *   prepended to the error message that's generated by the assertion when it
   *   fails.
   *
   * - `ssfi`: This flag stands for "start stack function indicator". It
   *   contains a function reference that serves as the starting point for
   *   removing frames from the stack trace of the error that's created by the
   *   assertion when it fails. The goal is to provide a cleaner stack trace to
   *   end users by removing Chai's internal functions. Note that it only works
   *   in environments that support `Error.captureStackTrace`, and only when
   *   `Chai.config.includeStack` hasn't been set to `false`.
   *
   * - `lockSsfi`: This flag controls whether or not the given `ssfi` flag
   *   should retain its current value, even as assertions are chained off of
   *   this object. This is usually set to `true` when creating a new assertion
   *   from within another assertion. It's also temporarily set to `true` before
   *   an overwritten assertion gets called by the overwriting assertion.
   *
   * @param {Mixed} obj target of the assertion
   * @param {String} msg (optional) custom error message
   * @param {Function} ssfi (optional) starting point for removing stack frames
   * @param {Boolean} lockSsfi (optional) whether or not the ssfi flag is locked
   * @api private
   */
function i(e,r,n,s){return o(this,"ssfi",n||i),o(this,"lockSsfi",s),o(this,"object",e),o(this,"message",r),t.proxify(this)}e.Assertion=i,Object.defineProperty(i,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=e}}),Object.defineProperty(i,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=e}}),i.addProperty=function(e,r){t.addProperty(this.prototype,e,r)},i.addMethod=function(e,r){t.addMethod(this.prototype,e,r)},i.addChainableMethod=function(e,r,n){t.addChainableMethod(this.prototype,e,r,n)},i.overwriteProperty=function(e,r){t.overwriteProperty(this.prototype,e,r)},i.overwriteMethod=function(e,r){t.overwriteMethod(this.prototype,e,r)},i.overwriteChainableMethod=function(e,r,n){t.overwriteChainableMethod(this.prototype,e,r,n)},i.prototype.assert=function(e,i,s,a,c,l){var p=t.test(this,arguments);if(!1!==l&&(l=!0),void 0===a&&void 0===c&&(l=!1),!0!==n.showDiff&&(l=!1),!p){i=t.getMessage(this,arguments);var u=t.getActual(this,arguments);throw new r(i,{actual:u,expected:a,showDiff:l},n.includeStack?this.assert:o(this,"ssfi"))}},
/*!
   * ### ._obj
   *
   * Quick reference to stored `actual` value for plugin developers.
   *
   * @api private
   */
Object.defineProperty(i.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}})}},function(e,t){
/*!
 * chai
 * http://chaijs.com
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion,n=e.AssertionError,o=t.flag;function i(e,r){r&&o(this,"message",r),e=e.toLowerCase();var n=o(this,"object"),i=~["a","e","i","o","u"].indexOf(e.charAt(0))?"an ":"a ";this.assert(e===t.type(n).toLowerCase(),"expected #{this} to be "+i+e,"expected #{this} not to be "+i+e)}function s(e,r){return t.isNaN(e)&&t.isNaN(r)||e===r}function a(){o(this,"contains",!0)}function c(e,i){i&&o(this,"message",i);var a=o(this,"object"),c=t.type(a).toLowerCase(),l=o(this,"message"),p=o(this,"negate"),u=o(this,"ssfi"),d=o(this,"deep"),h=d?"deep ":"";l=l?l+": ":"";var f=!1;switch(c){case"string":f=-1!==a.indexOf(e);break;case"weakset":if(d)throw new n(l+"unable to use .deep.include with WeakSet",void 0,u);f=a.has(e);break;case"map":var m=d?t.eql:s;a.forEach((function(t){f=f||m(t,e)}));break;case"set":d?a.forEach((function(r){f=f||t.eql(r,e)})):f=a.has(e);break;case"array":f=d?a.some((function(r){return t.eql(r,e)})):-1!==a.indexOf(e);break;default:if(e!==Object(e))throw new n(l+"object tested must be an array, a map, an object, a set, a string, or a weakset, but "+c+" given",void 0,u);var g=Object.keys(e),y=null,v=0;if(g.forEach((function(i){var s=new r(a);if(t.transferFlags(this,s,!0),o(s,"lockSsfi",!0),p&&1!==g.length)try{s.property(i,e[i])}catch(e){if(!t.checkError.compatibleConstructor(e,n))throw e;null===y&&(y=e),v++}else s.property(i,e[i])}),this),p&&g.length>1&&v===g.length)throw y;return}this.assert(f,"expected #{this} to "+h+"include "+t.inspect(e),"expected #{this} to not "+h+"include "+t.inspect(e))}function l(){var e=o(this,"object"),r=t.type(e);this.assert("Arguments"===r,"expected #{this} to be arguments but got "+r,"expected #{this} to not be arguments")}function p(e,t){t&&o(this,"message",t);var r=o(this,"object");if(o(this,"deep")){var n=o(this,"lockSsfi");o(this,"lockSsfi",!0),this.eql(e),o(this,"lockSsfi",n)}else this.assert(e===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e,this._obj,!0)}function u(e,r){r&&o(this,"message",r),this.assert(t.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e,this._obj,!0)}function d(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),l=o(this,"message"),p=l?l+": ":"",u=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,l,u,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to above must be a number";else s=p+"the argument to above must be a date";if(f)throw new n(s,void 0,u);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m>e,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",e,m)}else this.assert(a>e,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",e)}function h(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),l=o(this,"message"),p=l?l+": ":"",u=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,l,u,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to least must be a number";else s=p+"the argument to least must be a date";if(f)throw new n(s,void 0,u);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m>=e,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",e,m)}else this.assert(a>=e,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",e)}function f(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),l=o(this,"message"),p=l?l+": ":"",u=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,l,u,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to below must be a number";else s=p+"the argument to below must be a date";if(f)throw new n(s,void 0,u);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m<e,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",e,m)}else this.assert(a<e,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",e)}function m(e,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"doLength"),l=o(this,"message"),p=l?l+": ":"",u=o(this,"ssfi"),d=t.type(a).toLowerCase(),h=t.type(e).toLowerCase(),f=!0;if(c&&"map"!==d&&"set"!==d&&new r(a,l,u,!0).to.have.property("length"),c||"date"!==d||"date"===h)if("number"===h||!c&&"number"!==d)if(c||"date"===d||"number"===d)f=!1;else{s=p+"expected "+("string"===d?"'"+a+"'":a)+" to be a number or a date"}else s=p+"the argument to most must be a number";else s=p+"the argument to most must be a date";if(f)throw new n(s,void 0,u);if(c){var m,g="length";"map"===d||"set"===d?(g="size",m=a.size):m=a.length,this.assert(m<=e,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",e,m)}else this.assert(a<=e,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",e)}function g(e,r){r&&o(this,"message",r);var i=o(this,"object"),s=o(this,"ssfi"),a=o(this,"message");try{var c=i instanceof e}catch(r){if(r instanceof TypeError)throw new n((a=a?a+": ":"")+"The instanceof assertion needs a constructor but "+t.type(e)+" was given.",void 0,s);throw r}var l=t.getName(e);null===l&&(l="an unnamed constructor"),this.assert(c,"expected #{this} to be an instance of "+l,"expected #{this} to not be an instance of "+l)}function y(e,r,i){i&&o(this,"message",i);var s=o(this,"nested"),a=o(this,"own"),c=o(this,"message"),l=o(this,"object"),p=o(this,"ssfi"),u=typeof e;if(c=c?c+": ":"",s){if("string"!==u)throw new n(c+"the argument to property must be a string when using nested syntax",void 0,p)}else if("string"!==u&&"number"!==u&&"symbol"!==u)throw new n(c+"the argument to property must be a string, number, or symbol",void 0,p);if(s&&a)throw new n(c+'The "nested" and "own" flags cannot be combined.',void 0,p);if(null==l)throw new n(c+"Target cannot be null or undefined.",void 0,p);var d,h=o(this,"deep"),f=o(this,"negate"),m=s?t.getPathInfo(l,e):null,g=s?m.value:l[e],y="";h&&(y+="deep "),a&&(y+="own "),s&&(y+="nested "),y+="property ",d=a?Object.prototype.hasOwnProperty.call(l,e):s?m.exists:t.hasProperty(l,e),f&&1!==arguments.length||this.assert(d,"expected #{this} to have "+y+t.inspect(e),"expected #{this} to not have "+y+t.inspect(e)),arguments.length>1&&this.assert(d&&(h?t.eql(r,g):r===g),"expected #{this} to have "+y+t.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have "+y+t.inspect(e)+" of #{act}",r,g),o(this,"object",g)}function v(e,t,r){o(this,"own",!0),y.apply(this,arguments)}function b(e,r,n){"string"==typeof r&&(n=r,r=null),n&&o(this,"message",n);var i=o(this,"object"),s=Object.getOwnPropertyDescriptor(Object(i),e);s&&r?this.assert(t.eql(r,s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to match "+t.inspect(r)+", got "+t.inspect(s),"expected the own property descriptor for "+t.inspect(e)+" on #{this} to not match "+t.inspect(r),r,s,!0):this.assert(s,"expected #{this} to have an own property descriptor for "+t.inspect(e),"expected #{this} to not have an own property descriptor for "+t.inspect(e)),o(this,"object",s)}function w(){o(this,"doLength",!0)}function x(e,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=t.type(s).toLowerCase(),c=o(this,"message"),l=o(this,"ssfi"),p="length";switch(a){case"map":case"set":p="size",i=s.size;break;default:new r(s,c,l,!0).to.have.property("length"),i=s.length}this.assert(i==e,"expected #{this} to have a "+p+" of #{exp} but got #{act}","expected #{this} to not have a "+p+" of #{act}",e,i)}function k(e,t){t&&o(this,"message",t);var r=o(this,"object");this.assert(e.exec(r),"expected #{this} to match "+e,"expected #{this} not to match "+e)}function E(e){var r,i,s=o(this,"object"),a=t.type(s),c=t.type(e),l=o(this,"ssfi"),p=o(this,"deep"),u="",d=!0,h=o(this,"message"),f=(h=h?h+": ":"")+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if("Map"===a||"Set"===a)u=p?"deeply ":"",i=[],s.forEach((function(e,t){i.push(t)})),"Array"!==c&&(e=Array.prototype.slice.call(arguments));else{switch(i=t.getOwnEnumerableProperties(s),c){case"Array":if(arguments.length>1)throw new n(f,void 0,l);break;case"Object":if(arguments.length>1)throw new n(f,void 0,l);e=Object.keys(e);break;default:e=Array.prototype.slice.call(arguments)}e=e.map((function(e){return"symbol"==typeof e?e:String(e)}))}if(!e.length)throw new n(h+"keys required",void 0,l);var m=e.length,g=o(this,"any"),y=o(this,"all"),v=e;if(g||y||(y=!0),g&&(d=v.some((function(e){return i.some((function(r){return p?t.eql(e,r):e===r}))}))),y&&(d=v.every((function(e){return i.some((function(r){return p?t.eql(e,r):e===r}))})),o(this,"contains")||(d=d&&e.length==i.length)),m>1){var b=(e=e.map((function(e){return t.inspect(e)}))).pop();y&&(r=e.join(", ")+", and "+b),g&&(r=e.join(", ")+", or "+b)}else r=t.inspect(e[0]);r=(m>1?"keys ":"key ")+r,r=(o(this,"contains")?"contain ":"have ")+r,this.assert(d,"expected #{this} to "+u+r,"expected #{this} to not "+u+r,v.slice(0).sort(t.compareByInspect),i.sort(t.compareByInspect),!0)}function _(e,n,i){i&&o(this,"message",i);var s,a=o(this,"object"),c=o(this,"ssfi"),l=o(this,"message"),p=o(this,"negate")||!1;new r(a,l,c,!0).is.a("function"),(e instanceof RegExp||"string"==typeof e)&&(n=e,e=null);try{a()}catch(e){s=e}var u=void 0===e&&void 0===n,d=Boolean(e&&n),h=!1,f=!1;if(u||!u&&!p){var m="an error";e instanceof Error?m="#{exp}":e&&(m=t.checkError.getConstructorName(e)),this.assert(s,"expected #{this} to throw "+m,"expected #{this} to not throw an error but #{act} was thrown",e&&e.toString(),s instanceof Error?s.toString():"string"==typeof s?s:s&&t.checkError.getConstructorName(s))}if(e&&s){if(e instanceof Error)t.checkError.compatibleInstance(s,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s&&!p?" but #{act} was thrown":""),e.toString(),s.toString()));t.checkError.compatibleConstructor(s,e)===p&&(d&&p?h=!0:this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)))}if(s&&null!=n){var g="including";n instanceof RegExp&&(g="matching"),t.checkError.compatibleMessage(s,n)===p&&(d&&p?f=!0:this.assert(p,"expected #{this} to throw error "+g+" #{exp} but got #{act}","expected #{this} to throw error not "+g+" #{exp}",n,t.checkError.getMessage(s)))}h&&f&&this.assert(p,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(s?" but #{act} was thrown":""),e instanceof Error?e.toString():e&&t.checkError.getConstructorName(e),s instanceof Error?s.toString():s&&t.checkError.getConstructorName(s)),o(this,"object",s)}function S(e,r){r&&o(this,"message",r);var n=o(this,"object"),i=o(this,"itself"),s="function"!=typeof n||i?n[e]:n.prototype[e];this.assert("function"==typeof s,"expected #{this} to respond to "+t.inspect(e),"expected #{this} to not respond to "+t.inspect(e))}function C(e,r){r&&o(this,"message",r);var n=e(o(this,"object"));this.assert(n,"expected #{this} to satisfy "+t.objDisplay(e),"expected #{this} to not satisfy"+t.objDisplay(e),!o(this,"negate"),n)}function P(e,t,i){i&&o(this,"message",i);var s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");if(new r(s,a,c,!0).is.a("number"),"number"!=typeof e||"number"!=typeof t)throw new n((a=a?a+": ":"")+"the arguments to closeTo or approximately must be numbers",void 0,c);this.assert(Math.abs(s-e)<=t,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t)}function A(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),s();var l=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",l),o(this,"deltaBehavior","change"),o(this,"realDelta",l!==i),this.assert(i!==l,"expected "+p+" to change","expected "+p+" to not change")}function O(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var l=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",l),o(this,"deltaBehavior","increase"),o(this,"realDelta",l-i),this.assert(l-i>0,"expected "+p+" to increase","expected "+p+" to not increase")}function T(e,t,n){n&&o(this,"message",n);var i,s=o(this,"object"),a=o(this,"message"),c=o(this,"ssfi");new r(s,a,c,!0).is.a("function"),t?(new r(e,a,c,!0).to.have.property(t),i=e[t]):(new r(e,a,c,!0).is.a("function"),i=e()),new r(i,a,c,!0).is.a("number"),s();var l=null==t?e():e[t],p=null==t?i:"."+t;o(this,"deltaMsgObj",p),o(this,"initialDeltaValue",i),o(this,"finalDeltaValue",l),o(this,"deltaBehavior","decrease"),o(this,"realDelta",i-l),this.assert(l-i<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still"].forEach((function(e){r.addProperty(e)})),r.addProperty("not",(function(){o(this,"negate",!0)})),r.addProperty("deep",(function(){o(this,"deep",!0)})),r.addProperty("nested",(function(){o(this,"nested",!0)})),r.addProperty("own",(function(){o(this,"own",!0)})),r.addProperty("ordered",(function(){o(this,"ordered",!0)})),r.addProperty("any",(function(){o(this,"any",!0),o(this,"all",!1)})),r.addProperty("all",(function(){o(this,"all",!0),o(this,"any",!1)})),r.addChainableMethod("an",i),r.addChainableMethod("a",i),r.addChainableMethod("include",c,a),r.addChainableMethod("contain",c,a),r.addChainableMethod("contains",c,a),r.addChainableMethod("includes",c,a),r.addProperty("ok",(function(){this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")})),r.addProperty("true",(function(){this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",!o(this,"negate"))})),r.addProperty("false",(function(){this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",!!o(this,"negate"))})),r.addProperty("null",(function(){this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null")})),r.addProperty("undefined",(function(){this.assert(void 0===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")})),r.addProperty("NaN",(function(){this.assert(t.isNaN(o(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")})),r.addProperty("exist",(function(){var e=o(this,"object");this.assert(null!=e,"expected #{this} to exist","expected #{this} to not exist")})),r.addProperty("empty",(function(){var e,r=o(this,"object"),i=o(this,"ssfi"),s=o(this,"message");switch(s=s?s+": ":"",t.type(r).toLowerCase()){case"array":case"string":e=r.length;break;case"map":case"set":e=r.size;break;case"weakmap":case"weakset":throw new n(s+".empty was passed a weak collection",void 0,i);case"function":var a=s+".empty was passed a function "+t.getName(r);throw new n(a.trim(),void 0,i);default:if(r!==Object(r))throw new n(s+".empty was passed non-string primitive "+t.inspect(r),void 0,i);e=Object.keys(r).length}this.assert(0===e,"expected #{this} to be empty","expected #{this} not to be empty")})),r.addProperty("arguments",l),r.addProperty("Arguments",l),r.addMethod("equal",p),r.addMethod("equals",p),r.addMethod("eq",p),r.addMethod("eql",u),r.addMethod("eqls",u),r.addMethod("above",d),r.addMethod("gt",d),r.addMethod("greaterThan",d),r.addMethod("least",h),r.addMethod("gte",h),r.addMethod("below",f),r.addMethod("lt",f),r.addMethod("lessThan",f),r.addMethod("most",m),r.addMethod("lte",m),r.addMethod("within",(function(e,i,s){s&&o(this,"message",s);var a,c=o(this,"object"),l=o(this,"doLength"),p=o(this,"message"),u=p?p+": ":"",d=o(this,"ssfi"),h=t.type(c).toLowerCase(),f=t.type(e).toLowerCase(),m=t.type(i).toLowerCase(),g=!0,y="date"===f&&"date"===m?e.toUTCString()+".."+i.toUTCString():e+".."+i;if(l&&"map"!==h&&"set"!==h&&new r(c,p,d,!0).to.have.property("length"),l||"date"!==h||"date"===f&&"date"===m)if("number"===f&&"number"===m||!l&&"number"!==h)if(l||"date"===h||"number"===h)g=!1;else{a=u+"expected "+("string"===h?"'"+c+"'":c)+" to be a number or a date"}else a=u+"the arguments to within must be numbers";else a=u+"the arguments to within must be dates";if(g)throw new n(a,void 0,d);if(l){var v,b="length";"map"===h||"set"===h?(b="size",v=c.size):v=c.length,this.assert(v>=e&&v<=i,"expected #{this} to have a "+b+" within "+y,"expected #{this} to not have a "+b+" within "+y)}else this.assert(c>=e&&c<=i,"expected #{this} to be within "+y,"expected #{this} to not be within "+y)})),r.addMethod("instanceof",g),r.addMethod("instanceOf",g),r.addMethod("property",y),r.addMethod("ownProperty",v),r.addMethod("haveOwnProperty",v),r.addMethod("ownPropertyDescriptor",b),r.addMethod("haveOwnPropertyDescriptor",b),r.addChainableMethod("length",x,w),r.addChainableMethod("lengthOf",x,w),r.addMethod("match",k),r.addMethod("matches",k),r.addMethod("string",(function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).is.a("string"),this.assert(~i.indexOf(e),"expected #{this} to contain "+t.inspect(e),"expected #{this} to not contain "+t.inspect(e))})),r.addMethod("keys",E),r.addMethod("key",E),r.addMethod("throw",_),r.addMethod("throws",_),r.addMethod("Throw",_),r.addMethod("respondTo",S),r.addMethod("respondsTo",S),r.addProperty("itself",(function(){o(this,"itself",!0)})),r.addMethod("satisfy",C),r.addMethod("satisfies",C),r.addMethod("closeTo",P),r.addMethod("approximately",P),r.addMethod("members",(function(e,n){n&&o(this,"message",n);var i=o(this,"object"),s=o(this,"message"),a=o(this,"ssfi");new r(i,s,a,!0).to.be.an("array"),new r(e,s,a,!0).to.be.an("array");var c,l,p,u=o(this,"contains"),d=o(this,"ordered");u?(l="expected #{this} to be "+(c=d?"an ordered superset":"a superset")+" of #{exp}",p="expected #{this} to not be "+c+" of #{exp}"):(l="expected #{this} to have the same "+(c=d?"ordered members":"members")+" as #{exp}",p="expected #{this} to not have the same "+c+" as #{exp}");var h=o(this,"deep")?t.eql:void 0;this.assert(function(e,t,r,n,o){if(!n){if(e.length!==t.length)return!1;t=t.slice()}return e.every((function(e,i){if(o)return r?r(e,t[i]):e===t[i];if(!r){var s=t.indexOf(e);return-1!==s&&(n||t.splice(s,1),!0)}return t.some((function(o,i){return!!r(e,o)&&(n||t.splice(i,1),!0)}))}))}(e,i,h,u,d),l,p,e,i,!0)})),r.addMethod("oneOf",(function(e,t){t&&o(this,"message",t);var n=o(this,"object"),i=o(this,"message"),s=o(this,"ssfi");new r(e,i,s,!0).to.be.an("array"),this.assert(e.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",e,n)})),r.addMethod("change",A),r.addMethod("changes",A),r.addMethod("increase",O),r.addMethod("increases",O),r.addMethod("decrease",T),r.addMethod("decreases",T),r.addMethod("by",(function(e,t){t&&o(this,"message",t);var r,n=o(this,"deltaMsgObj"),i=o(this,"initialDeltaValue"),s=o(this,"finalDeltaValue"),a=o(this,"deltaBehavior"),c=o(this,"realDelta");r="change"===a?Math.abs(s-i)===Math.abs(e):c===Math.abs(e),this.assert(r,"expected "+n+" to "+a+" by "+e,"expected "+n+" to not "+a+" by "+e)})),r.addProperty("extensible",(function(){var e=o(this,"object"),t=e===Object(e)&&Object.isExtensible(e);this.assert(t,"expected #{this} to be extensible","expected #{this} to not be extensible")})),r.addProperty("sealed",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isSealed(e);this.assert(t,"expected #{this} to be sealed","expected #{this} to not be sealed")})),r.addProperty("frozen",(function(){var e=o(this,"object"),t=e!==Object(e)||Object.isFrozen(e);this.assert(t,"expected #{this} to be frozen","expected #{this} to not be frozen")})),r.addProperty("finite",(function(e){var t=o(this,"object");this.assert("number"==typeof t&&isFinite(t),"expected #{this} to be a finite number","expected #{this} to not be a finite number")}))}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){e.expect=function(t,r){return new e.Assertion(t,r)},e.expect.fail=function(t,r,n,o){throw arguments.length<2&&(n=t,t=void 0),n=n||"expect.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:o},e.expect.fail)}}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){var r=e.Assertion;function n(){Object.defineProperty(Object.prototype,"should",{set:function(e){Object.defineProperty(this,"should",{value:e,enumerable:!0,configurable:!0,writable:!0})},get:function e(){return this instanceof String||this instanceof Number||this instanceof Boolean||"function"==typeof Symbol&&this instanceof Symbol?new r(this.valueOf(),null,e):new r(this,null,e)},configurable:!0});var t={fail:function(r,n,o,i){throw arguments.length<2&&(o=r,r=void 0),o=o||"should.fail()",new e.AssertionError(o,{actual:r,expected:n,operator:i},t.fail)},equal:function(e,t,n){new r(e,n).to.equal(t)},Throw:function(e,t,n,o){new r(e,o).to.Throw(t,n)},exist:function(e,t){new r(e,t).to.exist},not:{}};return t.not.equal=function(e,t,n){new r(e,n).to.not.equal(t)},t.not.Throw=function(e,t,n,o){new r(e,o).to.not.Throw(t,n)},t.not.exist=function(e,t){new r(e,t).to.not.exist},t.throw=t.Throw,t.not.throw=t.not.Throw,t}e.should=n,e.Should=n}},function(e,t){
/*!
 * chai
 * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
 * MIT Licensed
 */
e.exports=function(e,t){
/*!
   * Chai dependencies.
   */
var r=e.Assertion,n=t.flag,o=e.assert=function(t,n){new r(null,null,e.assert,!0).assert(t,n,"[ negation message unavailable ]")};
/*!
   * Module export.
   */o.fail=function(t,r,n,i){throw arguments.length<2&&(n=t,t=void 0),n=n||"assert.fail()",new e.AssertionError(n,{actual:t,expected:r,operator:i},o.fail)},o.isOk=function(e,t){new r(e,t,o.isOk,!0).is.ok},o.isNotOk=function(e,t){new r(e,t,o.isNotOk,!0).is.not.ok},o.equal=function(e,t,i){var s=new r(e,i,o.equal,!0);s.assert(t==n(s,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e,!0)},o.notEqual=function(e,t,i){var s=new r(e,i,o.notEqual,!0);s.assert(t!=n(s,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e,!0)},o.strictEqual=function(e,t,n){new r(e,n,o.strictEqual,!0).to.equal(t)},o.notStrictEqual=function(e,t,n){new r(e,n,o.notStrictEqual,!0).to.not.equal(t)},o.deepEqual=o.deepStrictEqual=function(e,t,n){new r(e,n,o.deepEqual,!0).to.eql(t)},o.notDeepEqual=function(e,t,n){new r(e,n,o.notDeepEqual,!0).to.not.eql(t)},o.isAbove=function(e,t,n){new r(e,n,o.isAbove,!0).to.be.above(t)},o.isAtLeast=function(e,t,n){new r(e,n,o.isAtLeast,!0).to.be.least(t)},o.isBelow=function(e,t,n){new r(e,n,o.isBelow,!0).to.be.below(t)},o.isAtMost=function(e,t,n){new r(e,n,o.isAtMost,!0).to.be.most(t)},o.isTrue=function(e,t){new r(e,t,o.isTrue,!0).is.true},o.isNotTrue=function(e,t){new r(e,t,o.isNotTrue,!0).to.not.equal(!0)},o.isFalse=function(e,t){new r(e,t,o.isFalse,!0).is.false},o.isNotFalse=function(e,t){new r(e,t,o.isNotFalse,!0).to.not.equal(!1)},o.isNull=function(e,t){new r(e,t,o.isNull,!0).to.equal(null)},o.isNotNull=function(e,t){new r(e,t,o.isNotNull,!0).to.not.equal(null)},o.isNaN=function(e,t){new r(e,t,o.isNaN,!0).to.be.NaN},o.isNotNaN=function(e,t){new r(e,t,o.isNotNaN,!0).not.to.be.NaN},o.exists=function(e,t){new r(e,t,o.exists,!0).to.exist},o.notExists=function(e,t){new r(e,t,o.notExists,!0).to.not.exist},o.isUndefined=function(e,t){new r(e,t,o.isUndefined,!0).to.equal(void 0)},o.isDefined=function(e,t){new r(e,t,o.isDefined,!0).to.not.equal(void 0)},o.isFunction=function(e,t){new r(e,t,o.isFunction,!0).to.be.a("function")},o.isNotFunction=function(e,t){new r(e,t,o.isNotFunction,!0).to.not.be.a("function")},o.isObject=function(e,t){new r(e,t,o.isObject,!0).to.be.a("object")},o.isNotObject=function(e,t){new r(e,t,o.isNotObject,!0).to.not.be.a("object")},o.isArray=function(e,t){new r(e,t,o.isArray,!0).to.be.an("array")},o.isNotArray=function(e,t){new r(e,t,o.isNotArray,!0).to.not.be.an("array")},o.isString=function(e,t){new r(e,t,o.isString,!0).to.be.a("string")},o.isNotString=function(e,t){new r(e,t,o.isNotString,!0).to.not.be.a("string")},o.isNumber=function(e,t){new r(e,t,o.isNumber,!0).to.be.a("number")},o.isNotNumber=function(e,t){new r(e,t,o.isNotNumber,!0).to.not.be.a("number")},o.isFinite=function(e,t){new r(e,t,o.isFinite,!0).to.be.finite},o.isBoolean=function(e,t){new r(e,t,o.isBoolean,!0).to.be.a("boolean")},o.isNotBoolean=function(e,t){new r(e,t,o.isNotBoolean,!0).to.not.be.a("boolean")},o.typeOf=function(e,t,n){new r(e,n,o.typeOf,!0).to.be.a(t)},o.notTypeOf=function(e,t,n){new r(e,n,o.notTypeOf,!0).to.not.be.a(t)},o.instanceOf=function(e,t,n){new r(e,n,o.instanceOf,!0).to.be.instanceOf(t)},o.notInstanceOf=function(e,t,n){new r(e,n,o.notInstanceOf,!0).to.not.be.instanceOf(t)},o.include=function(e,t,n){new r(e,n,o.include,!0).include(t)},o.notInclude=function(e,t,n){new r(e,n,o.notInclude,!0).not.include(t)},o.deepInclude=function(e,t,n){new r(e,n,o.deepInclude,!0).deep.include(t)},o.notDeepInclude=function(e,t,n){new r(e,n,o.notDeepInclude,!0).not.deep.include(t)},o.nestedInclude=function(e,t,n){new r(e,n,o.nestedInclude,!0).nested.include(t)},o.notNestedInclude=function(e,t,n){new r(e,n,o.notNestedInclude,!0).not.nested.include(t)},o.deepNestedInclude=function(e,t,n){new r(e,n,o.deepNestedInclude,!0).deep.nested.include(t)},o.notDeepNestedInclude=function(e,t,n){new r(e,n,o.notDeepNestedInclude,!0).not.deep.nested.include(t)},o.ownInclude=function(e,t,n){new r(e,n,o.ownInclude,!0).own.include(t)},o.notOwnInclude=function(e,t,n){new r(e,n,o.notOwnInclude,!0).not.own.include(t)},o.deepOwnInclude=function(e,t,n){new r(e,n,o.deepOwnInclude,!0).deep.own.include(t)},o.notDeepOwnInclude=function(e,t,n){new r(e,n,o.notDeepOwnInclude,!0).not.deep.own.include(t)},o.match=function(e,t,n){new r(e,n,o.match,!0).to.match(t)},o.notMatch=function(e,t,n){new r(e,n,o.notMatch,!0).to.not.match(t)},o.property=function(e,t,n){new r(e,n,o.property,!0).to.have.property(t)},o.notProperty=function(e,t,n){new r(e,n,o.notProperty,!0).to.not.have.property(t)},o.propertyVal=function(e,t,n,i){new r(e,i,o.propertyVal,!0).to.have.property(t,n)},o.notPropertyVal=function(e,t,n,i){new r(e,i,o.notPropertyVal,!0).to.not.have.property(t,n)},o.deepPropertyVal=function(e,t,n,i){new r(e,i,o.deepPropertyVal,!0).to.have.deep.property(t,n)},o.notDeepPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepPropertyVal,!0).to.not.have.deep.property(t,n)},o.ownProperty=function(e,t,n){new r(e,n,o.ownProperty,!0).to.have.own.property(t)},o.notOwnProperty=function(e,t,n){new r(e,n,o.notOwnProperty,!0).to.not.have.own.property(t)},o.ownPropertyVal=function(e,t,n,i){new r(e,i,o.ownPropertyVal,!0).to.have.own.property(t,n)},o.notOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notOwnPropertyVal,!0).to.not.have.own.property(t,n)},o.deepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.deepOwnPropertyVal,!0).to.have.deep.own.property(t,n)},o.notDeepOwnPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(t,n)},o.nestedProperty=function(e,t,n){new r(e,n,o.nestedProperty,!0).to.have.nested.property(t)},o.notNestedProperty=function(e,t,n){new r(e,n,o.notNestedProperty,!0).to.not.have.nested.property(t)},o.nestedPropertyVal=function(e,t,n,i){new r(e,i,o.nestedPropertyVal,!0).to.have.nested.property(t,n)},o.notNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notNestedPropertyVal,!0).to.not.have.nested.property(t,n)},o.deepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.deepNestedPropertyVal,!0).to.have.deep.nested.property(t,n)},o.notDeepNestedPropertyVal=function(e,t,n,i){new r(e,i,o.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(t,n)},o.lengthOf=function(e,t,n){new r(e,n,o.lengthOf,!0).to.have.lengthOf(t)},o.hasAnyKeys=function(e,t,n){new r(e,n,o.hasAnyKeys,!0).to.have.any.keys(t)},o.hasAllKeys=function(e,t,n){new r(e,n,o.hasAllKeys,!0).to.have.all.keys(t)},o.containsAllKeys=function(e,t,n){new r(e,n,o.containsAllKeys,!0).to.contain.all.keys(t)},o.doesNotHaveAnyKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyKeys,!0).to.not.have.any.keys(t)},o.doesNotHaveAllKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllKeys,!0).to.not.have.all.keys(t)},o.hasAnyDeepKeys=function(e,t,n){new r(e,n,o.hasAnyDeepKeys,!0).to.have.any.deep.keys(t)},o.hasAllDeepKeys=function(e,t,n){new r(e,n,o.hasAllDeepKeys,!0).to.have.all.deep.keys(t)},o.containsAllDeepKeys=function(e,t,n){new r(e,n,o.containsAllDeepKeys,!0).to.contain.all.deep.keys(t)},o.doesNotHaveAnyDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(t)},o.doesNotHaveAllDeepKeys=function(e,t,n){new r(e,n,o.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(t)},o.throws=function(e,t,i,s){("string"==typeof t||t instanceof RegExp)&&(i=t,t=null);var a=new r(e,s,o.throws,!0).to.throw(t,i);return n(a,"object")},o.doesNotThrow=function(e,t,n,i){("string"==typeof t||t instanceof RegExp)&&(n=t,t=null),new r(e,i,o.doesNotThrow,!0).to.not.throw(t,n)},o.operator=function(i,s,a,c){var l;switch(s){case"==":l=i==a;break;case"===":l=i===a;break;case">":l=i>a;break;case">=":l=i>=a;break;case"<":l=i<a;break;case"<=":l=i<=a;break;case"!=":l=i!=a;break;case"!==":l=i!==a;break;default:throw c=c?c+": ":c,new e.AssertionError(c+'Invalid operator "'+s+'"',void 0,o.operator)}var p=new r(l,c,o.operator,!0);p.assert(!0===n(p,"object"),"expected "+t.inspect(i)+" to be "+s+" "+t.inspect(a),"expected "+t.inspect(i)+" to not be "+s+" "+t.inspect(a))},o.closeTo=function(e,t,n,i){new r(e,i,o.closeTo,!0).to.be.closeTo(t,n)},o.approximately=function(e,t,n,i){new r(e,i,o.approximately,!0).to.be.approximately(t,n)},o.sameMembers=function(e,t,n){new r(e,n,o.sameMembers,!0).to.have.same.members(t)},o.notSameMembers=function(e,t,n){new r(e,n,o.notSameMembers,!0).to.not.have.same.members(t)},o.sameDeepMembers=function(e,t,n){new r(e,n,o.sameDeepMembers,!0).to.have.same.deep.members(t)},o.notSameDeepMembers=function(e,t,n){new r(e,n,o.notSameDeepMembers,!0).to.not.have.same.deep.members(t)},o.sameOrderedMembers=function(e,t,n){new r(e,n,o.sameOrderedMembers,!0).to.have.same.ordered.members(t)},o.notSameOrderedMembers=function(e,t,n){new r(e,n,o.notSameOrderedMembers,!0).to.not.have.same.ordered.members(t)},o.sameDeepOrderedMembers=function(e,t,n){new r(e,n,o.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(t)},o.notSameDeepOrderedMembers=function(e,t,n){new r(e,n,o.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(t)},o.includeMembers=function(e,t,n){new r(e,n,o.includeMembers,!0).to.include.members(t)},o.notIncludeMembers=function(e,t,n){new r(e,n,o.notIncludeMembers,!0).to.not.include.members(t)},o.includeDeepMembers=function(e,t,n){new r(e,n,o.includeDeepMembers,!0).to.include.deep.members(t)},o.notIncludeDeepMembers=function(e,t,n){new r(e,n,o.notIncludeDeepMembers,!0).to.not.include.deep.members(t)},o.includeOrderedMembers=function(e,t,n){new r(e,n,o.includeOrderedMembers,!0).to.include.ordered.members(t)},o.notIncludeOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeOrderedMembers,!0).to.not.include.ordered.members(t)},o.includeDeepOrderedMembers=function(e,t,n){new r(e,n,o.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(t)},o.notIncludeDeepOrderedMembers=function(e,t,n){new r(e,n,o.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(t)},o.oneOf=function(e,t,n){new r(e,n,o.oneOf,!0).to.be.oneOf(t)},o.changes=function(e,t,n,i){3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.changes,!0).to.change(t,n)},o.changesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesBy,!0).to.change(t,n).by(i)},o.doesNotChange=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotChange,!0).to.not.change(t,n)},o.changesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.changesButNotBy,!0).to.change(t,n).but.not.by(i)},o.increases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.increases,!0).to.increase(t,n)},o.increasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesBy,!0).to.increase(t,n).by(i)},o.doesNotIncrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotIncrease,!0).to.not.increase(t,n)},o.increasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.increasesButNotBy,!0).to.increase(t,n).but.not.by(i)},o.decreases=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.decreases,!0).to.decrease(t,n)},o.decreasesBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesBy,!0).to.decrease(t,n).by(i)},o.doesNotDecrease=function(e,t,n,i){return 3===arguments.length&&"function"==typeof t&&(i=n,n=null),new r(e,i,o.doesNotDecrease,!0).to.not.decrease(t,n)},o.doesNotDecreaseBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);return new r(e,s,o.doesNotDecreaseBy,!0).to.not.decrease(t,n).by(i)},o.decreasesButNotBy=function(e,t,n,i,s){if(4===arguments.length&&"function"==typeof t){var a=i;i=n,s=a}else 3===arguments.length&&(i=n,n=null);new r(e,s,o.decreasesButNotBy,!0).to.decrease(t,n).but.not.by(i)}
/*!
   * ### .ifError(object)
   *
   * Asserts if value is not a false value, and throws if it is a true value.
   * This is added to allow for chai to be a drop-in replacement for Node's
   * assert class.
   *
   *     var err = new Error('I am a custom error');
   *     assert.ifError(err); // Rethrows err!
   *
   * @name ifError
   * @param {Object} object
   * @namespace Assert
   * @api public
   */,o.ifError=function(e){if(e)throw e},o.isExtensible=function(e,t){new r(e,t,o.isExtensible,!0).to.be.extensible},o.isNotExtensible=function(e,t){new r(e,t,o.isNotExtensible,!0).to.not.be.extensible},o.isSealed=function(e,t){new r(e,t,o.isSealed,!0).to.be.sealed},o.isNotSealed=function(e,t){new r(e,t,o.isNotSealed,!0).to.not.be.sealed},o.isFrozen=function(e,t){new r(e,t,o.isFrozen,!0).to.be.frozen},o.isNotFrozen=function(e,t){new r(e,t,o.isNotFrozen,!0).to.not.be.frozen},o.isEmpty=function(e,t){new r(e,t,o.isEmpty,!0).to.be.empty},o.isNotEmpty=function(e,t){new r(e,t,o.isNotEmpty,!0).to.not.be.empty},
/*!
   * Aliases.
   */
function e(t,r){return o[r]=o[t],e}("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")}},function(e,t,r){(function(t){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,(function(e){var r=t[s][1][e];return o(r||e)}),l,l.exports,e,t,r,n)}return r[s].exports}for(var i=!1,s=0;s<n.length;s++)o(n[s]);return o}({"./aesprim":[function(e,t,r){!function(e,t){"use strict";t(void 0!==r?r:e.esprima={})}(this,(function(e){"use strict";var t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v;function b(e,t){if(!e)throw new Error("ASSERT: "+t)}function w(e){return e>=48&&e<=57}function x(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function k(e){return"01234567".indexOf(e)>=0}function E(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function _(e){return 10===e||13===e||8232===e||8233===e}function S(e){return 64==e||36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function C(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function P(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function A(e){return"eval"===e||"arguments"===e}function O(e,t,r,n,o){var i;b("number"==typeof r,"Comment must have valid position"),y.lastCommentStart>=r||(y.lastCommentStart=r,i={type:e,value:t},v.range&&(i.range=[r,n]),v.loc&&(i.loc=o),v.comments.push(i),v.attachComment&&(v.leadingComments.push(i),v.trailingComments.push(i)))}function T(e){var t,r,n,o;for(t=u-e,r={start:{line:d,column:u-h-e}};u<f;)if(n=l.charCodeAt(u),++u,_(n))return v.comments&&(o=l.slice(t+e,u-1),r.end={line:d,column:u-h-1},O("Line",o,t,u-1,r)),13===n&&10===l.charCodeAt(u)&&++u,++d,void(h=u);v.comments&&(o=l.slice(t+e,u),r.end={line:d,column:u-h},O("Line",o,t,u,r))}function D(){var e,t,r,n;for(v.comments&&(e=u-2,t={start:{line:d,column:u-h-2}});u<f;)if(_(r=l.charCodeAt(u)))13===r&&10===l.charCodeAt(u+1)&&++u,++d,++u,h=u,u>=f&&W({},s.UnexpectedToken,"ILLEGAL");else if(42===r){if(47===l.charCodeAt(u+1))return++u,++u,void(v.comments&&(n=l.slice(e+2,u-2),t.end={line:d,column:u-h},O("Block",n,e,u,t)));++u}else++u;W({},s.UnexpectedToken,"ILLEGAL")}function N(){var e,t;for(t=0===u;u<f;)if(E(e=l.charCodeAt(u)))++u;else if(_(e))++u,13===e&&10===l.charCodeAt(u)&&++u,++d,h=u,t=!0;else if(47===e)if(47===(e=l.charCodeAt(u+1)))++u,++u,T(2),t=!0;else{if(42!==e)break;++u,++u,D()}else if(t&&45===e){if(45!==l.charCodeAt(u+1)||62!==l.charCodeAt(u+2))break;u+=3,T(3)}else{if(60!==e)break;if("!--"!==l.slice(u+1,u+4))break;++u,++u,++u,++u,T(4)}}function j(e){var t,r,n,o=0;for(r="u"===e?4:2,t=0;t<r;++t){if(!(u<f&&x(l[u])))return"";n=l[u++],o=16*o+"0123456789abcdef".indexOf(n.toLowerCase())}return String.fromCharCode(o)}function I(){var e,t;for(e=l.charCodeAt(u++),t=String.fromCharCode(e),92===e&&(117!==l.charCodeAt(u)&&W({},s.UnexpectedToken,"ILLEGAL"),++u,(e=j("u"))&&"\\"!==e&&S(e.charCodeAt(0))||W({},s.UnexpectedToken,"ILLEGAL"),t=e);u<f&&C(e=l.charCodeAt(u));)++u,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==l.charCodeAt(u)&&W({},s.UnexpectedToken,"ILLEGAL"),++u,(e=j("u"))&&"\\"!==e&&C(e.charCodeAt(0))||W({},s.UnexpectedToken,"ILLEGAL"),t+=e);return t}function R(){var e,r;return e=u,{type:1===(r=92===l.charCodeAt(u)?I():function(){var e,t;for(e=u++;u<f;){if(92===(t=l.charCodeAt(u)))return u=e,I();if(!C(t))break;++u}return l.slice(e,u)}()).length?t.Identifier:function(e){if(p&&P(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}(r)?t.Keyword:"null"===r?t.NullLiteral:"true"===r||"false"===r?t.BooleanLiteral:t.Identifier,value:r,lineNumber:d,lineStart:h,start:e,end:u}}function M(){var e,r,n,o,i=u,a=l.charCodeAt(u),c=l[u];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++u,v.tokenize&&(40===a?v.openParenToken=v.tokens.length:123===a&&(v.openCurlyToken=v.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(a),lineNumber:d,lineStart:h,start:i,end:u};default:if(61===(e=l.charCodeAt(u+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return u+=2,{type:t.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:d,lineStart:h,start:i,end:u};case 33:case 61:return u+=2,61===l.charCodeAt(u)&&++u,{type:t.Punctuator,value:l.slice(i,u),lineNumber:d,lineStart:h,start:i,end:u}}}return">>>="===(o=l.substr(u,4))?{type:t.Punctuator,value:o,lineNumber:d,lineStart:h,start:i,end:u+=4}:">>>"===(n=o.substr(0,3))||"<<="===n||">>="===n?{type:t.Punctuator,value:n,lineNumber:d,lineStart:h,start:i,end:u+=3}:c===(r=n.substr(0,2))[1]&&"+-<>&|".indexOf(c)>=0||"=>"===r?{type:t.Punctuator,value:r,lineNumber:d,lineStart:h,start:i,end:u+=2}:"<>=!+-*%&|^/".indexOf(c)>=0?(++u,{type:t.Punctuator,value:c,lineNumber:d,lineStart:h,start:i,end:u}):void W({},s.UnexpectedToken,"ILLEGAL")}function L(){var e,r,n;if(b(w((n=l[u]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),r=u,e="","."!==n){if(e=l[u++],n=l[u],"0"===e){if("x"===n||"X"===n)return++u,function(e){for(var r="";u<f&&x(l[u]);)r+=l[u++];return 0===r.length&&W({},s.UnexpectedToken,"ILLEGAL"),S(l.charCodeAt(u))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+r,16),lineNumber:d,lineStart:h,start:e,end:u}}(r);if(k(n))return function(e){for(var r="0"+l[u++];u<f&&k(l[u]);)r+=l[u++];return(S(l.charCodeAt(u))||w(l.charCodeAt(u)))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(r,8),octal:!0,lineNumber:d,lineStart:h,start:e,end:u}}(r);n&&w(n.charCodeAt(0))&&W({},s.UnexpectedToken,"ILLEGAL")}for(;w(l.charCodeAt(u));)e+=l[u++];n=l[u]}if("."===n){for(e+=l[u++];w(l.charCodeAt(u));)e+=l[u++];n=l[u]}if("e"===n||"E"===n)if(e+=l[u++],"+"!==(n=l[u])&&"-"!==n||(e+=l[u++]),w(l.charCodeAt(u)))for(;w(l.charCodeAt(u));)e+=l[u++];else W({},s.UnexpectedToken,"ILLEGAL");return S(l.charCodeAt(u))&&W({},s.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:d,lineStart:h,start:r,end:u}}function F(){var e,r,n,o;return g=null,N(),e=u,r=function(){var e,t,r,n;for(b("/"===(e=l[u]),"Regular expression literal must start with a slash"),t=l[u++],r=!1,n=!1;u<f;)if(t+=e=l[u++],"\\"===e)_((e=l[u++]).charCodeAt(0))&&W({},s.UnterminatedRegExp),t+=e;else if(_(e.charCodeAt(0)))W({},s.UnterminatedRegExp);else if(r)"]"===e&&(r=!1);else{if("/"===e){n=!0;break}"["===e&&(r=!0)}return n||W({},s.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,r,n;for(t="",r="";u<f&&C((e=l[u]).charCodeAt(0));)if(++u,"\\"===e&&u<f)if("u"===(e=l[u])){if(n=++u,e=j("u"))for(r+=e,t+="\\u";n<u;++n)t+=l[n];else u=n,r+="u",t+="\\u";J({},s.UnexpectedToken,"ILLEGAL")}else t+="\\",J({},s.UnexpectedToken,"ILLEGAL");else r+=e,t+=e;return{value:r,literal:t}}(),o=function(e,t){var r;try{r=new RegExp(e,t)}catch(e){W({},s.InvalidRegExp)}return r}(r.value,n.value),v.tokenize?{type:t.RegularExpression,value:o,lineNumber:d,lineStart:h,start:e,end:u}:{literal:r.literal+n.literal,value:o,start:e,end:u}}function G(){var e,t,r,n;return N(),e=u,t={start:{line:d,column:u-h}},r=F(),t.end={line:d,column:u-h},v.tokenize||(v.tokens.length>0&&(n=v.tokens[v.tokens.length-1]).range[0]===e&&"Punctuator"===n.type&&("/"!==n.value&&"/="!==n.value||v.tokens.pop()),v.tokens.push({type:"RegularExpression",value:r.literal,range:[e,u],loc:t})),r}function B(){var e;return N(),u>=f?{type:t.EOF,lineNumber:d,lineStart:h,start:u,end:u}:S(e=l.charCodeAt(u))?R():40===e||41===e||59===e?M():39===e||34===e?function(){var e,r,n,o,i,a,c,p,m="",g=!1;for(c=d,p=h,b("'"===(e=l[u])||'"'===e,"String literal must starts with a quote"),r=u,++u;u<f;){if((n=l[u++])===e){e="";break}if("\\"===n)if((n=l[u++])&&_(n.charCodeAt(0)))++d,"\r"===n&&"\n"===l[u]&&++u,h=u;else switch(n){case"u":case"x":a=u,(i=j(n))?m+=i:(u=a,m+=n);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:k(n)?(0!==(o="01234567".indexOf(n))&&(g=!0),u<f&&k(l[u])&&(g=!0,o=8*o+"01234567".indexOf(l[u++]),"0123".indexOf(n)>=0&&u<f&&k(l[u])&&(o=8*o+"01234567".indexOf(l[u++]))),m+=String.fromCharCode(o)):m+=n}else{if(_(n.charCodeAt(0)))break;m+=n}}return""!==e&&W({},s.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:m,octal:g,startLineNumber:c,startLineStart:p,lineNumber:d,lineStart:h,start:r,end:u}}():46===e?w(l.charCodeAt(u+1))?L():M():w(e)?L():v.tokenize&&47===e?function(){var e,t;if(!(e=v.tokens[v.tokens.length-1]))return G();if("Punctuator"===e.type){if("]"===e.value)return M();if(")"===e.value)return!(t=v.tokens[v.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?M():G();if("}"===e.value){if(v.tokens[v.openCurlyToken-3]&&"Keyword"===v.tokens[v.openCurlyToken-3].type){if(!(t=v.tokens[v.openCurlyToken-4]))return M()}else{if(!v.tokens[v.openCurlyToken-4]||"Keyword"!==v.tokens[v.openCurlyToken-4].type)return M();if(!(t=v.tokens[v.openCurlyToken-5]))return G()}return n.indexOf(t.value)>=0?M():G()}return G()}return"Keyword"===e.type?G():M()}():M()}function z(){var e,n,o;return N(),e={start:{line:d,column:u-h}},n=B(),e.end={line:d,column:u-h},n.type!==t.EOF&&(o=l.slice(n.start,n.end),v.tokens.push({type:r[n.type],value:o,range:[n.start,n.end],loc:e})),n}function U(){var e;return u=(e=g).end,d=e.lineNumber,h=e.lineStart,g=void 0!==v.tokens?z():B(),u=e.end,d=e.lineNumber,h=e.lineStart,e}function q(){var e,t,r;e=u,t=d,r=h,g=void 0!==v.tokens?z():B(),u=e,d=t,h=r}function $(e,t){this.line=e,this.column=t}function H(e,t,r,n){this.start=new $(e,t),this.end=new $(r,n)}function V(){var e,t,r,n;return e=u,t=d,r=h,N(),n=d!==t,u=e,d=t,h=r,n}function W(e,t){var r,n=Array.prototype.slice.call(arguments,2),o=t.replace(/%(\d)/g,(function(e,t){return b(t<n.length,"Message reference must be in range"),n[t]}));throw"number"==typeof e.lineNumber?((r=new Error("Line "+e.lineNumber+": "+o)).index=e.start,r.lineNumber=e.lineNumber,r.column=e.start-h+1):((r=new Error("Line "+d+": "+o)).index=u,r.lineNumber=d,r.column=u-h+1),r.description=o,r}function J(){try{W.apply(null,arguments)}catch(e){if(!v.errors)throw e;v.errors.push(e)}}function X(e){if(e.type===t.EOF&&W(e,s.UnexpectedEOS),e.type===t.NumericLiteral&&W(e,s.UnexpectedNumber),e.type===t.StringLiteral&&W(e,s.UnexpectedString),e.type===t.Identifier&&W(e,s.UnexpectedIdentifier),e.type===t.Keyword){if(function(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(e.value))W(e,s.UnexpectedReserved);else if(p&&P(e.value))return void J(e,s.StrictReservedWord);W(e,s.UnexpectedToken,e.value)}W(e,s.UnexpectedToken,e.value)}function Y(e){var r=U();r.type===t.Punctuator&&r.value===e||X(r)}function K(e){var r=U();r.type===t.Keyword&&r.value===e||X(r)}function Q(e){return g.type===t.Punctuator&&g.value===e}function Z(e){return g.type===t.Keyword&&g.value===e}function ee(){var e;59===l.charCodeAt(u)||Q(";")?U():(e=d,N(),d===e&&(g.type===t.EOF||Q("}")||X(g)))}function te(e){return e.type===o.Identifier||e.type===o.MemberExpression}function re(e,t){var r,n,o;return r=p,o=g,n=Se(),t&&p&&A(e[0].name)&&J(t,s.StrictParamName),p=r,m.markEnd(m.createFunctionExpression(null,e,[],n),o)}function ne(){var e,r;return r=g,(e=U()).type===t.StringLiteral||e.type===t.NumericLiteral?(p&&e.octal&&J(e,s.StrictOctalLiteral),m.markEnd(m.createLiteral(e),r)):m.markEnd(m.createIdentifier(e.value),r)}function oe(){var e,r,n,o,i,a;return a=g,(e=g).type===t.Identifier?(n=ne(),"get"!==e.value||Q(":")?"set"!==e.value||Q(":")?(Y(":"),o=me(),m.markEnd(m.createProperty("init",n,o),a)):(r=ne(),Y("("),(e=g).type!==t.Identifier?(Y(")"),J(e,s.UnexpectedToken,e.value),o=re([])):(i=[ve()],Y(")"),o=re(i,e)),m.markEnd(m.createProperty("set",r,o),a)):(r=ne(),Y("("),Y(")"),o=re([]),m.markEnd(m.createProperty("get",r,o),a))):e.type!==t.EOF&&e.type!==t.Punctuator?(r=ne(),Y(":"),o=me(),m.markEnd(m.createProperty("init",r,o),a)):void X(e)}function ie(){var e,r,n,a;if(Q("("))return function(){var e;return Y("("),e=ge(),Y(")"),e}();if(Q("["))return function(){var e,t=[];for(e=g,Y("[");!Q("]");)Q(",")?(U(),t.push(null)):(t.push(me()),Q("]")||Y(","));return U(),m.markEnd(m.createArrayExpression(t),e)}();if(Q("{"))return function(){var e,t,r,n,a,c=[],l={},u=String;for(a=g,Y("{");!Q("}");)t=(e=oe()).key.type===o.Identifier?e.key.name:u(e.key.value),n="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,r="$"+t,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===i.Data?p&&n===i.Data?J({},s.StrictDuplicateProperty):n!==i.Data&&J({},s.AccessorDataProperty):n===i.Data?J({},s.AccessorDataProperty):l[r]&n&&J({},s.AccessorGetSet),l[r]|=n):l[r]=n,c.push(e),Q("}")||Y(",");return Y("}"),m.markEnd(m.createObjectExpression(c),a)}();if(e=g.type,a=g,e===t.Identifier)n=m.createIdentifier(U().value);else if(e===t.StringLiteral||e===t.NumericLiteral)p&&g.octal&&J(g,s.StrictOctalLiteral),n=m.createLiteral(U());else if(e===t.Keyword){if(Z("function"))return function(){var e,t,r,n,o,i,a,c,l,u=null;return l=g,K("function"),Q("(")||(e=g,u=ve(),p?A(e.value)&&J(e,s.StrictFunctionName):A(e.value)?(r=e,n=s.StrictFunctionName):P(e.value)&&(r=e,n=s.StrictReservedWord)),o=Ce(r),i=o.params,t=o.stricted,r=o.firstRestricted,o.message&&(n=o.message),c=p,a=Se(),p&&r&&W(r,n),p&&t&&J(t,n),p=c,m.markEnd(m.createFunctionExpression(u,i,[],a),l)}();Z("this")?(U(),n=m.createThisExpression()):X(U())}else e===t.BooleanLiteral?((r=U()).value="true"===r.value,n=m.createLiteral(r)):e===t.NullLiteral?((r=U()).value=null,n=m.createLiteral(r)):Q("/")||Q("/=")?(n=void 0!==v.tokens?m.createLiteral(G()):m.createLiteral(F()),q()):X(U());return m.markEnd(n,a)}function se(){var e=[];if(Y("("),!Q(")"))for(;u<f&&(e.push(me()),!Q(")"));)Y(",");return Y(")"),e}function ae(){var e,r;return r=g,function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=U())||X(e),m.markEnd(m.createIdentifier(e.value),r)}function ce(){return Y("."),ae()}function le(){var e;return Y("["),e=ge(),Y("]"),e}function pe(){var e,t,r;return r=g,K("new"),e=function(){var e,t,r,n;for(n=g,e=y.allowIn,t=Z("new")?pe():ie(),y.allowIn=e;Q(".")||Q("[");)Q("[")?(r=le(),t=m.createMemberExpression("[",t,r)):(r=ce(),t=m.createMemberExpression(".",t,r)),m.markEnd(t,n);return t}(),t=Q("(")?se():[],m.markEnd(m.createNewExpression(e,t),r)}function ue(){var e,r,n=g;return e=function(){var e,t,r,n,o;for(o=g,e=y.allowIn,y.allowIn=!0,t=Z("new")?pe():ie(),y.allowIn=e;;){if(Q("."))n=ce(),t=m.createMemberExpression(".",t,n);else if(Q("("))r=se(),t=m.createCallExpression(t,r);else{if(!Q("["))break;n=le(),t=m.createMemberExpression("[",t,n)}m.markEnd(t,o)}return t}(),g.type===t.Punctuator&&(!Q("++")&&!Q("--")||V()||(p&&e.type===o.Identifier&&A(e.name)&&J({},s.StrictLHSPostfix),te(e)||J({},s.InvalidLHSInAssignment),r=U(),e=m.markEnd(m.createPostfixExpression(r.value,e),n))),e}function de(){var e,r,n;return g.type!==t.Punctuator&&g.type!==t.Keyword?r=ue():Q("++")||Q("--")?(n=g,e=U(),r=de(),p&&r.type===o.Identifier&&A(r.name)&&J({},s.StrictLHSPrefix),te(r)||J({},s.InvalidLHSInAssignment),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Q("+")||Q("-")||Q("~")||Q("!")?(n=g,e=U(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n)):Z("delete")||Z("void")||Z("typeof")?(n=g,e=U(),r=de(),r=m.createUnaryExpression(e.value,r),r=m.markEnd(r,n),p&&"delete"===r.operator&&r.argument.type===o.Identifier&&J({},s.StrictDelete)):r=ue(),r}function he(e,r){var n=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=r?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function fe(){var e,t,r,n,o;return o=g,e=function(){var e,t,r,n,o,i,s,a,c,l;if(e=g,c=de(),0===(o=he(n=g,y.allowIn)))return c;for(n.prec=o,U(),t=[e,g],i=[c,n,s=de()];(o=he(g,y.allowIn))>0;){for(;i.length>2&&o<=i[i.length-2].prec;)s=i.pop(),a=i.pop().value,c=i.pop(),r=m.createBinaryExpression(a,c,s),t.pop(),e=t[t.length-1],m.markEnd(r,e),i.push(r);(n=U()).prec=o,i.push(n),t.push(g),r=de(),i.push(r)}for(r=i[l=i.length-1],t.pop();l>1;)r=m.createBinaryExpression(i[l-1].value,i[l-2],r),l-=2,e=t.pop(),m.markEnd(r,e);return r}(),Q("?")&&(U(),t=y.allowIn,y.allowIn=!0,r=me(),y.allowIn=t,Y(":"),n=me(),e=m.createConditionalExpression(e,r,n),m.markEnd(e,o)),e}function me(){var e,r,n,i,a,c;return e=g,a=g,i=r=fe(),g.type!==t.Punctuator||"="!==(c=g.value)&&"*="!==c&&"/="!==c&&"%="!==c&&"+="!==c&&"-="!==c&&"<<="!==c&&">>="!==c&&">>>="!==c&&"&="!==c&&"^="!==c&&"|="!==c||(te(r)||J({},s.InvalidLHSInAssignment),p&&r.type===o.Identifier&&A(r.name)&&J(e,s.StrictLHSAssignment),e=U(),n=me(),i=m.markEnd(m.createAssignmentExpression(e.value,r,n),a)),i}function ge(){var e,t=g;if(e=me(),Q(",")){for(e=m.createSequenceExpression([e]);u<f&&Q(",");)U(),e.expressions.push(me());m.markEnd(e,t)}return e}function ye(){var e,t;return t=g,Y("{"),e=function(){for(var e,t=[];u<f&&!Q("}")&&void 0!==(e=Ae());)t.push(e);return t}(),Y("}"),m.markEnd(m.createBlockStatement(e),t)}function ve(){var e,r;return r=g,(e=U()).type!==t.Identifier&&X(e),m.markEnd(m.createIdentifier(e.value),r)}function be(e){var t,r,n=null;return r=g,t=ve(),p&&A(t.name)&&J({},s.StrictVarName),"const"===e?(Y("="),n=me()):Q("=")&&(U(),n=me()),m.markEnd(m.createVariableDeclarator(t,n),r)}function we(e){var t=[];do{if(t.push(be(e)),!Q(","))break;U()}while(u<f);return t}function xe(){var e,t,r,n,o,i,a,c,l,p;return e=t=r=null,K("for"),Y("("),Q(";")?U():(Z("var")||Z("let")?(y.allowIn=!1,p=g,c=U(),l=we(),e=m.markEnd(m.createVariableDeclaration(l,c.value),p),y.allowIn=!0,1===e.declarations.length&&Z("in")&&(U(),n=e,o=ge(),e=null)):(y.allowIn=!1,e=ge(),y.allowIn=!0,Z("in")&&(te(e)||J({},s.InvalidLHSInForIn),U(),n=e,o=ge(),e=null)),void 0===n&&Y(";")),void 0===n&&(Q(";")||(t=ge()),Y(";"),Q(")")||(r=ge())),Y(")"),a=y.inIteration,y.inIteration=!0,i=_e(),y.inIteration=a,void 0===n?m.createForStatement(e,t,r,i):m.createForInStatement(n,o,i)}function ke(){var e,t,r,n=[];for(r=g,Z("default")?(U(),e=null):(K("case"),e=ge()),Y(":");u<f&&!(Q("}")||Z("default")||Z("case"));)t=_e(),n.push(t);return m.markEnd(m.createSwitchCase(e,n),r)}function Ee(){var e,t,r,n,o=[],i=null;return K("try"),e=ye(),Z("catch")&&o.push((n=g,K("catch"),Y("("),Q(")")&&X(g),t=ve(),p&&A(t.name)&&J({},s.StrictCatchVariable),Y(")"),r=ye(),m.markEnd(m.createCatchClause(t,r),n))),Z("finally")&&(U(),i=ye()),0!==o.length||i||W({},s.NoCatchOrFinally),m.createTryStatement(e,[],o,i)}function _e(){var e,r,n,i,a,c,d,h,v,b=g.type;if(b===t.EOF&&X(g),b===t.Punctuator&&"{"===g.value)return ye();if(i=g,b===t.Punctuator)switch(g.value){case";":return m.markEnd((Y(";"),m.createEmptyStatement()),i);case"(":return m.markEnd(function(){var e=ge();return ee(),m.createExpressionStatement(e)}(),i)}if(b===t.Keyword)switch(g.value){case"break":return m.markEnd(function(){var e,r=null;return K("break"),59===l.charCodeAt(u)?(U(),y.inIteration||y.inSwitch||W({},s.IllegalBreak),m.createBreakStatement(null)):V()?(y.inIteration||y.inSwitch||W({},s.IllegalBreak),m.createBreakStatement(null)):(g.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||W({},s.UnknownLabel,r.name)),ee(),null!==r||y.inIteration||y.inSwitch||W({},s.IllegalBreak),m.createBreakStatement(r))}(),i);case"continue":return m.markEnd(function(){var e,r=null;return K("continue"),59===l.charCodeAt(u)?(U(),y.inIteration||W({},s.IllegalContinue),m.createContinueStatement(null)):V()?(y.inIteration||W({},s.IllegalContinue),m.createContinueStatement(null)):(g.type===t.Identifier&&(e="$"+(r=ve()).name,Object.prototype.hasOwnProperty.call(y.labelSet,e)||W({},s.UnknownLabel,r.name)),ee(),null!==r||y.inIteration||W({},s.IllegalContinue),m.createContinueStatement(r))}(),i);case"debugger":return m.markEnd((K("debugger"),ee(),m.createDebuggerStatement()),i);case"do":return m.markEnd((K("do"),v=y.inIteration,y.inIteration=!0,d=_e(),y.inIteration=v,K("while"),Y("("),h=ge(),Y(")"),Q(";")&&U(),m.createDoWhileStatement(d,h)),i);case"for":return m.markEnd(xe(),i);case"function":return m.markEnd(Pe(),i);case"if":return m.markEnd(function(){var e,t,r;return K("if"),Y("("),e=ge(),Y(")"),t=_e(),Z("else")?(U(),r=_e()):r=null,m.createIfStatement(e,t,r)}(),i);case"return":return m.markEnd((c=null,K("return"),y.inFunctionBody||J({},s.IllegalReturn),32===l.charCodeAt(u)&&S(l.charCodeAt(u+1))?(c=ge(),ee(),m.createReturnStatement(c)):V()?m.createReturnStatement(null):(Q(";")||Q("}")||g.type===t.EOF||(c=ge()),ee(),m.createReturnStatement(c))),i);case"switch":return m.markEnd(function(){var e,t,r,n,o;if(K("switch"),Y("("),e=ge(),Y(")"),Y("{"),t=[],Q("}"))return U(),m.createSwitchStatement(e,t);for(n=y.inSwitch,y.inSwitch=!0,o=!1;u<f&&!Q("}");)null===(r=ke()).test&&(o&&W({},s.MultipleDefaultsInSwitch),o=!0),t.push(r);return y.inSwitch=n,Y("}"),m.createSwitchStatement(e,t)}(),i);case"throw":return m.markEnd(function(){var e;return K("throw"),V()&&W({},s.NewlineAfterThrow),e=ge(),ee(),m.createThrowStatement(e)}(),i);case"try":return m.markEnd(Ee(),i);case"var":return m.markEnd((K("var"),a=we(),ee(),m.createVariableDeclaration(a,"var")),i);case"while":return m.markEnd(function(){var e,t,r;return K("while"),Y("("),e=ge(),Y(")"),r=y.inIteration,y.inIteration=!0,t=_e(),y.inIteration=r,m.createWhileStatement(e,t)}(),i);case"with":return m.markEnd(function(){var e,t;return p&&(N(),J({},s.StrictModeWith)),K("with"),Y("("),e=ge(),Y(")"),t=_e(),m.createWithStatement(e,t)}(),i)}return(e=ge()).type===o.Identifier&&Q(":")?(U(),n="$"+e.name,Object.prototype.hasOwnProperty.call(y.labelSet,n)&&W({},s.Redeclaration,"Label",e.name),y.labelSet[n]=!0,r=_e(),delete y.labelSet[n],m.markEnd(m.createLabeledStatement(e,r),i)):(ee(),m.markEnd(m.createExpressionStatement(e),i))}function Se(){var e,r,n,i,a,c,d,h,v=[];for(h=g,Y("{");u<f&&g.type===t.StringLiteral&&(r=g,e=Ae(),v.push(e),e.expression.type===o.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(p=!0,n&&J(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(i=y.labelSet,a=y.inIteration,c=y.inSwitch,d=y.inFunctionBody,y.labelSet={},y.inIteration=!1,y.inSwitch=!1,y.inFunctionBody=!0;u<f&&!Q("}")&&void 0!==(e=Ae());)v.push(e);return Y("}"),y.labelSet=i,y.inIteration=a,y.inSwitch=c,y.inFunctionBody=d,m.markEnd(m.createBlockStatement(v),h)}function Ce(e){var t,r,n,o,i,a,c=[];if(Y("("),!Q(")"))for(o={};u<f&&(r=g,t=ve(),i="$"+r.value,p?(A(r.value)&&(n=r,a=s.StrictParamName),Object.prototype.hasOwnProperty.call(o,i)&&(n=r,a=s.StrictParamDupe)):e||(A(r.value)?(e=r,a=s.StrictParamName):P(r.value)?(e=r,a=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(o,i)&&(e=r,a=s.StrictParamDupe)),c.push(t),o[i]=!0,!Q(")"));)Y(",");return Y(")"),{params:c,stricted:n,firstRestricted:e,message:a}}function Pe(){var e,t,r,n,o,i,a,c,l,u;return u=g,K("function"),n=g,e=ve(),p?A(n.value)&&J(n,s.StrictFunctionName):A(n.value)?(a=n,c=s.StrictFunctionName):P(n.value)&&(a=n,c=s.StrictReservedWord),t=(i=Ce(a)).params,o=i.stricted,a=i.firstRestricted,i.message&&(c=i.message),l=p,r=Se(),p&&a&&W(a,c),p&&o&&J(o,c),p=l,m.markEnd(m.createFunctionDeclaration(e,t,[],r),u)}function Ae(){if(g.type===t.Keyword)switch(g.value){case"const":case"let":return e=g.value,n=g,K(e),r=we(e),ee(),m.markEnd(m.createVariableDeclaration(r,e),n);case"function":return Pe();default:return _e()}var e,r,n;if(g.type!==t.EOF)return _e()}function Oe(){var e,r;return N(),q(),r=g,p=!1,e=function(){for(var e,r,n,i=[];u<f&&(r=g).type===t.StringLiteral&&(e=Ae(),i.push(e),e.expression.type===o.Literal);)"use strict"===l.slice(r.start+1,r.end-1)?(p=!0,n&&J(n,s.StrictOctalLiteral)):!n&&r.octal&&(n=r);for(;u<f&&void 0!==(e=Ae());)i.push(e);return i}(),m.markEnd(m.createProgram(e),r)}function Te(){var e,t,r,n=[];for(e=0;e<v.tokens.length;++e)r={type:(t=v.tokens[e]).type,value:t.value},v.range&&(r.range=t.range),v.loc&&(r.loc=t.loc),n.push(r);v.tokens=n}(r={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",r[t.EOF]="<end>",r[t.Identifier]="Identifier",r[t.Keyword]="Keyword",r[t.NullLiteral]="Null",r[t.NumericLiteral]="Numeric",r[t.Punctuator]="Punctuator",r[t.StringLiteral]="String",r[t.RegularExpression]="RegularExpression",n=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],o={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},a={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},c={name:"SyntaxTree",processComment:function(e){var t,r;if(!(e.type===o.Program&&e.body.length>0)){for(v.trailingComments.length>0?v.trailingComments[0].range[0]>=e.range[1]?(r=v.trailingComments,v.trailingComments=[]):v.trailingComments.length=0:v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments&&v.bottomRightStack[v.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(r=v.bottomRightStack[v.bottomRightStack.length-1].trailingComments,delete v.bottomRightStack[v.bottomRightStack.length-1].trailingComments);v.bottomRightStack.length>0&&v.bottomRightStack[v.bottomRightStack.length-1].range[0]>=e.range[0];)t=v.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):v.leadingComments.length>0&&v.leadingComments[v.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=v.leadingComments,v.leadingComments=[]),r&&(e.trailingComments=r),v.bottomRightStack.push(e)}},markEnd:function(e,t){return v.range&&(e.range=[t.start,u]),v.loc&&(e.loc=new H(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),d,u-h),this.postProcess(e)),v.attachComment&&this.processComment(e),e},postProcess:function(e){return v.source&&(e.loc.source=v.source),e},createArrayExpression:function(e){return{type:o.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,r){return{type:o.AssignmentExpression,operator:e,left:t,right:r}},createBinaryExpression:function(e,t,r){return{type:"||"===e||"&&"===e?o.LogicalExpression:o.BinaryExpression,operator:e,left:t,right:r}},createBlockStatement:function(e){return{type:o.BlockStatement,body:e}},createBreakStatement:function(e){return{type:o.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:o.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:o.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,r){return{type:o.ConditionalExpression,test:e,consequent:t,alternate:r}},createContinueStatement:function(e){return{type:o.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:o.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:o.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:o.EmptyStatement}},createExpressionStatement:function(e){return{type:o.ExpressionStatement,expression:e}},createForStatement:function(e,t,r,n){return{type:o.ForStatement,init:e,test:t,update:r,body:n}},createForInStatement:function(e,t,r){return{type:o.ForInStatement,left:e,right:t,body:r,each:!1}},createFunctionDeclaration:function(e,t,r,n){return{type:o.FunctionDeclaration,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,r,n){return{type:o.FunctionExpression,id:e,params:t,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:o.Identifier,name:e}},createIfStatement:function(e,t,r){return{type:o.IfStatement,test:e,consequent:t,alternate:r}},createLabeledStatement:function(e,t){return{type:o.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:o.Literal,value:e.value,raw:l.slice(e.start,e.end)}},createMemberExpression:function(e,t,r){return{type:o.MemberExpression,computed:"["===e,object:t,property:r}},createNewExpression:function(e,t){return{type:o.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:o.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:o.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:o.Program,body:e}},createProperty:function(e,t,r){return{type:o.Property,key:t,value:r,kind:e}},createReturnStatement:function(e){return{type:o.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:o.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:o.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:o.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:o.ThisExpression}},createThrowStatement:function(e){return{type:o.ThrowStatement,argument:e}},createTryStatement:function(e,t,r,n){return{type:o.TryStatement,block:e,guardedHandlers:t,handlers:r,finalizer:n}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:o.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:o.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:o.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:o.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:o.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:o.WithStatement,object:e,body:t}}},e.version="1.2.2",e.tokenize=function(e,r){var n;"string"==typeof e||e instanceof String||(e=String(e)),m=c,u=0,d=(l=e).length>0?1:0,h=0,f=l.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},(r=r||{}).tokens=!0,v.tokens=[],v.tokenize=!0,v.openParenToken=-1,v.openCurlyToken=-1,v.range="boolean"==typeof r.range&&r.range,v.loc="boolean"==typeof r.loc&&r.loc,"boolean"==typeof r.comment&&r.comment&&(v.comments=[]),"boolean"==typeof r.tolerant&&r.tolerant&&(v.errors=[]);try{if(q(),g.type===t.EOF)return v.tokens;for(U();g.type!==t.EOF;)try{U()}catch(e){if(v.errors){v.errors.push(e);break}throw e}Te(),n=v.tokens,void 0!==v.comments&&(n.comments=v.comments),void 0!==v.errors&&(n.errors=v.errors)}catch(e){throw e}finally{v={}}return n},e.parse=function(e,t){var r,n;n=String,"string"==typeof e||e instanceof String||(e=n(e)),m=c,u=0,d=(l=e).length>0?1:0,h=0,f=l.length,g=null,y={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},v={},void 0!==t&&(v.range="boolean"==typeof t.range&&t.range,v.loc="boolean"==typeof t.loc&&t.loc,v.attachComment="boolean"==typeof t.attachComment&&t.attachComment,v.loc&&null!==t.source&&void 0!==t.source&&(v.source=n(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(v.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(v.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(v.errors=[]),v.attachComment&&(v.range=!0,v.comments=[],v.bottomRightStack=[],v.trailingComments=[],v.leadingComments=[]));try{r=Oe(),void 0!==v.comments&&(r.comments=v.comments),void 0!==v.tokens&&(Te(),r.tokens=v.tokens),void 0!==v.errors&&(r.errors=v.errors)}catch(e){throw e}finally{v={}}return r},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),o)o.hasOwnProperty(e)&&(t[e]=o[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()}))},{}],1:[function(e,t,r){(function(n){var o=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(e,r,n,o,i,s,a){o.ast||(o.ast=t,t.initialize());var c=s.length-1;switch(i){case 1:return o.ast.set({expression:{type:"root",value:s[c]}}),o.ast.unshift(),o.ast.yield();case 2:return o.ast.set({expression:{type:"root",value:s[c-1]}}),o.ast.unshift(),o.ast.yield();case 3:return o.ast.unshift(),o.ast.yield();case 4:return o.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:s[c-1]}}),o.ast.unshift(),o.ast.yield();case 5:case 6:break;case 7:o.ast.set({operation:"member"}),o.ast.push();break;case 8:o.ast.set({operation:"subscript"}),o.ast.push();break;case 9:o.ast.set({scope:"child"});break;case 10:o.ast.set({scope:"descendant"});break;case 11:break;case 12:o.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:o.ast.set({expression:{type:"wildcard",value:s[c]}});break;case 15:o.ast.set({expression:{type:"identifier",value:s[c]}});break;case 16:o.ast.set({expression:{type:"script_expression",value:s[c]}});break;case 17:o.ast.set({expression:{type:"numeric_literal",value:parseInt(s[c])}});break;case 18:break;case 19:o.ast.set({scope:"child"});break;case 20:o.ast.set({scope:"descendant"});break;case 21:case 22:case 23:break;case 24:s[c].length>1?o.ast.set({expression:{type:"union",value:s[c]}}):this.$=s[c];break;case 25:this.$=[s[c]];break;case 26:this.$=s[c-2].concat(s[c]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(s[c])}},o.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:s[c]}},o.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:s[c]}},o.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:s[c]}},o.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:s[c]}},o.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:s[c]}},o.ast.set(this.$);break;case 33:case 34:this.$=s[c]}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,r=[0],n=[null],o=[],i=this.table,s="",a=0,c=0,l=0,p=2,u=1,d=o.slice.call(arguments,1);this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var f=this.lexer.options&&this.lexer.options.ranges;function m(){var e;return"number"!=typeof(e=t.lexer.lex()||u)&&(e=t.symbols_[e]||e),e}"function"==typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,y,v,b,w,x,k,E,_,S={};;){if(v=r[r.length-1],this.defaultActions[v]?b=this.defaultActions[v]:(null==g&&(g=m()),b=i[v]&&i[v][g]),void 0===b||!b.length||!b[0]){var C="";for(x in _=[],i[v])this.terminals_[x]&&x>p&&_.push("'"+this.terminals_[x]+"'");C=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(a+1)+": Unexpected "+(g==u?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:h,expected:_})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+g);switch(b[0]){case 1:r.push(g),n.push(this.lexer.yytext),o.push(this.lexer.yylloc),r.push(b[1]),g=null,y?(g=y,y=null):(c=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,h=this.lexer.yylloc,l>0&&l--);break;case 2:if(k=this.productions_[b[1]][1],S.$=n[n.length-k],S._$={first_line:o[o.length-(k||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(k||1)].first_column,last_column:o[o.length-1].last_column},f&&(S._$.range=[o[o.length-(k||1)].range[0],o[o.length-1].range[1]]),void 0!==(w=this.performAction.apply(S,[s,c,a,this.yy,b[1],n,o].concat(d))))return w;k&&(r=r.slice(0,-1*k*2),n=n.slice(0,-1*k),o=o.slice(0,-1*k)),r.push(this.productions_[b[1]][0]),n.push(S.$),o.push(S._$),E=i[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},t={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(e){for(var t in e)this._node[t]=e[t];return this._node},node:function(e){return arguments.length&&(this._node=e),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var e=this._nodes;return this.initialize(),e}},r={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===n.length?this.yylloc.first_column:0)+n[n.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,n,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((r=this._input.match(this.rules[o[i]]))&&(!t||r[0].length>t[0].length)){if(t=r,n=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,o[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,o[n]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,n){switch(r){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return t.yytext=t.yytext.substr(1,t.yyleng-2),32;case 11:return t.yytext=t.yytext.substr(1,t.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function n(){this.yy={}}return e.lexer=r,n.prototype=e,e.Parser=n,new n}();void 0!==e&&void 0!==r&&(r.parser=o,r.Parser=o.Parser,r.parse=function(){return o.parse.apply(o,arguments)},r.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),n.exit(1));var o=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return r.parser.parse(o)},void 0!==t&&e.main===t&&r.main(n.argv.slice(1)))}).call(this,e("_process"))},{_process:14,fs:12,path:13}],2:[function(e,t,r){t.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(e,t,r){var n=e("./dict"),o=e("fs"),i={lex:{macros:{esc:"\\\\",int:n.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[n.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[n.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[n.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};o.readFileSync&&(i.moduleInclude=o.readFileSync(e.resolve("../include/module.js")),i.actionInclude=o.readFileSync(e.resolve("../include/action.js"))),t.exports=i},{"./dict":2,fs:12}],4:[function(e,t,r){var n=e("./aesprim"),o=e("./slice"),i=e("static-eval"),s=e("underscore").uniq,a=function(){return this.initialize.apply(this,arguments)};function c(t,r,o){var i=e("./index"),s=h(n.parse(r).body[0].expression,{"@":t.value}),a=o.replace(/\{\{\s*value\s*\}\}/g,s),c=i.nodes(t.value,a);return c.forEach((function(e){e.path=t.path.concat(e.path.slice(1))})),c}function l(e){return Array.isArray(e)}function p(e){return function(t,r,n,o){var i=t.value,s=t.path,a=[],c=function(t,i){var s;l(t)?(t.forEach((function(e,t){a.length>=o||n(t,e,r)&&a.push({path:i.concat(t),value:e})})),t.forEach((function(t,r){a.length>=o||e&&c(t,i.concat(r))}))):(s=t)&&!(s instanceof Array)&&s instanceof Object&&(this.keys(t).forEach((function(e){a.length>=o||n(e,t[e],r)&&a.push({path:i.concat(e),value:t[e]})})),this.keys(t).forEach((function(r){a.length>=o||e&&c(t[r],i.concat(r))})))}.bind(this);return c(i,s),a}}function u(e){return function(t,r,n){return this.descend(r,t.expression.value,e,n)}}function d(e){return function(t,r,n){return this.traverse(r,t.expression.value,e,n)}}function h(){try{return i.apply(this,arguments)}catch(e){}}function f(e){return e=e.filter((function(e){return e})),s(e,(function(e){return e.path.map((function(e){return String(e).replace("-","--")})).join("-")}))}function m(e){var t=String(e);return t.match(/^-?[0-9]+$/)?parseInt(t):null}a.prototype.initialize=function(){this.traverse=p(!0),this.descend=p()},a.prototype.keys=Object.keys,a.prototype.resolve=function(e){var t=[e.operation,e.scope,e.expression.type].join("-"),r=this._fns[t];if(!r)throw new Error("couldn't resolve key: "+t);return r.bind(this)},a.prototype.register=function(e,t){if(!t instanceof Function)throw new Error("handler must be a function");this._fns[e]=t},a.prototype._fns={"member-child-identifier":function(e,t){var r=e.expression.value,n=t.value;if(n instanceof Object&&r in n)return[{value:n[r],path:t.path.concat(r)}]},"member-descendant-identifier":d((function(e,t,r){return e==r})),"subscript-child-numeric_literal":u((function(e,t,r){return e===r})),"member-child-numeric_literal":u((function(e,t,r){return String(e)===String(r)})),"subscript-descendant-numeric_literal":d((function(e,t,r){return e===r})),"member-child-wildcard":u((function(){return!0})),"member-descendant-wildcard":d((function(){return!0})),"subscript-descendant-wildcard":d((function(){return!0})),"subscript-child-wildcard":u((function(){return!0})),"subscript-child-slice":function(e,t){if(l(t.value)){var r=e.expression.value.split(":").map(m),n=t.value.map((function(e,r){return{value:e,path:t.path.concat(r)}}));return o.apply(null,[n].concat(r))}},"subscript-child-union":function(e,t){var r=[];return e.expression.value.forEach((function(e){var n={operation:"subscript",scope:"child",expression:e.expression},o=this.resolve(n)(n,t);o&&(r=r.concat(o))}),this),f(r)},"subscript-descendant-union":function(t,r,n){var o=e(".."),i=this,s=[];return o.nodes(r,"$..*").slice(1).forEach((function(e){s.length>=n||t.expression.value.forEach((function(t){var r={operation:"subscript",scope:"child",expression:t.expression},n=i.resolve(r)(r,e);s=s.concat(n)}))})),f(s)},"subscript-child-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.descend(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-descendant-filter_expression":function(e,t,r){var o=e.expression.value.slice(2,-1),i=n.parse(o).body[0].expression;return this.traverse(t,null,(function(e,t){return h(i,{"@":t})}),r)},"subscript-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$[{{value}}]")},"member-child-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$.{{value}}")},"member-descendant-script_expression":function(e,t){return c(t,e.expression.value.slice(1,-1),"$..value")}},a.prototype._fns["subscript-child-string_literal"]=a.prototype._fns["member-child-identifier"],a.prototype._fns["member-descendant-numeric_literal"]=a.prototype._fns["subscript-descendant-string_literal"]=a.prototype._fns["member-descendant-identifier"],t.exports=a},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"static-eval":15,underscore:12}],5:[function(e,t,r){var n=e("assert"),o=e("./dict"),i=e("./parser"),s=e("./handlers"),a=function(){this.initialize.apply(this,arguments)};function c(e){return"[object String]"==Object.prototype.toString.call(e)}a.prototype.initialize=function(){this.parser=new i,this.handlers=new s},a.prototype.parse=function(e){return n.ok(c(e),"we need a path"),this.parser.parse(e)},a.prototype.parent=function(e,t){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path");var r=this.nodes(e,t)[0];return r.path.pop(),this.value(e,r.path)},a.prototype.apply=function(e,t,r){n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),n.equal(typeof r,"function","fn needs to be function");var o=this.nodes(e,t).sort((function(e,t){return t.path.length-e.path.length}));return o.forEach((function(t){var n=t.path.pop(),o=this.value(e,this.stringify(t.path)),i=t.value=r.call(e,o[n]);o[n]=i}),this),o},a.prototype.value=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),arguments.length>=3){var o=this.nodes(e,t).shift();if(!o)return this._vivify(e,t,r);var i=o.path.slice(-1).shift(),s=this.parent(e,this.stringify(o.path));s[i]=r}return this.query(e,this.stringify(t),1).shift()},a.prototype._vivify=function(e,t,r){var o=this;n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path");var i=this.parser.parse(t).map((function(e){return e.expression.value})),s=function(t,r){var n=t.pop(),i=o.value(e,t);i||(s(t.concat(),"string"==typeof n?{}:[]),i=o.value(e,t)),i[n]=r};return s(i,r),this.query(e,t)[0]},a.prototype.query=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(c(t),"we need a path"),this.nodes(e,t,r).map((function(e){return e.value}))},a.prototype.paths=function(e,t,r){return n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),this.nodes(e,t,r).map((function(e){return e.path}))},a.prototype.nodes=function(e,t,r){if(n.ok(e instanceof Object,"obj needs to be an object"),n.ok(t,"we need a path"),0===r)return[];var o=this.parser.parse(t),i=this.handlers,s=[{path:["$"],value:e}],a=[];return o.length&&"root"==o[0].expression.type&&o.shift(),o.length?(o.forEach((function(e,t){if(!(a.length>=r)){var n=i.resolve(e),c=[];s.forEach((function(i){if(!(a.length>=r)){var s=n(e,i,r);t==o.length-1?a=a.concat(s||[]):c=c.concat(s||[])}})),s=c}})),r?a.slice(0,r):a):s},a.prototype.stringify=function(e){n.ok(e,"we need a path");var t="$",r={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return(e=this._normalize(e)).forEach((function(e){if("root"!=e.expression.type){var n,o=[e.scope,e.operation].join("-"),i=r[o];if(n="string_literal"==e.expression.type?JSON.stringify(e.expression.value):e.expression.value,!i)throw new Error("couldn't find template "+o);t+=i.replace(/{{value}}/,n)}})),t},a.prototype._normalize=function(e){if(n.ok(e,"we need a path"),"string"==typeof e)return this.parser.parse(e);if(Array.isArray(e)&&"string"==typeof e[0]){var t=[{expression:{type:"root",value:"$"}}];return e.forEach((function(e,r){if("$"!=e||0!==r)if("string"==typeof e&&e.match("^"+o.identifier+"$"))t.push({operation:"member",scope:"child",expression:{value:e,type:"identifier"}});else{var n="number"==typeof e?"numeric_literal":"string_literal";t.push({operation:"subscript",scope:"child",expression:{value:e,type:n}})}})),t}if(Array.isArray(e)&&"object"==typeof e[0])return e;throw new Error("couldn't understand path "+e)},a.Handlers=s,a.Parser=i;var l=new a;l.JSONPath=a,t.exports=l},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(e,t,r){var n=e("./grammar"),o=e("../generated/parser"),i=function(){var e=new o.Parser,t=e.parseError;return e.yy.parseError=function(){e.yy.ast&&e.yy.ast.initialize(),t.apply(e,arguments)},e};i.grammar=n,t.exports=i},{"../generated/parser":1,"./grammar":3}],7:[function(e,t,r){function n(e){return String(e).match(/^[0-9]+$/)?parseInt(e):Number.isFinite(e)?parseInt(e,10):0}t.exports=function(e,t,r,o){if("string"==typeof t)throw new Error("start cannot be a string");if("string"==typeof r)throw new Error("end cannot be a string");if("string"==typeof o)throw new Error("step cannot be a string");var i=e.length;if(0===o)throw new Error("step cannot be zero");if(o=o?n(o):1,r=r<0?i+r:r,t=n(0===(t=t<0?i+t:t)?0:t||(o>0?0:i-1)),r=n(0===r?0:r||(o>0?i:-1)),t=o>0?Math.max(0,t):Math.min(i,t),r=o>0?Math.min(r,i):Math.max(-1,r),o>0&&r<=t)return[];if(o<0&&t<=r)return[];for(var s=[],a=t;a!=r&&!(o<0&&a<=r||o>0&&a>=r);a+=o)s.push(e[a]);return s}},{}],8:[function(e,t,r){var n=e("util/"),o=Array.prototype.slice,i=Object.prototype.hasOwnProperty,s=t.exports=p;function a(e,t){return n.isUndefined(t)?""+t:n.isNumber(t)&&!isFinite(t)||n.isFunction(t)||n.isRegExp(t)?t.toString():t}function c(e,t){return n.isString(e)?e.length<t?e:e.slice(0,t):e}function l(e,t,r,n,o){throw new s.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function p(e,t){e||l(e,!0,t,"==",s.ok)}function u(e,t){if(e===t)return!0;if(n.isBuffer(e)&&n.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return n.isDate(e)&&n.isDate(t)?e.getTime()===t.getTime():n.isRegExp(e)&&n.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:n.isObject(e)||n.isObject(t)?function(e,t){if(n.isNullOrUndefined(e)||n.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(n.isPrimitive(e)||n.isPrimitive(t))return e===t;var r=d(e),i=d(t);if(r&&!i||!r&&i)return!1;if(r)return e=o.call(e),t=o.call(t),u(e,t);var s,a,c=m(e),l=m(t);if(c.length!=l.length)return!1;for(c.sort(),l.sort(),a=c.length-1;a>=0;a--)if(c[a]!=l[a])return!1;for(a=c.length-1;a>=0;a--)if(s=c[a],!u(e[s],t[s]))return!1;return!0}(e,t):e==t}function d(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function f(e,t,r,o){var i;n.isString(r)&&(o=r,r=null);try{t()}catch(e){i=e}if(o=(r&&r.name?" ("+r.name+").":".")+(o?" "+o:"."),e&&!i&&l(i,r,"Missing expected exception"+o),!e&&h(i,r)&&l(i,r,"Got unwanted exception"+o),e&&i&&r&&!h(i,r)||!e&&i)throw i}s.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return c(JSON.stringify(e.actual,a),128)+" "+e.operator+" "+c(JSON.stringify(e.expected,a),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=t.name,i=n.indexOf("\n"+o);if(i>=0){var s=n.indexOf("\n",i+1);n=n.substring(s+1)}this.stack=n}}},n.inherits(s.AssertionError,Error),s.fail=l,s.ok=p,s.equal=function(e,t,r){e!=t&&l(e,t,r,"==",s.equal)},s.notEqual=function(e,t,r){e==t&&l(e,t,r,"!=",s.notEqual)},s.deepEqual=function(e,t,r){u(e,t)||l(e,t,r,"deepEqual",s.deepEqual)},s.notDeepEqual=function(e,t,r){u(e,t)&&l(e,t,r,"notDeepEqual",s.notDeepEqual)},s.strictEqual=function(e,t,r){e!==t&&l(e,t,r,"===",s.strictEqual)},s.notStrictEqual=function(e,t,r){e===t&&l(e,t,r,"!==",s.notStrictEqual)},s.throws=function(e,t,r){f.apply(this,[!0].concat(o.call(arguments)))},s.doesNotThrow=function(e,t){f.apply(this,[!1].concat(o.call(arguments)))},s.ifError=function(e){if(e)throw e};var m=Object.keys||function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t}},{"util/":11}],9:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],10:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],11:[function(e,r,n){(function(t,r){var o=/%[sdj%]/g;n.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,s=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),c=n[r];r<i;c=n[++r])m(c)||!w(c)?s+=" "+c:s+=" "+a(c);return s},n.deprecate=function(e,o){if(v(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),i=!0}return e.apply(this,arguments)}};var i,s={};function a(e,t){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(t)?r.showHidden=t:t&&n._extend(r,t),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),p(r,e,r.depth)}function c(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function l(e,t){return e}function p(e,t,r){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return y(o)||(o=p(e,o,r)),o}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return g(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var s=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),k(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(t);if(0===s.length){if(E(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return u(t)}var l,w="",_=!1,S=["{","}"];return h(t)&&(_=!0,S=["[","]"]),E(t)&&(w=" [Function"+(t.name?": "+t.name:"")+"]"),b(t)&&(w=" "+RegExp.prototype.toString.call(t)),x(t)&&(w=" "+Date.prototype.toUTCString.call(t)),k(t)&&(w=" "+u(t)),0!==s.length||_&&0!=t.length?r<0?b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=_?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)A(t,String(s))?i.push(d(e,t,r,n,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))})),i}(e,t,r,a,s):s.map((function(n){return d(e,t,r,a,n,_)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(l,w,S)):S[0]+w+S[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),A(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?p(e,c.value,null):p(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==typeof e&&null!==e}function x(e){return w(e)&&"[object Date]"===_(e)}function k(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function E(e){return"function"==typeof e}function _(e){return Object.prototype.toString.call(e)}function S(e){return e<10?"0"+e.toString(10):e.toString(10)}n.debuglog=function(e){if(v(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=f,n.isNull=m,n.isNullOrUndefined=function(e){return null==e},n.isNumber=g,n.isString=y,n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=v,n.isRegExp=b,n.isObject=w,n.isDate=x,n.isError=k,n.isFunction=E,n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[S(e.getHours()),S(e.getMinutes()),S(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":10,_process:14,inherits:9}],12:[function(e,t,r){},{}],13:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}r.resolve=function(){for(var r="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,o="/"===s.charAt(0))}return(o?"/":"")+(r=t(n(r.split("/"),(function(e){return!!e})),!o).join("/"))||"."},r.normalize=function(e){var i=r.isAbsolute(e),s="/"===o(e,-1);return(e=t(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var o=n(e.split("/")),i=n(t.split("/")),s=Math.min(o.length,i.length),a=s,c=0;c<s;c++)if(o[c]!==i[c]){a=c;break}var l=[];for(c=a;c<o.length;c++)l.push("..");return(l=l.concat(i.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,o=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!o){n=i;break}}else o=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},r.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){r=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,o=!0,i=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===n&&(o=!1,n=s+1),46===a?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!o){r=s+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:14}],14:[function(e,t,r){var n,o,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var l,p=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?p=l.concat(p):d=-1,p.length&&f())}function f(){if(!u){var e=c(h);u=!0;for(var t=p.length;t;){for(l=p,p=[];++d<t;)l&&l[d].run();d=-1,t=p.length}l=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new m(e,t)),1!==p.length||u||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],15:[function(e,t,r){var n=e("escodegen").generate;t.exports=function(e,t){t||(t={});var r={},o=function e(o,i){if("Literal"===o.type)return o.value;if("UnaryExpression"===o.type){var s=e(o.argument);return"+"===o.operator?+s:"-"===o.operator?-s:"~"===o.operator?~s:"!"===o.operator?!s:r}if("ArrayExpression"===o.type){for(var a=[],c=0,l=o.elements.length;c<l;c++){if((y=e(o.elements[c]))===r)return r;a.push(y)}return a}if("ObjectExpression"===o.type){var p={};for(c=0;c<o.properties.length;c++){var u=null===(v=o.properties[c]).value?v.value:e(v.value);if(u===r)return r;p[v.key.value||v.key.name]=u}return p}if("BinaryExpression"===o.type||"LogicalExpression"===o.type){if((l=e(o.left))===r)return r;var d=e(o.right);if(d===r)return r;var h=o.operator;return"=="===h?l==d:"==="===h?l===d:"!="===h?l!=d:"!=="===h?l!==d:"+"===h?l+d:"-"===h?l-d:"*"===h?l*d:"/"===h?l/d:"%"===h?l%d:"<"===h?l<d:"<="===h?l<=d:">"===h?l>d:">="===h?l>=d:"|"===h?l|d:"&"===h?l&d:"^"===h?l^d:"&&"===h?l&&d:"||"===h?l||d:r}if("Identifier"===o.type)return{}.hasOwnProperty.call(t,o.name)?t[o.name]:r;if("ThisExpression"===o.type)return{}.hasOwnProperty.call(t,"this")?t.this:r;if("CallExpression"===o.type){var f=e(o.callee);if(f===r)return r;if("function"!=typeof f)return r;var m=o.callee.object?e(o.callee.object):r;m===r&&(m=null);var g=[];for(c=0,l=o.arguments.length;c<l;c++){var y;if((y=e(o.arguments[c]))===r)return r;g.push(y)}return f.apply(m,g)}var v;if("MemberExpression"===o.type)return(p=e(o.object))===r||"function"==typeof p?r:"Identifier"===o.property.type?p[o.property.name]:(v=e(o.property))===r?r:p[v];if("ConditionalExpression"===o.type)return(s=e(o.test))===r?r:e(s?o.consequent:o.alternate);if("ExpressionStatement"===o.type)return(s=e(o.expression))===r?r:s;if("ReturnStatement"===o.type)return e(o.argument);if("FunctionExpression"===o.type){var b=o.body.body,w={};for(Object.keys(t).forEach((function(e){w[e]=t[e]})),c=0;c<o.params.length;c++){var x=o.params[c];if("Identifier"!=x.type)return r;t[x.name]=null}for(var c in b)if(e(b[c])===r)return r;t=w;var k=Object.keys(t),E=k.map((function(e){return t[e]}));return Function(k.join(", "),"return "+n(o)).apply(null,E)}if("TemplateLiteral"===o.type){var _="";for(c=0;c<o.expressions.length;c++)_+=e(o.quasis[c]),_+=e(o.expressions[c]);return _+=e(o.quasis[c])}if("TaggedTemplateExpression"===o.type){var S=e(o.tag),C=o.quasi,P=C.quasis.map(e),A=C.expressions.map(e);return S.apply(null,[P].concat(A))}return"TemplateElement"===o.type?o.value.cooked:r}(e);return o===r?void 0:o}},{escodegen:12}],jsonpath:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")}).call(this,r(23))},function(e,t,r){const n=r(8)("fbp-spec:mocha"),o=r(112),{Runner:i}=o,s=r(88),a=r(136),c=r(143);t.run=function(e,t,r){let l;const p=r;null==r.starttimeout&&(p.starttimeout=5e3),null==r.fixturetimeout&&(p.fixturetimeout=2e3);const u={connectTimeout:r.starttimeout,commandTimeout:r.commandtimeout},d=new i(e,u);try{l=s.getSuitesSync(t)}catch(e){throw console.log("Unable to get suites:",e),e}let h=null;before((function(t){this.timeout(r.starttimeout+500),function(t){if(!e.command)return void t(null);h=c.start(e.command,{},t)}(e=>{n("started",e),a.noError(e),d.connect(t)})})),after(e=>{var t;t=t=>{n("stopped",t),a.noError(t),d.disconnect(e)},h&&h.kill(),t(null)}),l.forEach(e=>{if(null==e.timeout){e.timeout=r.fixturetimeout}!function(e,t){(t.skip?describe.skip:describe)(""+t.name,()=>{beforeEach((function(r){null!=t.timeout&&this.timeout(t.timeout),e.setupSuite(t,r)})),afterEach(r=>e.teardownSuite(t,r)),t.cases.forEach(r=>{(r.skip?describe.skip:describe)(r.name,()=>it(r.assertion,(function(n){null!=t.timeout&&this.timeout(t.timeout),null!=r.timeout&&this.timeout(r.timeout),o.runTestAndCheck(e,r,(e,t)=>{n(e||t.error)})})))})})}(d,e)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("start",{datatype:"bang"}),e.outPorts.add("user",()=>({datatype:"object"})),e.outPorts.add("error",()=>({datatype:"object"})),n.helpers.WirePattern(e,{in:"start",out:"user",async:!0},(e,t,r,n)=>{const o={"grid-avatar":"flowhub-avatar","grid-token":"flowhub-token","grid-user":"flowhub-user"};Object.keys(o).forEach(e=>{const t=o[e],r=localStorage.getItem(e);r&&(localStorage.setItem(t,r),localStorage.removeItem(e))});const i={};["flowhub-avatar","flowhub-debug","flowhub-plan","flowhub-theme","flowhub-token","flowhub-user","github-token","github-username"].forEach(e=>{i[e]=localStorage.getItem(e)}),((e,t)=>{const r=e;if(r["flowhub-user"]){try{r["flowhub-user"]=JSON.parse(r["flowhub-user"])}catch(e){return void t(e)}t(null,r)}else t(null,r)})(i,(e,t)=>{e?n(e):(r.send(t),n())})})}},function(e,t,r){const n=r(0),o=r(8)("noflo-ui:action"),i=r(8)("noflo-ui:action:full"),s=r(8)("noflo-ui:error"),a=(e,t,r)=>{let n=t,o=r;null==n&&(n="click"),null==o&&(o="menu"),"function"==typeof window.ga&&window.ga("send","event",o,n,e)};t.getComponent=()=>{const e=new n.Component;return e.icon="file-text",e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("pass",{datatype:"all"}),n.helpers.WirePattern(e,{in:"in",out:"pass",forwardGroups:!0,async:!0},(e,t,r,n)=>{const{action:c}=e;switch(o(c),i(c,e.payload),c.match(/:error$/)&&s(e.payload),c){case"application:hash":(e=>{let t=e;"function"==typeof window.ga&&t&&(-1!==t.indexOf("?")&&([t]=t.split("?")),window.ga("set","page",`${window.location.pathname}${window.location.search}#${t}`),window.ga("send","pageview"))})(e.payload);break;case"user:login":a("userLogin");break;case"user:logout":a("userLogout");break;case"github:open":a("pullGithub","navigation","url");break;case"gist:open":a("pullGist","navigation","url");break;case"main:open":a("openHome","navigation","url");break;case"runtime:start":a("startRuntime","click","button");break;case"runtime:stop":a("stopRuntime","click","button");break;case"runtime:output":e.payload.output.message&&console.error(e.payload.output.message);break;case"runtime:processerror":console.error(e.payload.error.error);break;case"runtime:networkerror":case"runtime:protocolerror":console.error(e.payload.error);break;case"runtime:error":console.error(e.payload)}r.send(e),n()})}},function(e,t,r){const n=r(0),o=r(48),i=r(60),s=(e,t)=>{let r;const n=o.parse(e);return r=t?o.parse("https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"):"https:"===window.location.protocol?o.parse(""):o.parse("http://localhost:9999"),n.host===r.host},a=e=>{const t={client_id:e.client,response_type:"code",redirect_uri:e.url};return e.scopes.length&&(t.scope=e.scopes.join(" ")),"https://github.com/login/oauth/authorize?"+i.stringify(t)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("codeurl",{datatype:"string"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:["codeurl","redirect"],async:!0},(e,t,r,n)=>{let o;if("undefined"!=typeof chrome&&chrome.identity)return o=chrome.identity.getRedirectURL(),s(o,!0)?void chrome.identity.launchWebAuthFlow({interactive:!0,url:a({client:"f29ae9f73bfb223d69d7",url:chrome.identity.getRedirectURL(),scopes:e.payload.scopes})},e=>{r.codeurl.send({payload:e}),n()}):void n(new Error("App URL must match GitHub app configuration https://hfhpoogbmnkfihpcaoigganphdglajmp.chromiumapp.org/"));if(!s(e.payload.url))return void n(new Error("App URL must match GitHub app configuration http://localhost:9999"));const i={client:"46fe25abef8d07e6dc2d",url:e.payload.url,scopes:e.payload.scopes};"https:"===window.location.protocol&&(i.client=""),r.redirect.send(a(i)),n()})}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(19),i=e=>{const t=e;if(!(null!=t.runtime?t.runtime.id:void 0))return null;t.runtimeStatuses||(t.runtimeStatuses={}),t.runtimeExecutions||(t.runtimeExecutions={}),t.componentLibraries||(t.componentLibraries={});return{definition:t.runtime,status:t.runtimeStatuses[t.runtime.id]||{},execution:t.runtimeExecutions[t.runtime.id]||{running:!1,label:"not started"}}};t.getComponent=()=>{const e=new n.Component;return e.description="Map application state to UI properties",e.inPorts.add("state",{datatype:"object",description:"Full application state"}),e.inPorts.add("updated",{datatype:"object",description:"Updated application state values"}),e.outPorts.add("props",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("state","updated"))return;const[r,n]=e.getData("state","updated"),s={};Object.keys(n).forEach(e=>{switch(e){case"runtime":return(null!=r.runtime?r.runtime.id:void 0)?(s.runtime=i(r),void(s.componentLibrary=r.componentLibraries[r.runtime.id]||[])):(s.runtime=n.runtime,s.componentLibrary=[],s.packets=[],s.events=[],s.edges=[],void(s.icons={}));case"componentLibraries":if(!(null!=r.runtime?r.runtime.id:void 0))return;return void(s.componentLibrary=n[e][r.runtime.id]||[]);case"runtimeStatuses":case"runtimeExecutions":return void(s.runtime=i(r));case"runtimePackets":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimePackets[r.runtime.id])return void(s.packets=[]);const e=n.runtimePackets[r.runtime.id].toarray();e.reverse();const t=r.project?r.project.namespace:null;return void(s.packets=e.filter(e=>e.graph===o(r.graphs[0],t)))}case"runtimeEvents":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(!n.runtimeEvents[r.runtime.id])return void(s.events=[]);const e=n.runtimeEvents[r.runtime.id].toarray();return e.reverse(),void(s.events=e)}case"runtimeIcons":{if(!(null!=r.runtime?r.runtime.id:void 0))return;if(s.icons={},!n.runtimeIcons[r.runtime.id])return;if(!(null!=r.graphs?r.graphs.length:void 0))return;const e=r.graphs[r.graphs.length-1],t=e.name||e.properties.id;if(!n.runtimeIcons[r.runtime.id][t])return;return void Object.keys(n.runtimeIcons[r.runtime.id][t]).forEach(e=>{const o=n.runtimeIcons[r.runtime.id][t][e];s.icons[e]=o})}default:s[e]=n[e]}}),t.sendDone({props:s})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.Journal=t.graph=t.journal=void 0;var n=r(369);t.journal=n;var o=r(371);t.graph=o;var i=n.Journal;t.Journal=i;var s=o.Graph;t.Graph=s},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryJournalStore=t.JournalStore=t.Journal=void 0;var l=r(11),p=r(32),u=r(144);t.JournalStore=u.default;var d=r(370);function h(e){var t=e.args;switch(e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}function f(e,t){var r={};return Object.keys(e).forEach((function(e){r[e]=null})),Object.keys(t).forEach((function(e){var n=t[e];r[e]=n})),r}t.MemoryJournalStore=d.default;var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=s(l);function l(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=c.call(this)).graph=e,n.entries=[],n.subscribed=!0,n.store=r||new d.default(n.graph),0===n.store.countTransactions()?(n.currentRevision=-1,n.startTransaction("initial",t||{}),n.graph.nodes.forEach((function(e){n.appendCommand("addNode",e)})),n.graph.edges.forEach((function(e){n.appendCommand("addEdge",e)})),n.graph.initializers.forEach((function(e){n.appendCommand("addInitial",e)})),Object.keys(n.graph.properties).length>0&&n.appendCommand("changeProperties",n.graph.properties),Object.keys(n.graph.inports).forEach((function(e){var t=n.graph.inports[e];n.appendCommand("addInport",{name:e,port:t})})),Object.keys(n.graph.outports).forEach((function(e){var t=n.graph.outports[e];n.appendCommand("addOutport",{name:e,port:t})})),n.graph.groups.forEach((function(e){n.appendCommand("addGroup",e)})),n.endTransaction("initial",t||{})):n.currentRevision=n.store.lastRevision,n.graph.on("addNode",(function(e){n.appendCommand("addNode",e)})),n.graph.on("removeNode",(function(e){n.appendCommand("removeNode",e)})),n.graph.on("renameNode",(function(e,t){var r={oldId:e,newId:t};n.appendCommand("renameNode",r)})),n.graph.on("changeNode",(function(e,t){n.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),n.graph.on("addEdge",(function(e){n.appendCommand("addEdge",e)})),n.graph.on("removeEdge",(function(e){n.appendCommand("removeEdge",e)})),n.graph.on("changeEdge",(function(e,t){n.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),n.graph.on("addInitial",(function(e){n.appendCommand("addInitial",e)})),n.graph.on("removeInitial",(function(e){n.appendCommand("removeInitial",e)})),n.graph.on("changeProperties",(function(e,t){return n.appendCommand("changeProperties",{new:e,old:t})})),n.graph.on("addGroup",(function(e){return n.appendCommand("addGroup",e)})),n.graph.on("renameGroup",(function(e,t){return n.appendCommand("renameGroup",{oldName:e,newName:t})})),n.graph.on("removeGroup",(function(e){return n.appendCommand("removeGroup",e)})),n.graph.on("changeGroup",(function(e,t){return n.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),n.graph.on("addExport",(function(e){return n.appendCommand("addExport",e)})),n.graph.on("removeExport",(function(e){return n.appendCommand("removeExport",e)})),n.graph.on("addInport",(function(e,t){return n.appendCommand("addInport",{name:e,port:t})})),n.graph.on("removeInport",(function(e,t){return n.appendCommand("removeInport",{name:e,port:t})})),n.graph.on("renameInport",(function(e,t){return n.appendCommand("renameInport",{oldId:e,newId:t})})),n.graph.on("changeInport",(function(e,t,r){return n.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),n.graph.on("addOutport",(function(e,t){return n.appendCommand("addOutport",{name:e,port:t})})),n.graph.on("removeOutport",(function(e,t){return n.appendCommand("removeOutport",{name:e,port:t})})),n.graph.on("renameOutport",(function(e,t){return n.appendCommand("renameOutport",{oldId:e,newId:t})})),n.graph.on("changeOutport",(function(e,t,r){return n.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),n.graph.on("startTransaction",(function(e,t){n.startTransaction(e,t)})),n.graph.on("endTransaction",(function(e,t){n.endTransaction(e,t)})),n}return t=l,(n=[{key:"startTransaction",value:function(e,t){if(this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");this.currentRevision+=1,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){this.subscribed&&(this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[])}},{key:"appendCommand",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.subscribed){var n={cmd:e,args:p(t),rev:r};this.entries.push(n)}}},{key:"executeEntry",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.addNode(t.id,t.component);break;case"removeNode":this.graph.removeNode(t.id);break;case"renameNode":this.graph.renameNode(t.oldId,t.newId);break;case"changeNode":this.graph.setNodeMetadata(t.id,f(t.old,t.new));break;case"addEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,f(t.old,t.new));break;case"addInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"removeInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.new);break;case"addGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"renameGroup":this.graph.renameGroup(t.oldName,t.newName);break;case"removeGroup":this.graph.removeGroup(t.name);break;case"changeGroup":this.graph.setGroupMetadata(t.name,f(t.old,t.new));break;case"addInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"removeInport":this.graph.removeInport(t.name);break;case"renameInport":this.graph.renameInport(t.oldId,t.newId);break;case"changeInport":this.graph.setInportMetadata(t.name,f(t.old,t.new));break;case"addOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));break;case"removeOutport":this.graph.removeOutport(t.name);break;case"renameOutport":this.graph.renameOutport(t.oldId,t.newId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,f(t.old,t.new));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t=e.args;switch(e.cmd){case"addNode":this.graph.removeNode(t.id);break;case"removeNode":this.graph.addNode(t.id,t.component);break;case"renameNode":this.graph.renameNode(t.newId,t.oldId);break;case"changeNode":this.graph.setNodeMetadata(t.id,f(t.new,t.old));break;case"addEdge":this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"removeEdge":this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);break;case"changeEdge":this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,f(t.new,t.old));break;case"addInitial":this.graph.removeInitial(t.to.node,t.to.port);break;case"removeInitial":"number"==typeof t.to.index?this.graph.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata):this.graph.addInitial(t.from.data,t.to.node,t.to.port,t.metadata);break;case"startTransaction":case"endTransaction":break;case"changeProperties":this.graph.setProperties(t.old);break;case"addGroup":this.graph.removeGroup(t.name);break;case"renameGroup":this.graph.renameGroup(t.newName,t.oldName);break;case"removeGroup":this.graph.addGroup(t.name,t.nodes,t.metadata);break;case"changeGroup":this.graph.setGroupMetadata(t.name,f(t.new,t.old));break;case"addInport":this.graph.removeInport(t.name);break;case"removeInport":this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameInport":this.graph.renameInport(t.newId,t.oldId);break;case"changeInport":this.graph.setInportMetadata(t.name,f(t.new,t.old));break;case"addOutport":this.graph.removeOutport(t.name);break;case"removeOutport":this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);break;case"renameOutport":this.graph.renameOutport(t.newId,t.oldId);break;case"changeOutport":this.graph.setOutportMetadata(t.name,f(t.new,t.old));break;default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t=this;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(var r=this.currentRevision+1,n=r,o=e,i=r<=o;i?n<=o:n>=o;i?n+=1:n-=1)this.store.fetchTransaction(n).forEach((function(e){t.executeEntry(e)}));else for(var s=this.currentRevision,a=e+1;s>=a;s-=1){var c=this.store.fetchTransaction(s).slice(0);c.reverse(),c.forEach((function(e){t.executeEntryInversed(e)}))}this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){this.canUndo()&&this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){this.canRedo()&&this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=t||this.store.lastRevision,n=[],o=e,i=r,s=e<=i;s?o<i:o>i;s?o+=1:o-=1){var a=this.store.fetchTransaction(o);a.forEach((function(e){n.push(h(e))}))}return n.join("\n")}},{key:"toJSON",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||this.store.lastRevision,n=[],o=e,i=r;o<i;o+=1){var s=this.store.fetchTransaction(o);s.forEach((function(e){n.push(h(e))}))}return n}},{key:"save",value:function(e,t){var n=JSON.stringify(this.toJSON(),null,4);(0,r(12).writeFile)("".concat(e,".json"),n,"utf-8",t)}}])&&o(t.prototype,n),a&&o(t,a),l}(l.EventEmitter);t.Journal=m},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,r,n,c=a(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=c.call(this,e)).transactions=[],t}return t=p,(r=[{key:"countTransactions",value:function(){return this.transactions.length}},{key:"putTransaction",value:function(e,t){i(l(p.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}])&&o(t.prototype,r),n&&o(t,n),p}(r(144).default);t.default=p},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeResolveTheirs=t.equivalent=t.loadFile=t.loadFBP=t.loadJSON=t.createGraph=t.Graph=void 0;var h=r(11),f=r(32),m=r(372),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,o,s=p(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(this,u),(e=s.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=u,(n=[{key:"getPortName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.transaction.id)throw Error("Nested transactions not supported");this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){this.transaction.id?"implicit"===this.transaction.id&&(this.transaction.depth+=1):this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){"implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth&&this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t=this;this.checkTransactionStart();var r=f(this.properties);Object.keys(e).forEach((function(r){var n=e[r];t.properties[r]=n})),this.emit("changeProperties",this.properties,r),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.inports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",o,this.inports[o]),this.checkTransactionEnd()}}},{key:"removeInport",value:function(e){var t=this.getPortName(e);if(this.inports[t]){this.checkTransactionStart();var r=this.inports[t];this.setInportMetadata(t,{}),delete this.inports[t],this.emit("removeInport",t,r),this.checkTransactionEnd()}}},{key:"renameInport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.inports[r]&&n!==r&&(this.checkTransactionStart(),this.inports[n]=this.inports[r],delete this.inports[r],this.emit("renameInport",r,n),this.checkTransactionEnd())}},{key:"setInportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.inports[n]){this.checkTransactionStart(),this.inports[n].metadata||(this.inports[n].metadata={});var o=f(this.inports[n].metadata);Object.keys(t).forEach((function(e){var o=t[e],i=r.inports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeInport",n,this.inports[n],o,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.getNode(t)){var o=this.getPortName(e);this.checkTransactionStart(),this.outports[o]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",o,this.outports[o]),this.checkTransactionEnd()}}},{key:"removeOutport",value:function(e){var t=this.getPortName(e);if(this.outports[t]){this.checkTransactionStart();var r=this.outports[t];this.setOutportMetadata(t,{}),delete this.outports[t],this.emit("removeOutport",t,r),this.checkTransactionEnd()}}},{key:"renameOutport",value:function(e,t){var r=this.getPortName(e),n=this.getPortName(t);this.outports[r]&&(this.checkTransactionStart(),this.outports[n]=this.outports[r],delete this.outports[r],this.emit("renameOutport",r,n),this.checkTransactionEnd())}},{key:"setOutportMetadata",value:function(e,t){var r=this,n=this.getPortName(e);if(this.outports[n]){this.checkTransactionStart();var o=f(this.outports[n].metadata);this.outports[n].metadata||(this.outports[n].metadata={}),Object.keys(t).forEach((function(e){var o=t[e],i=r.outports[n].metadata;i&&(null!=o?i[e]=o:delete i[e])})),this.emit("changeOutport",n,this.outports[n],o,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){this.checkTransactionStart();var n={name:e,nodes:t,metadata:r};return this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd(),n}},{key:"renameGroup",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){n&&n.name===e&&(n.name=t,r.emit("renameGroup",e,t))})),this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t=this;this.checkTransactionStart(),this.groups=this.groups.filter((function(r){return!(!r||r.name===e&&(t.setGroupMetadata(r.name,{}),t.emit("removeGroup",r),1))})),this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r=this;this.checkTransactionStart(),this.groups.forEach((function(n){if(n&&n.name===e){var o=f(n.metadata);Object.keys(t).forEach((function(e){var r=t[e],o=n;o.metadata&&(null!=r?o.metadata[e]=r:delete o.metadata[e])})),r.emit("changeGroup",n,o,t)}})),this.checkTransactionEnd()}},{key:"addNode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.checkTransactionStart();var n={id:e,component:t,metadata:r};return this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t=this,r=this.getNode(e);r&&(this.checkTransactionStart(),this.edges.forEach((function(e){e.from.node!==r.id&&e.to.node!==r.id||t.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),this.initializers.forEach((function(e){e.to.node===r.id&&t.removeInitial(e.to.node,e.to.port)})),Object.keys(this.inports).forEach((function(r){t.inports[r].process===e&&t.removeInport(r)})),Object.keys(this.outports).forEach((function(r){t.outports[r].process===e&&t.removeOutport(r)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes.splice(n,1),0===r.nodes.length&&t.removeGroup(r.name))}})),this.setNodeMetadata(e,{}),this.nodes=this.nodes.filter((function(e){return e!==r})),this.emit("removeNode",r),this.checkTransactionEnd())}},{key:"getNode",value:function(e){var t=this.nodes.find((function(t){return t&&t.id===e}));return t||null}},{key:"renameNode",value:function(e,t){var r=this;this.checkTransactionStart();var n=this.getNode(e);n&&(n.id=t,this.edges.forEach((function(r){var n=r;n&&(n.from.node===e&&(n.from.node=t),n.to.node===e&&(n.to.node=t))})),this.initializers.forEach((function(r){var n=r;n&&n.to.node===e&&(n.to.node=t)})),Object.keys(this.inports).forEach((function(n){var o=r.inports[n];o.process===e&&(o.process=t)})),Object.keys(this.outports).forEach((function(n){var o=r.outports[n];o.process===e&&(o.process=t)})),this.groups.forEach((function(r){if(r){var n=r.nodes.indexOf(e);-1!==n&&(r.nodes[n]=t)}})),this.emit("renameNode",e,t),this.checkTransactionEnd())}},{key:"setNodeMetadata",value:function(e,t){var r=this.getNode(e);if(r){this.checkTransactionStart(),r.metadata||(r.metadata={});var n=f(r.metadata);Object.keys(t).forEach((function(e){if(r.metadata){var n=t[e];null!=n?r.metadata[e]=n:delete r.metadata[e]}})),this.emit("changeNode",r,n,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=this.getPortName(t),s=this.getPortName(n);if(this.edges.some((function(t){return t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===s})))return null;if(!this.getNode(e))return null;if(!this.getNode(r))return null;this.checkTransactionStart();var a={from:{node:e,port:i},to:{node:r,port:s},metadata:o};return this.edges.push(a),this.emit("addEdge",a),this.checkTransactionEnd(),a}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},a=this.getPortName(t),c=this.getPortName(o),l=null===i?void 0:i,p=null===r?void 0:r;if(this.edges.some((function(t){return t.from.node===e&&t.from.port===a&&t.from.index===p&&t.to.node===n&&t.to.port===c&&t.to.index===l})))return null;if(!this.getNode(e))return null;if(!this.getNode(n))return null;this.checkTransactionStart();var u={from:{node:e,port:a,index:p},to:{node:n,port:c,index:l},metadata:s};return this.edges.push(u),this.emit("addEdge",u),this.checkTransactionEnd(),u}},{key:"removeEdge",value:function(e,t,r,n){var o=this;if(this.getEdge(e,t,r,n)){this.checkTransactionStart();var i=this.getPortName(t),s=this.getPortName(n);this.edges=this.edges.filter((function(t){if(r&&s){if(t.from.node===e&&t.from.port===i&&t.to.node===r&&t.to.port===s)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1}else if(t.from.node===e&&t.from.port===i||t.to.node===e&&t.to.port===i)return o.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,{}),o.emit("removeEdge",t),!1;return!0})),this.checkTransactionEnd()}}},{key:"getEdge",value:function(e,t,r,n){var o=this.getPortName(t),i=this.getPortName(n),s=this.edges.find((function(t){return!!t&&t.from.node===e&&t.from.port===o&&t.to.node===r&&t.to.port===i}));return s||null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i=this.getEdge(e,t,r,n);if(i){this.checkTransactionStart(),i.metadata||(i.metadata={});var s=f(i.metadata);Object.keys(o).forEach((function(e){var t=o[e];i.metadata||(i.metadata={}),null!==t?i.metadata[e]=t:delete i.metadata[e]})),this.emit("changeEdge",i,s,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.getNode(t))return null;var o=this.getPortName(r);this.checkTransactionStart();var i={from:{data:e},to:{node:t,port:o},metadata:n};return this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addInitialIndex",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.getNode(t))return null;var i=null===n?void 0:n,s=this.getPortName(r);this.checkTransactionStart();var a={from:{data:e},to:{node:t,port:s,index:i},metadata:o};return this.initializers.push(a),this.emit("addInitial",a),this.checkTransactionEnd(),a}},{key:"addGraphInitial",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.inports[t];return n?this.addInitial(e,n.process,n.port,r):null}},{key:"addGraphInitialIndex",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this.inports[t];return o?this.addInitialIndex(e,o.process,o.port,r,n):null}},{key:"removeInitial",value:function(e,t){var r=this,n=this.getPortName(t);this.checkTransactionStart(),this.initializers=this.initializers.filter((function(t){return t.to.node!==e||t.to.port!==n||(r.emit("removeInitial",t),!1)})),this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t=this.inports[e];t&&this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e=function(e){return e.replace(/\./g,"")},t=function(e){return'"'.concat(function(e){return e.replace(/"/g,'\\"')}(e),'"')},r="digraph {\n";return this.nodes.forEach((function(e){r+="    ".concat(t(e.id)," [label=").concat(t(e.id)," shape=box]\n")})),this.initializers.forEach((function(n,o){var i;i="function"==typeof n.from.data?"Function":JSON.stringify(n.from.data),r+="    data".concat(o," [label=").concat(t(i)," shape=plaintext]\n"),r+="    data".concat(o," -> ").concat(t(n.to.node),"[headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),this.edges.forEach((function(n){r+="    ".concat(t(n.from.node)," -> ").concat(t(n.to.node),"[taillabel=").concat(e(n.from.port)," headlabel=").concat(e(n.to.port)," labelfontcolor=blue labelfontsize=8.0]\n")})),r+="}"}},{key:"toYUML",value:function(){var e=[];return this.initializers.forEach((function(t){e.push("(start)[".concat(t.to.port,"]->(").concat(t.to.node,")"))})),this.edges.forEach((function(t){e.push("(".concat(t.from.node,")[").concat(t.from.port,"]->(").concat(t.to.node,")"))})),e.join(",")}},{key:"toJSON",value:function(){var e={caseSensitive:this.caseSensitive,properties:i({name:this.name},this.properties),inports:i({},this.inports),outports:i({},this.outports),groups:this.groups.map((function(e){var t={name:e.name,nodes:e.nodes};return e.metadata&&Object.keys(e.metadata).length&&(t.metadata=i({},e.metadata)),t})),processes:{},connections:[]};return this.nodes.forEach((function(t){e.processes||(e.processes={}),e.processes[t.id]={component:t.component},t.metadata&&(e.processes[t.id].metadata=i({},t.metadata))})),this.edges.forEach((function(t){var r={src:{process:t.from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),this.initializers.forEach((function(t){var r={data:t.from.data,tgt:{process:t.to.node,port:t.to.port,index:t.to.index}};t.metadata&&Object.keys(t.metadata).length&&(r.metadata=i({},t.metadata)),e.connections||(e.connections=[]),e.connections.push(r)})),e}},{key:"save",value:function(e,t){if(m.isBrowser())t(new Error("Saving graphs not supported on browser"));else{var n=JSON.stringify(this.toJSON(),null,4),o=e;o.match(/\.json$/)||(o="".concat(e,".json")),r(12).writeFile(o,n,"utf-8",(function(e){e?t(e):t(null,o)}))}}}])&&c(t.prototype,n),o&&c(t,o),u}(h.EventEmitter);function y(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(r="string"==typeof e?JSON.parse(e):f(e)).properties||(r.properties={}),r.processes||(r.processes={}),r.connections||(r.connections=[]);var o=new g(r.properties.name,{caseSensitive:r.caseSensitive||!1});o.startTransaction("loadJSON",n);var i={};return Object.keys(r.properties).forEach((function(e){if("name"!==e&&r.properties){var t=r.properties[e];i[e]=t}})),o.setProperties(i),Object.keys(r.processes).forEach((function(e){if(r.processes){var t=r.processes[e];t.metadata||(t.metadata={}),o.addNode(e,t.component,t.metadata)}})),r.connections.forEach((function(e){var t=e.metadata?e.metadata:{};void 0===e.data?void 0!==e.src&&("number"!=typeof e.src.index&&"number"!=typeof e.tgt.index?o.addEdge(e.src.process,o.getPortName(e.src.port),e.tgt.process,o.getPortName(e.tgt.port),t):o.addEdgeIndex(e.src.process,o.getPortName(e.src.port),e.src.index,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t)):"number"==typeof e.tgt.index?o.addInitialIndex(e.data,e.tgt.process,o.getPortName(e.tgt.port),e.tgt.index,t):o.addInitial(e.data,e.tgt.process,o.getPortName(e.tgt.port),t)})),r.inports&&Object.keys(r.inports).forEach((function(e){if(r.inports&&r.inports[e]){var t=r.inports[e];o.addInport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.outports&&Object.keys(r.outports).forEach((function(e){if(r.outports&&r.outports[e]){var t=r.outports[e];o.addOutport(e,t.process,o.getPortName(t.port),t.metadata||{})}})),r.groups&&r.groups.forEach((function(e){o.addGroup(e.name,e.nodes,e.metadata||{})})),o.endTransaction("loadJSON"),t(null,o)}function v(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{n=r(47).parse(e,{caseSensitive:i})}catch(e){return t(e)}return y(n,t,o)}function b(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200!==r.status&&t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))),t(null,r.responseText))},r.open("GET",e,!0),r.send()}t.Graph=g,t.createGraph=function(e,t){return new g(e,t)},t.loadJSON=y,t.loadFBP=v,t.loadFile=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];m.isBrowser()?b(e,(function(r,o){r?t(r):o?"fbp"!==e.split(".").pop()?y(o,t,n):v(o,t,n):t(new Error("No data received"))})):r(12).readFile(e,"utf-8",(function(r,n){r?t(r):"fbp"!==e.split(".").pop()?y(n,t,{}):v(n,t,{},o)}))},t.mergeResolveTheirs=function(e,t){var r;(r=e).groups.reverse(),r.groups.forEach((function(e){null!=e&&r.removeGroup(e.name)})),Object.keys(r.outports).forEach((function(e){r.removeOutport(e)})),Object.keys(r.inports).forEach((function(e){r.removeInport(e)})),r.setProperties({}),r.initializers.reverse(),r.initializers.forEach((function(e){r.removeInitial(e.to.node,e.to.port)})),r.edges.reverse(),r.edges.forEach((function(e){r.removeEdge(e.from.node,e.from.port,e.to.node,e.to.port)})),r.nodes.reverse(),r.nodes.forEach((function(e){r.removeNode(e.id)})),t.nodes.forEach((function(t){e.addNode(t.id,t.component,t.metadata)})),t.edges.forEach((function(t){e.addEdge(t.from.node,t.from.port,t.to.node,t.to.port,t.metadata)})),t.initializers.forEach((function(t){"number"!=typeof t.to.index?e.addInitial(t.from.data,t.to.node,t.to.port,t.metadata||{}):e.addInitialIndex(t.from.data,t.to.node,t.to.port,t.to.index,t.metadata||{})})),e.setProperties(t.properties),Object.keys(t.inports).forEach((function(r){var n=t.inports[r];e.addInport(r,n.process,n.port,n.metadata||{})})),Object.keys(t.outports).forEach((function(r){var n=t.outports[r];e.addOutport(r,n.process,n.port,n.metadata||{})})),t.groups.forEach((function(t){e.addGroup(t.name,t.nodes,t.metadata||{})}))},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0,t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)}}).call(this,r(6))},function(e,t,r){const n=r(0),{v4:o}=r(27),i=r(48),s=r(24),{loadGraph:a,ensureIframe:c,getRemoteNodes:l,getSource:p}=r(19),{findGraph:u,findComponent:d,guessLanguage:h}=r(31),{addToList:f,unnamespace:m}=r(7),g=e=>e.definition&&e.definition.namespace?e.definition.namespace:null;t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.inPorts.add("projects",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("spec",{datatype:"object"}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client","projects"))return;const[r,n,y]=e.getData("in","client","projects"),v={state:"ok",graphs:[],remote:r.nodes||[],project:{},component:null,runtime:r.runtime};Promise.resolve().then(()=>c(n,{id:o()})).then(()=>n.connect()).then(e=>e.graph?(v.project=((e,t)=>{const r=t.find(t=>!(!t.runtime||t.runtime!==e.definition.id));if(r)return r;return{id:o(),name:g(e),namespace:g(e),runtime:e.definition.id,type:e.definition.type,graphs:[],components:[],specs:[]}})(n,y),((e,t)=>{const r=t;if(e.definition.repository){const t=i.parse(e.definition.repository);if("github.com"===t.hostname&&t.pathname){const e=t.pathname.slice(1),n=s.dirname(e),o=s.basename(e,s.extname(e));r.repo=`${n}/${o}`,r.name=o}}e.definition.repositoryVersion&&(r.branch=e.definition.repositoryVersion)})(n,v.project),p(n,e.graph)):Promise.reject(new Error(`Runtime ${e.id} is not running a graph`))).then(e=>a(e)).then(e=>{e.setProperties({id:`${v.project.id}/${m((null!=e.properties?e.properties.id:void 0)||e.name)}`,project:v.project.id,runtimeName:n.definition.graph}),f(v.project.graphs,e),v.project.main=e.properties.id}).then(()=>((e,t)=>e?t.connect().then(()=>t.protocol.component.list()).then(t=>t.map(e=>e.name).filter(t=>((e,t)=>{if(-1===t.indexOf("/")&&"Graph"!==t)return!0;const[r]=t.split("/");return r===e})(e,t))).then(e=>Promise.all(e.map(e=>p(t,e)))):Promise.resolve([]))(v.project.namespace,n)).then(e=>{const t=e.filter(e=>"json"===e.language&&(e.name!==n.definition.graph&&`${e.library}/${e.name}`!==n.definition.graph));return Promise.all(t.map(e=>a(e).then(t=>{const r=t;return r.name=m(e.name),r.setProperties({id:`${v.project.id}/${m((null!=r.properties?r.properties.id:void 0)||r.name)}`,project:v.project.id}),r}))).then(t=>{t.forEach(e=>{f(v.project.graphs,e)});e.filter(e=>"json"!==e.language).forEach(e=>{const t=e;t.project=v.project.id,t.id=`${v.project.id}/${t.name}`,f(v.project.components,t)});e.filter(e=>e.tests).forEach(e=>{const t={id:`${v.project.id}/${e.name}`,name:e.name,code:e.tests,language:h(e.tests,e.language),project:v.project.id,type:"spec"};f(v.project.specs,t)})})}).then(()=>{n.definition.project=v.project.id,n.definition.seen=new Date,n.definition.label||(n.definition.label=v.project.name+" runtime")}).then(()=>{if(r.component){if(v.component=d(r.component,v.project),!v.component)throw new Error(`Component ${r.component} not found`);return}const e=u(r.graph||v.project.main,v.project);if(!e)throw new Error(`Graph ${r.graph||v.project.main} not found`);f(v.graphs,e)}).then(()=>l(n,v)).then(()=>t.send({out:v,project:v.project})).then(()=>{v.project.graphs.forEach(e=>{t.send({graph:e})}),v.project.components.forEach(e=>{t.send({component:e})}),v.project.specs.forEach(e=>{t.send({spec:e})})}).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(31);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("hash",{datatype:"array"}),n.helpers.WirePattern(e,{in:["in","project"],out:["out","hash"],async:!0,forwardGroups:!1},(e,t,r,n)=>{r.out.send(e.project),e.in.state.project||e.project.runtime?n():o.getProjectHash(e.project,(e,t)=>(e||r.hash.send(t),n()))})}},function(e,t,r){const n=r(0),{findProject:o,findGraph:i,findComponent:s,findByComponent:a}=r(31);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>{if(!(null!=e.state.projects?e.state.projects.length:void 0))return void n(new Error("No projects found"));const c={state:"",project:null,runtime:null,component:null,graphs:[],remote:[]};if(c.project=o(e.payload.project,e.state.projects),!c.project)return void n(new Error(`Project ${e.payload.project} not found`));if(e.payload.component)return c.component=s(e.payload.component,c.project),c.component?(c.state="ok",r.send(c),void n()):void n(new Error(`Component ${e.payload.component} not found`));const l=i(e.payload.graph,c.project);if(!l)return void n(new Error(`Graph ${e.payload.graph} not found`));c.graphs.push(l);let p=l;for(;e.payload.nodes.length;){let t;const r=e.payload.nodes.shift();if("object"!=typeof p)c.remote.push(r);else{const o=p.getNode(r);if(!o)return void n(new Error(`Node ${r} not found`));if(!o.component)return void n(new Error(`Node ${r} has no component defined`));if([t,p]=a(o.component,c.project),"component"===t){if(c.component=p,e.payload.nodes.length)return void n(new Error(`Component ${r} cannot have subnodes`));break}"runtime"===t?c.remote.push(r):c.graphs.push(p)}}c.state=c.remote.length?"loading":"ok",r.send(c),n()})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,getRemoteNodes:s,ensureIframe:a,graphRuntimeIdentifier:c}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client");r.project.runtime?t.done(new Error("Runtime projects must be accessed via runtime")):((null!=r.remote?r.remote.length:void 0)&&(r.state="loading"),t.send({out:r}),Promise.resolve().then(()=>a(n,r.project)).then(()=>n.connect()).then(()=>((e,t,r=null)=>{const n=t.filter(t=>[null,e.definition.type].includes(i(t)));return Promise.all(n.map(t=>e.protocol.component.source({name:t.name,language:t.language,library:r||e.definition.namespace,code:t.code})))})(n,r.project.components,r.project.namespace)).then(()=>((e,t,r=null)=>{const n=t.filter(t=>o(t)===e.definition.type);return Promise.all(n.map(t=>e.protocol.graph.send({...t,name:c(t,r),properties:{...t.properties,library:r}},t.properties.main)))})(n,r.project.graphs,r.project.namespace)).then(()=>(null!=r.graphs?r.graphs.length:void 0)?(n.transport.graph===r.graphs[0]||n.transport.setMain(r.graphs[0]),Promise.resolve()):Promise.resolve()).then(()=>s(n,r)).then(()=>"loading"!==r.state?Promise.resolve():(r.state="ok",t.send({out:r}))).then(()=>t.done(),e=>t.done(e)))})}},function(e,t,r){const n=r(0),{getGraphType:o,getComponentType:i,isDefaultRuntime:s}=r(19),a=(e,t)=>{const r=(e=>{if(e.graphs.length){const t=o(e.graphs[0]);if(t)return t}if(e.component){const t=i(e.component);if(t)return t}return e.project&&e.project.type?e.project.type:"all"})(e);return t.filter(e=>"all"===r||e.type===r)};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("skipped",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");r.compatible=a(r,n),r.runtime=((e,t)=>{if(e.runtime)return e.runtime;if(!t.length)return null;const[r]=t.filter(t=>{if(e.project&&t.project){if(s(t))return!0;if(t.project!==e.project.id)return!1}return!(!e.project||t.project!==e.project.id)||"iframe"===t.protocol});return r||null})(r,r.compatible),r.runtime?t.sendDone({out:r}):t.sendDone({skipped:r})})}},function(e,t,r){const n=r(0),{v4:o}=r(27);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("runtimes",{required:!0,datatype:"array"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("new",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","runtimes"))return;const[r,n]=e.getData("in","runtimes");if(!r.runtime)return void t.done(new Error("No runtime defined"));"string"==typeof r.runtime&&"endpoint?"===r.runtime.substr(0,9)&&(r.runtime=(e=>{const t={};return e.split("&").forEach(e=>{const[r,n]=e.split("=");t[r]=n}),t.protocol&&t.address?t:null})(r.runtime.substr(9)));const i=((e,t)=>{if(!t||!t.length)return null;let r=e;return"string"==typeof e&&(r={id:e}),t.find(e=>e.id===r.id||!r.id&&r.protocol===e.protocol&&r.address===e.address)})(r.runtime,n);if(!i)return r.runtime.id||(r.runtime.id=o()),t.send({new:r.runtime}),t.send({out:r}),void t.done();r.runtime=i,t.send({out:r}),t.done()})}},function(e,t,r){const n=r(0),{v4:o}=r(27),i=(e,t,r,o,s)=>{if(!e.length)return void s();const a=e.shift();a.remote?(o.send({repository:new n.IP("data",t,{scope:r}),sha:new n.IP("data",a.remote.sha,{scope:r})}),setTimeout(()=>i(e,t,r,o,s),100)):i(e,t,r,o,s)};t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a set of blob fetching requests for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("sha",{datatype:"string"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");if(0===r.pull.length)return void t.done();const s=o();t.send({out:new n.IP("data",r,{scope:s})}),t.send({sha:new n.IP("openBracket",s,{scope:s})});const a=r.pull.slice(0);i(a,r.repo,s,t,()=>{t.send({sha:new n.IP("closeBracket",s,{scope:s})}),t.done()})})}},function(e,t,r){const n=r(0),o=(e,t)=>{if(["component","spec"].includes(e))return t.code;const r=t.toJSON();return delete r.properties.sha,delete r.properties.id,delete r.properties.project,delete r.properties.changed,JSON.stringify(r,null,4)};t.getComponent=()=>{const e=new n.Component;return e.description="Prepare a GitHub tree for an operations object",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("repository",{datatype:"string"}),e.outPorts.add("tree",{datatype:"array"}),e.outPorts.add("basetree",{datatype:"string"}),e.outPorts.add("parentcommits",{datatype:"array"}),e.outPorts.add("message",{datatype:"string"}),e.outPorts.add("ref",{datatype:"string"}),n.helpers.WirePattern(e,{in:"in",out:["out","repository","tree","basetree","parentcommits","message","ref"],async:!0},(e,t,r,n)=>(null!=e.push?e.push.length:void 0)?(r.out.send(e),r.basetree.send(e.tree),r.tree.send(e.push.map(e=>{return{path:(t=e.type,r=e.path,"graph"!==t?r:r.replace(".fbp",".json")),content:o(e.type,e.local),mode:"100644"};var t,r})),r.repository.send(e.repo),r.parentcommits.send([e.commit]),r.message.send(e.message),r.ref.send(e.ref),n()):n())}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[,r]=e.getData("in","client");r.disconnect().then(()=>r.connect()).then(()=>t.send({out:r.definition})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.outPorts.add("invalid",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",out:["pass","updated","invalid"],async:!0},(e,t,r,n)=>{if(!e||!e["flowhub-token"])return r.pass.send(e),void n();if(!navigator.onLine)return r.pass.send(e),void n();const o=new XMLHttpRequest;o.onreadystatechange=()=>{let t;if(4===o.readyState){if(401===o.status)return r.invalid.send(e),void n();if(200===o.status){try{t=JSON.parse(o.responseText)}catch(e){return void n(e)}if(JSON.stringify(t)===JSON.stringify(e["flowhub-user"]))return r.pass.send(e),void n();r.updated.send(t),n()}else try{const e=JSON.parse(o.responseText);n(new Error(e.message||"User fetching failed with "+o.status))}catch(e){n(new Error(o.responseText))}}},o.open("GET","https://api.flowhub.io/user",!0),o.setRequestHeader("Authorization","Bearer "+e["flowhub-token"]),o.send(null)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,o)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void o();const i=new XMLHttpRequest;i.onreadystatechange=()=>{if(4===i.readyState){if(![200,201,404].includes(i.status)){let{message:e}=JSON.parse(i.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void o(new Error(e))}n.send(t)}},i.open("DELETE","https://api.flowhub.io/projects/"+t.id,!0),i.setRequestHeader("Authorization","Bearer "+e.params.user["flowhub-token"]),i.send()})}},function(e,t,r){const n=r(0),o=r(80);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,i)=>{if(!e.params||!e.params.user||!e.params.user["flowhub-token"])return n.send(t),void i();new o.Runtime(t,{host:"https://api.flowhub.io"}).del(e.params.user["flowhub-token"],e=>e?i(e):(n.send(t),i()))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("route",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),e.outPorts.add("missed",{datatype:"bang"}),n.helpers.WirePattern(e,{in:"in",out:["route","redirect","missed"],forwardGroups:!1,async:!0},(e,t,r,n)=>{const o=(e=>{const t={route:"",subroute:"open",runtime:null,project:null,graph:null,component:null,nodes:[]};if(""===e)return t.route="main",t;const r=e.split("/").map(e=>decodeURIComponent(e));switch(r.shift()){case"project":return t.route="storage",t.project=r.shift(),"component"===r[0]&&2===r.length?([,t.component]=r,t):(t.graph=r.shift(),t.nodes=r,t);case"example":return{route:"redirect",url:"gist/"+r.join("/")};case"gist":return t.route="github",t.subroute="gist",t.graph=r.shift(),t.remote=r,t;case"github":{t.route="github";const[e,n]=r.splice(0,2);return t.repo=`${e}/${n}`,t.branch="master",r.length?"tree"===r[0]?(r.shift(),t.branch=r.join("/"),t):("blob"===r[0]&&(r.shift(),t.branch=r.shift(),"graphs"===r[0]&&([,t.graph]=r),"components"===r[0]&&([,t.component]=r)),t):t}case"runtime":return t.route="runtime",t.runtime=r.shift(),"component"===r[0]&&2===r.length?([,t.component]=r,t):(t.graph=r.shift(),t.nodes=r,t);default:return{route:"redirect",url:""}}})(e.payload);if(!o)return r.missed.send({payload:o}),void n();if("redirect"===o.route)return r.redirect.send("#"+o.url),void n();const i=`${o.route}:${o.subroute}`;delete o.subroute,r.route.send({action:i,payload:o}),n()})}},function(e,t,r){const n=r(0),o=r(111);t.getComponent=()=>{const e=new n.Component;return e.description="Execute fbp-spedc tests in the project",e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),{project:i}=r,s=i.specs.filter(e=>"yaml"===e.language&&e.code).map(e=>{try{return o.testsuite.loadYAML(e.code)}catch(e){return[]}}).reduce((e,t)=>e.concat(t),[]);s.length||t.done(),t.send({out:[...s]}),n.connect().then(()=>new Promise((e,r)=>{const i=new o.runner.Runner(n);o.runner.runAll(i,s,()=>{t.send({out:s})},t=>{t?r(t):e()})})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(388),i=r(8)("noflo-ui:reducer:runtime"),{componentForLibrary:s}=r(19),a=r(7),c=(e,t,r,n)=>{const i=e.runtimeEvents||{};return t?(i[t]||(i[t]=new o(400)),i[t].enq({type:r,payload:n}),i):i},l=(e,t,r)=>{const n=e||{};if(!t)return n;if(!n[t])return n;const i=n[t].toarray().filter(r);return i.reverse(),n[t]=new o(400),i.forEach(e=>{n[t].enq(e)}),n};t.getComponent=()=>{const e=new n.Component;return e.icon="cogs",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("context",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in"))return;const r=e.getData("in");switch(r.action){case"runtime:opening":return void t.sendDone({context:{state:"loading"}});case"runtime:opened":return void t.sendDone({context:{...r.payload}});case"runtime:components":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=r.payload.components.map(s),void t.sendDone({context:{componentLibraries:e}})}case"runtime:component":{const e=r.state.componentLibraries||{};return e[r.payload.runtime]=e[r.payload.runtime]||[],a.addToList(e[r.payload.runtime],s(r.payload.component)),void t.sendDone({context:{componentLibraries:e}})}case"runtime:status":{const e=r.state.runtimeStatuses||{},n=e[r.payload.runtime];let o=r.state.runtimeEvents||{};n&&n.online&&!r.payload.status.online&&(o=c(r.state,r.payload.runtime,"disconnected",r.payload.status)),n&&n.online||!r.payload.status.online||(o=c(r.state,r.payload.runtime,"connected",r.payload.status)),e[r.payload.runtime]=r.payload.status;const i={runtimeStatuses:e,runtimeEvents:o};if(!r.payload.status.online){const e=r.state.runtimeExecutions||{};e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",i.runtimeExecutions=e}return void t.sendDone({context:i})}case"runtime:started":{const e=r.state.runtimeExecutions||{};let n=r.state.runtimeEvents||{};return e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].label="running",r.payload.status.running||(e[r.payload.runtime].label="finished"),n=c(r.state,r.payload.runtime,"started "+r.payload.status.graph,r.payload.status),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:n}})}case"runtime:stopped":{const e=r.state.runtimeExecutions||{};let n=r.state.runtimeEvents||{};return e[r.payload.runtime]=r.payload.status,e[r.payload.runtime].running=!1,e[r.payload.runtime].label="not running",n=c(r.state,r.payload.runtime,"stopped "+r.payload.status.graph,r.payload.status),void t.sendDone({context:{runtimeExecutions:e,runtimeEvents:n}})}case"runtime:packet":{const e=((e,t,r)=>{const n=r,i=e.runtimePackets||{};return t?(i[t]||(i[t]=new o(400)),delete n.runtime,i[t].enq(n),i):i})(r.state,r.payload.runtime,r.payload.packet);return void t.sendDone({context:{runtimePackets:e}})}case"runtime:processerror":{const e=c(r.state,r.payload.runtime,"processerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:networkerror":{const e=c(r.state,r.payload.runtime,"networkerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:protocolerror":{const e=c(r.state,r.payload.runtime,"protocolerror",r.payload.error);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:output":{const e=c(r.state,r.payload.runtime,"output",r.payload.output);return void t.sendDone({context:{runtimeEvents:e}})}case"runtime:icon":{const e=r.state.runtimeIcons||{};e[r.payload.runtime]||(e[r.payload.runtime]={}),e[r.payload.runtime][r.payload.icon.graph]||(e[r.payload.runtime][r.payload.icon.graph]={});return e[r.payload.runtime][r.payload.icon.graph][r.payload.icon.id]=r.payload.icon.icon,void t.sendDone({context:{runtimeIcons:e}})}case"runtime:testsuites":return void t.sendDone({context:{suites:r.payload}});case"runtime:error":{let e=r.payload.runtime;!e&&r.state.runtime&&(e=r.state.runtime.id);const n=c(r.state,e,"error",r.payload);return t.send({context:{runtimeEvents:n}}),void t.sendDone({context:{state:"error",error:r.payload}})}case"runtime:clearevents":{const e=l(r.state.runtimeEvents,r.payload.runtime,e=>!(!r.payload.type||e.type===r.payload.type)||(!(!r.payload.graph||e.payload.graph===r.payload.graph)||!(!r.payload.id||e.payload.id===r.payload.id)));return void t.send({context:{runtimeEvents:e}})}case"runtime:clearpackets":{const e=l(r.state.runtimePackets,r.payload.runtime,e=>{if(r.payload.type&&e.type!==r.payload.type)return!0;if(r.payload.graph&&e.graph!==r.payload.graph)return!0;if(null!=r.payload.edge?r.payload.edge.from:void 0){if(!e.src)return!0;if(e.src.node!==r.payload.edge.from.node)return!0;if(e.src.port!==r.payload.edge.from.port)return!0}if(null!=r.payload.edge?r.payload.edge.to:void 0){if(!e.tgt)return!0;if(e.tgt.node!==r.payload.edge.to.node)return!0;if(e.tgt.port!==r.payload.edge.to.port)return!0}return!1});return void t.send({context:{runtimePackets:e}})}default:i("Unknown action "+r.action)}})}},function(e,t){function r(e){if(!(this instanceof r))return new r(e);if("object"==typeof e&&Array.isArray(e._buffer)&&"number"==typeof e._capacity&&"number"==typeof e._first&&"number"==typeof e._size)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);else{if("number"!=typeof e||e%1!=0||e<1)throw new TypeError("Invalid capacity");this._buffer=new Array(e),this._capacity=e,this._first=0,this._size=0}}r.prototype={size:function(){return this._size},capacity:function(){return this._capacity},enq:function(e){this._first>0?this._first--:this._first=this._capacity-1,this._buffer[this._first]=e,this._size<this._capacity&&this._size++},push:function(e){this._size==this._capacity?(this._buffer[this._first]=e,this._first=(this._first+1)%this._capacity):(this._buffer[(this._first+this._size)%this._capacity]=e,this._size++)},deq:function(){if(0==this._size)throw new RangeError("dequeue on empty buffer");var e=this._buffer[(this._first+this._size-1)%this._capacity];return this._size--,e},pop:function(){return this.deq()},shift:function(){if(0==this._size)throw new RangeError("shift on empty buffer");var e=this._buffer[this._first];return this._first==this._capacity-1?this._first=0:this._first++,this._size--,e},get:function(e,t){if(0==this._size&&0==e&&(null==t||0==t))return[];if("number"!=typeof e||e%1!=0||e<0)throw new TypeError("Invalid start");if(e>=this._size)throw new RangeError("Index past end of buffer: "+e);if(null==t)return this._buffer[(this._first+e)%this._capacity];if("number"!=typeof t||t%1!=0||t<0)throw new TypeError("Invalid end");if(t>=this._size)throw new RangeError("Index past end of buffer: "+t);return this._first+e>=this._capacity&&(e-=this._capacity,t-=this._capacity),this._first+t<this._capacity?this._buffer.slice(this._first+e,this._first+t+1):this._buffer.slice(this._first+e,this._capacity).concat(this._buffer.slice(0,this._first+t+1-this._capacity))},toarray:function(){return 0==this._size?[]:this.get(0,this._size-1)}},e.exports=r},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("project",{datatype:"object"}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("runtime",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{e.hasData("in","client")&&(e.getData("in","client"),t.done(new Error("Edit as Project is no longer supported")))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("nodes",{datatype:"array"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:"nodes",out:"context",async:!0},(e,t,r,n)=>{const o={searchGraphResult:e};r.send(o),n()})}},function(e,t,r){const n=r(0),{getComponentType:o}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n,i]=e.getData("in","project","client"),{component:s}=r,a=o(s);if(a&&a!==i.definition.type)return void t.done();let c=s.tests||"";n.specs.forEach(e=>{e.name===s.name&&(c=e.code)}),i.connect().then(()=>i.protocol.component.source({name:s.name,language:s.language,library:(null!=n?n.namespace:void 0)||i.definition.namespace,code:s.code,tests:c})).then(e=>t.send({out:{component:e,runtime:i.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"string"}),e.process((e,t)=>{e.hasData("in")&&(e.getData("in"),t.sendDone({out:window.location.href.split("#")[1]||""}))})}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("client",{datatype:"object"}),e.inPorts.add("graphs",{datatype:"array"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("edges",{datatype:"array"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("client","graphs","project","edges"))return;const[r,n,i,s]=e.getData("client","graphs","project","edges");if(t.send({out:s}),!n.length)return void t.done(new Error("No graph specified"));const a=n[n.length-1],c=i?i.namespace:null;r.protocol.network.edges({graph:o(a,c),edges:s.map(e=>({src:e.from,tgt:e.to}))}).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o,graphRuntimeIdentifier:i}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("project",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","project","client"))return;const[r,n]=e.getData("in","client"),s=e.getData("project"),a=o(r.graph);if(a&&a!==n.definition.type)return void t.done();const c=r.changes.map(e=>{const t=e;return t.event=e.event.toLowerCase(),t}).filter(e=>n.protocol.graph[e.event]);n.connect().then(()=>Promise.all(c.map(e=>n.protocol.graph[e.event](((e,t,r,n)=>{const o={};return Object.keys(t).forEach(r=>{const n=t[r];"from"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"to"!==r||-1===e.indexOf("edge")&&-1===e.indexOf("initial")?"metadata"===r&&["removenode","removeedge","removeinitial","removeinport","removeoutport","removegroup"].includes(e)||["node","port"].includes(r)&&["removeinport","removeoutport"].includes(e)||"component"===r&&["changenode","removenode"].includes(e)||("metadata"===r&&n&&(o.metadata={},Object.keys(n).forEach(e=>{const t=n[e];"route"===e&&null===t||(o.metadata[e]=t)})),o[r]=n):o.tgt=n:o.src=n}),o.graph=i(r,n),o})(e.event,e.payload,r.graph,s.namespace)).catch(e=>"Requested graph not found"===e.message?n.protocol.graph.send({...r.graph,name:i(r.graph,s.namespace),properties:{...r.graph.properties,library:s.namespace}},r.graph.properties.main):Promise.reject(e))))).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),{getGraphType:o,graphRuntimeIdentifier:i}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),{graph:s,project:a}=r,c=o(s);if(c&&c!==n.definition.type)return void t.done();const l=a?a.namespace:null;n.connect().then(()=>n.protocol.graph.send({...s,name:i(s,l),properties:{...s.properties,library:l}},s.properties.main)).then(()=>t.sendDone({out:r}),e=>t.done(e))})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("action",{datatype:"string",required:!0,control:!0}),e.inPorts.add("in",{datatype:"all"}),e.outPorts.add("out",{datatype:"all",scoped:!1}),n.helpers.WirePattern(e,{params:["action"],forwardGroups:!1,async:!0},(t,r,n,o)=>(n.send({action:e.params.action,payload:t}),o()))}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="indent",e.inPorts.add("context",{datatype:"object"}),e.inPorts.add("key",{datatype:"string",required:!0}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("context",{datatype:"object"}),n.helpers.WirePattern(e,{in:["context","value"],params:"key",out:"context",async:!0},(t,r,n,o)=>{const i=t;i.context[e.params.key]=i.value,n.send(i.context),o()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"string"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.href=e.payload,r.send(!0),n()))}},function(e,t,r){const n=r(0),{hashToString:o}=r(29);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"bang"}),n.helpers.WirePattern(e,{async:!0,forwardGroups:!1},(e,t,r,n)=>(window.location.hash=o(e.payload),r.send(!0),n()))}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),i=r.project?r.project.namespace:null;n.connect().then(()=>n.protocol.network.start({graph:o(r.graph,i)})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(8)("noflo-ui:state");t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("state",{datatype:"object"}),e.outPorts.add("updated",{datatype:"object"}),e.state={},e.tearDown=t=>{e.state={},t()},n.helpers.WirePattern(e,{in:"in",out:["state","updated"],async:!0,forwardGroups:!1},(t,r,n,i)=>(Object.keys(t).forEach(r=>{const n=t[r];e.state[r]!==n&&(o(r+" changed",e.state[r],n),e.state[r]=n)}),n.state.send(e.state),n.updated.send(t),i()))}},function(e,t,r){const n=r(0),{graphRuntimeIdentifier:o}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("client",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","client"))return;const[r,n]=e.getData("in","client"),i=r.project?r.project.namespace:null;n.connect().then(()=>n.protocol.network.stop({graph:o(r.graph,i)})).then(e=>t.send({out:{status:e,runtime:n.definition.id}})).then(()=>t.done(),e=>t.done(e))})}},function(e,t,r){const n=r(0),o=r(7),i=(e,t)=>{const r=(null!=e.properties?e.properties.project:void 0)||e.project;if(!r)return null;const n=t.filter(e=>e.id===r);return n.length?n[0]:null};t.getComponent=()=>{const e=new n.Component;return e.icon="database",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{out:"out",forwardGroups:!1,async:!0},(e,t,r,n)=>{switch(e.action){case"storage:db":{const t=e.state||{};return t.db=e.payload,r.send(t),void n()}case"storage:opened":return r.send(e.payload),void n();case"storage:stored:initial":{const t=e.payload;return t.storedGraphs=t.graphs,delete t.graphs,t.projects.sort(o.sortByName),t.storedGraphs.sort(o.sortByName),t.components.sort(o.sortByName),t.specs.sort(o.sortByName),t.runtimes.sort(o.sortBySeen),t.projects.forEach(e=>{const r=e;r.graphs=t.storedGraphs.filter(e=>e.properties.project===r.id),r.components=t.components.filter(e=>e.project===r.id),r.specs=t.specs.filter(e=>e.project===r.id)}),r.send(t),void n()}case"storage:stored:project":{const t={},i=e.payload;return i.graphs||(i.graphs=[]),e.state.storedGraphs&&!i.graphs.length&&(i.graphs=e.state.storedGraphs.filter(e=>e.properties.project===i.id)),i.components||(i.components=[]),e.state.components&&!i.components.length&&(i.components=e.state.components.filter(e=>e.project===i.id)),i.specs||(i.specs=[]),e.state.specs&&!i.specs.length&&(i.specs=e.state.specs.filter(e=>e.project===i.id)),t.projects=e.state.projects||[],o.addToList(t.projects,i),r.send(t),void n()}case"storage:removed:project":{const t={};return t.projects=e.state.projects||[],o.removeFromList(t.projects,{id:e.payload}),r.send(t),void n()}case"storage:stored:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.addToList(t.storedGraphs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.graphs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:graph":{const t={};t.storedGraphs=e.state.storedGraphs||[],o.removeFromList(t.storedGraphs,{properties:{id:e.payload}}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.graphs,{properties:{id:e.payload}}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:component":{const t={};t.components=e.state.components||[],o.addToList(t.components,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.components,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:component":{const t={};t.components=e.state.components||[],o.removeFromList(t.components,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.components,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:spec":{const t={};t.specs=e.state.specs||[],o.addToList(t.specs,e.payload),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.addToList(s.specs,e.payload),r.send(t),void n()):(r.send(t),void n())}case"storage:removed:spec":{const t={};t.specs=e.state.specs||[],o.removeFromList(t.specs,{id:e.payload}),t.projects=e.state.projects||[];const s=i(e.payload,t.projects);return s?(o.removeFromList(s.specs,{id:e.payload}),r.send(t),void n()):(r.send(t),void n())}case"storage:stored:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.addToList(t.runtimes,e.payload,o.sortBySeen),r.send(t),void n()}case"storage:removed:runtime":{const t={};return t.runtimes=e.state.runtimes||[],o.removeFromList(t.runtimes,{id:e.payload}),r.send(t),void n()}case"storage:error":{const t={state:"error",error:e.payload};return r.send(t),void n()}default:n()}})}},function(e,t,r){const n=r(0),o=r(8)("noflo-ui:store"),i=r(8)("noflo-ui:store:error");t.getComponent=()=>{const e=new n.Component;return e.icon="rocket",e.inPorts.add("action",{datatype:"all"}),e.inPorts.add("state",{datatype:"object"}),e.outPorts.add("pass",{datatype:"object",scoped:!1}),e.state={},e.tearDown=t=>{e.state={},t()},e.forwardBrackets={},e.process((t,r)=>{if(t.hasData("state"))return e.state=t.getData("state"),void r.done();if(!t.hasStream("action"))return;t.getStream("action").filter(e=>"data"===e.type).map(e=>e.data).forEach(t=>{t.action?(t.state?e.state=t.state:o(t.action+" was sent without state, using previous state"),r.send({pass:{action:t.action,state:e.state,payload:t.payload}})):i("Received action without expected payload",t)}),r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","user"))return;const[r,n]=e.getData("in","user");if(!n||!n["flowhub-token"])return void t.sendDone({out:r});const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(4===o.readyState){if(![200,201].includes(o.status)){let{message:e}=JSON.parse(o.responseText);return-1!==e.indexOf('"message":')&&({message:e}=JSON.parse(e)),void t.done(new Error(e))}t.sendDone({out:r})}};const i=JSON.stringify({repo:r.repo,active:!0});o.open("POST","https://api.flowhub.io/projects",!0),o.setRequestHeader("Authorization","Bearer "+n["flowhub-token"]),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(i)})}},function(e,t,r){const n=r(0),o=r(80),{isDefaultRuntime:i}=r(19);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object",required:!0}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"in",params:"user",out:"out",async:!0},(t,r,n,s)=>{if(["opener","microflo"].includes(t.protocol))return n.send(t),void s();if(i(t))return n.send(t),void s();if(!(e.params&&e.params.user&&e.params.user["flowhub-token"]&&e.params.user["flowhub-user"]&&e.params.user["flowhub-user"].id))return n.send(t),void s();const a=t;a.user=e.params.user["flowhub-user"].id,t.secret||(a.secret=null);new o.Runtime(t,{host:"https://api.flowhub.io"}).register(e.params.user["flowhub-token"],e=>{e?s(e):(n.send(t),s())})})}},function(e,t,r){const n=r(0),o=r(48);t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("user",{datatype:"object"}),e.outPorts.add("redirect",{datatype:"string"}),n.helpers.WirePattern(e,{in:"user",out:["user","redirect"],async:!0},(e,t,r,n)=>{const i=(null!=e.plan?e.plan.type:void 0)||"free",s=(null!=e.github?e.github.token:void 0)||"",a=(null!=e.github?e.github.username:void 0)||"";((e,t)=>{if(!e)return void t(null,null);const r=new XMLHttpRequest,n=new FileReader;r.open("GET",e,!0),r.responseType="blob",r.onload=()=>200!==r.status?t(new Error("Avatar request returned "+r.status)):(n.onload=e=>t(null,e.target.result),n.readAsDataURL(r.response)),r.onerror=()=>t(new Error("Avatar request failed")),r.send()})(e.avatar,(t,c)=>{const l={"flowhub-avatar":c,"flowhub-plan":i,"flowhub-token":s,"flowhub-user":JSON.stringify(e),"github-token":s,"github-username":a};c||delete l["flowhub-avatar"],Object.keys(l).forEach(e=>{const t=l[e];localStorage.setItem(e,t)}),l["flowhub-user"]=e,r.user.send(l),((e,t)=>{const r=o.parse(window.location.href);delete r.search;const n=o.format(r);if(n!==r){if(null!=window.history?window.history.replaceState:void 0)return window.history.replaceState({},"clear",r.pathname),void t();e.send(n),t()}else t()})(r.redirect,n)})})}},function(e,t,r){const n=r(0),o=["flowhub-theme","flowhub-debug"];t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("user",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("in","user"))return;const[r,n]=e.getData("in","user"),i=Object.keys(r);for(let e=0;e<i.length;e+=1){const s=i[e],a=r[s];if(-1===o.indexOf(s))return void t.done(new Error(s+" is not a valid preference"));localStorage.setItem(s,a),n[s]=a}t.sendDone({out:n})})}},function(e,t,r){const n=r(0),o=r(59),i=(e,t,r,n)=>((e,t,r)=>{const n=o.api();n.token(t);const i=n.get(e);return i.on("success",e=>{e.body?r(null,e.body):r(new Error("No result received"))}),i.on("error",e=>r(e.body)),i()})(`/repos/${e}/git/trees/${t}`,r,n),s=(e,t,r,n,o,a,c)=>{const l=[],p=[];return t.tree.forEach(t=>{const n=t;n.fullPath=`${e}${n.path}`,"tree"!==n.type?r.forEach(e=>{const t=e;if(n.fullPath===t.path||n.fullPath===t.path.replace(".fbp",".json")){if("graph"===t.type)return t.local.properties.sha=n.sha,t.local.properties.changed=!1,p.push(t),void a.graph.send(t.local);t.local.sha=n.sha,t.local.changed=!1,p.push(t),"spec"!==t.type?a.component.send(t.local):a.spec.send(t.local)}}):l.push(n)}),p.forEach(e=>{r.splice(r.indexOf(e),1)}),0===r.length?c():l.forEach(e=>i(n,e.sha,o,(t,i)=>t?c(t):s(e.fullPath+"/",i,r,n,o,a,c)))};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("in",{datatype:"object"}),e.inPorts.add("tree",{datatype:"object"}),e.inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0}),e.outPorts.add("graph",{datatype:"object"}),e.outPorts.add("component",{datatype:"object"}),e.outPorts.add("spec",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["in","tree","repository"],params:"token",out:["graph","component","spec"],async:!0},(t,r,n,o)=>t.tree.tree&&(null!=t.in.push?t.in.push.length:void 0)?s("",t.tree,t.in.push,t.repository,e.params.token,n,o):o()),e}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{item:{process:"Put",port:"value"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Put:{component:"indexeddb/Put"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Put",port:"store"}},{src:{process:"EnsureId",port:"out"},tgt:{process:"Put",port:"value"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Put",port:"error"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"OriginalProject",port:"out"},graph:{process:"OriginalGraph",port:"out"},component:{process:"OriginalComponent",port:"out"},spec:{process:"OriginalSpec",port:"out"},runtime:{process:"OriginalRuntime",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},SaveProject:{component:"ui/Save"},ProjectsStore:{component:"strings/SendString"},OriginalProject:{component:"core/SendNext"},ConvertProject:{component:"ui/CleanProject"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},SaveGraph:{component:"ui/Save"},GraphsStore:{component:"strings/SendString"},OriginalGraph:{component:"core/SendNext"},ConvertGraph:{component:"objects/CallMethod"},GetComponentsDb:{component:"ui/GetActionValues"},SaveComponent:{component:"ui/Save"},ComponentsStore:{component:"strings/SendString"},OriginalComponent:{component:"core/SendNext"},GetSpecsDb:{component:"ui/GetActionValues"},SaveSpec:{component:"ui/Save"},SpecsStore:{component:"strings/SendString"},OriginalSpec:{component:"core/SendNext"},GetRuntimesDb:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/Save"},RuntimesStore:{component:"strings/SendString"},OriginalRuntime:{component:"core/SendNext"}},connections:[{data:"storage:save:project,storage:save:graph,storage:save:component,storage:save:spec,storage:save:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"SaveProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"OriginalProject",port:"data"}},{src:{process:"SaveProject",port:"item"},tgt:{process:"OriginalProject",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"SaveProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ConvertProject",port:"in"}},{src:{process:"ConvertProject",port:"out"},tgt:{process:"SaveProject",port:"item"}},{src:{process:"SaveProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"SaveGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"OriginalGraph",port:"data"}},{src:{process:"SaveGraph",port:"item"},tgt:{process:"OriginalGraph",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"SaveGraph",port:"store"}},{data:"toJSON",tgt:{process:"ConvertGraph",port:"method"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"SaveGraph",port:"item"}},{src:{process:"SaveGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"SaveComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"OriginalComponent",port:"data"}},{src:{process:"SaveComponent",port:"item"},tgt:{process:"OriginalComponent",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"SaveComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"SaveComponent",port:"item"}},{src:{process:"SaveComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"SaveSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"OriginalSpec",port:"data"}},{src:{process:"SaveSpec",port:"item"},tgt:{process:"OriginalSpec",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"SaveSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SaveSpec",port:"item"}},{src:{process:"SaveSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"SaveRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"OriginalRuntime",port:"data"}},{src:{process:"SaveRuntime",port:"item"},tgt:{process:"OriginalRuntime",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"SaveRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"SaveRuntime",port:"item"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],caseSensitive:!1}},function(e,t,r){const n=r(0),o=r(113),i=(e,t,r)=>{const n=e,i=t;return n.id&&i[n.id]?Promise.resolve(i[n.id]):(n.secret||(n.secret=""),o(n,{skipValidation:!0,connectionTimeout:5e3}).then(e=>{if(r.send({instance:e}),!e.definition.id)return e;const t=n.id;return i[t]=e,e.isConnected()||e.once("connected",()=>{e.definition.id!==t&&(delete i[t],i[e.definition.id]=e)}),e}))};t.getComponent=()=>{const e=new n.Component;return e.description="Holder for runtime instances",e.inPorts.add("initial",{description:"Initialize client for all stored runtime definitions",datatype:"object"}),e.inPorts.add("updated",{description:"Update client instance for a runtime definition",datatype:"object"}),e.inPorts.add("in",{description:"Get client instance for a route definition",datatype:"object",addressable:!0}),e.outPorts.add("instance",{description:"Client instance when created",datatype:"object"}),e.outPorts.add("out",{description:"Route runtime client was matched for",datatype:"object",addressable:!0}),e.outPorts.add("client",{description:"Runtime client instance",datatype:"object",addressable:!0}),e.outPorts.add("updated",{description:"Updated runtime definition",datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.clients={},e.tearDown=t=>(e.clients={},t()),e.process((t,r)=>{if(t.hasData("initial")){let n=t.getData("initial");return n||(n=[]),void Promise.all(n.map(t=>i(t,e.clients,r))).then(()=>r.done(),e=>r.done(e))}if(t.hasData("updated")){const n=t.getData("updated"),o=n.payload||n;o.secret||(o.secret=""),i(o,e.clients,r).then(()=>(r.send({updated:n}),r.done()),e=>r.done(e))}const o=t.attached("in").filter(e=>t.hasData(["in",e]));o.length&&Promise.all(o.map(n=>{const o=t.getData(["in",n]);if(!o.runtime)return Promise.reject(new Error("No runtime defined"));let{runtime:s}=o;return"string"==typeof s&&(s={id:s},o.runtime=s),i(s,e.clients,r).then(e=>({client:e,route:o,idx:n}))})).then(e=>(()=>{const t=[];return e.forEach(e=>{t.push(r.send({client:new n.IP("data",e.client,{index:e.idx}),out:new n.IP("data",e.route,{index:e.idx})}))}),t})()).then(()=>r.done(),e=>r.done(e))}),e}},function(e,t,r){const n=r(0),o=()=>{const e=localStorage.getItem("noflo-ui-graphs"),t=[];return e?(e.split(",").forEach(e=>{const r=(e=>{const t=localStorage.getItem(e);if(!t)return null;const r=JSON.parse(t);return r.id=e,r.project="",r})(e);r&&t.push(r)}),t):t};t.getComponent=()=>{const e=new n.Component;return e.inPorts.add("graphstore",{datatype:"object"}),e.process((e,t)=>{if(!e.hasData("graphstore"))return;const r=e.getData("graphstore");if("undefined"!=typeof chrome&&chrome.storage)return void t.done();try{localStorage.getItem("noflo")}catch(e){return void t.done()}const n=o();if(0===n.length)return void t.done();let i=0;const s=()=>{i+=1,i===n.length&&t.done()};n.forEach(e=>{r.put(e).onsuccess=s})})}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanEdges:{component:"ui/CleanAction"},CreateEdgeCtx:{component:"objects/CreateObject"},SetEdges:{component:"ui/SetToContext"},MergeContext:{component:"core/Merge"},CleanNodes:{component:"ui/CleanAction"},CreateNodeCtx:{component:"objects/CreateObject"},SetNodes:{component:"ui/SetToContext"},CleanSearch:{component:"ui/CleanAction"},CleanSearchResults:{component:"ui/CleanAction"},CleanGraph:{component:"ui/CleanAction"},GetGraph:{component:"objects/GetObjectKey"},SendGraphKey:{component:"strings/SendString"},FindNodesInGraph:{component:"ui/FindNodesInGraph"},CleanSearchterm:{component:"ui/CleanAction"},GetSearchTerm:{component:"objects/GetObjectKey"},SendSearchKey:{component:"strings/SendString"},NodesToContext:{component:"ui/SearchGraphNodeToContext"}},connections:[{data:"context:edges,context:nodes,context:search_library,context:search_graph,context:search_library_result,context:graph",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanEdges",port:"in"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"CreateEdgeCtx",port:"start"}},{src:{process:"CreateEdgeCtx",port:"out"},tgt:{process:"SetEdges",port:"context"}},{data:"edges",tgt:{process:"SetEdges",port:"key"}},{src:{process:"CleanEdges",port:"out"},tgt:{process:"SetEdges",port:"value"}},{src:{process:"SetEdges",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CleanNodes",port:"in"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"CreateNodeCtx",port:"start"}},{src:{process:"CreateNodeCtx",port:"out"},tgt:{process:"SetNodes",port:"context"}},{data:"nodes",tgt:{process:"SetNodes",port:"key"}},{src:{process:"CleanNodes",port:"out"},tgt:{process:"SetNodes",port:"value"}},{src:{process:"SetNodes",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"CleanSearch",port:"in"}},{src:{process:"CleanSearch",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"CleanSearchResults",port:"in"}},{src:{process:"CleanSearchResults",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"CleanGraph",port:"in"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"GetGraph",port:"in"}},{data:"graph",tgt:{process:"SendGraphKey",port:"string"}},{src:{process:"SendGraphKey",port:"out"},tgt:{process:"GetGraph",port:"key"}},{src:{process:"CleanGraph",port:"out"},tgt:{process:"SendGraphKey",port:"in"}},{src:{process:"GetGraph",port:"out"},tgt:{process:"FindNodesInGraph",port:"graph"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"CleanSearchterm",port:"in"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"GetSearchTerm",port:"in"}},{data:"search",tgt:{process:"SendSearchKey",port:"string"}},{src:{process:"SendSearchKey",port:"out"},tgt:{process:"GetSearchTerm",port:"key"}},{src:{process:"CleanSearchterm",port:"out"},tgt:{process:"SendSearchKey",port:"in"}},{src:{process:"GetSearchTerm",port:"out"},tgt:{process:"FindNodesInGraph",port:"search"}},{src:{process:"FindNodesInGraph",port:"nodes"},tgt:{process:"NodesToContext",port:"nodes"}},{src:{process:"NodesToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"search"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Write",port:"db"},store:{process:"Store",port:"in"},item:{process:"EnsureId",port:"in"}},outports:{key:{process:"Delete",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Write:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Delete:{component:"indexeddb/Delete"},EnsureId:{component:"ui/EnsureId"},Errors:{component:"core/Merge"}},connections:[{data:"readwrite",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Write",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Write",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Write",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Delete",port:"store"}},{src:{process:"EnsureId",port:"id"},tgt:{process:"Delete",port:"key"}},{src:{process:"Write",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Delete",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"DeleteProject",port:"key"},graph:{process:"DeleteGraph",port:"key"},component:{process:"DeleteComponent",port:"key"},spec:{process:"DeleteSpec",port:"key"},runtime:{process:"DeleteRuntime",port:"key"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},DeleteProject:{component:"ui/Delete"},ProjectsStore:{component:"strings/SendString"},Errors:{component:"core/Merge"},GetGraphsDb:{component:"ui/GetActionValues"},DeleteGraph:{component:"ui/Delete"},GraphsStore:{component:"strings/SendString"},GetComponentsDb:{component:"ui/GetActionValues"},DeleteComponent:{component:"ui/Delete"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},DeleteSpec:{component:"ui/Delete"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},DeleteRuntime:{component:"ui/Delete"},RuntimesStore:{component:"strings/SendString"}},connections:[{data:"storage:delete:project,storage:delete:graph,storage:delete:component,storage:delete:spec,storage:delete:runtime",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"DeleteProject",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"DeleteProject",port:"store"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"DeleteProject",port:"item"}},{src:{process:"DeleteProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"DeleteGraph",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"DeleteGraph",port:"store"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"DeleteGraph",port:"item"}},{src:{process:"DeleteGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"DeleteComponent",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"DeleteComponent",port:"store"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"DeleteComponent",port:"item"}},{src:{process:"DeleteComponent",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"DeleteSpec",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"DeleteSpec",port:"store"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"DeleteSpec",port:"item"}},{src:{process:"DeleteSpec",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"DeleteRuntime",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"DeleteRuntime",port:"store"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"DeleteRuntime",port:"item"}},{src:{process:"DeleteRuntime",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"trash-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},ApplicationRedirectAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},OpenMainAction:{component:"ui/SetAction"},SaveGraphAction:{component:"ui/SetAction"},SaveComponentAction:{component:"ui/SetAction"},SaveSpecAction:{component:"ui/SetAction"},SaveProjectAction:{component:"ui/SetAction"},GithubPullAction:{component:"ui/SetAction"},GithubOperationAction:{component:"ui/SetAction"},GithubLoadingAction:{component:"ui/SetAction"},GithubReadyAction:{component:"ui/SetAction"},ErrorAction:{component:"ui/SetAction"},CheckRepo:{component:"ui/CheckRepoExists"},CheckGist:{component:"ui/CheckGistExists"},GetGistToken:{component:"ui/GetUserToken"},GetGist:{component:"ui/GistToProject"},GetPrepareToken:{component:"ui/GetUserToken"},GithubSynchronization:{component:"ui/GithubSynchronization"},GetSyncToken:{component:"ui/GetUserToken"},GetPullToken:{component:"ui/GetUserToken"}},connections:[{data:"github:open,github:gist,github:sync:prepare,github:sync:synchronize,github:sync:pull",tgt:{process:"Dispatch",port:"routes"}},{data:"application:sethash",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"main:open",tgt:{process:"OpenMainAction",port:"action"}},{src:{process:"OpenMainAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"SaveGraphAction",port:"action"}},{src:{process:"SaveGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"SaveComponentAction",port:"action"}},{src:{process:"SaveComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:spec",tgt:{process:"SaveSpecAction",port:"action"}},{src:{process:"SaveSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:project",tgt:{process:"SaveProjectAction",port:"action"}},{src:{process:"SaveProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:sync:pull",tgt:{process:"GithubPullAction",port:"action"}},{src:{process:"GithubPullAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:operation",tgt:{process:"GithubOperationAction",port:"action"}},{src:{process:"GithubOperationAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:loading",tgt:{process:"GithubLoadingAction",port:"action"}},{src:{process:"GithubLoadingAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:ready",tgt:{process:"GithubReadyAction",port:"action"}},{src:{process:"GithubReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"github:error",tgt:{process:"ErrorAction",port:"action"}},{src:{process:"ErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckRepo",port:"in"}},{src:{process:"CheckRepo",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckRepo",port:"openmain"},tgt:{process:"OpenMainAction",port:"in"}},{src:{process:"CheckRepo",port:"new"},tgt:{process:"GithubPullAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"CheckGist",port:"in"}},{src:{process:"CheckGist",port:"existing"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckGist",port:"new"},tgt:{process:"GetGistToken",port:"in"}},{data:"1",tgt:{process:"GetGistToken",port:"limit"}},{src:{process:"GetGistToken",port:"token"},tgt:{process:"GetGist",port:"token"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetGistToken",port:"out"},tgt:{process:"GetGist",port:"in"}},{src:{process:"GetGistToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GetGist",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GetGist",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GetGist",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GetGist",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetPrepareToken",port:"in"}},{src:{process:"GetPrepareToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GetPrepareToken",port:"out"},tgt:{process:"GithubSynchronization",port:"prepare"}},{src:{process:"GetPrepareToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"GithubSynchronization",port:"operation"},tgt:{process:"GithubOperationAction",port:"in"}},{src:{process:"GithubSynchronization",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSyncToken",port:"in"}},{src:{process:"GetSyncToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetSyncToken",port:"out"},tgt:{process:"GithubSynchronization",port:"sync"}},{src:{process:"GetSyncToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}},{src:{process:"GithubSynchronization",port:"graph"},tgt:{process:"SaveGraphAction",port:"in"}},{src:{process:"GithubSynchronization",port:"component"},tgt:{process:"SaveComponentAction",port:"in"}},{src:{process:"GithubSynchronization",port:"spec"},tgt:{process:"SaveSpecAction",port:"in"}},{src:{process:"GithubSynchronization",port:"project"},tgt:{process:"SaveProjectAction",port:"in"}},{src:{process:"GithubSynchronization",port:"loading"},tgt:{process:"GithubLoadingAction",port:"in"}},{src:{process:"GithubSynchronization",port:"ready"},tgt:{process:"GithubReadyAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetPullToken",port:"in"}},{src:{process:"GetPullToken",port:"token"},tgt:{process:"GithubSynchronization",port:"token"}},{src:{process:"GetPullToken",port:"out"},tgt:{process:"GithubSynchronization",port:"pull"}},{src:{process:"GetPullToken",port:"error"},tgt:{process:"ErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"},Loading:{component:"ui/CreateLoadingContext"},Ready:{component:"ui/CreateEmptyContext"}},connections:[{data:"github:operation,github:error,github:loading,github:ready",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"syncOperation",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Loading",port:"start"}},{src:{process:"Loading",port:"out"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"Ready",port:"start"}},{src:{process:"Ready",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github"},caseSensitive:!1}},function(e,t){e.exports={inports:{token:{process:"Token",port:"in"},prepare:{process:"RepoToPrepare",port:"in"},sync:{process:"DoSync",port:"in"},pull:{process:"PullRepo",port:"in"}},outports:{operation:{process:"MergeOps",port:"out"},component:{process:"UpdatedComponent",port:"out"},graph:{process:"UpdatedGraph",port:"out"},spec:{process:"UpdatedSpec",port:"out"},project:{process:"BlobToEntry",port:"project"},loading:{process:"Loading",port:"out"},ready:{process:"Ready",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{SendRepoKey:{component:"strings/SendString"},GetRepoToPrepare:{component:"objects/GetObjectKey"},RepoToPrepare:{component:"core/Split"},Token:{component:"core/Repeat"},GetReference:{component:"github/GetReference"},CheckSyncState:{component:"ui/CheckSyncState"},SendProjectKey:{component:"strings/SendString"},GetProject:{component:"objects/GetObjectKey"},Errors:{component:"core/Merge"},MergeOps:{component:"core/Merge"},DoSync:{component:"core/Repeat"},PreparePulls:{component:"ui/PreparePulls"},GetBlob:{component:"github/GetBlob"},BlobToEntry:{component:"ui/BlobToEntry"},CompletePulls:{component:"flow/Race"},UpdatedComponent:{component:"core/Merge"},UpdatedGraph:{component:"core/Merge"},UpdatedSpec:{component:"core/Merge"},Ready:{component:"core/Repeat"},PreparePush:{component:"ui/PreparePush"},UpdateFromTree:{component:"ui/UpdateFromTree"},CreateTree:{component:"github/CreateTree"},SendTreeSha:{component:"strings/SendString"},GetTreeSha:{component:"objects/GetObjectKey"},CreateCommit:{component:"github/CreateCommit"},UpdateReference:{component:"github/UpdateReference"},SendPullRepo:{component:"strings/SendString"},GetPullRepo:{component:"objects/GetObjectKey"},PullRepo:{component:"core/Split"},Loading:{component:"core/Repeat"},GetPullReference:{component:"github/GetReference"},CheckPullState:{component:"ui/CheckSyncState"},SendPullProject:{component:"strings/SendString"},GetPullProject:{component:"objects/GetObjectKey"}},connections:[{data:"repo",tgt:{process:"SendRepoKey",port:"string"}},{src:{process:"SendRepoKey",port:"out"},tgt:{process:"GetRepoToPrepare",port:"key"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"GetRepoToPrepare",port:"in"}},{src:{process:"RepoToPrepare",port:"out"},tgt:{process:"SendRepoKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetReference",port:"token"}},{src:{process:"GetRepoToPrepare",port:"out"},tgt:{process:"GetReference",port:"repository"}},{src:{process:"GetReference",port:"reference"},tgt:{process:"CheckSyncState",port:"reference"}},{data:"project",tgt:{process:"SendProjectKey",port:"string"}},{src:{process:"SendProjectKey",port:"out"},tgt:{process:"GetProject",port:"key"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"GetProject",port:"in"}},{src:{process:"GetProject",port:"out"},tgt:{process:"CheckSyncState",port:"project"}},{src:{process:"GetRepoToPrepare",port:"object"},tgt:{process:"SendProjectKey",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckSyncState",port:"token"}},{src:{process:"GetReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckSyncState",port:"noop"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"local"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"remote"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"CheckSyncState",port:"both"},tgt:{process:"MergeOps",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePulls",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetBlob",port:"token"}},{src:{process:"PreparePulls",port:"out"},tgt:{process:"BlobToEntry",port:"operation"}},{src:{process:"PreparePulls",port:"repository"},tgt:{process:"GetBlob",port:"repository"}},{src:{process:"PreparePulls",port:"sha"},tgt:{process:"GetBlob",port:"sha"}},{src:{process:"GetBlob",port:"out"},tgt:{process:"CompletePulls",port:"in",index:0}},{src:{process:"CompletePulls",port:"out"},tgt:{process:"BlobToEntry",port:"blob"}},{src:{process:"GetBlob",port:"error"},tgt:{process:"CompletePulls",port:"error"}},{src:{process:"CompletePulls",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"BlobToEntry",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"BlobToEntry",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"BlobToEntry",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"BlobToEntry",port:"project"},tgt:{process:"Ready",port:"in"}},{src:{process:"BlobToEntry",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"DoSync",port:"out"},tgt:{process:"PreparePush",port:"in"}},{src:{process:"PreparePush",port:"out"},tgt:{process:"UpdateFromTree",port:"in"}},{src:{process:"PreparePush",port:"basetree"},tgt:{process:"CreateTree",port:"base"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateTree",port:"token"}},{src:{process:"PreparePush",port:"tree"},tgt:{process:"CreateTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateTree",port:"repository"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"UpdateFromTree",port:"tree"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateFromTree",port:"repository"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateFromTree",port:"token"}},{data:"sha",tgt:{process:"SendTreeSha",port:"string"}},{src:{process:"SendTreeSha",port:"out"},tgt:{process:"GetTreeSha",port:"key"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"GetTreeSha",port:"in"}},{src:{process:"CreateTree",port:"out"},tgt:{process:"SendTreeSha",port:"in"}},{src:{process:"GetTreeSha",port:"out"},tgt:{process:"CreateCommit",port:"tree"}},{src:{process:"Token",port:"out"},tgt:{process:"CreateCommit",port:"token"}},{src:{process:"PreparePush",port:"message"},tgt:{process:"CreateCommit",port:"message"}},{src:{process:"PreparePush",port:"parentcommits"},tgt:{process:"CreateCommit",port:"parents"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"CreateCommit",port:"repository"}},{src:{process:"CreateCommit",port:"out"},tgt:{process:"UpdateReference",port:"commit"}},{src:{process:"PreparePush",port:"ref"},tgt:{process:"UpdateReference",port:"reference"}},{src:{process:"Token",port:"out"},tgt:{process:"UpdateReference",port:"token"}},{src:{process:"PreparePush",port:"repository"},tgt:{process:"UpdateReference",port:"repository"}},{src:{process:"UpdateFromTree",port:"component"},tgt:{process:"UpdatedComponent",port:"in"}},{src:{process:"UpdateFromTree",port:"graph"},tgt:{process:"UpdatedGraph",port:"in"}},{src:{process:"UpdateFromTree",port:"spec"},tgt:{process:"UpdatedSpec",port:"in"}},{src:{process:"UpdateFromTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateTree",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CreateCommit",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"UpdateReference",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"repo",tgt:{process:"SendPullRepo",port:"string"}},{src:{process:"SendPullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"key"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"Loading",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"GetPullRepo",port:"in"}},{src:{process:"PullRepo",port:"out"},tgt:{process:"SendPullRepo",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"GetPullReference",port:"token"}},{src:{process:"GetPullRepo",port:"out"},tgt:{process:"GetPullReference",port:"repository"}},{src:{process:"GetPullReference",port:"reference"},tgt:{process:"CheckPullState",port:"reference"}},{data:"project",tgt:{process:"SendPullProject",port:"string"}},{src:{process:"SendPullProject",port:"out"},tgt:{process:"GetPullProject",port:"key"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"GetPullProject",port:"in"}},{src:{process:"GetPullProject",port:"out"},tgt:{process:"CheckPullState",port:"project"}},{src:{process:"GetPullRepo",port:"object"},tgt:{process:"SendPullProject",port:"in"}},{src:{process:"Token",port:"out"},tgt:{process:"CheckPullState",port:"token"}},{src:{process:"GetPullReference",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"CheckPullState",port:"remote"},tgt:{process:"DoSync",port:"in"}},{src:{process:"CheckPullState",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"github-alt"},caseSensitive:!1}},function(e,t){e.exports={inports:{db:{process:"Read",port:"db"},store:{process:"Store",port:"in"}},outports:{item:{process:"Query",port:"item"},empty:{process:"Query",port:"empty"},error:{process:"Errors",port:"out"}},groups:[],processes:{HoldQuery:{component:"strings/SendString"},HoldMode:{component:"strings/SendString"},Store:{component:"core/Repeat"},Read:{component:"indexeddb/BeginTransaction"},GetStore:{component:"indexeddb/GetStore"},Query:{component:"indexeddb/Query"},Errors:{component:"core/Merge"}},connections:[{data:"",tgt:{process:"HoldQuery",port:"string"}},{data:"readonly",tgt:{process:"HoldMode",port:"string"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldQuery",port:"in"}},{src:{process:"Store",port:"out"},tgt:{process:"HoldMode",port:"in"}},{src:{process:"HoldMode",port:"out"},tgt:{process:"Read",port:"mode"}},{src:{process:"Store",port:"out"},tgt:{process:"Read",port:"stores"}},{src:{process:"Store",port:"out"},tgt:{process:"GetStore",port:"name"}},{src:{process:"Read",port:"transaction"},tgt:{process:"GetStore",port:"transaction"}},{src:{process:"GetStore",port:"store"},tgt:{process:"Query",port:"store"}},{src:{process:"HoldQuery",port:"out"},tgt:{process:"Query",port:"all"}},{src:{process:"Read",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"GetStore",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Query",port:"error"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{project:{process:"LoadProjects",port:"item"},graph:{process:"ConvertGraph",port:"out"},component:{process:"LoadComponents",port:"item"},spec:{process:"LoadSpecs",port:"item"},runtime:{process:"Runtimes",port:"out"},complete:{process:"Collect",port:"out"},error:{process:"Errors",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},GetProjectsDb:{component:"ui/GetActionValues"},LoadProjects:{component:"ui/Load"},ProjectsStore:{component:"strings/SendString"},GetGraphsDb:{component:"ui/GetActionValues"},LoadGraphs:{component:"ui/Load"},GraphsStore:{component:"strings/SendString"},ConvertGraph:{component:"graph/LoadJson"},GetComponentsDb:{component:"ui/GetActionValues"},LoadComponents:{component:"ui/Load"},ComponentsStore:{component:"strings/SendString"},GetSpecsDb:{component:"ui/GetActionValues"},LoadSpecs:{component:"ui/Load"},SpecsStore:{component:"strings/SendString"},GetRuntimesDb:{component:"ui/GetActionValues"},LoadRuntimes:{component:"ui/Load"},RuntimesStore:{component:"strings/SendString"},Runtimes:{component:"core/Merge"},SplitAction:{component:"core/Split"},GetAllRuntimesDb:{component:"ui/GetActionValues"},LoadAllRuntimes:{component:"ui/Load"},AllRuntimesStore:{component:"strings/SendString"},Collect:{component:"ui/CollectInitialData"},Errors:{component:"core/Merge"}},connections:[{data:"storage:load:projects,storage:load:graphs,storage:load:components,storage:load:specs,storage:load:runtimes,storage:load:all",tgt:{process:"Dispatch",port:"routes"}},{data:"db",tgt:{process:"GetProjectsDb",port:"keys"}},{src:{process:"GetProjectsDb",port:"values",index:0},tgt:{process:"LoadProjects",port:"db"}},{data:"projects",tgt:{process:"ProjectsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"GetProjectsDb",port:"out"},tgt:{process:"ProjectsStore",port:"in"}},{src:{process:"ProjectsStore",port:"out"},tgt:{process:"LoadProjects",port:"store"}},{src:{process:"LoadProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetGraphsDb",port:"keys"}},{src:{process:"GetGraphsDb",port:"values",index:0},tgt:{process:"LoadGraphs",port:"db"}},{data:"graphs",tgt:{process:"GraphsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"GetGraphsDb",port:"out"},tgt:{process:"GraphsStore",port:"in"}},{src:{process:"GraphsStore",port:"out"},tgt:{process:"LoadGraphs",port:"store"}},{src:{process:"LoadGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadGraphs",port:"item"},tgt:{process:"ConvertGraph",port:"in"}},{src:{process:"ConvertGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetComponentsDb",port:"keys"}},{src:{process:"GetComponentsDb",port:"values",index:0},tgt:{process:"LoadComponents",port:"db"}},{data:"components",tgt:{process:"ComponentsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"GetComponentsDb",port:"out"},tgt:{process:"ComponentsStore",port:"in"}},{src:{process:"ComponentsStore",port:"out"},tgt:{process:"LoadComponents",port:"store"}},{src:{process:"LoadComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetSpecsDb",port:"keys"}},{src:{process:"GetSpecsDb",port:"values",index:0},tgt:{process:"LoadSpecs",port:"db"}},{data:"specs",tgt:{process:"SpecsStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetSpecsDb",port:"in"}},{src:{process:"GetSpecsDb",port:"out"},tgt:{process:"SpecsStore",port:"in"}},{src:{process:"SpecsStore",port:"out"},tgt:{process:"LoadSpecs",port:"store"}},{src:{process:"LoadSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"db",tgt:{process:"GetRuntimesDb",port:"keys"}},{src:{process:"GetRuntimesDb",port:"values",index:0},tgt:{process:"LoadRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"RuntimesStore",port:"string"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetRuntimesDb",port:"in"}},{src:{process:"GetRuntimesDb",port:"out"},tgt:{process:"RuntimesStore",port:"in"}},{src:{process:"RuntimesStore",port:"out"},tgt:{process:"LoadRuntimes",port:"store"}},{src:{process:"LoadRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SplitAction",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetProjectsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetGraphsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetComponentsDb",port:"in"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetSpecsDb",port:"in"}},{data:"db",tgt:{process:"GetAllRuntimesDb",port:"keys"}},{src:{process:"GetAllRuntimesDb",port:"values",index:0},tgt:{process:"LoadAllRuntimes",port:"db"}},{data:"runtimes",tgt:{process:"AllRuntimesStore",port:"string"}},{src:{process:"SplitAction",port:"out"},tgt:{process:"GetAllRuntimesDb",port:"in"}},{src:{process:"GetAllRuntimesDb",port:"out"},tgt:{process:"AllRuntimesStore",port:"in"}},{src:{process:"AllRuntimesStore",port:"out"},tgt:{process:"LoadAllRuntimes",port:"store"}},{src:{process:"LoadAllRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"LoadAllRuntimes",port:"item"},tgt:{process:"Runtimes",port:"in"}},{src:{process:"LoadProjects",port:"item"},tgt:{process:"Collect",port:"project"}},{src:{process:"LoadProjects",port:"empty"},tgt:{process:"Collect",port:"project"}},{src:{process:"ConvertGraph",port:"out"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadGraphs",port:"empty"},tgt:{process:"Collect",port:"graph"}},{src:{process:"LoadComponents",port:"item"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadComponents",port:"empty"},tgt:{process:"Collect",port:"component"}},{src:{process:"LoadSpecs",port:"item"},tgt:{process:"Collect",port:"spec"}},{src:{process:"LoadSpecs",port:"empty"},tgt:{process:"Collect",port:"spec"}},{src:{process:"Runtimes",port:"out"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"LoadAllRuntimes",port:"empty"},tgt:{process:"Collect",port:"runtime"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Errors",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{name:{process:"Open",port:"name"}},outports:{error:{process:"Errors",port:"out"},db:{process:"Open",port:"db"}},groups:[],processes:{Open:{component:"indexeddb/Open"},Errors:{component:"core/Merge"},Upgrade:{component:"indexeddb/UpgradeRouter"},CreateProjects:{component:"indexeddb/CreateStore"},CreateGraphs:{component:"indexeddb/CreateStore"},GraphProject:{component:"indexeddb/CreateIndex"},Migrate:{component:"ui/MigrateLocalStorage"},CreateComponents:{component:"indexeddb/CreateStore"},ComponentProject:{component:"indexeddb/CreateIndex"},CreateRuntimes:{component:"indexeddb/CreateStore"},CreateJournals:{component:"indexeddb/CreateStore"},JournalGraph:{component:"indexeddb/CreateIndex"},CreateSpecs:{component:"indexeddb/CreateStore"},SpecProject:{component:"indexeddb/CreateIndex"},DatabaseReady:{component:"ui/DatabaseReady"}},connections:[{src:{process:"Open",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"4",tgt:{process:"Open",port:"version"}},{src:{process:"Open",port:"upgrade"},tgt:{process:"Upgrade",port:"upgrade"}},{data:"projects",tgt:{process:"CreateProjects",port:"name"}},{data:"id",tgt:{process:"CreateProjects",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateProjects",port:"db"}},{src:{process:"CreateProjects",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graphs",tgt:{process:"CreateGraphs",port:"name"}},{data:"id",tgt:{process:"CreateGraphs",port:"keypath"}},{src:{process:"CreateProjects",port:"db"},tgt:{process:"CreateGraphs",port:"db"}},{src:{process:"CreateGraphs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"GraphProject",port:"name"}},{data:"project",tgt:{process:"GraphProject",port:"keypath"}},{src:{process:"CreateGraphs",port:"store"},tgt:{process:"GraphProject",port:"store"}},{src:{process:"GraphProject",port:"store"},tgt:{process:"Migrate",port:"graphstore"}},{src:{process:"GraphProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"components",tgt:{process:"CreateComponents",port:"name"}},{data:"id",tgt:{process:"CreateComponents",port:"keypath"}},{src:{process:"CreateGraphs",port:"db"},tgt:{process:"CreateComponents",port:"db"}},{src:{process:"CreateComponents",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"ComponentProject",port:"name"}},{data:"project",tgt:{process:"ComponentProject",port:"keypath"}},{src:{process:"CreateComponents",port:"store"},tgt:{process:"ComponentProject",port:"store"}},{src:{process:"ComponentProject",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"runtimes",tgt:{process:"CreateRuntimes",port:"name"}},{data:"id",tgt:{process:"CreateRuntimes",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateRuntimes",port:"db"}},{src:{process:"CreateRuntimes",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"journals",tgt:{process:"CreateJournals",port:"name"}},{data:"id",tgt:{process:"CreateJournals",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateJournals",port:"db"}},{src:{process:"CreateJournals",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"graph",tgt:{process:"JournalGraph",port:"name"}},{data:"graph",tgt:{process:"JournalGraph",port:"keypath"}},{src:{process:"CreateJournals",port:"store"},tgt:{process:"JournalGraph",port:"store"}},{src:{process:"JournalGraph",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"specs",tgt:{process:"CreateSpecs",port:"name"}},{data:"id",tgt:{process:"CreateSpecs",port:"keypath"}},{src:{process:"Upgrade",port:"versions"},tgt:{process:"CreateSpecs",port:"db"}},{src:{process:"CreateSpecs",port:"error"},tgt:{process:"Errors",port:"in"}},{data:"project",tgt:{process:"SpecProject",port:"name"}},{data:"project",tgt:{process:"SpecProject",port:"keypath"}},{src:{process:"CreateSpecs",port:"store"},tgt:{process:"SpecProject",port:"store"}},{src:{process:"SpecProject",port:"error"},tgt:{process:"Errors",port:"in"}},{src:{process:"Open",port:"db"},tgt:{process:"DatabaseReady",port:"in"}}],properties:{environment:{type:"noflo-browser"}},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},RuntimeSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},RuntimeDeleteAction:{component:"ui/SetAction"},RegistryProjectsAction:{component:"ui/SetAction"},RegistryErrorAction:{component:"ui/SetAction"},GetUserStateFetch:{component:"ui/GetActionValues"},GetRuntimes:{component:"ui/GetRemoteRuntimes"},GetUserStatePut:{component:"ui/GetActionValues"},SaveRuntime:{component:"ui/StoreRemoteRuntime"},GetUserStateDel:{component:"ui/GetActionValues"},RemoveRuntime:{component:"ui/RemoveRemoteRuntime"},GetUserStateProjects:{component:"ui/GetActionValues"},GetRemoteProjects:{component:"ui/GetRemoteProjects"},GetUserStateRepos:{component:"ui/GetActionValues"},SplitPullAction:{component:"core/Split"},SendPullAction:{component:"core/Kick"},StoreRemoteProject:{component:"ui/StoreRemoteProject"},GetUserStateDelRepo:{component:"ui/GetActionValues"},RemoveRepository:{component:"ui/RemoveRemoteProject"}},connections:[{data:"flowhub:runtimes:fetch,flowhub:runtimes:register,flowhub:runtimes:remove,flowhub:projects:fetch,github:sync:pull,github:sync:prepare,flowhub:projects:remove",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:delete:runtime",tgt:{process:"RuntimeDeleteAction",port:"action"}},{src:{process:"RuntimeDeleteAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:projects",tgt:{process:"RegistryProjectsAction",port:"action"}},{src:{process:"RegistryProjectsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:error",tgt:{process:"RegistryErrorAction",port:"action"}},{src:{process:"RegistryErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user,runtimes",tgt:{process:"GetUserStateFetch",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetUserStateFetch",port:"in"}},{src:{process:"GetUserStateFetch",port:"values",index:0},tgt:{process:"GetRuntimes",port:"user"}},{src:{process:"GetUserStateFetch",port:"values",index:1},tgt:{process:"GetRuntimes",port:"runtimes"}},{src:{process:"GetRuntimes",port:"runtime"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"GetRuntimes",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStatePut",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetUserStatePut",port:"in"}},{src:{process:"GetUserStatePut",port:"values",index:0},tgt:{process:"SaveRuntime",port:"user"}},{src:{process:"GetUserStatePut",port:"out"},tgt:{process:"SaveRuntime",port:"in"}},{src:{process:"SaveRuntime",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"SaveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateDel",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"GetUserStateDel",port:"in"}},{src:{process:"GetUserStateDel",port:"values",index:0},tgt:{process:"RemoveRuntime",port:"user"}},{src:{process:"GetUserStateDel",port:"out"},tgt:{process:"RemoveRuntime",port:"in"}},{src:{process:"RemoveRuntime",port:"out"},tgt:{process:"RuntimeDeleteAction",port:"in"}},{src:{process:"RemoveRuntime",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateProjects",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateProjects",port:"in"}},{src:{process:"GetUserStateProjects",port:"values",index:0},tgt:{process:"GetRemoteProjects",port:"user"}},{src:{process:"GetRemoteProjects",port:"projects"},tgt:{process:"RegistryProjectsAction",port:"in"}},{src:{process:"GetRemoteProjects",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateRepos",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"SplitPullAction",port:"in"}},{src:{process:"SplitPullAction",port:"out"},tgt:{process:"GetUserStateRepos",port:"in"}},{src:{process:"SplitPullAction",port:"out"},tgt:{process:"SendPullAction",port:"data"}},{src:{process:"SendPullAction",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"GetUserStateRepos",port:"values",index:0},tgt:{process:"StoreRemoteProject",port:"user"}},{src:{process:"GetUserStateRepos",port:"out"},tgt:{process:"StoreRemoteProject",port:"in"}},{src:{process:"StoreRemoteProject",port:"out"},tgt:{process:"SendPullAction",port:"in"}},{src:{process:"StoreRemoteProject",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"StoreRemoteProject",port:"in"}},{data:"user",tgt:{process:"GetUserStateDelRepo",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetUserStateDelRepo",port:"in"}},{src:{process:"GetUserStateDelRepo",port:"values",index:0},tgt:{process:"RemoveRepository",port:"user"}},{src:{process:"GetUserStateDelRepo",port:"out"},tgt:{process:"RemoveRepository",port:"in"}},{src:{process:"RemoveRepository",port:"error"},tgt:{process:"RegistryErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanOps:{component:"ui/CleanAction"},OpsToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"flowhub:projects,flowhub:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanOps",port:"in"}},{data:"remoteProjects",tgt:{process:"OpsToContext",port:"key"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"OpsToContext",port:"value"}},{src:{process:"CleanOps",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"OpsToContext",port:"context"}},{src:{process:"OpsToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"address-card-o"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},ProjectSaveAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},GraphSaveAction:{component:"ui/SetAction"},ComponentSaveAction:{component:"ui/SetAction"},SpecSaveAction:{component:"ui/SetAction"},RuntimeRegisterAction:{component:"ui/SetAction"},RuntimeSaveAction:{component:"ui/SetAction"},RuntimeErrorAction:{component:"ui/SetAction"},RuntimeOpenedAction:{component:"ui/SetAction"},RuntimeOpeningAction:{component:"ui/SetAction"},RuntimeStatusAction:{component:"ui/SetAction"},RuntimeComponentsAction:{component:"ui/SetAction"},RuntimeComponentAction:{component:"ui/SetAction"},RuntimeStartedAction:{component:"ui/SetAction"},RuntimeStoppedAction:{component:"ui/SetAction"},RuntimePacketAction:{component:"ui/SetAction"},RuntimeIconAction:{component:"ui/SetAction"},RuntimeOutputAction:{component:"ui/SetAction"},RuntimeNetworkErrorAction:{component:"ui/SetAction"},RuntimeProcessErrorAction:{component:"ui/SetAction"},RuntimeProtocolErrorAction:{component:"ui/SetAction"},RuntimeLoadTestsAction:{component:"ui/SetAction"},RuntimeTestSuitesAction:{component:"ui/SetAction"},ApplicationRecreateAction:{component:"ui/SetAction"},StorageOpenedAction:{component:"ui/SetAction"},StorageReadyAction:{component:"ui/SetAction"},ContextEdgesAction:{component:"ui/SetAction"},GetRuntimesState:{component:"ui/GetActionValues"},PopulateRuntimeData:{component:"ui/PopulateRuntimeData"},OpenLiveMode:{component:"ui/OpenLiveMode"},GetProjectRuntimesState:{component:"ui/GetActionValues"},PopulateProjectRuntime:{component:"ui/PopulateProjectRuntime"},OpenProjectMode:{component:"ui/OpenProjectMode"},GetEdgeState:{component:"ui/GetActionValues"},HasEdgeRuntime:{component:"ui/HasActionRuntime"},SendEdges:{component:"ui/SendEdges"},GetRuntimeToProjectValues:{component:"ui/GetActionValues"},RuntimeToProject:{component:"ui/RuntimeToProject"},GetStoredRuntimes:{component:"ui/GetActionValues"},EnsureLocalRuntimes:{component:"ui/EnsureLocalRuntimes"},GetClient:{component:"ui/GetRuntimeClient"},ListenRuntime:{component:"ui/ListenRuntime"},GetStartValues:{component:"ui/GetActionValues"},StartNetwork:{component:"ui/StartNetwork"},GetStopValues:{component:"ui/GetActionValues"},StopNetwork:{component:"ui/StopNetwork"},GetReconnectValues:{component:"ui/GetActionValues"},ReconnectRuntime:{component:"ui/ReconnectRuntime"},GetComponentValues:{component:"ui/GetActionValues"},SendComponentChanges:{component:"ui/SendComponentChanges"},GetGraphChangeValues:{component:"ui/GetActionValues"},SendGraphChanges:{component:"ui/SendGraphChanges"},GetNewGraphValues:{component:"ui/GetActionValues"},SendNewGraph:{component:"ui/SendNewGraph"},GetLoadTestsValues:{component:"ui/GetActionValues"},LoadTests:{component:"ui/LoadTests"},Async:{component:"core/RepeatAsync"},GetRunTestsValues:{component:"ui/GetActionValues"},RunTests:{component:"ui/RunTests"}},connections:[{data:"runtime:open,storage:opened,context:edges,project:fromruntime,storage:ready,storage:stored:runtime,runtime:start,runtime:stop,runtime:reconnect,runtime:sendComponent,runtime:sendGraphChanges,runtime:sendGraph,runtime:loadTests,runtime:runTests",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:save:project",tgt:{process:"ProjectSaveAction",port:"action"}},{src:{process:"ProjectSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:graph",tgt:{process:"GraphSaveAction",port:"action"}},{src:{process:"GraphSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:component",tgt:{process:"ComponentSaveAction",port:"action"}},{src:{process:"ComponentSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:spec",tgt:{process:"SpecSaveAction",port:"action"}},{src:{process:"SpecSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:register",tgt:{process:"RuntimeRegisterAction",port:"action"}},{src:{process:"RuntimeRegisterAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:save:runtime",tgt:{process:"RuntimeSaveAction",port:"action"}},{src:{process:"RuntimeSaveAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:error",tgt:{process:"RuntimeErrorAction",port:"action"}},{src:{process:"RuntimeErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opened",tgt:{process:"RuntimeOpenedAction",port:"action"}},{src:{process:"RuntimeOpenedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:opening",tgt:{process:"RuntimeOpeningAction",port:"action"}},{src:{process:"RuntimeOpeningAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:status",tgt:{process:"RuntimeStatusAction",port:"action"}},{src:{process:"RuntimeStatusAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:components",tgt:{process:"RuntimeComponentsAction",port:"action"}},{src:{process:"RuntimeComponentsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:component",tgt:{process:"RuntimeComponentAction",port:"action"}},{src:{process:"RuntimeComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:started",tgt:{process:"RuntimeStartedAction",port:"action"}},{src:{process:"RuntimeStartedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:stopped",tgt:{process:"RuntimeStoppedAction",port:"action"}},{src:{process:"RuntimeStoppedAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:packet",tgt:{process:"RuntimePacketAction",port:"action"}},{src:{process:"RuntimePacketAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:icon",tgt:{process:"RuntimeIconAction",port:"action"}},{src:{process:"RuntimeIconAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:output",tgt:{process:"RuntimeOutputAction",port:"action"}},{src:{process:"RuntimeOutputAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:networkerror",tgt:{process:"RuntimeNetworkErrorAction",port:"action"}},{src:{process:"RuntimeNetworkErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:processerror",tgt:{process:"RuntimeProcessErrorAction",port:"action"}},{src:{process:"RuntimeProcessErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:protocolerror",tgt:{process:"RuntimeProtocolErrorAction",port:"action"}},{src:{process:"RuntimeProtocolErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:loadTests",tgt:{process:"RuntimeLoadTestsAction",port:"action"}},{src:{process:"RuntimeLoadTestsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:testsuites",tgt:{process:"RuntimeTestSuitesAction",port:"action"}},{src:{process:"RuntimeTestSuitesAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:recreatestate",tgt:{process:"ApplicationRecreateAction",port:"action"}},{src:{process:"ApplicationRecreateAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenedAction",port:"action"}},{src:{process:"StorageOpenedAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"context:edges",tgt:{process:"ContextEdgesAction",port:"action"}},{src:{process:"ContextEdgesAction",port:"out"},tgt:{process:"Passed",port:"in"}},{data:"runtimes,projects",tgt:{process:"GetRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"GetRuntimesState",port:"in"}},{src:{process:"GetRuntimesState",port:"values",index:0},tgt:{process:"PopulateRuntimeData",port:"runtimes"}},{src:{process:"GetRuntimesState",port:"out"},tgt:{process:"PopulateRuntimeData",port:"in"}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"GetClient",port:"in",index:0}},{src:{process:"PopulateRuntimeData",port:"out"},tgt:{process:"RuntimeOpeningAction",port:"in"}},{src:{process:"PopulateRuntimeData",port:"new"},tgt:{process:"GetClient",port:"updated"}},{src:{process:"PopulateRuntimeData",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"out",index:0},tgt:{process:"OpenLiveMode",port:"in"}},{src:{process:"GetRuntimesState",port:"values",index:1},tgt:{process:"OpenLiveMode",port:"projects"}},{src:{process:"GetClient",port:"client",index:0},tgt:{process:"OpenLiveMode",port:"client"}},{src:{process:"OpenLiveMode",port:"out"},tgt:{process:"RuntimeOpenedAction",port:"in"}},{src:{process:"OpenLiveMode",port:"out"},tgt:{process:"RuntimeLoadTestsAction",port:"in"}},{src:{process:"OpenLiveMode",port:"project"},tgt:{process:"ProjectSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"graph"},tgt:{process:"GraphSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"component"},tgt:{process:"ComponentSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"spec"},tgt:{process:"SpecSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"runtime"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"OpenLiveMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetProjectRuntimesState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"GetProjectRuntimesState",port:"in"}},{src:{process:"GetProjectRuntimesState",port:"values",index:0},tgt:{process:"PopulateProjectRuntime",port:"runtimes"}},{src:{process:"GetProjectRuntimesState",port:"out"},tgt:{process:"PopulateProjectRuntime",port:"in"}},{src:{process:"PopulateProjectRuntime",port:"out"},tgt:{process:"GetClient",port:"in",index:1}},{src:{process:"PopulateProjectRuntime",port:"skipped"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"GetClient",port:"out",index:1},tgt:{process:"OpenProjectMode",port:"in"}},{src:{process:"GetClient",port:"client",index:1},tgt:{process:"OpenProjectMode",port:"client"}},{src:{process:"OpenProjectMode",port:"out"},tgt:{process:"StorageOpenedAction",port:"in"}},{src:{process:"OpenProjectMode",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"graphs,project",tgt:{process:"GetEdgeState",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"HasEdgeRuntime",port:"in"}},{src:{process:"HasEdgeRuntime",port:"out"},tgt:{process:"GetEdgeState",port:"in"}},{src:{process:"HasEdgeRuntime",port:"missed"},tgt:{process:"Passed",port:"in"}},{src:{process:"GetEdgeState",port:"state"},tgt:{process:"GetClient",port:"in",index:2}},{src:{process:"GetClient",port:"client",index:2},tgt:{process:"SendEdges",port:"client"}},{src:{process:"GetEdgeState",port:"values",index:0},tgt:{process:"SendEdges",port:"graphs"}},{src:{process:"GetEdgeState",port:"values",index:1},tgt:{process:"SendEdges",port:"project"}},{src:{process:"GetEdgeState",port:"out"},tgt:{process:"SendEdges",port:"edges"}},{src:{process:"SendEdges",port:"out"},tgt:{process:"ContextEdgesAction",port:"in"}},{src:{process:"SendEdges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetRuntimeToProjectValues",port:"in"}},{src:{process:"GetRuntimeToProjectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:3}},{src:{process:"GetClient",port:"out",index:3},tgt:{process:"RuntimeToProject",port:"in"}},{src:{process:"GetClient",port:"client",index:3},tgt:{process:"RuntimeToProject",port:"client"}},{src:{process:"RuntimeToProject",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"runtimes",tgt:{process:"GetStoredRuntimes",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"GetStoredRuntimes",port:"in"}},{src:{process:"GetStoredRuntimes",port:"values",index:0},tgt:{process:"EnsureLocalRuntimes",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"out"},tgt:{process:"RuntimeSaveAction",port:"in"}},{src:{process:"EnsureLocalRuntimes",port:"runtimes"},tgt:{process:"GetClient",port:"initial"}},{src:{process:"GetStoredRuntimes",port:"out"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"GetClient",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"GetClient",port:"instance"},tgt:{process:"ListenRuntime",port:"in"}},{src:{process:"ListenRuntime",port:"runtimeupdate"},tgt:{process:"RuntimeRegisterAction",port:"in"}},{src:{process:"ListenRuntime",port:"status"},tgt:{process:"RuntimeStatusAction",port:"in"}},{src:{process:"ListenRuntime",port:"components"},tgt:{process:"RuntimeComponentsAction",port:"in"}},{src:{process:"ListenRuntime",port:"component"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"ListenRuntime",port:"started"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"ListenRuntime",port:"stopped"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"ListenRuntime",port:"packet"},tgt:{process:"RuntimePacketAction",port:"in"}},{src:{process:"ListenRuntime",port:"icon"},tgt:{process:"RuntimeIconAction",port:"in"}},{src:{process:"ListenRuntime",port:"output"},tgt:{process:"RuntimeOutputAction",port:"in"}},{src:{process:"ListenRuntime",port:"networkerror"},tgt:{process:"RuntimeNetworkErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"processerror"},tgt:{process:"RuntimeProcessErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"protocolerror"},tgt:{process:"RuntimeProtocolErrorAction",port:"in"}},{src:{process:"ListenRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"GetClient",port:"updated"}},{src:{process:"GetClient",port:"updated"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:6},tgt:{process:"GetStartValues",port:"in"}},{src:{process:"GetStartValues",port:"out"},tgt:{process:"GetClient",port:"in",index:4}},{src:{process:"GetClient",port:"out",index:4},tgt:{process:"StartNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:4},tgt:{process:"StartNetwork",port:"client"}},{src:{process:"StartNetwork",port:"out"},tgt:{process:"RuntimeStartedAction",port:"in"}},{src:{process:"StartNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:7},tgt:{process:"GetStopValues",port:"in"}},{src:{process:"GetStopValues",port:"out"},tgt:{process:"GetClient",port:"in",index:5}},{src:{process:"GetClient",port:"out",index:5},tgt:{process:"StopNetwork",port:"in"}},{src:{process:"GetClient",port:"client",index:5},tgt:{process:"StopNetwork",port:"client"}},{src:{process:"StopNetwork",port:"out"},tgt:{process:"RuntimeStoppedAction",port:"in"}},{src:{process:"StopNetwork",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:8},tgt:{process:"GetReconnectValues",port:"in"}},{src:{process:"GetReconnectValues",port:"out"},tgt:{process:"GetClient",port:"in",index:6}},{src:{process:"GetClient",port:"out",index:6},tgt:{process:"ReconnectRuntime",port:"in"}},{src:{process:"GetClient",port:"client",index:6},tgt:{process:"ReconnectRuntime",port:"client"}},{src:{process:"ReconnectRuntime",port:"out"},tgt:{process:"ApplicationRecreateAction",port:"in"}},{src:{process:"ReconnectRuntime",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetComponentValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:9},tgt:{process:"GetComponentValues",port:"in"}},{src:{process:"GetComponentValues",port:"out"},tgt:{process:"GetClient",port:"in",index:7}},{src:{process:"GetClient",port:"out",index:7},tgt:{process:"SendComponentChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:7},tgt:{process:"SendComponentChanges",port:"client"}},{src:{process:"GetComponentValues",port:"values",index:0},tgt:{process:"SendComponentChanges",port:"project"}},{src:{process:"SendComponentChanges",port:"out"},tgt:{process:"RuntimeComponentAction",port:"in"}},{src:{process:"SendComponentChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetGraphChangeValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:10},tgt:{process:"GetGraphChangeValues",port:"in"}},{src:{process:"GetGraphChangeValues",port:"out"},tgt:{process:"GetClient",port:"in",index:8}},{src:{process:"GetClient",port:"out",index:8},tgt:{process:"SendGraphChanges",port:"in"}},{src:{process:"GetClient",port:"client",index:8},tgt:{process:"SendGraphChanges",port:"client"}},{src:{process:"GetGraphChangeValues",port:"values",index:0},tgt:{process:"SendGraphChanges",port:"project"}},{src:{process:"SendGraphChanges",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetNewGraphValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:11},tgt:{process:"GetNewGraphValues",port:"in"}},{src:{process:"GetNewGraphValues",port:"out"},tgt:{process:"GetClient",port:"in",index:9}},{src:{process:"GetClient",port:"out",index:9},tgt:{process:"SendNewGraph",port:"in"}},{src:{process:"GetClient",port:"client",index:9},tgt:{process:"SendNewGraph",port:"client"}},{src:{process:"SendNewGraph",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetLoadTestsValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:12},tgt:{process:"GetLoadTestsValues",port:"in"}},{src:{process:"GetLoadTestsValues",port:"out"},tgt:{process:"LoadTests",port:"in"}},{src:{process:"LoadTests",port:"out"},tgt:{process:"Async",port:"in"}},{src:{process:"Async",port:"out"},tgt:{process:"RuntimeTestSuitesAction",port:"in"}},{src:{process:"LoadTests",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}},{data:"project",tgt:{process:"GetRunTestsValues",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:13},tgt:{process:"GetRunTestsValues",port:"in"}},{src:{process:"GetRunTestsValues",port:"out"},tgt:{process:"GetClient",port:"in",index:10}},{src:{process:"GetClient",port:"out",index:10},tgt:{process:"RunTests",port:"in"}},{src:{process:"GetClient",port:"client",index:10},tgt:{process:"RunTests",port:"client"}},{src:{process:"RunTests",port:"out"},tgt:{process:"RuntimeTestSuitesAction",port:"in"}},{src:{process:"RunTests",port:"error"},tgt:{process:"RuntimeErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"cogs"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Merge"},StorageDbAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},StorageReadyAction:{component:"ui/SetAction"},StorageInitialLoadAction:{component:"ui/SetAction"},StorageInitialDataAction:{component:"ui/SetAction"},StorageProjectAction:{component:"ui/SetAction"},StorageGraphAction:{component:"ui/SetAction"},StorageComponentAction:{component:"ui/SetAction"},StorageSpecAction:{component:"ui/SetAction"},StorageRuntimeAction:{component:"ui/SetAction"},RemovedProjectAction:{component:"ui/SetAction"},RemovedGraphAction:{component:"ui/SetAction"},RemovedComponentAction:{component:"ui/SetAction"},RemovedSpecAction:{component:"ui/SetAction"},RemovedRuntimeAction:{component:"ui/SetAction"},StorageErrorAction:{component:"ui/SetAction"},StorageOpenAction:{component:"ui/SetAction"},RuntimeLoadTestsAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},DbName:{component:"strings/SendString"},PrepareStorage:{component:"ui/PrepareStorage"},LoadData:{component:"ui/LoadData"},SplitSave:{component:"core/Split"},OpenNewProject:{component:"ui/OpenNewProject"},SaveData:{component:"ui/SaveData"},DeleteData:{component:"ui/DeleteData"},OpenProject:{component:"ui/OpenProject"}},connections:[{data:"noflo:ready,storage:load:*,storage:save:*,storage:delete:*,storage:open",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"storage:db",tgt:{process:"StorageDbAction",port:"action"}},{src:{process:"StorageDbAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:ready",tgt:{process:"StorageReadyAction",port:"action"}},{src:{process:"StorageReadyAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:load:all",tgt:{process:"StorageInitialLoadAction",port:"action"}},{src:{process:"StorageInitialLoadAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:initial",tgt:{process:"StorageInitialDataAction",port:"action"}},{src:{process:"StorageInitialDataAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:project",tgt:{process:"StorageProjectAction",port:"action"}},{src:{process:"StorageProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:graph",tgt:{process:"StorageGraphAction",port:"action"}},{src:{process:"StorageGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:component",tgt:{process:"StorageComponentAction",port:"action"}},{src:{process:"StorageComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:spec",tgt:{process:"StorageSpecAction",port:"action"}},{src:{process:"StorageSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:stored:runtime",tgt:{process:"StorageRuntimeAction",port:"action"}},{src:{process:"StorageRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:project",tgt:{process:"RemovedProjectAction",port:"action"}},{src:{process:"RemovedProjectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:graph",tgt:{process:"RemovedGraphAction",port:"action"}},{src:{process:"RemovedGraphAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:component",tgt:{process:"RemovedComponentAction",port:"action"}},{src:{process:"RemovedComponentAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:spec",tgt:{process:"RemovedSpecAction",port:"action"}},{src:{process:"RemovedSpecAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:removed:runtime",tgt:{process:"RemovedRuntimeAction",port:"action"}},{src:{process:"RemovedRuntimeAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:error",tgt:{process:"StorageErrorAction",port:"action"}},{src:{process:"StorageErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"storage:opened",tgt:{process:"StorageOpenAction",port:"action"}},{src:{process:"StorageOpenAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"runtime:loadTests",tgt:{process:"RuntimeLoadTestsAction",port:"action"}},{src:{process:"RuntimeLoadTestsAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:sethash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"noflo-ui",tgt:{process:"DbName",port:"string"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"DbName",port:"in"}},{src:{process:"DbName",port:"out"},tgt:{process:"PrepareStorage",port:"name"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageDbAction",port:"in"}},{src:{process:"PrepareStorage",port:"db"},tgt:{process:"StorageInitialLoadAction",port:"in"}},{src:{process:"PrepareStorage",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"LoadData",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageInitialDataAction",port:"in"}},{src:{process:"LoadData",port:"complete"},tgt:{process:"StorageReadyAction",port:"in"}},{src:{process:"LoadData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"SplitSave",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"OpenNewProject",port:"in"}},{src:{process:"SplitSave",port:"out"},tgt:{process:"SaveData",port:"in"}},{src:{process:"SaveData",port:"project"},tgt:{process:"OpenNewProject",port:"project"}},{src:{process:"OpenNewProject",port:"out"},tgt:{process:"StorageProjectAction",port:"in"}},{src:{process:"OpenNewProject",port:"hash"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"SaveData",port:"graph"},tgt:{process:"StorageGraphAction",port:"in"}},{src:{process:"SaveData",port:"component"},tgt:{process:"StorageComponentAction",port:"in"}},{src:{process:"SaveData",port:"spec"},tgt:{process:"StorageSpecAction",port:"in"}},{src:{process:"SaveData",port:"runtime"},tgt:{process:"StorageRuntimeAction",port:"in"}},{src:{process:"SaveData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"DeleteData",port:"in"}},{src:{process:"DeleteData",port:"project"},tgt:{process:"RemovedProjectAction",port:"in"}},{src:{process:"DeleteData",port:"graph"},tgt:{process:"RemovedGraphAction",port:"in"}},{src:{process:"DeleteData",port:"component"},tgt:{process:"RemovedComponentAction",port:"in"}},{src:{process:"DeleteData",port:"spec"},tgt:{process:"RemovedSpecAction",port:"in"}},{src:{process:"DeleteData",port:"runtime"},tgt:{process:"RemovedRuntimeAction",port:"in"}},{src:{process:"DeleteData",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"OpenProject",port:"in"}},{src:{process:"OpenProject",port:"out"},tgt:{process:"StorageOpenAction",port:"in"}},{src:{process:"OpenProject",port:"out"},tgt:{process:"RuntimeLoadTestsAction",port:"in"}},{src:{process:"OpenProject",port:"error"},tgt:{process:"StorageErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"database"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Passed",port:"out"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},Passed:{component:"core/Repeat"},ApplicationUrlAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},ApplicationRedirectAction:{component:"ui/SetAction"},ApplicationHashAction:{component:"ui/SetAction"},NofloReady:{component:"core/Split"},InitialURL:{component:"ui/GetUrl"},SplitReady:{component:"core/Split"},Async:{component:"core/RepeatAsync"},ListenHash:{component:"interaction/ListenHash"},Redirect:{component:"ui/SetUrl"},HashToAction:{component:"ui/Router"},SetUrlHash:{component:"ui/SetUrlHash"},SendCurrentHash:{component:"ui/SendCurrentHash"}},connections:[{data:"noflo:ready,storage:ready,application:redirect,application:hash,application:sethash,application:recreatestate",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"pass"},tgt:{process:"Passed",port:"in"}},{data:"application:url",tgt:{process:"ApplicationUrlAction",port:"action"}},{src:{process:"ApplicationUrlAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:hash",tgt:{process:"ApplicationHashAction",port:"action"}},{src:{process:"ApplicationHashAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"NofloReady",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"NofloReady",port:"out"},tgt:{process:"InitialURL",port:"in"}},{src:{process:"InitialURL",port:"out"},tgt:{process:"ApplicationUrlAction",port:"in"}},{src:{process:"ListenHash",port:"initial"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"ListenHash",port:"change"},tgt:{process:"ApplicationHashAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"SplitReady",port:"in"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Async",port:"in"}},{src:{process:"Async",port:"out"},tgt:{process:"ListenHash",port:"start"}},{src:{process:"SplitReady",port:"out"},tgt:{process:"Passed",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Redirect",port:"in"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"HashToAction",port:"in"}},{src:{process:"HashToAction",port:"route"},tgt:{process:"NewActions",port:"in"}},{src:{process:"HashToAction",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:4},tgt:{process:"SetUrlHash",port:"in"}},{src:{process:"Dispatch",port:"handle",index:5},tgt:{process:"SendCurrentHash",port:"in"}},{src:{process:"SendCurrentHash",port:"out"},tgt:{process:"ApplicationHashAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"slack"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{pass:{process:"Dispatch",port:"pass"},new:{process:"NewActions",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},UserInfoAction:{component:"ui/SetAction"},NewActions:{component:"core/Merge"},UserErrorAction:{component:"ui/SetAction"},ApplicationRedirectAction:{component:"ui/SetAction"},RegistryRuntimesFetch:{component:"ui/SetAction"},UserLogoutAction:{component:"ui/SetAction"},CheckQuery:{component:"ui/CheckTokenGrant"},ExchangeToken:{component:"ui/ExchangeGrantToken"},GetRemoteUser:{component:"ui/GetRemoteUser"},StoreUser:{component:"ui/StoreUser"},LoadUser:{component:"ui/LoadUserData"},RefreshUser:{component:"ui/RefreshRemoteUser"},Login:{component:"ui/LoginOAuth"},Reset:{component:"ui/ClearUserData"},GetUserStateForUpdate:{component:"ui/GetActionValues"},StoreUserPreferences:{component:"ui/StoreUserPreferences"}},connections:[{data:"application:url,user:login,user:logout,user:update",tgt:{process:"Dispatch",port:"routes"}},{data:"user:info",tgt:{process:"UserInfoAction",port:"action"}},{src:{process:"UserInfoAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:error",tgt:{process:"UserErrorAction",port:"action"}},{src:{process:"UserErrorAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"application:redirect",tgt:{process:"ApplicationRedirectAction",port:"action"}},{src:{process:"ApplicationRedirectAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"flowhub:runtimes:fetch",tgt:{process:"RegistryRuntimesFetch",port:"action"}},{src:{process:"RegistryRuntimesFetch",port:"out"},tgt:{process:"NewActions",port:"in"}},{data:"user:logout",tgt:{process:"UserLogoutAction",port:"action"}},{src:{process:"UserLogoutAction",port:"out"},tgt:{process:"NewActions",port:"in"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"CheckQuery",port:"code"},tgt:{process:"ExchangeToken",port:"code"}},{src:{process:"CheckQuery",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"ExchangeToken",port:"token"},tgt:{process:"GetRemoteUser",port:"token"}},{src:{process:"ExchangeToken",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"GetRemoteUser",port:"user"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"GetRemoteUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUser",port:"user"},tgt:{process:"RegistryRuntimesFetch",port:"in"}},{src:{process:"StoreUser",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"CheckQuery",port:"pass"},tgt:{process:"LoadUser",port:"start"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"LoadUser",port:"user"},tgt:{process:"RefreshUser",port:"in"}},{src:{process:"RefreshUser",port:"pass"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"RefreshUser",port:"updated"},tgt:{process:"StoreUser",port:"user"}},{src:{process:"RefreshUser",port:"invalid"},tgt:{process:"UserLogoutAction",port:"in"}},{src:{process:"LoadUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"RefreshUser",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"Login",port:"in"}},{src:{process:"Login",port:"codeurl"},tgt:{process:"CheckQuery",port:"in"}},{src:{process:"Login",port:"redirect"},tgt:{process:"ApplicationRedirectAction",port:"in"}},{src:{process:"Login",port:"error"},tgt:{process:"UserErrorAction",port:"in"}},{src:{process:"Dispatch",port:"handle",index:2},tgt:{process:"Reset",port:"clear"}},{src:{process:"Reset",port:"user"},tgt:{process:"UserInfoAction",port:"in"}},{data:"user",tgt:{process:"GetUserStateForUpdate",port:"keys"}},{src:{process:"Dispatch",port:"handle",index:3},tgt:{process:"GetUserStateForUpdate",port:"in"}},{src:{process:"GetUserStateForUpdate",port:"values",index:0},tgt:{process:"StoreUserPreferences",port:"user"}},{src:{process:"GetUserStateForUpdate",port:"out"},tgt:{process:"StoreUserPreferences",port:"in"}},{src:{process:"StoreUserPreferences",port:"out"},tgt:{process:"UserInfoAction",port:"in"}},{src:{process:"StoreUserPreferences",port:"error"},tgt:{process:"UserErrorAction",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t){e.exports={inports:{in:{process:"Dispatch",port:"in"}},outports:{context:{process:"MergeContext",port:"out"}},groups:[],processes:{Dispatch:{component:"ui/DispatchAction"},CleanUser:{component:"ui/CleanAction"},UserToContext:{component:"ui/SetToContext"},CreateCtx:{component:"ui/CreateEmptyContext"},MergeContext:{component:"core/Merge"},ErrorToCtx:{component:"ui/ErrorToContext"}},connections:[{data:"user:info,user:error",tgt:{process:"Dispatch",port:"routes"}},{src:{process:"Dispatch",port:"handle",index:0},tgt:{process:"CleanUser",port:"in"}},{data:"user",tgt:{process:"UserToContext",port:"key"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"UserToContext",port:"value"}},{src:{process:"CleanUser",port:"out"},tgt:{process:"CreateCtx",port:"start"}},{src:{process:"CreateCtx",port:"out"},tgt:{process:"UserToContext",port:"context"}},{src:{process:"UserToContext",port:"context"},tgt:{process:"MergeContext",port:"in"}},{src:{process:"Dispatch",port:"handle",index:1},tgt:{process:"ErrorToCtx",port:"error"}},{src:{process:"ErrorToCtx",port:"out"},tgt:{process:"MergeContext",port:"in"}}],properties:{environment:{type:"noflo-browser"},icon:"user-circle"},caseSensitive:!1}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="This component generates a single packet and sends it to\nthe output port. Mostly usable for debugging, but can also be useful\nfor starting up networks.",e.icon="share",e.inPorts.add("in",{datatype:"bang",description:"Signal to send the data packet"}),e.inPorts.add("data",{datatype:"all",description:"Packet to be sent",control:!0,default:null}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{if(!e.hasStream("in"))return;if(e.attached("data").length&&!e.hasData("data"))return;e.getData("in");const r=e.getData("data");t.send({out:r}),t.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="This component receives data on multiple input ports and \nsends the same data out to the connected output port",e.icon="compress",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");return t.sendDone({out:r})})}},function(e,t,r){const n=r(0),{inspect:o}=r(67);t.getComponent=()=>{const e=new n.Component;return e.description="Sends the data items to console.log",e.icon="bug",e.inPorts.add("in",{datatype:"all",description:"Packet to be printed through console.log"}),e.inPorts.add("options",{datatype:"object",description:"Options to be passed to console.log",control:!0}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{if(!e.hasData("in"))return;if(e.attached("options").length&&!e.hasData("options"))return;let r=null;e.has("options")&&(r=e.getData("options"));const n=e.getData("in");((e,t)=>{null!=e?console.log(o(t,e.showHidden,e.depth,e.colors)):console.log(t)})(r,n),t.sendDone({out:n})})}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Forwards packets and metadata in the same way \nit receives them",e.icon="forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Like 'Repeat', except repeat on next tick",e.icon="step-forward",e.inPorts.add("in",{datatype:"all",description:"Packet to forward"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");setTimeout(()=>t.sendDone({out:r}),0)})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Sends next packet in buffer when receiving a bang",e.icon="forward",e.inPorts.add("data",{datatype:"all"}),e.inPorts.add("in",{datatype:"bang"}),e.outPorts.add("out",{datatype:"all"}),e.outPorts.add("empty",{datatype:"bang",required:!1}),e.forwardBrackets={},e.process((t,r)=>{if(!t.hasData("in"))return;const n=t.getData("in");if(!t.hasData("data"))return void r.sendDone({empty:!0});let o=!1;for(;t.has("data");){if(o){if("data"===e.inPorts.data.getBuffer(n.scope)[0].type)break}const i=t.get("data");r.send({out:i}),"data"===i.type&&(o=!0)}r.done()})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.icon="expand",e.description="This component receives data on a single input port and \nsends the same data out to all connected output ports",e.inPorts.add("in",{datatype:"all",description:"Packet to be forwarded"}),e.outPorts.add("out",{datatype:"all"}),e.process((e,t)=>{const r=e.get("in");t.sendDone({out:r})})}},function(e,t,r){const n=r(0);t.getComponent=()=>{const e=new n.Component;return e.description="Like Promise.race, wait for result from all connected inputs and send first result or an error out",e.icon="compress",e.inPorts.add("in",{datatype:"all",addressable:!0}),e.inPorts.add("error",{datatype:"object"}),e.outPorts.add("out",{datatype:"array"}),e.outPorts.add("error",{datatype:"object"}),e.pending={},e.tearDown=t=>(e.pending={},t()),e.forwardBrackets={},e.process((t,r)=>{if(t.hasData("error")){const n=t.getData("error");return e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved?void r.done():(e.pending[t.scope].rejected=!0,void r.sendDone({error:n}))}const n=t.attached("in").filter(e=>t.hasStream(["in",e]));if(!n.length)return;if(e.pending[t.scope]||(e.pending[t.scope]={resolved:!1,rejected:!1}),e.pending[t.scope].rejected||e.pending[t.scope].resolved)return n.forEach(e=>{const r=t.getStream(["in",e]);return Array.from(r).map(e=>e.drop())}),void r.done();const o=t.getStream(["in",n[0]]).filter(e=>"data"===e.type);e.pending[t.scope].resolved=!0;const i=o.map(e=>e.data);r.sendDone({out:i})})}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(52),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub commit",e.inPorts.add("message",{datatype:"string",description:"Commit message"}),e.inPorts.add("tree",{datatype:"string",description:"Tree SHA"}),e.inPorts.add("parents",{datatype:"array",description:"Parent commits"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["message","tree","parents","repository"],params:["token"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/commits"),{message:t.message,tree:t.tree,parents:t.parents||[]})).on("success",(function(e){return n.send(e.body.sha),i()})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){(function(t){
/*!
 * octo.js
 * Copyright (c) 2012 Justin Palmer <justin@labratrevenge.com>
 * MIT Licensed
 */
!function(){"undefined"==typeof superagent&&(superagent=r(442),void 0!==t&&t.execPath&&-1!==t.execPath.indexOf("node")&&(btoa=r(108)));var n={api:function(){var e,r,n,o,i,s="https://api.github.com";superagent;function a(){}function c(s,c,l){var p=1,u=30,d={},h=!1,f=!1,m={};void 0!==t&&t.execPath&&t.execPath.match(/node/)&&(d["User-Agent"]="Octo.js");var g=function(){var t=superagent[s](a.host()+c);t.on("error",(function(e){y._handledError=e,y.trigger("error",e)})),i&&t.set("Authorization","token "+i),!i&&n&&o&&t.set("Authorization","Basic "+btoa(n+":"+o)),t.set(d).query({page:p,per_page:u}).timeout(3e3).send(l).end((function(t){if(!y._handledError){if(t.error)return y._handledError=t,void y.trigger("error",t);e=~~t.header["x-ratelimit-limit"],r=~~t.header["x-ratelimit-remaining"];var n=t.header.link;h=/rel=\"next\"/i.test(n),f=/rel=\"next\"/.test(n),y.trigger("end",t),t.ok&&y.trigger("success",t)}}))};function y(){g()}return y.page=function(e){return arguments.length?(p=e,y):p},y.perpage=function(e){return arguments.length?(u=e,y):u},y.next=function(){return p+=1,g(),y},y.prev=function(){return p-=1,g(),y},y.hasnext=function(){return h},y.hasprev=function(){return f},y.on=function(e,t){return void 0===m[e]&&(m[e]=[]),m[e].push(t),y},y.off=function(e,t){if(m[e]instanceof Array)for(var r=m[e],n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1);break}return y},y.trigger=function(e,t){return m[e]instanceof Array&&m[e].forEach((function(e){e.call(y,t)})),y},y.set=function(e,t){return d[e]=t,y},y}return a.host=function(e){return arguments.length?(s=e,a):s},a.get=function(e,t){return new c("get",e)},a.post=function(e,t){return new c("post",e,t)},a.patch=function(e,t){return new c("patch",e,t)},a.put=function(e,t){return new c("put",e,t)},a.del=function(e,t){return new c("del",e,t)},a.limit=function(){return e},a.remaining=function(){return r},a.username=function(e){return arguments.length?(n=e,a):n},a.password=function(e){return arguments.length?(o=e,a):o},a.token=function(e){return arguments.length?(i=e,a):i},a}};e.exports=n}()}).call(this,r(6))},function(e,t,r){var n=r(443),o=r(107),i="undefined"==typeof window?this:window;function s(){}var a="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function c(e){return e===Object(e)}function l(e){if(!c(e))return e;var t=[];for(var r in e)null!=e[r]&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")}function p(e){for(var t,r={},n=e.split("&"),o=0,i=n.length;o<i;++o)t=n[o].split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function u(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=function(e){var t,r,n,o,i=e.split(/\r?\n/),s={};i.pop();for(var c=0,l=i.length;c<l;++c)t=(r=i[c]).indexOf(":"),n=r.slice(0,t).toLowerCase(),o=a(r.slice(t+1)),s[n]=o;return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function d(e,t){var r=this;n.call(this),this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var t=new u(r);"HEAD"==e&&(t.text=null),r.callback(null,t)}))}function h(e,t){return"function"==typeof t?new d("GET",e).end(t):1==arguments.length?new d("GET",e):new d(e,t)}h.serializeObject=l,h.parseString=p,h.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":l,"application/json":JSON.stringify},h.parse={"application/x-www-form-urlencoded":p,"application/json":JSON.parse},u.prototype.get=function(e){return this.header[e.toLowerCase()]},u.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=t.split(/ *; */).shift();var r=function(e){return o(e.split(/ *; */),(function(e,t){var r=t.split(/ *= */),n=r.shift(),o=r.shift();return n&&o&&(e[n]=o),e}),{})}(t);for(var n in r)this[n]=r[n]},u.prototype.parseBody=function(e){var t=h.parse[this.type];return t?t(e):null},u.prototype.setStatusProperties=function(e){var t=e/100|0;this.status=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e||1223==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},u.prototype.toError=function(){var e=this.req,t=e.method,r=e.url,n="cannot "+t+" "+r+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=t,o.url=r,o},h.Response=u,n(d.prototype),d.prototype.use=function(e){return e(this),this},d.prototype.timeout=function(e){return this._timeout=e,this},d.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},d.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},d.prototype.set=function(e,t){if(c(e)){for(var r in e)this.set(r,e[r]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},d.prototype.getHeader=function(e){return this._header[e.toLowerCase()]},d.prototype.type=function(e){return this.set("Content-Type",h.types[e]||e),this},d.prototype.accept=function(e){return this.set("Accept",h.types[e]||e),this},d.prototype.auth=function(e,t){var r=btoa(e+":"+t);return this.set("Authorization","Basic "+r),this},d.prototype.query=function(e){return"string"!=typeof e&&(e=l(e)),e&&this._query.push(e),this},d.prototype.field=function(e,t){return this._formData||(this._formData=new FormData),this._formData.append(e,t),this},d.prototype.attach=function(e,t,r){return this._formData||(this._formData=new FormData),this._formData.append(e,t,r),this},d.prototype.send=function(e){var t=c(e),r=this.getHeader("Content-Type");if(t&&c(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(r||this.type("form"),r=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==r?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return t?(r||this.type("json"),this):this},d.prototype.callback=function(e,t){var r=this._callback;return 2==r.length?r(e,t):e?this.emit("error",e):void r(t)},d.prototype.crossDomainError=function(){var e=new Error("Origin is not allowed by Access-Control-Allow-Origin");e.crossDomain=!0,this.callback(e)},d.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},d.prototype.withCredentials=function(){return this._withCredentials=!0,this},d.prototype.end=function(e){var t=this,r=this.xhr=function(){if(i.XMLHttpRequest&&("file:"!=i.location.protocol||!i.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}(),n=this._query.join("&"),o=this._timeout,a=this._formData||this._data;if(this._callback=e||s,r.onreadystatechange=function(){if(4==r.readyState)return 0==r.status?t.aborted?t.timeoutError():t.crossDomainError():void t.emit("end")},r.upload&&(r.upload.onprogress=function(e){e.percent=e.loaded/e.total*100,t.emit("progress",e)}),o&&!this._timer&&(this._timer=setTimeout((function(){t.abort()}),o)),n&&(n=h.serializeObject(n),this.url+=~this.url.indexOf("?")?"&"+n:"?"+n),r.open(this.method,this.url,!0),this._withCredentials&&(r.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!function(e){switch({}.toString.call(e)){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}(a)){var c=h.serialize[this.getHeader("Content-Type")];c&&(a=c(a))}for(var l in this.header)null!=this.header[l]&&r.setRequestHeader(l,this.header[l]);return this.emit("request",this),r.send(a),this},h.Request=d,h.get=function(e,t,r){var n=h("GET",e);return"function"==typeof t&&(r=t,t=null),t&&n.query(t),r&&n.end(r),n},h.head=function(e,t,r){var n=h("HEAD",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.del=function(e,t){var r=h("DELETE",e);return t&&r.end(t),r},h.patch=function(e,t,r){var n=h("PATCH",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.post=function(e,t,r){var n=h("POST",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},h.put=function(e,t,r){var n=h("PUT",e);return"function"==typeof t&&(r=t,t=null),t&&n.send(t),r&&n.end(r),n},e.exports=h},function(e,t){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var r=this;function n(){r.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks[e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(52),t.getComponent=function(){var e;return(e=new n.Component).description="Create a GitHub tree",e.inPorts.add("tree",{datatype:"array",description:"Tree entries to create"}),e.inPorts.add("repository",{datatype:"string",description:"Repository path"}),e.inPorts.add("base",{datatype:"string",description:"Base tree to create the tree for"}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["tree","repository"],params:["token","base"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.post("/repos/".concat(t.repository,"/git/trees"),{tree:t.tree,base_tree:e.params.base})).on("success",(function(e){return n.send(e.body),i()})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(52),t.getComponent=function(){var e;return(e=new n.Component).description="Get a git blob",e.inPorts.add("repository",{datatype:"string",description:"Repository path",required:!0}),e.inPorts.add("sha",{datatype:"string",description:"Blob SHA",required:!0}),e.inPorts.add("token",{datatype:"string",description:"GitHub API token",required:!0,scoped:!1}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","sha"],params:["token"],out:"out",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a;return s=o.api(),e.params.token&&s.token(e.params.token),(a=s.get("/repos/".concat(t.repository,"/git/blobs/").concat(t.sha))).on("success",(function(e){return e.body?(n.beginGroup(t.repository),n.beginGroup(t.sha),n.send(e.body),n.endGroup(),n.endGroup(),i()):i(new Error("no result available"))})),a.on("error",(function(e){return i(e.error||e.body)})),a()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(52),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:"repository",params:["token","reference"],out:"reference",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a,c,l,p;return s=o.api(),(null!=(c=e.params)?c.token:void 0)&&s.token(e.params.token),a=(null!=(l=e.params)?l.reference:void 0)||"heads/master",(p=s.get("/repos/".concat(t,"/git/refs/").concat(a))).on("success",(function(e){if(e.body)return n.beginGroup(t),n.beginGroup(a),n.send(e.body),n.endGroup(),n.endGroup(),i();i(new Error("No result received"))})),p.on("error",(function(e){return i(e.error||e.body)})),p()}))}},function(e,t,r){"use strict";var n,o;n=r(0),o=r(52),t.getComponent=function(){var e;return(e=new n.Component).inPorts.add("repository",{datatype:"string"}),e.inPorts.add("commit",{datatype:"string",description:"Commit SHA"}),e.inPorts.add("token",{datatype:"string",required:!0,scoped:!1}),e.inPorts.add("reference",{datatype:"string",default:"heads/master",required:!0}),e.inPorts.add("force",{datatype:"boolean",default:!1,required:!0}),e.outPorts.add("reference",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),n.helpers.WirePattern(e,{in:["repository","commit"],params:["token","reference","force"],out:"reference",async:!0,forwardGroups:!0},(function(t,r,n,i){var s,a,c,l,p;return s=o.api(),e.params.token&&s.token(e.params.token),a=(null!=(c=e.params)?c.reference:void 0)||"heads/master","true"===String(null!=(l=e.params)?l.force:void 0),"refs/"===a.substr(0,5)&&(a=a.substr(5)),(p=s.patch("/repos/".concat(t.repository,"/git/refs/").concat(a),{sha:t.commit,force:!1})).on("success",(function(e){return n.send(e.body),i()})),p.on("error",(function(e){return i(e.error||e.body)})),p()}))}},function(e,t,r){"use strict";var n;n=r(0),n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Convert a Graph JSON structure into a NoFlo Graph",e.inPorts.add("in",{datatype:"object"}),e.outPorts.add("out",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.process((function(e,t){var r;if(e.hasData("in"))return r=e.getData("in"),n.graph.loadJSON(r,(function(e,n){return e?t.done(e):((r.id&&n.properties.id!==r.id||r.project&&n.properties.project!==r.project)&&n.setProperties({id:r.id,project:r.project}),t.sendDone({out:n}))}))}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Start an IndexedDB transaction",e.inPorts.add("stores",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("mode",{datatype:"string",default:"readwrite",control:!0}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.outPorts.add("complete",{datatype:"bang"}),e.forwardBrackets={stores:["transaction","db","error","complete"]},e.process((function(e,t){var r,o,i,s,a;if(e.hasData("db","stores")){i=e.hasData("mode")?e.getData("mode"):"readwrite";var c=n(e.getData("db","stores"),2);r=c[0],"string"==typeof(s=c[1])&&(s=s.split(","));try{a=r.transaction(s,i)}catch(e){return o=e,t.done(o)}return a.oncomplete=function(){return t.send({complete:!0}),a.onerror=null,a.oncomplete=null,t.done()},a.onerror=function(e){return t.done(e)},t.send({transaction:a}),t.send({db:r})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Add an index to an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("keypath",{datatype:"string"}),e.inPorts.add("unique",{datatype:"boolean",control:!0,default:!1}),e.inPorts.add("multientry",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("index",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["index","store","error"]},e.process((function(e,t){var r,o,i,s,a,c;if(e.hasData("store","name","keypath")){c=!!e.hasData("unique")&&e.getData("unique"),i=!!e.hasData("multientry")&&e.getData("multientry");var l=n(e.getData("store","name","keypath"),3);return a=l[0],s=l[1],o=l[2],a.onerror=function(e){return t.done(e)},r=a.createIndex(s,o,{unique:c,multiEntry:i}),a.onerror=null,t.sendDone({index:r,store:a})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Add an object store to an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("db",{datatype:"object"}),e.inPorts.add("keypath",{datatype:"string",control:!0}),e.inPorts.add("autoincrement",{datatype:"boolean",control:!0,default:!1}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process((function(e,t){var r,o,i,s,a;if(e.hasData("name","db")){i=e.hasData("keypath")?e.getData("keypath"):"",r=!!e.hasData("autoincrement")&&e.getData("autoincrement");var c=n(e.getData("name","db"),2);return s=c[0],(o=c[1]).transaction.onerror=function(e){return t.done(e)},a=o.createObjectStore(s,{keyPath:i,autoIncrement:r}),o.transaction.onerror=null,t.send({store:a,db:o}),t.done()}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Remove an item from an IndexedDB database",e.icon="trash",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("key",{datatype:"string"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={key:["key","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("store","key")){var s=n(e.getData("store","key"),2);return i=s[0],r=s[1],(o=i.delete(r)).onerror=function(e){return t.done(e)},o.onsuccess=function(e){return t.send({store:i,key:r}),t.done()}}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Get an object store from an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("transaction",{datatype:"object"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("transaction",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["store","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("name","transaction")){var s=n(e.getData("name","transaction"),2);return r=s[0],(i=s[1]).onerror=function(e){return t.done(e)},o=i.objectStore(r),i.onerror=null,t.sendDone({store:o,transaction:i})}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i,s;s=r(0),i=r(455),t.getComponent=function(){var e;return(e=new s.Component).description="Open an IndexedDB database",e.inPorts.add("name",{datatype:"string"}),e.inPorts.add("version",{datatype:"integer"}),e.outPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("db",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={name:["db","error"]},e.process((function(e,t){var r,o,s;if(e.hasData("name","version")){var a=n(e.getData("name","version"),2);return r=a[0],s=a[1],(o=i.open(r,parseInt(s))).onerror=function(e){return t.done(e)},o.onupgradeneeded=function(e){return t.send({upgrade:{oldVersion:e.oldVersion,newVersion:parseInt(s),db:e.target.result}})},o.onsuccess=function(e){return t.sendDone({db:e.target.result})}}}))}},function(e,t){e.exports=window.overrideIndexedDB||window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).description="Store an object into an IndexedDB store",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("value",{datatype:"all"}),e.outPorts.add("store",{datatype:"object"}),e.outPorts.add("key",{datatype:"string"}),e.outPorts.add("value",{datatype:"all"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={value:["key","value","error"]},e.process((function(e,t){var r,o,i;if(e.hasData("store","value")){var s=n(e.getData("store","value"),2);return o=s[0],i=s[1],r=o.put(i),t.send({store:o}),r.onerror=function(e){return t.done(e)},r.onsuccess=function(e){return t.sendDone({key:e.target.result,value:i})}}}))}},function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i;i=r(0),t.getComponent=function(){var e;return(e=new i.Component).icon="search",e.description="Query a store in an IndexedDB database",e.inPorts.add("store",{datatype:"object"}),e.inPorts.add("range",{datatype:"object"}),e.inPorts.add("all",{datatype:"bang"}),e.outPorts.add("item",{datatype:"all"}),e.outPorts.add("range",{datatype:"object"}),e.outPorts.add("empty",{datatype:"object"}),e.outPorts.add("error",{datatype:"object"}),e.forwardBrackets={all:["item","error"],range:["item","error"]},e.process((function(e,t){var r,o,s,a,c;if(e.hasData("store")){if(r=!1,a=function(e){var n;return(n=e.target.result)?(r||(t.send({item:new i.IP("openBracket")}),r=!0),t.send({item:n.value}),n.continue()):(r?t.send({item:new i.IP("closeBracket")}):t.send({empty:!0}),void t.done())},e.hasData("all")){var l=n(e.getData("store","all"),2);return c=l[0],l[1],(s=c.openCursor()).onerror=function(e){return t.done(e)},void(s.onsuccess=a)}if(e.hasData("range")){var p=n(e.getData("store","range"),2);return c=p[0],o=p[1],t.send({range:o}),(s=c.openCursor(o)).onerror=function(e){return t.done(e)},s.onsuccess=a}}}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).icon="code-fork",e.description="Route upgrades between IndexeDB database versions",e.inPorts.add("upgrade",{datatype:"object"}),e.outPorts.add("versions",{datatype:"object",addressable:!0}),e.outPorts.add("missed",{datatype:"object"}),e.forwardBrackets={upgrade:["versions","missed"]},e.process((function(t,r){var o,i,s;if(t.hasData("upgrade")){for(s=t.getData("upgrade"),i=!1,o=0;o<s.newVersion;)o<s.oldVersion?o++:e.outPorts.versions.isAttached(o)?(r.send({versions:new n.IP("data",s.db,{index:o})}),o++):(o++,i=!0);return i?r.sendDone({missed:s.db}):r.done()}}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen for hash changes in browser's URL bar",e.icon="slack",e.inPorts.add("start",{datatype:"bang",description:"Start listening for hash changes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for hash changes"}),e.outPorts.add("initial",{datatype:"string"}),e.outPorts.add("change",{datatype:"string"}),e.current=null,e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("hashchange",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(r){return e.current=null,t(),r()},e.forwardBrackets={},e.process((function(r,o,i){var s;if(r.hasData("start"))return r.getData("start"),t(),s=function(t){var r,i;if(r=e.current,e.current=window.location.href.split("#")[1]||"",r&&o.send({change:new n.IP("openBracket",r)}),(i={})[t]=e.current,o.send(i),r)return o.send({change:new n.IP("closeBracket",r)})},e.subscriber={callback:function(e){return s("change")},ctx:i},s("initial"),void window.addEventListener("hashchange",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),o.done())}))}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e,t;return(e=new n.Component).description="Listen to window resize events",e.icon="desktop",e.inPorts.add("start",{datatype:"bang",description:"Start listening for screen resizes"}),e.inPorts.add("stop",{datatype:"bang",description:"Stop listening for screen resizes"}),e.outPorts.add("width",{datatype:"number"}),e.outPorts.add("height",{datatype:"number"}),e.subscriber=null,t=function(){if(e.subscriber)return window.removeEventListener("resize",e.subscriber.callback,!1),e.subscriber.ctx.deactivate(),e.subscriber=null},e.tearDown=function(e){return t(),e()},e.forwardBrackets={},e.process((function(r,n,o){if(r.hasData("start"))return r.getData("start"),t(),e.subscriber={callback:function(e){return n.send({width:window.innerWidth,height:window.innerHeight})},ctx:o},n.send({width:window.innerWidth,height:window.innerHeight}),void window.addEventListener("resize",e.subscriber.callback,!1);r.hasData("stop")&&(r.getData("stop"),t(),n.done())}))}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component;return e.description="call a method on an object",e.icon="gear",e.inPorts=new n.InPorts({in:{datatype:"object",description:"Object on which a method will be called",required:!0},method:{datatype:"string",description:"Name of the method to call",required:!0,control:!0},arguments:{datatype:"all",description:"Arguments given to the method (one argument per IP)"}}),e.outPorts=new n.OutPorts({out:{datatype:"all",description:"Value returned by the method call",required:!0},error:{datatype:"object"}}),e.process((e,t)=>{if(!e.hasData("method","in"))return;if(e.attached("arguments").length>0&&!e.hasData("arguments"))return;let r=[];const n=e.getStream("arguments").filter(e=>"data"===e.type&&null!=e.data).map(e=>e.data);r=r.concat(n);const o=e.getData("in"),i=e.getData("method");o[i]?t.sendDone({out:o[i].apply(o,r)}):t.sendDone(new Error(`Method '${i}' not available`))})}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component({description:"Create an empty object"});return e.inPorts=new n.InPorts({start:{datatype:"bang",description:"Signal to create a new object"}}),e.outPorts=new n.OutPorts({out:{datatype:"object",description:"A new empty object"}}),e.forwardBrackets={start:["out"]},e.process((e,t)=>{e.hasData("start")&&(e.getData("start"),t.sendDone({out:{}}))})}},function(e,t,r){const n=r(0);t.getComponent=function(){const e=new n.Component;return e.icon="indent",e.inPorts=new n.InPorts({in:{datatype:"object",description:"Object to get keys from",required:!0},key:{datatype:"string",description:"Keys to extract from the object (one key per IP)",required:!0},sendgroup:{datatype:"boolean",description:"true to send keys as groups around value IPs, false otherwise",control:!0,default:!1}}),e.outPorts=new n.OutPorts({out:{datatype:"all",description:"Values extracts from the input object given the input keys (one value per IP, potentially grouped using the key names)"},object:{datatype:"object",description:"Object forwarded from input if at least one property matches the input keys"},missed:{datatype:"object",description:"Object forwarded from input if no property matches the input keys"}}),e.process((e,t)=>{if(!e.hasData("in"))return;if(!e.hasStream("key"))return;if(e.attached("sendgroup").length>0&&!e.hasData("sendgroup"))return;const r=e.getStream("key").filter(e=>"data"===e.type).map(e=>e.data),o=e.getData("in");let i=e.getData("sendgroup");i="true"===i||!0===i,"object"==typeof o?null!==o?(r.forEach(e=>{void 0===o[e]&&(i&&t.send({missed:new n.IP("openBracket",e)}),t.send({missed:new n.IP("data",o)}),i&&t.send({missed:new n.IP("closeBracket",e)})),i&&t.send({out:new n.IP("openBracket",e)}),t.send({out:new n.IP("data",o[e])}),i&&t.send({out:new n.IP("closeBracket",e)})}),t.send({object:new n.IP("data",o)}),t.done()):t.sendDone(new Error("Data is NULL")):t.sendDone(new Error("Data is not an object"))})}},function(e,t,r){"use strict";var n;n=r(0),t.getComponent=function(){var e;return(e=new n.Component).description="Send a string when receiving a packet",e.inPorts.add("string",{datatype:"string",description:"String to send",control:!0}),e.inPorts.add("in",{datatype:"bang",description:"Send the string out"}),e.outPorts.add("out",{datatype:"string"}),e.process((function(e,t){if(e.has("string","in"))return e.getData("in"),t.sendDone({out:e.getData("string")})}))}},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p;p=r(0),l=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,t);var r,a,c,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this)).metadata=e,t.network=null,t.ready=!0,t.started=!1,t.starting=!1,t.baseDir=null,t.loader=null,t.load=0,t.inPorts=new p.InPorts({graph:{datatype:"all",description:"NoFlo graph definition to be used with the subgraph component",required:!0}}),t.outPorts=new p.OutPorts,t.inPorts.graph.on("ip",(function(e){if("data"===e.type)return t.setGraph(e.data,(function(e){if(e)return t.error(e)}))})),t}return r=u,(a=[{key:"setGraph",value:function(t,r){var o=this;return this.ready=!1,"object"===n(t)?"function"==typeof t.addNode?void this.createNetwork(t,r):void p.graph.loadJSON(t,(function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))})):("/"!==t.substr(0,1)&&":"!==t.substr(1,1)&&e&&e.cwd&&(t="".concat(e.cwd(),"/").concat(t)),p.graph.loadFile(t,(function(e,t){return e?r(e):(t.baseDir=o.baseDir,o.createNetwork(t,r))})))}},{key:"createNetwork",value:function(e,t){var r=this;return this.description=e.properties.description||"",this.icon=e.properties.icon||this.icon,e.name||(e.name=this.nodeId),e.componentLoader=this.loader,p.createNetwork(e,(function(e,n){return r.network=n,e?t(e):(r.emit("network",r.network),r.subscribeNetwork(r.network),r.network.connect((function(e){var n,o,i;if(e)return t(e);for(n in i=r.network.processes)o=i[n],r.findEdgePorts(n,o);return r.setToReady(),t()})))}),!0)}},{key:"subscribeNetwork",value:function(e){var t,r=this;return t=[],this.network.on("start",(function(){var e;return e={},t.push(e),r.activate(e)})),this.network.on("end",(function(){var e;if(e=t.pop())return r.deactivate(e)}))}},{key:"isExportedInport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.inports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"isExportedOutport",value:function(e,t,r){var n,o,i;for(o in i=this.network.graph.outports)if((n=i[o]).process===t&&n.port===r)return o;return!1}},{key:"setToReady",value:function(){var t=this;return void 0!==e&&e.execPath&&-1!==e.execPath.indexOf("node")?e.nextTick((function(){return t.ready=!0,t.emit("ready")})):setTimeout((function(){return t.ready=!0,t.emit("ready")}),0)}},{key:"findEdgePorts",value:function(e,t){var r,n,o,i,s,a=this;for(i in r=t.component.inPorts.ports,n=t.component.outPorts.ports,r)o=r[i],!1!==(s=this.isExportedInport(o,e,i))&&(this.inPorts.add(s,o),this.inPorts[s].on("connect",(function(){if(!a.starting&&!a.network.isStarted()){if(!a.network.startupDate)return a.setUp((function(){}));a.network.setStarted(!0)}})));for(i in n)o=n[i],!1!==(s=this.isExportedOutport(o,e,i))&&this.outPorts.add(s,o);return!0}},{key:"isReady",value:function(){return this.ready}},{key:"isSubgraph",value:function(){return!0}},{key:"isLegacy",value:function(){return!1}},{key:"setUp",value:function(e){var t=this;if(this.starting=!0,this.isReady())return this.network?this.network.start((function(r){return r?e(r):(t.starting=!1,e())})):e(null);this.once("ready",(function(){return t.setUp(e)}))}},{key:"tearDown",value:function(e){return this.starting=!1,this.network?this.network.stop((function(t){return t?e(t):e()})):e(null)}}])&&o(r.prototype,a),c&&o(r,c),u}(p.Component),t.getComponent=function(e){return new l(e)}}).call(this,r(6))},function(e,t,r){const n=r(467);e.exports=(e,t)=>{const r=document.querySelectorAll("noflo-polymer");return[].forEach.call(r,t=>{((e,t)=>{const r=t.getAttribute("name"),o=t.getAttribute("inports");let i=[];o&&(i=o.split(" "));const s=t.getAttribute("outports");let a=[];s&&(a=s.split(" "));const c=n(r,i,a);e.registerComponent("polymer",r,c)})(e,t)}),t(null)}},function(e,t,r){const n=r(0);e.exports=(e,t,r)=>()=>{const o=new n.Component;return o.inPorts.add("selector",{datatype:"string",description:"DOM selector for getting the element"}),o.inPorts.add("element",{datatype:"object",description:"Existing Polymer element instance"}),o.inPorts.add("event",{datatype:"string",description:"Fire an event on polymer element"}),o.outPorts.add("element",{datatype:"object"}),o.outPorts.add("error",{datatype:"object"}),t.forEach(e=>{o.inPorts.add(e,{datatype:"all"})}),r.forEach(e=>{o.outPorts.add(e,{datatype:"all"})}),o.setUp=e=>{o.element=null,o.ctx=null,o.eventHandlers={},e()},o.tearDown=t=>{o.element&&(r.forEach(t=>{"element"!==e&&o.eventHandlers[t]&&o.element.removeEventListener(t,o.eventHandlers[t],!1)}),o.originalFire&&(o.element.fire=o.originalFire,delete o.originalFire),o.element=null,o.eventHandlers={}),o.ctx&&(o.ctx.deactivate(),o.ctx=null),t()},o.bindToElement=(t,n,i)=>{"object"==typeof t?t.tagName===e.toUpperCase()?o.element?n.done(new Error(o.nodeId+" is already bound to an element. Rebinding not allowed")):(o.element=t,o.ctx=i,n.send({element:t}),r.forEach(e=>{if("element"!==e)if("event"!==e)o.eventHandlers[e]=t=>{const r={};r[e]=t.detail,n.send(r)},t.addEventListener(e,o.eventHandlers[e],!1);else{o.originalFire=t.dispatchEvent.bind(t);t.dispatchEvent=e=>{if(-1!==r.indexOf(e.type))return void o.originalFire(e);if(-1!==e.type.indexOf("-changed"))return void o.originalFire(e);const t=e.detail&&e.detail.value?e.detail.value:e.detail;n.send({event:{action:e.type,payload:t}}),o.originalFire(e)}}}),o.element.dispatchEvent(new CustomEvent("noflo:ready",{detail:!0}))):n.done(new Error(`${o.nodeId} received a ${t.tagName} element instead of ${e.toUpperCase()}`)):n.done(new Error(o.nodeId+" received an element that is not an object"))},o.process((e,r,n)=>{if(e.hasData("element")){const t=e.getData("element");return void o.bindToElement(t,r,n)}if(e.hasData("selector")){const t=e.getData("selector"),i=document.querySelector(t);return i?void o.bindToElement(i,r,n):void r.done(new Error(`No element matching '${t}' found`))}if(!o.element)return;let i=!1;if(e.hasData("event")){i=!0;const t=e.getData("event");o.element.fire(e.getData(t))}t.forEach(t=>{if(e.hasData(t)){if("function"==typeof o.element[t])return i=!0,void o.element[t](e.getData(t));if(Array.isArray(o.element[t])){if(!e.hasStream(t))return;i=!0;const r=e.getStream(t).filter(e=>"data"===e.type).map(e=>e.data);o.element.set(t,r)}else i=!0,o.element.set(t,e.getData(t))}}),i&&r.done()}),o}},function(e,t,r){"use strict";e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){if(s.enabled){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;l++;var o=n.formatters[r];if("function"==typeof o){var s=t[l];e=o.call(i,s),t.splice(l,1),l--}return e})),n.formatArgs.call(i,t);var p=i.log||n.log;p.apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(114),Object.keys(e).forEach((function(t){n[t]=e[t]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){(function(e){var n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E={}.hasOwnProperty;o=r(57),n=r(33),f=r(58),k=r(146),l=r(68)("noflo:helpers"),t.WirePattern=function(t,r,n){var o,s,a;if(o="in"in r?r.in:"in",k.isArray(o)||(o=[o]),s="out"in r?r.out:"out",k.isArray(s)||(s=[s]),"error"in r||(r.error="error"),"async"in r||(r.async=!1),"ordered"in r||(r.ordered=!0),"group"in r||(r.group=!1),"field"in r||(r.field=null),"forwardGroups"in r||(r.forwardGroups=!1),r.forwardGroups&&("string"==typeof r.forwardGroups&&(r.forwardGroups=[r.forwardGroups]),"boolean"==typeof r.forwardGroups&&(r.forwardGroups=o)),"receiveStreams"in r||(r.receiveStreams=!1),r.receiveStreams)throw new Error("WirePattern receiveStreams is deprecated");if("sendStreams"in r||(r.sendStreams=!1),r.sendStreams)throw new Error("WirePattern sendStreams is deprecated");return r.async&&(r.sendStreams=s),"params"in r||(r.params=[]),"string"==typeof r.params&&(r.params=[r.params]),"name"in r||(r.name=""),"dropInput"in r||(r.dropInput=!1),"arrayPolicy"in r||(r.arrayPolicy={in:"any",params:"all"}),r.inPorts=o,r.outPorts=s,i(r,n),(r.legacy||(null!=e&&null!=(a=e.env)?a.NOFLO_WIREPATTERN_LEGACY:void 0))&&f.deprecated("noflo.helpers.WirePattern legacy mode is deprecated"),g(t,r,n)},g=function(e,t,r){return b(e,t),x(e),v(e,t),e.ordered=t.ordered,e.process((function(n,o,i){var a,c,h,f,g,y;if(s(t,n,o))return e.params=m(t,n),a=u(t,n),h=p(e,t.inPorts[0],n),f=d(t.outPorts,o),l("WirePattern Process API call with",a,h,e.params,i.scope),g=function(){throw new Error("noflo.helpers.WirePattern postpone is deprecated")},y=function(){throw new Error("noflo.helpers.WirePattern resume is deprecated")},c=w(e,t,o),r.call(e,a,h,f,(function(e){return c(),o.done(e)}),g,y,n.scope)}))},i=function(e,t){if(e.group&&f.deprecated("noflo.helpers.WirePattern group option is deprecated. Please port to Process API"),e.field&&f.deprecated("noflo.helpers.WirePattern field option is deprecated. Please port to Process API"),t.length>4&&f.deprecated("noflo.helpers.WirePattern postpone and resume are deprecated. Please port to Process API"),!e.async)throw new Error("noflo.helpers.WirePattern synchronous is deprecated. Please use async: true");if(t.length<4)throw new Error("noflo.helpers.WirePattern callback doesn't use callback argument");"error"!==e.error&&f.deprecated('noflo.helpers.WirePattern custom error port name is deprecated. Please switch to "error" or port to WirePattern')},b=function(e,t){var r,n,o,i,s;for(s=[],r=0,n=(i=t.params).length;r<n;r++)o=i[r],s.push(e.inPorts[o].options.control=!0);return s},v=function(e,t){var r,n,o,i,s,a,c,l;if(e.forwardBrackets={},t.forwardGroups)for(o=t.inPorts,k.isArray(t.forwardGroups)&&(o=t.forwardGroups),r=0,s=o.length;r<s;r++){for(n=o[r],e.forwardBrackets[n]=[],i=0,a=(l=t.outPorts).length;i<a;i++)c=l[i],e.forwardBrackets[n].push(c);e.outPorts.error&&e.forwardBrackets[n].push("error")}},w=function(e,t,r){var o,i,s,a;return i=[],o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern error method is deprecated. Please send error to callback instead"),i.push({err:t,groups:r}),e.hasErrors=!0},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f.deprecated("noflo.helpers.WirePattern fail method is deprecated. Please send error to callback instead"),e&&o(e,t),a(),r.done()},a=function(){if(i.length)return t.name&&r.sendIP("error",new n("openBracket",t.name)),i.forEach((function(e){var t,o,i,s,a,c,l,p;for(o=0,s=(c=e.groups).length;o<s;o++)t=c[o],r.sendIP("error",new n("openBracket",t));for(r.sendIP("error",new n("data",e.err)),p=[],i=0,a=(l=e.groups).length;i<a;i++)t=l[i],p.push(r.sendIP("error",new n("closeBracket",t)));return p})),t.name&&r.sendIP("error",new n("closeBracket",t.name)),e.hasErrors=!1,i=[]},e.hasErrors=!1,e.error=o,e.fail=s,a},x=function(e){var t;return t=Object.keys(e.inPorts.ports).filter((function(t){return!!e.inPorts[t].options.control&&!!e.inPorts[t].hasDefault()})),e.sendDefaults=function(){return f.deprecated("noflo.helpers.WirePattern sendDefaults method is deprecated. Please start with a Network"),t.forEach((function(t){var r;return r=o.createSocket(),e.inPorts[t].attach(r),r.send(),r.disconnect(),e.inPorts[t].detach(r)}))}},m=function(e,t){var r,n,o,i,s,a,c,l,p;if(!e.params.length)return{};for(c={},r=0,i=(l=e.params).length;r<i;r++)if(a=l[r],t.ports[a].isAddressable())for(c[a]={},o=0,s=(p=t.attached(a)).length;o<s;o++)n=p[o],t.hasData([a,n])&&(c[a][n]=t.getData([a,n]));else c[a]=t.getData(a);return c},y=function(e,t){var r,n,o,i,s,a,c,l,p,u,d;for(p=null,r=[],u=[],o=n=0,a=e.length;n<a;o=++n)if("openBracket"!==(i=e[o]).type){if("closeBracket"!==i.type)t(i,r)?(p=u.slice(0)).push(i):u=[];else if(r.pop(),p&&p.push(i),u.length&&u.pop(),p&&!u.length)break}else r.push(i.data),u.push(i);if(0!==(d=e.indexOf(p[0]))){for(e.splice(d,p.length),p.reverse(),l=[],s=0,c=p.length;s<c;s++)i=p[s],l.push(e.unshift(i));return l}},h=function(e,t,r,n,o){var i;if(t.group||t.field)return t.group&&(i=r.ports[n].getBuffer(r.scope,o),y(i,(function(e,t){var n,i,s,a;for(a=r.collatedBy.brackets,o=i=0,s=a.length;i<s;o=++i)if(n=a[o],t[o]!==n)return!1;return!0}))),t.field?(e[t.field]=r.collatedBy.field,i=r.ports[n].getBuffer(r.scope,o),y(i,(function(r){return r.data[t.field]===e[t.field]}))):void 0},u=function(e,t){var r,n,o,i,s,a,c,l,p;for(r={},n=0,s=(l=e.inPorts).length;n<s;n++)if(c=l[n],t.ports[c].isAddressable())for(r[c]={},i=0,a=(p=t.attached(c)).length;i<a;i++)o=p[i],t.hasData([c,o])&&(h(r,e,t,c,o),r[c][o]=t.getData([c,o]));else t.hasData(c)&&(h(r,e,t,c),r[c]=t.getData(c));return 1===e.inPorts.length?r[e.inPorts[0]]:r},p=function(e,t,r){var n,o;return null==(null!=(n=r.result.__bracketContext)?n[t]:void 0)?[]:(null!=(o=r.collatedBy)?o.brackets:void 0)?r.collatedBy.brackets:r.result.__bracketContext[t].filter((function(e){return e.source===t})).map((function(e){return e.ip.data}))},d=function(e,t){var r;return r={},e.forEach((function(e){return r[e]={connect:function(){},beginGroup:function(r,o){var i;return(i=new n("openBracket",r)).index=o,t.sendIP(e,i)},send:function(r,o){var i;return(i=new n("data",r)).index=o,t.sendIP(e,i)},endGroup:function(r,o){var i;return(i=new n("closeBracket",r)).index=o,t.sendIP(e,i)},disconnect:function(){}}})),1===e.length?r[e[0]]:r},s=function(e,t,r){var n,o,i,s,l,p,u,d,h,f,m;if(h=c(e,t),s=a(e,t),e.dropInput&&!h){for(d=!1,o=0,p=(m=e.inPorts).length;o<p;o++)if(f=m[o],t.ports[f].isAddressable()){if(!(n=t.attached(f)).length)continue;for(l=0,u=n.length;l<u;l++)for(i=n[l];t.has([f,i]);)d=!0,t.get([f,i]).drop()}else for(;t.has(f);)d=!0,t.get(f).drop();d&&r.done()}return s&&h},c=function(e,t){var r,n,o,i,s,a;for(n=0,o=(s=e.params).length;n<o;n++)if(i=s[n],t.ports[i].isRequired())if(t.ports[i].isAddressable()){if(!(r=t.attached(i)).length)return!1;if(a=r.filter((function(e){return t.hasData([i,e])})),"all"===e.arrayPolicy.params){if(a.length!==r.length)return!1;continue}if(!a.length)return!1}else if(!t.hasData(i))return!1;return!0},a=function(e,t){var r,n,o,i,s,a,c,l,p,u;for(e.group&&(n={},t.collatedBy={brackets:[],ready:!1},o=function(e,t){var r,n,o,i;for(o=n=0,i=e.length;n<i;o=++n)if(r=e[o],t[o]!==r)return!1;return!0},i=function(r,i){var s,a;if(a=i.slice(0),e.group instanceof RegExp){if(!(a=a.slice(0,1)).length)return!1;if(!e.group.test(a[0]))return!1}return t.collatedBy.ready?o(t.collatedBy.brackets,a):(s=a.join(":"),n[s]||(n[s]=[]),-1===n[s].indexOf(l)&&n[s].push(l),e.inPorts.indexOf(l)!==e.inPorts.length-1||n[s].length===e.inPorts.length&&(!t.collatedBy.ready&&(t.collatedBy.ready=!0,t.collatedBy.brackets=a,!0)))}),e.field&&(t.collatedBy={field:void 0,ready:!1}),s=function(r){var n,o,s,a,c,l,p;if(!e.group&&!e.field)return t.hasData(r);if(e.group){for(p=[],[],s=!1,a=0,l=(n=t.ports[r].getBuffer(t.scope)).length;a<l;a++)if("openBracket"!==(c=n[a]).type)if("closeBracket"!==c.type)o=i(c,p);else{if(p.pop(),p.length)continue;if(!o)continue;s=!0}else p.push(c.data);return s}return e.field?t.hasStream(r,(function(r){return t.collatedBy.ready?r.data[e.field]===t.collatedBy.field:(t.collatedBy.field=r.data[e.field],t.collatedBy.ready=!0,!0)})):void 0},a=0,c=(p=e.inPorts).length;a<c;a++)if(l=p[a],t.ports[l].isAddressable()){if(!(r=t.attached(l)).length)return!1;if(u=r.filter((function(e){return s([l,e])})),"all"===e.arrayPolicy.in){if(u.length!==r.length)return!1;continue}if(!u.length)return!1}else if(!s(l))return!1;return!0},t.CustomError=function(e,r){var n;return n=new Error(e),t.CustomizeError(n,r)},t.CustomizeError=function(e,t){var r,n;for(r in t)E.call(t,r)&&(n=t[r],e[r]=n);return e}}).call(this,r(6))},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i,s,a,c,l,p,u,d,h,f,m;o=r(79).ComponentLoader,a=r(105).Network,s=r(33),l=r(57),i=r(56).Graph,p=function(t,r){return t||(t={}),t.name||(t.name=r),t.loader&&(t.baseDir=t.loader.baseDir),!t.baseDir&&e&&e.cwd&&(t.baseDir=e.cwd()),t.loader||(t.loader=new o(t.baseDir)),t.raw||(t.raw=!1),t},h=function(e,t,r){var o;return"object"===n(e)?(e.componentLoader=t.loader,void(o=new a(e,t)).connect((function(e){return e?r(e):r(null,o)}))):t.loader.load(e,(function(n,s){var c,l,p,u,d;if(n)return r(n);for(d in c=new i(t.name),p=t.name,c.addNode(p,e),l=s.inPorts.ports,u=s.outPorts.ports,l)l[d],c.addInport(d,p,d);for(d in u)u[d],c.addOutport(d,p,d);return c.componentLoader=t.loader,(o=new a(c,t)).connect((function(e){return e?r(e):r(null,o)}))}))},f=function(e,t,r,n){var o,i,a,c;return Object.keys(e.graph.inports),o={},c=[],i=Object.keys(e.graph.outports),a={},i.forEach((function(t){var r,n;return r=e.graph.outports[t],n=e.getNode(r.process),a[t]=l.createSocket(),n.component.outPorts[r.port].attach(a[t]),a[t].from={process:n,port:r.port},a[t].on("ip",(function(e){var r;return(r={})[t]=e,c.push(r)}))})),e.once("end",(function(){var e,t;for(e in a)(t=a[e]).from.process.component.outPorts[t.from.port].detach(t);return a={},o={},n(null,c)})),e.start((function(r){var i,a,c,p,u,d,h,f;if(r)return n(r);for(h=[],i=0,c=t.length;i<c;i++)a=t[i],h.push(function(){var t;for(p in t=[],a)f=a[p],o[p]||(u=e.graph.inports[p],d=e.getNode(u.process),o[p]=l.createSocket(),d.component.inPorts[u.port].attach(o[p])),s.isIP(f)?o[p].post(f):t.push(o[p].post(new s("data",f)));return t}());return h}))},c=function(e,t){var r;if("object"!==n(e))return"simple";if(Array.isArray(e))return e.filter((function(e){return"map"===c(e,t)})).length===e.length?"sequence":"simple";if(!Object.keys(e).length)return"simple";for(r in e)if(e[r],!t.graph.inports[r])return"simple";return"map"},d=function(e,t,r){var n,o;return"sequence"===t?e:"map"===t?[e]:(n=Object.keys(r.graph.inports)[0],r.graph.inports.in&&(n="in"),(o={})[n]=e,[o])},u=function(e,t){var r,n,o,i,s,a;if(t.raw)return e;for(s=null,r=a=[],n=0,o=e.length;n<o;n++)"openBracket"===(i=e[n]).type&&(s=r,r=[],s.push(r)),"data"===i.type&&r.push(i.data),"closeBracket"===i.type&&(r=s);return 1===a.length?a[0]:a},m=function(e,t,r,n){var o,i,s,a,c,l,p,d,h,f,m;if((o=e.filter((function(e){return null!=e.error})).map((function(e){return e.error}))).length)return n(u(o,r));if("sequence"===t)return n(null,e.map((function(e){var t,n,o;for(t in n={},e)o=e[t],r.raw?n[t]=o:n[t]=u([o],r);return n})));for(l={},i=0,a=e.length;i<a;i++)for(s in c=e[i])f=c[s],l[s]||(l[s]=[]),l[s].push(f);if(0===(m=Object.keys(l).filter((function(e){return l[e].length>0}))).length)return n(null);if(1===m.length&&"simple"===t)return n(null,u(l[m[0]],r));for(d in h={},l)p=l[d],h[d]=u(p,r);return n(null,h)},t.asCallback=function(e,t){return t=p(t,e),function(r,n){return h(e,t,(function(e,o){var i,s;return e?n(e):(s=c(r,o),i=d(r,s,o),f(o,i,0,(function(e,r){return e?n(e):m(r,s,t,n)})))}))}}}).call(this,r(6))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,i;i=r(472);var s=r(147);o=s.Component,t.asComponent=function(e,t){var r,s,a,c,l,p,u;for(s=!1,p=i(e).filter((function(e){return"callback"!==e.param||(s=!0,!1)})),r=new o(t),a=0,c=p.length;a<c;a++)u={required:!0},void 0!==(l=p[a]).default&&(u.default=l.default,u.required=!1),r.inPorts.add(l.param,u),r.forwardBrackets[l.param]=["out","error"];return p.length||r.inPorts.add("in",{datatype:"bang"}),r.outPorts.add("out"),r.outPorts.add("error"),r.process((function(t,r){var o,i,a,c;if(p.length){for(o=0,i=p.length;o<i;o++)if(l=p[o],!t.hasData(l.param))return;c=p.map((function(e){return t.getData(e.param)}))}else{if(!t.hasData("in"))return;t.getData("in"),c=[]}return s?(c.push((function(e,t){return e?r.done(e):r.sendDone(t)})),void(a=e.apply(null,c))):(a=e.apply(null,c))&&"object"===n(a)&&"function"==typeof a.then?void a.then((function(e){return r.sendDone(e)}),(function(e){return r.done(e)})):r.sendDone(a)})),r}},function(e,t,r){var n=r(152),o=r(473),i=r(474),s=r(475);e.exports=function(e){var t=[],r=e.toString().replace(/\/\*.*?\*\//g,"");r=o(t,r);var a=i(t,r,n.prePatterns).replace(/\n/g,"").replace(/\s*async\s*/,"").match(/(?:function\s*\((.*?)\)|\((.*?)\))|(.*?)\s*=>/);return a=a[1]||a[2]||a[3]||"",i(t,a,n.postPatterns).split(",").filter((function(e){return e})).map((function(e){var r=(e=s(t,e,!0)).split("="),n={param:r[0].trim()};return r[1]&&(n.default=s(t,r.slice(1).join("="))),n}))}},function(e,t,r){var n=r(152).stringPatterns,o=r(92);e.exports=function(e,t){for(;;){var r=n.reduce((function(e,r){return e.concat(t.match(r)||[])}),[]).sort((function(e,t){return e.length-t.length}))[0];if(!r)return t;t=t.replace(r,o(e.push(r)))}}},function(e,t,r){var n=r(92);e.exports=function(e,t,r){return r.forEach((function(r){for(;r.test(t);){var o=r.exec(t)[0];t=t.replace(o,n(e.push(o)))}})),t}},function(module,exports,__webpack_require__){var delim=__webpack_require__(92);module.exports=function(cache,string,skipEval){for(var pattern=/:~:(\d+?):~:/;pattern.test(string);){var id=pattern.exec(string)[1];string=string.replace(delim(id),cache[id-1])}return skipEval?string:eval("("+string+")")}},function(e,t,r){e.exports={postMessage:r(93),iframe:r(496),opener:r(497)}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p,u,d,h,f,m;d=r(0),l=r(11).EventEmitter,m=function(e,t,r){var n;switch(n=d.internalSocket.createSocket(),e.attach(n),t){case"begingroup":n.beginGroup(r);break;case"endgroup":n.endGroup(r);break;case"data":n.send(r)}return e.detach(n)},u=function(e,t,r){var n,o,i;if(e.graph&&(null!=(o=r?e.graph.inports[t]:e.graph.outports[t])?o.process:void 0)&&(n=null!=(i=e.getNode(o.process))?i.component:void 0))return r?n.inPorts[o.port]:n.outPorts[o.port]},h=function(e,t,r,n){var o,i,s,a;return o={id:e,type:"all",description:null!=(s=t.metadata)?s.description:void 0,addressable:!1,required:!1},(i=u(r,e,n))?(o.type=i.getDataType()||"all",("function"==typeof i.getSchema?i.getSchema():void 0)&&(o.schema=i.getSchema()),o.description=(null!=(a=t.metadata)?a.description:void 0)||i.getDescription()||"",o.addressable=i.isAddressable(),o.required=i.isRequired(),o):o},f=function(e,t){var r,n,o,i,s;if(n={graph:e,inPorts:[],outPorts:[]},!(null!=t?t.graph:void 0))return n;for(o in i=t.graph.inports)r=i[o],n.inPorts.push(h(o,r,t,!0));for(o in s=t.graph.outports)r=s[o],n.outPorts.push(h(o,r,t,!1));return n},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.outputSockets={},t.mainGraph=null,t.transport.network.on("addnetwork",(function(e,r){return t.subscribeExportedPorts(r,e,!0),t.subscribeOutPorts(r,e),t.sendPorts(r,e),e.isStarted()&&t.subscribeOutdata(r,e,!0),e.on("start",(function(){return t.subscribeOutdata(r,e,!0)}))})),t.transport.network.on("removenetwork",(function(e,r){return t.subscribeOutdata(r,e,!1),t.subscribeOutPorts(r,e),t.subscribeExportedPorts(r,e.graph,!1),t.sendPorts(r,null)})),t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("runtime",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("runtime",e,t)}},{key:"sendError",value:function(e,t){return this.send("error",new Error(e),t)}},{key:"receive",value:function(e,t,r){var n=this;switch(e){case"getruntime":return this.getRuntime(t,r);case"packet":return this.sendPacket(t,(function(e){e?n.sendError(e.message,r):n.send("packetsent",{port:t.port,event:t.event,graph:t.graph,payload:t.payload},r)}));default:return this.send("error",new Error("runtime:".concat(e," not supported")),r)}}},{key:"getRuntime",value:function(e,t){var r,n,o,i,s,a,c,l=this;for(n in(c=this.transport.options.type)||(c=d.isBrowser()?"noflo-browser":"noflo-nodejs"),i=(r=this.transport.options.capabilities).filter((function(t){return l.transport.canDo(t,e.secret)})),e={type:c,version:this.transport.version,capabilities:i,allCapabilities:r},this.mainGraph&&(e.graph=this.mainGraph),this.transport.options.id&&(e.id=this.transport.options.id),this.transport.options.label&&(e.label=this.transport.options.label),this.transport.options.namespace&&(e.namespace=this.transport.options.namespace),this.transport.options.repository&&(e.repository=this.transport.options.repository),this.transport.options.repositoryVersion&&(e.repositoryVersion=this.transport.options.repositoryVersion),this.send("runtime",e,t),a=[],s=this.transport.network.networks)o=s[n],a.push(this.sendPorts(n,o,t));return a}},{key:"sendPorts",value:function(e,t,r){var n;return n=f(e,t),this.emit("ports",n),r?this.send("ports",n,r):this.sendAll("ports",n)}},{key:"setMainGraph",value:function(e){return this.mainGraph=e}},{key:"subscribeExportedPorts",value:function(e,t,r){var n,o,i,s,a,c,l,p,u=this;for(p=function(){return u.sendPorts(e,t)},i=0,a=(o=["addInport","addOutport","removeInport","removeOutport"]).length;i<a;i++)n=o[i],t.graph.removeListener(n,p);if(r){for(l=[],s=0,c=o.length;s<c;s++)n=o[s],l.push(t.graph.on(n,p));return l}}},{key:"subscribeOutPorts",value:function(e,t,r){var n,o,i,s=this;if(i=function(){return s.subscribeOutdata(e,t,!1)},o=function(){return s.subscribeOutdata(e,t,!0)},(n=t.graph).removeListener("addOutport",o),n.removeListener("removeOutport",i),r)return n.on("addOutport",o),n.on("removeOutport",i)}},{key:"subscribeOutdata",value:function(e,t,r){var n,o,i,s,a,c,l=this;for(a in this.outputSockets[e]||(this.outputSockets[e]={}),o=this.outputSockets[e])for(c=o[a],i=0,s=events.length;i<s;i++)n=events[i],c.removeAllListeners(n);if(o={},r)return Object.keys(t.graph.outports).forEach((function(r){var i,s;if(s=t.graph.outports[r],c=d.internalSocket.createSocket(),o[r]=c,!(null!=(i=t.processes[s.process].component)?i.outPorts[s.port]:void 0))throw new Error("Exported outport ".concat(s.port," in node ").concat(s.process," not found"));return i.outPorts[s.port].attach(c),c.on("ip",(function(t){switch(t.type){case"openBracket":n="begingroup";break;case"closeBracket":n="endgroup";break;default:n=t.type}return l.emit("packet",{port:r,event:n,graph:e,payload:t.data}),l.sendAll("packet",{port:r,event:n,graph:e,payload:t.data})}))}))}},{key:"sendPacket",value:function(e,t){var r,n;return(r=this.transport.network.networks[e.graph])?(n=u(r.network,e.port,!0))?(m(n,e.event,e.payload),t()):t(new Error("Cannot find internal port for ".concat(e.port))):t(new Error("Cannot find network for graph ".concat(e.graph)))}}])&&o(t.prototype,r),n&&o(t,n),c}(l),e.exports=p},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p;p=r(0),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.graphs={},t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("graph",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("graph",e,t)}},{key:"receive",value:function(e,t,r){var n;if("clear"===e||(n=this.resolveGraph(t,r)))switch(e){case"clear":return this.initGraph(t,r);case"addnode":return this.addNode(n,t,r);case"removenode":return this.removeNode(n,t,r);case"renamenode":return this.renameNode(n,t,r);case"changenode":return this.changeNode(n,t,r);case"addedge":return this.addEdge(n,t,r);case"removeedge":return this.removeEdge(n,t,r);case"changeedge":return this.changeEdge(n,t,r);case"addinitial":return this.addInitial(n,t,r);case"removeinitial":return this.removeInitial(n,t,r);case"addinport":return this.addInport(n,t,r);case"removeinport":return this.removeInport(n,t,r);case"renameinport":return this.renameInport(n,t,r);case"addoutport":return this.addOutport(n,t,r);case"removeoutport":return this.removeOutport(n,t,r);case"renameoutport":return this.renameOutport(n,t,r);case"addgroup":return this.addGroup(n,t,r);case"removegroup":return this.removeGroup(n,t,r);case"renamegroup":return this.renameGroup(n,t,r);case"changegroup":return this.changeGroup(n,t,r);default:return this.send("error",new Error("graph:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.graphs[e.graph])return this.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"getLoader",value:function(e){return this.transport.component.getLoader(e,this.transport.options)}},{key:"sendGraph",value:function(e,t,r){var n;return n={graph:e,description:t.toJSON()},this.send("graph",n,r)}},{key:"initGraph",value:function(e,t){var r,n;if(e.id)return e.name||(e.name="NoFlo runtime"),n=new p.Graph(e.name),r=e.id,e.library&&(e.library=e.library.replace("noflo-",""),n.properties.library=e.library,r="".concat(e.library,"/").concat(r)),e.icon&&(n.properties.icon=e.icon),e.description&&(n.properties.description=e.description),n.baseDir=this.transport.options.baseDir,this.subscribeGraph(e.id,n,t),e.main?this.transport.runtime.setMainGraph(r,n,t):this.transport.component.registerGraph(r,n,t),this.graphs[e.id]=n,this.sendAll("clear",{id:e.id,name:e.name,library:e.library,main:e.main,icon:e.icon,description:e.description},t);this.send("error",new Error("No graph ID provided"),t)}},{key:"registerGraph",value:function(e,t){return"default/main"===e&&this.transport.runtime.setMainGraph(e,t),this.subscribeGraph(e,t,""),this.graphs[e]=t}},{key:"subscribeGraph",value:function(e,t,r){var n=this;return t.on("addNode",(function(t){return t.graph=e,n.sendAll("addnode",t,r)})),t.on("removeNode",(function(t){var o;return o={id:t.id,graph:e},n.sendAll("removenode",o,r)})),t.on("renameNode",(function(t,o){return n.sendAll("renamenode",{from:t,to:o,graph:e},r)})),t.on("changeNode",(function(t,o){return n.sendAll("changenode",{id:t.id,metadata:t.metadata,graph:e},r)})),t.on("addEdge",(function(t){var o;return"number"!=typeof t.from.index&&delete t.from.index,"number"!=typeof t.to.index&&delete t.to.index,o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addedge",o,r)})),t.on("removeEdge",(function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeedge",o,r)})),t.on("changeEdge",(function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("changeedge",o,r)})),t.on("addInitial",(function(t){var o;return o={src:t.from,tgt:t.to,metadata:t.metadata,graph:e},n.sendAll("addinitial",o,r)})),t.on("removeInitial",(function(t){var o;return o={src:t.from,tgt:t.to,graph:e},n.sendAll("removeinitial",o,r)})),t.on("addGroup",(function(t){var o;return o={name:t.name,nodes:t.nodes,metadata:t.metadata,graph:e},n.sendAll("addgroup",o,r)})),t.on("removeGroup",(function(t){var o;return o={name:t.name,graph:e},n.sendAll("removegroup",o,r)})),t.on("renameGroup",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renamegroup",i,r)})),t.on("changeGroup",(function(t){var o;return o={name:t.name,metadata:t.metadata,graph:e},n.sendAll("changegroup",o,r)})),t.on("addInport",(function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addinport",i,r)})),t.on("addOutport",(function(t,o){var i;return i={public:t,node:o.process,port:o.port,metadata:o.metadata,graph:e},n.sendAll("addoutport",i,r)})),t.on("removeInport",(function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeinport",i,r)})),t.on("removeOutport",(function(t,o){var i;return i={public:t,graph:e},n.sendAll("removeoutport",i,r)})),t.on("renameInport",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameinport",i,r)})),t.on("renameOutport",(function(t,o){var i;return i={from:t,to:o,graph:e},n.sendAll("renameoutport",i,r)})),t.on("endTransaction",(function(){return n.emit("updated",{name:e,graph:t})}))}},{key:"addNode",value:function(e,t,r){if(t.id||t.component)return e.addNode(t.id,t.component,t.metadata);this.send("error",new Error("No ID or component supplied"),r)}},{key:"removeNode",value:function(e,t,r){if(t.id)return e.removeNode(t.id);this.send("error",new Error("No ID supplied"),r)}},{key:"renameNode",value:function(e,t,r){if(t.from||t.to)return e.renameNode(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeNode",value:function(e,t,r){if(t.id||t.metadata)return e.setNodeMetadata(t.id,t.metadata);this.send("error",new Error("No id or metadata supplied"),r)}},{key:"addEdge",value:function(e,t,r){if(t.src||t.tgt){if("number"!=typeof t.src.index&&"number"!=typeof t.tgt.index||!e.addEdgeIndex)return e.addEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);e.addEdgeIndex(t.src.node,t.src.port,t.src.index,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.removeEdge(t.src.node,t.src.port,t.tgt.node,t.tgt.port);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"changeEdge",value:function(e,t,r){if(t.src||t.tgt)return e.setEdgeMetadata(t.src.node,t.src.port,t.tgt.node,t.tgt.port,t.metadata);this.send("error",new Error("No src or tgt supplied"),r)}},{key:"addInitial",value:function(e,t,r){if(t.src||t.tgt){if(!e.addInitialIndex||"number"!=typeof t.tgt.index)return e.addInitial(t.src.data,t.tgt.node,t.tgt.port,t.metadata);e.addInitialIndex(t.src.data,t.tgt.node,t.tgt.port,t.tgt.index,t.metadata)}else this.send("error",new Error("No src or tgt supplied"),r)}},{key:"removeInitial",value:function(e,t,r){if(t.tgt)return e.removeInitial(t.tgt.node,t.tgt.port);this.send("error",new Error("No tgt supplied"),r)}},{key:"addInport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addInport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported inport information"),r)}},{key:"removeInport",value:function(e,t,r){if(t.public)return e.removeInport(t.public);this.send("error",new Error("Missing exported inport name"),r)}},{key:"renameInport",value:function(e,t,r){if(t.from||t.to)return e.renameInport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addOutport",value:function(e,t,r){if(t.public||t.node||t.port)return e.addOutport(t.public,t.node,t.port,t.metadata);this.send("error",new Error("Missing exported outport information"),r)}},{key:"removeOutport",value:function(e,t,r){if(t.public)return e.removeOutport(t.public);this.send("error",new Error("Missing exported outport name"),r)}},{key:"renameOutport",value:function(e,t,r){if(t.from||t.to)return e.renameOutport(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"addGroup",value:function(e,t,r){if(t.name||t.nodes||t.metadata)return e.addGroup(t.name,t.nodes,t.metadata);this.send("error",new Error("No name or nodes or metadata supplied"),r)}},{key:"removeGroup",value:function(e,t,r){if(t.name)return e.removeGroup(t.name);this.send("error",new Error("No name supplied"),r)}},{key:"renameGroup",value:function(e,t,r){if(t.from||t.to)return e.renameGroup(t.from,t.to);this.send("error",new Error("No from or to supplied"),r)}},{key:"changeGroup",value:function(e,t,r){if(t.name||t.metadata)return e.setEdgeMetadata(t.name,t.metadata);this.send("error",new Error("No name or metadata supplied"),r)}}])&&o(t.prototype,r),n&&o(t,n),c}(r(11).EventEmitter),e.exports=l},function(e,t,r){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p,u,d,h,f,m,g;m=r(0),l=r(11).EventEmitter,g=function(e,r){var n,o,i,s;if(n={id:e.id,graph:r},e.socket.from&&(n.src={node:e.socket.from.process.id,port:e.socket.from.port}),e.socket.to&&(n.tgt={node:e.socket.to.process.id,port:e.socket.to.port}),e.subgraph&&(n.subgraph=e.subgraph),void 0!==e.group&&(n.group=e.group),e.datatype&&(n.type=e.datatype),e.schema&&(n.schema=e.schema),void 0!==e.data){if(m.isBrowser()||t.isBuffer(e.data)&&(e.data=e.data.slice(0,20)),(null!=(o=e.data)?o.toJSON:void 0)&&(n.data=e.data.toJSON()),null!=(i=e.data)?i.toString:void 0){if(n.data=e.data.toString(),"[object Object]"===n.data)try{n.data=JSON.parse(JSON.stringify(e.data))}catch(e){}}else n.data=e.data;(null!=(s=e.metadata)?s.secure:void 0)&&(n.data="DATA")}return n},h=function(e){return e?e.process+"("+e.port+")":""},d=function(e){return h(e.src)+" -> "+h(e.tgt)},u=function(e){return e?e.process.id+"("+e.port+")":""},f=function(e){return u(e.from)+" -> "+u(e.to)},p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t.networks={},t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("network",e,t,r)}},{key:"sendAll",value:function(e,t){return this.transport.sendAll("network",e,t)}},{key:"receive",value:function(e,t,r){var n;if(n=this.resolveGraph(t,r))switch(e){case"start":return this.startNetwork(n,t,r);case"stop":return this.stopNetwork(n,t,r);case"edges":return this.updateEdgesFilter(n,t,r);case"debug":return this.debugNetwork(n,t,r);case"getstatus":return this.getStatus(n,t,r);default:return this.send("error",new Error("network:".concat(e," not supported")),r)}}},{key:"resolveGraph",value:function(e,t){if(e.graph){if(this.transport.graph.graphs[e.graph])return this.transport.graph.graphs[e.graph];this.send("error",new Error("Requested graph not found"),t)}else this.send("error",new Error("No graph specified"),t)}},{key:"updateEdgesFilter",value:function(e,t,r){var n,o,i,s,a,c;for((s=this.networks[t.graph])?s.filters={}:(s={network:null,filters:{}},this.networks[t.graph]=s),o=0,i=(a=t.edges).length;o<i;o++)n=a[o],c=d(n),s.filters[c]=!0;return this.send("edges",{graph:t.graph,edges:t.edges},r)}},{key:"eventFiltered",value:function(e,t){var r;return!this.transport.options.filterData||(r=f(t.socket),this.networks[e].filters[r])}},{key:"initNetwork",value:function(e,t,r,n){var o,i,s=this;if(!this.networks[t]||!this.networks[t].network)return e.componentLoader=this.transport.component.getLoader(e.baseDir,this.transport.options),(i=JSON.parse(JSON.stringify(this.transport.options))).delay=!0,m.createNetwork(e,(function(e,o){return e?n(e):(s.networks[t]&&s.networks[t].network?s.networks[t].network=o:s.networks[t]={network:o,filters:{}},s.emit("addnetwork",o,t,s.networks),s.subscribeNetwork(o,t,r),o.connect(n))}),i);(o=this.networks[t].network).stop((function(i){return i?n(i):(delete s.networks[t],s.emit("removenetwork",o,t,s.networks),s.initNetwork(e,t,r,n))}))}},{key:"subscribeNetwork",value:function(e,t,r){var n=this;return e.on("start",(function(o){return n.sendAll("started",{time:o.start,graph:t,running:e.isRunning(),started:e.isStarted()},r)})),e.on("end",(function(o){return n.sendAll("stopped",{time:new Date,uptime:o.uptime,graph:t,running:e.isRunning(),started:e.isStarted()},r)})),e.on("icon",(function(e){return e.graph=t,n.sendAll("icon",e,r)})),e.on("ip",(function(e){var o;if(n.eventFiltered(t,e)){switch(o={id:e.id,socket:e.socket,subgraph:e.subgraph,metadata:e.metadata},e.type){case"openBracket":o.type="begingroup",o.group=e.data||"";break;case"data":o.type="data",o.data=e.data,o.datatype=e.datatype,o.schema=e.schema;break;case"closeBracket":o.type="endgroup",o.group=e.data||""}return n.sendAll(o.type,g(o,t),r)}})),e.on("process-error",(function(e){var o,i,s,a,c;if(i=e.error.message,e.error.stack)for(o=e.error.stack.split("\n"),s=a=0,c=Math.min(o.length,3);0<=c?a<=c:a>=c;s=0<=c?++a:--a)i+="\n".concat(o[s]);return n.sendAll("processerror",{id:e.id,error:i,graph:t},r)}))}},{key:"_startNetwork",value:function(e,t,r,n){var o,i,s=this;return o=function(e){return e.start((function(e){return n(e)}))},(i=this.networks[t])&&i.network?o(i.network):this.initNetwork(e,t,r,(function(e){return e?n(e):(i=s.networks[t],o(i.network))}))}},{key:"startNetwork",value:function(e,t,r){var n=this;return this.networks[t.graph],this._startNetwork(e,t.graph,r,(function(e){e&&n.send("error",e,r)}))}},{key:"stopNetwork",value:function(e,t,r){var n,o=this;if(this.networks[t.graph])if(n=this.networks[t.graph].network){if(!n.isStarted())return this.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.networks[t.graph].network.stop((function(e){e?o.send("error",e,r):o.send("stopped",{time:new Date,graph:t.graph,running:n.isRunning(),started:n.isStarted()},r)}))}else this.send("error",new Error("Network ".concat(t.graph," not found")),r);else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"debugNetwork",value:function(e,t,r){var n;this.networks[t.graph]&&(n=this.networks[t.graph].network)?(n.setDebug(t.enable),this.send("setdebug",{enable:t.enable})):this.send("error",new Error("Network ".concat(t.graph," not found")),r)}},{key:"getStatus",value:function(e,t,r){var n;if(this.networks[t.graph]){if(n=this.networks[t.graph].network)return this.send("status",{graph:t.graph,running:n.isRunning(),started:n.isStarted()},r);this.send("error",new Error("Network ".concat(t.graph," not found")),r)}else this.send("error",new Error("Network ".concat(t.graph," not found")),r)}}])&&o(t.prototype,r),n&&o(t,n),c}(l),e.exports=p}).call(this,r(30).Buffer)},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l,p,u,d,h;d=r(0),u=r(481),p=r(11).EventEmitter,h=r(482),l=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).transport=e,t}return t=c,(r=[{key:"send",value:function(e,t,r){return this.transport.send("component",e,t,r)}},{key:"receive",value:function(e,t,r){switch(e){case"list":return this.listComponents(t,r);case"getsource":return this.getSource(t,r);case"source":return this.setSource(t,r);default:return this.send("error",new Error("component:".concat(e," not supported")),r)}}},{key:"getLoader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.loaders[e]||(this.loaders[e]=new d.ComponentLoader(e,t)),this.loaders[e]}},{key:"listComponents",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).listComponents((function(e,r){var i,s;if(!e)return i=Object.keys(r),s=0,i.forEach((function(e){return o.processComponent(n,e,t,(function(e){if(!(++s<i.length))return o.send("componentsready",s,t)}))}));o.send("error",e,t)}))}},{key:"getSource",value:function(e,t){var r,n=this;return r=this.transport.options.baseDir,this.getLoader(r,this.transport.options).getSource(e.name,(function(r,o){var i,s;return r?null==(i=n.transport.graph.graphs[e.name])?void n.send("error",r,t):(s=h.parseName(e.name),n.send("source",{name:s.name,library:s.library,code:JSON.stringify(i.toJSON()),language:"json"},t)):n.send("source",o,t)}))}},{key:"setSource",value:function(e,t){var r,n,o=this;return r=this.transport.options.baseDir,(n=this.getLoader(r,this.transport.options)).setSource(e.library,e.name,e.code,e.language,(function(r){if(!r)return o.emit("updated",{name:e.name,library:e.library,code:e.code,language:e.language}),o.processComponent(n,n.normalizeName(e.library,e.name),t);o.send("error",r,t)}))}},{key:"processComponent",value:function(e,t,r,n){var o=this;return n||(n=function(){}),e.load(t,(function(e,i){if(!i){if(e instanceof Error)return o.send("error",e,r),n(e);i=e}if(i.isReady())return o.sendComponent(t,i,r),n(null);i.once("ready",(function(){return o.sendComponent(t,i,r),n(null)}))}),!0)}},{key:"processPort",value:function(e,t){var r,n;return r={id:e,type:t.getDataType?t.getDataType():"all"},("function"==typeof t.getSchema?t.getSchema():void 0)&&(r.schema=t.getSchema()),t.isRequired&&(r.required=t.isRequired()),t.isAddressable&&(r.addressable=t.isAddressable()),t.getDescription&&(r.description=t.getDescription()),(null!=(n=t.options)?n.values:void 0)&&(r.values=t.options.values),("function"==typeof t.hasDefault?t.hasDefault():void 0)&&(r.default=t.options.default),r}},{key:"sendComponent",value:function(e,t,r){var n,o,i,s,a,c,l;for(a in o=[],i=[],c=t.inPorts)(s=c[a])&&"function"!=typeof s&&s.canAttach&&o.push(this.processPort(a,s));for(a in l=t.outPorts)(s=l[a])&&"function"!=typeof s&&s.canAttach&&i.push(this.processPort(a,s));return n=t.getIcon?t.getIcon():"gear",this.send("component",{name:e,description:t.description,subgraph:t.isSubgraph(),icon:n,inPorts:o,outPorts:i},r)}},{key:"registerGraph",value:function(e,t,r){var n,o,i=this;return o=u((function(){return i.processComponent(n,e,r)}),10),(n=this.getLoader(t.baseDir,this.transport.options)).listComponents((function(s,a){if(!s)return n.registerComponent("",e,t),o();i.send("error",s,r)})),t.on("addNode",o),t.on("removeNode",o),t.on("renameNode",o),t.on("addEdge",o),t.on("removeEdge",o),t.on("addInitial",o),t.on("removeInitial",o),t.on("addInport",o),t.on("removeInport",o),t.on("renameInport",o),t.on("addOutport",o),t.on("removeOutport",o),t.on("renameOutport",o)}}])&&o(t.prototype,r),n&&o(t,n),c}(p);return e.prototype.loaders={},e}.call(this),e.exports=l},function(e,t){function r(e,t,r){var n,o,i,s,a;function c(){var l=Date.now()-s;l<t&&l>=0?n=setTimeout(c,t-l):(n=null,r||(a=e.apply(i,o),i=o=null))}null==t&&(t=100);var l=function(){i=this,o=arguments,s=Date.now();var l=r&&!n;return n||(n=setTimeout(c,t)),l&&(a=e.apply(i,o),i=o=null),a};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(a=e.apply(i,o),i=o=null,clearTimeout(n),n=null)},l}r.debounce=r,e.exports=r},function(e,t){t.parseName=function(e){var t;return-1===e.indexOf("/")?{library:null,name:e}:{library:(t=e.split("/"))[0],name:t[1]}}},function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var s,a,c,l,p,u,d,h,f;h=r(0),l=r(8)("noflo-runtime-base:trace"),u=JSON.stringify;try{u=r(484)}catch(e){p=e,console.log("WARN: failed to load json-stringify-safe, circular objects may cause fail.\n".concat(p.message))}c=function(e){var t;return t=u(e),JSON.parse(t)},s=function(){function e(){n(this,e),this.events=[]}return i(e,[{key:"add",value:function(e){return this.events.push(e)}},{key:"getAll",value:function(e,t){var r,n,o;for(r=0,n=(o=this.events).length;r<n;r++)e(p=o[r]);return t(null)}}]),e}(),f=function(e,t,r,n){var o,i,s,a,c,l,p,u,d;for(l in i={},p=e.graph.outports)for(a=p[l],d=h.internalSocket.createSocket(),i[l]=d,e.processes[a.process].component.outPorts[a.port].attach(d),u=function(e){return function(r){var o;return o={id:"EXPORT: ".concat(t," ").concat(l.toUpperCase()," ->"),payload:r,socket:{to:{process:{id:t},port:l}}},n(e,o)}},s=0,c=r.length;s<c;s++)o=r[s],d.on(o,u(o));return i},d=function(e,t,r){var n,o,i,s,a,u,d,h;switch(l("event",e,t,"'".concat(r.id,"'")),h=r.socket,d=function(e){try{return e.group=r.group.toString()}catch(t){return l("group serialization error",p=t),e.error=p.message}},o=(n={protocol:"network",command:t,payload:{time:(new Date).toISOString(),graph:e,error:null,src:{node:null!=(i=h.from)?i.process.id:void 0,port:null!=(s=h.from)?s.port:void 0},tgt:{node:null!=(a=h.to)?a.process.id:void 0,port:null!=(u=h.to)?u.port:void 0},id:void 0,subgraph:void 0}}).payload,t){case"connect":case"disconnect":break;case"begingroup":case"endgroup":d(n.payload);break;case"data":try{o.data=c(r.data)}catch(e){l("data serialization error",p=e),o.error=p.message}break;default:throw new Error("trace: Unknown event type ".concat(t))}return l("event done",e,t,"'".concat(r.id,"'")),n},a=function(){function e(t){n(this,e),this.options=t,this.buffer=new s,this.header={graphs:{}}}return i(e,[{key:"attach",value:function(e){var t,r,n=this;return r=e.graph.name||e.graph.properties.name||"default",l("attach",r),(t=["connect","begingroup","data","endgroup","disconnect"]).forEach((function(t){return e.on(t,(function(e){var o;return o=d(r,t,e),n.buffer.add(o)}))})),f(e,r,t,(function(e,t){var o;return o=d(r,e,t),n.buffer.add(o)})),this.header.graphs[r]=e.graph.toJSON()}},{key:"detach",value:function(e){}},{key:"dumpString",value:function(e){var t,r,n=this;return r=[],t=function(e){return r.push(e)},this.buffer.getAll(t,(function(t){var o;return o={header:n.header,events:r},e(t,JSON.stringify(o,null,2))}))}},{key:"dumpFile",value:function(e,t){var n,o,i,s=this;return n=r(12),i=r(485),o=function(t){return n.open(e,"w",(function(r,n){return t(r,{path:e,fd:n})}))},e||(o=function(e){return i.open({suffix:".json"},e)}),o((function(e,r){var o,i,a,c;return e?t(e):(o=0,a=function(e,t){return n.write(r.fd,e,{encoding:"utf-8"},t)},c=function(e){var t;return t=o?",":"",o+=1,t+=JSON.stringify(e,null,2),a(t,(function(e){}))},l("streaming to file",r.path),i=JSON.stringify(s.header,null,2),a('{\n "header": '.concat(i,'\n, "events":\n['),(function(e){return s.buffer.getAll(c,(function(e){return e?t(e):(l("streamed ".concat(o," events")),a("]\n }",(function(e){return l("completed stream",r.path),t(e,r.path)})))}))})))}))}}]),e}(),e.exports.Tracer=a},function(e,t){function r(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var s=r.indexOf(this);~s?r.splice(s+1):r.push(this),~s?n.splice(s,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}(e.exports=function(e,t,n,o){return JSON.stringify(e,r(t,o),n)}).getSerialize=r},function(e,t,r){(function(n){var o=r(12),i=r(24),s=r(486),a=r(487),c=r(159),l=(r(159).tmpdir(),r(494)),p=a.sync,u=i.resolve(c.tmpdir()),d=s.O_CREAT|s.O_TRUNC|s.O_RDWR|s.O_EXCL,h=function(e){return"function"==typeof e?[void 0,e]:[new Promise((function(e,r){t=function(){var t=Array.from(arguments),o=t.shift();n.nextTick((function(){o?r(o):1===t.length?e(t[0]):e(t)}))}})),t];var t},f=function(e,t){var r=m(e,t),o=new Date,s=[r.prefix,o.getFullYear(),o.getMonth(),o.getDate(),"-",n.pid,"-",(4294967296*Math.random()+1).toString(36),r.suffix].join("");return i.join(r.dir||u,s)},m=function(e,t){var r={prefix:null,suffix:null};if(e)switch(typeof e){case"string":r.prefix=e;break;case"object":r=e;break;default:throw new Error("Unknown affix declaration: "+r)}else r.prefix=t;return r},g=!1,y=!1,v=[],b=[];function w(e){if(!g)return!1;k(),v.push(e)}function x(e){if(!g)return!1;k(),b.push(e)}function k(){if(!g)return!1;y||(n.addListener("exit",(function(){try{E()}catch(e){throw console.warn("Fail to clean temporary files on exit : ",e),e}})),y=!0)}function E(){return!!g&&{files:function(){if(!g)return!1;for(var e,t=0;void 0!==(e=v.shift());)p(e),t++;return t}(),dirs:function(){if(!g)return!1;for(var e,t=0;void 0!==(e=b.shift());)p(e),t++;return t}()}}t.dir=u,t.track=function(t){return g=!1!==t,e.exports},t.mkdir=function(e,t){var r=h(t),n=r[0];t=r[1];var o=f(e,"d-");return l(o,448,(function(e){e||x(o),t(e,o)})),n},t.mkdirSync=function(e){var t=f(e,"d-");return l.sync(t,448),x(t),t},t.open=function(e,t){var r=h(t),n=r[0];t=r[1];var i=f(e,"f-");return o.open(i,d,parseInt("0600",8),(function(e,r){e||w(i),t(e,{path:i,fd:r})})),n},t.openSync=function(e){var t=f(e,"f-"),r=o.openSync(t,d,parseInt("0600",8));return w(t),{path:t,fd:r}},t.path=f,t.cleanup=function(e){var t=h(e),r=t[0];return e=t[1],g?(function(e){var t=h(e),r=t[0];if(e=t[1],!g)return e(new Error("not tracking")),r;var n,o=0,i=v.length;if(!i)return e(null,o),r;for(var s=function(t){if(i){if(t)return e(t),void(i=0);o++,--i||e(null,o)}};void 0!==(n=v.shift());)a(n,s)}((function(t,r){t?e(t,{files:r}):function(e){var t=h(e),r=t[0];if(e=t[1],!g)return e(new Error("not tracking")),r;var n,o=0,i=b.length;if(!i)return e(null,o),r;for(var s=function(t){if(i){if(t)return e(t,o),void(i=0);o++,--i||e(null,o)}};void 0!==(n=b.shift());)a(n,s)}((function(t,n){e(t,{files:r,dirs:n})}))})),r):(e(new Error("not tracking")),r)},t.cleanupSync=E,t.createWriteStream=function(e){var t=f(e,"s-"),r=o.createWriteStream(t,{flags:d,mode:parseInt("0600",8)});return w(t),r}}).call(this,r(6))},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){(function(t){e.exports=d,d.sync=y;var n=r(94),o=r(24),i=r(12),s=r(154),a=parseInt("666",8),c={nosort:!0,silent:!0},l=0,p="win32"===t.platform;function u(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((function(t){e[t]=e[t]||i[t],e[t+="Sync"]=e[t]||i[t]})),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),e.disableGlob=e.disableGlob||!1,e.glob=e.glob||c}function d(e,t,r){"function"==typeof t&&(r=t,t={}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n.equal(typeof r,"function","rimraf: callback function required"),n(t,"rimraf: invalid options argument provided"),n.equal(typeof t,"object","rimraf: options should be object"),u(t);var o=0,i=null,a=0;if(t.disableGlob||!s.hasMagic(e))return c(null,[e]);function c(e,n){return e?r(e):0===(a=n.length)?r():void n.forEach((function(e){h(e,t,(function n(s){if(s){if(("EBUSY"===s.code||"ENOTEMPTY"===s.code||"EPERM"===s.code)&&o<t.maxBusyTries)return o++,setTimeout((function(){h(e,t,n)}),100*o);if("EMFILE"===s.code&&l<t.emfileWait)return setTimeout((function(){h(e,t,n)}),l++);"ENOENT"===s.code&&(s=null)}l=0,function(e){i=i||e,0==--a&&r(i)}(s)}))}))}t.lstat(e,(function(r,n){if(!r)return c(null,[e]);s(e,t.glob,c)}))}function h(e,t,r){n(e),n(t),n("function"==typeof r),t.lstat(e,(function(n,o){return n&&"ENOENT"===n.code?r(null):(n&&"EPERM"===n.code&&p&&f(e,t,n,r),o&&o.isDirectory()?g(e,t,n,r):void t.unlink(e,(function(n){if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return p?f(e,t,n,r):g(e,t,n,r);if("EISDIR"===n.code)return g(e,t,n,r)}return r(n)})))}))}function f(e,t,r,o){n(e),n(t),n("function"==typeof o),r&&n(r instanceof Error),t.chmod(e,a,(function(n){n?o("ENOENT"===n.code?null:r):t.stat(e,(function(n,i){n?o("ENOENT"===n.code?null:r):i.isDirectory()?g(e,t,r,o):t.unlink(e,o)}))}))}function m(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.chmodSync(e,a)}catch(e){if("ENOENT"===e.code)return;throw r}try{var o=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}o.isDirectory()?v(e,t,r):t.unlinkSync(e)}function g(e,t,r,i){n(e),n(t),r&&n(r instanceof Error),n("function"==typeof i),t.rmdir(e,(function(s){!s||"ENOTEMPTY"!==s.code&&"EEXIST"!==s.code&&"EPERM"!==s.code?s&&"ENOTDIR"===s.code?i(r):i(s):function(e,t,r){n(e),n(t),n("function"==typeof r),t.readdir(e,(function(n,i){if(n)return r(n);var s,a=i.length;if(0===a)return t.rmdir(e,r);i.forEach((function(n){d(o.join(e,n),t,(function(n){if(!s)return n?r(s=n):void(0==--a&&t.rmdir(e,r))}))}))}))}(e,t,i)}))}function y(e,t){var r;if(u(t=t||{}),n(e,"rimraf: missing path"),n.equal(typeof e,"string","rimraf: path should be a string"),n(t,"rimraf: missing options"),n.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!s.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=s.sync(e,t.glob)}if(r.length)for(var o=0;o<r.length;o++){e=r[o];try{var i=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&p&&m(e,t,r)}try{i&&i.isDirectory()?v(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return p?m(e,t,r):v(e,t,r);if("EISDIR"!==r.code)throw r;v(e,t,r)}}}function v(e,t,r){n(e),n(t),r&&n(r instanceof Error);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw r;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||function(e,t){n(e),n(t),t.readdirSync(e).forEach((function(r){y(o.join(e,r),t)}));var r=p?100:1,i=0;for(;;){var s=!0;try{var a=t.rmdirSync(e,t);return s=!1,a}finally{if(++i<r&&s)continue}}}(e,t)}}}).call(this,r(6))},function(e,t,r){(function(e){var n=r(24),o="win32"===e.platform,i=r(12),s=e.env.NODE_DEBUG&&/fs/.test(e.env.NODE_DEBUG);function a(t){return"function"==typeof t?t:function(){var t;if(s){var r=new Error;t=function(e){e&&(r.message=e.message,n(e=r))}}else t=n;return t;function n(t){if(t){if(e.throwDeprecation)throw t;if(!e.noDeprecation){var r="fs: missing callback "+(t.stack||t.message);e.traceDeprecation?console.trace(r):console.error(r)}}}}()}n.normalize;if(o)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(o)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;t.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,s,a,p,u=e,d={},h={};function f(){var t=l.exec(e);r=t[0].length,s=t[0],a=t[0],p="",o&&!h[a]&&(i.lstatSync(a),h[a]=!0)}for(f();r<e.length;){c.lastIndex=r;var m=c.exec(e);if(p=s,s+=m[0],a=p+m[1],r=c.lastIndex,!(h[a]||t&&t[a]===a)){var g;if(t&&Object.prototype.hasOwnProperty.call(t,a))g=t[a];else{var y=i.lstatSync(a);if(!y.isSymbolicLink()){h[a]=!0,t&&(t[a]=a);continue}var v=null;if(!o){var b=y.dev.toString(32)+":"+y.ino.toString(32);d.hasOwnProperty(b)&&(v=d[b])}null===v&&(i.statSync(a),v=i.readlinkSync(a)),g=n.resolve(p,v),t&&(t[a]=g),o||(d[b]=v)}e=n.resolve(g,e.slice(r)),f()}}return t&&(t[u]=e),e},t.realpath=function(t,r,s){if("function"!=typeof s&&(s=a(r),r=null),t=n.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return e.nextTick(s.bind(null,null,r[t]));var p,u,d,h,f=t,m={},g={};function y(){var r=l.exec(t);p=r[0].length,u=r[0],d=r[0],h="",o&&!g[d]?i.lstat(d,(function(e){if(e)return s(e);g[d]=!0,v()})):e.nextTick(v)}function v(){if(p>=t.length)return r&&(r[f]=t),s(null,t);c.lastIndex=p;var n=c.exec(t);return h=u,u+=n[0],d=h+n[1],p=c.lastIndex,g[d]||r&&r[d]===d?e.nextTick(v):r&&Object.prototype.hasOwnProperty.call(r,d)?x(r[d]):i.lstat(d,b)}function b(t,n){if(t)return s(t);if(!n.isSymbolicLink())return g[d]=!0,r&&(r[d]=d),e.nextTick(v);if(!o){var a=n.dev.toString(32)+":"+n.ino.toString(32);if(m.hasOwnProperty(a))return w(null,m[a],d)}i.stat(d,(function(e){if(e)return s(e);i.readlink(d,(function(e,t){o||(m[a]=t),w(e,t)}))}))}function w(e,t,o){if(e)return s(e);var i=n.resolve(h,t);r&&(r[o]=i),x(i)}function x(e){t=n.resolve(e,t.slice(p)),y()}y()}}).call(this,r(6))},function(e,t,r){var n=r(490),o=r(491);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,r){var i=[],s=o("{","}",t);if(!s||/\$$/.test(s.pre))return[t];var c,l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body),g=l||u,y=s.body.indexOf(",")>=0;if(!g&&!y)return s.post.match(/,.*\}/)?(t=s.pre+"{"+s.body+a+s.post,e(t)):[t];if(g)c=s.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var r=[],n=o("{","}",t);if(!n)return t.split(",");var i=n.pre,s=n.body,a=n.post,c=i.split(",");c[c.length-1]+="{"+s+"}";var l=e(a);a.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l));return r.push.apply(r,c),r}(s.body)).length)if(1===(c=e(c[0],!1).map(d)).length)return(w=s.post.length?e(s.post,!1):[""]).map((function(e){return s.pre+c[0]+e}))}var v,b=s.pre,w=s.post.length?e(s.post,!1):[""];if(g){var x=p(c[0]),k=p(c[1]),E=Math.max(c[0].length,c[1].length),_=3==c.length?Math.abs(p(c[2])):1,S=f;k<x&&(_*=-1,S=m);var C=c.some(h);v=[];for(var P=x;S(P,k);P+=_){var A;if(u)"\\"===(A=String.fromCharCode(P))&&(A="");else if(A=String(P),C){var O=E-A.length;if(O>0){var T=new Array(O+1).join("0");A=P<0?"-"+T+A.slice(1):T+A}}v.push(A)}}else v=n(c,(function(t){return e(t,!1)}));for(var D=0;D<v.length;D++)for(var N=0;N<w.length;N++){var j=b+v[D]+w[N];(!r||g||j)&&i.push(j)}return i}(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(u)};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function p(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(i).join("\\").split(s).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function d(e){return"{"+e+"}"}function h(e){return/^-?0\d/.test(e)}function f(e,t){return e<=t}function m(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=t(e[o],o);r(i)?n.push.apply(n,i):n.push(i)}return n};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=o(e,r)),t instanceof RegExp&&(t=o(t,r));var n=i(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function o(e,t){var r=t.match(e);return r?r[0]:null}function i(e,t,r){var n,o,i,s,a,c=r.indexOf(e),l=r.indexOf(t,c+1),p=c;if(c>=0&&l>0){for(n=[],i=r.length;p>=0&&!a;)p==c?(n.push(p),c=r.indexOf(e,p+1)):1==n.length?a=[n.pop(),l]:((o=n.pop())<i&&(i=o,s=l),l=r.indexOf(t,p+1)),p=c<l&&c>=0?c:l;n.length&&(a=[i,s])}return a}e.exports=n,n.range=i},function(e,t,r){(function(t){e.exports=f,f.GlobSync=m;var n=r(12),o=r(155),i=r(95),s=(i.Minimatch,r(154).Glob,r(67),r(24)),a=r(94),c=r(96),l=r(156),p=(l.alphasort,l.alphasorti,l.setopts),u=l.ownProp,d=l.childrenIgnored,h=l.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new m(e,t).found}function m(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof m))return new m(e,t);if(p(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}m.prototype._finish=function(){if(a(this instanceof m),this.realpath){var e=this;this.matches.forEach((function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i),n[o.realpathSync(i,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;n[e._makeAbs(i)]=!0}}))}l.finish(this)},m.prototype._process=function(e,t,r){a(this instanceof m);for(var n,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,o).join("/")}var s,l=e.slice(o);null===n?s=".":c(n)||c(e.join("/"))?(n&&c(n)||(n="/"+n),s=n):s=n;var p=this._makeAbs(s);d(this,s)||(l[0]===i.GLOBSTAR?this._processGlobStar(n,s,p,l,t,r):this._processReaddir(n,s,p,l,t,r))},m.prototype._processReaddir=function(e,t,r,n,o,i){var a=this._readdir(r,i);if(a){for(var c=n[0],l=!!this.minimatch.negate,p=c._glob,u=this.dot||"."===p.charAt(0),d=[],h=0;h<a.length;h++){if("."!==(g=a[h]).charAt(0)||u)(l&&!e?!g.match(c):g.match(c))&&d.push(g)}var f=d.length;if(0!==f)if(1!==n.length||this.mark||this.stat){n.shift();for(h=0;h<f;h++){var m;g=d[h];m=e?[e,g]:[g],this._process(m.concat(n),o,i)}}else{this.matches[o]||(this.matches[o]=Object.create(null));for(var h=0;h<f;h++){var g=d[h];e&&(g="/"!==e.slice(-1)?e+"/"+g:e+g),"/"!==g.charAt(0)||this.nomount||(g=s.join(this.root,g)),this._emitMatch(o,g)}}}},m.prototype._emitMatch=function(e,t){if(!h(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},m.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=n.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var o=r&&r.isSymbolicLink();return this.symlinks[e]=o,o||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},m.prototype._readdir=function(e,t){if(t&&!u(this.symlinks,e))return this._readdirInGlobStar(e);if(u(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,n.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},m.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},m.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},m.prototype._processGlobStar=function(e,t,r,n,o,i){var s=this._readdir(r,i);if(s){var a=n.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,o,!1);var p=s.length;if(!this.symlinks[r]||!i)for(var u=0;u<p;u++){if("."!==s[u].charAt(0)||this.dot){var d=c.concat(s[u],a);this._process(d,o,!0);var h=c.concat(s[u],n);this._process(h,o,!0)}}}},m.prototype._processSimple=function(e,r){var n=this._stat(e);if(this.matches[r]||(this.matches[r]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),o&&(e+="/"))}"win32"===t.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(r,e)}},m.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,t)){var o=this.cache[t];if(Array.isArray(o)&&(o="DIR"),!r||"DIR"===o)return o;if(r&&"FILE"===o)return!1}var i=this.statCache[t];if(!i){var s;try{s=n.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=n.statSync(t)}catch(e){i=s}else i=s}this.statCache[t]=i;o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,(!r||"FILE"!==o)&&o},m.prototype._mark=function(e){return l.mark(this,e)},m.prototype._makeAbs=function(e){return l.makeAbs(this,e)}}).call(this,r(6))},function(e,t,r){(function(t){var n=r(157),o=Object.create(null),i=r(158);function s(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}e.exports=n((function(e,r){return o[e]?(o[e].push(r),null):(o[e]=[r],function(e){return i((function r(){var n=o[e],i=n.length,a=s(arguments);try{for(var c=0;c<i;c++)n[c].apply(null,a)}finally{n.length>i?(n.splice(0,i),t.nextTick((function(){r.apply(null,a)}))):delete o[e]}}))}(e))}))}).call(this,r(6))},function(e,t,r){(function(t){var n=r(24),o=r(12),i=parseInt("0777",8);function s(e,r,a,c){"function"==typeof r?(a=r,r={}):r&&"object"==typeof r||(r={mode:r});var l=r.mode,p=r.fs||o;void 0===l&&(l=i&~t.umask()),c||(c=null);var u=a||function(){};e=n.resolve(e),p.mkdir(e,l,(function(t){if(!t)return u(null,c=c||e);switch(t.code){case"ENOENT":s(n.dirname(e),r,(function(t,n){t?u(t,n):s(e,r,u,n)}));break;default:p.stat(e,(function(e,r){e||!r.isDirectory()?u(t,c):u(null,c)}))}}))}e.exports=s.mkdirp=s.mkdirP=s,s.sync=function e(r,s,a){s&&"object"==typeof s||(s={mode:s});var c=s.mode,l=s.fs||o;void 0===c&&(c=i&~t.umask()),a||(a=null),r=n.resolve(r);try{l.mkdirSync(r,c),a=a||r}catch(t){switch(t.code){case"ENOENT":a=e(n.dirname(r),s,a),e(r,s,a);break;default:var p;try{p=l.statSync(r)}catch(e){throw t}if(!p.isDirectory())throw t}}return a}}).call(this,r(6))},function(e,t,r){(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,h,f,m;d=r(153),m=r(11).EventEmitter,f=function(e){a(r,e);var t=l(r);function r(e){var n;return o(this,r),(n=t.call(this,e)).clients=[],n}return s(r,[{key:"_connect",value:function(e){var t=this;return this.clients.push(e),e.on("send",(function(r){return t._receive(r,{client:e})}))}},{key:"_disconnect",value:function(e){if(-1!==this.clients.indexOf(e))return this.clients.splice(this.clients.indexOf(e),1),e.removeAllListeners("send")}},{key:"_receive",value:function(e,t){return this.receive(e.protocol,e.command,e.payload,t)}},{key:"send",value:function(e,t,r,n){var o;if(n.client)return o={protocol:e,command:t,payload:r},n.client._receive(o)}},{key:"sendAll",value:function(e,t,r){var n,o,i,s,a,c;for(s={protocol:e,command:t,payload:r},c=[],o=0,i=(a=this.clients).length;o<i;o++)n=a[o],c.push(n._receive(s));return c}}]),r}(d),h=function(e){a(r,e);var t=l(r);function r(e,n){var i;return o(this,r),(i=t.call(this)).name=n,i.runtime=e,i.name||(i.name="Unnamed client"),i}return s(r,[{key:"connect",value:function(){return this.runtime._connect(this)}},{key:"disconnect",value:function(){return this.runtime._disconnect(this)}},{key:"send",value:function(e,t,r){var n;return n={protocol:e,command:t,payload:r},this.emit("send",n)}},{key:"_receive",value:function(e){var t=this;return setTimeout((function(){return t.emit("message",e)}),1)}}]),r}(m),t.Client=h,t.Runtime=f}).call(this,r(6))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=a(e);if(t){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(93),l=r(160),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(r,e);var t=i(r);function r(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(n=t.call(this,e)).setClient(window.parent),n}return r}(c);e.exports=function(e){var t=l.normalizeOptions(e),r=new p(t);return l.subscribe(window,(function(e,t){"iframe"!==e.protocol||"setcontent"!==e.command?r.receive(e.protocol,e.command,e.payload,{href:t.origin}):document.body.innerHTML=e.payload})),r}},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return a(this,r)}}function a(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=r(93),p=r(160),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,r,n,a=s(c);function c(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),r=a.call(this,e),t&&t.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),r.openClient(t.getAttribute("href"))})),r}return t=c,(r=[{key:"openClient",value:function(e){var t=this,r=window.open(e,"_blank");if(!r)throw new Error("Unable to open client window at '".concat(e,"'"));this.context={href:"*"};var n=function(e){var t=e.data;"string"==typeof e.data&&(t=JSON.parse(e.data)),t.protocol&&t.command&&this.receive(t.protocol,t.command,t.payload,this.context)}.bind(this),o=setInterval((function(){r&&!r.closed||(t.setClient(null),window.removeEventListener("message",n),clearInterval(o))}),1e3);this.setClient(r),window.addEventListener("message",n)}}])&&o(t.prototype,r),n&&o(t,n),c}(l);e.exports=function(e,t){var r=p.normalizeOptions(e);return new u(r,t)}},function(e,t,r){"use strict";r.r(t);var n=r(13);class o extends n.a{static get properties(){return{element:{type:String},inports:{type:String},outports:{type:String}}}}customElements.define("noflo-polymer",o)},function(e,t){e.exports={runtimetypes:{msgflo:{shortname:"MsgFlo Message Queuing",icon:"cubes",description:"Message queue orchestration",helpurl:"https://msgflo.org/docs/usage/"}},preferredlanguage:"python",componenttemplates:{python:"#!/usr/bin/env python\nimport msgflo\n\nclass <%= name %>(msgflo.Participant):\n  def __init__(self, role):\n    d = {\n      'component': '<%= namespace %>/<%= name %>',\n      'label': '<%= description %>',\n      'icon': '<%= icon %>',\n      'inports': [\n        { 'id': 'in', 'type': 'any' },\n      ],\n      'outports': [\n        { 'id': 'out', 'type': 'any' },\n      ],\n    }\n    msgflo.Participant.__init__(self, d, role)\n\n  def process(self, inport, msg):\n    self.send('out', msg.data)\n    self.ack(msg)\n\nif __name__ == '__main__':\n  msgflo.main(<%= name %>)\n",coffeescript:"# To work in msgflo-nodejs source tree\ntry\n  msgflo = require 'msgflo-nodejs'\ncatch e\n  msgflo = require '..'\n\n<%= name %> = (client, role) ->\n\n  definition =\n    component: '<%= namespace %>/<%= name %>'\n    icon: '<%= icon %>'\n    label: '<%= description %>'\n    inports: [\n      id: 'in'\n      type: 'any'\n    ]\n    outports: [\n      id: 'out'\n      type: 'any'\n    ]\n  process = (inport, indata, callback) ->\n    return callback 'out', null, indata\n  return new msgflo.participant.Participant client, definition, process, role\n\nmodule.exports = <%= name %>\n",javascript:"try {\n  var msgflo = require('msgflo-nodejs');\n} catch (error) {\n  var e = error;\n  var msgflo = require('..');\n}\n\nvar <%= name %> = function(client, role) {\n  var definition = {\n    component: '<%= namespace %>/<%= name %>',\n    icon: '<%= icon %>',\n    label: '<%= description %>',\n    inports: [\n      {\n        id: 'in',\n        type: 'any'\n      }\n    ],\n    outports: [\n      {\n        id: 'out',\n        type: 'any'\n      }\n    ]\n  };\n  var process = function(inport, indata, callback) {\n    return callback('out', null, indata);\n  };\n  return new msgflo.participant.Participant(client, definition, process, role);\n};\n\nmodule.exports = <%= name %>;\n",yaml:"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\ncomponent: '<%= namespace %>/<%= name %>'\nlabel: '<%= description %>'\nicon: '<%= icon %>'\ninports:\n  open:\n    queue: /bitraf/door/#ROLE/open\n    type: object\noutports: {}\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{sndflo:{shortname:"SndFlo Sound Synthesis",icon:"music",description:"Create sound using SuperCollider",helpurl:"https://github.com/jonnor/sndflo#readme"}},componenttemplates:{supercollider:'SynthDef("MyFilter", {\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\n},\n    metadata: (\n        description: "my filter",\n        specs: (\n            freq: ControlSpec(20, 20000, \\exp, 0.1, 2200, "Hz")\n        )\n    )\n)\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{imgflo:{shortname:"ImgFlo Image Manipulation",icon:"picture-o",description:"Process images using GEGL",helpurl:"https://github.com/jonnor/imgflo#readme"}},componenttemplates:{c:'/* This file is an image processing operation for GEGL */\n\n#ifdef GEGL_PROPERTIES\n    // Dummy prop, for testing\n    property_double (x, "X", 0.0)\n        ui_range (0.0, 1024.0)\n        ui_meta ("unit", "pixel-coordinate")\n#else\n\n#define GEGL_OP_POINT_FILTER\n#include "gegl-op.h"\n\n#ifndef IMGFLO_OP_NAME\n#define IMGFLO_OP_NAME(orig) orig\n#endif\n\nstatic void prepare(GeglOperation *operation)\n{\n    const Babl *format = babl_format("YA float");\n    gegl_operation_set_format(operation, "input", format);\n    gegl_operation_set_format(operation, "output", format);\n}\n\ngboolean\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\n        const GeglRectangle *roi, gint level)\n{\n    float *in = in_buf;\n    float *out = out_buf;\n    while (samples--) {\n        *out++ = *in++;\n        *out++ = *in++;\n    }\n    return TRUE;\n}\n\nstatic void\ngegl_op_class_init (GeglOpClass *klass)\n{\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\n  point_filter_class->process = process;\n  operation_class->prepare = prepare;\n  gegl_operation_class_set_keys (operation_class,\n      "name",        IMGFLO_OP_NAME("myop2"),\n      "title",       "imgflo: Dynamic Flowhub",\n      "categories" , "dev",\n      "description", "First GEGL op written in Flowhub 22",\n  NULL);\n}\n\n#endif\n'},examples:{}}},function(e,t){e.exports={runtimetypes:{"noflo-browser":{shortname:"NoFlo for Browser",icon:"html5",description:"Build client-side browser applications",helpurl:"https://github.com/noflo/noflo-browser-app#readme"},"noflo-nodejs":{shortname:"NoFlo for Node.js",icon:"cloud",description:"Build network applications",helpurl:"https://github.com/noflo/noflo-nodejs#readme"},"noflo-gnome":{shortname:"NoFlo for GNOME",icon:"desktop",description:"Build GNOME desktop applications",helpurl:"https://github.com/noflo/noflo-gnome#readme"}},preferredlanguage:"es2015",componenttemplates:{javascript:"var noflo = require('noflo');\n\nexports.getComponent = function() {\n  var c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process(function (input, output) {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    var data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n",coffeescript:"noflo = require 'noflo'\n\nexports.getComponent = ->\n  c = new noflo.Component\n  c.description = '<%= description %>'\n  c.icon = '<%= icon %>'\n  c.inPorts.add 'in',\n    datatype: 'all'\n    description: 'Packet to forward'\n  c.outPorts.add 'out',\n    datatype: 'all'\n  c.process (input, output) ->\n    # Check preconditions on input data\n    return unless input.hasData 'in'\n    # Read packets we need to process\n    data = input.getData 'in'\n    # Process data and send output\n    output.send\n      out: data\n    # Deactivate\n    output.done()\n",es2015:"const noflo = require('noflo');\n\nexports.getComponent = () => {\n  const c = new noflo.Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward',\n  });\n  c.outPorts.add('out', {\n    datatype: 'all',\n  });\n  c.process((input, output) => {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    const data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data,\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n",typescript:"import { Component } from 'noflo';\n\nexports.getComponent = (): Component => {\n  const c = new Component();\n  c.description = '<%= description %>';\n  c.icon = '<%= icon %>';\n  c.inPorts.add('in', {\n    datatype: 'all',\n    description: 'Packet to forward'\n  });\n  c.outPorts.add('out', {\n    datatype: 'all'\n  });\n  c.process((input, output): void => {\n    // Check preconditions on input data\n    if (!input.hasData('in')) {\n      return;\n    }\n    // Read packets we need to process\n    const data = input.getData('in');\n    // Process data and send output\n    output.send({\n      out: data\n    });\n    // Deactivate\n    output.done();\n  });\n  return c;\n};\n"},examples:{clock:{label:"Animated clock",id:"86a28c01d66cd8bf672f4e0a3e1ba851"},camtopalette:{label:"Cam to palette",id:"efd306b5846c236998a63c535ceebed1",ssl:!0},canvas:{label:"Canvas pattern",id:"dc0414ecf989b4b130b119e948653350"},counter:{label:"Click counter",id:"38471e33458d644e907f4637434f5bbf"},draganddrop:{label:"Drag-and-drop physics",id:"026a7bc8f1b482f56ad336c9d72dd72f"},delaunaymasks:{label:"Delaunay masks",id:"d6c1fa7b4b9d437564e954f338d970b9",ssl:!0},reacttodo:{label:"React TODO list",id:"c111454c9fd2f74d37d1e8a4e739adfd"},webaudio:{label:"Web Audio",id:"6724a6eb8a1aaf351866e7a43c3ecd43"}}}},function(e,t){e.exports={runtimetypes:{javafbp:{shortname:"JavaFBP",icon:"android",description:"Program Java and Android applications",helpurl:"https://github.com/jonnor/javafbp-runtime#readme"}},componenttemplates:{java:"// TODO\n"},examples:{}}},function(e,t){e.exports={runtimetypes:{microflo:{shortname:"MicroFlo Microcontroller Programming",icon:"lightbulb-o",description:"Program microcontrollers like Arduino",helpurl:"https://github.com/jonnor/microflo#readme"}},componenttemplates:{"c++":"// TODO\n"},examples:{}}},function(e,t,r){t.graph=r(506),t.Graph=t.graph.Graph,t.journal=r(508),t.Journal=t.journal.Journal},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p,u,d,h,f,m,g=r(11);p=g.EventEmitter,d=r(32),f=r(507),u=function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,n,c,l=a(p);function p(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(this,p),(e=l.call(this)).setMaxListeners(0),e.name=t,e.properties={},e.nodes=[],e.edges=[],e.initializers=[],e.inports={},e.outports={},e.groups=[],e.transaction={id:null,depth:0},e.caseSensitive=r.caseSensitive||!1,e}return t=p,(n=[{key:"getPortName",value:function(e){return this.caseSensitive?e:e.toLowerCase()}},{key:"startTransaction",value:function(e,t){if(this.transaction.id)throw Error("Nested transactions not supported");return this.transaction.id=e,this.transaction.depth=1,this.emit("startTransaction",e,t)}},{key:"endTransaction",value:function(e,t){if(!this.transaction.id)throw Error("Attempted to end non-existing transaction");return this.transaction.id=null,this.transaction.depth=0,this.emit("endTransaction",e,t)}},{key:"checkTransactionStart",value:function(){return this.transaction.id?"implicit"===this.transaction.id?this.transaction.depth+=1:void 0:this.startTransaction("implicit")}},{key:"checkTransactionEnd",value:function(){if("implicit"===this.transaction.id&&(this.transaction.depth-=1),0===this.transaction.depth)return this.endTransaction("implicit")}},{key:"setProperties",value:function(e){var t,r,n;for(r in this.checkTransactionStart(),t=d(this.properties),e)n=e[r],this.properties[r]=n;return this.emit("changeProperties",this.properties,t),this.checkTransactionEnd()}},{key:"addInport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.inports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addInport",e,this.inports[e]),this.checkTransactionEnd()}},{key:"removeInport",value:function(e){var t;if(e=this.getPortName(e),this.inports[e])return this.checkTransactionStart(),t=this.inports[e],this.setInportMetadata(e,{}),delete this.inports[e],this.emit("removeInport",e,t),this.checkTransactionEnd()}},{key:"renameInport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.inports[e]&&t!==e)return this.checkTransactionStart(),this.inports[t]=this.inports[e],delete this.inports[e],this.emit("renameInport",e,t),this.checkTransactionEnd()}},{key:"setInportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.inports[e]){for(n in this.checkTransactionStart(),r=d(this.inports[e].metadata),this.inports[e].metadata||(this.inports[e].metadata={}),t)null!=(o=t[n])?this.inports[e].metadata[n]=o:delete this.inports[e].metadata[n];return this.emit("changeInport",e,this.inports[e],r,t),this.checkTransactionEnd()}}},{key:"addOutport",value:function(e,t,r,n){if(this.getNode(t))return e=this.getPortName(e),this.checkTransactionStart(),this.outports[e]={process:t,port:this.getPortName(r),metadata:n},this.emit("addOutport",e,this.outports[e]),this.checkTransactionEnd()}},{key:"removeOutport",value:function(e){var t;if(e=this.getPortName(e),this.outports[e])return this.checkTransactionStart(),t=this.outports[e],this.setOutportMetadata(e,{}),delete this.outports[e],this.emit("removeOutport",e,t),this.checkTransactionEnd()}},{key:"renameOutport",value:function(e,t){if(e=this.getPortName(e),t=this.getPortName(t),this.outports[e])return this.checkTransactionStart(),this.outports[t]=this.outports[e],delete this.outports[e],this.emit("renameOutport",e,t),this.checkTransactionEnd()}},{key:"setOutportMetadata",value:function(e,t){var r,n,o;if(e=this.getPortName(e),this.outports[e]){for(n in this.checkTransactionStart(),r=d(this.outports[e].metadata),this.outports[e].metadata||(this.outports[e].metadata={}),t)null!=(o=t[n])?this.outports[e].metadata[n]=o:delete this.outports[e].metadata[n];return this.emit("changeOutport",e,this.outports[e],r,t),this.checkTransactionEnd()}}},{key:"addGroup",value:function(e,t,r){var n;return this.checkTransactionStart(),n={name:e,nodes:t,metadata:r},this.groups.push(n),this.emit("addGroup",n),this.checkTransactionEnd()}},{key:"renameGroup",value:function(e,t){var r,n,o,i;for(this.checkTransactionStart(),n=0,o=(i=this.groups).length;n<o;n++)(r=i[n])&&r.name===e&&(r.name=t,this.emit("renameGroup",e,t));return this.checkTransactionEnd()}},{key:"removeGroup",value:function(e){var t,r,n,o;for(this.checkTransactionStart(),r=0,n=(o=this.groups).length;r<n;r++)(t=o[r])&&t.name===e&&(this.setGroupMetadata(t.name,{}),this.groups.splice(this.groups.indexOf(t),1),this.emit("removeGroup",t));return this.checkTransactionEnd()}},{key:"setGroupMetadata",value:function(e,t){var r,n,o,i,s,a,c;for(this.checkTransactionStart(),o=0,s=(a=this.groups).length;o<s;o++)if((n=a[o])&&n.name===e){for(i in r=d(n.metadata),t)null!=(c=t[i])?n.metadata[i]=c:delete n.metadata[i];this.emit("changeGroup",n,r,t)}return this.checkTransactionEnd()}},{key:"addNode",value:function(e,t,r){var n;return this.checkTransactionStart(),r||(r={}),n={id:e,component:t,metadata:r},this.nodes.push(n),this.emit("addNode",n),this.checkTransactionEnd(),n}},{key:"removeNode",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S,C;if(v=this.getNode(e)){for(this.checkTransactionStart(),C=[],n=0,l=(x=this.edges).length;n<l;n++)(t=x[n]).from.node!==v.id&&t.to.node!==v.id||C.push(t);for(s=0,p=C.length;s<p;s++)t=C[s],this.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(C=[],a=0,u=(k=this.initializers).length;a<u;a++)(i=k[a]).to.node===v.id&&C.push(i);for(c=0,d=C.length;c<d;c++)i=C[c],this.removeInitial(i.to.node,i.to.port);for(w in C=[],E=this.inports)E[w].process===e&&C.push(w);for(g=0,h=C.length;g<h;g++)w=C[g],this.removeInport(w);for(w in C=[],_=this.outports)_[w].process===e&&C.push(w);for(y=0,f=C.length;y<f;y++)w=C[y],this.removeOutport(w);for(b=0,m=(S=this.groups).length;b<m;b++)(r=S[b])&&-1!==(o=r.nodes.indexOf(e))&&r.nodes.splice(o,1);return this.setNodeMetadata(e,{}),-1!==this.nodes.indexOf(v)&&this.nodes.splice(this.nodes.indexOf(v),1),this.emit("removeNode",v),this.checkTransactionEnd()}}},{key:"getNode",value:function(e){var t,r,n,o;for(t=0,r=(o=this.nodes).length;t<r;t++)if((n=o[t])&&n.id===e)return n;return null}},{key:"renameNode",value:function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b;if(this.checkTransactionStart(),d=this.getNode(e)){for(d.id=t,o=0,l=(m=this.edges).length;o<l;o++)(r=m[o])&&(r.from.node===e&&(r.from.node=t),r.to.node===e&&(r.to.node=t));for(a=0,p=(g=this.initializers).length;a<p;a++)(i=g[a])&&i.to.node===e&&(i.to.node=t);for(f in y=this.inports)(h=y[f]).process===e&&(h.process=t);for(f in v=this.outports)(h=v[f]).process===e&&(h.process=t);for(c=0,u=(b=this.groups).length;c<u;c++)(n=b[c])&&-1!==(s=n.nodes.indexOf(e))&&(n.nodes[s]=t);return this.emit("renameNode",e,t),this.checkTransactionEnd()}}},{key:"setNodeMetadata",value:function(e,t){var r,n,o,i;if(o=this.getNode(e)){for(n in this.checkTransactionStart(),r=d(o.metadata),o.metadata||(o.metadata={}),t)null!=(i=t[n])?o.metadata[n]=i:delete o.metadata[n];return this.emit("changeNode",o,r,t),this.checkTransactionEnd()}}},{key:"addEdge",value:function(e,t,r,n){var o,i,s,a,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};for(t=this.getPortName(t),n=this.getPortName(n),i=0,s=(a=this.edges).length;i<s;i++)if((o=a[i]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return;if(this.getNode(e)&&this.getNode(r))return this.checkTransactionStart(),o={from:{node:e,port:t},to:{node:r,port:n},metadata:c},this.edges.push(o),this.emit("addEdge",o),this.checkTransactionEnd(),o}},{key:"addEdgeIndex",value:function(e,t,r,n,o,i){var s,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};if(this.getNode(e)&&this.getNode(n))return t=this.getPortName(t),o=this.getPortName(o),null===i&&(i=void 0),null===r&&(r=void 0),a||(a={}),this.checkTransactionStart(),s={from:{node:e,port:t,index:r},to:{node:n,port:o,index:i},metadata:a},this.edges.push(s),this.emit("addEdge",s),this.checkTransactionEnd(),s}},{key:"removeEdge",value:function(e,t,r,n){var o,i,s,a,c,l,p,u,d,h,f,m;if(this.checkTransactionStart(),t=this.getPortName(t),n=this.getPortName(n),m=[],f=[],r&&n)for(s=i=0,l=(d=this.edges).length;i<l;s=++i)(o=d[s]).from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);else for(s=a=0,p=(h=this.edges).length;a<p;s=++a)(o=h[s]).from.node===e&&o.from.port===t||o.to.node===e&&o.to.port===t?(this.setEdgeMetadata(o.from.node,o.from.port,o.to.node,o.to.port,{}),m.push(o)):f.push(o);for(this.edges=f,c=0,u=m.length;c<u;c++)o=m[c],this.emit("removeEdge",o);return this.checkTransactionEnd()}},{key:"getEdge",value:function(e,t,r,n){var o,i,s,a,c;for(t=this.getPortName(t),n=this.getPortName(n),s=i=0,a=(c=this.edges).length;i<a;s=++i)if((o=c[s])&&o.from.node===e&&o.from.port===t&&o.to.node===r&&o.to.port===n)return o;return null}},{key:"setEdgeMetadata",value:function(e,t,r,n,o){var i,s,a,c;if(s=this.getEdge(e,t,r,n)){for(a in this.checkTransactionStart(),i=d(s.metadata),s.metadata||(s.metadata={}),o)null!=(c=o[a])?s.metadata[a]=c:delete s.metadata[a];return this.emit("changeEdge",s,i,o),this.checkTransactionEnd()}}},{key:"addInitial",value:function(e,t,r,n){var o;if(this.getNode(t))return r=this.getPortName(r),this.checkTransactionStart(),o={from:{data:e},to:{node:t,port:r},metadata:n},this.initializers.push(o),this.emit("addInitial",o),this.checkTransactionEnd(),o}},{key:"addInitialIndex",value:function(e,t,r,n,o){var i;if(this.getNode(t))return null===n&&(n=void 0),r=this.getPortName(r),this.checkTransactionStart(),i={from:{data:e},to:{node:t,port:r,index:n},metadata:o},this.initializers.push(i),this.emit("addInitial",i),this.checkTransactionEnd(),i}},{key:"addGraphInitial",value:function(e,t,r){var n;if(n=this.inports[t])return this.addInitial(e,n.process,n.port,r)}},{key:"addGraphInitialIndex",value:function(e,t,r,n){var o;if(o=this.inports[t])return this.addInitialIndex(e,o.process,o.port,r,n)}},{key:"removeInitial",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(t=this.getPortName(t),this.checkTransactionStart(),p=[],l=[],o=n=0,s=(c=this.initializers).length;n<s;o=++n)(r=c[o]).to.node===e&&r.to.port===t?p.push(r):l.push(r);for(this.initializers=l,i=0,a=p.length;i<a;i++)r=p[i],this.emit("removeInitial",r);return this.checkTransactionEnd()}},{key:"removeGraphInitial",value:function(e){var t;if(t=this.inports[e])return this.removeInitial(t.process,t.port)}},{key:"toDOT",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g;for(e=function(e){return e.replace(/\s*/g,"")},t=function(e){return e.replace(/\./g,"")},n="digraph {\n",i=0,p=(f=this.nodes).length;i<p;i++)h=f[i],n+="    ".concat(e(h.id)," [label=").concat(h.id," shape=box]\n");for(s=c=0,u=(m=this.initializers).length;c<u;s=++c)r="function"==typeof(a=m[s]).from.data?"Function":a.from.data,n+="    data".concat(s," [label=\"'").concat(r,"'\" shape=plaintext]\n"),n+="    data".concat(s," -> ").concat(e(a.to.node),"[headlabel=").concat(t(a.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");for(l=0,d=(g=this.edges).length;l<d;l++)o=g[l],n+="    ".concat(e(o.from.node)," -> ").concat(e(o.to.node),"[taillabel=").concat(t(o.from.port)," headlabel=").concat(t(o.to.port)," labelfontcolor=blue labelfontsize=8.0]\n");return n+="}"}},{key:"toYUML",value:function(){var e,t,r,n,o,i,s,a,c;for(c=[],t=0,o=(s=this.initializers).length;t<o;t++)r=s[t],c.push("(start)[".concat(r.to.port,"]->(").concat(r.to.node,")"));for(n=0,i=(a=this.edges).length;n<i;n++)e=a[n],c.push("(".concat(e.from.node,")[").concat(e.from.port,"]->(").concat(e.to.node,")"));return c.join(",")}},{key:"toJSON",value:function(){var e,t,r,n,o,i,s,a,c,l,p,u,d,h,f,m,g,y,v,b,w,x,k,E,_,S;for(g in a={caseSensitive:this.caseSensitive,properties:{},inports:{},outports:{},groups:[],processes:{},connections:[]},this.name&&(a.properties.name=this.name),v=this.properties)S=v[g],a.properties[g]=S;for(y in b=this.inports)m=b[y],a.inports[y]=m;for(y in w=this.outports)m=w[y],a.outports[y]=m;for(o=0,p=(x=this.groups).length;o<p;o++)n={name:(r=x[o]).name,nodes:r.nodes},Object.keys(r.metadata).length&&(n.metadata=r.metadata),a.groups.push(n);for(s=0,u=(k=this.nodes).length;s<u;s++)f=k[s],a.processes[f.id]={component:f.component},f.metadata&&(a.processes[f.id].metadata=f.metadata);for(c=0,d=(E=this.edges).length;c<d;c++)e={src:{process:(t=E[c]).from.node,port:t.from.port,index:t.from.index},tgt:{process:t.to.node,port:t.to.port,index:t.to.index}},Object.keys(t.metadata).length&&(e.metadata=t.metadata),a.connections.push(e);for(l=0,h=(_=this.initializers).length;l<h;l++)i=_[l],a.connections.push({data:i.from.data,tgt:{process:i.to.node,port:i.to.port,index:i.to.index}});return a}},{key:"save",value:function(e,t){var n;return f.isBrowser()?t(new Error("Saving graphs not supported on browser")):(n=JSON.stringify(this.toJSON(),null,4),e.match(/\.json$/)||(e="".concat(e,".json")),r(12).writeFile(e,n,"utf-8",(function(r,n){return r?t(r):t(null,e)})))}}])&&i(t.prototype,n),c&&i(t,c),p}(p);return e.prototype.name="",e.prototype.caseSensitive=!1,e.prototype.properties={},e.prototype.nodes=[],e.prototype.edges=[],e.prototype.initializers=[],e.prototype.inports={},e.prototype.outports={},e.prototype.groups=[],e}.call(this),t.Graph=u,t.createGraph=function(e,t){return new u(e,t)},t.loadJSON=function(e,t){var r,n,o,i,s,a,c,l,p,d,h,f,m,g,y,v,b,w,x,k,E,_,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(g in(i="string"==typeof e?JSON.parse(e):JSON.parse(JSON.stringify(e))).properties||(i.properties={}),i.processes||(i.processes={}),i.connections||(i.connections=[]),r=i.caseSensitive||!1,(s=new u(i.properties.name,{caseSensitive:r})).startTransaction("loadJSON",S),m={},v=i.properties)_=v[g],"name"!==g&&(m[g]=_);for(l in s.setProperties(m),b=i.processes)(o=b[l]).metadata||(o.metadata={}),s.addNode(l,o.component,o.metadata);for(c=0,d=(w=i.connections).length;c<d;c++)S=(n=w[c]).metadata?n.metadata:{},void 0===n.data?"number"!=typeof n.src.index&&"number"!=typeof n.tgt.index?s.addEdge(n.src.process,s.getPortName(n.src.port),n.tgt.process,s.getPortName(n.tgt.port),S):s.addEdgeIndex(n.src.process,s.getPortName(n.src.port),n.src.index,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,S):"number"==typeof n.tgt.index?s.addInitialIndex(n.data,n.tgt.process,s.getPortName(n.tgt.port),n.tgt.index,S):s.addInitial(n.data,n.tgt.process,s.getPortName(n.tgt.port),S);if(i.inports)for(y in x=i.inports)f=x[y],s.addInport(y,f.process,s.getPortName(f.port),f.metadata);if(i.outports)for(y in k=i.outports)f=k[y],s.addOutport(y,f.process,s.getPortName(f.port),f.metadata);if(i.groups)for(p=0,h=(E=i.groups).length;p<h;p++)a=E[p],s.addGroup(a.name,a.nodes,a.metadata||{});return s.endTransaction("loadJSON"),t(null,s)},t.loadFBP=function(e,n){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{o=r(47).parse(e,{caseSensitive:s})}catch(e){return n(e)}return t.loadJSON(o,n,i)},t.loadHTTP=function(e,t){var r;return(r=new XMLHttpRequest).onreadystatechange=function(){if(4===r.readyState)return 200!==r.status?t(new Error("Failed to load ".concat(e,": HTTP ").concat(r.status))):t(null,r.responseText)},r.open("GET",e,!0),r.send()},t.loadFile=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!f.isBrowser())return r(12).readFile(e,"utf-8",(function(r,o){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(o,n,{},i):(s=JSON.parse(o),t.loadJSON(s,n,{}))}));t.loadHTTP(e,(function(r,i){var s;return r?n(r):"fbp"===e.split(".").pop()?t.loadFBP(i,n,o):(s=JSON.parse(i),t.loadJSON(s,n,o))}))},m=function(e){var t,r,n,o,i,s,a,c,l,p,u,h,f,m,g,y,v,b,w,x;for(n=0,c=(m=d(e.groups).reverse()).length;n<c;n++)null!=(r=m[n])&&e.removeGroup(r.name);for(f in g=d(e.outports))g[f],e.removeOutport(f);for(f in y=d(e.inports))y[f],e.removeInport(f);for(e.setProperties({}),i=0,l=(v=d(e.initializers).reverse()).length;i<l;i++)o=v[i],e.removeInitial(o.to.node,o.to.port);for(s=0,p=(b=d(e.edges).reverse()).length;s<p;s++)t=b[s],e.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);for(x=[],a=0,u=(w=d(e.nodes).reverse()).length;a<u;a++)h=w[a],x.push(e.removeNode(h.id));return x},h=function(e,t){var r,n,o,i,s,a,c,l,p,u,d,h,f,g,y,v,b,w,x,k,E;for(m(e),o=0,l=(y=t.nodes).length;o<l;o++)h=y[o],e.addNode(h.id,h.component,h.metadata);for(s=0,p=(v=t.edges).length;s<p;s++)r=v[s],e.addEdge(r.from.node,r.from.port,r.to.node,r.to.port,r.metadata);for(a=0,u=(b=t.initializers).length;a<u;a++)i=b[a],e.addInitial(i.from.data,i.to.node,i.to.port,i.metadata);for(g in e.setProperties(t.properties),w=t.inports)f=w[g],e.addInport(g,f.process,f.port,f.metadata);for(g in x=t.outports)f=x[g],e.addOutport(g,f.process,f.port,f.metadata);for(E=[],c=0,d=(k=t.groups).length;c<d;c++)n=k[c],E.push(e.addGroup(n.name,n.nodes,n.metadata));return E},t.equivalent=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},t.mergeResolveTheirs=h},function(e,t,r){(function(e){t.isBrowser=function(){return void 0===e||!e.execPath||!e.execPath.match(/node|iojs/)},t.deprecated=function(r){if(!t.isBrowser()){if(e.env.NOFLO_FATAL_DEPRECATED)throw new Error(r);return console.warn(r)}if(window.NOFLO_FATAL_DEPRECATED)throw new Error(r);console.warn(r)}}).call(this,r(6))},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g,y,v,b,w,x=function(e,t){if(!(e instanceof t))throw new Error("Bound instance method accessed before binding")},k=r(11);f=k.EventEmitter,b=r(32),w=function(e){var t;switch(t=e.args,e.cmd){case"addNode":return"".concat(t.id,"(").concat(t.component,")");case"removeNode":return"DEL ".concat(t.id,"(").concat(t.component,")");case"renameNode":return"RENAME ".concat(t.oldId," ").concat(t.newId);case"changeNode":return"META ".concat(t.id);case"addEdge":return"".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"removeEdge":return"".concat(t.from.node," ").concat(t.from.port," -X> ").concat(t.to.port," ").concat(t.to.node);case"changeEdge":return"META ".concat(t.from.node," ").concat(t.from.port," -> ").concat(t.to.port," ").concat(t.to.node);case"addInitial":return"'".concat(t.from.data,"' -> ").concat(t.to.port," ").concat(t.to.node);case"removeInitial":return"'".concat(t.from.data,"' -X> ").concat(t.to.port," ").concat(t.to.node);case"startTransaction":return">>> ".concat(e.rev,": ").concat(t.id);case"endTransaction":return"<<< ".concat(e.rev,": ").concat(t.id);case"changeProperties":return"PROPERTIES";case"addGroup":return"GROUP ".concat(t.name);case"renameGroup":return"RENAME GROUP ".concat(t.oldName," ").concat(t.newName);case"removeGroup":return"DEL GROUP ".concat(t.name);case"changeGroup":return"META GROUP ".concat(t.name);case"addInport":return"INPORT ".concat(t.name);case"removeInport":return"DEL INPORT ".concat(t.name);case"renameInport":return"RENAME INPORT ".concat(t.oldId," ").concat(t.newId);case"changeInport":return"META INPORT ".concat(t.name);case"addOutport":return"OUTPORT ".concat(t.name);case"removeOutport":return"DEL OUTPORT ".concat(t.name);case"renameOutport":return"RENAME OUTPORT ".concat(t.oldId," ").concat(t.newId);case"changeOutport":return"META OUTPORT ".concat(t.name);default:throw new Error("Unknown journal entry: ".concat(e.cmd))}},v=function(e,t){var r,n,o;for(r in n={},e)o=e[r],n[r]=null;for(r in t)o=t[r],n[r]=o;return n},g=function(){var e=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this)).graph=e,n.lastRevision=0,n}return a(r,[{key:"putTransaction",value:function(e,t){return e>this.lastRevision&&(this.lastRevision=e),this.emit("transaction",e)}},{key:"fetchTransaction",value:function(e,t){}}]),r}(f);return e.prototype.lastRevision=0,e}.call(this),y=function(e){c(r,e);var t=p(r);function r(e){var n;return i(this,r),(n=t.call(this,e)).transactions=[],n}return a(r,[{key:"putTransaction",value:function(e,t){return o(h(r.prototype),"putTransaction",this).call(this,e,t),this.transactions[e]=t}},{key:"fetchTransaction",value:function(e){return this.transactions[e]}}]),r}(g),m=function(){var e=function(e){c(n,e);var t=p(n);function n(e,r,o){var s,a,c,l,p,u,h,f,m,g,v,b,w,x,k,E,_,S,C,P,A;if(i(this,n),(s=t.call(this)).startTransaction=s.startTransaction.bind(d(s)),s.endTransaction=s.endTransaction.bind(d(s)),s.graph=e,s.entries=[],s.subscribed=!0,s.store=o||new y(s.graph),0===s.store.transactions.length){for(s.currentRevision=-1,s.startTransaction("initial",r),p=0,f=(k=s.graph.nodes).length;p<f;p++)x=k[p],s.appendCommand("addNode",x);for(h=0,m=(E=s.graph.edges).length;h<m;h++)a=E[h],s.appendCommand("addEdge",a);for(b=0,g=(_=s.graph.initializers).length;b<g;b++)l=_[b],s.appendCommand("addInitial",l);for(u in Object.keys(s.graph.properties).length>0&&s.appendCommand("changeProperties",s.graph.properties,{}),S=s.graph.inports)A=S[u],s.appendCommand("addInport",{name:u,port:A});for(u in C=s.graph.outports)A=C[u],s.appendCommand("addOutport",{name:u,port:A});for(w=0,v=(P=s.graph.groups).length;w<v;w++)c=P[w],s.appendCommand("addGroup",c);s.endTransaction("initial",r)}else s.currentRevision=s.store.lastRevision;return s.graph.on("addNode",(function(e){return s.appendCommand("addNode",e)})),s.graph.on("removeNode",(function(e){return s.appendCommand("removeNode",e)})),s.graph.on("renameNode",(function(e,t){var r;return r={oldId:e,newId:t},s.appendCommand("renameNode",r)})),s.graph.on("changeNode",(function(e,t){return s.appendCommand("changeNode",{id:e.id,new:e.metadata,old:t})})),s.graph.on("addEdge",(function(e){return s.appendCommand("addEdge",e)})),s.graph.on("removeEdge",(function(e){return s.appendCommand("removeEdge",e)})),s.graph.on("changeEdge",(function(e,t){return s.appendCommand("changeEdge",{from:e.from,to:e.to,new:e.metadata,old:t})})),s.graph.on("addInitial",(function(e){return s.appendCommand("addInitial",e)})),s.graph.on("removeInitial",(function(e){return s.appendCommand("removeInitial",e)})),s.graph.on("changeProperties",(function(e,t){return s.appendCommand("changeProperties",{new:e,old:t})})),s.graph.on("addGroup",(function(e){return s.appendCommand("addGroup",e)})),s.graph.on("renameGroup",(function(e,t){return s.appendCommand("renameGroup",{oldName:e,newName:t})})),s.graph.on("removeGroup",(function(e){return s.appendCommand("removeGroup",e)})),s.graph.on("changeGroup",(function(e,t){return s.appendCommand("changeGroup",{name:e.name,new:e.metadata,old:t})})),s.graph.on("addExport",(function(e){return s.appendCommand("addExport",e)})),s.graph.on("removeExport",(function(e){return s.appendCommand("removeExport",e)})),s.graph.on("addInport",(function(e,t){return s.appendCommand("addInport",{name:e,port:t})})),s.graph.on("removeInport",(function(e,t){return s.appendCommand("removeInport",{name:e,port:t})})),s.graph.on("renameInport",(function(e,t){return s.appendCommand("renameInport",{oldId:e,newId:t})})),s.graph.on("changeInport",(function(e,t,r){return s.appendCommand("changeInport",{name:e,new:t.metadata,old:r})})),s.graph.on("addOutport",(function(e,t){return s.appendCommand("addOutport",{name:e,port:t})})),s.graph.on("removeOutport",(function(e,t){return s.appendCommand("removeOutport",{name:e,port:t})})),s.graph.on("renameOutport",(function(e,t){return s.appendCommand("renameOutport",{oldId:e,newId:t})})),s.graph.on("changeOutport",(function(e,t,r){return s.appendCommand("changeOutport",{name:e,new:t.metadata,old:r})})),s.graph.on("startTransaction",(function(e,t){return s.startTransaction(e,t)})),s.graph.on("endTransaction",(function(e,t){return s.endTransaction(e,t)})),s}return a(n,[{key:"startTransaction",value:function(e,t){if(x(this,n),this.subscribed){if(this.entries.length>0)throw Error("Inconsistent @entries");return this.currentRevision++,this.appendCommand("startTransaction",{id:e,metadata:t},this.currentRevision)}}},{key:"endTransaction",value:function(e,t){if(x(this,n),this.subscribed)return this.appendCommand("endTransaction",{id:e,metadata:t},this.currentRevision),this.store.putTransaction(this.currentRevision,this.entries),this.entries=[]}},{key:"appendCommand",value:function(e,t,r){var n;if(this.subscribed)return n={cmd:e,args:b(t)},null!=r&&(n.rev=r),this.entries.push(n)}},{key:"executeEntry",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.addNode(t.id,t.component);case"removeNode":return this.graph.removeNode(t.id);case"renameNode":return this.graph.renameNode(t.oldId,t.newId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.old,t.new));case"addEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.old,t.new));case"addInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"removeInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.new);case"addGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"renameGroup":return this.graph.renameGroup(t.oldName,t.newName);case"removeGroup":return this.graph.removeGroup(t.name);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.old,t.new));case"addInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"removeInport":return this.graph.removeInport(t.name);case"renameInport":return this.graph.renameInport(t.oldId,t.newId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.old,t.new));case"addOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata(t.name));case"removeOutport":return this.graph.removeOutport;case"renameOutport":return this.graph.renameOutport(t.oldId,t.newId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.old,t.new));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"executeEntryInversed",value:function(e){var t;switch(t=e.args,e.cmd){case"addNode":return this.graph.removeNode(t.id);case"removeNode":return this.graph.addNode(t.id,t.component);case"renameNode":return this.graph.renameNode(t.newId,t.oldId);case"changeNode":return this.graph.setNodeMetadata(t.id,v(t.new,t.old));case"addEdge":return this.graph.removeEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"removeEdge":return this.graph.addEdge(t.from.node,t.from.port,t.to.node,t.to.port);case"changeEdge":return this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,v(t.new,t.old));case"addInitial":return this.graph.removeInitial(t.to.node,t.to.port);case"removeInitial":return this.graph.addInitial(t.from.data,t.to.node,t.to.port);case"startTransaction":case"endTransaction":return null;case"changeProperties":return this.graph.setProperties(t.old);case"addGroup":return this.graph.removeGroup(t.name);case"renameGroup":return this.graph.renameGroup(t.newName,t.oldName);case"removeGroup":return this.graph.addGroup(t.name,t.nodes,t.metadata);case"changeGroup":return this.graph.setGroupMetadata(t.name,v(t.new,t.old));case"addInport":return this.graph.removeInport(t.name);case"removeInport":return this.graph.addInport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameInport":return this.graph.renameInport(t.newId,t.oldId);case"changeInport":return this.graph.setInportMetadata(t.name,v(t.new,t.old));case"addOutport":return this.graph.removeOutport(t.name);case"removeOutport":return this.graph.addOutport(t.name,t.port.process,t.port.port,t.port.metadata);case"renameOutport":return this.graph.renameOutport(t.newId,t.oldId);case"changeOutport":return this.graph.setOutportMetadata(t.name,v(t.new,t.old));default:throw new Error("Unknown journal entry: ".concat(e.cmd))}}},{key:"moveToRevision",value:function(e){var t,r,n,o,i,s,a,c,l,p,u,d,h;if(e!==this.currentRevision){if(this.subscribed=!1,e>this.currentRevision)for(l=o=p=this.currentRevision+1,u=e;p<=u?o<=u:o>=u;l=p<=u?++o:--o)for(i=0,s=(d=this.store.fetchTransaction(l)).length;i<s;i++)r=d[i],this.executeEntry(r);else for(l=a=this.currentRevision,h=e+1;a>=h;l=a+=-1)for(n=c=(t=this.store.fetchTransaction(l)).length-1;c>=0;n=c+=-1)this.executeEntryInversed(t[n]);return this.currentRevision=e,this.subscribed=!0}}},{key:"undo",value:function(){if(this.canUndo())return this.moveToRevision(this.currentRevision-1)}},{key:"canUndo",value:function(){return this.currentRevision>0}},{key:"redo",value:function(){if(this.canRedo())return this.moveToRevision(this.currentRevision+1)}},{key:"canRedo",value:function(){return this.currentRevision<this.store.lastRevision}},{key:"toPrettyString",value:function(e,t){var r,n,o,i,s,a,c,l,p;for(a=[],c=o=l=e|=0,p=t|=this.store.lastRevision;l<=p?o<p:o>p;c=l<=p?++o:--o)for(i=0,s=(r=this.store.fetchTransaction(c)).length;i<s;i++)n=r[i],a.push(w(n));return a.join("\n")}},{key:"toJSON",value:function(e,t){var r,n,o,i,s,a,c,l;for(r=[],a=o=e|=0,c=t|=this.store.lastRevision;o<c;a=o+=1)for(i=0,s=(l=this.store.fetchTransaction(a)).length;i<s;i++)n=l[i],r.push(w(n));return r}},{key:"save",value:function(e,t){var n;return n=JSON.stringify(this.toJSON(),null,4),r(12).writeFile("".concat(e,".json"),n,"utf-8",(function(r,n){if(r)throw r;return t(e)}))}}]),n}(f);return e.prototype.graph=null,e.prototype.entries=[],e.prototype.subscribed=!0,e}.call(this),t.Journal=m,t.JournalStore=g,t.MemoryJournalStore=y},function(e,t){t.linear=function(e){return e},t.inQuad=function(e){return e*e},t.outQuad=function(e){return e*(2-e)},t.inOutQuad=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},t.inCube=function(e){return e*e*e},t.outCube=function(e){return--e*e*e+1},t.inOutCube=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},t.inQuart=function(e){return e*e*e*e},t.outQuart=function(e){return 1- --e*e*e*e},t.inOutQuart=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},t.inQuint=function(e){return e*e*e*e*e},t.outQuint=function(e){return--e*e*e*e*e+1},t.inOutQuint=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},t.inSine=function(e){return 1-Math.cos(e*Math.PI/2)},t.outSine=function(e){return Math.sin(e*Math.PI/2)},t.inOutSine=function(e){return.5*(1-Math.cos(Math.PI*e))},t.inExpo=function(e){return 0==e?0:Math.pow(1024,e-1)},t.outExpo=function(e){return 1==e?e:1-Math.pow(2,-10*e)},t.inOutExpo=function(e){return 0==e?0:1==e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},t.inCirc=function(e){return 1-Math.sqrt(1-e*e)},t.outCirc=function(e){return Math.sqrt(1- --e*e)},t.inOutCirc=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.inBack=function(e){var t=1.70158;return e*e*((t+1)*e-t)},t.outBack=function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},t.inOutBack=function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},t.inBounce=function(e){return 1-t.outBounce(1-e)},t.outBounce=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.inOutBounce=function(e){return e<.5?.5*t.inBounce(2*e):.5*t.outBounce(2*e-1)+.5},t["in-quad"]=t.inQuad,t["out-quad"]=t.outQuad,t["in-out-quad"]=t.inOutQuad,t["in-cube"]=t.inCube,t["out-cube"]=t.outCube,t["in-out-cube"]=t.inOutCube,t["in-quart"]=t.inQuart,t["out-quart"]=t.outQuart,t["in-out-quart"]=t.inOutQuart,t["in-quint"]=t.inQuint,t["out-quint"]=t.outQuint,t["in-out-quint"]=t.inOutQuint,t["in-sine"]=t.inSine,t["out-sine"]=t.outSine,t["in-out-sine"]=t.inOutSine,t["in-expo"]=t.inExpo,t["out-expo"]=t.outExpo,t["in-out-expo"]=t.inOutExpo,t["in-circ"]=t.inCirc,t["out-circ"]=t.outCirc,t["in-out-circ"]=t.inOutCirc,t["in-back"]=t.inBack,t["out-back"]=t.outBack,t["in-out-back"]=t.inOutBack,t["in-bounce"]=t.inBounce,t["out-bounce"]=t.outBounce,t["in-out-bounce"]=t.inOutBounce},function(e,t,r){"use strict";
/** @license React v17.0.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(69),o=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,a=60110,c=60112;t.Suspense=60113;var l=60115,p=60116;if("function"==typeof Symbol&&Symbol.for){var u=Symbol.for;o=u("react.element"),i=u("react.portal"),t.Fragment=u("react.fragment"),t.StrictMode=u("react.strict_mode"),t.Profiler=u("react.profiler"),s=u("react.provider"),a=u("react.context"),c=u("react.forward_ref"),t.Suspense=u("react.suspense"),l=u("react.memo"),p=u("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function h(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function y(){}function v(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(h(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,n(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var n,i={},s=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,n)&&!k.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),p=0;p<c;p++)l[p]=arguments[p+2];i.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps)void 0===i[n]&&(i[n]=c[n]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:w.current}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var S=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,n,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case o:case i:c=!0}}if(c)return s=s(c=e),e=""===n?"."+C(c,0):n,Array.isArray(s)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),P(s,t,r,"",(function(e){return e}))):null!=s&&(_(s)&&(s=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+e)),t.push(s)),1;if(c=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var p=n+C(a=e[l],l);c+=P(a,t,r,p,s)}else if("function"==typeof(p=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e)))for(e=p.call(e),l=0;!(a=e.next()).done;)c+=P(a=a.value,t,r,p=n+C(a,l++),s);else if("object"===a)throw t=""+e,Error(h(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function A(e,t,r){if(null==e)return e;var n=[],o=0;return P(e,n,"","",(function(e){return t.call(r,e,o++)})),n}function O(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var T={current:null};function D(){var e=T.current;if(null===e)throw Error(h(321));return e}var N={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:n};t.Children={map:A,forEach:function(e,t,r){A(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error(h(143));return e}},t.Component=g,t.PureComponent=v,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null==e)throw Error(h(267,e));var i=n({},e.props),s=e.key,a=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,c=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(p in t)x.call(t,p)&&!k.hasOwnProperty(p)&&(i[p]=void 0===t[p]&&void 0!==l?l[p]:t[p])}var p=arguments.length-2;if(1===p)i.children=r;else if(1<p){l=Array(p);for(var u=0;u<p;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:o,type:e.type,key:s,ref:a,props:i,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return D().useCallback(e,t)},t.useContext=function(e,t){return D().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return D().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return D().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return D().useLayoutEffect(e,t)},t.useMemo=function(e,t){return D().useMemo(e,t)},t.useReducer=function(e,t,r){return D().useReducer(e,t,r)},t.useRef=function(e){return D().useRef(e)},t.useState=function(e){return D().useState(e)},t.version="17.0.1"},function(e,t,r){"use strict";var n=r(69),o={};function i(e,t,r,n,o,i,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,o,i,s,a],p=0;(c=new Error(t.replace(/%s/g,(function(){return l[p++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}e.exports=function(e,t,r){var s=[],a={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},c={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},l={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var r=0;r<t.length;r++)u(e,t[r])},childContextTypes:function(e,t){e.childContextTypes=n({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=n({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=h(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=n({},e.propTypes,t)},statics:function(e,t){!function(e,t){if(!t)return;for(var r in t){var n=t[r];if(t.hasOwnProperty(r)){if(i(!(r in l),'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r),r in e)return i("DEFINE_MANY_MERGED"===(c.hasOwnProperty(r)?c[r]:null),"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),void(e[r]=h(e[r],n));e[r]=n}}}(e,t)},autobind:function(){}};function p(e,t){var r=a.hasOwnProperty(t)?a[t]:null;v.hasOwnProperty(t)&&i("OVERRIDE_BASE"===r,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&i("DEFINE_MANY"===r||"DEFINE_MANY_MERGED"===r,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function u(e,r){if(r){i("function"!=typeof r,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),i(!t(r),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype,o=n.__reactAutoBindPairs;for(var s in r.hasOwnProperty("mixins")&&l.mixins(e,r.mixins),r)if(r.hasOwnProperty(s)&&"mixins"!==s){var c=r[s],u=n.hasOwnProperty(s);if(p(u,s),l.hasOwnProperty(s))l[s](e,c);else{var d=a.hasOwnProperty(s);if("function"==typeof c&&!d&&!u&&!1!==r.autobind)o.push(s,c),n[s]=c;else if(u){var m=a[s];i(d&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,s),"DEFINE_MANY_MERGED"===m?n[s]=h(n[s],c):"DEFINE_MANY"===m&&(n[s]=f(n[s],c))}else n[s]=c}}}else;}function d(e,t){for(var r in i(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),t)t.hasOwnProperty(r)&&(i(void 0===e[r],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),e[r]=t[r]);return e}function h(e,t){return function(){var r=e.apply(this,arguments),n=t.apply(this,arguments);if(null==r)return n;if(null==n)return r;var o={};return d(o,r),d(o,n),o}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function m(e,t){return t.bind(e)}var g={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},v={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},b=function(){};return n(b.prototype,e.prototype,v),function(e){var t=function(e,n,s){this.__reactAutoBindPairs.length&&function(e){for(var t=e.__reactAutoBindPairs,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[n]=m(e,o)}}(this),this.props=e,this.context=n,this.refs=o,this.updater=s||r,this.state=null;var a=this.getInitialState?this.getInitialState():null;i("object"==typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=a};for(var n in t.prototype=new b,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],s.forEach(u.bind(null,t)),u(t,g),u(t,e),u(t,y),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),i(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),a)t.prototype[n]||(t.prototype[n]=null);return t}}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(97),a=r(516),c=r(162).ModalBG,l=r(73),p=window.unwrap?window.unwrap:function(e){return e},u={27:function(e){e.refs.graph&&e.refs.graph.cancelPreviewEdge()},46:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes,n=e.refs.graph.state.selectedEdges,o=e.props.menus;for(var i in r)if(r.hasOwnProperty(i)){var s=t.getNode(i);o.node.actions.delete(t,i,s)}n.map((function(e){o.edge.actions.delete(t,null,e)}))},70:function(e){e.triggerFit()},83:function(e){var t=e.refs.graph.props.graph,r=e.refs.graph.state.selectedNodes;for(var n in r)if(r.hasOwnProperty(n)){var o=t.getNode(n);e.focusNode(o);break}}},d=[70,83,27];e.exports.register=function(e){var t=e.TheGraph;t.config.app={container:{className:"the-graph-app",name:"app"},canvas:{ref:"canvas",className:"app-canvas",style:{position:"absolute",top:0,left:0}},svg:{className:"app-svg",ref:"svg",style:{position:"absolute",top:0,left:0}},svgGroup:{className:"view"},graph:{ref:"graph"},tooltip:{ref:"tooltip"},modal:{className:"context"}},t.factories.app={createAppContainer:function(e,t){var r=["div",e];Array.isArray(t)&&(r=r.concat(t));return n.createElement.apply(n,r)},createAppCanvas:t.factories.createCanvas,createAppSvg:t.factories.createSvg,createAppSvgGroup:t.factories.createGroup,createAppGraph:function(e){return t.Graph(e)},createAppTooltip:function(e){return t.Tooltip(e)},createAppModalGroup:t.factories.createGroup,createAppModalBackground:function(e){return c(e)}};var r=[];n.Animate&&r.push(n.Animate),t.App=n.createFactory(i({displayName:"TheGraphApp",mixins:r,getDefaultProps:function(){return{width:null,height:null,readonly:!1,nodeIcons:{},minZoom:.15,maxZoom:15,offsetX:0,offsetY:0,menus:null,enableHotKeys:!1,getMenuDef:null,onPanScale:null,onNodeSelection:null,onEdgeSelection:null}},getInitialState:function(){var e=l.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);return{x:e.x,y:e.y,scale:e.scale,width:this.props.width,height:this.props.height,minZoom:this.props.minZoom,maxZoom:this.props.maxZoom,trackStartX:null,trackStartY:null,tooltip:"",tooltipX:0,tooltipY:0,tooltipVisible:!1,contextElement:null,contextType:null,offsetY:this.props.offsetY,offsetX:this.props.offsetX}},zoomFactor:0,zoomX:0,zoomY:0,onWheel:function(e){e.preventDefault(),this.zoomFactor||(this.zoomFactor=0),this.zoomFactor+=e.deltaY?e.deltaY:0-e.wheelDeltaY,this.zoomX=e.clientX,this.zoomY=e.clientY,requestAnimationFrame(this.scheduleWheelZoom)},scheduleWheelZoom:function(){if(!isNaN(this.zoomFactor)){var e=this.zoomFactor/-500;e=Math.min(.5,Math.max(-.5,e));var t=this.state.scale+this.state.scale*e;if(this.zoomFactor=0,t<this.state.minZoom?t=this.state.minZoom:t>this.state.maxZoom&&(t=this.state.maxZoom),t!==this.state.scale){var r=t/this.state.scale,n=this.state.x,o=this.state.y,i=this.zoomX,s=this.zoomY,a=r*(n-i)+i,c=r*(o-s)+s;this.setState({scale:t,x:a,y:c,tooltipVisible:!1})}}},lastScale:1,lastX:0,lastY:0,pinching:!1,onTransformStart:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.lastScale=1,this.lastX=e.center.x,this.lastY=e.center.y,this.pinching=!0},onTransform:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation();var t=this.state.scale,r=this.state.x,n=this.state.y,o=e.scale,i=o-this.lastScale+1;this.lastScale=o;var s=i*t;s=Math.max(s,this.props.minZoom);var a=e.center.x,c=e.center.y,l=i*(r-a)+a+(a-this.lastX),p=i*(n-c)+c+(c-this.lastY);this.lastX=a,this.lastY=c,this.setState({scale:s,x:l,y:p,tooltipVisible:!1})},onTransformEnd:function(e){e.srcEvent.stopPropagation(),e.srcEvent.stopImmediatePropagation(),this.pinching=!1},onTrackStart:function(e){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({trackStartX:this.state.x,trackStartY:this.state.y})},onTrack:function(e){this.pinching||this.menuShown||this.setState({x:this.state.trackStartX+e.gesture.deltaX,y:this.state.trackStartY+e.gesture.deltaY})},onTrackEnd:function(e){e.stopPropagation();var t=o.findDOMNode(this);t.removeEventListener("panmove",this.onTrack),t.removeEventListener("panend",this.onTrackEnd),this.setState({trackStartX:null,trackStartY:null})},onPanScale:function(){this.props.onPanScale&&this.props.onPanScale(this.state.x,this.state.y,this.state.scale)},defaultGetMenuDef:function(e){if(e.type&&this.props.menus&&this.props.menus[e.type]){var t=this.props.menus[e.type];return t.callback?t.callback(t,e):t}return null},showContext:function(e){this.setState({contextMenu:e,tooltipVisible:!1})},hideContext:function(e){this.setState({contextMenu:null})},changeTooltip:function(e){var t=e.detail.tooltip,r=e.detail.x+10,n=6*t.length;r+n>this.props.width&&(r=e.detail.x-n-10),this.setState({tooltip:t,tooltipVisible:!0,tooltipX:r,tooltipY:e.detail.y+20})},hideTooltip:function(e){this.setState({tooltip:"",tooltipVisible:!1})},triggerFit:function(e){var r=l.findFit(this.props.graph,this.props.width,this.props.height,t.config.nodeSize);this.setState({x:r.x,y:r.y,scale:r.scale})},focusNode:function(e){var r=t.config.focusAnimationDuration,n=l.findNodeFit(e,this.state.width,this.state.height,t.config.nodeSize),o={x:-(this.state.x-this.state.width/2)/this.state.scale,y:-(this.state.y-this.state.height/2)/this.state.scale},i={x:e.metadata.x,y:e.metadata.y},s=l.findAreaFit(o,i,this.state.width,this.state.height,t.config.nodeSize),a=Math.abs(s.scale-this.state.scale),c=Math.abs(n.scale-s.scale),p=a+c;this.animate?this.animate({x:s.x,y:s.y,scale:s.scale},r*(a/p),"in-quint",function(){this.animate({x:n.x,y:n.y,scale:n.scale},r*(c/p),"out-quint")}.bind(this)):this.setState({x:n.x,y:n.y,scale:n.scale})},edgeStart:function(e){this.refs.graph.edgeStart(e),this.hideContext()},componentDidMount:function(){var e=o.findDOMNode(this.refs.svg);this.props.onNodeSelection&&e.addEventListener("tap",this.unselectAll);var t=new s.Manager(e,{domEvents:!0,inputClass:a.Input,recognizers:[[s.Tap,{}],[s.Press,{time:500}],[s.Pan,{direction:s.DIRECTION_ALL,threshold:5}],[s.Pinch,{}]]});e.addEventListener("panstart",this.onTrackStart),"ontouchstart"in document.documentElement&&t&&(t.on("pinchstart",this.onTransformStart),t.on("pinch",this.onTransform),t.on("pinchend",this.onTransformEnd)),"onwheel"in e?e.addEventListener("wheel",this.onWheel):"onmousewheel"in e&&e.addEventListener("mousewheel",this.onWheel),e.addEventListener("the-graph-tooltip",this.changeTooltip),e.addEventListener("the-graph-tooltip-hide",this.hideTooltip),e.addEventListener("the-graph-edge-start",this.edgeStart),e.addEventListener("contextmenu",this.onShowContext),this.mouseX=Math.floor(this.props.width/2),this.mouseY=Math.floor(this.props.height/2),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp),bgCanvas=p(o.findDOMNode(this.refs.canvas)),this.bgContext=p(bgCanvas.getContext("2d")),this.componentDidUpdate(),setTimeout(function(){this.renderGraph()}.bind(this),500)},onShowContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap();var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.showContext({element:this,type:"main",x:t,y:r,graph:this.props.graph,itemKey:"graph",item:this.props.graph})},keyDown:function(e){(e.metaKey||e.ctrlKey)&&(t.metaKeyPressed=!0);var r=e.keyCode,n=u[r];if(n&&this.props.enableHotKeys){var o=this.props.readonly;(!o||o&&d[r])&&n(this)}},keyUp:function(e){t.metaKeyPressed&&(t.metaKeyPressed=!1)},unselectAll:function(e){this.props.onNodeSelection(),this.props.onEdgeSelection()},renderGraph:function(){this.refs.graph.markDirty()},componentDidUpdate:function(e,t){this.renderCanvas(this.bgContext),t&&t.x===this.state.x&&t.y===this.state.y&&t.scale===this.state.scale||this.onPanScale()},renderCanvas:function(e){e.clearRect(0,0,this.state.width,this.state.height);for(var r=this.state.scale,n=t.config.nodeSize*r,o=this.state.x%n,i=this.state.y%n,s=Math.floor(this.state.width/n)+1,a=Math.floor(this.state.height/n)+1,c=Math.floor(this.state.x/n)+(this.state.x<0?1:0),l=Math.floor(this.state.y/n)+(this.state.y<0?1:0);a--;)for(var p=s;p--;){var u=Math.round(p*n+o),d=Math.round(a*n+i);(c-p)%3==0&&(l-a)%3==0?(e.fillStyle="white",e.fillRect(u,d,1,1)):r>.5&&(e.fillStyle="grey",e.fillRect(u,d,1,1))}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:"Hello",graph:this.props.graph,node:this,ports:[],process:[],processKey:null,x:r.x,y:r.y,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:0,deltaY:0,highlightPort:!1})},render:function(){var e=this.state.scale,r="matrix("+e+",0,0,"+e+","+this.state.x+","+this.state.y+")",n=e>t.zbpBig?"big":e>t.zbpNormal?"normal":"small",o=null,i=this.props.getMenuDef||this.defaultGetMenuDef;if(this.state.contextMenu){var s=this.state.contextMenu,a=i(s);a&&Object.keys(a).length&&(o=s.element.getContext(a,s,this.hideContext))}var c=null;if(o){var l={width:this.state.width,height:this.state.height,triggerHideContext:this.hideContext,children:o};c=[t.factories.app.createAppModalBackground(l)],this.menuShown=!0}else this.menuShown=!1;var p={graph:this.props.graph,scale:this.state.scale,app:this,library:this.props.library,nodeIcons:this.props.nodeIcons,onNodeSelection:this.props.onNodeSelection,onEdgeSelection:this.props.onEdgeSelection,enableHotKeys:this.props.enableHotKeys,showContext:this.showContext,allowEdgeStart:!this.props.readonly};p=t.merge(t.config.app.graph,p);var u=t.factories.app.createAppGraph.call(this,p),d=t.merge(t.config.app.svgGroup,{transform:r}),h=t.factories.app.createAppSvgGroup.call(this,d,[u]),f={x:this.state.tooltipX,y:this.state.tooltipY,visible:this.state.tooltipVisible,label:this.state.tooltip};f=t.merge(t.config.app.tooltip,f);var m=t.factories.app.createAppTooltip.call(this,f),g=t.merge(t.config.app.modal,{children:c}),y=[h,m,t.factories.app.createAppModalGroup.call(this,g)],v=t.merge(t.config.app.svg,{width:this.state.width,height:this.state.height}),b=t.factories.app.createAppSvg.call(this,v,y),w=t.merge(t.config.app.canvas,{width:this.state.width,height:this.state.height}),x=[t.factories.app.createAppCanvas.call(this,w),b],k=t.merge(t.config.app.container,{style:{width:this.state.width,height:this.state.height}});return k.className+=" "+n,t.factories.app.createAppContainer.call(this,k,x)}}))}},function(e,t,r){"use strict";
/** @license React v17.0.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(5),o=r(69),i=r(514);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n)throw Error(s(227));var a=new Set,c={};function l(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h=Object.prototype.hasOwnProperty,f={},m={};function g(e,t,r,n,o,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function w(e,t,r,n){var o=y.hasOwnProperty(t)?y[t]:null;(null!==o?0===o.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!h.call(m,e)||!h.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);y[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=60103,E=60106,_=60107,S=60108,C=60114,P=60109,A=60110,O=60112,T=60113,D=60120,N=60115,j=60116,I=60121,R=60128,M=60129,L=60130,F=60131;if("function"==typeof Symbol&&Symbol.for){var G=Symbol.for;k=G("react.element"),E=G("react.portal"),_=G("react.fragment"),S=G("react.strict_mode"),C=G("react.profiler"),P=G("react.provider"),A=G("react.context"),O=G("react.forward_ref"),T=G("react.suspense"),D=G("react.suspense_list"),N=G("react.memo"),j=G("react.lazy"),I=G("react.block"),G("react.scope"),R=G("react.opaque.id"),M=G("react.debug_trace_mode"),L=G("react.offscreen"),F=G("react.legacy_hidden")}var B,z="function"==typeof Symbol&&Symbol.iterator;function U(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function q(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var $=!1;function H(e,t){if(!e||$)return"";$=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),i=n.stack.split("\n"),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(1!==s||1!==a)do{if(s--,0>--a||o[s]!==i[a])return"\n"+o[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{$=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?q(e):""}function V(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case _:return"Fragment";case E:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case D:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case P:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case N:return W(e.type);case I:return W(e._render);case j:t=e._payload,e=e._init;try{return W(e(t))}catch(e){}}return null}function J(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=X(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Q(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var r=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=J(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function re(e,t){te(e,t);var r=J(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,r):t.hasOwnProperty("defaultValue")&&oe(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ne(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function oe(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ie(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+J(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:J(r)}}function le(e,t){var r=J(t.value),n=J(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var ue="http://www.w3.org/1999/xhtml",de="http://www.w3.org/2000/svg";function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction((function(){return e(t,r)}))}:e}((function(e,t){if(e.namespaceURI!==de||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ye(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var ve={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||ve.hasOwnProperty(e)&&ve[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=we(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(ve).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ve[t]=ve[e]}))}));var ke=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(ke[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Pe=null,Ae=null;function Oe(e){if(e=Qn(e)){if("function"!=typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=eo(t),Ce(e.stateNode,e.type,t))}}function Te(e){Pe?Ae?Ae.push(e):Ae=[e]:Pe=e}function De(){if(Pe){var e=Pe,t=Ae;if(Ae=Pe=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Ne(e,t){return e(t)}function je(e,t,r,n,o){return e(t,r,n,o)}function Ie(){}var Re=Ne,Me=!1,Le=!1;function Fe(){null===Pe&&null===Ae||(Ie(),De())}function Ge(e,t){var r=e.stateNode;if(null===r)return null;var n=eo(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(s(231,t,typeof r));return r}var Be=!1;if(u)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Be=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(e){Be=!1}function Ue(e,t,r,n,o,i,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(e){this.onError(e)}}var qe=!1,$e=null,He=!1,Ve=null,We={onError:function(e){qe=!0,$e=e}};function Je(e,t,r,n,o,i,s,a,c){qe=!1,$e=null,Ue.apply(We,arguments)}function Xe(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Xe(e)!==e)throw Error(s(188))}function Qe(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(n=o.return)){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Ke(o),e;if(i===n)return Ke(o),t;i=i.sibling}throw Error(s(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a)throw Error(s(189))}}if(r.alternate!==n)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ze(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var et,tt,rt,nt,ot=!1,it=[],st=null,at=null,ct=null,lt=new Map,pt=new Map,ut=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:o,targetContainers:[n]}}function ft(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function mt(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e=ht(t,r,n,o,i),null!==t&&(null!==(t=Qn(t))&&tt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function gt(e){var t=Kn(e.target);if(null!==t){var r=Xe(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ye(r)))return e.blockedOn=t,void nt(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Qn(r))&&tt(t),e.blockedOn=r,!1;t.shift()}return!0}function vt(e,t,r){yt(e)&&r.delete(t)}function bt(){for(ot=!1;0<it.length;){var e=it[0];if(null!==e.blockedOn){null!==(e=Qn(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var r=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&it.shift()}null!==st&&yt(st)&&(st=null),null!==at&&yt(at)&&(at=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(vt),pt.forEach(vt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,bt)))}function xt(e){function t(t){return wt(t,e)}if(0<it.length){wt(it[0],e);for(var r=1;r<it.length;r++){var n=it[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==st&&wt(st,e),null!==at&&wt(at,e),null!==ct&&wt(ct,e),lt.forEach(t),pt.forEach(t),r=0;r<ut.length;r++)(n=ut[r]).blockedOn===e&&(n.blockedOn=null);for(;0<ut.length&&null===(r=ut[0]).blockedOn;)gt(r),null===r.blockedOn&&ut.shift()}function kt(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Et={animationend:kt("Animation","AnimationEnd"),animationiteration:kt("Animation","AnimationIteration"),animationstart:kt("Animation","AnimationStart"),transitionend:kt("Transition","TransitionEnd")},_t={},St={};function Ct(e){if(_t[e])return _t[e];if(!Et[e])return e;var t,r=Et[e];for(t in r)if(r.hasOwnProperty(t)&&t in St)return _t[e]=r[t];return e}u&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Pt=Ct("animationend"),At=Ct("animationiteration"),Ot=Ct("animationstart"),Tt=Ct("transitionend"),Dt=new Map,Nt=new Map,jt=["abort","abort",Pt,"animationEnd",At,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Tt,"transitionEnd","waiting","waiting"];function It(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),Nt.set(n,t),Dt.set(n,o),l(o,[n])}}(0,i.unstable_now)();var Rt=8;function Mt(e){if(0!=(1&e))return Rt=15,1;if(0!=(2&e))return Rt=14,2;if(0!=(4&e))return Rt=13,4;var t=24&e;return 0!==t?(Rt=12,t):0!=(32&e)?(Rt=11,32):0!==(t=192&e)?(Rt=10,t):0!=(256&e)?(Rt=9,256):0!==(t=3584&e)?(Rt=8,t):0!=(4096&e)?(Rt=7,4096):0!==(t=4186112&e)?(Rt=6,t):0!==(t=62914560&e)?(Rt=5,t):67108864&e?(Rt=4,67108864):0!=(134217728&e)?(Rt=3,134217728):0!==(t=805306368&e)?(Rt=2,t):0!=(1073741824&e)?(Rt=1,1073741824):(Rt=8,e)}function Lt(e,t){var r=e.pendingLanes;if(0===r)return Rt=0;var n=0,o=0,i=e.expiredLanes,s=e.suspendedLanes,a=e.pingedLanes;if(0!==i)n=i,o=Rt=15;else if(0!==(i=134217727&r)){var c=i&~s;0!==c?(n=Mt(c),o=Rt):0!==(a&=i)&&(n=Mt(a),o=Rt)}else 0!==(i=r&~s)?(n=Mt(i),o=Rt):0!==a&&(n=Mt(a),o=Rt);if(0===n)return 0;if(n=r&((0>(n=31-qt(n))?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&s)){if(Mt(t),o<=Rt)return t;Rt=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(r=31-qt(t)),n|=e[r],t&=~o;return n}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Gt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Gt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Gt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function Bt(e){return e&-e}function zt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ut(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,(e=e.eventTimes)[t=31-qt(t)]=r}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-($t(e)/Ht|0)|0},$t=Math.log,Ht=Math.LN2;var Vt=i.unstable_UserBlockingPriority,Wt=i.unstable_runWithPriority,Jt=!0;function Xt(e,t,r,n){Me||Ie();var o=Kt,i=Me;Me=!0;try{je(o,e,t,r,n)}finally{(Me=i)||Fe()}}function Yt(e,t,r,n){Wt(Vt,Kt.bind(null,e,t,r,n))}function Kt(e,t,r,n){var o;if(Jt)if((o=0==(4&t))&&0<it.length&&-1<dt.indexOf(e))e=ht(null,e,t,r,n),it.push(e);else{var i=Qt(e,t,r,n);if(null===i)o&&ft(e,n);else{if(o){if(-1<dt.indexOf(e))return e=ht(i,e,t,r,n),void it.push(e);if(function(e,t,r,n,o){switch(t){case"focusin":return st=mt(st,e,t,r,n,o),!0;case"dragenter":return at=mt(at,e,t,r,n,o),!0;case"mouseover":return ct=mt(ct,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,pt.set(i,mt(pt.get(i)||null,e,t,r,n,o)),!0}return!1}(i,e,t,r,n))return;ft(e,n)}Tn(e,t,n,null,r)}}}function Qt(e,t,r,n){var o=Se(n);if(null!==(o=Kn(o))){var i=Xe(o);if(null===i)o=null;else{var s=i.tag;if(13===s){if(null!==(o=Ye(i)))return o;o=null}else if(3===s){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Tn(e,t,n,o,r),null}var Zt=null,er=null,tr=null;function rr(){if(tr)return tr;var e,t,r=er,n=r.length,o="value"in Zt?Zt.value:Zt.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===o[i-t];t++);return tr=o.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function or(){return!0}function ir(){return!1}function sr(e){function t(t,r,n,o,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(o):o[s]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?or:ir,this.isPropagationStopped=ir,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=or)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=or)},persist:function(){},isPersistent:or}),t}var ar,cr,lr,pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=sr(pr),dr=o({},pr,{view:0,detail:0}),hr=sr(dr),fr=o({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(ar=e.screenX-lr.screenX,cr=e.screenY-lr.screenY):cr=ar=0,lr=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:cr}}),mr=sr(fr),gr=sr(o({},fr,{dataTransfer:0})),yr=sr(o({},dr,{relatedTarget:0})),vr=sr(o({},pr,{animationName:0,elapsedTime:0,pseudoElement:0})),br=sr(o({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wr=sr(o({},pr,{data:0})),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _r(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Sr(){return _r}var Cr=sr(o({},dr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Pr=sr(o({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=sr(o({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Or=sr(o({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=sr(o({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Dr=[9,13,27,32],Nr=u&&"CompositionEvent"in window,jr=null;u&&"documentMode"in document&&(jr=document.documentMode);var Ir=u&&"TextEvent"in window&&!jr,Rr=u&&(!Nr||jr&&8<jr&&11>=jr),Mr=String.fromCharCode(32),Lr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Br=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function qr(e,t,r,n){Te(n),0<(t=Nn(t,"onChange")).length&&(r=new ur("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var $r=null,Hr=null;function Vr(e){_n(e,0)}function Wr(e){if(K(Zn(e)))return e}function Jr(e,t){if("change"===e)return t}var Xr=!1;if(u){var Yr;if(u){var Kr="oninput"in document;if(!Kr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Kr="function"==typeof Qr.oninput}Yr=Kr}else Yr=!1;Xr=Yr&&(!document.documentMode||9<document.documentMode)}function Zr(){$r&&($r.detachEvent("onpropertychange",en),Hr=$r=null)}function en(e){if("value"===e.propertyName&&Wr(Hr)){var t=[];if(qr(t,Hr,e,Se(e)),e=Vr,Me)e(t);else{Me=!0;try{Ne(e,t)}finally{Me=!1,Fe()}}}}function tn(e,t,r){"focusin"===e?(Zr(),Hr=r,($r=t).attachEvent("onpropertychange",en)):"focusout"===e&&Zr()}function rn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wr(Hr)}function nn(e,t){if("click"===e)return Wr(t)}function on(e,t){if("input"===e||"change"===e)return Wr(t)}var sn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},an=Object.prototype.hasOwnProperty;function cn(e,t){if(sn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!an.call(t,r[n])||!sn(e[r[n]],t[r[n]]))return!1;return!0}function ln(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pn(e,t){var r,n=ln(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ln(n)}}function un(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var hn=u&&"documentMode"in document&&11>=document.documentMode,fn=null,mn=null,gn=null,yn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;yn||null==fn||fn!==Q(n)||("selectionStart"in(n=fn)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},gn&&cn(gn,n)||(gn=n,0<(n=Nn(mn,"onSelect")).length&&(t=new ur("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}It("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),It("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),It(jt,2);for(var bn="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wn=0;wn<bn.length;wn++)Nt.set(bn[wn],0);p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kn=new Set("cancel close invalid load scroll toggle".split(" ").concat(xn));function En(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,o,i,a,c,l){if(Je.apply(this,arguments),qe){if(!qe)throw Error(s(198));var p=$e;qe=!1,$e=null,He||(He=!0,Ve=p)}}(n,t,void 0,e),e.currentTarget=null}function _n(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;En(o,a,l),i=c}else for(s=0;s<n.length;s++){if(c=(a=n[s]).instance,l=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;En(o,a,l),i=c}}}if(He)throw e=Ve,He=!1,Ve=null,e}function Sn(e,t){var r=to(t),n=e+"__bubble";r.has(n)||(On(t,e,2,!1),r.add(n))}var Cn="_reactListening"+Math.random().toString(36).slice(2);function Pn(e){e[Cn]||(e[Cn]=!0,a.forEach((function(t){kn.has(t)||An(t,!1,e,null),An(t,!0,e,null)})))}function An(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=r;if("selectionchange"===e&&9!==r.nodeType&&(i=r.ownerDocument),null!==n&&!t&&kn.has(e)){if("scroll"!==e)return;o|=2,i=n}var s=to(i),a=e+"__"+(t?"capture":"bubble");s.has(a)||(t&&(o|=4),On(i,e,o,t),s.add(a))}function On(e,t,r,n){var o=Nt.get(t);switch(void 0===o?2:o){case 0:o=Xt;break;case 1:o=Yt;break;default:o=Kt}r=o.bind(null,t,r,e),o=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Tn(e,t,r,n,o){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===s)for(s=n.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;s=s.return}for(;null!==a;){if(null===(s=Kn(a)))return;if(5===(c=s.tag)||6===c){n=i=s;continue e}a=a.parentNode}}n=n.return}!function(e,t,r){if(Le)return e(t,r);Le=!0;try{Re(e,t,r)}finally{Le=!1,Fe()}}((function(){var n=i,o=Se(r),s=[];e:{var a=Dt.get(e);if(void 0!==a){var c=ur,l=e;switch(e){case"keypress":if(0===nr(r))break e;case"keydown":case"keyup":c=Cr;break;case"focusin":l="focus",c=yr;break;case"focusout":l="blur",c=yr;break;case"beforeblur":case"afterblur":c=yr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Ar;break;case Pt:case At:case Ot:c=vr;break;case Tt:c=Or;break;case"scroll":c=hr;break;case"wheel":c=Tr;break;case"copy":case"cut":case"paste":c=br;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Pr}var p=0!=(4&t),u=!p&&"scroll"===e,d=p?null!==a?a+"Capture":null:a;p=[];for(var h,f=n;null!==f;){var m=(h=f).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=Ge(f,d))&&p.push(Dn(f,m,h)))),u)break;f=f.return}0<p.length&&(a=new c(a,l,null,r,o),s.push({event:a,listeners:p}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=r.relatedTarget||r.fromElement)||!Kn(l)&&!l[Xn])&&(c||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=n,null!==(l=(l=r.relatedTarget||r.toElement)?Kn(l):null)&&(l!==(u=Xe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=n),c!==l)){if(p=mr,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(p=Pr,m="onPointerLeave",d="onPointerEnter",f="pointer"),u=null==c?a:Zn(c),h=null==l?a:Zn(l),(a=new p(m,f+"leave",c,r,o)).target=u,a.relatedTarget=h,m=null,Kn(o)===n&&((p=new p(d,f+"enter",l,r,o)).target=h,p.relatedTarget=u,m=p),u=m,c&&l)e:{for(d=l,f=0,h=p=c;h;h=jn(h))f++;for(h=0,m=d;m;m=jn(m))h++;for(;0<f-h;)p=jn(p),f--;for(;0<h-f;)d=jn(d),h--;for(;f--;){if(p===d||null!==d&&p===d.alternate)break e;p=jn(p),d=jn(d)}p=null}else p=null;null!==c&&In(s,a,c,p,!1),null!==l&&null!==u&&In(s,u,l,p,!0)}if("select"===(c=(a=n?Zn(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Jr;else if(Ur(a))if(Xr)g=on;else{g=rn;var y=tn}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=nn);switch(g&&(g=g(e,n))?qr(s,g,r,o):(y&&y(e,a,n),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&oe(a,"number",a.value)),y=n?Zn(n):window,e){case"focusin":(Ur(y)||"true"===y.contentEditable)&&(fn=y,mn=n,gn=null);break;case"focusout":gn=mn=fn=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,vn(s,r,o);break;case"selectionchange":if(hn)break;case"keydown":case"keyup":vn(s,r,o)}var v;if(Nr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Br?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Rr&&"ko"!==r.locale&&(Br||"onCompositionStart"!==b?"onCompositionEnd"===b&&Br&&(v=rr()):(er="value"in(Zt=o)?Zt.value:Zt.textContent,Br=!0)),0<(y=Nn(n,b)).length&&(b=new wr(b,e,null,r,o),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Gr(r))&&(b.data=v))),(v=Ir?function(e,t){switch(e){case"compositionend":return Gr(t);case"keypress":return 32!==t.which?null:(Lr=!0,Mr);case"textInput":return(e=t.data)===Mr&&Lr?null:e;default:return null}}(e,r):function(e,t){if(Br)return"compositionend"===e||!Nr&&Fr(e,t)?(e=rr(),tr=er=Zt=null,Br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rr&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))&&(0<(n=Nn(n,"onBeforeInput")).length&&(o=new wr("onBeforeInput","beforeinput",null,r,o),s.push({event:o,listeners:n}),o.data=v))}_n(s,t)}))}function Dn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Nn(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ge(e,r))&&n.unshift(Dn(e,i,o)),null!=(i=Ge(e,t))&&n.push(Dn(e,i,o))),e=e.return}return n}function jn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function In(e,t,r,n,o){for(var i=t._reactName,s=[];null!==r&&r!==n;){var a=r,c=a.alternate,l=a.stateNode;if(null!==c&&c===n)break;5===a.tag&&null!==l&&(a=l,o?null!=(c=Ge(r,i))&&s.unshift(Dn(r,c,a)):o||null!=(c=Ge(r,i))&&s.push(Dn(r,c,a))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}function Rn(){}var Mn=null,Ln=null;function Fn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Gn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Bn="function"==typeof setTimeout?setTimeout:void 0,zn="function"==typeof clearTimeout?clearTimeout:void 0;function Un(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function qn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $n(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Hn=0;var Vn=Math.random().toString(36).slice(2),Wn="__reactFiber$"+Vn,Jn="__reactProps$"+Vn,Xn="__reactContainer$"+Vn,Yn="__reactEvents$"+Vn;function Kn(e){var t=e[Wn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xn]||r[Wn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=$n(e);null!==e;){if(r=e[Wn])return r;e=$n(e)}return t}r=(e=r).parentNode}return null}function Qn(e){return!(e=e[Wn]||e[Xn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Zn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function eo(e){return e[Jn]||null}function to(e){var t=e[Yn];return void 0===t&&(t=e[Yn]=new Set),t}var ro=[],no=-1;function oo(e){return{current:e}}function io(e){0>no||(e.current=ro[no],ro[no]=null,no--)}function so(e,t){no++,ro[no]=e.current,e.current=t}var ao={},co=oo(ao),lo=oo(!1),po=ao;function uo(e,t){var r=e.type.contextTypes;if(!r)return ao;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ho(e){return null!=(e=e.childContextTypes)}function fo(){io(lo),io(co)}function mo(e,t,r){if(co.current!==ao)throw Error(s(168));so(co,t),so(lo,r)}function go(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(s(108,W(t)||"Unknown",i));return o({},r,n)}function yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ao,po=co.current,so(co,e),so(lo,lo.current),!0}function vo(e,t,r){var n=e.stateNode;if(!n)throw Error(s(169));r?(e=go(e,t,po),n.__reactInternalMemoizedMergedChildContext=e,io(lo),io(co),so(co,e)):io(lo),so(lo,r)}var bo=null,wo=null,xo=i.unstable_runWithPriority,ko=i.unstable_scheduleCallback,Eo=i.unstable_cancelCallback,_o=i.unstable_shouldYield,So=i.unstable_requestPaint,Co=i.unstable_now,Po=i.unstable_getCurrentPriorityLevel,Ao=i.unstable_ImmediatePriority,Oo=i.unstable_UserBlockingPriority,To=i.unstable_NormalPriority,Do=i.unstable_LowPriority,No=i.unstable_IdlePriority,jo={},Io=void 0!==So?So:function(){},Ro=null,Mo=null,Lo=!1,Fo=Co(),Go=1e4>Fo?Co:function(){return Co()-Fo};function Bo(){switch(Po()){case Ao:return 99;case Oo:return 98;case To:return 97;case Do:return 96;case No:return 95;default:throw Error(s(332))}}function zo(e){switch(e){case 99:return Ao;case 98:return Oo;case 97:return To;case 96:return Do;case 95:return No;default:throw Error(s(332))}}function Uo(e,t){return e=zo(e),xo(e,t)}function qo(e,t,r){return e=zo(e),ko(e,t,r)}function $o(){if(null!==Mo){var e=Mo;Mo=null,Eo(e)}Ho()}function Ho(){if(!Lo&&null!==Ro){Lo=!0;var e=0;try{var t=Ro;Uo(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Ro=null}catch(t){throw null!==Ro&&(Ro=Ro.slice(e+1)),ko(Ao,$o),t}finally{Lo=!1}}}var Vo=x.ReactCurrentBatchConfig;function Wo(e,t){if(e&&e.defaultProps){for(var r in t=o({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Jo=oo(null),Xo=null,Yo=null,Ko=null;function Qo(){Ko=Yo=Xo=null}function Zo(e){var t=Jo.current;io(Jo),e.type._context._currentValue=t}function ei(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function ti(e,t){Xo=e,Ko=Yo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Ns=!0),e.firstContext=null)}function ri(e,t){if(Ko!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ko=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Yo){if(null===Xo)throw Error(s(308));Yo=t,Xo.dependencies={lanes:0,firstContext:t,responders:null}}else Yo=Yo.next=t;return e._currentValue}var ni=!1;function oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ii(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function si(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ai(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ci(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=s:i=i.next=s,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function li(e,t,r,n){var i=e.updateQueue;ni=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(null!==c){i.shared.pending=null;var l=c,p=l.next;l.next=null,null===a?s=p:a.next=p,a=l;var u=e.alternate;if(null!==u){var d=(u=u.updateQueue).lastBaseUpdate;d!==a&&(null===d?u.firstBaseUpdate=p:d.next=p,u.lastBaseUpdate=l)}}if(null!==s){for(d=i.baseState,a=0,u=p=l=null;;){c=s.lane;var h=s.eventTime;if((n&c)===c){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(c=t,h=r,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(h,d,c);break e}d=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(c="function"==typeof(f=m.payload)?f.call(h,d,c):f))break e;d=o({},d,c);break e;case 2:ni=!0}}null!==s.callback&&(e.flags|=32,null===(c=i.effects)?i.effects=[s]:c.push(s))}else h={eventTime:h,lane:c,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(p=u=h,l=d):u=u.next=h,a|=c;if(null===(s=s.next)){if(null===(c=i.shared.pending))break;s=c.next,c.next=null,i.lastBaseUpdate=c,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=p,i.lastBaseUpdate=u,Ia|=a,e.lanes=a,e.memoizedState=d}}function pi(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=r,"function"!=typeof o)throw Error(s(191,o));o.call(n)}}}var ui=(new n.Component).refs;function di(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:o({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ic(),o=sc(e),i=si(n,o);i.payload=t,null!=r&&(i.callback=r),ai(e,i),ac(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ic(),o=sc(e),i=si(n,o);i.tag=1,i.payload=t,null!=r&&(i.callback=r),ai(e,i),ac(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ic(),n=sc(e),o=si(r,n);o.tag=2,null!=t&&(o.callback=t),ai(e,o),ac(e,n,r)}};function fi(e,t,r,n,o,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(o,i))}function mi(e,t,r){var n=!1,o=ao,i=t.contextType;return"object"==typeof i&&null!==i?i=ri(i):(o=ho(t)?po:co.current,i=(n=null!=(n=t.contextTypes))?uo(e,o):ao),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function gi(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function yi(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=ui,oi(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=ri(i):(i=ho(t)?po:co.current,o.context=uo(e,i)),li(e,r,o,n),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&hi.enqueueReplaceState(o,o.state,null),li(e,r,o,n),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var vi=Array.isArray;function bi(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var n=r.stateNode}if(!n)throw Error(s(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=n.refs;t===ui&&(t=n.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function wi(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function xi(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Gc(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags=2,r):n:(t.flags=2,r):r}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=qc(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function l(e,t,r,n){return null!==t&&t.elementType===r.type?((n=o(t,r.props)).ref=bi(e,t,r),n.return=e,n):((n=Bc(r.type,r.key,r.props,null,e.mode,n)).ref=bi(e,t,r),n.return=e,n)}function p(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=$c(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function u(e,t,r,n,i){return null===t||7!==t.tag?((t=zc(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function d(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=qc(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Bc(t.type,t.key,t.props,null,e.mode,r)).ref=bi(e,null,t),r.return=e,r;case E:return(t=$c(t,e.mode,r)).return=e,t}if(vi(t)||U(t))return(t=zc(t,e.mode,r,null)).return=e,t;wi(e,t)}return null}function h(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==o?null:c(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===o?r.type===_?u(e,t,r.props.children,n,o):l(e,t,r,n):null;case E:return r.key===o?p(e,t,r,n):null}if(vi(r)||U(r))return null!==o?null:u(e,t,r,n,null);wi(e,r)}return null}function f(e,t,r,n,o){if("string"==typeof n||"number"==typeof n)return c(t,e=e.get(r)||null,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case k:return e=e.get(null===n.key?r:n.key)||null,n.type===_?u(t,e,n.props.children,o,n.key):l(t,e,n,o);case E:return p(t,e=e.get(null===n.key?r:n.key)||null,n,o)}if(vi(n)||U(n))return u(t,e=e.get(r)||null,n,o,null);wi(t,n)}return null}function m(o,s,a,c){for(var l=null,p=null,u=s,m=s=0,g=null;null!==u&&m<a.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=h(o,u,a[m],c);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(o,u),s=i(y,s,m),null===p?l=y:p.sibling=y,p=y,u=g}if(m===a.length)return r(o,u),l;if(null===u){for(;m<a.length;m++)null!==(u=d(o,a[m],c))&&(s=i(u,s,m),null===p?l=u:p.sibling=u,p=u);return l}for(u=n(o,u);m<a.length;m++)null!==(g=f(u,o,m,a[m],c))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),s=i(g,s,m),null===p?l=g:p.sibling=g,p=g);return e&&u.forEach((function(e){return t(o,e)})),l}function g(o,a,c,l){var p=U(c);if("function"!=typeof p)throw Error(s(150));if(null==(c=p.call(c)))throw Error(s(151));for(var u=p=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(o,m,v.value,l);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),a=i(b,a,g),null===u?p=b:u.sibling=b,u=b,m=y}if(v.done)return r(o,m),p;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(o,v.value,l))&&(a=i(v,a,g),null===u?p=v:u.sibling=v,u=v);return p}for(m=n(o,m);!v.done;g++,v=c.next())null!==(v=f(m,o,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=i(v,a,g),null===u?p=v:u.sibling=v,u=v);return e&&m.forEach((function(e){return t(o,e)})),p}return function(e,n,i,c){var l="object"==typeof i&&null!==i&&i.type===_&&null===i.key;l&&(i=i.props.children);var p="object"==typeof i&&null!==i;if(p)switch(i.$$typeof){case k:e:{for(p=i.key,l=n;null!==l;){if(l.key===p){switch(l.tag){case 7:if(i.type===_){r(e,l.sibling),(n=o(l,i.props.children)).return=e,e=n;break e}break;default:if(l.elementType===i.type){r(e,l.sibling),(n=o(l,i.props)).ref=bi(e,l,i),n.return=e,e=n;break e}}r(e,l);break}t(e,l),l=l.sibling}i.type===_?((n=zc(i.props.children,e.mode,c,i.key)).return=e,e=n):((c=Bc(i.type,i.key,i.props,null,e.mode,c)).ref=bi(e,n,i),c.return=e,e=c)}return a(e);case E:e:{for(l=i.key;null!==n;){if(n.key===l){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){r(e,n.sibling),(n=o(n,i.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=$c(i,e.mode,c)).return=e,e=n}return a(e)}if("string"==typeof i||"number"==typeof i)return i=""+i,null!==n&&6===n.tag?(r(e,n.sibling),(n=o(n,i)).return=e,e=n):(r(e,n),(n=qc(i,e.mode,c)).return=e,e=n),a(e);if(vi(i))return m(e,n,i,c);if(U(i))return g(e,n,i,c);if(p&&wi(e,i),void 0===i&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,W(e.type)||"Component"))}return r(e,n)}}var ki=xi(!0),Ei=xi(!1),_i={},Si=oo(_i),Ci=oo(_i),Pi=oo(_i);function Ai(e){if(e===_i)throw Error(s(174));return e}function Oi(e,t){switch(so(Pi,t),so(Ci,e),so(Si,_i),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fe(null,"");break;default:t=fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}io(Si),so(Si,t)}function Ti(){io(Si),io(Ci),io(Pi)}function Di(e){Ai(Pi.current);var t=Ai(Si.current),r=fe(t,e.type);t!==r&&(so(Ci,e),so(Si,r))}function Ni(e){Ci.current===e&&(io(Si),io(Ci))}var ji=oo(0);function Ii(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ri=null,Mi=null,Li=!1;function Fi(e,t){var r=Lc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Gi(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Bi(e){if(Li){var t=Mi;if(t){var r=t;if(!Gi(e,t)){if(!(t=qn(r.nextSibling))||!Gi(e,t))return e.flags=-1025&e.flags|2,Li=!1,void(Ri=e);Fi(Ri,r)}Ri=e,Mi=qn(t.firstChild)}else e.flags=-1025&e.flags|2,Li=!1,Ri=e}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ri=e}function Ui(e){if(e!==Ri)return!1;if(!Li)return zi(e),Li=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Gn(t,e.memoizedProps))for(t=Mi;t;)Fi(e,t),t=qn(t.nextSibling);if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Mi=qn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Mi=null}}else Mi=Ri?qn(e.stateNode.nextSibling):null;return!0}function qi(){Mi=Ri=null,Li=!1}var $i=[];function Hi(){for(var e=0;e<$i.length;e++)$i[e]._workInProgressVersionPrimary=null;$i.length=0}var Vi=x.ReactCurrentDispatcher,Wi=x.ReactCurrentBatchConfig,Ji=0,Xi=null,Yi=null,Ki=null,Qi=!1,Zi=!1;function es(){throw Error(s(321))}function ts(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function rs(e,t,r,n,o,i){if(Ji=i,Xi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vi.current=null===e||null===e.memoizedState?As:Os,e=r(n,o),Zi){i=0;do{if(Zi=!1,!(25>i))throw Error(s(301));i+=1,Ki=Yi=null,t.updateQueue=null,Vi.current=Ts,e=r(n,o)}while(Zi)}if(Vi.current=Ps,t=null!==Yi&&null!==Yi.next,Ji=0,Ki=Yi=Xi=null,Qi=!1,t)throw Error(s(300));return e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ki?Xi.memoizedState=Ki=e:Ki=Ki.next=e,Ki}function os(){if(null===Yi){var e=Xi.alternate;e=null!==e?e.memoizedState:null}else e=Yi.next;var t=null===Ki?Xi.memoizedState:Ki.next;if(null!==t)Ki=t,Yi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Yi=e).memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},null===Ki?Xi.memoizedState=Ki=e:Ki=Ki.next=e}return Ki}function is(e,t){return"function"==typeof t?t(e):t}function ss(e){var t=os(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=Yi,o=n.baseQueue,i=r.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(null!==o){o=o.next,n=n.baseState;var c=a=i=null,l=o;do{var p=l.lane;if((Ji&p)===p)null!==c&&(c=c.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),n=l.eagerReducer===e?l.eagerState:e(n,l.action);else{var u={lane:p,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===c?(a=c=u,i=n):c=c.next=u,Xi.lanes|=p,Ia|=p}l=l.next}while(null!==l&&l!==o);null===c?i=n:c.next=a,sn(n,t.memoizedState)||(Ns=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function as(e){var t=os(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(null!==o){r.pending=null;var a=o=o.next;do{i=e(i,a.action),a=a.next}while(a!==o);sn(i,t.memoizedState)||(Ns=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function cs(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===n:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=n,$i.push(t))),e)return r(t._source);throw $i.push(t),Error(s(350))}function ls(e,t,r,n){var o=Ca;if(null===o)throw Error(s(349));var i=t._getVersion,a=i(t._source),c=Vi.current,l=c.useState((function(){return cs(o,t,r)})),p=l[1],u=l[0];l=Ki;var d=e.memoizedState,h=d.refs,f=h.getSnapshot,m=d.source;d=d.subscribe;var g=Xi;return e.memoizedState={refs:h,source:t,subscribe:n},c.useEffect((function(){h.getSnapshot=r,h.setSnapshot=p;var e=i(t._source);if(!sn(a,e)){e=r(t._source),sn(u,e)||(p(e),e=sc(g),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var n=o.entanglements,s=e;0<s;){var c=31-qt(s),l=1<<c;n[c]|=e,s&=~l}}}),[r,t,n]),c.useEffect((function(){return n(t._source,(function(){var e=h.getSnapshot,r=h.setSnapshot;try{r(e(t._source));var n=sc(g);o.mutableReadLanes|=n&o.pendingLanes}catch(e){r((function(){throw e}))}}))}),[t,n]),sn(f,r)&&sn(m,t)&&sn(d,n)||((e={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:u}).dispatch=p=Cs.bind(null,Xi,e),l.queue=e,l.baseQueue=null,u=cs(o,t,r),l.memoizedState=l.baseState=u),u}function ps(e,t,r){return ls(os(),e,t,r)}function us(e){var t=ns();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:is,lastRenderedState:e}).dispatch=Cs.bind(null,Xi,e),[t.memoizedState,e]}function ds(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=Xi.updateQueue)?(t={lastEffect:null},Xi.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function hs(e){return e={current:e},ns().memoizedState=e}function fs(){return os().memoizedState}function ms(e,t,r,n){var o=ns();Xi.flags|=e,o.memoizedState=ds(1|t,r,void 0,void 0===n?null:n)}function gs(e,t,r,n){var o=os();n=void 0===n?null:n;var i=void 0;if(null!==Yi){var s=Yi.memoizedState;if(i=s.destroy,null!==n&&ts(n,s.deps))return void ds(t,r,i,n)}Xi.flags|=e,o.memoizedState=ds(1|t,r,i,n)}function ys(e,t){return ms(516,4,e,t)}function vs(e,t){return gs(516,4,e,t)}function bs(e,t){return gs(4,2,e,t)}function ws(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function xs(e,t,r){return r=null!=r?r.concat([e]):null,gs(4,2,ws.bind(null,t,e),r)}function ks(){}function Es(e,t){var r=os();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ts(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function _s(e,t){var r=os();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ts(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ss(e,t){var r=Bo();Uo(98>r?98:r,(function(){e(!0)})),Uo(97<r?97:r,(function(){var r=Wi.transition;Wi.transition=1;try{e(!1),t()}finally{Wi.transition=r}}))}function Cs(e,t,r){var n=ic(),o=sc(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?i.next=i:(i.next=s.next,s.next=i),t.pending=i,s=e.alternate,e===Xi||null!==s&&s===Xi)Zi=Qi=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,c=s(a,r);if(i.eagerReducer=s,i.eagerState=c,sn(c,a))return}catch(e){}ac(e,o,n)}}var Ps={readContext:ri,useCallback:es,useContext:es,useEffect:es,useImperativeHandle:es,useLayoutEffect:es,useMemo:es,useReducer:es,useRef:es,useState:es,useDebugValue:es,useDeferredValue:es,useTransition:es,useMutableSource:es,useOpaqueIdentifier:es,unstable_isNewReconciler:!1},As={readContext:ri,useCallback:function(e,t){return ns().memoizedState=[e,void 0===t?null:t],e},useContext:ri,useEffect:ys,useImperativeHandle:function(e,t,r){return r=null!=r?r.concat([e]):null,ms(4,2,ws.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ms(4,2,e,t)},useMemo:function(e,t){var r=ns();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ns();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Cs.bind(null,Xi,e),[n.memoizedState,e]},useRef:hs,useState:us,useDebugValue:ks,useDeferredValue:function(e){var t=us(e),r=t[0],n=t[1];return ys((function(){var t=Wi.transition;Wi.transition=1;try{n(e)}finally{Wi.transition=t}}),[e]),r},useTransition:function(){var e=us(!1),t=e[0];return hs(e=Ss.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var n=ns();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},ls(n,e,t,r)},useOpaqueIdentifier:function(){if(Li){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+(Hn++).toString(36))),Error(s(355))})),r=us(t)[1];return 0==(2&Xi.mode)&&(Xi.flags|=516,ds(5,(function(){r("r:"+(Hn++).toString(36))}),void 0,null)),t}return us(t="r:"+(Hn++).toString(36)),t},unstable_isNewReconciler:!1},Os={readContext:ri,useCallback:Es,useContext:ri,useEffect:vs,useImperativeHandle:xs,useLayoutEffect:bs,useMemo:_s,useReducer:ss,useRef:fs,useState:function(){return ss(is)},useDebugValue:ks,useDeferredValue:function(e){var t=ss(is),r=t[0],n=t[1];return vs((function(){var t=Wi.transition;Wi.transition=1;try{n(e)}finally{Wi.transition=t}}),[e]),r},useTransition:function(){var e=ss(is)[0];return[fs().current,e]},useMutableSource:ps,useOpaqueIdentifier:function(){return ss(is)[0]},unstable_isNewReconciler:!1},Ts={readContext:ri,useCallback:Es,useContext:ri,useEffect:vs,useImperativeHandle:xs,useLayoutEffect:bs,useMemo:_s,useReducer:as,useRef:fs,useState:function(){return as(is)},useDebugValue:ks,useDeferredValue:function(e){var t=as(is),r=t[0],n=t[1];return vs((function(){var t=Wi.transition;Wi.transition=1;try{n(e)}finally{Wi.transition=t}}),[e]),r},useTransition:function(){var e=as(is)[0];return[fs().current,e]},useMutableSource:ps,useOpaqueIdentifier:function(){return as(is)[0]},unstable_isNewReconciler:!1},Ds=x.ReactCurrentOwner,Ns=!1;function js(e,t,r,n){t.child=null===e?Ei(t,null,r,n):ki(t,e.child,r,n)}function Is(e,t,r,n,o){r=r.render;var i=t.ref;return ti(t,o),n=rs(e,t,r,n,i,o),null===e||Ns?(t.flags|=1,js(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ea(e,t,o))}function Rs(e,t,r,n,o,i){if(null===e){var s=r.type;return"function"!=typeof s||Fc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Bc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ms(e,t,s,n,o,i))}return s=e.child,0==(o&i)&&(o=s.memoizedProps,(r=null!==(r=r.compare)?r:cn)(o,n)&&e.ref===t.ref)?ea(e,t,i):(t.flags|=1,(e=Gc(s,n)).ref=t.ref,e.return=t,t.child=e)}function Ms(e,t,r,n,o,i){if(null!==e&&cn(e.memoizedProps,n)&&e.ref===t.ref){if(Ns=!1,0==(i&o))return t.lanes=e.lanes,ea(e,t,i);0!=(16384&e.flags)&&(Ns=!0)}return Gs(e,t,r,n,i)}function Ls(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},mc(t,r);else{if(0==(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},mc(t,e),null;t.memoizedState={baseLanes:0},mc(t,null!==i?i.baseLanes:r)}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,mc(t,n);return js(e,t,o,r),t.child}function Fs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function Gs(e,t,r,n,o){var i=ho(r)?po:co.current;return i=uo(t,i),ti(t,o),r=rs(e,t,r,n,i,o),null===e||Ns?(t.flags|=1,js(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ea(e,t,o))}function Bs(e,t,r,n,o){if(ho(r)){var i=!0;yo(t)}else i=!1;if(ti(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mi(t,r,n),yi(t,r,n,o),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,l=r.contextType;"object"==typeof l&&null!==l?l=ri(l):l=uo(t,l=ho(r)?po:co.current);var p=r.getDerivedStateFromProps,u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate;u||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==n||c!==l)&&gi(t,s,n,l),ni=!1;var d=t.memoizedState;s.state=d,li(t,n,s,o),c=t.memoizedState,a!==n||d!==c||lo.current||ni?("function"==typeof p&&(di(t,r,p,n),c=t.memoizedState),(a=ni||fi(t,r,a,n,d,c,l))?(u||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4)):("function"==typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=l,n=a):("function"==typeof s.componentDidMount&&(t.flags|=4),n=!1)}else{s=t.stateNode,ii(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Wo(t.type,a),s.props=l,u=t.pendingProps,d=s.context,"object"==typeof(c=r.contextType)&&null!==c?c=ri(c):c=uo(t,c=ho(r)?po:co.current);var h=r.getDerivedStateFromProps;(p="function"==typeof h||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==u||d!==c)&&gi(t,s,n,c),ni=!1,d=t.memoizedState,s.state=d,li(t,n,s,o);var f=t.memoizedState;a!==u||d!==f||lo.current||ni?("function"==typeof h&&(di(t,r,h,n),f=t.memoizedState),(l=ni||fi(t,r,l,n,d,f,c))?(p||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(n,f,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,f,c)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=f),s.props=n,s.state=f,s.context=c,n=l):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),n=!1)}return zs(e,t,r,n,i,o)}function zs(e,t,r,n,o,i){Fs(e,t);var s=0!=(64&t.flags);if(!n&&!s)return o&&vo(t,r,!1),ea(e,t,i);n=t.stateNode,Ds.current=t;var a=s&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,a,i)):js(e,t,a,i),t.memoizedState=n.state,o&&vo(t,r,!0),t.child}function Us(e){var t=e.stateNode;t.pendingContext?mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mo(0,t.context,!1),Oi(e,t.containerInfo)}var qs,$s,Hs,Vs={dehydrated:null,retryLane:0};function Ws(e,t,r){var n,o=t.pendingProps,i=ji.current,s=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&i)),n?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),so(ji,1&i),null===e?(void 0!==o.fallback&&Bi(t),e=o.children,i=o.fallback,s?(e=Js(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Vs,e):"number"==typeof o.unstable_expectedLoadTime?(e=Js(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Vs,t.lanes=33554432,e):((r=Uc({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,s?(o=Ys(e,t,o.children,o.fallback,r),s=t.child,i=e.child.memoizedState,s.memoizedState=null===i?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=Vs,o):(r=Xs(e,t,o.children,r),t.memoizedState=null,r))}function Js(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Uc(t,o,0,null),r=zc(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function Xs(e,t,r,n){var o=e.child;return e=o.sibling,r=Gc(o,{mode:"visible",children:r}),0==(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Ys(e,t,r,n,o){var i=t.mode,s=e.child;e=s.sibling;var a={mode:"hidden",children:r};return 0==(2&i)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=a,null!==(s=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Gc(s,a),null!==e?n=Gc(e,n):(n=zc(n,i,o,null)).flags|=2,n.return=t,r.return=t,r.sibling=n,t.child=r,n}function Ks(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ei(e.return,t)}function Qs(e,t,r,n,o,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=o,s.lastEffect=i)}function Zs(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(js(e,t,n.children,r),0!=(2&(n=ji.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ks(e,r);else if(19===e.tag)Ks(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(so(ji,n),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===Ii(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Qs(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Ii(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Qs(t,!0,r,null,i,t.lastEffect);break;case"together":Qs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ea(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Ia|=t.lanes,0!=(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Gc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Gc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function ta(e,t){if(!Li)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ra(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ho(t.type)&&fo(),null;case 3:return Ti(),io(lo),io(co),Hi(),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(Ui(t)?t.flags|=4:n.hydrate||(t.flags|=256)),null;case 5:Ni(t);var i=Ai(Pi.current);if(r=t.type,null!==e&&null!=t.stateNode)$s(e,t,r,n),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ai(Si.current),Ui(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[Wn]=t,n[Jn]=a,r){case"dialog":Sn("cancel",n),Sn("close",n);break;case"iframe":case"object":case"embed":Sn("load",n);break;case"video":case"audio":for(e=0;e<xn.length;e++)Sn(xn[e],n);break;case"source":Sn("error",n);break;case"img":case"image":case"link":Sn("error",n),Sn("load",n);break;case"details":Sn("toggle",n);break;case"input":ee(n,a),Sn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Sn("invalid",n);break;case"textarea":ce(n,a),Sn("invalid",n)}for(var l in Ee(r,a),e=null,a)a.hasOwnProperty(l)&&(i=a[l],"children"===l?"string"==typeof i?n.textContent!==i&&(e=["children",i]):"number"==typeof i&&n.textContent!==""+i&&(e=["children",""+i]):c.hasOwnProperty(l)&&null!=i&&"onScroll"===l&&Sn("scroll",n));switch(r){case"input":Y(n),ne(n,a,!0);break;case"textarea":Y(n),pe(n);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(n.onclick=Rn)}n=e,t.updateQueue=n,null!==n&&(t.flags|=4)}else{switch(l=9===i.nodeType?i:i.ownerDocument,e===ue&&(e=he(r)),e===ue?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[Wn]=t,e[Jn]=n,qs(e,t),t.stateNode=e,l=_e(r,n),r){case"dialog":Sn("cancel",e),Sn("close",e),i=n;break;case"iframe":case"object":case"embed":Sn("load",e),i=n;break;case"video":case"audio":for(i=0;i<xn.length;i++)Sn(xn[i],e);i=n;break;case"source":Sn("error",e),i=n;break;case"img":case"image":case"link":Sn("error",e),Sn("load",e),i=n;break;case"details":Sn("toggle",e),i=n;break;case"input":ee(e,n),i=Z(e,n),Sn("invalid",e);break;case"option":i=ie(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=o({},n,{value:void 0}),Sn("invalid",e);break;case"textarea":ce(e,n),i=ae(e,n),Sn("invalid",e);break;default:i=n}Ee(r,i);var p=i;for(a in p)if(p.hasOwnProperty(a)){var u=p[a];"style"===a?xe(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&ge(e,u):"children"===a?"string"==typeof u?("textarea"!==r||""!==u)&&ye(e,u):"number"==typeof u&&ye(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(c.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Sn("scroll",e):null!=u&&w(e,a,u,l))}switch(r){case"input":Y(e),ne(e,n,!1);break;case"textarea":Y(e),pe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+J(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?se(e,!!n.multiple,a,!1):null!=n.defaultValue&&se(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Rn)}Fn(r,n)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Hs(0,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));r=Ai(Pi.current),Ai(Si.current),Ui(t)?(n=t.stateNode,r=t.memoizedProps,n[Wn]=t,n.nodeValue!==r&&(t.flags|=4)):((n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[Wn]=t,t.stateNode=n)}return null;case 13:return io(ji),n=t.memoizedState,0!=(64&t.flags)?(t.lanes=r,t):(n=null!==n,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ui(t):r=null!==e.memoizedState,n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&ji.current)?0===Da&&(Da=3):(0!==Da&&3!==Da||(Da=4),null===Ca||0==(134217727&Ia)&&0==(134217727&Ra)||uc(Ca,Aa))),(n||r)&&(t.flags|=4),null);case 4:return Ti(),null===e&&Pn(t.stateNode.containerInfo),null;case 10:return Zo(t),null;case 17:return ho(t.type)&&fo(),null;case 19:if(io(ji),null===(n=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(l=n.rendering))if(a)ta(n,!1);else{if(0!==Da||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(l=Ii(e))){for(t.flags|=64,ta(n,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return so(ji,1&ji.current|2),t.child}e=e.sibling}null!==n.tail&&Go()>Ga&&(t.flags|=64,a=!0,ta(n,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Ii(l))){if(t.flags|=64,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),ta(n,!0),null===n.tail&&"hidden"===n.tailMode&&!l.alternate&&!Li)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*Go()-n.renderingStartTime>Ga&&1073741824!==r&&(t.flags|=64,a=!0,ta(n,!1),t.lanes=33554432);n.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=n.last)?r.sibling=l:t.child=l,n.last=l)}return null!==n.tail?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Go(),r.sibling=null,t=ji.current,so(ji,a?1&t|2:1&t),r):null;case 23:case 24:return gc(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==n.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function na(e){switch(e.tag){case 1:ho(e.type)&&fo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ti(),io(lo),io(co),Hi(),0!=(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Ni(e),null;case 13:return io(ji),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return io(ji),null;case 4:return Ti(),null;case 10:return Zo(e),null;case 23:case 24:return gc(),null;default:return null}}function oa(e,t){try{var r="",n=t;do{r+=V(n),n=n.return}while(n);var o=r}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function ia(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}qs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},$s=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ai(Si.current);var s,a=null;switch(r){case"input":i=Z(e,i),n=Z(e,n),a=[];break;case"option":i=ie(e,i),n=ie(e,n),a=[];break;case"select":i=o({},i,{value:void 0}),n=o({},n,{value:void 0}),a=[];break;case"textarea":i=ae(e,i),n=ae(e,n),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof n.onClick&&(e.onclick=Rn)}for(u in Ee(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(c.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var p=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&p!==l&&(null!=p||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||p&&p.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in p)p.hasOwnProperty(s)&&l[s]!==p[s]&&(r||(r={}),r[s]=p[s])}else r||(a||(a=[]),a.push(u,r)),r=p;else"dangerouslySetInnerHTML"===u?(p=p?p.__html:void 0,l=l?l.__html:void 0,null!=p&&l!==p&&(a=a||[]).push(u,p)):"children"===u?"string"!=typeof p&&"number"!=typeof p||(a=a||[]).push(u,""+p):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(c.hasOwnProperty(u)?(null!=p&&"onScroll"===u&&Sn("scroll",e),a||l===p||(a=[])):"object"==typeof p&&null!==p&&p.$$typeof===R?p.toString():(a=a||[]).push(u,p))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Hs=function(e,t,r,n){r!==n&&(t.flags|=4)};var sa="function"==typeof WeakMap?WeakMap:Map;function aa(e,t,r){(r=si(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qa||(qa=!0,$a=n),ia(0,t)},r}function ca(e,t,r){(r=si(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return ia(0,t),n(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Ha?Ha=new Set([this]):Ha.add(this),ia(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var la="function"==typeof WeakSet?WeakSet:Set;function pa(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){jc(e,t)}else t.current=null}function ua(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Wo(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Un(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function da(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;n=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(Tc(r,e),Oc(r,e)),e=n}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Wo(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&pi(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}pi(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&Fn(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&xt(r)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function ha(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)"function"==typeof(n=n.style).setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,n.style.display=we("display",o)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function fa(e,t){if(wo&&"function"==typeof wo.onCommitFiberUnmount)try{wo.onCommitFiberUnmount(bo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,void 0!==o)if(0!=(4&n))Tc(t,r);else{n=t;try{o()}catch(e){jc(n,e)}}r=r.next}while(r!==e)}break;case 1:if(pa(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){jc(t,e)}break;case 5:pa(t);break;case 4:va(e,t)}}function ma(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ga(e){return 5===e.tag||3===e.tag||4===e.tag}function ya(e){e:{for(var t=e.return;null!==t;){if(ga(t))break e;t=t.return}throw Error(s(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(s(161))}16&r.flags&&(ye(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||ga(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}n?function e(t,r,n){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,r?8===n.nodeType?n.parentNode.insertBefore(t,r):n.insertBefore(t,r):(8===n.nodeType?(r=n.parentNode).insertBefore(t,n):(r=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==r.onclick||(r.onclick=Rn));else if(4!==o&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t):function e(t,r,n){var o=t.tag,i=5===o||6===o;if(i)t=i?t.stateNode:t.stateNode.instance,r?n.insertBefore(t,r):n.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,r,t)}function va(e,t){for(var r,n,o=t,i=!1;;){if(!i){i=o.return;e:for(;;){if(null===i)throw Error(s(160));switch(r=i.stateNode,i.tag){case 5:n=!1;break e;case 3:case 4:r=r.containerInfo,n=!0;break e}i=i.return}i=!0}if(5===o.tag||6===o.tag){e:for(var a=e,c=o,l=c;;)if(fa(a,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===c)break e;for(;null===l.sibling;){if(null===l.return||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}n?(a=r,c=o.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,n=!0,o.child.return=o,o=o.child;continue}}else if(fa(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(i=!1)}o.sibling.return=o.return,o=o.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{3==(3&n.tag)&&(e=n.destroy,n.destroy=void 0,void 0!==e&&e()),n=n.next}while(n!==r)}return;case 1:return;case 5:if(null!=(r=t.stateNode)){n=t.memoizedProps;var o=null!==e?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(r[Jn]=n,"input"===e&&"radio"===n.type&&null!=n.name&&te(r,n),_e(e,o),t=_e(e,n),o=0;o<i.length;o+=2){var a=i[o],c=i[o+1];"style"===a?xe(r,c):"dangerouslySetInnerHTML"===a?ge(r,c):"children"===a?ye(r,c):w(r,a,c,t)}switch(e){case"input":re(r,n);break;case"textarea":le(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,null!=(i=n.value)?se(r,!!n.multiple,i,!1):e!==!!n.multiple&&(null!=n.defaultValue?se(r,!!n.multiple,n.defaultValue,!0):se(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,xt(r.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Fa=Go(),ha(t.child,!0)),void wa(t);case 19:return void wa(t);case 17:return;case 23:case 24:return void ha(t,null!==t.memoizedState)}throw Error(s(163))}function wa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new la),t.forEach((function(t){var n=Rc.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function xa(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var ka=Math.ceil,Ea=x.ReactCurrentDispatcher,_a=x.ReactCurrentOwner,Sa=0,Ca=null,Pa=null,Aa=0,Oa=0,Ta=oo(0),Da=0,Na=null,ja=0,Ia=0,Ra=0,Ma=0,La=null,Fa=0,Ga=1/0;function Ba(){Ga=Go()+500}var za,Ua=null,qa=!1,$a=null,Ha=null,Va=!1,Wa=null,Ja=90,Xa=[],Ya=[],Ka=null,Qa=0,Za=null,ec=-1,tc=0,rc=0,nc=null,oc=!1;function ic(){return 0!=(48&Sa)?Go():-1!==ec?ec:ec=Go()}function sc(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Bo()?1:2;if(0===tc&&(tc=ja),0!==Vo.transition){0!==rc&&(rc=null!==La?La.pendingLanes:0),e=tc;var t=4186112&~rc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Bo(),0!=(4&Sa)&&98===e?e=Gt(12,tc):e=Gt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),tc),e}function ac(e,t,r){if(50<Qa)throw Qa=0,Za=null,Error(s(185));if(null===(e=cc(e,t)))return null;Ut(e,t,r),e===Ca&&(Ra|=t,4===Da&&uc(e,Aa));var n=Bo();1===t?0!=(8&Sa)&&0==(48&Sa)?dc(e):(lc(e,r),0===Sa&&(Ba(),$o())):(0==(4&Sa)||98!==n&&99!==n||(null===Ka?Ka=new Set([e]):Ka.add(e)),lc(e,r)),La=e}function cc(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function lc(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-qt(a),l=1<<c,p=i[c];if(-1===p){if(0==(l&n)||0!=(l&o)){p=t,Mt(l);var u=Rt;i[c]=10<=u?p+250:6<=u?p+5e3:-1}}else p<=t&&(e.expiredLanes|=l);a&=~l}if(n=Lt(e,e===Ca?Aa:0),t=Rt,0===n)null!==r&&(r!==jo&&Eo(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==jo&&Eo(r)}15===t?(r=dc.bind(null,e),null===Ro?(Ro=[r],Mo=ko(Ao,Ho)):Ro.push(r),r=jo):14===t?r=qo(99,dc.bind(null,e)):r=qo(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),pc.bind(null,e)),e.callbackPriority=t,e.callbackNode=r}}function pc(e){if(ec=-1,rc=tc=0,0!=(48&Sa))throw Error(s(327));var t=e.callbackNode;if(Ac()&&e.callbackNode!==t)return null;var r=Lt(e,e===Ca?Aa:0);if(0===r)return null;var n=r,o=Sa;Sa|=16;var i=bc();for(Ca===e&&Aa===n||(Ba(),yc(e,n));;)try{kc();break}catch(t){vc(e,t)}if(Qo(),Ea.current=i,Sa=o,null!==Pa?n=0:(Ca=null,Aa=0,n=Da),0!=(ja&Ra))yc(e,0);else if(0!==n){if(2===n&&(Sa|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(r=Ft(e))&&(n=wc(e,r))),1===n)throw t=Na,yc(e,0),uc(e,r),lc(e,Go()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(s(345));case 2:Sc(e);break;case 3:if(uc(e,r),(62914560&r)===r&&10<(n=Fa+500-Go())){if(0!==Lt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){ic(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Bn(Sc.bind(null,e),n);break}Sc(e);break;case 4:if(uc(e,r),(4186112&r)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-qt(r);i=1<<a,(a=n[a])>o&&(o=a),r&=~i}if(r=o,10<(r=(120>(r=Go()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ka(r/1960))-r)){e.timeoutHandle=Bn(Sc.bind(null,e),r);break}Sc(e);break;case 5:Sc(e);break;default:throw Error(s(329))}}return lc(e,Go()),e.callbackNode===t?pc.bind(null,e):null}function uc(e,t){for(t&=~Ma,t&=~Ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qt(t),n=1<<r;e[r]=-1,t&=~n}}function dc(e){if(0!=(48&Sa))throw Error(s(327));if(Ac(),e===Ca&&0!=(e.expiredLanes&Aa)){var t=Aa,r=wc(e,t);0!=(ja&Ra)&&(r=wc(e,t=Lt(e,t)))}else r=wc(e,t=Lt(e,0));if(0!==e.tag&&2===r&&(Sa|=64,e.hydrate&&(e.hydrate=!1,Un(e.containerInfo)),0!==(t=Ft(e))&&(r=wc(e,t))),1===r)throw r=Na,yc(e,0),uc(e,t),lc(e,Go()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e),lc(e,Go()),null}function hc(e,t){var r=Sa;Sa|=1;try{return e(t)}finally{0===(Sa=r)&&(Ba(),$o())}}function fc(e,t){var r=Sa;Sa&=-2,Sa|=8;try{return e(t)}finally{0===(Sa=r)&&(Ba(),$o())}}function mc(e,t){so(Ta,Oa),Oa|=t,ja|=t}function gc(){Oa=Ta.current,io(Ta)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,zn(r)),null!==Pa)for(r=Pa.return;null!==r;){var n=r;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&fo();break;case 3:Ti(),io(lo),io(co),Hi();break;case 5:Ni(n);break;case 4:Ti();break;case 13:case 19:io(ji);break;case 10:Zo(n);break;case 23:case 24:gc()}r=r.return}Ca=e,Pa=Gc(e.current,null),Aa=Oa=ja=t,Da=0,Na=null,Ma=Ra=Ia=0}function vc(e,t){for(;;){var r=Pa;try{if(Qo(),Vi.current=Ps,Qi){for(var n=Xi.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}Qi=!1}if(Ji=0,Ki=Yi=Xi=null,Zi=!1,_a.current=null,null===r||null===r.return){Da=1,Na=t,Pa=null;break}e:{var i=e,s=r.return,a=r,c=t;if(t=Aa,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==c&&"object"==typeof c&&"function"==typeof c.then){var l=c;if(0==(2&a.mode)){var p=a.alternate;p?(a.updateQueue=p.updateQueue,a.memoizedState=p.memoizedState,a.lanes=p.lanes):(a.updateQueue=null,a.memoizedState=null)}var u=0!=(1&ji.current),d=s;do{var h;if(h=13===d.tag){var f=d.memoizedState;if(null!==f)h=null!==f.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!u)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var v=si(-1,1);v.tag=2,ai(a,v)}a.lanes|=1;break e}c=void 0,a=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new sa,c=new Set,b.set(l,c)):void 0===(c=b.get(l))&&(c=new Set,b.set(l,c)),!c.has(a)){c.add(a);var w=Ic.bind(null,i,l,a);l.then(w,w)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error((W(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Da&&(Da=2),c=oa(c,a),d=s;do{switch(d.tag){case 3:i=c,d.flags|=4096,t&=-t,d.lanes|=t,ci(d,aa(0,i,t));break e;case 1:i=c;var x=d.type,k=d.stateNode;if(0==(64&d.flags)&&("function"==typeof x.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===Ha||!Ha.has(k)))){d.flags|=4096,t&=-t,d.lanes|=t,ci(d,ca(d,i,t));break e}}d=d.return}while(null!==d)}_c(r)}catch(e){t=e,Pa===r&&null!==r&&(Pa=r=r.return);continue}break}}function bc(){var e=Ea.current;return Ea.current=Ps,null===e?Ps:e}function wc(e,t){var r=Sa;Sa|=16;var n=bc();for(Ca===e&&Aa===t||yc(e,t);;)try{xc();break}catch(t){vc(e,t)}if(Qo(),Sa=r,Ea.current=n,null!==Pa)throw Error(s(261));return Ca=null,Aa=0,Da}function xc(){for(;null!==Pa;)Ec(Pa)}function kc(){for(;null!==Pa&&!_o();)Ec(Pa)}function Ec(e){var t=za(e.alternate,e,Oa);e.memoizedProps=e.pendingProps,null===t?_c(e):Pa=t,_a.current=null}function _c(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(r=ra(r,t,Oa)))return void(Pa=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!=(1073741824&Oa)||0==(4&r.mode)){for(var n=0,o=r.child;null!==o;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=na(t)))return r.flags&=2047,void(Pa=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Pa=t);Pa=t=e}while(null!==t);0===Da&&(Da=5)}function Sc(e){var t=Bo();return Uo(99,Cc.bind(null,e,t)),null}function Cc(e,t){do{Ac()}while(null!==Wa);if(0!=(48&Sa))throw Error(s(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<i;){var l=31-qt(i),p=1<<l;o[l]=0,a[l]=-1,c[l]=-1,i&=~p}if(null!==Ka&&0==(24&n)&&Ka.has(e)&&Ka.delete(e),e===Ca&&(Pa=Ca=null,Aa=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){if(o=Sa,Sa|=32,_a.current=null,Mn=Jt,dn(a=un())){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(p=c.getSelection&&c.getSelection())&&0!==p.rangeCount){c=p.anchorNode,i=p.anchorOffset,l=p.focusNode,p=p.focusOffset;try{c.nodeType,l.nodeType}catch(e){c=null;break e}var u=0,d=-1,h=-1,f=0,m=0,g=a,y=null;t:for(;;){for(var v;g!==c||0!==i&&3!==g.nodeType||(d=u+i),g!==l||0!==p&&3!==g.nodeType||(h=u+p),3===g.nodeType&&(u+=g.nodeValue.length),null!==(v=g.firstChild);)y=g,g=v;for(;;){if(g===a)break t;if(y===c&&++f===i&&(d=u),y===l&&++m===p&&(h=u),null!==(v=g.nextSibling))break;y=(g=y).parentNode}g=v}c=-1===d||-1===h?null:{start:d,end:h}}else c=null;c=c||{start:0,end:0}}else c=null;Ln={focusedElem:a,selectionRange:c},Jt=!1,nc=null,oc=!1,Ua=n;do{try{Pc()}catch(e){if(null===Ua)throw Error(s(330));jc(Ua,e),Ua=Ua.nextEffect}}while(null!==Ua);nc=null,Ua=n;do{try{for(a=e;null!==Ua;){var b=Ua.flags;if(16&b&&ye(Ua.stateNode,""),128&b){var w=Ua.alternate;if(null!==w){var x=w.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&b){case 2:ya(Ua),Ua.flags&=-3;break;case 6:ya(Ua),Ua.flags&=-3,ba(Ua.alternate,Ua);break;case 1024:Ua.flags&=-1025;break;case 1028:Ua.flags&=-1025,ba(Ua.alternate,Ua);break;case 4:ba(Ua.alternate,Ua);break;case 8:va(a,c=Ua);var k=c.alternate;ma(c),null!==k&&ma(k)}Ua=Ua.nextEffect}}catch(e){if(null===Ua)throw Error(s(330));jc(Ua,e),Ua=Ua.nextEffect}}while(null!==Ua);if(x=Ln,w=un(),b=x.focusedElem,a=x.selectionRange,w!==b&&b&&b.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(b.ownerDocument.documentElement,b)){null!==a&&dn(b)&&(w=a.start,void 0===(x=a.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),c=b.textContent.length,k=Math.min(a.start,c),a=void 0===a.end?k:Math.min(a.end,c),!x.extend&&k>a&&(c=a,a=k,k=c),c=pn(b,k),i=pn(b,a),c&&i&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==i.node||x.focusOffset!==i.offset)&&((w=w.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),k>a?(x.addRange(w),x.extend(i.node,i.offset)):(w.setEnd(i.node,i.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jt=!!Mn,Ln=Mn=null,e.current=r,Ua=n;do{try{for(b=e;null!==Ua;){var E=Ua.flags;if(36&E&&da(b,Ua.alternate,Ua),128&E){w=void 0;var _=Ua.ref;if(null!==_){var S=Ua.stateNode;switch(Ua.tag){case 5:w=S;break;default:w=S}"function"==typeof _?_(w):_.current=w}}Ua=Ua.nextEffect}}catch(e){if(null===Ua)throw Error(s(330));jc(Ua,e),Ua=Ua.nextEffect}}while(null!==Ua);Ua=null,Io(),Sa=o}else e.current=r;if(Va)Va=!1,Wa=e,Ja=t;else for(Ua=n;null!==Ua;)t=Ua.nextEffect,Ua.nextEffect=null,8&Ua.flags&&((E=Ua).sibling=null,E.stateNode=null),Ua=t;if(0===(n=e.pendingLanes)&&(Ha=null),1===n?e===Za?Qa++:(Qa=0,Za=e):Qa=0,r=r.stateNode,wo&&"function"==typeof wo.onCommitFiberRoot)try{wo.onCommitFiberRoot(bo,r,void 0,64==(64&r.current.flags))}catch(e){}if(lc(e,Go()),qa)throw qa=!1,e=$a,$a=null,e;return 0!=(8&Sa)||$o(),null}function Pc(){for(;null!==Ua;){var e=Ua.alternate;oc||null===nc||(0!=(8&Ua.flags)?Ze(Ua,nc)&&(oc=!0):13===Ua.tag&&xa(e,Ua)&&Ze(Ua,nc)&&(oc=!0));var t=Ua.flags;0!=(256&t)&&ua(e,Ua),0==(512&t)||Va||(Va=!0,qo(97,(function(){return Ac(),null}))),Ua=Ua.nextEffect}}function Ac(){if(90!==Ja){var e=97<Ja?97:Ja;return Ja=90,Uo(e,Dc)}return!1}function Oc(e,t){Xa.push(t,e),Va||(Va=!0,qo(97,(function(){return Ac(),null})))}function Tc(e,t){Ya.push(t,e),Va||(Va=!0,qo(97,(function(){return Ac(),null})))}function Dc(){if(null===Wa)return!1;var e=Wa;if(Wa=null,0!=(48&Sa))throw Error(s(331));var t=Sa;Sa|=32;var r=Ya;Ya=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===i)throw Error(s(330));jc(i,e)}}for(r=Xa,Xa=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var c=o.create;o.destroy=c()}catch(e){if(null===i)throw Error(s(330));jc(i,e)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Sa=t,$o(),!0}function Nc(e,t,r){ai(e,t=aa(0,t=oa(r,t),1)),t=ic(),null!==(e=cc(e,1))&&(Ut(e,1,t),lc(e,t))}function jc(e,t){if(3===e.tag)Nc(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Nc(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Ha||!Ha.has(n))){var o=ca(r,e=oa(t,e),1);if(ai(r,o),o=ic(),null!==(r=cc(r,1)))Ut(r,1,o),lc(r,o);else if("function"==typeof n.componentDidCatch&&(null===Ha||!Ha.has(n)))try{n.componentDidCatch(t,e)}catch(e){}break}}r=r.return}}function Ic(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ic(),e.pingedLanes|=e.suspendedLanes&r,Ca===e&&(Aa&r)===r&&(4===Da||3===Da&&(62914560&Aa)===Aa&&500>Go()-Fa?yc(e,0):Ma|=r),lc(e,t)}function Rc(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Bo()?1:2:(0===tc&&(tc=ja),0===(t=Bt(62914560&~tc))&&(t=4194304))),r=ic(),null!==(e=cc(e,t))&&(Ut(e,t,r),lc(e,r))}function Mc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,r,n){return new Mc(e,t,r,n)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gc(e,t){var r=e.alternate;return null===r?((r=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bc(e,t,r,n,o,i){var a=2;if(n=e,"function"==typeof e)Fc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case _:return zc(r.children,o,i,t);case M:a=8,o|=16;break;case S:a=8,o|=1;break;case C:return(e=Lc(12,r,t,8|o)).elementType=C,e.type=C,e.lanes=i,e;case T:return(e=Lc(13,r,t,o)).type=T,e.elementType=T,e.lanes=i,e;case D:return(e=Lc(19,r,t,o)).elementType=D,e.lanes=i,e;case L:return Uc(r,o,i,t);case F:return(e=Lc(24,r,t,o)).elementType=F,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:a=10;break e;case A:a=9;break e;case O:a=11;break e;case N:a=14;break e;case j:a=16,n=null;break e;case I:a=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(a,r,t,o)).elementType=e,t.type=n,t.lanes=i,t}function zc(e,t,r,n){return(e=Lc(7,e,n,t)).lanes=r,e}function Uc(e,t,r,n){return(e=Lc(23,e,n,t)).elementType=L,e.lanes=r,e}function qc(e,t,r){return(e=Lc(6,e,null,t)).lanes=r,e}function $c(e,t,r){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hc(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Vc(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Wc(e,t,r,n){var o=t.current,i=ic(),a=sc(o);e:if(r){t:{if(Xe(r=r._reactInternals)!==r||1!==r.tag)throw Error(s(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(ho(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===r.tag){var l=r.type;if(ho(l)){r=go(r,l,c);break e}}r=c}else r=ao;return null===t.context?t.context=r:t.pendingContext=r,(t=si(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),ai(o,t),ac(o,a,i),a}function Jc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Yc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}function Kc(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Hc(e,t,null!=r&&!0===r.hydrate),t=Lc(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,oi(t),e[Xn]=r.current,Pn(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){var o=(t=n[e])._getVersion;o=o(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(e,t,r,n,o){var i=r._reactRootContainer;if(i){var s=i._internalRoot;if("function"==typeof o){var a=o;o=function(){var e=Jc(s);a.call(e)}}Wc(t,s,e,o)}else{if(i=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Kc(e,0,t?{hydrate:!0}:void 0)}(r,n),s=i._internalRoot,"function"==typeof o){var c=o;o=function(){var e=Jc(s);c.call(e)}}fc((function(){Wc(t,s,e,o)}))}return Jc(s)}function el(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return Vc(e,t,null,r)}za=function(e,t,r){var n=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||lo.current)Ns=!0;else{if(0==(r&n)){switch(Ns=!1,t.tag){case 3:Us(t),qi();break;case 5:Di(t);break;case 1:ho(t.type)&&yo(t);break;case 4:Oi(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;so(Jo,o._currentValue),o._currentValue=n;break;case 13:if(null!==t.memoizedState)return 0!=(r&t.child.childLanes)?Ws(e,t,r):(so(ji,1&ji.current),null!==(t=ea(e,t,r))?t.sibling:null);so(ji,1&ji.current);break;case 19:if(n=0!=(r&t.childLanes),0!=(64&e.flags)){if(n)return Zs(e,t,r);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),so(ji,ji.current),n)break;return null;case 23:case 24:return t.lanes=0,Ls(e,t,r)}return ea(e,t,r)}Ns=0!=(16384&e.flags)}else Ns=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=uo(t,co.current),ti(t,r),o=rs(null,t,n,e,o,r),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ho(n)){var i=!0;yo(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,oi(t);var a=n.getDerivedStateFromProps;"function"==typeof a&&di(t,n,a,e),o.updater=hi,t.stateNode=o,o._reactInternals=t,yi(t,n,e,r),t=zs(null,t,n,!0,i,r)}else t.tag=0,js(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(i=o._init)(o._payload),t.type=o,i=t.tag=function(e){if("function"==typeof e)return Fc(e)?1:0;if(null!=e){if((e=e.$$typeof)===O)return 11;if(e===N)return 14}return 2}(o),e=Wo(o,e),i){case 0:t=Gs(null,t,o,e,r);break e;case 1:t=Bs(null,t,o,e,r);break e;case 11:t=Is(null,t,o,e,r);break e;case 14:t=Rs(null,t,o,Wo(o.type,e),n,r);break e}throw Error(s(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,Gs(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 1:return n=t.type,o=t.pendingProps,Bs(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 3:if(Us(t),n=t.updateQueue,null===e||null===n)throw Error(s(282));if(n=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,ii(e,t),li(t,n,null,r),(n=t.memoizedState.element)===o)qi(),t=ea(e,t,r);else{if((i=(o=t.stateNode).hydrate)&&(Mi=qn(t.stateNode.containerInfo.firstChild),Ri=t,i=Li=!0),i){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(i=e[o])._workInProgressVersionPrimary=e[o+1],$i.push(i);for(r=Ei(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else js(e,t,n,r),qi();t=t.child}return t;case 5:return Di(t),null===e&&Bi(t),n=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,Gn(n,o)?a=null:null!==i&&Gn(n,i)&&(t.flags|=16),Fs(e,t),js(e,t,a,r),t.child;case 6:return null===e&&Bi(t),null;case 13:return Ws(e,t,r);case 4:return Oi(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ki(t,null,n,r):js(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,Is(e,t,n,o=t.elementType===n?o:Wo(n,o),r);case 7:return js(e,t,t.pendingProps,r),t.child;case 8:case 12:return js(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var c=t.type._context;if(so(Jo,c._currentValue),c._currentValue=i,null!==a)if(c=a.value,0===(i=sn(c,i)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(c,i):1073741823))){if(a.children===o.children&&!lo.current){t=ea(e,t,r);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){a=c.child;for(var p=l.firstContext;null!==p;){if(p.context===n&&0!=(p.observedBits&i)){1===c.tag&&((p=si(-1,r&-r)).tag=2,ai(c,p)),c.lanes|=r,null!==(p=c.alternate)&&(p.lanes|=r),ei(c.return,r),l.lanes|=r;break}p=p.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}js(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=(i=t.pendingProps).children,ti(t,r),n=n(o=ri(o,i.unstable_observedBits)),t.flags|=1,js(e,t,n,r),t.child;case 14:return i=Wo(o=t.type,t.pendingProps),Rs(e,t,o,i=Wo(o.type,i),n,r);case 15:return Ms(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Wo(n,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ho(n)?(e=!0,yo(t)):e=!1,ti(t,r),mi(t,n,o),yi(t,n,o,r),zs(null,t,n,!0,e,r);case 19:return Zs(e,t,r);case 23:case 24:return Ls(e,t,r)}throw Error(s(156,t.tag))},Kc.prototype.render=function(e){Wc(e,this._internalRoot,null,null)},Kc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wc(null,e,null,(function(){t[Xn]=null}))},et=function(e){13===e.tag&&(ac(e,4,ic()),Yc(e,4))},tt=function(e){13===e.tag&&(ac(e,67108864,ic()),Yc(e,67108864))},rt=function(e){if(13===e.tag){var t=ic(),r=sc(e);ac(e,r,t),Yc(e,r)}},nt=function(e,t){return t()},Ce=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=eo(n);if(!o)throw Error(s(90));K(n),re(n,o)}}}break;case"textarea":le(e,r);break;case"select":null!=(t=r.value)&&se(e,!!r.multiple,t,!1)}},Ne=hc,je=function(e,t,r,n,o){var i=Sa;Sa|=4;try{return Uo(98,e.bind(null,t,r,n,o))}finally{0===(Sa=i)&&(Ba(),$o())}},Ie=function(){0==(49&Sa)&&(function(){if(null!==Ka){var e=Ka;Ka=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,lc(e,Go())}))}$o()}(),Ac())},Re=function(e,t){var r=Sa;Sa|=2;try{return e(t)}finally{0===(Sa=r)&&(Ba(),$o())}};var tl={Events:[Qn,Zn,eo,Te,De,Ac,{current:!1}]},rl={findFiberByHostInstance:Kn,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Qe(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ol.isDisabled&&ol.supportsFiber)try{bo=ol.inject(nl),wo=ol}catch(e){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=el,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Qe(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Sa;if(0!=(48&r))return e(t);Sa|=1;try{if(e)return Uo(99,e.bind(null,t))}finally{Sa=r,$o()}},t.hydrate=function(e,t,r){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!0,r)},t.render=function(e,t,r){if(!Qc(t))throw Error(s(200));return Zc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(fc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Xn]=null}))})),!0)},t.unstable_batchedUpdates=hc,t.unstable_createPortal=function(e,t){return el(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qc(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,r,!1,n)},t.version="17.0.1"},function(e,t,r){"use strict";e.exports=r(515)},function(e,t,r){"use strict";
/** @license React v0.20.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n,o,i,s;if("object"==typeof performance&&"function"==typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var p=null,u=null,d=function(){if(null!==p)try{var e=t.unstable_now();p(!0,e),p=null}catch(e){throw setTimeout(d,0),e}};n=function(e){null!==p?setTimeout(n,0,e):(p=e,setTimeout(d,0))},o=function(e,t){u=setTimeout(e,t)},i=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,y=null,v=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();w=e+b;try{y(!0,e)?k.postMessage(null):(g=!1,y=null)}catch(e){throw k.postMessage(null),e}}else g=!1},n=function(e){y=e,g||(g=!0,k.postMessage(null))},o=function(e,r){v=h((function(){e(t.unstable_now())}),r)},i=function(){f(v),v=-1}}function E(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(!(void 0!==o&&0<C(o,t)))break e;e[n]=t,e[r]=o,r=n}}function _(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,s=e[i],a=i+1,c=e[a];if(void 0!==s&&0>C(s,r))void 0!==c&&0>C(c,s)?(e[n]=c,e[a]=r,n=a):(e[n]=s,e[i]=r,n=i);else{if(!(void 0!==c&&0>C(c,r)))break e;e[n]=c,e[a]=r,n=a}}}return t}return null}function C(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var P=[],A=[],O=1,T=null,D=3,N=!1,j=!1,I=!1;function R(e){for(var t=_(A);null!==t;){if(null===t.callback)S(A);else{if(!(t.startTime<=e))break;S(A),t.sortIndex=t.expirationTime,E(P,t)}t=_(A)}}function M(e){if(I=!1,R(e),!j)if(null!==_(P))j=!0,n(L);else{var t=_(A);null!==t&&o(M,t.startTime-e)}}function L(e,r){j=!1,I&&(I=!1,i()),N=!0;var n=D;try{for(R(r),T=_(P);null!==T&&(!(T.expirationTime>r)||e&&!t.unstable_shouldYield());){var s=T.callback;if("function"==typeof s){T.callback=null,D=T.priorityLevel;var a=s(T.expirationTime<=r);r=t.unstable_now(),"function"==typeof a?T.callback=a:T===_(P)&&S(P),R(r)}else S(P);T=_(P)}if(null!==T)var c=!0;else{var l=_(A);null!==l&&o(M,l.startTime-r),c=!1}return c}finally{T=null,D=n,N=!1}}var F=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){j||N||(j=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return _(P)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var r=D;D=t;try{return e()}finally{D=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=D;D=e;try{return t()}finally{D=r}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:O++,callback:r,priorityLevel:e,startTime:s,expirationTime:c=s+c,sortIndex:-1},s>a?(e.sortIndex=s,E(A,e),null===_(P)&&e===_(A)&&(I?i():I=!0,o(M,s-a))):(e.sortIndex=c,E(P,e),j||N||(j=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var r=D;D=t;try{return e.apply(this,arguments)}finally{D=r}}}},function(e,t,r){var n=r(97),o=["","webkit","Moz","MS","ms","o"];var i="ontouchstart"in window,s=void 0!==function(e,t){for(var r,n,i=t[0].toUpperCase()+t.slice(1),s=0;s<o.length;){if((n=(r=o[s])?r+i:t)in e)return n;s++}}(window,"PointerEvent"),a=i&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),c="pointerdown",l="pointermove pointerup pointercancel";function p(){this.evEl=c+" "+l,this.evWin="",n.Input.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}window.MSPointerEvent&&!window.PointerEvent&&(c="MSPointerDown",l="MSPointerMove MSPointerUp MSPointerCancel"),n.inherit(p,n.PointerEventInput,{}),p.prototype.constructor=function(){};function u(){this.evEl="mousedown mousemove mouseup",this.evWin="",this.pressed=!1,n.Input.apply(this,arguments)}function d(){n.Input.apply(this,arguments);var e=this.handler.bind(this);this.touch=new n.TouchInput(this.manager,e),this.mouse=new u(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}n.inherit(u,n.MouseInput,{}),u.prototype.constructor=function(){},n.inherit(d,n.TouchMouseInput,{}),d.prototype.constructor=function(){};var h=null;h=s?p:a?n.TouchInput:i?d:u,e.exports={Input:h}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(73);e.exports.register=function(e){var t=e.TheGraph;t.config.graph={container:{},groupsGroup:{className:"groups"},edgesGroup:{className:"edges"},iipsGroup:{className:"iips"},nodesGroup:{className:"nodes"},inportsGroup:{className:"ex-inports"},outportsGroup:{className:"ex-outports"},node:{},iip:{},inportEdge:{},inportNode:{},outportEdge:{},outportNode:{},nodeGroup:{},selectionGroup:{key:"selectiongroup",isSelectionGroup:!0,label:"",description:""},edgePreview:{key:"edge-preview",label:""}},t.factories.graph={createGraphContainerGroup:t.factories.createGroup,createGraphGroupsGroup:t.factories.createGroup,createGraphEdgesGroup:t.factories.createGroup,createGraphIIPGroup:t.factories.createGroup,createGraphNodesGroup:t.factories.createGroup,createGraphInportsGroup:t.factories.createGroup,createGraphOutportsGroup:t.factories.createGroup,createGraphNode:function(e){return t.Node(e)},createGraphEdge:function(e){return t.Edge(e)},createGraphIIP:function(e){return t.IIP(e)},createGraphGroup:function(e){return t.Group(e)},createGraphEdgePreview:function(e){return t.Edge(e)}},t.Graph=n.createFactory(i({displayName:"TheGraphGraph",mixins:[],getDefaultProps:function(){return{library:{},graph:null,app:null,offsetX:0,offsetY:0,nodeIcons:{}}},getInitialState:function(){return{displaySelectionGroup:!0,edgePreview:null,edgePreviewX:0,edgePreviewY:0,forceSelection:!1,selectedNodes:[],errorNodes:[],selectedEdges:[],animatedEdges:[],offsetX:this.props.offsetX,offsetY:this.props.offsetY}},componentDidMount:function(){this.mounted=!0,this.subscribeGraph(null,this.props.graph),o.findDOMNode(this).addEventListener("the-graph-node-remove",this.removeNode)},componentWillUnmount:function(){this.mounted=!1},componentWillReceiveProps:function(e){this.subscribeGraph(this.props.graph,e.graph),this.markDirty()},subscribeGraph:function(e,t){e&&(e.removeListener("addEdge",this.resetPortRoute),e.removeListener("changeEdge",this.resetPortRoute),e.removeListener("removeEdge",this.resetPortRoute),e.removeListener("removeInitial",this.resetPortRoute),e.removeListener("changeNode",this.markDirty),e.removeListener("changeInport",this.markDirty),e.removeListener("changeOutport",this.markDirty),e.removeListener("endTransaction",this.markDirty)),t&&(t.on("addEdge",this.resetPortRoute),t.on("changeEdge",this.resetPortRoute),t.on("removeEdge",this.resetPortRoute),t.on("removeInitial",this.resetPortRoute),t.on("changeNode",this.markDirty),t.on("changeInport",this.markDirty),t.on("changeOutport",this.markDirty),t.on("endTransaction",this.markDirty))},edgePreview:null,edgeStart:function(e){var t,r=e.detail.port;if(this.state.edgePreview&&this.state.edgePreview.isIn!==e.detail.isIn){var n=this.state.edgePreview;return e.detail.isIn?n.to=r:n.from=r,this.addEdge(n),void this.cancelPreviewEdge()}(t=e.detail.isIn?{to:r}:{from:r}).isIn=e.detail.isIn,t.metadata={route:e.detail.route},t.type=e.detail.port.type;var i=o.findDOMNode(this.props.app);i.addEventListener("mousemove",this.renderPreviewEdge),i.addEventListener("panmove",this.renderPreviewEdge),i.addEventListener("tap",this.cancelPreviewEdge),this.setState({edgePreview:t})},cancelPreviewEdge:function(e){var t=o.findDOMNode(this.props.app);t.removeEventListener("mousemove",this.renderPreviewEdge),t.removeEventListener("panmove",this.renderPreviewEdge),t.removeEventListener("tap",this.cancelPreviewEdge),this.state.edgePreview&&(this.setState({edgePreview:null}),this.markDirty())},renderPreviewEdge:function(e){e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),t-=this.props.app.state.offsetX||0,r-=this.props.app.state.offsetY||0;var n=this.props.app.state.scale;this.setState({edgePreviewX:(t-this.props.app.state.x)/n,edgePreviewY:(r-this.props.app.state.y)/n}),this.markDirty()},addEdge:function(e){this.props.graph.addEdge(e.from.process,e.from.port,e.to.process,e.to.port,e.metadata)},moveGroup:function(e,r,n){for(var o=this.props.graph,i=e.length,s=0;s<i;s++){var a=o.getNode(e[s]);if(a)if(void 0!==r)o.setNodeMetadata(a.id,{x:a.metadata.x+r,y:a.metadata.y+n});else{var c=t.config.nodeHeight/2;o.setNodeMetadata(a.id,{x:Math.round(a.metadata.x/c)*c,y:Math.round(a.metadata.y/c)*c})}}},getComponentInfo:function(e){return console.error("DEPRECATED: getComponentInfo() will be removed in next version of the-graph. Use 'library' in props instead"),this.props.library[e]},portInfo:{},getPorts:function(e,t,r){var n=e.getNode(t),o=this.portInfo[t];if(!o){var i={},s={};if(r&&this.props.library){var a,c,l,p=this.props.library[r];if(!p)return{inports:i,outports:s};for(a=0,l=p.outports.length;a<l;a++)(c=p.outports[a]).name&&(s[c.name]={label:c.name,type:c.type,x:n.metadata.width,y:n.metadata.height/(l+1)*(a+1)});for(a=0,l=p.inports.length;a<l;a++)(c=p.inports[a]).name&&(i[c.name]={label:c.name,type:c.type,x:0,y:n.metadata.height/(l+1)*(a+1)})}o={inports:i,outports:s},this.portInfo[t]=o}return o},getNodeOutport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.outports[n]||(s.outports[n]={label:n,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.outports[n];return void 0!==o&&(a.route=o),a},getNodeInport:function(e,r,n,o,i){var s=this.getPorts(e,r,i);s.inports[n]||(s.inports[n]={label:n,x:0,y:t.config.nodeHeight/2},this.dirty=!0);var a=s.inports[n];return void 0!==o&&(a.route=o),a},resetPortRoute:function(e){if(e.from&&e.from.node){var t=this.portInfo[e.from.node];if(t){t.dirty=!0;var r=t.outports[e.from.port];r&&(r.route=null)}}if(e.to&&e.to.node){var n=this.portInfo[e.to.node];if(n){n.dirty=!0;var o=n.inports[e.to.port];o&&(o.route=null)}}},graphOutports:{},getGraphOutport:function(e){var r=this.graphOutports[e];return r||((r={inports:{},outports:{}}).inports[e]={label:e,type:"all",route:5,x:0,y:t.config.nodeHeight/2},this.graphOutports[e]=r),r},graphInports:{},getGraphInport:function(e){var r=this.graphInports[e];return r||((r={inports:{},outports:{}}).outports[e]={label:e,type:"all",route:2,x:t.config.nodeWidth,y:t.config.nodeHeight/2},this.graphInports[e]=r),r},setSelectedNodes:function(e){this.setState({selectedNodes:e}),this.markDirty()},setErrorNodes:function(e){this.setState({errorNodes:e}),this.markDirty()},setSelectedEdges:function(e){this.setState({selectedEdges:e}),this.markDirty()},setAnimatedEdges:function(e){this.setState({animatedEdges:e}),this.markDirty()},updateIcon:function(e,t){console.error("DEPRECATED: updateIcon() will be removed in next version of the-graph. Pass nodeIcons through props instead"),this.props.nodeIcons[e]=t,this.markDirty()},dirty:!1,libraryDirty:!1,markDirty:function(e){e&&e.libraryDirty&&(this.libraryDirty=!0),window.requestAnimationFrame(this.triggerRender)},triggerRender:function(e){this.mounted&&(this.dirty||(this.dirty=!0,this.forceUpdate()))},shouldComponentUpdate:function(){return this.dirty},render:function(){this.dirty=!1;var e=this,r=this.props.graph,n=(this.props.library,[]);this.libraryDirty&&(this.libraryDirty=!1,this.portInfo={});var o=null;this.state.edgePreview&&this.state.edgePreview.type&&(o={type:this.state.edgePreview.type,isIn:!this.state.edgePreview.isIn});var i=r.nodes.map((function(i){var s=e.props.library[i.component];if(!s)throw new Error("Component "+i.component+" is not in library");var a=i.id;if(i.metadata||(i.metadata={}),void 0===i.metadata.x&&(i.metadata.x=0),void 0===i.metadata.y&&(i.metadata.y=0),void 0===i.metadata.width&&(i.metadata.width=t.config.nodeWidth),i.metadata.height=t.config.nodeHeight,t.config.autoSizeNode&&s){var c=Math.max(s.inports.length,s.outports.length);if(c>t.config.maxPortCount){var l=c-t.config.maxPortCount;i.metadata.height=t.config.nodeHeight+l*t.config.nodeHeightIncrement}}i.metadata.label&&""!==i.metadata.label||(i.metadata.label=a);var p="cog",u="";e.props.nodeIcons[a]?p=e.props.nodeIcons[a]:s&&s.icon?p=s.icon:s&&s.iconsvg&&(u=s.iconsvg);var d=!0===e.state.selectedNodes[a];d&&n.push(a);var h={key:a,nodeID:a,x:i.metadata.x,y:i.metadata.y,label:i.metadata.label,sublabel:i.metadata.sublabel||i.component,width:i.metadata.width,height:i.metadata.height,app:e.props.app,graphView:e,graph:r,node:i,icon:p,iconsvg:u,ports:e.getPorts(r,a,i.component),onNodeSelection:e.props.onNodeSelection,selected:d,error:!0===e.state.errorNodes[a],showContext:e.props.showContext,highlightPort:o,allowEdgeStart:e.props.allowEdgeStart};return h=t.merge(t.config.graph.node,h),t.factories.graph.createGraphNode.call(this,h)})),a=r.edges.map((function(n){var o=r.getNode(n.from.node),i=r.getNode(n.to.node);if(o&&i){var s=0;n.metadata&&n.metadata.route&&(s=n.metadata.route);var a=e.getNodeOutport(r,n.from.node,n.from.port,s,o.component),c=e.getNodeInport(r,n.to.node,n.to.port,s,i.component),l=o.metadata.label+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+i.metadata.label+"()",p=n.from.node+"() "+n.from.port.toUpperCase()+(n.from.hasOwnProperty("index")?"["+n.from.index+"]":"")+" -> "+n.to.port.toUpperCase()+(n.to.hasOwnProperty("index")?"["+n.to.index+"]":"")+" "+n.to.node+"()",u={key:p,edgeID:p,graph:r,edge:n,app:e.props.app,sX:o.metadata.x+o.metadata.width,sY:o.metadata.y+a.y,tX:i.metadata.x,tY:i.metadata.y+c.y,label:l,route:s,onEdgeSelection:e.props.onEdgeSelection,selected:-1!==e.state.selectedEdges.indexOf(n),animated:-1!==e.state.animatedEdges.indexOf(n),showContext:e.props.showContext};return u=t.merge(t.config.graph.edge,u),t.factories.graph.createGraphEdge.call(this,u)}})),c=r.initializers.map((function(n){var o=r.getNode(n.to.node);if(o){var i=e.getNodeInport(r,n.to.node,n.to.port,0,o.component),s=o.metadata.x,a=o.metadata.y+i.y,c=n.from.data,l=typeof c,p={graph:r,label:!0===c||!1===c||"number"===l||"string"===l?c:l,x:s,y:a};return p=t.merge(t.config.graph.iip,p),t.factories.graph.createGraphIIP.call(this,p)}})),l=Object.keys(r.inports).map((function(n){var o=r.inports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var l=o.metadata;l.x||(l.x=0),l.y||(l.y=0),l.width||(l.width=t.config.nodeWidth),l.height||(l.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var u=p.inports[c];if(u){var d=r.getNode(s);if(d){var h={key:"inport.node."+n,export:o,exportKey:n,x:l.x,y:l.y,width:l.width,height:l.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphInport(n),isIn:!0,icon:l.icon?l.icon:"sign-in",showContext:e.props.showContext};h=t.merge(t.config.graph.inportNode,h);var f={key:"inport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:l.route?l.route:2,isIn:!0,label:"export in "+i.toUpperCase()+" -> "+c.toUpperCase()+" "+d.metadata.label,sX:h.x+t.config.nodeWidth,sY:h.y+t.config.nodeHeight/2,tX:d.metadata.x+u.x,tY:d.metadata.y+u.y,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.inportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,h)}console.warn("Node "+s+" not found for graph inport "+i)}else console.warn("Port "+s+"."+c+" not found for graph inport "+i)}else console.warn("Node "+s+" not found for graph inport "+i)})),p=Object.keys(r.outports).map((function(n){var o=r.outports[n],i=n,s=o.process,c=o.port;o.metadata||(o.metadata={x:0,y:0});var l=o.metadata;l.x||(l.x=0),l.y||(l.y=0),l.width||(l.width=t.config.nodeWidth),l.height||(l.height=t.config.nodeHeight);var p=e.portInfo[s];if(p){var u=p.outports[c];if(u){var d=r.getNode(s);if(d){var h={key:"outport.node."+n,export:o,exportKey:n,x:l.x,y:l.y,width:l.width,height:l.height,label:i,app:e.props.app,graphView:e,graph:r,node:{},ports:e.getGraphOutport(n),isIn:!1,icon:l.icon?l.icon:"sign-out",showContext:e.props.showContext};h=t.merge(t.config.graph.outportNode,h);var f={key:"outport.edge."+n,export:o,exportKey:n,graph:r,app:e.props.app,edge:{},route:l.route?l.route:4,isIn:!1,label:d.metadata.label+" "+c.toUpperCase()+" -> "+i.toUpperCase()+" export out",sX:d.metadata.x+u.x,sY:d.metadata.y+u.y,tX:h.x,tY:h.y+t.config.nodeHeight/2,showContext:e.props.showContext,allowEdgeStart:e.props.allowEdgeStart};return f=t.merge(t.config.graph.outportEdge,f),a.unshift(t.factories.graph.createGraphEdge.call(this,f)),t.factories.graph.createGraphNode.call(this,h)}console.warn("Node "+s+" not found for graph outport "+i)}else console.warn("Port "+s+"."+c+" not found for graph outport "+i)}else console.warn("Node "+s+" not found for graph outport "+i)})),u=r.groups.map((function(n){if(!(n.nodes.length<1)){var o=s.findMinMax(r,n.nodes);if(o){var i={key:"group."+n.name,graph:r,item:n,app:e.props.app,minX:o.minX,minY:o.minY,maxX:o.maxX,maxY:o.maxY,scale:e.props.scale,label:n.name,nodes:n.nodes,description:n.metadata.description,color:n.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};return i=t.merge(t.config.graph.nodeGroup,i),t.factories.graph.createGraphGroup.call(this,i)}}}));if(this.state.displaySelectionGroup&&n.length>=2){var d=s.findMinMax(r,n);if(d){var h={name:"selection",nodes:n,metadata:{color:1}},f={graph:r,app:e.props.app,item:h,minX:d.minX,minY:d.minY,maxX:d.maxX,maxY:d.maxY,scale:e.props.scale,color:h.metadata.color,triggerMoveGroup:e.moveGroup,showContext:e.props.showContext};f=t.merge(t.config.graph.selectionGroup,f);var m=t.factories.graph.createGraphGroup.call(this,f);u.push(m)}}var g=this.state.edgePreview;if(g){var y;if(g.from){var v=r.getNode(g.from.process),b=this.getNodeOutport(r,g.from.process,g.from.port);y={sX:v.metadata.x+v.metadata.width,sY:v.metadata.y+b.y,tX:this.state.edgePreviewX,tY:this.state.edgePreviewY,route:g.metadata.route}}else{var w=r.getNode(g.to.process),x=this.getNodeInport(r,g.to.process,g.to.port);y={sX:this.state.edgePreviewX,sY:this.state.edgePreviewY,tX:w.metadata.x,tY:w.metadata.y+x.y,route:g.metadata.route}}y=t.merge(t.config.graph.edgePreview,y);var k=t.factories.graph.createGraphEdgePreview.call(this,y);a.push(k)}var E=t.merge(t.config.graph.groupsGroup,{children:u}),_=t.factories.graph.createGraphGroupsGroup.call(this,E),S=t.merge(t.config.graph.edgesGroup,{children:a}),C=t.factories.graph.createGraphEdgesGroup.call(this,S),P=t.merge(t.config.graph.iipsGroup,{children:c}),A=t.factories.graph.createGraphIIPGroup.call(this,P),O=t.merge(t.config.graph.nodesGroup,{children:i}),T=t.factories.graph.createGraphNodesGroup.call(this,O),D=t.merge(t.config.graph.inportsGroup,{children:l}),N=t.factories.graph.createGraphInportsGroup.call(this,D),j=t.merge(t.config.graph.outportsGroup,{children:p}),I=[_,C,A,T,N,t.factories.graph.createGraphGroupsGroup.call(this,j)],R=this.state.forceSelection||n.length>0?" selection":"",M=t.merge(t.config.graph.container,{className:"graph"+R});return t.factories.graph.createGraphContainerGroup.call(this,M,I)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(74).Tooltip;e.exports.register=function(e){var t=e.TheGraph;function r(e,t,r,n,o){var i=n*e*2/3,s=e/2;return{className:o,height:1.1*e,width:i,rx:s,ry:s,x:t-=i/2,y:r-=e/2}}t.config.node={snap:t.config.nodeSize,container:{},background:{className:"node-bg"},border:{className:"node-border drag",rx:t.config.nodeRadius,ry:t.config.nodeRadius},innerRect:{className:"node-rect drag",x:3,y:3,rx:t.config.nodeRadius-2,ry:t.config.nodeRadius-2},icon:{ref:"icon",className:"icon node-icon drag"},iconsvg:{className:"icon node-icon drag"},inports:{className:"inports"},outports:{className:"outports"},labelBackground:{className:"node-label-bg"},labelRect:{className:"text-bg-rect"},labelText:{className:"node-label"},sublabelBackground:{className:"node-sublabel-bg"},sublabelRect:{className:"text-bg-rect"},sublabelText:{className:"node-sublabel"}},t.factories.node={createNodeGroup:t.factories.createGroup,createNodeBackgroundRect:t.factories.createRect,createNodeBorderRect:t.factories.createRect,createNodeInnerRect:t.factories.createRect,createNodeIconText:t.factories.createText,createNodeIconSVG:t.factories.createImg,createNodeInportsGroup:t.factories.createGroup,createNodeOutportsGroup:t.factories.createGroup,createNodeLabelGroup:t.factories.createGroup,createNodeLabelRect:t.factories.createRect,createNodeLabelText:t.factories.createText,createNodeSublabelGroup:t.factories.createGroup,createNodeSublabelRect:t.factories.createRect,createNodeSublabelText:t.factories.createText,createNodePort:function(e){return t.Port(e)}},t.Node=n.createFactory(i({displayName:"TheGraphNode",mixins:[s],getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("panstart",this.onTrackStart),this.props.onNodeSelection&&e.addEventListener("tap",this.onNodeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onNodeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onNodeSelection(this.props.nodeID,this.props.node,r)},onTrackStart:function(e){if(e.stopPropagation(),!this.props.app.menuShown&&!this.props.app.pinching){var t=o.findDOMNode(this);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),t.addEventListener("pancancel",this.onTrackEnd),this.props.export?this.props.graph.startTransaction("moveexport"):(!0===this.state.moving&&(this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movenode")),this.props.graph.startTransaction("movenode")),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0})}},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY;this.setState({lastTrackX:t,lastTrackY:r});var i=this.props.app.state.scale,s=Math.round(n/i),a=Math.round(o/i);if(this.props.export){var c={x:this.props.export.metadata.x+s,y:this.props.export.metadata.y+a};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,c):this.props.graph.setOutportMetadata(this.props.exportKey,c)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:this.props.node.metadata.x+s,y:this.props.node.metadata.y+a})},onTrackEnd:function(e){e.stopPropagation(),this.setState({moving:!1}),this.setState({lastTrackX:null,lastTrackY:null});var r=o.findDOMNode(this);r.removeEventListener("panmove",this.onTrack),r.removeEventListener("panend",this.onTrackEnd),r.removeEventListener("pancanel",this.onTrackEnd);var n=t.config.node.snap/2;if(this.props.export){var i={x:Math.round(this.props.export.metadata.x/n)*n,y:Math.round(this.props.export.metadata.y/n)*n};this.props.isIn?this.props.graph.setInportMetadata(this.props.exportKey,i):this.props.graph.setOutportMetadata(this.props.exportKey,i)}else this.props.graph.setNodeMetadata(this.props.nodeID,{x:Math.round(this.props.node.metadata.x/n)*n,y:Math.round(this.props.node.metadata.y/n)*n});this.props.export?this.props.graph.endTransaction("moveexport"):this.props.graph.endTransaction("movenode")},showContext:function(e){e.preventDefault(),e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"node",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:this.props.nodeID,item:this.props.export?this.props.export:this.props.node})},getContext:function(e,r,n){if(this.props.export)return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.exportKey});var o=r.x,i=r.y,s=this.props.app.state.scale,a=this.props.app.state.x,c=this.props.app.state.y,l=(this.props.x+this.props.width/2)*s+a-o,p=(this.props.y+this.props.height/2)*s+c-i,u=this.props.ports,d=this.props.nodeID,h=this.props.highlightPort;return this.props.graphView.state.edgePreview?this.props.graphView.state.edgePreview.isIn?t.NodeMenuPorts({ports:u.outports,triggerHideContext:n,isIn:!1,scale:s,processKey:d,deltaX:l,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:h}):t.NodeMenuPorts({ports:u.inports,triggerHideContext:n,isIn:!0,scale:s,processKey:d,deltaX:l,deltaY:p,translateX:o,translateY:i,nodeWidth:this.props.width,nodeHeight:this.props.height,highlightPort:h}):t.NodeMenu({menu:e,options:r,triggerHideContext:n,label:this.props.label,graph:this.props.graph,graphView:this.props.graphView,node:this,icon:this.props.icon,ports:u,process:this.props.node,processKey:d,x:o,y:i,nodeWidth:this.props.width,nodeHeight:this.props.height,deltaX:l,deltaY:p,highlightPort:h})},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpNormal},shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.icon!==this.props.icon||e.label!==this.props.label||e.sublabel!==this.props.sublabel||e.ports!==this.props.ports||e.selected!==this.props.selected||e.error!==this.props.error||e.highlightPort!==this.props.highlightPort||!0===e.ports.dirty},render:function(){this.props.ports.dirty&&(this.props.ports.dirty=!1);var e=this.props.label,n=this.props.sublabel;n&&n!==e||(n="");var o,i=this.props.x,s=this.props.y,a=this.props.width,c=this.props.height,l=this.props.nodeID,p=this.props.app,u=this.props.graph,d=this.props.node,h=void 0!==this.props.export,f=this.props.showContext,m=this.props.highlightPort,g=this.props.ports.inports;(o=Object.keys(g)).length;var y=o.map(function(e){var r=g[e],n={app:p,graph:u,node:d,key:l+".in."+r.label,label:r.label,processKey:l,isIn:!0,isExport:h,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:l,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),v=this.props.ports.outports;(o=Object.keys(v)).length;var b,w=o.map(function(e){var r=v[e],n={app:p,graph:u,node:d,key:l+".out."+r.label,label:r.label,processKey:l,isIn:!1,isExport:h,nodeX:i,nodeY:s,nodeWidth:a,nodeHeight:c,x:r.x,y:r.y,port:{process:l,port:r.label,type:r.type},highlightPort:m,route:r.route,showContext:f,allowEdgeStart:this.props.allowEdgeStart};return t.factories.node.createNodePort(n)}.bind(this)),x=t.FONT_AWESOME[this.props.icon];if(x||(x=t.FONT_AWESOME.cog),this.props.iconsvg&&""!==this.props.iconsvg){var k=t.merge(t.config.node.iconsvg,{src:this.props.iconsvg,x:t.config.nodeRadius-4,y:t.config.nodeRadius-4,width:this.props.width-10,height:this.props.height-10});b=t.factories.node.createNodeIconSVG.call(this,k)}else{var E=t.merge(t.config.node.icon,{x:this.props.width/2,y:this.props.height/2,children:x});b=t.factories.node.createNodeIconText.call(this,E)}var _=t.merge(t.config.node.background,{width:this.props.width,height:this.props.height+25}),S=t.factories.node.createNodeBackgroundRect.call(this,_),C=t.merge(t.config.node.border,{width:this.props.width,height:this.props.height}),P=t.factories.node.createNodeBorderRect.call(this,C),A=t.merge(t.config.node.innerRect,{width:this.props.width-6,height:this.props.height-6}),O=t.factories.node.createNodeInnerRect.call(this,A),T=t.merge(t.config.node.inports,{children:y}),D=t.factories.node.createNodeInportsGroup.call(this,T),N=t.merge(t.config.node.outports,{children:w}),j=t.factories.node.createNodeOutportsGroup.call(this,N),I=t.merge(t.config.node.labelText,{x:this.props.width/2,y:this.props.height+15,children:e}),R=t.factories.node.createNodeLabelText.call(this,I),M=r(14,this.props.width/2,this.props.height+15,e.length,t.config.node.labelRect.className);M=t.merge(t.config.node.labelRect,M);var L=t.factories.node.createNodeLabelRect.call(this,M),F=t.factories.node.createNodeLabelGroup.call(this,t.config.node.labelBackground,[L,R]),G=t.merge(t.config.node.sublabelText,{x:this.props.width/2,y:this.props.height+30,children:n}),B=t.factories.node.createNodeSublabelText.call(this,G),z=r(9,this.props.width/2,this.props.height+30,n.length,t.config.node.sublabelRect.className);z=t.merge(t.config.node.sublabelRect,z);var U=t.factories.node.createNodeSublabelRect.call(this,z),q=t.factories.node.createNodeSublabelGroup.call(this,t.config.node.sublabelBackground,[U,B]),$=this.props.app.state.scale,H={r:12*this.props.width/$,className:"eventcatcher"},V=t.factories.createCircle(H),W=[S,P,O,b,D,j,F,q];this.state.moving&&W.push(V);var J={className:"node drag"+(this.props.selected?" selected":"")+(this.props.error?" error":""),name:this.props.nodeID,key:this.props.nodeID,title:e,transform:"translate("+i+","+s+")"};return J=t.merge(t.config.node.container,J),t.factories.node.createNodeGroup.call(this,J,W)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20);e.exports.register=function(e){var t=e.TheGraph;function r(e){return t.NodeMenuPorts(e)}t.config.nodeMenu={container:{className:"context-node"},inports:{},outports:{},menu:{x:0,y:0}},t.factories.nodeMenu={createNodeMenuGroup:t.factories.createGroup,createNodeMenuInports:r,createNodeMenuOutports:r,createNodeMenuMenu:function(e){return t.Menu(e)}},t.NodeMenu=n.createFactory(i({displayName:"TheGraphNodeMenu",radius:72,stopPropagation:function(e){e.stopPropagation()},componentDidMount:function(){o.findDOMNode(this).addEventListener("contextmenu",(function(e){e.stopPropagation(),e.preventDefault()}),!1)},render:function(){var e=this.props.node.props.app.state.scale,r=this.props.ports,n=this.props.deltaX,o=this.props.deltaY,i={ports:r.inports,isIn:!0,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};i=t.merge(t.config.nodeMenu.inports,i);var s=t.factories.nodeMenu.createNodeMenuInports.call(this,i),a={ports:r.outports,isIn:!1,scale:e,processKey:this.props.processKey,deltaX:n,deltaY:o,nodeWidth:this.props.nodeWidth,nodeHeight:this.props.nodeHeight,highlightPort:this.props.highlightPort};a=t.merge(t.config.nodeMenu.outports,a);var c=t.factories.nodeMenu.createNodeMenuOutports.call(this,a),l={menu:this.props.menu,options:this.props.options,triggerHideContext:this.props.triggerHideContext,icon:this.props.icon,label:this.props.label};l=t.merge(t.config.nodeMenu.menu,l);var p=[s,c,t.factories.nodeMenu.createNodeMenuMenu.call(this,l)],u={transform:"translate("+this.props.x+","+this.props.y+")",children:p};return u=t.merge(t.config.nodeMenu.container,u),t.factories.nodeMenu.createNodeMenuGroup.call(this,u)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPort={container:{},backgroundRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius,height:t.contextPortSize-1},circle:{r:10},text:{}},t.factories.nodeMenuPort={createNodeMenuPortGroup:t.factories.createGroup,createNodeMenuBackgroundRect:t.factories.createRect,createNodeMenuPortCircle:t.factories.createCircle,createNodeMenuPortText:t.factories.createText},t.NodeMenuPort=n.createFactory(i({displayName:"TheGraphNodeMenuPort",componentDidMount:function(){o.findDOMNode(this).addEventListener("tap",this.edgeStart)},edgeStart:function(e){e.stopPropagation();var t={process:this.props.processKey,port:this.props.label,type:this.props.port.type},r=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:t,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(r)},render:function(){var e=this.props.label.length,r=e>12?8*e+40:120,n=this.props.highlightPort,o={className:"context-port-bg"+(n&&n.isIn===this.props.isIn&&n.type===this.props.port.type?" highlight":""),x:this.props.x+(this.props.isIn?-r:0),y:this.props.y-t.contextPortSize/2,width:r};o=t.merge(t.config.nodeMenuPort.backgroundRect,o);var i=t.factories.nodeMenuPort.createNodeMenuBackgroundRect.call(this,o),s={className:"context-port-hole stroke route"+this.props.route,cx:this.props.x,cy:this.props.y};s=t.merge(t.config.nodeMenuPort.circle,s);var a=t.factories.nodeMenuPort.createNodeMenuPortCircle.call(this,s),c={className:"context-port-label fill route"+this.props.route,x:this.props.x+(this.props.isIn?-20:20),y:this.props.y,children:this.props.label.replace(/(.*)\/(.*)(_.*)\.(.*)/,"$2.$4")};c=t.merge(t.config.nodeMenuPort.text,c);var l=[i,a,t.factories.nodeMenuPort.createNodeMenuPortText.call(this,c)],p=t.merge(t.config.nodeMenuPort.container,{className:"context-port click context-port-"+(this.props.isIn?"in":"out")});return t.factories.nodeMenuPort.createNodeMenuPortGroup.call(this,p,l)}}))}},function(e,t,r){var n=r(5),o=r(20);e.exports.register=function(e){var t=e.TheGraph;t.config.nodeMenuPorts={container:{},linesGroup:{className:"context-ports-lines"},portsGroup:{className:"context-ports-ports"},portPath:{className:"context-port-path"},nodeMenuPort:{}},t.factories.menuPorts={createNodeMenuPortsGroup:t.factories.createGroup,createNodeMenuPortsLinesGroup:t.factories.createGroup,createNodeMenuPortsPortsGroup:t.factories.createGroup,createNodeMenuPortsPortPath:t.factories.createPath,createNodeMenuPortsNodeMenuPort:function(e){return t.NodeMenuPort(e)}},t.NodeMenuPorts=n.createFactory(o({displayName:"TheGraphNodeMenuPorts",render:function(){for(var e=[],r=[],n=this.props.scale,o=this.props.ports,i=this.props.deltaX,s=this.props.deltaY,a=Object.keys(this.props.ports),c=a.length*t.contextPortSize,l=a.length,p=0;p<l;p++){var u=a[p],d=o[u],h=this.props.isIn?-100:100,f=0-c/2+p*t.contextPortSize+t.contextPortSize/2,m=(d.x-this.props.nodeWidth/2)*n+i,g=(d.y-this.props.nodeHeight/2)*n+s,y=t.merge(t.config.nodeMenuPorts.portPath,{d:["M",m,g,"L",h,f].join(" ")}),v=t.factories.menuPorts.createNodeMenuPortsPortPath.call(this,y),b={label:u,port:d,processKey:this.props.processKey,isIn:this.props.isIn,x:h,y:f,route:d.route,highlightPort:this.props.highlightPort};b=t.merge(t.config.nodeMenuPorts.nodeMenuPort,b);var w=t.factories.menuPorts.createNodeMenuPortsNodeMenuPort.call(this,b);r.push(v),e.push(w)}var x="";void 0!==this.props.translateX&&(x="translate("+this.props.translateX+","+this.props.translateY+")");var k=t.merge(t.config.nodeMenuPorts.linesGroup,{children:r}),E=t.factories.menuPorts.createNodeMenuPortsLinesGroup.call(this,k),_=t.merge(t.config.nodeMenuPorts.portsGroup,{children:e}),S=[E,t.factories.menuPorts.createNodeMenuPortsGroup.call(this,_)],C={className:"context-ports context-ports-"+(this.props.isIn?"in":"out"),transform:x};return C=t.merge(t.config.nodeMenuPorts.container,C),t.factories.menuPorts.createNodeMenuPortsGroup.call(this,C,S)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(74).Tooltip,a=r(98);e.exports.register=function(e){var t=e.TheGraph;t.config.port={container:{className:"port arrow"},backgroundCircle:{className:"port-circle-bg"},arc:{className:"port-arc"},innerCircle:{ref:"circleSmall"},text:{ref:"label",className:"port-label drag"}},t.factories.port={createPortGroup:t.factories.createGroup,createPortBackgroundCircle:t.factories.createCircle,createPortArc:t.factories.createPath,createPortInnerCircle:t.factories.createCircle,createPortLabelText:t.factories.createText},t.Port=n.createFactory(i({displayName:"TheGraphPort",mixins:[s],componentDidMount:function(){var e=o.findDOMNode(this);e.addEventListener("tap",this.edgeStart),e.addEventListener("panstart",this.edgeStart),e.addEventListener("panend",this.triggerDropOnTarget),e.addEventListener("the-graph-edge-drop",this.edgeStart),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},getTooltipTrigger:function(){return o.findDOMNode(this)},shouldShowTooltip:function(){return this.props.app.state.scale<t.zbpBig||this.props.label.length>8},showContext:function(e){if(!(this.props.isExport||e&&e.target===o.findDOMNode(this.refs.label))){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isIn?"nodeInport":"nodeOutport",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.port})}},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},edgeStart:function(e){if(!this.props.isExport&&this.props.allowEdgeStart&&(!e||e.target!==o.findDOMNode(this.refs.label))){e.stopPropagation&&e.stopPropagation();var t=new CustomEvent("the-graph-edge-start",{detail:{isIn:this.props.isIn,port:this.props.port,route:this.props.route},bubbles:!0});o.findDOMNode(this).dispatchEvent(t)}},triggerDropOnTarget:function(e){if(e.relatedTarget){var t=new CustomEvent("the-graph-edge-drop",{detail:null,bubbles:!0});e.relatedTarget.dispatchEvent(t)}},render:function(){var e;this.props.label.length>7&&(e={fontSize:30/(4*this.props.label.length)*6+"px"});var r=4,n=this.props.highlightPort,o=a.inport,i=a.outport;!n||n.isIn!==this.props.isIn||n.type!==this.props.port.type&&"any"!==this.props.port.type||(r=6,o=a.inportBig,i=a.outportBig);var s=t.merge(t.config.port.backgroundCircle,{r:r+1}),c=t.factories.port.createPortBackgroundCircle.call(this,s),l=t.merge(t.config.port.arc,{d:this.props.isIn?o:i}),p=t.factories.port.createPortArc.call(this,l),u={className:"port-circle-small fill route"+this.props.route,r:r-1.5};u=t.merge(t.config.port.innerCircle,u);var d=t.factories.port.createPortInnerCircle.call(this,u),h={x:this.props.isIn?5:-5,style:e,children:this.props.label};h=t.merge(t.config.port.text,h);var f=[c,p,d,t.factories.port.createPortLabelText.call(this,h)],m=t.merge(t.config.port.container,{title:this.props.label,transform:"translate("+this.props.x+","+this.props.y+")"});return t.factories.port.createPortGroup.call(this,m,f)}})),t.Port.defaultProps={allowEdgeStart:!0}}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(74).Tooltip;e.exports.register=function(e){var t=e.TheGraph;t.config.edge={curve:t.config.nodeSize,container:{className:"edge"},backgroundPath:{className:"edge-bg"},foregroundPath:{ref:"route",className:"edge-fg stroke route"},touchPath:{className:"edge-touch",ref:"touch"}},t.factories.edge={createEdgeGroup:t.factories.createGroup,createEdgeBackgroundPath:t.factories.createPath,createEdgeForegroundPath:t.factories.createPath,createEdgeTouchPath:t.factories.createPath,createEdgePathArray:function(e,t,r,n,o,i,s,a){return["M",e,t,"C",r,n,o,i,s,a]},createArrow:t.factories.createPolygon};var r=t.config.edge.curve,a=function(e,t,r,n,o,i,s,a,c){var l=1-e,p=n*e+i*l,u=o*e+s*l;return[((t*e+n*l)*e+p*l)*e+(p*e+(i*e+a*l)*l)*l,((r*e+o*l)*e+u*l)*e+(u*e+(s*e+c*l)*l)*l]};t.Edge=n.createFactory(i({displayName:"TheGraphEdge",mixins:[s],componentWillMount:function(){},componentDidMount:function(){var e=o.findDOMNode(this);this.props.onEdgeSelection&&e.addEventListener("tap",this.onEdgeSelection),this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},onEdgeSelection:function(e){e.stopPropagation();var r=t.metaKeyPressed||"touch"===e.pointerType;this.props.onEdgeSelection(this.props.edgeID,this.props.edge,r)},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.export?this.props.isIn?"graphInport":"graphOutport":"edge",x:t,y:r,graph:this.props.graph,itemKey:this.props.export?this.props.exportKey:null,item:this.props.export?this.props.export:this.props.edge})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,triggerHideContext:n,label:this.props.label,iconColor:this.props.route})},shouldComponentUpdate:function(e,t){return e.sX!==this.props.sX||e.sY!==this.props.sY||e.tX!==this.props.tX||e.tY!==this.props.tY||e.selected!==this.props.selected||e.animated!==this.props.animated||e.route!==this.props.route},getTooltipTrigger:function(){return o.findDOMNode(this.refs.touch)},shouldShowTooltip:function(){return!0},render:function(){var e,n,o,i,s=this.props.sX,c=this.props.sY,l=this.props.tX,p=this.props.tY;if(l-5<s){var u=(s-l)*r/200;Math.abs(p-c)<t.config.nodeSize/2?(e=s+u,n=c-u,o=l-u,i=p-u):(e=s+u,n=c+(p>c?u:-u),o=l-u,i=p+(p>c?-u:u))}else n=c,o=e=s+(l-s)/2,i=p;var d=t.factories.edge.createEdgePathArray(s,c,e,n,o,i,l,p);d=d.join(" ");var h=t.merge(t.config.edge.backgroundPath,{d:d}),f=t.factories.edge.createEdgeBackgroundPath(h),m=t.config.edge.foregroundPath.className+this.props.route,g=t.merge(t.config.edge.foregroundPath,{d:d,className:m}),y=t.factories.edge.createEdgeForegroundPath(g),v=t.merge(t.config.edge.touchPath,{d:d}),b=t.factories.edge.createEdgeTouchPath(v),w={className:"edge"+(this.props.selected?" selected":"")+(this.props.animated?" animated":""),title:this.props.label};w=t.merge(t.config.edge.container,w);var x=a(.5,s,c,e,n,o,i,l,p),k=function(t){return a(.5+t,s,c,e,n,o,i,l,p)},E=k(.01),_=k(-.01),S=1*(E[1]-_[1])/(E[0]-_[0]),C=x[1]-S*x[0],P=function(e,t,r,n,o,i){var s=e+o/Math.sqrt(1+r*r);return[s,Math.abs(r)===1/0?t+(i||1)*o:r*s+n]},A=12;E[0]>_[0]&&(A*=-1);var O=function(e,t,r,n){var o=-1/r,i=t-o*e;return[P(e,t,o,i,n/2),P(e,t,o,i,n/-2)]}((x=P(x[0],x[1],S,C,-1*A/2))[0],x[1],S,.9*A),T=E[1]>_[1]?-1:1,D=P(x[0],x[1],S,C,A,T);O.push(D);var N=O.map((function(e){return e.join(",")})).join(" "),j=t.factories.edge.createArrow({points:N,className:"arrow-bg"}),I=t.factories.edge.createArrow({points:N,className:"arrow fill route"+this.props.route});return t.factories.edge.createEdgeGroup(w,[f,j,y,b,I])}}))}},function(e,t,r){var n=r(5),o=r(20),i=r(163);e.exports.register=function(e){var t=e.TheGraph;t.config.iip={container:{className:"iip"},path:{className:"iip-path"},text:{className:"iip-info",height:5,halign:"right"}},t.factories.iip={createIIPContainer:t.factories.createGroup,createIIPPath:t.factories.createPath,createIIPText:function(e){return i(e)}};t.IIP=n.createFactory(o({displayName:"TheGraphIIP",shouldComponentUpdate:function(e,t){return e.x!==this.props.x||e.y!==this.props.y||e.label!==this.props.label},render:function(){var e=this.props.x,r=this.props.y,n=["M",e,r,"L",e-10,r].join(" "),o=this.props.label+"";o.length>12&&(o=o.slice(0,9)+"...");var i=t.merge(t.config.iip.path,{d:n}),s=t.factories.iip.createIIPPath.call(this,i),a=t.merge(t.config.iip.text,{x:e-10,y:r,text:o}),c=[s,t.factories.iip.createIIPText.call(this,a)],l=t.merge(t.config.iip.container,{title:this.props.label});return t.factories.iip.createIIPContainer.call(this,l,c)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20);e.exports.register=function(e){var t=e.TheGraph;t.config.group={container:{className:"group"},boxRect:{rx:t.config.nodeRadius,ry:t.config.nodeRadius},labelText:{className:"group-label"},descriptionText:{className:"group-description"}},t.factories.group={createGroupGroup:t.factories.createGroup,createGroupBoxRect:t.factories.createRect,createGroupLabelText:t.factories.createText,createGroupDescriptionText:t.factories.createText},t.Group=n.createFactory(i({displayName:"TheGraphGroup",getInitialState:function(){return{moving:!1,lastTrackX:null,lastTrackY:null}},componentDidMount:function(){o.findDOMNode(this.refs.events).addEventListener("panstart",this.onTrackStart);var e=o.findDOMNode(this);this.props.showContext&&(e.addEventListener("contextmenu",this.showContext),e.addEventListener("press",this.showContext))},showContext:function(e){e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventTap&&e.preventTap(),e.gesture&&(e=e.gesture.srcEvent);var t=e.x||e.clientX||0,r=e.y||e.clientY||0;e.touches&&e.touches.length&&(t=e.touches[0].clientX,r=e.touches[0].clientY),this.props.showContext({element:this,type:this.props.isSelectionGroup?"selection":"group",x:t,y:r,graph:this.props.graph,itemKey:this.props.label,item:this.props.item})},getContext:function(e,r,n){return t.Menu({menu:e,options:r,label:this.props.label,triggerHideContext:n})},onTrackStart:function(e){e.stopPropagation(),this.setState({moving:!0}),this.setState({lastTrackX:0,lastTrackY:0});var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.props.graph.startTransaction("movegroup")},onTrack:function(e){e.stopPropagation();var t=e.gesture.deltaX,r=e.gesture.deltaY,n=t-this.state.lastTrackX,o=r-this.state.lastTrackY,i=Math.round(n/this.props.scale),s=Math.round(o/this.props.scale);this.setState({lastTrackX:t,lastTrackY:r}),this.props.triggerMoveGroup(this.props.item.nodes,i,s)},onTrackEnd:function(e){this.setState({moving:!1}),e.stopPropagation(),this.props.triggerMoveGroup(this.props.item.nodes);var t=o.findDOMNode(this.refs.events);t.addEventListener("panmove",this.onTrack),t.addEventListener("panend",this.onTrackEnd),this.setState({lastTrackX:null,lastTrackY:null}),this.props.graph.endTransaction("movegroup")},render:function(){var e=this.props.minX-t.config.nodeWidth/2,r=this.props.minY-t.config.nodeHeight/2,n=this.props.color?this.props.color:0,o=this.props.isSelectionGroup?" selection drag":"",i={x:e,y:r,width:this.props.maxX-e+.5*t.config.nodeWidth,height:this.props.maxY-r+.75*t.config.nodeHeight,className:"group-box color"+n+o};i=t.merge(t.config.group.boxRect,i);var s=t.factories.group.createGroupBoxRect.call(this,i),a={x:e+t.config.nodeRadius,y:r+9,children:this.props.label};a=t.merge(t.config.group.labelText,a);var c=t.factories.group.createGroupLabelText.call(this,a),l={x:e+t.config.nodeRadius,y:r+24,children:this.props.description};l=t.merge(t.config.group.descriptionText,l);var p=t.factories.group.createGroupDescriptionText.call(this,l),u={className:"eventcatcher drag",ref:"events"};if(this.props.isSelectionGroup?(u.x=i.x,u.y=i.y,u.width=i.width,u.height=i.height):(u.x=i.x,u.y=i.y,u.width=24*this.props.label.length*.75,u.height=48),this.state.moving){u.width+=2e3,u.height+=2e3,u.x-=1e3,u.y-=1e3}var d=[s,c,p,t.factories.createRect(u)],h=t.merge(t.config.group.container,{});return t.factories.group.createGroupGroup.call(this,h,d)}}))}},function(e,t,r){var n=r(5),o=r(15),i=r(20),s=r(98),a=r(72),c=r(164),l=r(71),p={radius:72,positions:{n4IconX:0,n4IconY:-52,n4LabelX:0,n4LabelY:-35,s4IconX:0,s4IconY:52,s4LabelX:0,s4LabelY:35,e4IconX:45,e4IconY:-5,e4LabelX:45,e4LabelY:15,w4IconX:-45,w4IconY:-5,w4LabelX:-45,w4LabelY:15},container:{className:"context-menu"},arcPath:{className:"context-arc context-node-info-bg"},sliceIconText:{className:"icon context-icon context-node-info-icon"},sliceLabelText:{className:"context-arc-label"},sliceIconLabelText:{className:"context-arc-icon-label"},circleXPath:{className:"context-circle-x",d:"M -51 -51 L 51 51 M -51 51 L 51 -51"},outlineCircle:{className:"context-circle"},labelText:{className:"context-node-label"},iconRect:{className:"context-node-rect",x:-24,y:-24,width:48,height:48,rx:8,ry:8}},u={createMenuGroup:l.createGroup,createMenuSlice:function(e){var t=e.direction,r=a(p.arcPath,{d:s[t]}),n=[u.createMenuSliceArcPath(r)];if(this.props.menu[t]){var o=this.props.menu[t];if(o.icon){var i={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:c[o.icon]};i=a(p.sliceIconText,i),n.push(u.createMenuSliceIconText.call(this,i))}if(o.label){var l={x:p.positions[t+"IconX"],y:p.positions[t+"IconY"],children:o.label};l=a(p.sliceLabelText,l),n.push(u.createMenuSliceLabelText.call(this,l))}if(o.iconLabel){var d={x:p.positions[t+"LabelX"],y:p.positions[t+"LabelY"],children:o.iconLabel};d=a(p.sliceIconLabelText,d),n.push(u.createMenuSliceIconLabelText.call(this,d))}}var h={ref:t,className:"context-slice context-node-info"+(this.state[t+"tappable"]?" click":""),children:n};return h=a(p.container,h),u.createMenuGroup.call(this,h)},createMenuSliceArcPath:l.createPath,createMenuSliceText:l.createText,createMenuSliceIconText:l.createText,createMenuSliceLabelText:l.createText,createMenuSliceIconLabelText:l.createText,createMenuCircleXPath:l.createPath,createMenuOutlineCircle:l.createCircle,createMenuLabelText:l.createText,createMenuMiddleIconRect:l.createRect,createMenuMiddleIconText:l.createText};var d=n.createFactory(i({displayName:"TheGraphMenu",radius:p.radius,getInitialState:function(){return{n4tappable:this.props.menu.n4&&this.props.menu.n4.action,s4tappable:this.props.menu.s4&&this.props.menu.s4.action,e4tappable:this.props.menu.e4&&this.props.menu.e4.action,w4tappable:this.props.menu.w4&&this.props.menu.w4.action}},onTapN4:function(){var e=this.props.options;this.props.menu.n4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapS4:function(){var e=this.props.options;this.props.menu.s4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapE4:function(){var e=this.props.options;this.props.menu.e4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},onTapW4:function(){var e=this.props.options;this.props.menu.w4.action(e.graph,e.itemKey,e.item),this.props.triggerHideContext()},componentDidMount:function(){this.state.n4tappable&&this.refs.n4.addEventListener("tap",this.onTapN4),this.state.s4tappable&&this.refs.s4.addEventListener("tap",this.onTapS4),this.state.e4tappable&&this.refs.e4.addEventListener("tap",this.onTapE4),this.state.w4tappable&&this.refs.w4.addEventListener("tap",this.onTapW4),o.findDOMNode(this).addEventListener("contextmenu",(function(e){e&&(e.stopPropagation(),e.preventDefault())}),!1)},getPosition:function(){return{x:void 0!==this.props.x?this.props.x:this.props.options.x||0,y:void 0!==this.props.y?this.props.y:this.props.options.y||0}},render:function(){var e=this.props.menu,t=(this.props.options,this.getPosition()),r=a(p.circleXPath,{}),n=a(p.outlineCircle,{r:this.radius}),o=[u.createMenuSlice.call(this,{direction:"n4"}),u.createMenuSlice.call(this,{direction:"s4"}),u.createMenuSlice.call(this,{direction:"e4"}),u.createMenuSlice.call(this,{direction:"w4"}),u.createMenuCircleXPath.call(this,r),u.createMenuOutlineCircle.call(this,n)];if(this.props.label||e.icon){var i={x:0,y:0-this.radius-15,children:this.props.label?this.props.label:e.label};i=a(p.labelText,i),o.push(u.createMenuLabelText.call(this,i))}if(this.props.icon||e.icon){var s=void 0!==this.props.iconColor?this.props.iconColor:e.iconColor,l="";s&&(l=" fill route"+s);var d=a(p.iconRect,{}),h=u.createMenuMiddleIconRect.call(this,d),f={className:"icon context-node-icon"+l,children:c[this.props.icon?this.props.icon:e.icon]};f=a(p.iconText,f);var m=u.createMenuMiddleIconText.call(this,f);o.push(h,m)}var g={transform:"translate("+t.x+","+t.y+")",children:o};return g=a(p.container,g),u.createMenuGroup.call(this,g)}}));e.exports={Menu:d,config:p,factories:u}},function(e,t,r){var n=r(5),o=r(20),i=r(71),s=r(72),a={container:{},rect:{className:"tooltip-bg",x:0,y:-7,rx:3,ry:3,height:16},text:{className:"tooltip-label",ref:"label"}},c={createTooltipGroup:i.createGroup,createTooltipRect:i.createRect,createTooltipText:i.createText},l=n.createFactory(o({displayName:"TheGraphTooltip",render:function(){var e=s(a.rect,{width:6*this.props.label.length}),t=c.createTooltipRect.call(this,e),r=s(a.text,{children:this.props.label}),n=[t,c.createTooltipText.call(this,r)],o={className:"tooltip"+(this.props.visible?"":" hidden"),transform:"translate("+this.props.x+","+this.props.y+")"};return o=s(a.container,o),c.createTooltipGroup.call(this,o,n)}}));e.exports={config:a,factories:c,Tooltip:l}},function(e,t,r){var n=r(5),o=r(20),i=r(97),s=r(165);function a(e,t,r){e.clearRect(0,0,r.width,r.height),e.fillStyle=r.outsideFill;var n=Math.round((r.viewrectangle[0]/r.scale-r.thumbrectangle[0])*r.thumbscale),o=Math.round((r.viewrectangle[1]/r.scale-r.thumbrectangle[1])*r.thumbscale),i=Math.round(r.viewrectangle[2]*r.thumbscale/r.scale),s=Math.round(r.viewrectangle[3]*r.thumbscale/r.scale),a=!1;return n<0&&o<0&&i>r.width-n&&s>r.height-o?{hide:a=!0}:(a=!1,n<0?(i+=n,n=0,t.style.borderLeftColor=r.viewBoxBorder2):(t.style.borderLeftColor=r.viewBoxBorder,e.fillRect(0,0,n,r.height)),o<0?(s+=o,o=0,t.style.borderTopColor=r.viewBoxBorder2):(t.style.borderTopColor=r.viewBoxBorder,e.fillRect(n,0,i,o)),i>r.width-n?(i=r.width-n,t.style.borderRightColor=r.viewBoxBorder2):(t.style.borderRightColor=r.viewBoxBorder,e.fillRect(n+i,0,r.width-(n+i),r.height)),s>r.height-o?(s=r.height-o,t.style.borderBottomColor=r.viewBoxBorder2):(t.style.borderBottomColor=r.viewBoxBorder,e.fillRect(n,o+s,i,r.height-(o+s))),t.style.left=n+"px",t.style.top=o+"px",t.style.width=i+"px",t.style.height=s+"px",{hide:a})}var c=o({propTypes:{},getDefaultProps:function(){return{width:200,height:150,hidden:!1,backgroundColor:"hsla(184, 8%, 75%, 0.9)",outsideFill:"hsla(0, 0%, 0%, 0.4)",nodeSize:60,nodeLineWidth:1,viewrectangle:[0,0,0,0],viewscale:1,viewBoxBorder:"hsla(190, 100%, 80%, 0.4)",viewBoxBorder2:"hsla( 10,  60%, 32%, 0.3)",viewBoxBorderStyle:"dotted",graph:null}},getInitialState:function(){return{thumbscale:1,currentPan:[0,0]}},render:function(){var e=this.props,t={position:"absolute",top:0,left:0},r={height:e.height,width:e.width,overflow:"hidden",cursor:"move",backgroundColor:e.backgroundColor},o={key:"thumb",ref:this._refThumbCanvas,width:e.width,height:e.height,style:t},i={key:"viewbox",ref:this._refViewboxCanvas,width:e.width,height:e.height,style:t},s={key:"viewboxdiv",ref:this._refViewboxElement,style:{position:"absolute",top:0,left:0,width:e.width,height:e.height,borderStyle:"dotted",borderWidth:1}};return n.createElement("div",{key:"nav",style:r,ref:this._refTopElement},[n.createElement("div",s),n.createElement("canvas",i),n.createElement("canvas",o)])},componentDidUpdate:function(){this._updatePan(),this._renderElements()},componentDidMount:function(){this._updatePan(),this._renderElements(),this._setupEvents()},_refThumbCanvas:function(e){this._thumbContext=e.getContext("2d")},_refViewboxCanvas:function(e){this._viewboxContext=e.getContext("2d")},_refViewboxElement:function(e){this._viewboxElement=e},_refTopElement:function(e){this._topElement=e},_renderElements:function(){var e=function(e,t){var r={};for(var n in t)r[n]=t[n];return r.graph=null,r.lineWidth=t.nodeLineWidth,s.render(e,t.graph,r)}(this._thumbContext,this.props);!function(e,t,r,n){var o={};for(var i in n)o[i]=n[i];o.graph=null,o.scale=n.viewscale;var s=r.rectangle[2],c=r.rectangle[3];o.thumbscale=s>c?n.width/s:n.height/c,o.thumbrectangle=r.rectangle,a(e,t,o)}(this._viewboxContext,this._viewboxElement,e,this.props)},_updatePan:function(){this.state.currentPan=[-this.props.viewrectangle[0],-this.props.viewrectangle[1]]},_setupEvents:function(){this.hammer=new i.Manager(this._topElement,{recognizers:[[i.Tap],[i.Pan,{direction:i.DIRECTION_ALL}]]}),this.hammer.on("tap",function(e){this.props.onTap&&this.props.onTap(null,e)}.bind(this)),this.hammer.on("panmove",function(e){if(this.props.onPanTo){var t=this.state.currentPan[0],r=this.state.currentPan[1],n=this.state.thumbscale/this.props.viewscale;t-=e.deltaX/n,r-=e.deltaY/n;var o={x:Math.round(t),y:Math.round(r)};this.state.currentPan[0]=o.x,this.state.currentPan[1]=o.y,this.props.onPanTo(o,e)}}.bind(this))}});e.exports={render:a,calculateStyleFromTheme:function(e){var t={};return"dark"===e?(t.viewBoxBorder="hsla(190, 100%, 80%, 0.4)",t.viewBoxBorder2="hsla( 10,  60%, 32%, 0.3)",t.outsideFill="hsla(0, 0%, 0%, 0.4)",t.backgroundColor="hsla(0, 0%, 0%, 0.9)"):(t.viewBoxBorder="hsla(190, 100%, 20%, 0.8)",t.viewBoxBorder2="hsla( 10,  60%, 80%, 0.8)",t.outsideFill="hsla(0, 0%, 100%, 0.4)",t.backgroundColor="hsla(0, 0%, 100%, 0.9)"),t},Component:c}},function(e,t){e.exports={applyToGraph:function(e,t,r){console.error("DEPRECATED: TheGraph.autolayout.applyAutolayout() will be removed in next version");var n,o,i=t.children.slice();for(n=0,o=i.length;n<o;n++){var s=i[n],a=e.getNode(s.id);if(s.children){var c,l=s.children;for(c in l){var p=l[c];p.id&&e.setNodeMetadata(p.id,{x:Math.round((s.x+p.x)/r.snap)*r.snap,y:Math.round((s.y+p.y)/r.snap)*r.snap})}}if(a)e.setNodeMetadata(s.id,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap});else{var u=s.id.split(":::"),d=u[0],h=u[1];"inport"===d&&e.inports[h]?e.setInportMetadata(h,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap}):"outport"===d&&e.outports[h]&&e.setOutportMetadata(h,{x:Math.round(s.x/r.snap)*r.snap,y:Math.round(s.y/r.snap)*r.snap})}}}}},function(e,t){function r(e){var t=[];return e.nodes.forEach((function(r){var n={name:r.component,icon:"cog",description:"",inports:[],outports:[]};Object.keys(e.inports).forEach((function(t){var o=e.inports[t];if(o.process===r.id){for(var i=0;i<n.inports.length;i++)if(n.inports[i].name===o.port)return;n.inports.push({name:o.port,type:"all"})}})),Object.keys(e.outports).forEach((function(t){var o=e.outports[t];if(o.process===r.id){for(var i=0;i<n.outports.length;i++)if(n.outports[i].name===o.port)return;n.outports.push({name:o.port,type:"all"})}})),e.initializers.forEach((function(e){if(e.to.node===r.id){for(var t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}})),e.edges.forEach((function(e){var t;if(e.from.node===r.id){for(t=0;t<n.outports.length;t++)if(n.outports[t].name===e.from.port)return;n.outports.push({name:e.from.port,type:"all"})}if(e.to.node===r.id){for(t=0;t<n.inports.length;t++)if(n.inports[t].name===e.to.port)return;n.inports.push({name:e.to.port,type:"all"})}})),t.push(n)})),t}e.exports={mergeComponentDefinition:function(e,t){if(e===t)return t;var r,n,o,i,s,a=e.inports,c=t.inports;if(a!==c)for(r=0,o=a.length;r<o;r++){var l=a[r];for(s=!1,n=0,i=c.length;n<i;n++){var p=c[n];l.name===p.name&&(s=!0)}s||c.push(l)}var u=e.outports,d=t.outports;if(u!==d)for(r=0,o=u.length;r<o;r++){var h=u[r];for(s=!1,n=0,i=d.length;n<i;n++){var f=d[n];h.name===f.name&&(s=!0)}s||d.push(h)}return"cog"!==t.icon?e.icon=t.icon:t.icon=e.icon,t.iconsvg=e.iconsvg,t},componentsFromGraph:r,libraryFromGraph:function(e){var t={};return r(e).forEach((function(e){t[e.name]=e})),t}}},function(e,t,r){var n=r(166);e.exports={getDefaultMenus:function(e){console.error("DEPRECATED: TheGraph.menus.getDefaultMenus() will be removed in next version. Specify menus prop manually");var t={icon:"paste",iconLabel:"paste",action:function(e,t,r){var o=n.paste(e);this.selectedNodes=o.nodes,this.selectedEdges=[]}.bind(e)},r={delete:function(e,t,r){e.removeNode(t);for(var n=[],o=0,i=this.selectedNodes.length;o<i;o++){var s=this.selectedNodes[o];s!==r&&n.push(s)}this.selectedNodes=n}.bind(e),copy:function(e,t,r){n.copy(e,[t])}},o={delete:function(e,t,r){e.removeEdge(r.from.node,r.from.port,r.to.node,r.to.port);for(var n=[],o=0,i=this.selectedEdges.length;o<i;o++){var s=this.selectedEdges[o];s!==r&&n.push(s)}this.selectedEdges=n}.bind(e)};return{main:{icon:"sitemap",e4:t},edge:{actions:o,icon:"long-arrow-right",s4:{icon:"trash-o",iconLabel:"delete",action:o.delete}},node:{actions:r,s4:{icon:"trash-o",iconLabel:"delete",action:r.delete},w4:{icon:"copy",iconLabel:"copy",action:r.copy}},nodeInport:{w4:{icon:"sign-in",iconLabel:"export",action:function(e,t,r){var n=r.port;"start"===n&&(n="start1"),"graph"===n&&(n="graph1");for(var o=0;e.inports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x-144,y:i.metadata.y};e.addInport(n,r.process,r.port,s)}}},nodeOutport:{e4:{icon:"sign-out",iconLabel:"export",action:function(e,t,r){for(var n=r.port,o=0;e.outports[n];)o++,n=r.port+o;var i=e.getNode(r.process),s={x:i.metadata.x+144,y:i.metadata.y};e.addOutport(n,r.process,r.port,s)}}},graphInport:{icon:"sign-in",iconColor:2,n4:{label:"inport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeInport(t)}}},graphOutport:{icon:"sign-out",iconColor:5,n4:{label:"outport"},s4:{icon:"trash-o",iconLabel:"delete",action:function(e,t,r){e.removeOutport(t)}}},group:{icon:"th",s4:{icon:"trash-o",iconLabel:"ungroup",action:function(e,t,r){e.removeGroup(t)}},e4:t},selection:{icon:"th",w4:{icon:"copy",iconLabel:"copy",action:function(e,t,r){n.copy(e,r.nodes)}},e4:t}}}}},function(e,t,r){var n=r(5),o=r(15),i=r(73),s=null;function a(e){var t=getComputedStyle(e);[].forEach((function(r){var n=t.getPropertyValue(r);n&&e.setAttribute(r,n)})),["fill","stroke","stroke-width","opacity","text-anchor","font-size","visibility"].forEach((function(r){var n=t.getPropertyValue(r);n&&(e.style[r]=n)}))}e.exports={graphToDOM:function(e,t){t.library||(t.library=function(e){var t={},r={};function n(e,t){0==e.filter((function(e){return e.name==t})).length&&e.push({name:t,type:"all"})}function o(e,o){Object.keys(e).forEach((function(i){var s=e[i],a=t[r[s.process]];n(o?a.inports:a.outports,s.port)}))}return e.nodes.forEach((function(e){var n=e.component;r[e.id]=n,t[n]={name:n,description:n,icon:null,inports:[],outports:[]}})),e.edges.forEach((function(e){var o=r[e.to.node];if(n(t[o].inports,e.to.port),e.from){var i=r[e.from.node];n(t[i].outports,e.from.port)}})),o(e.inports,!0),o(e.outports,!1),t}(e)),t.theme||(t.theme="the-graph-dark"),t.width||(t.width=1200),t.margin||(t.margin=72);var r=i.findFit(e,t.width,100*t.width,t.margin),a=r.graphWidth/r.graphHeight;t.height||(t.height=t.width/a),console.log("f",a,t.height,JSON.stringify(r));var c={readonly:!0,width:t.width,height:t.height,graph:e,library:t.library},l=document.createElement("div");l.className=t.theme,l.width=c.width,l.height=c.height;var p=document.body;!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(p),p.appendChild(l);var u=n.createElement(s,c);return o.render(u,l),l.children[0]},exportImage:function(e,t,r){t||(t={}),t.format||(t.format="png"),void 0===t.background&&(t.background=!0),void 0===t.quality&&(t.quality=.9);var n=e.getElementsByTagName("svg")[0],o=e.getElementsByTagName("canvas")[0];if("svg"!=n.tagName.toLowerCase())return r(new Error("renderImage input must be SVG, got "+n.tagName));var i=function(e){for(var t=e.getElementsByTagName("*"),r=0;r<t.length;r++)a(t[r]);return e}(n),s=(new XMLSerializer).serializeToString(i);if("svg"==t.format)return r(null,s);var c=window.URL||window.webkitURL||window,l=new Image,p=new Blob([s],{type:"image/svg+xml"}),u=c.createObjectURL(p),d=document.createElement("canvas");d.width=n.getAttribute("width"),d.height=n.getAttribute("height");var h=d.getContext("2d");if(t.background){var f=getComputedStyle(e)["background-color"];h.fillStyle=f,h.fillRect(0,0,d.width,d.height),h.drawImage(o,0,0)}l.onerror=function(e){return r(e)},l.onload=function(){h.drawImage(l,0,0),c.revokeObjectURL(u);var e=d.toDataURL("image/"+t.format,t.quality);return r(null,e)},l.src=u},register:function(e){s=e.TheGraph.App}}},function(e,t){const r=document.createElement("template");r.innerHTML='\n<dom-module id="the-graph-styles">\n  <template>\n    <style>\n      .the-graph-dark .the-graph-app {\n  background-color: #000;\n  position: relative;\n}\n.the-graph-dark svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-dark .arrow {\n  cursor: default;\n}\n.the-graph-dark .click {\n  cursor: pointer;\n}\n.the-graph-dark .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-dark .node-border {\n  fill: rgba(0,0,0,0.5);\n  stroke: #666;\n  stroke-width: 2px;\n}\n.the-graph-dark .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-dark .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-dark .eventcatcher {\n  fill: #fff;\n  fill-opacity: 0.1;\n}\n.the-graph-dark .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-dark .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .ex-inports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-outports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-inports .node .node-rect,\n.the-graph-dark .ex-outports .node .node-rect,\n.the-graph-dark .ex-inports .node:hover .node-rect,\n.the-graph-dark .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-dark .selection .ex-inports .node .node-border,\n.the-graph-dark .selection .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .ex-inports .node .node-border,\n.the-graph-dark .small .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .node-bg {\n  opacity: 0;\n}\n.the-graph-dark .selection .node .node-rect {\n  fill: rgba(61,66,67,0.94);\n}\n.the-graph-dark .selection .node .node-border {\n  stroke: #232829;\n}\n.the-graph-dark .selection .node .port-arc {\n  fill: #232829;\n}\n.the-graph-dark .selection .node .node-icon {\n  fill: #232829;\n}\n.the-graph-dark .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-dark .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .selection .node.selected .node-icon {\n  fill: #5e6a6e;\n}\n.the-graph-dark .selection .ex-inports .node .node-icon {\n  fill: #512f01;\n}\n.the-graph-dark .selection .ex-outports .node .node-icon {\n  fill: #015115;\n}\n.the-graph-dark .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node .node-border {\n  fill: rgba(61,66,67,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark path {\n  fill: none;\n}\n.the-graph-dark .arrow-bg {\n  stroke: #000;\n  stroke-width: 2px;\n}\n.the-graph-dark .edge-bg {\n  stroke: #000;\n  stroke-width: 5px;\n}\n.the-graph-dark .edge-fg {\n  stroke: #fff;\n  stroke-width: 3px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .edge-touch {\n  stroke-width: 7px;\n  opacity: 0;\n}\n.the-graph-dark .edge:hover .edge-bg,\n.the-graph-dark .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-dark .edge.selected .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 4px;\n}\n.the-graph-dark .edge.selected .edge-bg {\n  stroke-width: 8px;\n  stroke: #e6e6e6;\n}\n.the-graph-dark .small .edge-bg {\n  stroke-width: 8px;\n}\n.the-graph-dark .small .edge-fg {\n  stroke-width: 6px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n.the-graph-dark .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 4px;\n  stroke: #e6e6e6;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n.the-graph-dark .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 6px;\n  stroke: #e6e6e6;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-dark text {\n  font-family: "SourceCodePro", "Source Code Pro", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #fff;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .text-bg-rect {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .node-label,\n.the-graph-dark .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-dark .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-dark .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-dark .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-dark .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-dark .iip-path {\n  stroke-width: 1px;\n  stroke: #fff;\n}\n.the-graph-dark .iip-info {\n  visibility: hidden;\n}\n.the-graph-dark .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-dark .big .iip-info {\n  visibility: visible;\n}\n.the-graph-dark .context-modal-bg {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .context-node-rect {\n  fill: #121417;\n  stroke: #bfbfbf;\n  stroke-width: 0.5px;\n}\n.the-graph-dark .context-node-icon {\n  font-size: 30px;\n  fill: #fff;\n}\n.the-graph-dark .context-icon {\n  font-size: 20px;\n  fill: #fff;\n}\n.the-graph-dark .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-dark .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-slice.click:hover .context-arc {\n  stroke: rgba(90,102,114,0.95);\n}\n.the-graph-dark .context-circle {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-dark .context-circle-x {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-dark .context-port-bg {\n  fill: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-port-bg.highlight {\n  stroke: #bfbfbf;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(43,48,54,0.95);\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-path {\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-label {\n  fill: #fff;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-dark .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-dark .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-dark .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-dark .tooltip-bg {\n  fill: rgba(0,0,0,0.9);\n  opacity: 0.75;\n}\n.the-graph-dark .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-dark .icon {\n  font-family: \'FontAwesomeSVG\';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .node-icon {\n  font-size: 45px;\n  fill: #5e6a6e;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-dark .small .node-icon {\n  fill: #2f3537;\n  font-size: 66px;\n}\n.the-graph-dark .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-dark .ex-inports .node-icon,\n.the-graph-dark .small .ex-inports .node-icon {\n  fill: #e88802;\n}\n.the-graph-dark .ex-outports .node-icon,\n.the-graph-dark .small .ex-outports .node-icon {\n  fill: #02e83c;\n}\n.the-graph-dark .port-circle-bg {\n  fill: #666;\n  opacity: 0;\n}\n.the-graph-dark .port-arc {\n  fill: #666;\n}\n.the-graph-dark .port-circle-small {\n  fill: none;\n}\n.the-graph-dark .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-dark .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-dark .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-dark .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-dark .big .port-label {\n  visibility: visible;\n}\n.the-graph-dark .big .ex-inports .port-label,\n.the-graph-dark .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-dark .group-box {\n  fill: rgba(191,191,191,0.15);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .group-box:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-dark .group-box.color0 {\n  fill: rgba(191,191,191,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color1 {\n  fill: rgba(255,128,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color2 {\n  fill: rgba(255,202,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color3 {\n  fill: rgba(255,255,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color4 {\n  fill: rgba(128,255,159,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color5 {\n  fill: rgba(128,255,212,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color6 {\n  fill: rgba(128,244,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color7 {\n  fill: rgba(128,191,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color8 {\n  fill: rgba(223,128,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color9 {\n  fill: rgba(255,128,234,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color10 {\n  fill: rgba(255,128,181,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color0:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .group-box.color1:hover {\n  fill: rgba(255,128,128,0.25);\n}\n.the-graph-dark .group-box.color2:hover {\n  fill: rgba(255,202,128,0.25);\n}\n.the-graph-dark .group-box.color3:hover {\n  fill: rgba(255,255,128,0.25);\n}\n.the-graph-dark .group-box.color4:hover {\n  fill: rgba(128,255,159,0.25);\n}\n.the-graph-dark .group-box.color5:hover {\n  fill: rgba(128,255,212,0.25);\n}\n.the-graph-dark .group-box.color6:hover {\n  fill: rgba(128,244,255,0.25);\n}\n.the-graph-dark .group-box.color7:hover {\n  fill: rgba(128,191,255,0.25);\n}\n.the-graph-dark .group-box.color8:hover {\n  fill: rgba(223,128,255,0.25);\n}\n.the-graph-dark .group-box.color9:hover {\n  fill: rgba(255,128,234,0.25);\n}\n.the-graph-dark .group-box.color10:hover {\n  fill: rgba(255,128,181,0.25);\n}\n.the-graph-dark .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.1);\n}\n.the-graph-dark .selection .group-box.color1 {\n  fill: rgba(255,128,128,0.1);\n}\n.the-graph-dark .selection .group-box.color2 {\n  fill: rgba(255,202,128,0.1);\n}\n.the-graph-dark .selection .group-box.color3 {\n  fill: rgba(255,255,128,0.1);\n}\n.the-graph-dark .selection .group-box.color4 {\n  fill: rgba(128,255,159,0.1);\n}\n.the-graph-dark .selection .group-box.color5 {\n  fill: rgba(128,255,212,0.1);\n}\n.the-graph-dark .selection .group-box.color6 {\n  fill: rgba(128,244,255,0.1);\n}\n.the-graph-dark .selection .group-box.color7 {\n  fill: rgba(128,191,255,0.1);\n}\n.the-graph-dark .selection .group-box.color8 {\n  fill: rgba(223,128,255,0.1);\n}\n.the-graph-dark .selection .group-box.color9 {\n  fill: rgba(255,128,234,0.1);\n}\n.the-graph-dark .selection .group-box.color10 {\n  fill: rgba(255,128,181,0.1);\n}\n.the-graph-dark .selection .group-box.selection {\n  fill: rgba(255,255,255,0.15);\n  stroke: #e6e6e6;\n  stroke-width: 1px;\n}\n.the-graph-dark .selection .group-box.selection:hover {\n  fill: rgba(255,255,255,0.25);\n}\n.the-graph-dark .group-label {\n  text-anchor: start;\n  fill: #fff;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .group-description {\n  fill: #fff;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-dark .small .group-description {\n  visibility: hidden;\n}\n.the-graph-dark .stroke,\n.the-graph-dark .stroke.route0,\n.the-graph-dark .selection .selected .stroke,\n.the-graph-dark .selection .selected .stroke.route0 {\n  stroke: #fff;\n}\n.the-graph-dark .stroke.route1,\n.the-graph-dark .selection .selected .stroke.route1 {\n  stroke: #e80202;\n}\n.the-graph-dark .stroke.route2,\n.the-graph-dark .selection .selected .stroke.route2 {\n  stroke: #e88802;\n}\n.the-graph-dark .stroke.route3,\n.the-graph-dark .selection .selected .stroke.route3 {\n  stroke: #e8e802;\n}\n.the-graph-dark .stroke.route4,\n.the-graph-dark .selection .selected .stroke.route4 {\n  stroke: #02e83c;\n}\n.the-graph-dark .stroke.route5,\n.the-graph-dark .selection .selected .stroke.route5 {\n  stroke: #02e89c;\n}\n.the-graph-dark .stroke.route6,\n.the-graph-dark .selection .selected .stroke.route6 {\n  stroke: #02d5e8;\n}\n.the-graph-dark .stroke.route7,\n.the-graph-dark .selection .selected .stroke.route7 {\n  stroke: #0275e8;\n}\n.the-graph-dark .stroke.route8,\n.the-graph-dark .selection .selected .stroke.route8 {\n  stroke: #af02e8;\n}\n.the-graph-dark .stroke.route9,\n.the-graph-dark .selection .selected .stroke.route9 {\n  stroke: #e802c2;\n}\n.the-graph-dark .stroke.route10,\n.the-graph-dark .selection .selected .stroke.route10 {\n  stroke: #e80262;\n}\n.the-graph-dark .selection .stroke,\n.the-graph-dark .selection .stroke.route0 {\n  stroke: #757575;\n}\n.the-graph-dark .selection .stroke.route1 {\n  stroke: #510101;\n}\n.the-graph-dark .selection .stroke.route2 {\n  stroke: #512f01;\n}\n.the-graph-dark .selection .stroke.route3 {\n  stroke: #515101;\n}\n.the-graph-dark .selection .stroke.route4 {\n  stroke: #015115;\n}\n.the-graph-dark .selection .stroke.route5 {\n  stroke: #015136;\n}\n.the-graph-dark .selection .stroke.route6 {\n  stroke: #014a51;\n}\n.the-graph-dark .selection .stroke.route7 {\n  stroke: #012951;\n}\n.the-graph-dark .selection .stroke.route8 {\n  stroke: #3d0151;\n}\n.the-graph-dark .selection .stroke.route9 {\n  stroke: #510143;\n}\n.the-graph-dark .selection .stroke.route10 {\n  stroke: #510122;\n}\n.the-graph-dark .fill,\n.the-graph-dark .fill.route0,\n.the-graph-dark .selection .selected .fill,\n.the-graph-dark .selection .selected .fill.route0 {\n  fill: #fff;\n}\n.the-graph-dark .fill.route1,\n.the-graph-dark .selection .selected .fill.route1 {\n  fill: #e80202;\n}\n.the-graph-dark .fill.route2,\n.the-graph-dark .selection .selected .fill.route2 {\n  fill: #e88802;\n}\n.the-graph-dark .fill.route3,\n.the-graph-dark .selection .selected .fill.route3 {\n  fill: #e8e802;\n}\n.the-graph-dark .fill.route4,\n.the-graph-dark .selection .selected .fill.route4 {\n  fill: #02e83c;\n}\n.the-graph-dark .fill.route5,\n.the-graph-dark .selection .selected .fill.route5 {\n  fill: #02e89c;\n}\n.the-graph-dark .fill.route6,\n.the-graph-dark .selection .selected .fill.route6 {\n  fill: #02d5e8;\n}\n.the-graph-dark .fill.route7,\n.the-graph-dark .selection .selected .fill.route7 {\n  fill: #0275e8;\n}\n.the-graph-dark .fill.route8,\n.the-graph-dark .selection .selected .fill.route8 {\n  fill: #af02e8;\n}\n.the-graph-dark .fill.route9,\n.the-graph-dark .selection .selected .fill.route9 {\n  fill: #e802c2;\n}\n.the-graph-dark .fill.route10,\n.the-graph-dark .selection .selected .fill.route10 {\n  fill: #e80262;\n}\n.the-graph-dark .selection .fill,\n.the-graph-dark .selection .fill.route0 {\n  fill: #757575;\n}\n.the-graph-dark .selection .fill.route1 {\n  fill: #510101;\n}\n.the-graph-dark .selection .fill.route2 {\n  fill: #512f01;\n}\n.the-graph-dark .selection .fill.route3 {\n  fill: #515101;\n}\n.the-graph-dark .selection .fill.route4 {\n  fill: #015115;\n}\n.the-graph-dark .selection .fill.route5 {\n  fill: #015136;\n}\n.the-graph-dark .selection .fill.route6 {\n  fill: #014a51;\n}\n.the-graph-dark .selection .fill.route7 {\n  fill: #012951;\n}\n.the-graph-dark .selection .fill.route8 {\n  fill: #3d0151;\n}\n.the-graph-dark .selection .fill.route9 {\n  fill: #510143;\n}\n.the-graph-dark .selection .fill.route10 {\n  fill: #510122;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n\n.the-graph-light .the-graph-app {\n  background-color: #fff;\n  position: relative;\n}\n.the-graph-light svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-light .arrow {\n  cursor: default;\n}\n.the-graph-light .click {\n  cursor: pointer;\n}\n.the-graph-light .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-light .node-border {\n  fill: rgba(255,255,255,0.5);\n  stroke: #3b4245;\n  stroke-width: 2px;\n}\n.the-graph-light .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-light .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-light .eventcatcher {\n  fill: #000;\n  fill-opacity: 0.1;\n}\n.the-graph-light .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-light .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-light .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-light .ex-inports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-outports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-inports .node .node-rect,\n.the-graph-light .ex-outports .node .node-rect,\n.the-graph-light .ex-inports .node:hover .node-rect,\n.the-graph-light .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-light .selection .ex-inports .node .node-border,\n.the-graph-light .selection .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light .small .ex-inports .node .node-border,\n.the-graph-light .small .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .node-bg {\n  opacity: 0;\n}\n.the-graph-light .selection .node .node-rect {\n  fill: rgba(245,248,249,0.94);\n}\n.the-graph-light .selection .node .node-border {\n  stroke: #d6dadc;\n}\n.the-graph-light .selection .node .port-arc {\n  fill: #d6dadc;\n}\n.the-graph-light .selection .node .node-icon {\n  fill: #bac2c4;\n}\n.the-graph-light .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-light .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-light .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-light .selection .node.selected .node-icon {\n  fill: #2f3537;\n}\n.the-graph-light .selection .ex-inports .node .node-icon {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .ex-outports .node .node-icon {\n  fill: #ccffdb;\n}\n.the-graph-light .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node .node-border {\n  fill: rgba(245,248,249,0.94);\n  stroke: none;\n}\n.the-graph-light .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light path {\n  fill: none;\n}\n.the-graph-light .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 2.5px;\n}\n.the-graph-light .edge-bg {\n  stroke: #e6e6e6;\n  stroke-width: 6px;\n}\n.the-graph-light .edge-fg {\n  stroke: #bfbfbf;\n  stroke-width: 4px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-light .edge-touch {\n  stroke-width: 8px;\n  opacity: 0;\n}\n.the-graph-light .edge:hover .edge-bg,\n.the-graph-light .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-light .edge.selected .arrow-bg {\n  stroke: #808080;\n  stroke-width: 5px;\n}\n.the-graph-light .edge.selected .edge-bg {\n  stroke-width: 10px;\n  stroke: #808080;\n}\n.the-graph-light .small .edge-bg {\n  stroke-width: 10px;\n}\n.the-graph-light .small .edge-fg {\n  stroke-width: 8px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n.the-graph-light .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 5px;\n  stroke: #808080;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n.the-graph-light .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 8px;\n  stroke: #808080;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-light text {\n  font-family: "SourceCodePro", "Source Code Pro", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #000;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .text-bg-rect {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .node-label,\n.the-graph-light .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-light .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-light .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-light .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-light .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-light .iip-path {\n  stroke-width: 1px;\n  stroke: #bfbfbf;\n}\n.the-graph-light .iip-info {\n  visibility: hidden;\n}\n.the-graph-light .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-light .big .iip-info {\n  visibility: visible;\n}\n.the-graph-light .context-modal-bg {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .context-node-rect {\n  fill: #e0e3e6;\n  stroke: #404040;\n  stroke-width: 0.5px;\n}\n.the-graph-light .context-node-icon {\n  font-size: 30px;\n  fill: #000;\n}\n.the-graph-light .context-icon {\n  font-size: 20px;\n  fill: #000;\n}\n.the-graph-light .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-light .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-slice.click:hover .context-arc {\n  stroke: rgba(195,201,208,0.95);\n}\n.the-graph-light .context-circle {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-light .context-circle-x {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-light .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-light .context-port-bg {\n  fill: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-port-bg.highlight {\n  stroke: #404040;\n  stroke-width: 1px;\n}\n.the-graph-light .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(224,227,230,0.95);\n  stroke: #404040;\n}\n.the-graph-light .context-port-path {\n  stroke: #404040;\n}\n.the-graph-light .context-port-label {\n  fill: #000;\n  dominant-baseline: central;\n}\n.the-graph-light .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-light .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-light .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-light .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-light .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-light .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-light .tooltip-bg {\n  fill: rgba(255,255,255,0.9);\n  opacity: 0.75;\n}\n.the-graph-light .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-light .icon {\n  font-family: \'FontAwesomeSVG\';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .node-icon {\n  font-size: 45px;\n  fill: #3b4245;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-light .small .node-icon {\n  fill: #171b1c;\n  font-size: 66px;\n}\n.the-graph-light .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-light .ex-inports .node-icon,\n.the-graph-light .small .ex-inports .node-icon {\n  fill: #cc6300;\n}\n.the-graph-light .ex-outports .node-icon,\n.the-graph-light .small .ex-outports .node-icon {\n  fill: #00cc3d;\n}\n.the-graph-light .port-circle-bg {\n  fill: #3b4245;\n  opacity: 0;\n}\n.the-graph-light .port-arc {\n  fill: #3b4245;\n}\n.the-graph-light .port-circle-small {\n  fill: none;\n}\n.the-graph-light .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-light .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-light .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-light .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-light .big .port-label {\n  visibility: visible;\n}\n.the-graph-light .big .ex-inports .port-label,\n.the-graph-light .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-light .group-box {\n  fill: rgba(191,191,191,0.05);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-light .group-box:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-light .group-box.color0 {\n  fill: rgba(191,191,191,0.05);\n  stroke: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1 {\n  fill: rgba(204,0,0,0.05);\n  stroke: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2 {\n  fill: rgba(204,99,0,0.05);\n  stroke: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3 {\n  fill: rgba(255,200,0,0.05);\n  stroke: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4 {\n  fill: rgba(0,204,61,0.05);\n  stroke: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5 {\n  fill: rgba(171,242,218,0.05);\n  stroke: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6 {\n  fill: rgba(0,201,204,0.05);\n  stroke: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7 {\n  fill: rgba(0,82,204,0.05);\n  stroke: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8 {\n  fill: rgba(68,0,204,0.05);\n  stroke: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9 {\n  fill: rgba(255,168,186,0.05);\n  stroke: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10 {\n  fill: rgba(204,0,109,0.05);\n  stroke: rgba(204,0,109,0.15);\n}\n.the-graph-light .group-box.color0:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1:hover {\n  fill: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2:hover {\n  fill: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3:hover {\n  fill: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4:hover {\n  fill: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5:hover {\n  fill: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6:hover {\n  fill: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7:hover {\n  fill: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8:hover {\n  fill: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9:hover {\n  fill: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10:hover {\n  fill: rgba(204,0,109,0.15);\n}\n.the-graph-light .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.01);\n}\n.the-graph-light .selection .group-box.color1 {\n  fill: rgba(204,0,0,0.01);\n}\n.the-graph-light .selection .group-box.color2 {\n  fill: rgba(204,99,0,0.01);\n}\n.the-graph-light .selection .group-box.color3 {\n  fill: rgba(255,200,0,0.01);\n}\n.the-graph-light .selection .group-box.color4 {\n  fill: rgba(0,204,61,0.01);\n}\n.the-graph-light .selection .group-box.color5 {\n  fill: rgba(171,242,218,0.01);\n}\n.the-graph-light .selection .group-box.color6 {\n  fill: rgba(0,201,204,0.01);\n}\n.the-graph-light .selection .group-box.color7 {\n  fill: rgba(0,82,204,0.01);\n}\n.the-graph-light .selection .group-box.color8 {\n  fill: rgba(68,0,204,0.01);\n}\n.the-graph-light .selection .group-box.color9 {\n  fill: rgba(255,168,186,0.01);\n}\n.the-graph-light .selection .group-box.color10 {\n  fill: rgba(204,0,109,0.01);\n}\n.the-graph-light .selection .group-box.selection {\n  fill: rgba(128,128,128,0.15);\n  stroke: #808080;\n  stroke-width: 1px;\n}\n.the-graph-light .selection .group-box.selection:hover {\n  fill: rgba(102,102,102,0.25);\n}\n.the-graph-light .group-label {\n  text-anchor: start;\n  fill: #000;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .group-description {\n  fill: #000;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-light .small .group-description {\n  visibility: hidden;\n}\n.the-graph-light .stroke,\n.the-graph-light .stroke.route0,\n.the-graph-light .selection .selected .stroke,\n.the-graph-light .selection .selected .stroke.route0 {\n  stroke: #bfbfbf;\n}\n.the-graph-light .stroke.route1,\n.the-graph-light .selection .selected .stroke.route1 {\n  stroke: #c00;\n}\n.the-graph-light .stroke.route2,\n.the-graph-light .selection .selected .stroke.route2 {\n  stroke: #cc6300;\n}\n.the-graph-light .stroke.route3,\n.the-graph-light .selection .selected .stroke.route3 {\n  stroke: #ffc800;\n}\n.the-graph-light .stroke.route4,\n.the-graph-light .selection .selected .stroke.route4 {\n  stroke: #00cc3d;\n}\n.the-graph-light .stroke.route5,\n.the-graph-light .selection .selected .stroke.route5 {\n  stroke: #abf2da;\n}\n.the-graph-light .stroke.route6,\n.the-graph-light .selection .selected .stroke.route6 {\n  stroke: #00c9cc;\n}\n.the-graph-light .stroke.route7,\n.the-graph-light .selection .selected .stroke.route7 {\n  stroke: #0052cc;\n}\n.the-graph-light .stroke.route8,\n.the-graph-light .selection .selected .stroke.route8 {\n  stroke: #40c;\n}\n.the-graph-light .stroke.route9,\n.the-graph-light .selection .selected .stroke.route9 {\n  stroke: #ffa8ba;\n}\n.the-graph-light .stroke.route10,\n.the-graph-light .selection .selected .stroke.route10 {\n  stroke: #cc006d;\n}\n.the-graph-light .selection .stroke,\n.the-graph-light .selection .stroke.route0 {\n  stroke: #e6e6e6;\n}\n.the-graph-light .selection .stroke.route1 {\n  stroke: #fcc;\n}\n.the-graph-light .selection .stroke.route2 {\n  stroke: #ffe5cc;\n}\n.the-graph-light .selection .stroke.route3 {\n  stroke: #fff4cc;\n}\n.the-graph-light .selection .stroke.route4 {\n  stroke: #ccffdb;\n}\n.the-graph-light .selection .stroke.route5 {\n  stroke: #d3f8ec;\n}\n.the-graph-light .selection .stroke.route6 {\n  stroke: #ccfeff;\n}\n.the-graph-light .selection .stroke.route7 {\n  stroke: #cce0ff;\n}\n.the-graph-light .selection .stroke.route8 {\n  stroke: #dcf;\n}\n.the-graph-light .selection .stroke.route9 {\n  stroke: #ffccd6;\n}\n.the-graph-light .selection .stroke.route10 {\n  stroke: #ffcce7;\n}\n.the-graph-light .fill,\n.the-graph-light .fill.route0,\n.the-graph-light .selection .selected .fill,\n.the-graph-light .selection .selected .fill.route0 {\n  fill: #bfbfbf;\n}\n.the-graph-light .fill.route1,\n.the-graph-light .selection .selected .fill.route1 {\n  fill: #c00;\n}\n.the-graph-light .fill.route2,\n.the-graph-light .selection .selected .fill.route2 {\n  fill: #cc6300;\n}\n.the-graph-light .fill.route3,\n.the-graph-light .selection .selected .fill.route3 {\n  fill: #ffc800;\n}\n.the-graph-light .fill.route4,\n.the-graph-light .selection .selected .fill.route4 {\n  fill: #00cc3d;\n}\n.the-graph-light .fill.route5,\n.the-graph-light .selection .selected .fill.route5 {\n  fill: #abf2da;\n}\n.the-graph-light .fill.route6,\n.the-graph-light .selection .selected .fill.route6 {\n  fill: #00c9cc;\n}\n.the-graph-light .fill.route7,\n.the-graph-light .selection .selected .fill.route7 {\n  fill: #0052cc;\n}\n.the-graph-light .fill.route8,\n.the-graph-light .selection .selected .fill.route8 {\n  fill: #40c;\n}\n.the-graph-light .fill.route9,\n.the-graph-light .selection .selected .fill.route9 {\n  fill: #ffa8ba;\n}\n.the-graph-light .fill.route10,\n.the-graph-light .selection .selected .fill.route10 {\n  fill: #cc006d;\n}\n.the-graph-light .selection .fill,\n.the-graph-light .selection .fill.route0 {\n  fill: #e6e6e6;\n}\n.the-graph-light .selection .fill.route1 {\n  fill: #fcc;\n}\n.the-graph-light .selection .fill.route2 {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .fill.route3 {\n  fill: #fff4cc;\n}\n.the-graph-light .selection .fill.route4 {\n  fill: #ccffdb;\n}\n.the-graph-light .selection .fill.route5 {\n  fill: #d3f8ec;\n}\n.the-graph-light .selection .fill.route6 {\n  fill: #ccfeff;\n}\n.the-graph-light .selection .fill.route7 {\n  fill: #cce0ff;\n}\n.the-graph-light .selection .fill.route8 {\n  fill: #dcf;\n}\n.the-graph-light .selection .fill.route9 {\n  fill: #ffccd6;\n}\n.the-graph-light .selection .fill.route10 {\n  fill: #ffcce7;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(r.content)},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"VERSION",(function(){return Zr.e})),r.d(n,"restArguments",(function(){return en})),r.d(n,"isObject",(function(){return tn})),r.d(n,"isNull",(function(){return rn})),r.d(n,"isUndefined",(function(){return nn})),r.d(n,"isBoolean",(function(){return on})),r.d(n,"isElement",(function(){return sn})),r.d(n,"isString",(function(){return cn})),r.d(n,"isNumber",(function(){return ln})),r.d(n,"isDate",(function(){return pn})),r.d(n,"isRegExp",(function(){return un})),r.d(n,"isError",(function(){return dn})),r.d(n,"isSymbol",(function(){return hn})),r.d(n,"isMap",(function(){return fn})),r.d(n,"isWeakMap",(function(){return mn})),r.d(n,"isSet",(function(){return gn})),r.d(n,"isWeakSet",(function(){return yn})),r.d(n,"isArrayBuffer",(function(){return vn})),r.d(n,"isDataView",(function(){return bn})),r.d(n,"isArray",(function(){return wn})),r.d(n,"isFunction",(function(){return En})),r.d(n,"isArguments",(function(){return Cn})),r.d(n,"isFinite",(function(){return Pn})),r.d(n,"isNaN",(function(){return An})),r.d(n,"isTypedArray",(function(){return Rn})),r.d(n,"isEmpty",(function(){return Bn})),r.d(n,"isMatch",(function(){return zn})),r.d(n,"isEqual",(function(){return $n})),r.d(n,"keys",(function(){return Gn})),r.d(n,"allKeys",(function(){return Hn})),r.d(n,"values",(function(){return Vn})),r.d(n,"pairs",(function(){return Wn})),r.d(n,"invert",(function(){return Jn})),r.d(n,"functions",(function(){return Xn})),r.d(n,"methods",(function(){return Xn})),r.d(n,"extend",(function(){return Kn})),r.d(n,"extendOwn",(function(){return Qn})),r.d(n,"assign",(function(){return Qn})),r.d(n,"defaults",(function(){return Zn})),r.d(n,"create",(function(){return to})),r.d(n,"clone",(function(){return ro})),r.d(n,"tap",(function(){return no})),r.d(n,"has",(function(){return oo})),r.d(n,"mapObject",(function(){return fo})),r.d(n,"identity",(function(){return io})),r.d(n,"constant",(function(){return On})),r.d(n,"noop",(function(){return mo})),r.d(n,"property",(function(){return co})),r.d(n,"propertyOf",(function(){return go})),r.d(n,"matcher",(function(){return so})),r.d(n,"matches",(function(){return so})),r.d(n,"times",(function(){return yo})),r.d(n,"random",(function(){return vo})),r.d(n,"now",(function(){return bo})),r.d(n,"escape",(function(){return ko})),r.d(n,"unescape",(function(){return Eo})),r.d(n,"templateSettings",(function(){return _o})),r.d(n,"template",(function(){return Oo})),r.d(n,"result",(function(){return To})),r.d(n,"uniqueId",(function(){return No})),r.d(n,"chain",(function(){return jo})),r.d(n,"iteratee",(function(){return uo})),r.d(n,"partial",(function(){return Mo})),r.d(n,"bind",(function(){return Lo})),r.d(n,"bindAll",(function(){return Go})),r.d(n,"memoize",(function(){return Bo})),r.d(n,"delay",(function(){return zo})),r.d(n,"defer",(function(){return Uo})),r.d(n,"throttle",(function(){return qo})),r.d(n,"debounce",(function(){return $o})),r.d(n,"wrap",(function(){return Ho})),r.d(n,"negate",(function(){return Vo})),r.d(n,"compose",(function(){return Wo})),r.d(n,"after",(function(){return Jo})),r.d(n,"before",(function(){return Xo})),r.d(n,"once",(function(){return Yo})),r.d(n,"findKey",(function(){return Ko})),r.d(n,"findIndex",(function(){return Zo})),r.d(n,"findLastIndex",(function(){return ei})),r.d(n,"sortedIndex",(function(){return ti})),r.d(n,"indexOf",(function(){return ni})),r.d(n,"lastIndexOf",(function(){return oi})),r.d(n,"find",(function(){return ii})),r.d(n,"detect",(function(){return ii})),r.d(n,"findWhere",(function(){return si})),r.d(n,"each",(function(){return ai})),r.d(n,"forEach",(function(){return ai})),r.d(n,"map",(function(){return ci})),r.d(n,"collect",(function(){return ci})),r.d(n,"reduce",(function(){return pi})),r.d(n,"foldl",(function(){return pi})),r.d(n,"inject",(function(){return pi})),r.d(n,"reduceRight",(function(){return ui})),r.d(n,"foldr",(function(){return ui})),r.d(n,"filter",(function(){return di})),r.d(n,"select",(function(){return di})),r.d(n,"reject",(function(){return hi})),r.d(n,"every",(function(){return fi})),r.d(n,"all",(function(){return fi})),r.d(n,"some",(function(){return mi})),r.d(n,"any",(function(){return mi})),r.d(n,"contains",(function(){return gi})),r.d(n,"includes",(function(){return gi})),r.d(n,"include",(function(){return gi})),r.d(n,"invoke",(function(){return yi})),r.d(n,"pluck",(function(){return vi})),r.d(n,"where",(function(){return bi})),r.d(n,"max",(function(){return wi})),r.d(n,"min",(function(){return xi})),r.d(n,"shuffle",(function(){return Ei})),r.d(n,"sample",(function(){return ki})),r.d(n,"sortBy",(function(){return _i})),r.d(n,"groupBy",(function(){return Ci})),r.d(n,"indexBy",(function(){return Pi})),r.d(n,"countBy",(function(){return Ai})),r.d(n,"partition",(function(){return Oi})),r.d(n,"toArray",(function(){return Di})),r.d(n,"size",(function(){return Ni})),r.d(n,"pick",(function(){return Ii})),r.d(n,"omit",(function(){return Ri})),r.d(n,"first",(function(){return Li})),r.d(n,"head",(function(){return Li})),r.d(n,"take",(function(){return Li})),r.d(n,"initial",(function(){return Mi})),r.d(n,"last",(function(){return Gi})),r.d(n,"rest",(function(){return Fi})),r.d(n,"tail",(function(){return Fi})),r.d(n,"drop",(function(){return Fi})),r.d(n,"compact",(function(){return Bi})),r.d(n,"flatten",(function(){return zi})),r.d(n,"without",(function(){return qi})),r.d(n,"uniq",(function(){return $i})),r.d(n,"unique",(function(){return $i})),r.d(n,"union",(function(){return Hi})),r.d(n,"intersection",(function(){return Vi})),r.d(n,"difference",(function(){return Ui})),r.d(n,"unzip",(function(){return Wi})),r.d(n,"transpose",(function(){return Wi})),r.d(n,"zip",(function(){return Ji})),r.d(n,"object",(function(){return Xi})),r.d(n,"range",(function(){return Yi})),r.d(n,"chunk",(function(){return Ki})),r.d(n,"mixin",(function(){return Zi})),r.d(n,"default",(function(){return es}));
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const o=!(window.ShadyDOM&&window.ShadyDOM.inUse);let i,s;function a(e){i=(!e||!e.shimcssproperties)&&(o||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(s=window.ShadyCSS.cssBuild);const c=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?i=window.ShadyCSS.nativeCss:window.ShadyCSS?(a(window.ShadyCSS),window.ShadyCSS=void 0):a(window.WebComponents&&window.WebComponents.flags);const l=i;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class p{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function u(e){return function e(t,r){let n=r.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=n.trim(),t.parent){let e=t.previous?t.previous.end:t.parent.start;n=r.substring(e,t.start-1),n=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(){let e=arguments[1],t=6-e.length;for(;t--;)e="0"+e;return"\\"+e}))}(n),n=n.replace(g.multipleSpaces," "),n=n.substring(n.lastIndexOf(";")+1);let o=t.parsedSelector=t.selector=n.trim();t.atRule=0===o.indexOf(b),t.atRule?0===o.indexOf(v)?t.type=h.MEDIA_RULE:o.match(g.keyframesRule)&&(t.type=h.KEYFRAMES_RULE,t.keyframesName=t.selector.split(g.multipleSpaces).pop()):0===o.indexOf(y)?t.type=h.MIXIN_RULE:t.type=h.STYLE_RULE}let o=t.rules;if(o)for(let t,n=0,i=o.length;n<i&&(t=o[n]);n++)e(t,r);return t}(function(e){let t=new p;t.start=0,t.end=e.length;let r=t;for(let n=0,o=e.length;n<o;n++)if(e[n]===f){r.rules||(r.rules=[]);let e=r,t=e.rules[e.rules.length-1]||null;r=new p,r.start=n+1,r.parent=e,r.previous=t,e.rules.push(r)}else e[n]===m&&(r.end=n+1,r=r.parent||t);return t}(e=e.replace(g.comments,"").replace(g.port,"")),e)}function d(e,t,r=""){let n="";if(e.cssText||e.rules){let r=e.rules;if(r&&!function(e){let t=e[0];return Boolean(t)&&Boolean(t.selector)&&0===t.selector.indexOf(y)}(r))for(let e,o=0,i=r.length;o<i&&(e=r[o]);o++)n=d(e,t,n);else n=t?e.cssText:function(e){return function(e){return e.replace(g.mixinApply,"").replace(g.varApply,"")}(e=function(e){return e.replace(g.customProp,"").replace(g.mixinProp,"")}(e))}(e.cssText),n=n.trim(),n&&(n="  "+n+"\n")}return n&&(e.selector&&(r+=e.selector+" "+f+"\n"),r+=n,e.selector&&(r+=m+"\n\n")),r}const h={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},f="{",m="}",g={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},y="--",v="@media",b="@",w=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,x=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,k=/@media\s(.*)/,E=new Set;function _(e){const t=e.textContent;if(!E.has(t)){E.add(t);const e=document.createElement("style");e.setAttribute("shady-unscoped",""),e.textContent=t,document.head.appendChild(e)}}function S(e){return e.hasAttribute("shady-unscoped")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function C(e,t){return e?("string"==typeof e&&(e=u(e)),t&&A(e,t),d(e,l)):""}function P(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=u(e.textContent)),e.__cssRules||null}function A(e,t,r,n){if(!e)return;let o=!1,i=e.type;if(n&&i===h.MEDIA_RULE){let t=e.selector.match(k);t&&(window.matchMedia(t[1]).matches||(o=!0))}i===h.STYLE_RULE?t(e):r&&i===h.KEYFRAMES_RULE?r(e):i===h.MIXIN_RULE&&(o=!0);let s=e.rules;if(s&&!o)for(let e,o=0,i=s.length;o<i&&(e=s[o]);o++)A(e,t,r,n)}function O(e,t){let r=0;for(let n=t,o=e.length;n<o;n++)if("("===e[n])r++;else if(")"===e[n]&&0==--r)return n;return-1}window.ShadyDOM&&window.ShadyDOM.wrap;function T(e){if(void 0!==s)return s;if(void 0===e.__cssBuild){const t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{const t=function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;if(t instanceof Comment){const e=t.textContent.trim().split(":");if("css-build"===e[0])return e[1]}return""}(e);""!==t&&function(e){const t="template"===e.localName?e.content.firstChild:e.firstChild;t.parentNode.removeChild(t)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),e.__cssBuild=t}}return e.__cssBuild||""}function D(e){return""!==T(e)}function N(e,t){for(let r in t)null===r?e.style.removeProperty(r):e.style.setProperty(r,t[r])}function j(e,t){const r=window.getComputedStyle(e).getPropertyValue(t);return r?r.trim():""}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const I=/;\s*/m,R=/^\s*(initial)|(inherit)\s*$/,M=/\s*!important/;class L{constructor(){this._map={}}set(e,t){e=e.trim(),this._map[e]={properties:t,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}}let F=null;class G{constructor(){this._currentElement=null,this._measureElement=null,this._map=new L}detectMixin(e){return function(e){const t=x.test(e)||w.test(e);return x.lastIndex=0,w.lastIndex=0,t}(e)}gatherStyles(e){const t=function(e){const t=[],r=e.querySelectorAll("style");for(let e=0;e<r.length;e++){const n=r[e];S(n)?o||(_(n),n.parentNode.removeChild(n)):(t.push(n.textContent),n.parentNode.removeChild(n))}return t.join("").trim()}(e.content);if(t){const r=document.createElement("style");return r.textContent=t,e.content.insertBefore(r,e.content.firstChild),r}return null}transformTemplate(e,t){void 0===e._gatheredStyle&&(e._gatheredStyle=this.gatherStyles(e));const r=e._gatheredStyle;return r?this.transformStyle(r,t):null}transformStyle(e,t=""){let r=P(e);return this.transformRules(r,t),e.textContent=C(r),r}transformCustomStyle(e){let t=P(e);return A(t,e=>{":root"===e.selector&&(e.selector="html"),this.transformRule(e)}),e.textContent=C(t),t}transformRules(e,t){this._currentElement=t,A(e,e=>{this.transformRule(e)}),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),":root"===e.selector&&(e.selector=":host > *")}transformCssText(e,t){return e=e.replace(w,(e,r,n,o)=>this._produceCssProperties(e,r,n,o,t)),this._consumeCssProperties(e,t)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let t=e;for(;t.parent;)t=t.parent;const r={};let n=!1;return A(t,t=>{n=n||t===e,n||t.selector===e.selector&&Object.assign(r,this._cssTextToMap(t.parsedCssText))}),r}_consumeCssProperties(e,t){let r=null;for(;r=x.exec(e);){let n=r[0],o=r[1],i=r.index,s=i+n.indexOf("@apply"),a=i+n.length,c=e.slice(0,s),l=e.slice(a),p=t?this._fallbacksFromPreviousRules(t):{};Object.assign(p,this._cssTextToMap(c));let u=this._atApplyToCssProperties(o,p);e=`${c}${u}${l}`,x.lastIndex=i+u.length}return e}_atApplyToCssProperties(e,t){e=e.replace(I,"");let r=[],n=this._map.get(e);if(n||(this._map.set(e,{}),n=this._map.get(e)),n){let o,i,s;this._currentElement&&(n.dependants[this._currentElement]=!0);const a=n.properties;for(o in a)s=t&&t[o],i=[o,": var(",e,"_-_",o],s&&i.push(",",s.replace(M,"")),i.push(")"),M.test(a[o])&&i.push(" !important"),r.push(i.join(""))}return r.join("; ")}_replaceInitialOrInherit(e,t){let r=R.exec(t);return r&&(t=r[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),t}_cssTextToMap(e,t=!1){let r,n,o=e.split(";"),i={};for(let e,s,a=0;a<o.length;a++)e=o[a],e&&(s=e.split(":"),s.length>1&&(r=s[0].trim(),n=s.slice(1).join(":"),t&&(n=this._replaceInitialOrInherit(r,n)),i[r]=n));return i}_invalidateMixinEntry(e){if(F)for(let t in e.dependants)t!==this._currentElement&&F(t)}_produceCssProperties(e,t,r,n,o){if(r&&function e(t,r){let n=t.indexOf("var(");if(-1===n)return r(t,"","","");let o=O(t,n+3),i=t.substring(n+4,o),s=t.substring(0,n),a=e(t.substring(o+1),r),c=i.indexOf(",");return-1===c?r(s,i.trim(),"",a):r(s,i.substring(0,c).trim(),i.substring(c+1).trim(),a)}(r,(e,t)=>{t&&this._map.get(t)&&(n=`@apply ${t};`)}),!n)return e;let i=this._consumeCssProperties(""+n,o),s=e.slice(0,e.indexOf("--")),a=this._cssTextToMap(i,!0),c=a,l=this._map.get(t),p=l&&l.properties;p?c=Object.assign(Object.create(p),a):this._map.set(t,c);let u,d,h=[],f=!1;for(u in c)d=a[u],void 0===d&&(d="initial"),p&&!(u in p)&&(f=!0),h.push(`${t}_-_${u}: ${d}`);return f&&this._invalidateMixinEntry(l),l&&(l.properties=c),r&&(s=`${e};${s}`),`${s}${h.join("; ")};`}}G.prototype.detectMixin=G.prototype.detectMixin,G.prototype.transformStyle=G.prototype.transformStyle,G.prototype.transformCustomStyle=G.prototype.transformCustomStyle,G.prototype.transformRules=G.prototype.transformRules,G.prototype.transformRule=G.prototype.transformRule,G.prototype.transformTemplate=G.prototype.transformTemplate,G.prototype._separator="_-_",Object.defineProperty(G.prototype,"invalidCallback",{get:()=>F,set(e){F=e}});var B=G;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/var z={};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const U="_applyShimCurrentVersion",q="_applyShimNextVersion",$=Promise.resolve();function H(e){let t=z[e];t&&function(e){e[U]=e[U]||0,e._applyShimValidatingVersion=e._applyShimValidatingVersion||0,e[q]=(e[q]||0)+1}(t)}function V(e){return e[U]===e[q]}function W(e){return!V(e)&&e._applyShimValidatingVersion===e[q]}function J(e){e._applyShimValidatingVersion=e[q],e._validating||(e._validating=!0,$.then((function(){e[U]=e[q],e._validating=!1})))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let X,Y=null,K=window.HTMLImports&&window.HTMLImports.whenReady||null;function Q(e){requestAnimationFrame((function(){K?K(e):(Y||(Y=new Promise(e=>{X=e}),"complete"===document.readyState?X():document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&X()})),Y.then((function(){e&&e()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Z="__shadyCSSCachedStyle";let ee=null,te=null;class re{constructor(){this.customStyles=[],this.enqueued=!1,Q(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&te&&(this.enqueued=!0,Q(te))}addCustomStyle(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[Z])return e[Z];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const r=e[t];if(r[Z])continue;const n=this.getStyleForCustomStyle(r);if(n){const e=n.__appliedElement||n;ee&&ee(e),r[Z]=e}}return e}}re.prototype.addCustomStyle=re.prototype.addCustomStyle,re.prototype.getStyleForCustomStyle=re.prototype.getStyleForCustomStyle,re.prototype.processStyles=re.prototype.processStyles,Object.defineProperties(re.prototype,{transformCallback:{get:()=>ee,set(e){ee=e}},validateCallback:{get:()=>te,set(e){let t=!1;te||(t=!0),te=e,t&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const ne=new B;class oe{constructor(){this.customStyleInterface=null,ne.invalidCallback=H}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{ne.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(e,t){if(this.ensure(),D(e))return;z[t]=e;let r=ne.transformTemplate(e,t);e._styleAst=r}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let t=0;t<e.length;t++){let r=e[t],n=this.customStyleInterface.getStyleForCustomStyle(r);n&&ne.transformCustomStyle(n)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,t){if(this.ensure(),t&&N(e,t),e.shadowRoot){this.styleElement(e);let t=e.shadowRoot.children||e.shadowRoot.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}else{let t=e.children||e.childNodes;for(let e=0;e<t.length;e++)this.styleSubtree(t[e])}}styleElement(e){this.ensure();let{is:t}=function(e){let t=e.localName,r="",n="";return t?t.indexOf("-")>-1?r=t:(n=t,r=e.getAttribute&&e.getAttribute("is")||""):(r=e.is,n=e.extends),{is:r,typeExtension:n}}(e),r=z[t];if((!r||!D(r))&&r&&!V(r)){W(r)||(this.prepareTemplate(r,t),J(r));let n=e.shadowRoot;if(n){let e=n.querySelector("style");e&&(e.__cssRules=r._styleAst,e.textContent=C(r._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const e=new oe;let t=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(t,r,n){e.flushCustomStyles(),e.prepareTemplate(t,r)},prepareTemplateStyles(e,t,r){window.ShadyCSS.prepareTemplate(e,t,r)},prepareTemplateDom(e,t){},styleSubtree(t,r){e.flushCustomStyles(),e.styleSubtree(t,r)},styleElement(t){e.flushCustomStyles(),e.styleElement(t)},styleDocument(t){e.flushCustomStyles(),e.styleDocument(t)},getComputedStyleValue:(e,t)=>j(e,t),flushCustomStyles(){e.flushCustomStyles()},nativeCss:l,nativeShadow:o,cssBuild:s,disableRuntime:c},t&&(window.ShadyCSS.CustomStyleInterface=t)}window.ShadyCSS.ApplyShim=ne;var ie=r(28),se=(r(9),r(10)),ae=r(14);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class ce{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run(()=>{this._timer=null,le.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),le.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(e,t,r){return e instanceof ce?e._cancelAsync():e=new ce,e.setConfig(t,r),e}}let le=new Set;const pe=function(e){le.add(e)},ue=function(){const e=Boolean(le.size);return le.forEach(e=>{try{e.flush()}catch(e){setTimeout(()=>{throw e})}}),e};var de=r(3),he=r(1);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let fe="string"==typeof document.head.style.touchAction,me="__polymerGesturesHandled",ge="__polymerGesturesTouchAction",ye=["mousedown","mousemove","mouseup","click"],ve=[0,1,4,2],be=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function we(e){return ye.indexOf(e)>-1}let xe=!1;function ke(e){if(!we(e)&&"touchend"!==e)return fe&&xe&&de.i?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){xe=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let Ee=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const _e=[],Se={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},Ce={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function Pe(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let r=e.getRootNode();if(e.id){let n=r.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<n.length;e++)t.push(n[e])}}return t}let Ae=function(e){let t=e.sourceCapabilities;var r;if((!t||t.firesTouchEvents)&&(e[me]={skip:!0},"click"===e.type)){let t=!1,n=Ie(e);for(let e=0;e<n.length;e++){if(n[e].nodeType===Node.ELEMENT_NODE)if("label"===n[e].localName)_e.push(n[e]);else if(r=n[e],Se[r.localName]){let r=Pe(n[e]);for(let e=0;e<r.length;e++)t=t||_e.indexOf(r[e])>-1}if(n[e]===De.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function Oe(e){let t=Ee?["click"]:ye;for(let r,n=0;n<t.length;n++)r=t[n],e?(_e.length=0,document.addEventListener(r,Ae,!0)):document.removeEventListener(r,Ae,!0)}function Te(e){let t=e.type;if(!we(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!be&&(t=ve[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let De={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function Ne(e,t,r){e.movefn=t,e.upfn=r,document.addEventListener("mousemove",t),document.addEventListener("mouseup",r)}function je(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}de.b&&document.addEventListener("touchend",(function(e){if(!de.b)return;De.mouse.mouseIgnoreJob||Oe(!0),De.mouse.target=Ie(e)[0],De.mouse.mouseIgnoreJob=ce.debounce(De.mouse.mouseIgnoreJob,ae.b.after(2500),(function(){Oe(),De.mouse.target=null,De.mouse.mouseIgnoreJob=null}))}),!!xe&&{passive:!0});const Ie=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],Re={},Me=[];function Le(e){const t=Ie(e);return t.length>0?t[0]:e.target}function Fe(e){let t,r=e.type,n=e.currentTarget.__polymerGestures;if(!n)return;let o=n[r];if(o){if(!e[me]&&(e[me]={},"touch"===r.slice(0,5))){let t=(e=e).changedTouches[0];if("touchstart"===r&&1===e.touches.length&&(De.touch.id=t.identifier),De.touch.id!==t.identifier)return;fe||"touchstart"!==r&&"touchmove"!==r||function(e){let t=e.changedTouches[0],r=e.type;if("touchstart"===r)De.touch.x=t.clientX,De.touch.y=t.clientY,De.touch.scrollDecided=!1;else if("touchmove"===r){if(De.touch.scrollDecided)return;De.touch.scrollDecided=!0;let r=function(e){let t="auto",r=Ie(e);for(let e,n=0;n<r.length;n++)if(e=r[n],e[ge]){t=e[ge];break}return t}(e),n=!1,o=Math.abs(De.touch.x-t.clientX),i=Math.abs(De.touch.y-t.clientY);e.cancelable&&("none"===r?n=!0:"pan-x"===r?n=i>o:"pan-y"===r&&(n=o>i)),n?e.preventDefault():$e("track")}}(e)}if(t=e[me],!t.skip){for(let r,n=0;n<Me.length;n++)r=Me[n],o[r.name]&&!t[r.name]&&r.flow&&r.flow.start.indexOf(e.type)>-1&&r.reset&&r.reset();for(let n,i=0;i<Me.length;i++)n=Me[i],o[n.name]&&!t[n.name]&&(t[n.name]=!0,n[r](e))}}}function Ge(e,t,r){return!!Re[t]&&(function(e,t,r){let n=Re[t],o=n.deps,i=n.name,s=e.__polymerGestures;s||(e.__polymerGestures=s={});for(let t,r,n=0;n<o.length;n++)t=o[n],Ee&&we(t)&&"click"!==t||(r=s[t],r||(s[t]=r={_count:0}),0===r._count&&e.addEventListener(t,Fe,ke(t)),r[i]=(r[i]||0)+1,r._count=(r._count||0)+1);e.addEventListener(t,r),n.touchAction&&Ue(e,n.touchAction)}(e,t,r),!0)}function Be(e,t,r){return!!Re[t]&&(function(e,t,r){let n=Re[t],o=n.deps,i=n.name,s=e.__polymerGestures;if(s)for(let t,r,n=0;n<o.length;n++)t=o[n],r=s[t],r&&r[i]&&(r[i]=(r[i]||1)-1,r._count=(r._count||1)-1,0===r._count&&e.removeEventListener(t,Fe,ke(t)));e.removeEventListener(t,r)}(e,t,r),!0)}function ze(e){Me.push(e);for(let t=0;t<e.emits.length;t++)Re[e.emits[t]]=e}function Ue(e,t){fe&&e instanceof HTMLElement&&ae.a.run(()=>{e.style.touchAction=t}),e[ge]=t}function qe(e,t,r){let n=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(n.detail=r,Object(he.a)(e).dispatchEvent(n),n.defaultPrevented){let e=r.preventer||r.sourceEvent;e&&e.preventDefault&&e.preventDefault()}}function $e(e){let t=function(e){for(let t,r=0;r<Me.length;r++){t=Me[r];for(let r,n=0;n<t.emits.length;n++)if(r=t.emits[n],r===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function He(e,t,r,n){t&&qe(t,e,{x:r.clientX,y:r.clientY,sourceEvent:r,preventer:n,prevent:function(e){return $e(e)}})}function Ve(e,t,r){if(e.prevent)return!1;if(e.started)return!0;let n=Math.abs(e.x-t),o=Math.abs(e.y-r);return n>=5||o>=5}function We(e,t,r){if(!t)return;let n,o=e.moves[e.moves.length-2],i=e.moves[e.moves.length-1],s=i.x-e.x,a=i.y-e.y,c=0;o&&(n=i.x-o.x,c=i.y-o.y),qe(t,"track",{state:e.state,x:r.clientX,y:r.clientY,dx:s,dy:a,ddx:n,ddy:c,sourceEvent:r,hover:function(){return function(e,t){let r=document.elementFromPoint(e,t),n=r;for(;n&&n.shadowRoot&&!window.ShadyDOM;){let o=n;if(n=n.shadowRoot.elementFromPoint(e,t),o===n)break;n&&(r=n)}return r}(r.clientX,r.clientY)}})}function Je(e,t,r){let n=Math.abs(t.clientX-e.x),o=Math.abs(t.clientY-e.y),i=Le(r||t);!i||Ce[i.localName]&&i.hasAttribute("disabled")||(isNaN(n)||isNaN(o)||n<=25&&o<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=Le(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let r=t.getBoundingClientRect(),n=e.pageX,o=e.pageY;return!(n>=r.left&&n<=r.right&&o>=r.top&&o<=r.bottom)}return!1}(t))&&(e.prevent||qe(i,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:r}))}ze({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){je(this.info)},mousedown:function(e){if(!Te(e))return;let t=Le(e),r=this;Ne(this.info,(function(e){Te(e)||(He("up",t,e),je(r.info))}),(function(e){Te(e)&&He("up",t,e),je(r.info)})),He("down",t,e)},touchstart:function(e){He("down",Le(e),e.changedTouches[0],e)},touchend:function(e){He("up",Le(e),e.changedTouches[0],e)}}),ze({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,je(this.info)},mousedown:function(e){if(!Te(e))return;let t=Le(e),r=this,n=function(e){let n=e.clientX,o=e.clientY;Ve(r.info,n,o)&&(r.info.state=r.info.started?"mouseup"===e.type?"end":"track":"start","start"===r.info.state&&$e("tap"),r.info.addMove({x:n,y:o}),Te(e)||(r.info.state="end",je(r.info)),t&&We(r.info,t,e),r.info.started=!0)};Ne(this.info,n,(function(e){r.info.started&&n(e),je(r.info)})),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=Le(e),r=e.changedTouches[0],n=r.clientX,o=r.clientY;Ve(this.info,n,o)&&("start"===this.info.state&&$e("tap"),this.info.addMove({x:n,y:o}),We(this.info,t,r),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=Le(e),r=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:r.clientX,y:r.clientY}),We(this.info,t,r))}}),ze({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){Te(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){Te(e)&&Je(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Je(this.info,e.changedTouches[0],e)}});const Xe=Object(se.a)(e=>class extends e{_addEventListenerToNode(e,t,r){Ge(e,t,r)||super._addEventListenerToNode(e,t,r)}_removeEventListenerFromNode(e,t,r){Be(e,t,r)||super._removeEventListenerFromNode(e,t,r)}});var Ye=r(76);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */const Ke=/:host\(:dir\((ltr|rtl)\)\)/g,Qe=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Ze=/:dir\((?:ltr|rtl)\)/,et=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),tt=[];let rt=null,nt="";function ot(){nt=document.documentElement.getAttribute("dir")}function it(e){if(!e.__autoDirOptOut){e.setAttribute("dir",nt)}}function st(){ot(),nt=document.documentElement.getAttribute("dir");for(let e=0;e<tt.length;e++)it(tt[e])}const at=Object(se.a)(e=>{et||rt||(ot(),rt=new MutationObserver(st),rt.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const t=Object(Ye.a)(e);class r extends t{static _processStyleText(e,r){return e=t._processStyleText.call(this,e,r),!et&&Ze.test(e)&&(e=this._replaceDirInCssText(e),this.__activateDir=!0),e}static _replaceDirInCssText(e){let t=e;return t=t.replace(Ke,':host([dir="$1"])'),t=t.replace(Qe,':host([dir="$2"]) $1'),t}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){t.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(rt&&rt.takeRecords().length&&st(),tt.push(this),it(this))}disconnectedCallback(){if(t.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const e=tt.indexOf(this);e>-1&&tt.splice(e,1)}}}return r.__activateDir=!1,r});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function ct(){document.body.removeAttribute("unresolved")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function lt(e,t,r){return{index:e,removed:t,addedCount:r}}"interactive"===document.readyState||"complete"===document.readyState?ct():window.addEventListener("DOMContentLoaded",ct);function pt(e,t,r,n,o,i){let s,a=0,c=0,l=Math.min(r-t,i-o);if(0==t&&0==o&&(a=function(e,t,r){for(let n=0;n<r;n++)if(!dt(e[n],t[n]))return n;return r}(e,n,l)),r==e.length&&i==n.length&&(c=function(e,t,r){let n=e.length,o=t.length,i=0;for(;i<r&&dt(e[--n],t[--o]);)i++;return i}(e,n,l-a)),o+=a,i-=c,(r-=c)-(t+=a)==0&&i-o==0)return[];if(t==r){for(s=lt(t,[],0);o<i;)s.removed.push(n[o++]);return[s]}if(o==i)return[lt(t,[],r-t)];let p=function(e){let t=e.length-1,r=e[0].length-1,n=e[t][r],o=[];for(;t>0||r>0;){if(0==t){o.push(2),r--;continue}if(0==r){o.push(3),t--;continue}let i,s=e[t-1][r-1],a=e[t-1][r],c=e[t][r-1];i=a<c?a<s?a:s:c<s?c:s,i==s?(s==n?o.push(0):(o.push(1),n=s),t--,r--):i==a?(o.push(3),t--,n=a):(o.push(2),r--,n=c)}return o.reverse(),o}(function(e,t,r,n,o,i){let s=i-o+1,a=r-t+1,c=new Array(s);for(let e=0;e<s;e++)c[e]=new Array(a),c[e][0]=e;for(let e=0;e<a;e++)c[0][e]=e;for(let r=1;r<s;r++)for(let i=1;i<a;i++)if(dt(e[t+i-1],n[o+r-1]))c[r][i]=c[r-1][i-1];else{let e=c[r-1][i]+1,t=c[r][i-1]+1;c[r][i]=e<t?e:t}return c}(e,t,r,n,o,i));s=void 0;let u=[],d=t,h=o;for(let e=0;e<p.length;e++)switch(p[e]){case 0:s&&(u.push(s),s=void 0),d++,h++;break;case 1:s||(s=lt(d,[],0)),s.addedCount++,d++,s.removed.push(n[h]),h++;break;case 2:s||(s=lt(d,[],0)),s.addedCount++,d++;break;case 3:s||(s=lt(d,[],0)),s.removed.push(n[h]),h++}return s&&u.push(s),u}function ut(e,t){return pt(e,0,e.length,t,0,t.length)}function dt(e,t){return e===t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function ht(e){return"slot"===e.localName}let ft=class{static getFlattenedNodes(e){const t=Object(he.a)(e);return ht(e)?(e=e,t.assignedNodes({flatten:!0})):Array.from(t.childNodes).map(e=>ht(e)?(e=e,Object(he.a)(e).assignedNodes({flatten:!0})):[e]).reduce((e,t)=>e.concat(t),[])}constructor(e,t){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=e,this.callback=t,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){ht(this._target)?this._listenSlots([this._target]):Object(he.a)(this._target).children&&(this._listenSlots(Object(he.a)(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,e=>{this._processMutations(e)}):(this._nativeChildrenObserver=new MutationObserver(e=>{this._processMutations(e)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){ht(this._target)?this._unlistenSlots([this._target]):Object(he.a)(this._target).children&&(this._unlistenSlots(Object(he.a)(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,ae.a.run(()=>this.flush()))}_processMutations(e){this._processSlotMutations(e),this.flush()}_processSlotMutations(e){if(e)for(let t=0;t<e.length;t++){let r=e[t];r.addedNodes&&this._listenSlots(r.addedNodes),r.removedNodes&&this._unlistenSlots(r.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let e={target:this._target,addedNodes:[],removedNodes:[]},t=this.constructor.getFlattenedNodes(this._target),r=ut(t,this._effectiveNodes);for(let t,n=0;n<r.length&&(t=r[n]);n++)for(let r,n=0;n<t.removed.length&&(r=t.removed[n]);n++)e.removedNodes.push(r);for(let n,o=0;o<r.length&&(n=r[o]);o++)for(let r=n.index;r<n.index+n.addedCount;r++)e.addedNodes.push(t[r]);this._effectiveNodes=t;let n=!1;return(e.addedNodes.length||e.removedNodes.length)&&(n=!0,this.callback.call(this._target,e)),n}_listenSlots(e){for(let t=0;t<e.length;t++){let r=e[t];ht(r)&&r.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(e){for(let t=0;t<e.length;t++){let r=e[t];ht(r)&&r.removeEventListener("slotchange",this._boundSchedule)}}};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const mt=function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=ue()}while(e||t)},gt=Element.prototype,yt=gt.matches||gt.matchesSelector||gt.mozMatchesSelector||gt.msMatchesSelector||gt.oMatchesSelector||gt.webkitMatchesSelector,vt=function(e,t){return yt.call(e,t)};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/class bt{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new ft(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(Object(he.a)(this.node).contains(e))return!0;let t=e,r=e.ownerDocument;for(;t&&t!==r&&t!==this.node;)t=Object(he.a)(t).parentNode||Object(he.a)(t).host;return t===this.node}getOwnerRoot(){return Object(he.a)(this.node).getRootNode()}getDistributedNodes(){return"slot"===this.node.localName?Object(he.a)(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],t=Object(he.a)(this.node).assignedSlot;for(;t;)e.push(t),t=Object(he.a)(t).assignedSlot;return e}importNode(e,t){let r=this.node instanceof Document?this.node:this.node.ownerDocument;return Object(he.a)(r).importNode(e,t)}getEffectiveChildNodes(){return ft.getFlattenedNodes(this.node)}queryDistributedElements(e){let t=this.getEffectiveChildNodes(),r=[];for(let n,o=0,i=t.length;o<i&&(n=t[o]);o++)n.nodeType===Node.ELEMENT_NODE&&vt(n,e)&&r.push(n);return r}get activeElement(){let e=this.node;return void 0!==e._activeElement?e._activeElement:e.activeElement}}function wt(e,t){for(let r=0;r<t.length;r++){let n=t[r];Object.defineProperty(e,n,{get:function(){return this.node[n]},configurable:!0})}}class xt{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}bt.prototype.cloneNode,bt.prototype.appendChild,bt.prototype.insertBefore,bt.prototype.removeChild,bt.prototype.replaceChild,bt.prototype.setAttribute,bt.prototype.removeAttribute,bt.prototype.querySelector,bt.prototype.querySelectorAll,bt.prototype.parentNode,bt.prototype.firstChild,bt.prototype.lastChild,bt.prototype.nextSibling,bt.prototype.previousSibling,bt.prototype.firstElementChild,bt.prototype.lastElementChild,bt.prototype.nextElementSibling,bt.prototype.previousElementSibling,bt.prototype.childNodes,bt.prototype.children,bt.prototype.classList,bt.prototype.textContent,bt.prototype.innerHTML;let kt=bt;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class e extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(bt.prototype).forEach(t=>{"activeElement"!=t&&(e.prototype[t]=bt.prototype[t])}),wt(e.prototype,["classList"]),kt=e,Object.defineProperties(xt.prototype,{localTarget:{get(){const e=this.event.currentTarget,t=e&&Et(e).getOwnerRoot(),r=this.path;for(let e=0;e<r.length;e++){const n=r[e];if(Et(n).getOwnerRoot()===t)return n}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else!function(e,t){for(let r=0;r<t.length;r++){let n=t[r];e[n]=function(){return this.node[n].apply(this.node,arguments)}}}(bt.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),wt(bt.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),function(e,t){for(let r=0;r<t.length;r++){let n=t[r];Object.defineProperty(e,n,{get:function(){return this.node[n]},set:function(e){this.node[n]=e},configurable:!0})}}(bt.prototype,["textContent","innerHTML","className"]);const Et=function(e){if((e=e||document)instanceof kt)return e;if(e instanceof xt)return e;let t=e.__domApi;return t||(t=e instanceof Event?new xt(e):new kt(e),e.__domApi=t),t};var _t=r(4);
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const St=window.ShadyDOM,Ct=window.ShadyCSS;function Pt(e,t){return Object(he.a)(e).getRootNode()===t}
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
const At=e=>{for(;e;){const t=Object.getOwnPropertyDescriptor(e,"observedAttributes");if(t)return t.get;e=Object.getPrototypeOf(e.prototype).constructor}return()=>[]};Object(se.a)(e=>{const t=Object(ie.a)(e);let r=At(t);return class extends t{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return r.call(this).concat("disable-upgrade")}_initializeProperties(){this.hasAttribute("disable-upgrade")?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}attributeChangedCallback(e,t,r,n){"disable-upgrade"==e?this.__isUpgradeDisabled&&null==r&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,Object(he.a)(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(e,t,r,n)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}});var Ot=r(55);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Tt=window.ShadyCSS;const Dt=Object(se.a)(e=>{const t=Xe(Object(ie.a)(e)),r=ie.b?t:at(t),n=At(r),o={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class i extends r{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(e,t,r){(this.__dataAttributes&&this.__dataAttributes[e]||"disable-upgrade"===e)&&this.attributeChangedCallback(e,t,r,null)}setAttribute(e,t){if(de.d&&!this._legacyForceObservedAttributes){const r=this.getAttribute(e);super.setAttribute(e,t),this.__attributeReaction(e,r,String(t))}else super.setAttribute(e,t)}removeAttribute(e){if(de.d&&!this._legacyForceObservedAttributes){const t=this.getAttribute(e);super.removeAttribute(e),this.__attributeReaction(e,t,null)}else super.removeAttribute(e)}static get observedAttributes(){return de.d&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],Object(Ot.b)(this.prototype)),this.__observedAttributes):n.call(this).concat("disable-upgrade")}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(e){return super._canApplyPropertyDefault(e)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(e))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(e,t,r,n){t!==r&&("disable-upgrade"==e?this.__isUpgradeDisabled&&null==r&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,Object(he.a)(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(e,t,r,n),this.attributeChanged(e,t,r)))}attributeChanged(e,t,r){}_initializeProperties(){if(de.e&&this.hasAttribute("disable-upgrade"))this.__isUpgradeDisabled=!0;else{let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),de.d&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const e=this.attributes;for(let t=0,r=e.length;t<r;t++){const r=e[t];this.__attributeReaction(r.name,null,r.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,r){this._propertyToAttribute(e,t,r)}serializeValueToAttribute(e,t,r){this._valueToNodeAttribute(r||this,e,t)}extend(e,t){if(!e||!t)return e||t;let r=Object.getOwnPropertyNames(t);for(let n,o=0;o<r.length&&(n=r[o]);o++){let r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}return e}mixin(e,t){for(let r in t)e[r]=t[r];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,r){r=r||{},t=null==t?{}:t;let n=new Event(e,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});n.detail=t;let o=r.node||this;return Object(he.a)(o).dispatchEvent(n),n}listen(e,t,r){e=e||this;let n=this.__boundListeners||(this.__boundListeners=new WeakMap),o=n.get(e);o||(o={},n.set(e,o));let i=t+r;o[i]||(o[i]=this._addMethodEventListenerToNode(e,t,r,this))}unlisten(e,t,r){e=e||this;let n=this.__boundListeners&&this.__boundListeners.get(e),o=t+r,i=n&&n[o];i&&(this._removeEventListenerFromNode(e,t,i),n[o]=null)}setScrollDirection(e,t){Ue(t||this,o[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=Object(he.a)(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=Et(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Et(this).getEffectiveChildNodes()}queryDistributedElements(e){return Et(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let r,n=0;r=e[n];n++)r.nodeType!==Node.COMMENT_NODE&&t.push(r.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?Et(t).getDistributedNodes():[]}getContentChildren(e){return this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}isLightDescendant(e){return this!==e&&Object(he.a)(this).contains(e)&&Object(he.a)(this).getRootNode()===Object(he.a)(e).getRootNode()}isLocalDescendant(e){return this.root===Object(he.a)(e).getRootNode()}scopeSubtree(e,t=!1){return function(e,t=!1){if(!St||!Ct)return null;if(!St.handlesDynamicScoping)return null;const r=Ct.ScopingShim;if(!r)return null;const n=r.scopeForNode(e),o=Object(he.a)(e).getRootNode(),i=e=>{if(!Pt(e,o))return;const t=Array.from(St.nativeMethods.querySelectorAll.call(e,"*"));t.push(e);for(let e=0;e<t.length;e++){const i=t[e];if(!Pt(i,o))continue;const s=r.currentScopeForNode(i);s!==n&&(""!==s&&r.unscopeNode(i,s),r.scopeNode(i,n))}};if(i(e),t){const t=new MutationObserver(e=>{for(let t=0;t<e.length;t++){const r=e[t];for(let e=0;e<r.addedNodes.length;e++){const t=r.addedNodes[e];t.nodeType===Node.ELEMENT_NODE&&i(t)}}});return t.observe(e,{childList:!0,subtree:!0}),t}return null}(e,t)}getComputedStyleValue(e){return Tt.getComputedStyleValue(this,e)}debounce(e,t,r){return this._debouncers=this._debouncers||{},this._debouncers[e]=ce.debounce(this._debouncers[e],r>0?ae.b.after(r):ae.a,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?ae.b.run(e.bind(this),t):~ae.a.run(e.bind(this))}cancelAsync(e){e<0?ae.a.cancel(~e):ae.b.cancel(e)}create(e,t){let r=document.createElement(e);if(t)if(r.setProperties)r.setProperties(t);else for(let e in t)r[e]=t[e];return r}elementMatches(e,t){return vt(t||this,e)}toggleAttribute(e,t){let r=this;return 3===arguments.length&&(r=arguments[2]),1==arguments.length&&(t=!r.hasAttribute(e)),t?(Object(he.a)(r).setAttribute(e,""),!0):(Object(he.a)(r).removeAttribute(e),!1)}toggleClass(e,t,r){r=r||this,1==arguments.length&&(t=!r.classList.contains(e)),t?r.classList.add(e):r.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,r,n){n=n||this,this.transform("translate3d("+e+","+t+","+r+")",n)}arrayDelete(e,t){let r;if(Array.isArray(e)){if(r=e.indexOf(t),r>=0)return e.splice(r,1)}else{if(r=Object(_t.a)(this,e).indexOf(t),r>=0)return this.splice(e,r,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return i.prototype.is="",i}),Nt={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},jt={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},It=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},jt);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Rt(e,t,r,n){!function(e,t,r){const n=e._noAccessors,o=Object.getOwnPropertyNames(e);for(let i=0;i<o.length;i++){let s=o[i];if(!(s in r))if(n)t[s]=e[s];else{let r=Object.getOwnPropertyDescriptor(e,s);r&&(r.configurable=!0,Object.defineProperty(t,s,r))}}}(t,e,n);for(let e in Nt)t[e]&&(r[e]=r[e]||[],r[e].push(t[e]))}function Mt(e,t){for(const r in t){const n=e[r],o=t[r];e[r]=!("value"in o)&&n&&"value"in n?Object.assign({value:n.value},o):o}}const Lt=Dt(HTMLElement);function Ft(e,t,r){let n;const o={};class i extends t{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(n)for(let e,t=0;t<n.length;t++)e=n[t],e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties);e.properties&&this.createProperties(e.properties),e.observers&&this.createObservers(e.observers,e.properties),this._prepareTemplate()}else t._finalizeClass.call(this)}static get properties(){const t={};if(n)for(let e=0;e<n.length;e++)Mt(t,n[e].properties);return Mt(t,e.properties),t}static get observers(){let t=[];if(n)for(let e,r=0;r<n.length;r++)e=n[r],e.observers&&(t=t.concat(e.observers));return e.observers&&(t=t.concat(e.observers)),t}created(){super.created();const e=o.created;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}_registered(){const e=i.prototype;if(!e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))){e.__hasRegisterFinished=!0,super._registered(),de.e&&s(e);const t=Object.getPrototypeOf(this);let r=o.beforeRegister;if(r)for(let e=0;e<r.length;e++)r[e].call(t);if(r=o.registered,r)for(let e=0;e<r.length;e++)r[e].call(t)}}_applyListeners(){super._applyListeners();const e=o.listeners;if(e)for(let t=0;t<e.length;t++){const r=e[t];if(r)for(let e in r)this._addMethodEventListenerToNode(this,e,r[e])}}_ensureAttributes(){const e=o.hostAttributes;if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];for(let e in r)this._ensureAttribute(e,r[e])}super._ensureAttributes()}ready(){super.ready();let e=o.ready;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attached(){super.attached();let e=o.attached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}detached(){super.detached();let e=o.detached;if(e)for(let t=0;t<e.length;t++)e[t].call(this)}attributeChanged(e,t,r){super.attributeChanged();let n=o.attributeChanged;if(n)for(let o=0;o<n.length;o++)n[o].call(this,e,t,r)}}if(r){Array.isArray(r)||(r=[r]);let e=t.prototype.behaviors;n=function e(t,r,n){r=r||[];for(let o=t.length-1;o>=0;o--){let i=t[o];i?Array.isArray(i)?e(i,r):r.indexOf(i)<0&&(!n||n.indexOf(i)<0)&&r.unshift(i):console.warn("behavior is null, check for missing or 404 import")}return r}(r,null,e),i.prototype.behaviors=e?e.concat(r):n}const s=t=>{n&&function(e,t,r){for(let n=0;n<t.length;n++)Rt(e,t[n],r,It)}(t,n,o),Rt(t,e,o,jt)};return de.e||s(i.prototype),i.generatedFrom=e,i}const Gt=function(e){let t;return t="function"==typeof e?e:Gt.Class(e),e._legacyForceObservedAttributes&&(t.prototype._legacyForceObservedAttributes=e._legacyForceObservedAttributes),customElements.define(t.is,t),t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/Gt.Class=function(e,t){e||console.warn("Polymer.Class requires `info` argument");let r=t?t(Lt):Lt;return r=Ft(e,r,e.behaviors),r.is=r.prototype.is=e.is,r};var Bt=r(39);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function zt(e,t,r,n,o){let i;o&&(i="object"==typeof r&&null!==r,i&&(n=e.__dataTemp[t]));let s=n!==r&&(n==n||r==r);return i&&s&&(e.__dataTemp[t]=r),s}const Ut=Object(se.a)(e=>class extends e{_shouldPropertyChange(e,t,r){return zt(this,e,t,r,!0)}}),qt=Object(se.a)(e=>class extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(e,t,r){return zt(this,e,t,r,this.mutableData)}});Ut._mutablePropertyChange=zt;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let $t=null;function Ht(){return $t}Ht.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:Ht,writable:!0}});const Vt=Object(Bt.a)(Ht),Wt=Ut(Vt);const Jt=Object(Bt.a)(class{});function Xt(e,t){for(let r=0;r<t.length;r++){let n=t[r];if(Boolean(e)!=Boolean(n.__hideTemplateChildren__))if(n.nodeType===Node.TEXT_NODE)e?(n.__polymerTextContent__=n.textContent,n.textContent=""):n.textContent=n.__polymerTextContent__;else if("slot"===n.localName)if(e)n.__polymerReplaced__=document.createComment("hidden-slot"),Object(he.a)(Object(he.a)(n).parentNode).replaceChild(n.__polymerReplaced__,n);else{const e=n.__polymerReplaced__;e&&Object(he.a)(Object(he.a)(e).parentNode).replaceChild(n,e)}else n.style&&(e?(n.__polymerDisplay__=n.style.display,n.style.display="none"):n.style.display=n.__polymerDisplay__);n.__hideTemplateChildren__=e,n._showHideChildren&&n._showHideChildren(e)}}class Yt extends Jt{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let r=this.__templatizeOptions;(e&&r.instanceProps||!r.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,r){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,e=>{e.model=this,r(e)});else{let n=this.__dataHost.__dataHost;n&&n._addEventListenerToNode(e,t,r)}}_showHideChildren(e){Xt(e,this.children)}_setUnmanagedPropertyToNode(e,t,r){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=r:super._setUnmanagedPropertyToNode(e,t,r)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}Yt.prototype.__dataHost,Yt.prototype.__templatizeOptions,Yt.prototype._methodHost,Yt.prototype.__templatizeOwner,Yt.prototype.__hostProps;const Kt=Ut(Yt);function Qt(e){let t=e.__dataHost;return t&&t._methodHost||t}function Zt(e,t,r){let n=r.mutableData?Kt:Yt;nr.mixin&&(n=nr.mixin(n));let o=class extends n{};return o.prototype.__templatizeOptions=r,o.prototype._bindTemplate(e),function(e,t,r,n){let o=r.hostProps||{};for(let t in n.instanceProps){delete o[t];let r=n.notifyInstanceProp;r&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:rr(t,r)})}if(n.forwardHostProp&&t.__dataHost)for(let t in o)r.hasHostProps||(r.hasHostProps=!0),e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,r){e.__dataHost._setPendingPropertyOrPath("_host_"+t,r[t],!0,!0)}})}(o,e,t,r),o}function er(e,t,r,n){let o=r.forwardHostProp;if(o&&t.hasHostProps){const a="template"==e.localName;let c=t.templatizeTemplateClass;if(!c){if(a){let e=r.mutableData?Wt:Vt;class n extends e{}c=t.templatizeTemplateClass=n}else{const r=e.constructor;class n extends r{}c=t.templatizeTemplateClass=n}let i=t.hostProps;for(let e in i)c.prototype._addPropertyEffect("_host_"+e,c.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:tr(e,o)}),c.prototype._createNotifyingProperty("_host_"+e);de.g&&n&&function(e,t,r){const n=r.constructor._properties,{propertyEffects:o}=e,{instanceProps:i}=t;for(let e in o)if(!(n[e]||i&&i[e])){const t=o[e];for(let r=0;r<t.length;r++){const{part:n}=t[r].info;if(!n.signature||!n.signature.static){console.warn(`Property '${e}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(t,r,n)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),a)s=c,$t=i=e,Object.setPrototypeOf(i,s.prototype),new s,$t=null,e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,c.prototype);const r=t.hostProps;for(let t in r)if(t="_host_"+t,t in e){const r=e[t];delete e[t],e.__data[t]=r}}}var i,s}function tr(e,t){return function(e,r,n){t.call(e.__templatizeOwner,r.substring("_host_".length),n[r])}}function rr(e,t){return function(e,r,n){t.call(e.__templatizeOwner,e,r,n[r])}}function nr(e,t,r){if(de.m&&!Qt(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(r=r||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let n=(t?t.constructor:Yt)._parseTemplate(e),o=n.templatizeInstanceClass;o||(o=Zt(e,n,r),n.templatizeInstanceClass=o);const i=Qt(e);er(e,n,r,i);let s=class extends o{};return s.prototype._methodHost=i,s.prototype.__dataHost=e,s.prototype.__templatizeOwner=t,s.prototype.__hostProps=n.hostProps,s=s,s}function or(e,t){let r;for(;t;)if(r=t.__dataHost?t:t.__templatizeInstance){if(r.__dataHost==e)return r;t=r.__dataHost}else t=Object(he.a)(t).parentNode;return null}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ir=!1;function sr(){if(de.e&&!de.r){if(!ir){ir=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const ar=Xe(qt(Object(Bt.a)(HTMLElement)));customElements.define("dom-bind",class extends ar{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),de.m)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,t,r,n){this.mutableData=!0}connectedCallback(){sr()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){Object(he.a)(Object(he.a)(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let t=new MutationObserver(()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");t.disconnect(),this.render()});return void t.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let e=this.root.firstChild;e;e=e.nextSibling)this.__children[this.__children.length]=e;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}});var cr=r(13);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const lr=qt(cr.a);class pr extends lr{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!de.o,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),sr()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=Object(he.a)(Object(he.a)(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){const e=this;let t=this.template=e._templateInfo?e:this.querySelector("template");if(!t){let e=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}let r={};r[this.as]=!0,r[this.indexAs]=!0,r[this.itemsIndexAs]=!0,this.__ctor=nr(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:r,forwardHostProp:function(e,t){let r=this.__instances;for(let n,o=0;o<r.length&&(n=r[o]);o++)n.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,r){if(Object(_t.e)(this.as,t)){let n=e[this.itemsIndexAs];t==this.as&&(this.items[n]=r);let o=Object(_t.i)(this.as,`${JSCompiler_renameProperty("items",this)}.${n}`,t);this.notifyPath(o,r)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,r=this.__getMethodHost();return function(){return r[t].apply(r,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let r=0;r<t.length;r++)0===e.indexOf(t[r])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||("items"===e.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,t=0){this.__renderDebouncer=ce.debounce(this.__renderDebouncer,t>0?ae.b.after(t):ae.a,e.bind(this)),pe(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),mt()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const t=this.__sortAndFilterItems(e),r=this.__calculateLimit(t.length);this.__updateInstances(e,r,t),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),de.o&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=r;return this.__filterFn&&(t=t.filter((t,r,n)=>this.__filterFn(e[t],r,n))),this.__sortFn&&t.sort((t,r)=>this.__sortFn(e[t],e[r])),t}__calculateLimit(e){let t=e;const r=this.__instances.length;if(this.initialCount){let n;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(t=Math.min(e,this.initialCount),n=Math.max(t-r,0),this.__chunkCount=n||1):(n=Math.min(Math.max(e-r,0),this.__chunkCount),t=Math.min(r+n,e)),this.__shouldMeasureChunk=n===this.__chunkCount,this.__shouldContinueChunking=t<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,t}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,t=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*t)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,t,r){const n=this.__itemsIdxToInstIdx={};let o;for(o=0;o<t;o++){let t=this.__instances[o],i=r[o],s=e[i];n[i]=o,t?(t._setPendingProperty(this.as,s),t._setPendingProperty(this.indexAs,o),t._setPendingProperty(this.itemsIndexAs,i),t._flushProperties()):this.__insertInstance(s,o,i)}for(let e=this.__instances.length-1;e>=o;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];const r=Object(he.a)(t.root);for(let e=0;e<t.children.length;e++){let n=t.children[e];r.appendChild(n)}return t}__attachInstance(e,t){let r=this.__instances[e];t.insertBefore(r.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,t,r){let n={};return n[this.as]=e,n[this.indexAs]=t,n[this.itemsIndexAs]=r,new this.__ctor(n)}__insertInstance(e,t,r){const n=this.__stampInstance(e,t,r);let o=this.__instances[t+1],i=o?o.children[0]:this;return Object(he.a)(Object(he.a)(this).parentNode).insertBefore(n.root,i),this.__instances[t]=n,n}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let r=e.slice(6),n=r.indexOf("."),o=n<0?r:r.substring(0,n);if(o==parseInt(o,10)){let e=n<0?"":r.substring(n+1);this.__handleObservedPaths(e);let i=this.__itemsIdxToInstIdx[o],s=this.__instances[i];if(s){let r=this.as+(e?"."+e:"");s._setPendingPropertyOrPath(r,t,!1,!0),s._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return or(this.template,e)}}customElements.define(pr.is,pr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class ur extends cr.a{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=ce.debounce(this.__renderDebouncer,ae.a,()=>this.__render()),pe(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const e=Object(he.a)(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||Object(he.a)(e).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),sr()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const e=this;let t=e._templateInfo?e:Object(he.a)(e).querySelector("template");if(!t){let e=new MutationObserver(()=>{if(!Object(he.a)(this).querySelector("template"))throw new Error("dom-if requires a <template> child");e.disconnect(),this.__render()});return e.observe(this,{childList:!0}),!1}this.__template=t}return!0}__ensureInstance(){let e=Object(he.a)(this).parentNode;if(this.__hasInstance()){let t=this.__getInstanceNodes();if(t&&t.length){if(Object(he.a)(this).previousSibling!==t[t.length-1])for(let r,n=0;n<t.length&&(r=t[n]);n++)Object(he.a)(e).insertBefore(r,this)}}else{if(!e)return!1;if(!this.__ensureTemplate())return!1;this.__createAndInsertInstance(e)}return!0}render(){mt()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),de.o&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}}const dr=de.c?class extends ur{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){const t=this.__dataHost||this;if(de.m&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const r=t._bindTemplate(this.__template,!0);r.runEffects=(e,t,r)=>{let n=this.__syncInfo;if(this.if)n&&(this.__syncInfo=null,this._showHideChildren(),t=Object.assign(n.changedProps,t)),e(t,r);else if(this.__instance)if(n||(n=this.__syncInfo={runEffects:e,changedProps:{}}),r)for(const e in t){const t=Object(_t.g)(e);n.changedProps[t]=this.__dataHost[t]}else Object.assign(n.changedProps,t)},this.__instance=t._stampTemplate(this.__template,r),Object(he.a)(e).insertBefore(this.__instance,this)}__syncHostProperties(){const e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1))}__teardownInstance(){const e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,Xt(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties()}}:class extends ur{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=nr(this.__template,this,{mutableData:!0,forwardHostProp:function(e,t){this.__instance&&(this.if?this.__instance.forwardHostProp(e,t):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Object(_t.g)(e)]=!0))}})),this.__instance=new this.__ctor,Object(he.a)(e).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let t=Object(he.a)(e[0]).parentNode;if(t){t=Object(he.a)(t);for(let r,n=0;n<e.length&&(r=e[n]);n++)t.removeChild(r)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let t in e)this.__instance._setPendingProperty(t,this.__dataHost[t]);this.__instance._flushProperties()}}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties()}};customElements.define(dr.is,dr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let hr=Object(se.a)(e=>{let t=Object(ie.a)(e);return class extends t{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(e,t){let r=t.path;if(r==JSCompiler_renameProperty("items",this)){let r=t.base||[],n=this.__lastItems;if(e!==this.__lastMulti&&this.clearSelection(),n){let e=ut(r,n);this.__applySplices(e)}this.__lastItems=r,this.__lastMulti=e}else if(t.path==JSCompiler_renameProperty("items",this)+".splices")this.__applySplices(t.value.indexSplices);else{let e=r.slice((JSCompiler_renameProperty("items",this)+".").length),t=parseInt(e,10);e.indexOf(".")<0&&e==t&&this.__deselectChangedIdx(t)}}__applySplices(e){let t=this.__selectedMap;for(let r=0;r<e.length;r++){let n=e[r];t.forEach((e,r)=>{e<n.index||(e>=n.index+n.removed.length?t.set(r,e+n.addedCount-n.removed.length):t.set(r,-1))});for(let e=0;e<n.addedCount;e++){let r=n.index+e;t.has(this.items[r])&&t.set(this.items[r],r)}}this.__updateLinks();let r=0;t.forEach((e,n)=>{e<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),r,1):this.selected=this.selectedItem=null,t.delete(n)):r++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let e=0;this.__selectedMap.forEach(t=>{t>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${t}`,`${JSCompiler_renameProperty("selected",this)}.${e++}`)})}else this.__selectedMap.forEach(e=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${e}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${e}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(e){return this.__selectedMap.has(e)}isIndexSelected(e){return this.isSelected(this.items[e])}__deselectChangedIdx(e){let t=this.__selectedIndexForItemIndex(e);if(t>=0){let e=0;this.__selectedMap.forEach((r,n)=>{t==e++&&this.deselect(n)})}}__selectedIndexForItemIndex(e){let t=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${e}`];if(t)return parseInt(t.slice((JSCompiler_renameProperty("selected",this)+".").length),10)}deselect(e){let t=this.__selectedMap.get(e);if(t>=0){let r;this.__selectedMap.delete(e),this.multi&&(r=this.__selectedIndexForItemIndex(t)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),r,1):this.selected=this.selectedItem=null}}deselectIndex(e){this.deselect(this.items[e])}select(e){this.selectIndex(this.items.indexOf(e))}selectIndex(e){let t=this.items[e];this.isSelected(t)?this.toggle&&this.deselectIndex(e):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(t,e),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),t):this.selected=this.selectedItem=t)}}})(cr.a);class fr extends hr{static get is(){return"array-selector"}static get template(){return null}}customElements.define(fr.is,fr);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const mr=new re;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,r){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,r){},styleSubtree(e,t){mr.processStyles(),N(e,t)},styleElement(e){mr.processStyles()},styleDocument(e){mr.processStyles(),N(document.body,e)},getComputedStyleValue:(e,t)=>j(e,t),flushCustomStyles(){},nativeCss:l,nativeShadow:o,cssBuild:s,disableRuntime:c}),window.ShadyCSS.CustomStyleInterface=mr;var gr=r(53);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const yr=window.ShadyCSS.CustomStyleInterface;class vr extends HTMLElement{constructor(){super(),this._style=null,yr.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=Object(gr.a)(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let br;window.customElements.define("custom-style",vr),br=Ut._mutablePropertyChange;Boolean;var wr=r(70);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/Dt(HTMLElement).prototype;var xr=r(31),kr=r.n(xr),Er=r(0),_r=r.n(Er),Sr=r(16),Cr=r.n(Sr);r(18);Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      .plan strong {
        text-transform: uppercase;
        color: black;
        background-color: hsl(190, 90%, 45%);
        text-decoration: none;
        padding: 2px;
        border-radius: 2px;
      }
      .plan .free,
      .plan .backer {
        background-color: hsl(135, 98%, 46%);
      }
      .plan .pro {
        background-color: hsl(160, 98%, 46%);
      }
      .plan .supporter {
        background-color: hsl(185, 98%, 46%);
      }
      .plan form {
        display: inline;
      }
      #cta {
        display: inline;
        width: auto;
        background-color: transparent;
        color: hsl(190, 100%, 30%);
        border: 1px solid hsl(190, 100%, 30%);
        font-size: 13px;
        height: 36px;
        padding-left: 36px;
        padding-right: 36px;
        cursor: pointer;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Account settings for <span>{{user.flowhub-user.name}}</span></h1>
      <form>
        <label>
          Flowhub plan
          <div class="plan">
            You're currently using <strong class\$="{{user.flowhub-plan}}">{{user.flowhub-plan}}</strong> plan.
            <form method="post" action="https://plans.flowhub.io/auth/flowhub">
              <input type="hidden" name="username" value="{{user.github-username::input}}">
              <input type="hidden" name="password" value="{{user.flowhub-token::input}}">
              <input type="submit" id="cta" value="Manage subscription">
            </form>
          </div>
        </label>
        <label>
          Theme
          <select name="type" value="{{theme::input}}">
            <option value="dark" selected\$="[[_isSelectedTheme('dark', theme)]]">Lazer</option>
            <option value="light" selected\$="[[_isSelectedTheme('light', theme)]]">Tube</option>
          </select>
        </label>
        <label>
          Debug \NoFlo Development Environment in Flowhub (requires reload)
          <select name="type" value="{{debug::input}}">
            <option value="false" selected\$="[[_isSelectedDebug('false', debug)]]">Disabled</option>
            <option value="true" selected\$="[[_isSelectedDebug('true', debug)]]">Enabled</option>
          </select>
        </label>
        <div class="toolbar">
          <button on-click="send">Save</button>
          <a on-click="close">Cancel</a>
        </div>
      </form>
    </div>
`,is:"noflo-account-settings",properties:{theme:{type:String},debug:{type:String,value:"false"},user:{type:Object,value:()=>({}),notify:!0,observer:"userChanged"}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},send(e){e.preventDefault(),e.stopPropagation(),this.fire("updated",{"flowhub-theme":this.theme,"flowhub-debug":this.debug}),this.close()},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},userChanged(){this.theme=this.user["flowhub-theme"]||"dark",this.debug=this.user["flowhub-debug"]||"false"},_isSelectedTheme:(e,t)=>e===t,_isSelectedDebug:(e,t)=>e===t}),Gt({_template:wr.a`
    <style>
      :host {
        background-color: var(--noflo-ui-background) !important;
        color: var(--noflo-ui-text);
        display: block;
        padding-top: 18px;
        width: 100%;
      }
      nav {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        padding-left: 72px;
        padding-right: 72px;
        padding-bottom: 18px;
      }
      section.app {
        display: flex;
        flex-direction: row;
      }
      section.app .logo {
        margin-right: 18px;
        width: 72px;
        height: 72px;
      }
      section.app .logo img {
        width: 72px;
        height: 72px;
        display: inline-block;
      }
      section.app h1 {
        font-size: 18px;
        line-height: 36px;
        margin: 0;
        padding: 0;
      }
      section.app h2 {
        font-size: 9px;
        line-height: 36px;
        margin: 0;
        padding: 0;
      }
      section.user {
        text-align: right;
      }
      section.user .avatar {
        display: inline;
        line-height: 18px;
      }
      section.user .avatar img {
        width: 18px;
        height: 18px;
        display: inline-block;
      }
      section.user h1,
      section.user form {
        display: inline;
        line-height: 36px;
      }
      section.user #plan {
        display: inline-block;
        font-size: 8px;
        text-transform: uppercase;
        vertical-align: super;
        color: black;
        background-color: hsl(185, 98%, 46%);
        border: none;
        line-height: 10px;
        text-decoration: none;
        padding: 2px;
        border-radius: 2px;
        cursor: pointer;
      }
      section.user .free #plan,
      section.user .backer #plan {
        background-color: hsl(135, 98%, 46%);
      }
      section.user .pro #plan {
        background-color: hsl(160, 98%, 46%);
      }
      section.user .supporter #plan {
        background-color: hsl(185, 98%, 46%);
      }
      section.user .toolbar {
        line-height: 36px;
        font-size: 9px;
      }
      section.user .toolbar a,
      section.user .toolbar button {
        padding: 3px;
        text-shadow: none;
        text-decoration: none;
        box-shadow: none;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        font-size: 9px;
        margin-left: 9px;
        cursor: pointer;
        border: none;
        background-color: transparent;
        color: var(--noflo-ui-text);
      }
      section.user .toolbar a.login::before {
        content: ' ';
        position: absolute;
        border: 2px solid hsla(190, 98%, 46%, .8);
        border-radius: 6px;
        top: -6px;
        bottom: -6px;
        left: -6px;
        right: -6px;
        transition: all 0.3s ease;
      }
      section.user .toolbar a.login {
        position: relative;
        padding: 9px;
        font-size: 18px;
        border: 1px solid hsl(190, 98%, 46%);
        background: hsla(190, 98%, 46%, .8);
        line-height: 18px;
        border-radius: 3px;
        color: var(--noflo-ui-text);
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        box-sizing: border-box;
        transition: background-color 0.2s ease-in;
      }
      section.user .toolbar a.login:hover,
      section.user .toolbar a.login:focus,
      section.user .toolbar a.login:active {
        background-color: var(--noflo-ui-background) !important;
        color: var(--noflo-ui-text) !important;
        outline: 0;
      }
      div.banner {
        background-color: hsla(190, 98%, 46%, .8);
        padding: 18px;
        padding-left: 72px;
        padding-right: 72px;
      }
      div.banner a {
        color: var(--noflo-ui-text);
        cursor: pointer;
      }
      div.banner div {
        margin-top: 18px;
      }
      div.banner button,
      div.banner a.cta,
      div.banner input[type="submit"] {
        display: inline-block;
        color: var(--noflo-ui-background);
        background-color: var(--noflo-ui-text);
        border: none;
        font-size: 13px;
        border-radius: 3px;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        height: 36px;
        padding-left: 36px;
        padding-right: 36px;
        padding-top: 1px;
        padding-bottom: 1px;
        line-height: 36px;
        margin: 0px;
        cursor: pointer;
        font-size: 13px;
        text-decoration: none;
      }
      </style>
    <nav>
    <section class="app">
      <div class="logo \noflo"><img src="../app/\noflo-72.png"></div>
      <div class="name">
        <h1>
          \NoFlo UI
        </h1>
        <h2>
          v\0.27.10
        </h2>
      </div>
    </section>
    <section class="user">
    <template is="dom-if" if="{{user.flowhub-user}}">
      <div class\$="{{user.flowhub-plan}}">
        <template is="dom-if" if="{{user.flowhub-avatar}}">
          <div class="avatar"><img src="{{user.flowhub-avatar}}"></div>
        </template>
        <h1>
          <span>{{user.github-username}}</span>
          <form method="post" action="https://plans.flowhub.io/auth/flowhub">
            <input type="hidden" name="username" value="{{user.github-username::input}}">
            <input type="hidden" name="password" value="{{user.flowhub-token::input}}">
            <input type="submit" id="plan" value="{{user.flowhub-plan::input}}">
          </form>
        </h1>
        <div class="toolbar">
          <a href="https://docs.flowhub.io" target="_blank">Docs</a>
          <a on-click="openSettings">Settings</a>
          <button on-click="logout">Logout</button>
        </div>
      </div>
    </template>
    <template is="dom-if" if="{{!user.flowhub-user}}">
      <div class="toolbar">
        <a id="loginbutton" class="login" on-click="login">Login</a>
      </div>
    </template>
    </section>
    </nav>
    <template is="dom-if" if="{{user.flowhub-user}}">
      <template is="dom-if" if="{{askForScope.length}}">
        <div class="banner">
          To be able to synchronize your GitHub projects, \NoFlo Development Environment needs repository access permissions. <a href="https://docs.flowhub.io/github-integration/" target="_blank">Read more</a>
          <div>
            Grant access to:
            <template is="dom-repeat" items="{{askForScope}}" as="scope">
              <template is="dom-if" if="{{_ifPublicScope(scope)}}">
                <button on-click="relogin" data-scope\$="{{scope}}">Public repositories only</button>
              </template>
              <template is="dom-if" if="{{_ifPrivateScope(scope)}}">
                <button on-click="relogin" data-scope\$="{{scope}}">Public and private repositories</button>
              </template>
            </template>
          </div>
        </div>
      </template>
      <template is="dom-if" if="{{_ifFreePlan(askForScope, user.flowhub-plan)}}">
        <div class="banner">
          You're using a free Flowhub plan. By subscribing to Flowhub you directly support NoFlo development, and help us all get to the future of programming faster.
          <div>
            <form method="post" action="https://plans.flowhub.io/auth/flowhub">
              <input type="hidden" name="username" value="{{user.github-username::input}}">
              <input type="hidden" name="password" value="{{user.flowhub-token::input}}">
              <input type="submit" id="cta" value="Subscribe now">
            </form>
          </div>
        </div>
      </template>
    </template>
    <template is="dom-if" if="{{!user.flowhub-user}}">
      <div class="banner">
        Logging into \NoFlo Development Environment enables you to synchronize projects with Github. By subscribing to Flowhub you directly support NoFlo development, and help us all get to the future of programming faster.
        <div>
          <a class="cta" href="https://plans.flowhub.io">Subscribe now</a>
        </div>
      </div>
    </template>
`,is:"noflo-account",properties:{theme:{type:String},askForScope:{type:Array,value:()=>[]},help:{value:null},user:{type:Object,value:()=>({}),notify:!0,observer:"userChanged"}},login(){this.fire("login",!0)},logout(){this.fire("logout",!0)},relogin(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-scope");this.fire("relogin",t)},userChanged(){this.user&&this.user["flowhub-user"]&&this.user["flowhub-user"].github&&(this.user["flowhub-user"].plan&&"free"!==this.user["flowhub-user"].plan.type?this.user["flowhub-user"].github.scopes&&-1!==this.user["flowhub-user"].github.scopes.indexOf("repo")||(this.set("askForScope",["repo"]),this.user["flowhub-user"].github.scopes&&-1!==this.user["flowhub-user"].github.scopes.indexOf("public_repo")||this.push("askForScope","public_repo")):this.user["flowhub-user"].github.scopes&&-1!==this.user["flowhub-user"].github.scopes.indexOf("public_repo")||this.set("askForScope",["public_repo"]))},openSettings(){if(Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;if(!this.user["flowhub-user"])return;const e=document.createElement("noflo-account-settings");e.user=this.user,e.theme=this.theme,Et(document.body).appendChild(e),e.addEventListener("updated",e=>{this.fire("userUpdated",e.detail)})},_ifFreePlan:(e,t)=>"free"===t&&!e.length,_ifPublicScope:e=>"public_repo"===e,_ifPrivateScope:e=>"repo"===e});var Pr=r(106),Ar=r(78),Or=r.n(Ar);class Tr extends cr.a{static get template(){return cr.b`
    <style>
    :host {
      display: inline-block;
      font: normal normal normal 14px/1 FontAwesomeSVG;
      font-size: inherit;
      text-rendering: auto;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    </style>
    [[_getIcon(icon, fallback)]]
`}static get is(){return"noflo-icon"}static get properties(){return{icon:{type:String},fallback:{type:String}}}constructor(){super(),this.icons=Or.a}_getIcon(e,t){return this.icons.getIcon(e,t)}}customElements.define(Tr.is,Tr),Gt({_template:wr.a`
    <style>
      :host {
        top: calc(50% - 220px) !important;
      }
      ul.types {
        padding: 0px;
        margin: 0px;
        margin-left: -9px;
        margin-right: -9px;
        list-style: none;
      }
      ul.types li {
        width: 274px;
        height: 105px;
        overflow: hidden;
        display: inline-block;
        text-align: center;
        background-color: hsl(192, 25%, 75%);
        color: hsl(189, 50%, 80%);
        border-radius: 3px;
        margin-right: 9px;
        margin-left: 9px;
        margin-bottom: 18px;
        position: relative;
        cursor: pointer;
        transition: background-color 0.3s ease-in-out;
      }
      ul.types li.selected,
      ul.types li:hover {
        background-color: hsl(190, 100%, 30%);
        color: white;
        cursor: default;
      }
      ul.types li.selected p {
        color: hsl(0, 0%, 80%);
      }
      ul.types li h2 {
        position: absolute;
        top: 36px;
        line-height: 36px;
        width: 180px;
        text-transform: none;
        font-size: 10px;
        text-align: left;
        white-space: nowrap;
        left: 18px;
        padding: 0px;
        margin: 0px;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      ul.types li p {
        position: absolute;
        top: 53px;
        left: 18px;
        width: 180px;
        text-transform: uppercase;
        font-size: 8px;
        text-align: left;
        max-height: 36px;
        overflow: hidden;
        color: hsl(189, 50%, 80%);
      }
      ul.types li noflo-icon {
        font-size: 72px;
        position: absolute;
        right: -8px;
        top: 9px;
      }
    </style>
    <ul class="types">
      <template is="dom-repeat" items="{{available}}" as="availtype">
      <li on-click="selectType" data-id\$="{{availtype.id}}" class\$="{{_computeClass(availtype, type)}}">
        <h2>{{availtype.label}}</h2>
        <noflo-icon icon="{{availtype.icon}}"></noflo-icon>
        <template is="dom-if" if="{{_computeIf(availtype)}}">
        <p><span>{{availtype.runtimes.length}}</span> runtime</p>
        </template>
        <template is="dom-if" if="{{_computeIf2(availtype)}}">
        <p><span>{{availtype.runtimes.length}}</span> runtimes</p>
        </template>
      </li>
      </template>
    </ul>
`,is:"noflo-type-selector",properties:{available:{type:Array,value:()=>[]},runtimes:{type:Array,value:()=>[],notify:!0,observer:"runtimesChanged"},type:{type:String,value:"noflo-nodejs",notify:!0}},runtimesChanged(){this.available=[{id:"all",label:"Multi-platform",icon:"asterisk",runtimes:[]}],this.runtimes&&this.runtimes.forEach(e=>{if(!e.type)return;this.getByType(e.type).runtimes.push(e)})},selectType(e){this.type=e.currentTarget.getAttribute("data-id")},getByType(e){for(let t=0;t<this.available.length;t+=1)if(this.available[t].id===e)return this.available[t];return this.prepareAvailable(e)},prepareAvailable(e){const t={};Object.keys(Cr.a).forEach(e=>{const r=Cr.a[e];Object.keys(r.runtimetypes).forEach(e=>{t[e]=r.runtimetypes[e]})});const r={id:e,label:e,icon:"cogs",runtimes:[]},n=t[e];return n&&n.icon&&(r.icon=n.icon),n&&n.shortname&&(r.label=n.shortname),this.push("available",r),r},_computeClass(e,t){return this.tokenList({selected:t===e.id})},_computeIf:e=>1===e.runtimes.length,_computeIf2:e=>e.runtimes.length>1,tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Create new project</h1>
      <form>
        <div class="modal-content">
        <label>
          Project label
          <input type="text" value="{{name::input}}" placeholder="My Cool Project" required="">
        </label>
        <label>
          Project namespace
          <input type="text" value="{{namespace::input}}" placeholder="my-project" autocapitalize="off" autocorrect="off" readonly="">
        </label>
        <label>
          Primary Type
          <noflo-type-selector type="{{type}}" runtimes="{{runtimes}}"></noflo-type-selector>
        </label>
        </div>
        <div class="toolbar">
          <button on-click="send" class\$="{{_computeClass(canSend)}}">Create</button>
          <a on-click="close">Cancel</a>
        </div>
      </form></div>
`,is:"noflo-new-project",properties:{canSend:{type:Boolean,value:!1},name:{type:String,value:"",observer:"nameChanged"},namespace:{type:String,value:""},projectId:{type:String,value:""},projects:{value:null},runtimes:{value:null,notify:!0},type:{type:String,value:"noflo-browser"}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},produceNamespace:e=>e.toLowerCase().replace(/[\s/._]/g,"-").replace("--","-").replace(/[^a-z0-9-]/g,""),nameChanged(){this.namespace=this.produceNamespace(this.name),this.projectId=Object(Pr.a)(),this.name&&this.namespace&&this.projectId?this.canSend=!0:this.canSend=!1},send(e){e&&e.preventDefault(),this.name&&this.namespace&&this.projectId&&("function"==typeof ga&&ga("send","event","button","click","newProject"),this.fire("new",{id:this.projectId,name:this.name,namespace:this.produceNamespace(this.namespace),type:this.type,graphs:[],components:[],specs:[]}),this.close())},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Add a new repository</h1>
      <div class="modal-content">
      <form>
        <label>
          GitHub repository name
          <input type="text" value="{{repo::input}}" placeholder="username/repository" required="">
        </label>
      </form>
      </div>
      <div class="toolbar">
        <button on-click="send" class\$="{{_computeClass(canSend)}}">Add</button>
        <a on-click="close">Cancel</a>
      </div>
    </div>
`,is:"noflo-new-repository",properties:{canSend:{type:Boolean,value:!1},repo:{type:String,value:"",observer:"repoChanged"},runtimes:{notify:!0},token:{type:String,value:""}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},repoChanged(){if(this.canSend=!1,this.repo&&"string"==typeof this.repo){const e=this.repo.match(/^(git@github\.com:|https:\/\/github\.com\/)?(\S+\/\S+?(?=\.git|$))(\.git)?$/);if(!e||!e[2])return;e[2]!==this.repo&&(this.repo=e[2]),this.canSend=!0}},send(e){e&&e.preventDefault(),this.repo&&("function"==typeof ga&&ga("send","event","button","click","newRepository"),this.fire("new",this.repo),this.close())},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      :host {
        display: block;
      }
      a {
        color: hsl(190, 100%, 30%);
      }
      p {
        font-size: 11px;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Add new runtime</h1>
      <form>
        <div class="modal-content">
        <label>
          Runtime name 
          <input type="text" value="{{name::input}}" placeholder="New local runtime" required="">
        </label>
        <label>
          IP address
          <input type="text" value="{{address::input}}" placeholder="127.0.0.1" required="">
        </label>
        <label>
          Port
          <input type="text" data-type="int" value="{{port::input}}" placeholder="3569" required="">
        </label>
        <label>
          Type
          <select id="type" value="{{type::input}}">
            <template is="dom-repeat" items="{{availableTypes}}" as="type">
            <option value="{{type}}">{{type}}</option>
            </template>
          </select>
        </label>
        <label>
          Secret
          <input type="text" value="{{secret::input}}" placeholder="secret-string" required="">
        </label>
        </div>
        <div class="toolbar">
          <button on-click="create" class\$="{{_computeClass(canCreate)}}">Create</button>
          <a on-click="close">Cancel</a>
        </div>
      </form>
    </div>
`,is:"noflo-add-runtime",properties:{address:{type:String,value:"localhost",observer:"validate"},availableTypes:{type:Array,value:()=>["","custom","noflo-nodejs","microflo","javafbp","imgflo","sndflo","msgflo"]},canCreate:{type:Boolean,value:!1},name:{type:String,value:"",observer:"validate"},port:{type:String,value:"3569",observer:"validate"},secret:{type:String,value:""},type:{type:String,value:"",observer:"validate"}},attached(){Et(this).classList.add("modal-content")},detached(){},bgClick(e){e.stopPropagation()},validate(){this.name&&this.address&&this.port&&this.type&&(this.canCreate=!0)},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},createUUID:()=>Object(Pr.a)(),create(e){e&&e.preventDefault();const t={name:this.name,label:this.name,id:this.createUUID(),type:this.type,seen:(new Date).toString(),protocol:"websocket",address:`ws://${this.address}:${this.port}`,description:"",secret:this.secret,icon:"cloud"};this.fire("new",t),this.close()},listeners:{click:"close"},_computeRepeat:(e,t)=>t in e,_computeClass(e){return this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}});const Dr=[],Nr={};Object.keys(Cr.a).forEach(e=>{const t=Cr.a[e];Object.keys(t.runtimetypes).forEach(e=>{const r=t.runtimetypes[e],n={name:e,label:r.shortname,icon:r.icon,description:r.description,url:r.helpurl};Nr[e]||(Nr[e]=n,Dr.push(n))})}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      a {
        color: hsl(190, 100%, 30%);
      }
      p {
        font-size: 11px;
      }
      ul.runtimes {
        padding: 0px;
        margin: 0px;
        margin-left: -10px;
        margin-right: -10px;
        list-style: none;
      }
      ul.runtimes li {
        display: inline-block;
      }
      ul.runtimes li a {
        width: 274px;
        height: 105px;
        overflow: hidden;
        display: inline-block;
        text-align: center;
        background-color: hsl(190, 100%, 30%);
        color: white;
        border-radius: 3px;
        margin-right: 9px;
        margin-left: 9px;
        margin-bottom: 18px;
        position: relative;
        cursor: pointer;
        text-decoration: none;
      }
      ul.runtimes li h2 {
        position: absolute;
        top: 36px;
        line-height: 36px;
        width: 180px;
        text-transform: none;
        font-size: 10px;
        text-align: left;
        white-space: nowrap;
        left: 18px;
        padding: 0px;
        margin: 0px;
        text-overflow: ellipsis;
        overflow: hidden;
        text-decoration: none;
      }
      ul.runtimes li p {
        position: absolute;
        top: 53px;
        left: 18px;
        width: 180px;
        text-transform: uppercase;
        font-size: 8px;
        text-align: left;
        max-height: 36px;
        overflow: hidden;
        color: hsl(189, 50%, 80%);
        text-decoration: none;
      }
      ul.runtimes li a noflo-icon {
        font-size: 72px;
        position: absolute;
        right: -8px;
        top: 9px;
        text-decoration: none;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Register new runtime</h1>
      <div class="modal-content">
      <p>
      \NoFlo Development Environment supports all flow-based programming runtimes that are compatible with the <a href="https://flowbased.github.io/fbp-protocol/" target="_blank">FBP protocol</a>.
      \NoFlo Development Environment comes with a bundled <a href="http://noflojs.org" target="_blank">NoFlo</a> runtime for the browser.
      Here are some other popular ones:
      </p>
      <ul class="runtimes">
      <template is="dom-repeat" items="{{runtimes}}" as="runtime">
      <li class\$="{{runtime.name}}">
        <a target="_blank" href\$="{{runtime.url}}">
          <noflo-icon icon="{{ runtime.icon }}" fallback="cog"></noflo-icon>
          <h2>{{runtime.label}}</h2>
          <p>{{runtime.description}}</p>
        </a>
      </li>
      </template>
      </ul>
      <p>
      Most runtimes provide a link that connects to them in \NoFlo Development Environment live mode at start-up. You can also add a runtime manually.
      </p>
      </div>
      <div class="toolbar">
        <button on-click="addRuntime">Add manually</button>
        <button on-click="close">Close</button>
      </div>
    </div>
`,is:"noflo-new-runtime",properties:{runtimes:{value:()=>Dr}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){this.runtimeAdd&&(Et(this.runtimeAdd).parentNode&&Et(Et(this.runtimeAdd).parentNode).removeChild(this.runtimeAdd),this.runtimeAdd=null),Et(document.getElementById("container")).classList.remove("blur")},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},addRuntime(e){e.preventDefault(),this.runtimeAdd=document.createElement("noflo-add-runtime"),Et(document.body).appendChild(this.runtimeAdd),this.runtimeAdd.addEventListener("new",e=>{this.fire("addRuntime",e.detail)})},listeners:{click:"close"}});r(99);var jr=r(25),Ir=r.n(jr);Gt({_template:wr.a`
    <canvas id="canvas" width="{{width}}" height="{{height}}" style="position:absolute;top:0;left:0;"></canvas>
`,is:"the-graph-thumb",properties:{edgeColors:{type:Array,value:()=>["white","hsl(  0, 100%, 46%)","hsl( 35, 100%, 46%)","hsl( 60, 100%, 46%)","hsl(135, 100%, 46%)","hsl(160, 100%, 46%)","hsl(185, 100%, 46%)","hsl(210, 100%, 46%)","hsl(285, 100%, 46%)","hsl(310, 100%, 46%)","hsl(335, 100%, 46%)"]},fillStyle:{type:String,value:"hsl(184, 8%, 10%)"},graph:{value:null,notify:!0,observer:"graphChanged"},height:{type:Number,value:150,notify:!0,observer:"heightChanged"},lineWidth:{type:Number,value:.75},listener:{value:null},nodeSize:{type:Number,value:60},strokeStyle:{type:String,value:"hsl(180, 11%, 70%)"},theme:{type:String,value:"dark",notify:!0,observer:"themeChanged"},thumbrectangle:{notify:!0},thumbscale:{type:Number,value:1,notify:!0},width:{type:Number,value:200,notify:!0,observer:"widthChanged"}},ready(){this.thumbrectangle=[0,0,500,500],this.viewrectangle=[0,0,200,150]},attached(){this.set("style.width",this.width+"px"),this.set("style.height",this.height+"px"),this.themeChanged()},themeChanged(){const e=Ir.a.thumb.styleFromTheme(this.theme);this.edgeColors=e.edgeColors,this.fillStyle=e.fill,this.strokeStyle=e.stroke,this.redrawGraph()},redrawGraph(){if(!this.graph)return;const e=this.$.canvas.getContext("2d");if(!e)return void setTimeout(this.redrawGraph.bind(this),500);const t={width:this.width,height:this.height,edgeColors:this.edgeColors,nodeSize:this.nodeSize,strokeStyle:this.strokeStyle,fillStyle:this.fillStyle,lineWidth:this.lineWidth},r=Ir.a.thumb.render(e,this.graph,t);this.thumbrectangle=r.rectangle,this.thumbscale=r.scale},graphChanged(e,t){this.listener||(this.listener=this.redrawGraph.bind(this)),t&&t.removeListener("endTransaction",this.listener),this.graph&&(this.graph.on("endTransaction",this.listener),this.redrawGraph())},widthChanged(){this.set("style.width",this.width+"px"),this.redrawGraph()},heightChanged(){this.set("style.height",this.height+"px"),this.redrawGraph()},toDataURL(){return this.$.canvas.toDataURL()}});class Rr extends cr.a{static get template(){return cr.b`
    <style include="noflo-card-styles">
      the-graph-thumb {
        display: block;
        position: absolute;
        left: 100px;
        top: -20px;
      }
    </style>
    <the-graph-thumb graph="[[_getMainGraph(project.main)]]" width="200" height="120"></the-graph-thumb>
    <button id="menubutton" title="Project menu" on-click="toggleMenu"><noflo-icon icon="[[menuicon]]"></noflo-icon></button>
    <template is="dom-if" if="[[menuopen]]">
    <ul id="menu">
      <template is="dom-if" if="[[project.repo]]">
      <li><button on-click="openGithub">View on GitHub</button></li>
      </template>
      <template is="dom-if" if="[[project.gist]]">
      <li><button on-click="openGithub">View Gist</button></li>
      </template>
      <li><button on-click="deleteProject">Delete project</button></li>
    </ul>
    </template>
    <h2>[[project.name]]</h2>
    <p><span>[[project.graphs.length]]</span>&nbsp;graphs, <span>[[project.components.length]]</span>&nbsp;components</p>
`}static get is(){return"noflo-project-card"}static get properties(){return{menuopen:{type:Boolean,value:!1,observer:"_menuOpenChanged"},menuicon:{type:String,value:"ellipsis-v"},project:{type:Object,value:()=>({})}}}toggleMenu(e){e.stopPropagation(),e.preventDefault(),this.menuopen?this.menuopen=!1:this.menuopen=!0}openGithub(e){if(e.stopPropagation(),e.preventDefault(),this.project.repo||this.project.gist)return this.project.repo?("function"==typeof ga&&ga("send","event","button","click","openGithub"),void(window.location="https://github.com/"+this.project.repo)):void(this.project.gist&&("function"==typeof ga&&ga("send","event","button","click","openGist"),window.location="https://gist.github.com/"+this.project.gist))}deleteProject(e){e.stopPropagation(),e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","deleteProject"),this.dispatchEvent(new CustomEvent("deleteProject",{detail:this.project,composed:!0,bubbles:!0})),this.menuopen=!1}_getMainGraph(e){if(!e)return null;const t=this.project.graphs.filter(t=>t.properties.id===e);return t.length?t[0]:null}_menuOpenChanged(){this.menuopen?this.menuicon="caret-down":this.menuicon="ellipsis-v"}}customElements.define(Rr.is,Rr);class Mr extends cr.a{static get template(){return cr.b`
    <style include="noflo-card-styles">
      #repoicon {
        font-size: 72px;
        position: absolute;
        right: -8px;
        top: 9px;
        color: hsla(185, 100%, 75%, 0.2);
        text-decoration: none;
      }
    </style>
    <noflo-icon id="repoicon" icon="[[getRepoIcon(project)]]"></noflo-icon>
    <button id="menubutton" title="Project menu" on-click="toggleMenu"><noflo-icon icon="[[menuicon]]"></noflo-icon></button>
    <template is="dom-if" if="[[menuopen]]">
    <ul id="menu">
      <template is="dom-if" if="[[project.repo]]">
      <li><button on-click="openGithub">View on GitHub</button></li>
      </template>
      <li><button on-click="deleteRepo">Remove from \NoFlo UI</button></li>
    </ul>
    </template>
    <h2>[[project.repo]]</h2>
    <template is="dom-if" if="[[project.private]]">
    <p>Private repository</p>
      <template is="dom-if" if="[[!_isFree(user)]]">
      </template>
    </template>
    <template is="dom-if" if="[[!project.private]]">
    <p>Public repository</p>
    </template>
`}static get is(){return"noflo-repo-card"}static get properties(){return{menuopen:{type:Boolean,value:!1,observer:"_menuOpenChanged"},menuicon:{type:String,value:"ellipsis-v"},project:{type:Object,value:()=>({})}}}toggleMenu(e){e.stopPropagation(),e.preventDefault(),this.menuopen?this.menuopen=!1:this.menuopen=!0}openGithub(e){e.stopPropagation(),e.preventDefault(),this.project.repo&&this.project.repo&&("function"==typeof ga&&ga("send","event","button","click","openGithub"),window.location="https://github.com/"+this.project.repo)}deleteRepo(e){e.stopPropagation(),e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","deleteRepo"),this.dispatchEvent(new CustomEvent("deleteRepo",{detail:this.project,composed:!0,bubbles:!0})),this.menuopen=!1}_menuOpenChanged(){this.menuopen?this.menuicon="caret-down":this.menuicon="ellipsis-v"}getRepoIcon(){return"github"}}customElements.define(Mr.is,Mr);class Lr extends cr.a{static get template(){return cr.b`
    <style include="noflo-card-styles">
    #runtimeicon {
      font-size: 72px;
      position: absolute;
      right: -8px;
      top: 9px;
      color: hsla(185, 100%, 75%, 0.2);
      text-decoration: none;
    }
    </style>
    <noflo-icon id="runtimeicon" icon="[[getRuntimeIcon(runtime)]]"></noflo-icon>
    <button id="menubutton" title="Runtime menu" on-click="toggleMenu"><noflo-icon icon="[[menuicon]]"></noflo-icon></button>
    <template is="dom-if" if="[[menuopen]]">
    <ul id="menu">
      <li><button on-click="deleteRuntime">Delete runtime</button></li>
    </ul>
    </template>
    <h2>[[runtime.label]]</h2>
    <p><span>[[_produceAddress(runtime)]]</span>. Seen <span>[[runtime.seenHoursAgo]]</span>h ago</p>
`}static get is(){return"noflo-runtime-card"}static get properties(){return{menuopen:{type:Boolean,value:!1,observer:"_menuOpenChanged"},menuicon:{type:String,value:"ellipsis-v"},runtime:{type:Object,value:()=>({})}}}toggleMenu(e){e.stopPropagation(),e.preventDefault(),this.menuopen?this.menuopen=!1:this.menuopen=!0}deleteRuntime(e){e.stopPropagation(),e.preventDefault(),this.dispatchEvent(new CustomEvent("deleteRuntime",{detail:this.runtime,composed:!0,bubbles:!0})),this.menuopen=!1}getRuntimeIcon(e){if(!e||!e.type||!Cr.a[e.type])return"cog";let t="cog";return Object.keys(Cr.a).forEach(r=>{Object.keys(Cr.a[r].runtimetypes).forEach(n=>{n===e.type&&(t=Cr.a[r].runtimetypes[e.type].icon)})}),t}_produceAddress(e){return"webrtc"===e.protocol?"WebRTC P2P "+e.id:e.address}_menuOpenChanged(){this.menuopen?this.menuicon="caret-down":this.menuicon="ellipsis-v"}}customElements.define(Lr.is,Lr),Gt({_template:wr.a`
    <style>
      :host {
        background-color: hsl(190, 90%, 45%);
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        transition: height 1s ease-in-out;
        display: block;
      }
      section {
        display: block;
        position: relative;
        padding-left: 72px;
        padding-right: 72px;
      }
      section > h2 {
        font-size: 17px;
        line-height: 36px;
        margin-top: 36px;
        height: 36px;
        color: white;
        text-shadow: 0 1px 0 hsl(190, 100%, 40%);
        text-transform: none;
      }
      section > h2 small {
        font-size: 10px;
        text-transform: uppercase;
        color: hsl(189, 50%, 25%);
      }
      ul.tabs {
        position: absolute;
        display: inline-block;
        top: 0px;
        left: calc(50% - 133px);
        margin: 0px;
        padding: 0px;
        list-style: none;
        padding: 1px;
      }
      ul.tabs li {
        display: inline;
        line-height: 36px;
        font-size: 13px;
        color: hsl(189, 50%, 25%);
        text-decoration: none;
        padding-left: 36px;
        padding-right: 36px;
        cursor: pointer;
      }
      ul.tabs li.selected {
        border: none;
        border-radius: 3px;
        background-color: rgba(0, 42, 51, 0.498039);
        color: white;
        border-radius: 3px;
        padding-top: 8px;
        padding-bottom: 9px;
        cursor: default;
      }
      ul.projects {
        padding: 0px;
        margin-top: 36px;
        margin-bottom: 36px;
        margin-left: -18px;
        margin-right: -18px;
        list-style: none;
      }
      ul.projects li {
        width: 216px;
        height: 105px;
        overflow: hidden;
        display: inline-block;
        text-align: center;
        background-color: var(--noflo-ui-background);
        color: var(--noflo-ui-text);
        border-radius: 3px;
        margin-right: 18px;
        margin-left: 18px;
        margin-bottom: 36px;
        position: relative;
        cursor: pointer;
      }
      ul.projects li.add,
      ul.projects li.plan {
        background-color: var(--noflo-ui-text);
        color: var(--noflo-ui-background);
        cursor: default;
      }
      ul.projects li.remote {
        cursor: default;
      }
      section button,
      section #cta {
        background-color: transparent;
        color: hsl(189, 50%, 25%);
        font-size: 13px;
        border-radius: 3px;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        height: 36px;
        border: none;
        padding-left: 13px;
        padding-right: 13px;
        cursor: pointer;
      }
      ul.projects li button,
      ul.projects li #cta {
        display: block;
        border: 1px solid hsl(189, 50%, 25%);
        position: absolute;
        right: 18px;
        top: 36px;
      }
      ul.projects li h2 {
        position: absolute;
        top: 36px;
        line-height: 36px;
        width: 150px;
        text-transform: none;
        font-size: 12px;
        text-align: left;
        white-space: nowrap;
        left: 18px;
        padding: 0px;
        margin: 0px;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      ul.projects li p {
        position: absolute;
        top: 53px;
        left: 18px;
        width: 150px;
        text-transform: uppercase;
        font-size: 10px;
        text-align: left;
        max-height: 36px;
        overflow: hidden;
        color: hsl(189, 11%, 50%);
      }
      ul.projects li.plan p {
        width: 100px;
        font-size: 9px;
      }
      ul.projects li a {
        color: var(--noflo-ui-background);
        text-decoration: none;
      }
    </style>
    <noflo-account id="mainaccount" user="[[user]]" theme="[[theme]]"></noflo-account>
      <section id="projects">
        <h2>Projects
          <template is="dom-if" if="[[_isLocalProjects(projectList)]]">
          <small>[[projects.length]]</small>
          </template>
          <template is="dom-if" if="[[!_isLocalProjects(projectList)]]">
          <small>[[numberOfRemoteProjects(remoteProjects)]]</small>
          <button on-click="fetchGithub">
            <noflo-icon id="fetchgithub" icon="refresh"></noflo-icon>
          </button>
          </template>
        </h2>
        <ul class="tabs">
          <li on-click="openLocal" class\$="[[_isSelectedView('local', projectList)]]">On device</li>
          <template is="dom-if" if="[[_canGithub(user)]]">
          <li on-click="openGithub" class\$="[[_isSelectedView('github', projectList)]]">GitHub</li>
          </template>
        </ul>
        <ul class="projects">
          <template is="dom-if" if="[[_isLocalProjects(projectList)]]">
          <li class="add">
            <h2>New project</h2>
            <button id="newproject" on-click="newProject">Create</button>
          </li>
          <template is="dom-repeat" items="[[projects]]" as="project">
            <li on-click="openProject" data-id\$="[[project.id]]">
              <noflo-project-card project="[[project]]"></noflo-project-card>
            </li>
          </template>
          </template>
          <template is="dom-if" if="[[!_isLocalProjects(projectList)]]">
          <li class="add">
            <h2>Add a repository</h2>
            <button id="newrepository" on-click="newRepository">Add</button>
          </li>
          <template is="dom-if" if="[[_isFree(user)]]">
          <li class\$="[[_planClass(user)]]">
            <h2>Flowhub free</h2>
            <p>Access only to public GitHub repositories.</p>
            <form method="post" action="https://plans.flowhub.io/auth/flowhub">
              <input type="hidden" name="username" value="[[user.github-username]]">
              <input type="hidden" name="password" value="[[user.flowhub-token]]">
              <input type="submit" id="cta" value="Upgrade">
            </form>
          </li>
          </template>
          <template is="dom-repeat" items="[[remoteProjects]]" as="project" filter="filterRemoteProjects">
            <li class="remote" on-click="downloadProject" data-repo\$="[[project.repo]]">
              <noflo-repo-card project="[[project]]"></noflo-repo-card>
            </li>
          </template>
          </template>
        </ul>
      </section>
    <section id="runtimes">
      <h2>
        Runtimes <small><span>[[numberOfAvailableRuntimes(runtimes)]]</span> / <span>[[runtimes.length]]</span></small>
        <template is="dom-if" if="[[_canFlowhub(user)]]">
        <button on-click="fetchRuntimes">
          <noflo-icon id="fetchruntimes" icon="refresh"></noflo-icon>
        </button>
        </template>
      </h2>
      <ul class="projects">
        <li class="add">
          <h2>New runtime</h2>
          <button on-click="newRuntime">Register</button>
        </li>

        <template is="dom-repeat" items="[[runtimes]]" as="runtime" filter="filterAvailableRuntimes">
          <li on-click="openRuntime" data-id\$="[[runtime.id]]" data-protocol\$="[[runtime.protocol]]">
            <noflo-runtime-card runtime="[[runtime]]"></noflo-runtime-card>
          </li>
        </template>
      </ul>
    </section>
    <section id="examples">
      <h2>
        Examples
      </h2>
      <ul class="projects">
        <template is="dom-repeat" items="[[_getExamples(projects, runtimes)]]" as="example">
        <li on-click="openExample" class="example" data-id\$="[[example.id]]">
          <h2>[[example.label]]</h2>
          <p>[[example.address]]</p>
        </li>
        </template>
      </ul>
    </section>
`,is:"noflo-main",properties:{help:{value:null},open:{type:Boolean,value:!0,notify:!0,observer:"openChanged"},projectList:{type:String,value:"local"},projects:{type:Array,value:()=>[],notify:!0},remoteProjects:{type:Array,value:()=>[],notify:!0},runtimes:{type:Array,value:()=>[],notify:!0},theme:{type:String},user:{type:Object,value:()=>({}),notify:!0}},attached(){this.openChanged(),this.help=Et(document).querySelector("noflo-help")},openChanged(){"true"!==String(this.open)?this.set("style.height","0px"):this.set("style.height","100%")},openLocal(e){e&&e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||(this.projectList="local")},openGithub(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||this._canGithub(this.user)&&(e.preventDefault(),this.projectList="github",this.remoteProjects&&0!==this.remoteProjects.length||setTimeout(()=>{this.fetchGithub()},1))},downloadProject(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget.getAttribute("data-repo").split("/");this.fire("downloadProject",{org:t[0],repo:t[1],branch:"master"}),this.openLocal()},fetchGithub(e){e&&e.preventDefault(),this._canGithub(this.user)&&this.fire("fetchRemote",!0)},numberOfRemoteProjects(e){return e.filter(this.filterRemoteProjects.bind(this)).length},filterRemoteProjects(e){if(!this.projects)return!0;for(let t=0;t<this.projects.length;t+=1)if(this.projects[t].repo===e.repo)return!1;return!0},numberOfAvailableRuntimes(e){return e.filter(this.filterAvailableRuntimes.bind(this)).length},filterAvailableRuntimes(e){if(!e)return!1;if(!e.seen)return!1;if("opener"===e.protocol&&!window.opener)return!1;"object"!=typeof e.seen&&(e.seen=new Date(e.seen));const t=new Date;return e.seenHoursAgo=Math.floor((t-e.seen)/36e5),!0},_getExamples(e,t){const r=[];t.forEach(e=>{e.type&&-1===r.indexOf(e.type)&&r.push(e.type)});const n=[];r.forEach(e=>{if(!Cr.a[e])return;const t=Cr.a[e].examples;t&&Object.keys(t).forEach(e=>{t[e].ssl&&"https:"!==window.location.protocol||n.push(t[e])})});const o=[];return n.filter(t=>{if(-1!==o.indexOf(t.id))return!1;o.push(t.id);return!e.filter(e=>e.gist===t.id).length})},fetchRuntimes(){this._canFlowhub(this.user)&&this.fire("fetchRuntimes",!0)},openProject(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;let t=null;if(this.projects.forEach(r=>{r.id===e.currentTarget.getAttribute("data-id")&&(t=r)}),t){if(t.runtime){if(!this.runtimes.filter(this.filterAvailableRuntimes).filter(e=>e.id===t.runtime).length)return}this.fire("openProject",t)}},openRuntime(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||"iframe"!==e.currentTarget.getAttribute("data-protocol")&&this.fire("hash",["runtime",e.currentTarget.getAttribute("data-id")])},openExample(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||this.fire("hash",["gist",e.currentTarget.getAttribute("data-id")])},newProject(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;const t=document.createElement("noflo-new-project");t.projects=this.projects,t.runtimes=this.runtimes,Et(document.body).appendChild(t),t.addEventListener("new",e=>{const t=e.detail,r=new _r.a.Graph("main"),n=t.id+"/main";r.setProperties({id:n,project:t.id,environment:{type:t.type},main:!0}),t.graphs.push(r),t.main=n,this.fire("newgraph",r),this.fire("newproject",t)})},newRepository(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;const t=document.createElement("noflo-new-repository");t.addEventListener("new",e=>{const t=e.detail.split("/");this.fire("downloadProject",{org:t[0],repo:t[1],branch:"master"}),setTimeout(()=>{this.openLocal()},1)}),Et(document.body).appendChild(t)},newRuntime(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;const t=document.createElement("noflo-new-runtime");t.addEventListener("addRuntime",e=>{this.fire("newruntime",e.detail)}),t.user=this.user,Et(document.body).appendChild(t)},_isLocalProjects:e=>"local"===e,_canGithub:e=>!(!e||!e["github-token"]),_canFlowhub:e=>!(!e||!e["flowhub-token"]),_isSelectedView:(e,t)=>t===e?"selected":"",_isFree:e=>"free"===e["flowhub-plan"],_planClass:e=>"plan "+e["flowhub-plan"]});var Fr=r(15),Gr=r.n(Fr),Br=r(7),zr=r.n(Br);r(533);Gt({_template:wr.a`
    <style include="the-graph-styles">
    </style>
    <div id="svgcontainer"></div>
`,is:"the-graph",properties:{icons:{type:Object,value:()=>({}),observer:"iconsChanged"},animatedEdges:{type:Array,value:()=>[],notify:!0,observer:"animatedEdgesChanged"},appView:{value:null},autolayout:{type:Boolean,value:!1,notify:!0},autolayouter:{value:null},debounceLibraryRefeshTimer:{value:null},displaySelectionGroup:{type:Boolean,value:!0,notify:!0,observer:"displaySelectionGroupChanged"},editable:{type:Boolean,value:!0},graphChanges:{type:Array,value:()=>[]},errorNodes:{type:Object,value:()=>({}),notify:!0,observer:"errorNodesChanged"},forceSelection:{type:Boolean,value:!1,notify:!0,observer:"forceSelectionChanged"},graph:{value:null,notify:!0,observer:"graphChanged"},graphView:{value:null},grid:{type:Number,value:72},height:{type:Number,value:600,notify:!0,observer:"heightChanged"},library:{value:null,notify:!0},maxZoom:{type:Number,value:15,notify:!0},menus:{value:null,notify:!0,observer:"menusChanged"},minZoom:{type:Number,value:.15,notify:!0},offsetX:{value:0,notify:!0},offsetY:{value:0,notify:!0},pan:{notify:!0,observer:"panChanged"},readonly:{type:Boolean,value:!1,notify:!0,observer:"readonlyChanged"},scale:{type:Number,value:1,notify:!0},selectedEdges:{type:Array,value:()=>[],notify:!0,observer:"selectedEdgesChanged"},selectedNodes:{type:Array,value:()=>[],notify:!0,observer:"selectedNodesChanged"},selectedNodesHash:{type:Object,value:()=>({}),observer:"selectedNodesHashChanged"},snap:{type:Number,value:36},theme:{type:String,value:"dark",notify:!0,observer:"themeChanged"},width:{type:Number,value:800,notify:!0,observer:"widthChanged"}},ready(){this.library={},this.pan=[0,0],this.autolayouter=klayNoflo.init({onSuccess:this.applyAutolayout.bind(this),workerScript:"browser/vendor/klayjs/klay.js"}),this.themeChanged()},themeChanged(e,t){Et(this.$.svgcontainer).classList.remove("the-graph-"+t),e&&Et(this.$.svgcontainer).classList.add("the-graph-"+e)},graphEvents:["changeProperties","addNode","changeNode","removeNode","addEdge","changeEdge","removeEdge","addInitial","removeInitial","addGroup","removeGroup","changeGroup"],graphRenameEvents:["renameInport","renameOutport","renameGroup","renameNode"],graphPortEvents:["addInport","removeInport","addOutport","removeOutport"],subscribeGraph(e){this.trackGraphChange||(this.trackGraphChange={}),this.graphEvents.forEach(t=>{this.trackGraphChange[t]=e=>{this.graphChanges.push({event:t,payload:e}),this.autolayout&&this.triggerAutolayout()},e.on(t,this.trackGraphChange[t])}),this.graphRenameEvents.forEach(t=>{this.trackGraphChange[t]=(e,r)=>{this.graphChanges.push({event:t,payload:{from:e,to:r}})},e.on(t,this.trackGraphChange[t])}),this.graphPortEvents.forEach(t=>{this.trackGraphChange[t]=(e,r)=>{this.graphChanges.push({event:t,payload:{public:e,node:r.process,port:r.port,metadata:r.metadata}})},e.on(t,this.trackGraphChange[t])}),this.trackGraphChange.endTransaction=()=>{this.fire("changed",e),this.graphChanges.length&&(this.readonly||this.fire("graphChanges",this.graphChanges),this.graphChanges=[])},this.graph.on("endTransaction",this.trackGraphChange.endTransaction)},unsubscribeGraph(e){if(!this.trackGraphChange)return;this.graphEvents.concat(this.graphRenameEvents,this.graphPortEvents).forEach(t=>{this.trackGraphChange[t]&&(e.removeListener(t,this.trackGraphChange[t]),delete this.trackGraphChange[t])}),this.trackGraphChange.endTransaction&&(e.removeListener("endTransaction",this.trackGraphChange.endTransaction),delete this.trackGraphChange.endTransaction)},graphChanged(e,t){t&&t.removeListener&&this.unsubscribeGraph(t),this.appView&&Gr.a.unmountComponentAtNode(this.$.svgcontainer),this.graph&&(this.subscribeGraph(e),Et(this.$.svgcontainer).innerHTML="",this.appView=Gr.a.render(Ir.a.App({graph:this.graph,width:this.width,minZoom:this.minZoom,maxZoom:this.maxZoom,height:this.height,library:this.library,menus:this.menus,editable:this.editable,onEdgeSelection:this.onEdgeSelection.bind(this),onNodeSelection:this.onNodeSelection.bind(this),onPanScale:this.onPanScale.bind(this),getMenuDef:this.getMenuDef.bind(this),displaySelectionGroup:this.displaySelectionGroup,forceSelection:this.forceSelection,offsetY:this.offsetY,offsetX:this.offsetX,readonly:this.readonly}),this.$.svgcontainer),this.graphView=this.appView.refs.graph)},onPanScale(e,t,r){this.set("pan.0",e),this.set("pan.1",t),this.scale=r},onEdgeSelection(e,t,r){if(void 0!==e)if(r){const e=this.selectedEdges.indexOf(t),r=-1!==e,n=this.selectedEdges.slice();r?(n.splice(e,1),this.selectedEdges=n):(n.push(t),this.selectedEdges=n)}else this.selectedEdges=[t];else this.selectedEdges.length>0&&(this.selectedEdges=[])},onNodeSelection(e,t,r){if(void 0===e)this.selectedNodes.length>0&&(this.selectedNodes=[]);else if(r){const e=this.selectedNodes.indexOf(t);-1!==e?this.splice("selectedNodes",e,1):this.push("selectedNodes",t)}else this.selectedNodes=[t]},selectedNodesChanged(){this.set("selectedNodesHash",{});const e={};for(let t=0,r=this.selectedNodes.length;t<r;t+=1)e[this.selectedNodes[t].id]=!0;this.set("selectedNodesHash",e),this.fire("nodes",this.selectedNodes)},selectedNodesHashChanged(){this.graphView&&this.graphView.setSelectedNodes(this.selectedNodesHash)},errorNodesChanged(){this.graphView&&this.graphView.setErrorNodes(this.errorNodes)},selectedEdgesChanged(){this.graphView&&(this.graphView.setSelectedEdges(this.selectedEdges),this.fire("edges",this.selectedEdges))},animatedEdgesChanged(){this.graphView&&this.graphView.setAnimatedEdges(this.animatedEdges)},iconsChanged(){this.graphView&&Object.keys(this.icons).forEach(e=>{this.graphView.updateIcon(e,this.icons[e])})},triggerAutolayout(){const{graph:e}=this,t=this.graphView?this.graphView.portInfo:null;this.autolayouter.layout({graph:e,portInfo:t,direction:"RIGHT",options:{intCoordinates:!0,algorithm:"de.cau.cs.kieler.klay.layered",layoutHierarchy:!0,spacing:36,borderSpacing:20,edgeSpacingFactor:.2,inLayerSpacingFactor:2,nodePlace:"BRANDES_KOEPF",nodeLayering:"NETWORK_SIMPLEX",edgeRouting:"POLYLINE",crossMin:"LAYER_SWEEP",direction:"RIGHT"}})},applyAutolayout(e){this.graph.startTransaction("autolayout"),Ir.a.autolayout.applyToGraph(this.graph,e,{snap:this.snap}),this.graph.endTransaction("autolayout"),this.triggerFit()},triggerFit(){this.appView&&this.appView.triggerFit()},widthChanged(){this.appView&&this.appView.setState({width:this.width})},heightChanged(){this.appView&&this.appView.setState({height:this.height})},rerender(e){this.graphView&&this.graphView.markDirty(e)},addNode(e,t,r){this.graph&&this.graph.addNode(e,t,r)},getPan(){return this.appView?[this.appView.state.x,this.appView.state.y]:[0,0]},panChanged(){this.appView&&this.appView.setState({x:this.pan[0],y:this.pan[1]})},getScale(){return this.appView?this.appView.state.scale:1},displaySelectionGroupChanged(){this.graphView&&this.graphView.setState({displaySelectionGroup:this.displaySelectionGroup})},forceSelectionChanged(){this.graphView&&this.graphView.setState({forceSelection:this.forceSelection})},focusNode(e){this.appView.focusNode(e)},menusChanged(){this.appView&&this.appView.setProps({menus:this.menus})},readonlyChanged(){this.appView&&this.appView.setProps({readonly:this.readonly})},debounceLibraryRefesh(){this.debounceLibraryRefeshTimer&&clearTimeout(this.debounceLibraryRefeshTimer),this.debounceLibraryRefeshTimer=setTimeout(()=>{this.rerender({libraryDirty:!0})},200)},registerComponent(e,t){const r=e;if(!(this.library[e.name]&&t||(this.set("library."+e.name,r),this.debounceLibraryRefesh(),-1===e.name.indexOf("/")))){const t=Object(Br.unnamespace)(e.name);this.registerComponent({...e,name:t,unnamespaced:!0},!1)}},getComponent(e){return this.library[e]},toJSON(){return this.graph?this.graph.toJSON():{}},hostAttributes:{"touch-action":"none"}}),Gt({_template:wr.a`
    <the-graph id="graph" menus="{{menus}}" width="{{width}}" height="{{height}}" pan="{{pan}}" scale="{{scale}}" autolayout="{{autolayout}}" readonly="{{readonly}}" theme="{{theme}}" selected-nodes="{{selectedNodes}}" error-nodes="{{errorNodes}}" selected-edges="{{selectedEdges}}" animated-edges="{{animatedEdges}}" display-selection-group="{{displaySelectionGroup}}" force-selection="{{forceSelection}}" icons="[[icons]]">
    </the-graph>
`,is:"the-graph-editor",attached(){this.$.graph.getMenuDef=this.getMenuDef},properties:{icons:{type:Object,value:()=>({})},animatedEdges:{type:Array,value:()=>[],notify:!0},autolayout:{type:Boolean,value:!1,notify:!0},copyNodes:{type:Array,value:()=>[]},displaySelectionGroup:{type:Boolean,value:!0,notify:!0},errorNodes:{type:Object,value:()=>({}),notify:!0},forceSelection:{type:Boolean,value:!1,notify:!0},graph:{value:null,notify:!0,observer:"graphChanged"},grid:{type:Number,value:72,notify:!0},height:{type:Number,value:600,notify:!0,observer:"heightChanged"},menus:{value:null},notifyView:{observer:"notifyViewChanged"},onContextMenu:{notify:!0},pan:{observer:"panChanged"},plugins:{type:Object,value:()=>({})},readonly:{notify:!0},scale:{type:Number,value:1,observer:"scaleChanged"},selectedEdges:{type:Array,value:()=>[],notify:!0},selectedNodes:{type:Array,value:()=>[],notify:!0},snap:{type:Number,value:36,notify:!0},theme:{type:String,value:"dark",notify:!0,observer:"themeChanged"},width:{type:Number,value:800,notify:!0,observer:"widthChanged"}},ready(){this.pan=[0,0],this.menus=Ir.a.editor.getDefaultMenus(this)},detached(){Object.keys(this.plugins).forEach(e=>{this.plugins[e].unregister(this),delete this.plugins[e]})},addPlugin(e,t){this.set("plugins."+e,t),t.register(this)},addMenu(e,t){this.set("menus."+e,t)},addMenuCallback(e,t){this.menus[e]&&this.set(`menus.${e}.callback`,t)},addMenuAction(e,t,r){this.menus[e]||this.set("menus."+e,{});this.menus[e][t]=r},getMenuDef(e){if(e.type&&this.menus[e.type]){const t=this.menus[e.type];return t.callback?t.callback(t,e):t}return null},notifyViewChanged(){const e={scale:this.scale,pan:this.pan,width:this.width,height:this.height};this.fire("viewchanged",e)},panChanged(){this.notifyViewChanged()},scaleChanged(){this.notifyViewChanged()},widthChanged(){this.set("style.width",this.width+"px"),this.notifyViewChanged()},heightChanged(){this.set("style.height",this.height+"px"),this.notifyViewChanged()},themeChanged(){this.$.graph.theme=this.theme},graphChanged(){if(this.graph){if("function"!=typeof this.graph.addNode)throw new Error(".graph property of the-graph-editor must be a fbp-graph instance (since the-graph 0.8)");this.buildInitialLibrary(this.graph),this.set("$.graph.graph",this.graph)}else this.set("$.graph.graph",this.graph)},buildInitialLibrary(e){Ir.a.library.componentsFromGraph(e).forEach(e=>{this.registerComponent(e,!0)})},registerComponent(e,t){this.$.graph.registerComponent(e,t)},libraryRefresh(){this.$.graph.debounceLibraryRefesh()},rerender(){this.$.graph.rerender()},triggerAutolayout(){this.$.graph.triggerAutolayout()},triggerFit(){this.$.graph.triggerFit()},animateEdge(e){-1===this.animatedEdges.indexOf(e)&&this.push("animatedEdges",e)},unanimateEdge(e){const t=this.animatedEdges.indexOf(e);t>=0&&this.splice("animatedEdges",t,1)},addErrorNode(e){this.set("errorNodes."+e,!0),this.updateErrorNodes()},removeErrorNode(e){this.set("errorNodes."+e,!1),this.updateErrorNodes()},clearErrorNodes(){this.errorNodes={},this.updateErrorNodes()},updateErrorNodes(){this.$.graph.errorNodesChanged()},focusNode(e){this.$.graph.focusNode(e)},getComponent(e){return this.$.graph.getComponent(e)},getLibrary(){return this.$.graph.library},toJSON(){return this.graph.toJSON()},hostAttributes:{"touch-action":"none"}}),Gt({is:"noflo-library",properties:{editor:{value:null,notify:!0},graphs:{type:Array,value:()=>[]},project:{value:null},search:{value:null,observer:"searchChanged"}},addNode(e){const t=e.name;let r=60466176;r=Math.floor(Math.random()*r);const n=`${t}_${r.toString(36)}`,o=this.editor.$.graph.getPan(),i=this.editor.$.graph.getScale(),{graph:s}=this.editor;s.startTransaction("addnode");const a=t.split("/");s.addNode(n,t,{label:a[a.length-1],x:Math.floor((334-o[0])/i),y:Math.floor((100-o[1])/i)}),e.inports.forEach(e=>{const t=e.default;void 0!==t&&s.addInitial(t,n,e.name)}),s.endTransaction("addnode")},searchChanged(){if("string"!=typeof this.search)return;if(!this.editor)return;const e=this.editor.getLibrary();if(!e)return;const t=this.search.toLowerCase(),r=Object.keys(e).map(e=>this.editor.getComponent(e)).filter(e=>!e.unnamespaced&&(""===t||(-1!==e.name.toLowerCase().indexOf(t)||"string"==typeof e.description&&-1!==e.description.toLowerCase().indexOf(t)))).filter(e=>{if(!e.subgraph)return!0;const t=e.name.split("/");if(t[0]===this.project.id||t[0]===this.project.namespace)for(let e=0;e<this.graphs.length;e+=1)if(this.graphs[e].name===t[1]||this.graphs[e].properties.id===t[1])return!1;return!0});window.setTimeout(()=>{const e=this.addNode.bind(this);this.fire("result",r.map(t=>({label:t.name,icon:t.icon||"cog",description:t.description,action(){e(t)}})))},0)}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Published <span>{{direction}}</span> port <span>{{publicport}}</span></h1>
      <form>
        <label>
          Port name
          <input type="text" value="{{name::input}}" required="">
        </label>
        <div class="toolbar">
          <button on-click="send" class\$="{{_computeClass(canSend)}}">Rename</button>
          <a on-click="close">Cancel</a>
        </div>
      </form>
    </div>
`,is:"noflo-exported-inspector",properties:{canSend:{type:Boolean,value:!1},direction:{type:String,value:"input",notify:!0},graph:{value:null,notify:!0},name:{type:String,value:"",observer:"nameChanged"},privateport:{value:null,notify:!0},publicport:{type:String,value:"",notify:!0}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.name=this.publicport},detached(){Et(document.getElementById("container")).classList.remove("blur")},nameChanged(){this.name&&("input"!==this.direction||"start"!==this.name&&"graph"!==this.name)?this.canSend=!0:this.canSend=!1},send(e){if(e&&e.preventDefault(),this.name){if("input"===this.direction){if("start"===this.name||"graph"===this.name)return;this.graph.renameInport(this.publicport,this.name)}else this.graph.renameOutport(this.publicport,this.name);this.close()}},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}});class Ur extends cr.a{static get template(){return cr.b`
    <style>
    :host {
      display: block;
    }
    ul.icons {
      padding: 0px;
      margin: 0px;
      list-style: none;
    }
    ul.icons li {
      display: inline-block;
      width: 18px;
      height: 18px;
      font-size: 18px;
      padding: 0px;
      margin: 0px;
      text-align: center;
      overflow: hidden;
      background-color: var(--noflo-ui-text);
      color: var(--noflo-ui-background);
      cursor: pointer;
      transition: background-color 0.3s ease-in-out;
      border-radius: 2px;
      margin-right: 2px
      margin-bottom: 2px;
    }
    ul.icons li.selected,
    ul.icons li:hover {
      background-color: hsl(190, 100%, 30%);
      color: white;
    }
    </style>
    <ul class="icons">
      <template is="dom-repeat" items="{{icons}}" as="icon">
        <li data-id\$="[[icon]]" class\$="[[_selectedClass(icon, selected)]]" on-click="selectIcon">
          <noflo-icon icon="[[icon]]" title="[[icon]]"></noflo-icon>
        </li>
      </template>
    </ul>
`}static get is(){return"noflo-icon-selector"}static get properties(){return{icons:{type:Array,value:()=>[]},selected:{type:String,notify:!0}}}constructor(){super(),this.icons=Object.keys(Or.a.getIcons())}selectIcon(e){this.selected=e.currentTarget.getAttribute("data-id")}_selectedClass(e,t){return e===t?"selected":""}}customElements.define(Ur.is,Ur),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Create new graph</h1>
      <form>
        <div class="modal-content">
        <label>
          Graph name
          <input type="text" value="{{name::input}}" placeholder="MyCoolGraph" required="">
        </label>
        <label>
          Graph type
          <select name="type" value="{{mainGraph::input}}">
            <option value="true" selected\$="[[_isSelectedMainGraph('true', mainGraph)]]">Main graph</option>
            <option value="false" selected\$="[[_isSelectedMainGraph('false', mainGraph)]]">Subgraph</option>
          </select>
        </label>
        <label>
          Graph description
          <input type="text" value="{{description::input}}" placeholder="Do something interesting">
        </label>
        <label>
          Runtime
          <noflo-type-selector type="{{type}}" runtimes="{{runtimes}}"></noflo-type-selector>
        </label>
        <label>
          Icon
          <noflo-icon-selector selected="{{icon}}"></noflo-icon-selector>
        </label>
        </div>
        <div class="toolbar">
          <button on-click="send" class\$="{{_computeClass(canSend)}}">Create</button>
          <a on-click="close">Cancel</a>
        </div>
      </form></div>
`,is:"noflo-new-graph",properties:{canSend:{type:Boolean,value:!1},name:{type:String,value:"",observer:"nameChanged"},description:{type:String,value:""},mainGraph:{type:String,value:"true"},project:{type:Object,value:()=>({}),notify:!0},runtimes:{type:Array,value:()=>[],notify:!0},type:{type:String,value:"noflo-browser"},icon:{type:String,value:"cog",notify:!0}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},nameChanged(){let e=[];if(this.project){if(!this.project.graphs||!this.project.components)return;e=this.project.graphs.filter(e=>e.name===this.name),e=e.concat(this.project.components.filter(e=>e.name===this.name))}this.name&&this.project&&!e.length?this.canSend=!0:this.canSend=!1},send(e){if(e&&e.preventDefault(),!this.name)return;"function"==typeof ga&&ga("send","event","button","click","newGraph");const t=new _r.a.Graph(this.name);t.setProperties({description:this.description,project:this.project.id,id:`${this.project.id}/${this.name}`,icon:this.icon,main:"true"===this.mainGraph,environment:{type:this.type}}),this.fire("new",t),this.close()},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},_isSelectedMainGraph:(e,t)=>e===t,tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>
        <template is="dom-if" if="{{group}}">
        <span>{{group}}</span>
        </template>
        <template is="dom-if" if="{{!group}}">
        New
        </template>
        group containing <span>{{nodes.length}}</span> nodes
      </h1>
      <form>
        <label>
          Group name
          <input type="text" value="{{name::input}}" placeholder="processing" required="">
        </label>
        <label>
          Group description
          <input type="text" value="{{description::input}}" placeholder="The nodes that process things" required="">
        </label>
        <div class="toolbar">
          <button on-click="send">
            <template is="dom-if" if="{{group}}">
            Rename
            </template>
            <template is="dom-if" if="{{!group}}">
            Create
            </template>
          </button>
          <a on-click="close">Cancel</a>
        </div>
      </form>
    </div>
`,is:"noflo-group-inspector",properties:{description:{type:String,value:""},graph:{value:null,notify:!0},group:{type:String,value:"",notify:!0},groupdescription:{type:String,value:"",notify:!0},name:{type:String,value:""},nodes:{type:Array,value:()=>[],notify:!0}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.name=this.group,this.description=this.groupdescription},detached(){Et(document.getElementById("container")).classList.remove("blur")},send(e){e&&e.preventDefault(),this.name&&(this.group?(this.name!==this.group&&this.graph.renameGroup(this.group,this.name),this.description!==this.groupdescription&&this.graph.setGroupMetadata(this.group,{description:this.description})):this.graph.addGroup(this.name,this.nodes,{description:this.description}),this.close())},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"}}),Gt({is:"the-card-stack",properties:{type:{notify:!0}},enteredView(){this.observeChanges()},leftView(){this.observer&&this.observer.disconnect()},observeChanges(){this.observer=new MutationObserver(this.updateVisibility.bind(this)),this.observer.observe(this,{subtree:!1,childList:!0,attributes:!1,characterData:!1})},updateVisibility(){0===this.childElementCount&&Et(Et(this).parentNode).removeChild(this)}}),Gt({_template:wr.a`
    <slot name="header"></slot>
    <slot></slot>
`,is:"the-card",properties:{type:{notify:!0}},enteredView(){this.fire("show",this)},leftView(){this.fire("hide",this)},addTo(e,t){const r=e.getElementsByTagName("the-card-stack");for(let e=0;e<r.length;e+=1)if(r[e].type===this.type)return void Et(r[e]).appendChild(this);const n=document.createElement("the-card-stack");n.type=this.type,Et(n).appendChild(this),t&&e.childElementCount>0?Et(e).insertBefore(n,Et(e).firstChild):Et(e).appendChild(n)}}),Gt({_template:wr.a`
    <style>
      :host {
        position: fixed;
        overflow: hidden;
      }
    </style>
    <slot name="header"></slot>
    <slot></slot>
    <slot name="footer"></slot>
`,is:"the-panel",properties:{automatic:{type:Boolean,value:!1,notify:!0,observer:"automaticChanged"},edge:{type:String,value:"left",notify:!0,observer:"edgeChanged"},handle:{type:Number,value:0,notify:!0,observer:"handleChanged"},open:{type:Boolean,value:!1,notify:!0,observer:"openChanged"},size:{type:Number,value:200,notify:!0,observer:"sizeChanged"}},toggleOpen(e){this.open=e,this.updateVisibility()},enteredView(){this.cleanUpLocation(),this.automaticChanged(),this.updateVisibility()},leftView(){this.unobserve()},edgeChanged(){this.updateVisibility()},sizeChanged(){this.updateVisibility()},handleChanged(){this.updateVisibility()},openChanged(){this.updateVisibility()},automaticChanged(){this.automatic?this.observeChanges():this.unobserve()},getHeader(){return Et(this).querySelector("header")},getMain(){return Et(this).querySelector("main")},getFooter(){return Et(this).querySelector("footer")},handleClicked(e){this.automatic||e.target===this&&(this.open?this.open=!1:this.open=!0)},observeChanges(){this.observer=new MutationObserver(this.handleMutations.bind(this)),this.observer.observe(this.getMain(),{subtree:!1,childList:!0,attributes:!1,characterData:!1})},unobserve(){this.observer&&(this.observer.disconnect(),this.observer=null)},handleMutations(){0===this.getMain().childElementCount?this.open=!1:this.open=!0},getPositionDimension(){return this.edge},getSizeDimensions(){switch(this.edge){case"left":case"right":return["width","height"];case"top":case"bottom":return["height","width"];default:throw new Error("Unknown edge "+this.edge)}},cleanUpLocation(){this.set("style.left",""),this.set("style.right",""),this.set("style.top",""),this.set("style.bottom","")},updateVisibility(){const e=this.getSizeDimensions();this.set("style."+e[1],"100%"),this.set("style."+e[0],this.size+"px");let t=0;this.open||(t=-1*(this.size-this.handle)),this.set("style."+this.getPositionDimension(),t+"px")},listeners:{click:"handleClicked"}}),Gt({_template:wr.a`
    <style>
      :host {
        display: block;
      }
      #contextsection {
        position: fixed;
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        left: 36px;
        top: 72px;
        width: calc(72px * 4);
        max-height: calc(100% - 72px);
        box-sizing: border-box;
        display: block;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        overflow-x: visible;
      }
      the-panel {
        background-color: var(--noflo-ui-background) !important;
        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;
        position: fixed;
        border: 0px solid var(--noflo-ui-border);
        box-sizing: border-box;
        padding-top: 72px;
        top: 0px;
        border-left-width: 1px;
        height: 100vh;
        padding-left: 36px;
        z-index: 3;
      }
      the-panel:before {
        font-family: FontAwesomeSVG;
        content: '\\f188';
        color: var(--noflo-ui-border-highlight);
        position: absolute;
        text-align: center;
        left: 0px;
        width: 36px;
        top: 50%;
        top: calc(50% - 7px);
        font-size: 17px;
        opacity: 0.25;
        transition: opacity 0.3s ease-in-out;
      }
      the-panel:not([open]):before {
        opacity: 1;
        cursor: w-resize;
      }
      the-panel footer {
        position: absolute;
        bottom: 0px;
        right: 0px;
      }
      the-panel#fixed header {
        display: flex;
        justify-content: space-between;
        width: calc(72px * 4);
        padding-right: 36px;
        box-sizing: border-box;
      }
      the-panel#fixed header ul.toolbar {
        margin: 0px;
        padding: 0px;
      }
      the-panel#fixed header ul.toolbar li {
        width: calc(100%/2);
        height: 36px;
        text-align: center;
        margin: 0px;
        margin-right: 0px;
        list-style: none;
      }
      the-panel#fixed header ul.toolbar button {
        width: 36px;
        height: 36px;
        font-size: 10px;
        background-color: transparent;
        border: none;
        color: var(--noflo-ui-text);
        text-align: center;
        cursor: pointer;
      }
      the-panel#fixed header h1 {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 15px;
        font-weight: normal;
        line-height: 36px;
        width: 100%;
        color: var(--noflo-ui-text);
        padding: 0px;
        margin: 0px;
      }
      the-panel#fixed main {
        height: calc(100% - 72px);
        overflow-y: scroll;
        overflow-x: hidden;
        width: calc(72px * 4);
      }
      the-panel#fixed main p {
        font-size: 10px;
        line-height: 14px;
        color: var(--noflo-ui-text-highlight);
      }
      the-panel#fixed main ul {
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        margin-top: 0px;
        padding-top: 0px;
        margin-left: 0px;
        padding-left: 0px;
        width: 252px;
      }
      the-panel#fixed main li {
        font-size: 10px;
        line-height: 14px;
        margin-left: 0px;
        padding-left: 0px;
        margin-bottom: 0px;
        color: var(--noflo-ui-text-highlight);
        margin-bottom: 4px;
        padding-bottom: 2px;
        border-bottom: 1px hsla(190, 100%, 30%, 0.4) solid;
        list-style: none;
      }
      the-panel#fixed main li.error,
      the-panel#fixed main li.processerror,
      the-panel#fixed main li.networkerror,
      the-panel#fixed main li.protocolerror {
        color: hsl(  0,  98%, 46%);
      }
      the-panel#fixed main li pre {
        color: rgba(179, 222, 230, 0.5);
        font-size: 8px;
      }
      the-panel#fixed main li.output {
        color: var(--noflo-ui-text);
      }
    </style>
    <section id="contextsection"></section>
    <the-panel id="fixed" edge="right" size="324" handle="36">
      <header slot="header">
        <h1>Runtime events</h1>
        <template is="dom-if" if="[[events.length]]">
          <ul class="toolbar">
            <li>
              <button id="clear" on-click="clearEvents" class="blue-button" title="Clear Event Log">
                <noflo-icon icon="ban"></noflo-icon>
              </button>
             </li>
          </ul>
        </template>
      </header>
      <main id="fixedmain">
        <template is="dom-if" if="[[runtime]]">
          <ul>
          <template is="dom-repeat" items="[[events]]" as="event">
            <li class\$="{{ event.type }}">
              <template is="dom-if" if="[[_ifEventIsPlain(event)]]">
                {{ event.type }}
              </template>
              <template is="dom-if" if="[[_ifEventIsProcessError(event)]]">
                {{ event.payload.error }}
              </template>
              <template is="dom-if" if="[[_ifEventIsError(event)]]">
                {{ event.payload.message }}
                <template is="dom-if" if="[[_ifEventHasStack(event)]]"><pre>{{ event.payload.stack }}</pre></template>
              </template>
              <template is="dom-if" if="[[_ifEventIsOutput(event)]]">
                {{ event.payload.message }}
              </template>
              <template is="dom-if" if="[[_ifEventIsStopStart(event)]]">
                {{ event.payload.graph }} {{ event.type }}
              </template>
            </li>
          </template>
          </ul>
        </template>
        <template is="dom-if" if="[[!runtime]]">
          <p>Not connected to a runtime.</p>
        </template>
      </main>
      <footer slot="footer"></footer>
    </the-panel>
`,is:"noflo-context",properties:{component:{type:String,value:"",notify:!0,observer:"componentChanged"},edge:{notify:!0},edges:{type:Array,value:()=>[],observer:"edgesChanged"},events:{type:Array,value:()=>[],observer:"eventsChanged"},editor:{value:null,observer:"editorChanged"},errors:{type:Array,value:()=>[]},graphs:{type:Array,value:()=>[],notify:!0},help:{value:null},node:{notify:!0},nodes:{type:Array,value:()=>[]},project:{value:null,notify:!0},readonly:{notify:!0},runtime:{value:null},runtimes:{type:Array,value:()=>[]},search:{value:null,notify:!0}},attached(){this.contextBar=this.$.contextsection,window.addEventListener("keyup",e=>{27===e.keyCode&&this.clearSelection()}),document.addEventListener("touchstart",()=>{}),this.help=Et(document).querySelector("noflo-help")},clearSelection(){let e,t;for(;this.edges.length;)e=this.pop("edges"),e.selected=!1;for(;this.nodes.length;)t=this.pop("nodes"),t.selected=!1},getpanel(){this.fire("toolpanel",this.$.fixed),this.fire("contextpanel",this.$.contextsection)},editorChanged(){if(!this.editor)return;const e=e=>this.readonly?{}:e;this.editor.addMenuCallback("main",e),this.editor.addMenuCallback("edge",e),this.editor.addMenuCallback("node",(t,r)=>{const n=e(t);return r.item.component&&this.canGetSource(r.item.component)?(n.n4={icon:"arrow-circle-o-up",iconLabel:"open",action:(e,t,r)=>{"function"==typeof ga&&ga("send","event","menu","click","openNode");let n=window.location.href.split("#")[1]||"";if(e===this.graphs[0]&&e.properties.id){const t=encodeURIComponent(e.properties.id);-1===n.indexOf(t)&&(n+="/"+t)}window.location.hash=`${n}/${encodeURIComponent(r.id)}`}},n):n}),this.editor.addMenuCallback("nodeInport",e),this.editor.addMenuCallback("nodeOutport",e),this.editor.addMenuCallback("graphInport",(t,r)=>this.readonly?e(t):{...t,n4:{icon:"pencil-square-o",iconLabel:"rename",action:(e,t,r)=>{const n=document.createElement("noflo-exported-inspector");n.graph=this.graphs[this.graphs.length-1],n.publicport=t,n.privateport=r,n.direction="input",Et(document.body).appendChild(n)}}}),this.editor.addMenuCallback("graphOutport",(t,r)=>this.readonly?e(t):{...t,n4:{icon:"pencil-square-o",iconLabel:"rename",action:(e,t,r)=>{const n=document.createElement("noflo-exported-inspector");n.graph=this.graphs[this.graphs.length-1],n.publicport=t,n.privateport=r,n.direction="output",Et(document.body).appendChild(n)}}}),this.editor.addMenuCallback("group",e),this.editor.addMenuCallback("selection",(t,r)=>this.readonly?e(t):{...t,e4:{icon:"sitemap",iconLabel:"graph",action:this.subgraph.bind(this)},w4:{icon:"square-o",iconLabel:"group",action:this.group.bind(this)}})},edgesChanged(){this.fire("edges",this.edges)},eventsChanged(){this.$.fixedmain.scrollTop=this.$.fixedmain.scrollHeight},componentChanged(){this.component&&"object"==typeof this.component&&!this.component.name&&(this.component=null),this.component&&"function"==typeof ga&&ga("send","event","url","navigation","openComponent"),this.fire("component",this.component)},group(e,t,r){if(this.readonly)return;"function"==typeof ga&&ga("send","event","menu","click","createGroup");let n="",o="";const i=r.nodes;i.sort(),e.groups.forEach(e=>{const t=JSON.parse(JSON.stringify(e.nodes));t.sort(),t.join(",")===i.join(",")&&(n=e.name,o=e.metadata.description)});const s=document.createElement("noflo-group-inspector");s.group=n,s.groupdescription=o,s.nodes=i,s.graph=e,Et(document.body).appendChild(s)},subgraph(e,t,r){if(!this.project||this.readonly)return;"function"==typeof ga&&ga("send","event","menu","click","createSubgraph");const n=document.createElement("noflo-new-graph");n.runtimes=this.runtimes,n.type=e.properties.environment.type,n.project=this.project,Et(document.body).appendChild(n),n.addEventListener("new",t=>{const n=t.detail;n.startTransaction("newsubgraph"),n.setProperties({id:`${e.properties.project}/${n.name.replace(" ","_")}`,project:e.properties.project,main:!1}),r.nodes.forEach(t=>{const r=e.getNode(t);n.addNode(r.id,r.component,r.metadata)}),e.edges.forEach(e=>{n.getNode(e.from.node)&&n.getNode(e.to.node)&&n.addEdge(e.from.node,e.from.port,e.to.node,e.to.port,e.metadata)}),e.initializers.forEach(e=>{n.getNode(e.to.node)&&n.addInitial(e.from.data,e.to.node,e.to.port,e.metadata)});const o=e.getNode(r.nodes[0]).metadata;e.startTransaction("subgraph"),e.addNode(n.properties.id,`${this.project.namespace}/${n.name}`,{label:n.name,x:o.x,y:o.y});const i=(e,t)=>`${e}.${t}`.replace(/(.*)\/(.*)(_.*)\.(.*)/,"$2_$4").toLowerCase();e.edges.forEach(t=>{if(!n.getNode(t.from.node)&&n.getNode(t.to.node)){const r=i(t.to.node,t.to.port);n.addInport(r,t.to.node,t.to.port),e.addEdge(t.from.node,t.from.port,n.properties.id,r)}if(n.getNode(t.from.node)&&!n.getNode(t.to.node)){const r=i(t.from.node,t.from.port);n.addOutport(r,t.from.node,t.from.port),e.addEdge(n.properties.id,r,t.to.node,t.to.port)}}),r.nodes.forEach(t=>{e.removeNode(t)}),n.endTransaction("newsubgraph"),this.fire("newgraph",n),setTimeout(()=>{e.endTransaction("subgraph")},5),this.editor&&(this.editor.selectedNodes=[])})},setHelp(){this.help&&(this.set("help.headline","NoFlo Development Environment graph editor"),this.set("help.text","Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner."))},showHelp(e){this.help&&(this.help.show("NoFlo Development Environment graph editor","Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner."),e.once("addNode",()=>{this.help.close()}))},libraryMatch(e,t){const r=t.namespace||t.id;return e===r||e===r.replace("noflo-")},canGetSource(e){const t=e.split("/");if(t.length>1&&this.project&&this.libraryMatch(t.shift(),this.project)){for(let e=0;e<this.project.graphs.length;e+=1){if(this.project.graphs[e].name===t[0])return!0;if(this.project.graphs[e].properties.id===t[0])return!0}for(let e=0;e<this.project.components.length;e+=1)if(this.project.components[e].name===t[0])return!0}return!(!this.runtime.definition||!this.runtime.definition.capabilities)&&(-1!==this.runtime.definition.capabilities.indexOf("component:getsource")&&this.runtime.status.online)},clearEvents(){this.fire("clear:runtimeevents",{all:!0})},_ifEventIsPlain:e=>-1===["stopped","started","output","error","processerror","networkerror","protocolerror"].indexOf(e.type),_ifEventIsProcessError:e=>-1!==["processerror"].indexOf(e.type),_ifEventIsError:e=>-1!==["error","networkerror","protocolerror"].indexOf(e.type),_ifEventHasStack:e=>-1!==["error","networkerror"].indexOf(e.type)&&e.payload.stack&&e.payload.stack.length&&-1===e.payload.message.indexOf("Runtime sent invalid"),_ifEventIsOutput:e=>"output"===e.type&&e.payload.message,_ifEventIsStopStart:e=>-1!==["stopped","started"].indexOf(e.type)&&e.payload.graph});var qr=r(5),$r=r.n(qr);var Hr=function(e){var t={passed:0,failed:0,skipped:0,total:0};return e.suites.forEach((function(e){e.cases.forEach((function(r){t.total+=1,e.skip||r.skip?t.skipped+=1:(!0===r.passed&&(t.passed+=1),!1===r.passed&&(t.failed+=1))}))})),$r.a.createElement("ul",{className:"test-status"},$r.a.createElement("li",{className:"pass"},t.passed),$r.a.createElement("li",{className:"fail"},t.failed),$r.a.createElement("li",{className:"skip"},t.skipped),$r.a.createElement("li",{className:"total"},t.total))},Vr=r(19),Wr=r.n(Vr);function Jr(e,t){return e.skip||t.skip?"skip":!0===e.passed?"pass":!1===e.passed?"fail":"pending"}Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      #runtimeLink {
        width: 100%;
      }
      #qrcode {
        width: 300px;
        height: 300px;
      }
      .info {
        clear: both;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Launch noflo-browser device</h1>
      <label>
        <span>Base application</span>
        <input type="text" value="{{baseApp::input}}" on-change="generateRuntimeInfo">
      </label>
      <div class="info">
        <div><a id="runtimeLink" href\$="{{runtimeUrl}}">Launch</a></div>
        <div><img id="qrcode" src="{{qrCodeUrl}}"></div>
      </div>
      <div class="toolbar">
        <button on-click="close">Cancel</button>
        <button on-click="connectRuntime">Connect</button>
      </div>
    </div>
`,is:"noflo-runtime-browserdebug",properties:{baseApp:{type:String,value:"https://noflojs.org/noflo-browser-app/main.html"},graph:{notify:!0},qrCodeUrl:{type:String,value:""},runtime:{type:Object,value:()=>({})},runtimeUrl:{type:String,value:""}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.generateRuntimeInfo()},detached(){Et(document.getElementById("container")).classList.remove("blur")},generateRuntimeInfo(){const e=Object(Pr.a)(),t="https://api.flowhub.io#"+e,r="?fbp_noload=true&fbp_protocol=webrtc&fbp_address="+encodeURIComponent(t),n={id:e,seenHoursAgo:1,user:"3f3a8187-0931-4611-8963-239c0dff1931",secret:"my-super-secret",label:"noflo-browser live debug",description:"On device debugging project",graph:this.graph.properties.id,protocol:"webrtc",type:"noflo-browser",address:t};this.runtime=n;const o=this.baseApp+r;this.qrCodeUrl="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+encodeURIComponent(o),this.runtimeUrl=o},bgClick(e){e.stopPropagation()},connectRuntime(){this.fire("runtime",this.runtime),this.close()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      #runtimeLink {
        width: 100%;
      }
      #qrcode {
        width: 300px;
        height: 300px;
      }
      .info {
        clear: both;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Open noflo-browser runtime in preview area</h1>
      <label>
        <span>Base application</span>
        <input type="url" value="{{runtimeUrl::input}}" on-change="generateRuntimeInfo">
      </label>
      <div class="toolbar">
        <button on-click="close">Cancel</button>
        <button on-click="connectRuntime">Connect</button>
      </div>
    </div>
`,is:"noflo-runtime-customiframe",properties:{graph:{notify:!0},runtime:{type:Object,value:()=>({})},runtimeUrl:{type:String,value:"https://noflojs.org/noflo-browser/everything.html"}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.generateRuntimeInfo()},detached(){Et(document.getElementById("container")).classList.remove("blur")},generateRuntimeInfo(){const e=Object(Pr.a)(),t=this.runtimeUrl+"?fbp_noload=true&fbp_protocol=iframe",r={id:e,seenHoursAgo:1,user:"3f3a8187-0931-4611-8963-239c0dff1932",label:"noflo-browser iframe",description:"running in iframe",graph:this.graph.properties.id,protocol:"iframe",type:"noflo-browser",address:t};this.runtime=r},bgClick(e){e.stopPropagation()},connectRuntime(){this.fire("runtime",this.runtime),this.close()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      ul.runtimes {
        padding: 0px;
        margin-left: -9px;
        margin-right: -9px;
        list-style: none;
        margin-top: 18px;
        margin-bottom: 18px;
      }
      ul.runtimes li {
        width: 274px;
        height: 105px;
        overflow: hidden;
        display: inline-block;
        text-align: center;
        background-color: hsl(192, 25%, 60%);
        color: white;
        transition: background-color 0.3s ease-in-out;
        border-radius: 3px;
        margin-right: 9px;
        margin-left: 9px;
        margin-bottom: 18px;
        position: relative;
        cursor: pointer;
      }
      ul.runtimes li.selected,
      ul.runtimes li:hover {
        background-color: hsl(190, 100%, 30%);
        color: white;
        cursor: default;
      }
      ul.runtimes li h2 {
        position: absolute;
        top: 36px;
        line-height: 36px;
        width: 180px;
        text-transform: none;
        font-size: 10px;
        text-align: left;
        white-space: nowrap;
        left: 18px;
        padding: 0px;
        margin: 0px;
        text-overflow: ellipsis;
        overflow: hidden;
      }
      ul.runtimes li p {
        position: absolute;
        top: 53px;
        left: 18px;
        width: 180px;
        text-transform: uppercase;
        font-size: 8px;
        text-align: left;
        max-height: 36px;
        overflow: hidden;
        color: hsl(189, 50%, 80%);
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Select runtime for <span>{{graph.name}}</span></h1>
      <template is="dom-if" if="{{available.length}}">
        <ul class="runtimes modal-content">
          <template is="dom-repeat" items="{{available}}" as="runtime">
          <li on-click="selectRuntime" data-id\$="{{runtime.id}}" class\$="{{runtime.type}}">
            <h2>{{runtime.label}}</h2>
            <p><span>{{runtime.address}}</span>.<br>Seen <span>{{runtime.seenHoursAgo}}</span>h ago</p>
          </li>
          </template>
        </ul>
      </template>
      <template is="dom-if" if="{{!available.length}}">
        <p>No compatible runtimes available.</p>
      </template>
      <div class="toolbar">
        <button on-click="close">Cancel</button>
      </div>
    </div>
`,is:"noflo-runtime-selector",properties:{available:{type:Array,value:()=>[]},graph:{notify:!0},component:{notify:!0}},attached(){let e;Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.component&&(e=Wr.a.getComponentType(this.component)),this.graph&&(e=Wr.a.getGraphType(this.graph)),e||(e="all");const t={id:"new-browser-runtime",label:"Launch new runtime",address:"WebRTC"},r={id:"custom-iframe-address",label:"Custom iframe URL",address:"myapp.html"},n={id:"imgflo-heroku-new",label:"New imgflo app on Heroku",address:"myapp.herokuapps.com"};"noflo-browser"===e&&(this.push("available",t),this.push("available",r)),"imgflo"===e&&this.push("available",n),this.runtimes.forEach(e=>{this.push("available",e)}),this.available.forEach(this.checkRuntimeSeen.bind(this))},detached(){Et(document.getElementById("container")).classList.remove("blur")},checkRuntimeSeen(e){if(e.seen||(e.seen=Date.now()),e.seenHoursAgo=Math.floor((Date.now()-new Date(e.seen).getTime())/36e5),e.seenHoursAgo/24>31){const t=this.available.indexOf(e);this.splice("available",t,1)}},selectRuntime(e){const t=e.currentTarget.getAttribute("data-id");return"new-browser-runtime"===t?(this.close(),void this.debugOnDevice()):"custom-iframe-address"===t?(this.close(),void this.addIframeRuntime()):("imgflo-heroku-new"===t&&(this.close(),this.deployHeroku("https://github.com/jonnor/imgflo")),void this.runtimes.forEach(e=>{e.id===t&&(this.fire("runtime",e),this.close())}))},debugOnDevice(){this.debugOnDeviceModal=document.createElement("noflo-runtime-browserdebug"),this.set("debugOnDeviceModal.graph",this.graph),this.debugOnDeviceModal.addEventListener("runtime",e=>{const t=e.detail;this.fire("runtime",t)}),Et(document.body).appendChild(this.debugOnDeviceModal)},addIframeRuntime(){this.addIframeModal=document.createElement("noflo-runtime-customiframe"),this.set("addIframeModal.graph",this.graph),this.addIframeModal.addEventListener("runtime",e=>{const t=e.detail;this.fire("runtime",t)}),Et(document.body).appendChild(this.addIframeModal)},deployHeroku(e){document.location.href="https://dashboard.heroku.com/new?template="+encodeURIComponent(e)},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"}});var Xr=function(e){return $r.a.createElement("ul",null,e.suites.map((function(e){return $r.a.createElement("li",{className:"testsuite"},$r.a.createElement("div",{className:"suite-header"},$r.a.createElement("label",{className:"name"},e.name),$r.a.createElement("label",{className:"topic"},e.topic)),$r.a.createElement("ul",null,e.cases.map((function(t){return $r.a.createElement("li",{className:Jr(t,e)},$r.a.createElement("div",{className:"testcase"},$r.a.createElement("label",{className:"name"},t.name),$r.a.createElement("label",{className:"assertion"},t.assertion),$r.a.createElement("label",{className:"error"},t.error||"")))}))))})))};Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      #testlisting ul {
        padding: 0px;
      }
      li .suite-header label.topic {
        font-weight: bold;
      }
      li .suite-header label {
        display: inline !important;
        padding-right: 1em;
        color: var(--noflo-ui-text-highlight);
      }
      li.testsuite {
        margin-bottom: 1em;
      }
      li {
        list-style: none;
      }
      li.testsuite li {
        margin-left: 28px;
      }
      li label {
        display: inline;
        margin-top: 7px !important;
      }
      li label.assertion {
        padding-left: 8px;
      }
      li label.error {
        margin-bottom: 8px;
        font-style: italic;
        display: block;
      }
      li.pass {
        color: hsl(135, 98%, 46%);
        list-style: disc;
      }
      li.fail {
        color: hsl(0, 98%, 46%);
        list-style: square;
      }
      li.skip {
        color: hsl( 60, 98%, 46%);
        list-style: disc;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <div class="modal-content">
        <div id="testlisting"></div>
      </div>
      <div class="toolbar">
        <button on-click="close">Close</button>
      </div>
    </div>
`,is:"noflo-runtime-testdetails",properties:{suites:{type:Array,value:()=>[]}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content");const e=this.shadowRoot.getElementById("testlisting");Gr.a.render(Xr({suites:this.suites}),e)},detached(){Et(document.getElementById("container")).classList.remove("blur")},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"}}),Gt({_template:wr.a`
    <style>
      :host {
        display: block;
        padding-left: 18px;
        box-sizing: border-box;
        color: var(--noflo-ui-text);
        background-color: var(--noflo-ui-background) !important;
        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);
        background-size: calc(100% - 1px);
        background-position: 0px;
        border-bottom: 1px var(--noflo-ui-border) solid;
      }

      #runtime_icon {
        position: absolute;
        right: 8px;
        top: 0px;
        font-size: 72px;
        color: hsla(185, 100%, 75%, 0.1);
      }

      #teststatus {
        position: absolute;
        right: 0px;
        z-index: 1;
        width: 100px;
      }
      #teststatus ul {
        margin: 0px;
        padding: 0px;
      }
      #teststatus ul li {
        display: inline;
        padding-left: 8px;
        line-height: 36px;
      }
      #teststatus ul li.pass {
        color: hsl(135, 98%, 46%);
      }
      #teststatus ul li.fail {
        color: hsl(0, 98%, 46%);
      }
      #teststatus ul li.skip {
        color: hsl( 60, 98%, 46%);
      }

      h2 {
        font-size: 14px;
        width: 216px;
        font-weight: normal;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        line-height: 36px;
        margin: 0px;
        padding: 0px;
      }

      button {
        width: 36px;
        height: 36px;
        font-size: 10px;
        background-color: transparent;
        border: none;
        color: var(--noflo-ui-text-highlight);
        text-align: center;
        cursor: pointer;
      }

      #address h2 {
        position: absolute;
        left: 54px;
        width: 180px;
        top: 0px;
        color: var(--noflo-ui-text);
      }

      #address, #address button {
        color: #e70215;
      }
      .online#address, .online#address button {
        color: #01d159;
      }
      #address button.clear {
        position: absolute;
        right: 0px;
        color: var(--noflo-ui-text-highlight);
      }

      #runcontrol h2 {
        position: absolute;
        left: 54px;
        top: 36px;
      }
      #runcontrol button {
        color: var(--noflo-ui-text-highlight);
      }

      #select {
        text-align: center;
      }
      #select button.select {
        width: auto;
        height: auto;
        background-color: hsl(190, 90%, 45%);
        color: hsla(0, 0%, 0%, 0.98);
        border: none;
        font-size: 13px;
        border-radius: 3px;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        height: 36px;
        padding-left: 36px;
        padding-right: 36px;
        margin: 0px;
        margin-top: 18px;
      }
    </style>
    <template is="dom-if" if="{{runtime}}">
      <noflo-icon id="runtime_icon" icon="{{icon}}"></noflo-icon>
      <div id="address" class\$="{{_computeOnlineClass(runtime.status.online)}}">
        <button title="Connect/Disconnect" on-click="reconnect"><noflo-icon icon="refresh"></noflo-icon></button>
        <h2>{{_produceAddress(runtime)}}</h2>
        <button title="Change Runtime" on-click="clearRuntime" class="clear"><noflo-icon icon="exchange"></noflo-icon></button>
      </div>
      <div id="teststatus" on-click="showTestDetails"></div>
      <div id="runcontrol">
        <template is="dom-if" if="{{runtime.status.online}}">
          <template is="dom-if" if="{{runtime.execution.running}}">
            <button title="Stop" class="stop" on-click="stop"><noflo-icon icon="pause"></noflo-icon></button>
          </template>
          <template is="dom-if" if="{{!runtime.execution.running}}">
            <button title="Start" class="start" on-click="start"><noflo-icon icon="play"></noflo-icon></button>
          </template>
          <h2>{{runtime.execution.label}}</h2>
        </template>
      </div>
    </template>
    <template is="dom-if" if="{{!runtime}}">
      <div id="select">
        <button on-click="selectRuntime" class="select">Select runtime</button>
      </div>
    </template>
`,is:"noflo-runtime",properties:{icon:{type:String,value:"asterisk"},graph:{value:null,observer:"graphChanged"},component:{value:null,observer:"graphChanged"},panel:{value:null},iframe:{value:null},runtime:{value:null,observer:"runtimeChanged"},runtimes:{type:Array,value:()=>[],notify:!0},suites:{type:Array,value:()=>[]}},attached(){Et(this).classList.add("gpu")},clearRuntime(){this.runtime.definition.project=null,this.fire("changed",this.runtime.definition),this.set("runtime",null),this.graphChanged()},graphChanged(){this.runtimeSelector&&(Et(this.runtimeSelector).parentNode&&Et(Et(this.runtimeSelector).parentNode).removeChild(this.runtimeSelector),this.runtimeSelector=null)},runtimeChanged(){const e=this.getRuntimeIframe();this.iframe&&this.iframe!==e&&this.hideCard(),this.iframe=e,this.runtime&&(this.set("icon",this.getRuntimeIcon(this.runtime)),this.runtime.status&&this.runtime.status.online?this.runtime.execution&&this.runtime.execution.running&&this.showCard():this.hideCard())},start(e){e.preventDefault(),this.runtime&&this.graph&&(this.showCard(),this.fire("start",{runtime:this.runtime.definition.id,graph:this.graph}))},stop(e){e&&e.preventDefault(),this.runtime&&this.graph&&this.fire("stop",{runtime:this.runtime.definition.id,graph:this.graph})},reconnect(e){e&&e.preventDefault(),this.fire("reconnect",{runtime:this.runtime.definition.id})},showTests(e){this.suites=e;const t=this.shadowRoot.getElementById("teststatus");Gr.a.render(Hr({suites:this.suites}),t)},showTestDetails(){if(!this.suites||!this.suites.length)return;const e=document.createElement("noflo-runtime-testdetails");e.suites=this.suites,Et(document.body).appendChild(e)},showCard(){this.iframe&&this.setIframeVisibility(this.iframe,"block")},hideCard(){this.iframe&&this.setIframeVisibility(this.iframe,"none")},getRuntimeIframe(){if(!this.runtime||!this.runtime.definition)return null;if(!this.runtime.definition.querySelector)return null;const e=document.body.querySelector(this.runtime.definition.querySelector);return e||null},setIframeVisibility(e,t){e.style.display=t},selectRuntime(){(this.graph||this.component)&&(Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||(this.runtimeSelector=document.createElement("noflo-runtime-selector"),this.set("runtimeSelector.runtimes",this.runtimes),this.set("runtimeSelector.graph",this.graph),this.set("runtimeSelector.component",this.component),this.runtimeSelector.addEventListener("runtime",e=>{const t=e.detail;this.graph&&(t.project=this.graph.properties.project),this.component&&(t.project=this.component.project),this.fire("changed",t),setTimeout(()=>{this.fire("switchRuntime",t.id)},10)}),Et(document.body).appendChild(this.runtimeSelector)))},getRuntimeIcon(e){if(!e||!e.definition||!e.definition.type)return"cog";switch(e.definition.type){case"noflo-browser":return"html5";case"noflo-nodejs":return"cloud";case"noflo-gnome":return"desktop";case"microflo":return"lightbulb-o";case"javafbp":return"android";case"imgflo":return"picture-o";case"sndflo":return"music";default:return"cog"}},_computeOnlineClass(e){return this.tokenList({online:e})},_produceAddress:e=>e.definition?"webrtc"===e.definition.protocol?"WebRTC P2P "+e.definition.id:e.definition.address:"",tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}});var Yr=r(175);Gt({_template:wr.a`
    <style>
      #thumb, 
      #outcanvas {
        position: absolute;
        top: 0;
        left: 0;
        overflow: visible;
      }
      #viewrect {
        position: absolute;
        top: 0;
        left: 0;
        width: 200px;
        height: 150px;
        border: 1px solid hsla(190, 100%, 80%, 0.4);
        border-style: dotted;
      }
    </style>
    <the-graph-thumb id="thumb" graph="{{graph}}" thumbrectangle="{{thumbrectangle}}" width="{{width}}" height="{{height}}" thumbscale="{{thumbscale}}" theme="{{theme}}">
    </the-graph-thumb>
    <canvas id="outcanvas" width="{{width}}" height="{{height}}" style="position:absolute;top:0;left:0;"></canvas>
    <div id="viewrect"></div>
`,is:"the-graph-nav",properties:{backgroundColor:{type:String,value:"hsla(184, 8%, 75%, 0.9)"},graph:{notify:!0},height:{type:Number,value:150,notify:!0},hide:{type:Boolean,value:!1,notify:!0,observer:"hideChanged"},outsideFill:{type:String,value:"hsla(0, 0%, 0%, 0.4)"},theme:{notify:!0,observer:"themeChanged"},thumbrectangle:{observer:"thumbrectangleChanged"},thumbscale:{type:Number,value:1,observer:"thumbscaleChanged"},view:{observer:"viewChanged"},viewrectangle:{observer:"viewrectangleChanged"},width:{type:Number,value:200,notify:!0}},ready(){this.viewrectangle=[0,0,500,500],this.scaledviewrectangle=[0,0,200,150],this.theme="dark"},attached(){this.set("style.overflow","hidden"),this.set("style.cursor","move"),this.set("style.width",this.width+"px"),this.set("style.height",this.height+"px")},viewChanged(e,t){if(!t)return;const r=t.pan[0],n=t.pan[1];this.viewrectangle=[-r,-n,t.width,t.height],this.scale=t.scale},themeChanged(){const e=Ir.a.nav.calculateStyleFromTheme(this.theme);this.backgroundColor=e.backgroundColor,this.viewBoxBorder=e.viewBoxBorder,this.viewBoxBorder2=e.viewBoxBorder2,this.outsideFill=e.outsideFill,this.set("style.backgroundColor",this.backgroundColor),this.viewrectangleChanged()},viewrectangleChanged(){if(!this.viewrectangle||!this.viewrectangle.length)return;const e=this.$.outcanvas.getContext("2d"),t={width:this.width,height:this.height,scale:this.scale,thumbscale:this.thumbscale,thumbrectangle:this.thumbrectangle,viewrectangle:this.viewrectangle,viewBoxBorder:this.viewBoxBorder,viewBoxBorder2:this.viewBoxBorder2,outsideFill:this.outsideFill},r=Ir.a.nav.render(e,this.$.viewrect,t);this.hide=r.hide},hideChanged(){this.hide?this.set("style.display","none"):this.set("style.display","block")},thumbscaleChanged(){this.viewrectangleChanged()},thumbrectangleChanged(){const e=this.thumbrectangle[2],t=this.thumbrectangle[3];this.thumbscale=e>t?this.width/e:this.height/t},hostAttributes:{"touch-action":"none"}}),Gt({_template:wr.a`
    <style>
      #controls {
        display: block;
        position: fixed;
        right: 36px;
        bottom: 0;
        width: 288px;
        height: 180px;
        color: var(--noflo-ui-text-highlight);
        box-sizing: border-box;
        background-color: var(--noflo-ui-background) !important;
        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);
        background-size: calc(100% - 1px);
        background-position: 0px -1px;
        border-top: 1px solid var(--noflo-ui-border);
      }

      #controls button {
        line-height: 36px;
        border: none;
        background-color: transparent;
        font-size: 14px;
        width: 72px;
        color: var(--noflo-ui-text-highlight);
        cursor: pointer;
      }
      #controls button.undo {
        position: absolute;
        left: 0;
        bottom: 0;
      }
      #controls button.redo {
        position: absolute;
        right: 0;
        bottom: 0;
      }
      #controls button.disabled {
        color: rgba(179, 222, 230, 0.2);
      }
      #controls button.autolayout {
        position: absolute;
        left: calc(50% - 18px);
        bottom: 0;
      }

      #nav {
        position: absolute;
        left: 0;
        top: 0;
      }
    </style>
    <div id="controls">
      <the-graph-nav id="nav" width="288" height="144" graph="{{graph}}" hide="{{hidenav}}"></the-graph-nav>

      <template is="dom-if" if="{{graph}}">
        <button title="Undo" on-click="undo" class\$="{{_computeClass(canUndo)}}">
          <noflo-icon icon="undo"></noflo-icon>
        </button>
        <template is="dom-if" if="{{klay}}">
          <button title="Autolayout" class="autolayout" on-click="autolayout">
            <noflo-icon icon="magic"></noflo-icon>
          </button>
        </template>
        <button title="Redo" on-click="{{_computeClass2(canRedo)}}" class\$="{{_computeClass(canRedo)}}">
          <noflo-icon icon="repeat"></noflo-icon>
        </button>
      </template>
    </div>
`,is:"noflo-journal",properties:{canRedo:{type:Boolean,value:!1},canUndo:{type:Boolean,value:!1},db:{value:null,notify:!0,observer:"dbChanged"},editor:{value:null,notify:!0,observer:"editorChanged"},graph:{value:null,notify:!0,observer:"graphChanged"},component:{value:null,notify:!0,observer:"componentChanged"},hidenav:{type:Boolean,value:!1,observer:"hidenavChanged"},klay:{type:Boolean,value:!1},theme:{type:String,value:"dark",notify:!0,observer:"themeChanged"},panel:{notify:!0},returnTo:{value:null}},attached(){this.klay=!0},editorChanged(e){if(!e)return;const{nav:t}=this.$,r=e;r.addEventListener("viewchanged",e=>{t.view=e.detail}),t.addEventListener("panto",e=>{const t=e.detail;t.x===r.pan[0]&&t.y===r.pan[1]||(r.pan[0]=t.x,r.pan[1]=t.y)}),t.addEventListener("tap",()=>{r.triggerFit()})},graphChanged(){this.checkState(),this.connectJournal()},dbChanged(){this.checkState(),this.connectJournal()},componentChanged(){this.component&&this.component.name?this.hidenav=!0:this.hidenav=!1},connectJournal(){if(!this.graph||!this.graph.on||!this.db)return;const e=this.graph.nodes.filter(e=>!!e.metadata&&!(!e.metadata.x||!e.metadata.y));if(this.graph.nodes.length&&!e.length&&setTimeout(()=>{this.autolayout()},10),!this.graph.properties.project||this.graph.journal||!this.db)return;const t=new Yr.IDBJournalStore(this.graph,this.db);t.init(()=>{this.graph.journal=new _r.a.Journal(this.graph,void 0,t),this.checkState(),this.graph.journal.store.on("transaction",()=>{this.checkState()})})},checkState(){if(!this.graph||!this.graph.journal)return this.canUndo=!1,void(this.canRedo=!1);this.canUndo=this.graph.journal.canUndo(),this.canRedo=this.graph.journal.canRedo()},undo(e){e&&e.preventDefault(),this.graph&&this.graph.journal&&(this.graph.journal.undo(),this.checkState())},redo(e){e&&e.preventDefault(),this.graph&&this.graph.journal&&(this.graph.journal.redo(),this.checkState())},autolayout(e){e&&e.preventDefault(),this.graph&&this.klay&&this.editor.triggerAutolayout()},themeChanged(e){this.$.nav.theme=e},hidenavChanged(){this.hidenav?this.set("$.controls.style.height","36px"):this.set("$.controls.style.height","180px")},_computeClass(e){return"undo "+this.tokenList({disabled:!e})},_computeClass2(e){return"redo "+this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")}});var Kr=r(21),Qr=r.n(Kr),Zr=(r(100),r(101),r(102),r(167),r(168),r(169),r(170),r(171),r(172),r(173),r(2));function en(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),o=0;o<r;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=n,e.apply(this,i)}}function tn(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function rn(e){return null===e}function nn(e){return void 0===e}function on(e){return!0===e||!1===e||"[object Boolean]"===Zr.s.call(e)}function sn(e){return!(!e||1!==e.nodeType)}function an(e){return function(t){return Zr.s.call(t)==="[object "+e+"]"}}var cn=an("String"),ln=an("Number"),pn=an("Date"),un=an("RegExp"),dn=an("Error"),hn=an("Symbol"),fn=an("Map"),mn=an("WeakMap"),gn=an("Set"),yn=an("WeakSet"),vn=an("ArrayBuffer"),bn=an("DataView"),wn=Zr.k||an("Array"),xn=an("Function"),kn=Zr.p.document&&Zr.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof kn&&(xn=function(e){return"function"==typeof e||!1});var En=xn;function _n(e,t){return null!=e&&Zr.i.call(e,t)}var Sn=an("Arguments");!function(){Sn(arguments)||(Sn=function(e){return _n(e,"callee")})}();var Cn=Sn;function Pn(e){return!hn(e)&&Object(Zr.f)(e)&&!isNaN(parseFloat(e))}function An(e){return ln(e)&&Object(Zr.g)(e)}function On(e){return function(){return e}}function Tn(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=Zr.b}}function Dn(e){return function(t){return null==t?void 0:t[e]}}var Nn=Dn("byteLength"),jn=Tn(Nn),In=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Rn=Zr.r?function(e){return Zr.l?Object(Zr.l)(e)&&!bn(e):jn(e)&&In.test(Zr.s.call(e))}:On(!1),Mn=Dn("length"),Ln=Tn(Mn);function Fn(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=Zr.n.length,n=e.constructor,o=En(n)&&n.prototype||Zr.c,i="constructor";for(_n(e,i)&&!t.contains(i)&&t.push(i);r--;)(i=Zr.n[r])in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function Gn(e){if(!tn(e))return[];if(Zr.m)return Object(Zr.m)(e);var t=[];for(var r in e)_n(e,r)&&t.push(r);return Zr.h&&Fn(e,t),t}function Bn(e){return null==e||(Ln(e)&&(wn(e)||cn(e)||Cn(e))?0===e.length:0===Gn(e).length)}function zn(e,t){var r=Gn(t),n=r.length;if(null==e)return!n;for(var o=Object(e),i=0;i<n;i++){var s=r[i];if(t[s]!==o[s]||!(s in o))return!1}return!0}function Un(e){return e instanceof Un?e:this instanceof Un?void(this._wrapped=e):new Un(e)}function qn(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&function e(t,r,n,o){t instanceof Un&&(t=t._wrapped);r instanceof Un&&(r=r._wrapped);var i=Zr.s.call(t);if(i!==Zr.s.call(r))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return Zr.d.valueOf.call(t)===Zr.d.valueOf.call(r);case"[object ArrayBuffer]":return e(new DataView(t),new DataView(r),n,o);case"[object DataView]":var s=Nn(t);if(s!==Nn(r))return!1;for(;s--;)if(t.getUint8(s)!==r.getUint8(s))return!1;return!0}if(Rn(t))return e(new DataView(t.buffer),new DataView(r.buffer),n,o);var a="[object Array]"===i;if(!a){if("object"!=typeof t||"object"!=typeof r)return!1;var c=t.constructor,l=r.constructor;if(c!==l&&!(En(c)&&c instanceof c&&En(l)&&l instanceof l)&&"constructor"in t&&"constructor"in r)return!1}o=o||[];var p=(n=n||[]).length;for(;p--;)if(n[p]===t)return o[p]===r;if(n.push(t),o.push(r),a){if((p=t.length)!==r.length)return!1;for(;p--;)if(!qn(t[p],r[p],n,o))return!1}else{var u,d=Gn(t);if(p=d.length,Gn(r).length!==p)return!1;for(;p--;)if(u=d[p],!_n(r,u)||!qn(t[u],r[u],n,o))return!1}return n.pop(),o.pop(),!0}(e,t,r,n)}function $n(e,t){return qn(e,t)}function Hn(e){if(!tn(e))return[];var t=[];for(var r in e)t.push(r);return Zr.h&&Fn(e,t),t}function Vn(e){for(var t=Gn(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=e[t[o]];return n}function Wn(e){for(var t=Gn(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n}function Jn(e){for(var t={},r=Gn(e),n=0,o=r.length;n<o;n++)t[e[r[n]]]=r[n];return t}function Xn(e){var t=[];for(var r in e)En(e[r])&&t.push(r);return t.sort()}function Yn(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var o=1;o<n;o++)for(var i=arguments[o],s=e(i),a=s.length,c=0;c<a;c++){var l=s[c];t&&void 0!==r[l]||(r[l]=i[l])}return r}}Un.VERSION=Zr.e,Un.prototype.value=function(){return this._wrapped},Un.prototype.valueOf=Un.prototype.toJSON=Un.prototype.value,Un.prototype.toString=function(){return String(this._wrapped)};var Kn=Yn(Hn),Qn=Yn(Gn),Zn=Yn(Hn,!0);function eo(e){if(!tn(e))return{};if(Zr.j)return Object(Zr.j)(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function to(e,t){var r=eo(e);return t&&Qn(r,t),r}function ro(e){return tn(e)?wn(e)?e.slice():Kn({},e):e}function no(e,t){return t(e),e}function oo(e,t){if(!wn(t))return _n(e,t);for(var r=t.length,n=0;n<r;n++){var o=t[n];if(null==e||!Zr.i.call(e,o))return!1;e=e[o]}return!!r}function io(e){return e}function so(e){return e=Qn({},e),function(t){return zn(t,e)}}function ao(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function co(e){return wn(e)?function(t){return ao(t,e)}:Dn(e)}function lo(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}}function po(e,t,r){return null==e?io:En(e)?lo(e,t,r):tn(e)&&!wn(e)?so(e):co(e)}function uo(e,t){return po(e,t,1/0)}function ho(e,t,r){return Un.iteratee!==uo?Un.iteratee(e,t):po(e,t,r)}function fo(e,t,r){t=ho(t,r);for(var n=Gn(e),o=n.length,i={},s=0;s<o;s++){var a=n[s];i[a]=t(e[a],a,e)}return i}function mo(){}function go(e){return null==e?function(){}:function(t){return wn(t)?ao(e,t):e[t]}}function yo(e,t,r){var n=Array(Math.max(0,e));t=lo(t,r,1);for(var o=0;o<e;o++)n[o]=t(o);return n}function vo(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}Un.iteratee=uo;var bo=Date.now||function(){return(new Date).getTime()};function wo(e){var t=function(t){return e[t]},r="(?:"+Gn(e).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}}var xo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ko=wo(xo),Eo=wo(Jn(xo)),_o=Un.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},So=/(.)^/,Co={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Po=/\\|'|\r|\n|\u2028|\u2029/g;function Ao(e){return"\\"+Co[e]}function Oo(e,t,r){!t&&r&&(t=r),t=Zn({},t,Un.templateSettings);var n,o=RegExp([(t.escape||So).source,(t.interpolate||So).source,(t.evaluate||So).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(o,(function(t,r,n,o,a){return s+=e.slice(i,a).replace(Po,Ao),i=a+t.length,r?s+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(s+="';\n"+o+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var a=function(e){return n.call(this,e,Un)},c=t.variable||"obj";return a.source="function("+c+"){\n"+s+"}",a}function To(e,t,r){wn(t)||(t=[t]);var n=t.length;if(!n)return En(r)?r.call(e):r;for(var o=0;o<n;o++){var i=null==e?void 0:e[t[o]];void 0===i&&(i=r,o=n),e=En(i)?i.call(e):i}return e}var Do=0;function No(e){var t=++Do+"";return e?e+t:t}function jo(e){var t=Un(e);return t._chain=!0,t}function Io(e,t,r,n,o){if(!(n instanceof t))return e.apply(r,o);var i=eo(e.prototype),s=e.apply(i,o);return tn(s)?s:i}var Ro=en((function(e,t){var r=Ro.placeholder,n=function(){for(var o=0,i=t.length,s=Array(i),a=0;a<i;a++)s[a]=t[a]===r?arguments[o++]:t[a];for(;o<arguments.length;)s.push(arguments[o++]);return Io(e,n,this,this,s)};return n}));Ro.placeholder=Un;var Mo=Ro,Lo=en((function(e,t,r){if(!En(e))throw new TypeError("Bind must be called on a function");var n=en((function(o){return Io(e,n,t,this,r.concat(o))}));return n}));function Fo(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var o=n.length,i=0,s=Mn(e);i<s;i++){var a=e[i];if(Ln(a)&&(wn(a)||Cn(a)))if(t>1)Fo(a,t-1,r,n),o=n.length;else for(var c=0,l=a.length;c<l;)n[o++]=a[c++];else r||(n[o++]=a)}return n}var Go=en((function(e,t){var r=(t=Fo(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=Lo(e[n],e)}return e}));function Bo(e,t){var r=function(n){var o=r.cache,i=""+(t?t.apply(this,arguments):n);return _n(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return r.cache={},r}var zo=en((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),Uo=Mo(zo,Un,1);function qo(e,t,r){var n,o,i,s,a=0;r||(r={});var c=function(){a=!1===r.leading?0:bo(),n=null,s=e.apply(o,i),n||(o=i=null)},l=function(){var l=bo();a||!1!==r.leading||(a=l);var p=t-(l-a);return o=this,i=arguments,p<=0||p>t?(n&&(clearTimeout(n),n=null),a=l,s=e.apply(o,i),n||(o=i=null)):n||!1===r.trailing||(n=setTimeout(c,p)),s};return l.cancel=function(){clearTimeout(n),a=0,n=o=i=null},l}function $o(e,t,r){var n,o,i=function(t,r){n=null,r&&(o=e.apply(t,r))},s=en((function(s){if(n&&clearTimeout(n),r){var a=!n;n=setTimeout(i,t),a&&(o=e.apply(this,s))}else n=zo(i,t,this,s);return o}));return s.cancel=function(){clearTimeout(n),n=null},s}function Ho(e,t){return Mo(t,e)}function Vo(e){return function(){return!e.apply(this,arguments)}}function Wo(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function Jo(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Xo(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}var Yo=Mo(Xo,2);function Ko(e,t,r){t=ho(t,r);for(var n,o=Gn(e),i=0,s=o.length;i<s;i++)if(t(e[n=o[i]],n,e))return n}function Qo(e){return function(t,r,n){r=ho(r,n);for(var o=Mn(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(r(t[i],i,t))return i;return-1}}var Zo=Qo(1),ei=Qo(-1);function ti(e,t,r,n){for(var o=(r=ho(r,n,1))(t),i=0,s=Mn(e);i<s;){var a=Math.floor((i+s)/2);r(e[a])<o?i=a+1:s=a}return i}function ri(e,t,r){return function(n,o,i){var s=0,a=Mn(n);if("number"==typeof i)e>0?s=i>=0?i:Math.max(i+a,s):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return n[i=r(n,o)]===o?i:-1;if(o!=o)return(i=t(Zr.q.call(n,s,a),An))>=0?i+s:-1;for(i=e>0?s:a-1;i>=0&&i<a;i+=e)if(n[i]===o)return i;return-1}}var ni=ri(1,Zo,ti),oi=ri(-1,ei);function ii(e,t,r){var n=(Ln(e)?Zo:Ko)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function si(e,t){return ii(e,so(t))}function ai(e,t,r){var n,o;if(t=lo(t,r),Ln(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var i=Gn(e);for(n=0,o=i.length;n<o;n++)t(e[i[n]],i[n],e)}return e}function ci(e,t,r){t=ho(t,r);for(var n=!Ln(e)&&Gn(e),o=(n||e).length,i=Array(o),s=0;s<o;s++){var a=n?n[s]:s;i[s]=t(e[a],a,e)}return i}function li(e){var t=function(t,r,n,o){var i=!Ln(t)&&Gn(t),s=(i||t).length,a=e>0?0:s-1;for(o||(n=t[i?i[a]:a],a+=e);a>=0&&a<s;a+=e){var c=i?i[a]:a;n=r(n,t[c],c,t)}return n};return function(e,r,n,o){var i=arguments.length>=3;return t(e,lo(r,o,4),n,i)}}var pi=li(1),ui=li(-1);function di(e,t,r){var n=[];return t=ho(t,r),ai(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}function hi(e,t,r){return di(e,Vo(ho(t)),r)}function fi(e,t,r){t=ho(t,r);for(var n=!Ln(e)&&Gn(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(!t(e[s],s,e))return!1}return!0}function mi(e,t,r){t=ho(t,r);for(var n=!Ln(e)&&Gn(e),o=(n||e).length,i=0;i<o;i++){var s=n?n[i]:i;if(t(e[s],s,e))return!0}return!1}function gi(e,t,r,n){return Ln(e)||(e=Vn(e)),("number"!=typeof r||n)&&(r=0),ni(e,t,r)>=0}var yi=en((function(e,t,r){var n,o;return En(t)?o=t:wn(t)&&(n=t.slice(0,-1),t=t[t.length-1]),ci(e,(function(e){var i=o;if(!i){if(n&&n.length&&(e=ao(e,n)),null==e)return;i=e[t]}return null==i?i:i.apply(e,r)}))}));function vi(e,t){return ci(e,co(t))}function bi(e,t){return di(e,so(t))}function wi(e,t,r){var n,o,i=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=Ln(e)?e:Vn(e)).length;a<c;a++)null!=(n=e[a])&&n>i&&(i=n);else t=ho(t,r),ai(e,(function(e,r,n){((o=t(e,r,n))>s||o===-1/0&&i===-1/0)&&(i=e,s=o)}));return i}function xi(e,t,r){var n,o,i=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,c=(e=Ln(e)?e:Vn(e)).length;a<c;a++)null!=(n=e[a])&&n<i&&(i=n);else t=ho(t,r),ai(e,(function(e,r,n){((o=t(e,r,n))<s||o===1/0&&i===1/0)&&(i=e,s=o)}));return i}function ki(e,t,r){if(null==t||r)return Ln(e)||(e=Vn(e)),e[vo(e.length-1)];var n=Ln(e)?ro(e):Vn(e),o=Mn(n);t=Math.max(Math.min(t,o),0);for(var i=o-1,s=0;s<t;s++){var a=vo(s,i),c=n[s];n[s]=n[a],n[a]=c}return n.slice(0,t)}function Ei(e){return ki(e,1/0)}function _i(e,t,r){var n=0;return t=ho(t,r),vi(ci(e,(function(e,r,o){return{value:e,index:n++,criteria:t(e,r,o)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")}function Si(e,t){return function(r,n,o){var i=t?[[],[]]:{};return n=ho(n,o),ai(r,(function(t,o){var s=n(t,o,r);e(i,t,s)})),i}}var Ci=Si((function(e,t,r){_n(e,r)?e[r].push(t):e[r]=[t]})),Pi=Si((function(e,t,r){e[r]=t})),Ai=Si((function(e,t,r){_n(e,r)?e[r]++:e[r]=1})),Oi=Si((function(e,t,r){e[r?0:1].push(t)}),!0),Ti=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Di(e){return e?wn(e)?Zr.q.call(e):cn(e)?e.match(Ti):Ln(e)?ci(e,io):Vn(e):[]}function Ni(e){return null==e?0:Ln(e)?e.length:Gn(e).length}function ji(e,t,r){return t in r}var Ii=en((function(e,t){var r={},n=t[0];if(null==e)return r;En(n)?(t.length>1&&(n=lo(n,t[1])),t=Hn(e)):(n=ji,t=Fo(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var s=t[o],a=e[s];n(a,s,e)&&(r[s]=a)}return r})),Ri=en((function(e,t){var r,n=t[0];return En(n)?(n=Vo(n),t.length>1&&(r=t[1])):(t=ci(Fo(t,!1,!1),String),n=function(e,r){return!gi(t,r)}),Ii(e,n,r)}));function Mi(e,t,r){return Zr.q.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function Li(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:Mi(e,e.length-t)}function Fi(e,t,r){return Zr.q.call(e,null==t||r?1:t)}function Gi(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:Fi(e,Math.max(0,e.length-t))}function Bi(e){return di(e,Boolean)}function zi(e,t){return Fo(e,t,!1)}var Ui=en((function(e,t){return t=Fo(t,!0,!0),di(e,(function(e){return!gi(t,e)}))})),qi=en((function(e,t){return Ui(e,t)}));function $i(e,t,r,n){on(t)||(n=r,r=t,t=!1),null!=r&&(r=ho(r,n));for(var o=[],i=[],s=0,a=Mn(e);s<a;s++){var c=e[s],l=r?r(c,s,e):c;t&&!r?(s&&i===l||o.push(c),i=l):r?gi(i,l)||(i.push(l),o.push(c)):gi(o,c)||o.push(c)}return o}var Hi=en((function(e){return $i(Fo(e,!0,!0))}));function Vi(e){for(var t=[],r=arguments.length,n=0,o=Mn(e);n<o;n++){var i=e[n];if(!gi(t,i)){var s;for(s=1;s<r&&gi(arguments[s],i);s++);s===r&&t.push(i)}}return t}function Wi(e){for(var t=e&&wi(e,Mn).length||0,r=Array(t),n=0;n<t;n++)r[n]=vi(e,n);return r}var Ji=en(Wi);function Xi(e,t){for(var r={},n=0,o=Mn(e);n<o;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function Yi(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),o=Array(n),i=0;i<n;i++,e+=r)o[i]=e;return o}function Ki(e,t){if(null==t||t<1)return[];for(var r=[],n=0,o=e.length;n<o;)r.push(Zr.q.call(e,n,n+=t));return r}function Qi(e,t){return e._chain?Un(t).chain():t}function Zi(e){return ai(Xn(e),(function(t){var r=Un[t]=e[t];Un.prototype[t]=function(){var e=[this._wrapped];return Zr.o.apply(e,arguments),Qi(this,r.apply(Un,e))}})),Un}ai(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=Zr.a[e];Un.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0]),Qi(this,r)}})),ai(["concat","join","slice"],(function(e){var t=Zr.a[e];Un.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Qi(this,e)}}));var es=Un,ts=Zi(n);ts._=ts;var rs=ts;r(174);Gt({_template:wr.a`
    <style include="codemirror-styles">
      :host {
        background-color: var(--noflo-ui-background);
        overflow: hidden;
      }
      .CodeMirror {
        height: 100%;
        cursor: text;
      }
      .CodeMirror-scroll {
        height: 100%;
      }
      #code,
      #tests {
        display: block;
        width: 50%;
        height: 100%;
        position: absolute;
        left: 0px;
        top: 36px;
      }
      #tests {
        left: auto;
        right: 0px;
      }
      #code h1,
      #tests h1 {
        margin: 0;
        line-height: 36px;
        padding-left: 36px;
        font-size: 14px;
        text-transform: uppercase;
        color: var(--noflo-ui-text);
      }
      #code h1 {
        text-align: right;
      }
    </style>
    <section id="code">
      <h1>Implementation</h1>
      <div id="code_editor"></div>
    </section>
    <section id="tests">
      <h1>Tests</h1>
      <div id="tests_editor"></div>
    </section>
`,is:"noflo-component-editor",properties:{codeEditor:{value:null},component:{value:null,notify:!0,observer:"componentChanged"},height:{value:null,notify:!0,observer:"heightChanged"},project:{value:null},runtime:{value:null},spec:{value:null,observer:"specChanged"},testsEditor:{value:null},theme:{type:String,value:"dark",observer:"themeChanged"},width:{value:null,notify:!0,observer:"widthChanged"}},ready(){this.componentChanged();const e=this;this.debouncedComponentChange=rs.debounce(()=>{e.component&&e.fire("changed",e.component)},1500),this.debouncedSpecChange=rs.debounce(()=>{e.spec&&e.fire("specschanged",e.spec)},1500)},componentChanged(){if(!this.component||!this.component.name)return void this.set("style.display","none");this.set("spec",null),this.project&&(this.project.specs.forEach(e=>{e.name===this.component.name&&this.set("spec",e)}),this.spec||(this.set("spec",{name:this.component.name,changed:!1,code:this.component.tests||"",language:"yaml",project:this.component.project,type:"spec"}),this.push("project.specs",this.spec))),this.set("style.display","block"),Et(this.$.code_editor).innerHTML="",this.component.code||this.set("component.code",this.getExampleCode());const e=this.getMirrorOptions(this.component,this.component.code);this.codeEditor=Qr()(this.$.code_editor,e),this.codeEditor.on("change",()=>{this.set("component.code",this.codeEditor.getValue()),this.set("component.changed",!0),this.debouncedComponentChange()}),this.setSize()},specChanged(){if(Et(this.$.tests_editor).innerHTML="",!this.spec)return;const e=this.getMirrorOptions(this.spec,this.spec.code);this.testsEditor=Qr()(this.$.tests_editor,e),this.testsEditor.on("change",()=>{this.set("spec.code",this.testsEditor.getValue()),this.set("spec.changed",!0),this.debouncedSpecChange()}),this.setSize()},widthChanged(){this.setSize()},heightChanged(){this.setSize()},getMirrorOptions(e,t){const r={lineNumbers:!0,value:t||"",mode:this.getMirrorMode(e.language),theme:this.getMirrorTheme(),readOnly:!e.project&&"nocursor"};return e.language,r},getMirrorMode:e=>"coffeescript"===e||"javascript"===e?e:"typescript"===e?"text/typescript":"yaml"===e?"text/x-yaml":"python"===e?"text/x-python":"c"===e?"text/x-csrc":"c++"===e?"text/x-c++src":"supercollider"===e?"text/x-stsrc":"clike",getMirrorTheme(){return"light"===this.theme?"mdn-like":"noflo"},getExampleCode(){let e=null;if(this.runtime&&this.runtime&&this.runtime.definition&&this.runtime.definition.type&&(e=this.runtime.definition.type),!e&&this.project&&(e=this.project.type),!e)return"";const t=Cr.a[e];let{language:r}=this.component;"es6"===r&&(r="es2015");let n="";if(t&&t.componenttemplates&&t.componenttemplates[this.component.language]&&(n=t.componenttemplates[this.component.language]),n){n=rs.template(n)({namespace:this.project.namespace||this.project.id,name:this.component.name,description:this.component.description,icon:this.component.icon})}return n},themeChanged(){this.codeEditor&&this.testsEditor&&(this.codeEditor.setOption("theme",this.getMirrorTheme()),this.testsEditor.setOption("theme",this.getMirrorTheme()))},setSize(){if(!this.width||!this.height)return;const e=(this.width-90)/2,t=this.height-102;this.codeEditor&&(this.codeEditor.setSize(e,t),this.codeEditor.refresh()),this.testsEditor&&(this.testsEditor.setSize(e,t),this.testsEditor.refresh())}}),Gt({_template:wr.a`
    <ul class="toolbar2right">
      <template is="dom-repeat" items="{{buttons}}" as="button">
        <li>
          <button on-click="clicked" id="{{button.id}}">
            <noflo-icon icon="{{button.icon}}" fallback=""></noflo-icon>
            <span>{{button.label}}</span>
          </button>
        </li>
      </template>
    </ul>
`,is:"noflo-menu",properties:{buttons:{type:Array,value:()=>[]}},clicked(e,t,r){e.preventDefault(),this.buttons.forEach(e=>{e.id===r.getAttribute("id")&&(this.fire("click",e.id),e.search?this.fire("search",e.search):e.action())})}}),Gt({_template:wr.a`
    <style>
      .search-results-header h1 {
        color: var(--noflo-ui-border);
        padding-left: 25px;
        font-size: 12px !important;
      }
      .search-results-header i {
        padding: 0;
        margin: 0;
        line-height: 36px;
        width: 36px;
        left: -10px;
        position: absolute;
        text-align: center;
      }

      .search-results-list {
        -webkit-box-sizing: border-box;
        -mox-box-sizing: border-box;
        box-sizing: border-box;
        list-style: none;
        margin: 0;
        padding: 0;
        background-color: var(--noflo-ui-background);
        border-right: 1px solid var(--noflo-ui-border);
      }

      .search-results-item {
        -webkit-box-sizing: border-box;
        -mox-box-sizing: border-box;
        box-sizing: border-box;
        min-height: 36px;
        position: relative;
        cursor: cell;
        padding-top: 18px !important;
        padding-right: 12px !important;
      }
      .search-results-item i {
        color: var(--noflo-ui-text-highlight);
        position: absolute;
        top: 18px;
        left: 0;
        width: 36px;
        text-align: center;
        padding: 0;
        margin: 0;
      }
      .search-results-item h2 {
        color: var(--noflo-ui-text-highlight);
        position: absolute;
        margin: 0;
        display: block;
        left: 36px;
        top: 18px;
        height: 36px;
        width: calc(100% - 36px);
        font-size: 12px;
        text-overflow: ellipsis;
        text-transform: uppercase;
        white-space: nowrap;
        overflow-x: hidden;
      }
      .search-results-item p {
        position: relative;
        display: block;
        left: 8px;
        padding: 0px;
        margin: 0px;
        margin-top: 24px;
        height: auto;
        line-height: calc(36px / 3);
        font-size: 10px;
        color: var(--noflo-ui-text);
        text-shadow: var(--noflo-ui-background) 0px 1px 1px;
      }
    </style>
    <ul class="search-results-list">
      <template is="dom-repeat" items="{{results}}" as="result" index-as="index">
        <li class="search-results-item" on-click="clicked" data-index\$="{{index}}">
          <i class="fa fa-cog"></i>
          <h2>{{result.metadata.label}}</h2>
          <p>{{result.component}}</p>
        </li>
      </template>
    </ul>
`,is:"noflo-search-graph-results",properties:{editor:{value:null,notify:!0},results:{type:Array,value:()=>[],notify:!0,observer:"resultsChanged"},search:{type:String,value:"",notify:!0}},detached(){this.editor=null},resultsChanged(){this.editor&&(!this.search||this.search.length<1?(this.set("editor.displaySelectionGroup",!0),this.set("editor.selectedNodes",[])):this.results&&(this.set("editor.displaySelectionGroup",!(this.results.length>0)),this.set("editor.selectedNodes",this.results)))},clicked(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-index"),r=this.results[t];r&&(this.set("editor.displaySelectionGroup",!0),this.set("editor.selectedNodes",[r]),this.editor.focusNode(r),this.fire("resultclick",r))}}),Gt({_template:wr.a`
    <style>
      .search-results-header h1 {
        color: var(--noflo-ui-border);
        padding-left: 25px;
        font-size: 12px !important;
      }
      .search-results-header i {
        padding: 0;
        margin: 0;
        line-height: 36px;
        width: 36px;
        left: -10px;
        position: absolute;
        text-align: center;
      }

      .search-results-list {
        -webkit-box-sizing: border-box;
        -mox-box-sizing: border-box;
        box-sizing: border-box;
        list-style: none;
        margin: 0;
        padding: 0;
        background-color: var(--noflo-ui-background);
        border-right: 1px solid var(--noflo-ui-border);
      }

      .search-results-item {
        -webkit-box-sizing: border-box;
        -mox-box-sizing: border-box;
        box-sizing: border-box;
        min-height: 36px;
        position: relative;
        cursor: cell;
        padding-top: 18px !important;
        padding-right: 12px !important;
      }
      .search-results-item i {
        color: var(--noflo-ui-text-highlight);
        position: absolute;
        top: 18px;
        left: 0;
        width: 36px;
        text-align: center;
        padding: 0;
        margin: 0;
        font: normal normal normal 14px/1 FontAwesomeSVG;
      }
      .search-results-item h2 {
        color: var(--noflo-ui-text-highlight);
        position: absolute;
        margin: 0;
        display: block;
        left: 36px;
        top: 18px;
        height: 36px;
        width: calc(100% - 36px);
        font-size: 12px;
        text-overflow: ellipsis;
        text-transform: uppercase;
        white-space: nowrap;
        overflow-x: hidden;
      }
      .search-results-item p {
        position: relative;
        display: block;
        left: 8px;
        padding: 0px;
        margin: 0px;
        margin-top: 24px;
        height: auto;
        line-height: calc(36px / 3);
        font-size: 10px;
        color: var(--noflo-ui-text);
        text-shadow: var(--noflo-ui-background) 0px 1px 1px;
      }
    </style>
    <ul class="search-results-list">
      <template is="dom-repeat" items="{{results}}" as="result" index-as="index">
        <li class="search-results-item" on-click="clicked" data-index\$="{{index}}">
          <i><noflo-icon icon="[[result.icon]]" fallback="cog"></noflo-icon></i>
          <h2>[[result.label]]</h2>
          <p>[[result.description]]</p>
        </li>
      </template>
    </ul>
`,is:"noflo-search-library-results",properties:{results:{type:Array,value:()=>[],notify:!0},search:{type:String,value:"",notify:!0}},clicked(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-index"),r=this.results[t];r&&r.action&&(this.fire("resultclick",r),r.action())}});var ns=r(29),os=r.n(ns);Gt({_template:wr.a`
    <style include="noflo-modal-styles codemirror-styles">
      .CodeMirror {
        height: 100%;
        cursor: text;
      }
      .CodeMirror-scroll {
        height: 100%;
      }
      textarea {
        height: 144px;
      }
      .editable-title {
        font-size: 17px;
        line-height: 36px;
        margin: 0px;
        padding: 0px;
        margin-bottom: 18px;
        background-color: var(--noflo-ui-background-shadow);
        color: var(--noflo-ui-text);
      }
      p {
        font-size: 13px;
        line-height: 18px;
      }
      p a, label a {
        color: rgb(0, 127, 153);
        text-decoration: none;
      }
      div.hidden {
        display: none;
      }
      a#download {
        position: absolute;
        right: 36px;
        top: 36px;
        width: 36px;
        display: block;
        height: 36px;
        line-height: 36px;
        background-color: rgb(0, 127, 153);
        text-align: center;
        border-radius: 6px;
        color: white;
      }
      button.delete {
        position: absolute;
        right: 36px;
        border: 0px solid hsla( 0, 98%, 46%, .8) !important;
        color: hsla( 0, 98%, 46%, .8) !important;
      }
      ul.tabs {
        display: block;
        margin: 0px;
        padding: 0px;
        list-style: none;
        padding: 1px;
        text-align: center;
      }
      ul.tabs li {
        display: inline;
        line-height: 36px;
        font-size: 13px;
        color: hsl(189, 50%, 25%);
        text-decoration: none;
        padding-left: 36px;
        padding-right: 36px;
        cursor: pointer;
      }
      ul.tabs li.selected {
        border: none;
        border-radius: 3px;
        background-color: rgba(0, 42, 51, 0.498039);
        color: white;
        border-radius: 3px;
        padding-top: 8px;
        padding-bottom: 9px;
        cursor: default;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <input type="text" on-keydown="checkUpdateName" on-blur="updateName" class="editable-title" value="{{getName(graph)}}">
      <template is="dom-if" if="{{downloadUrl}}">
        <a id="download" download="{{_computeDownload(graph)}}" href\$="{{downloadUrl}}">
          <noflo-icon icon="download"></noflo-icon>
        </a>
      </template>
      <div class="modal-content">
      <template is="dom-if" if="{{isMain}}">
      <p>Main graph in project <span>{{project.name}}</span>.</p>
      </template>
      <template is="dom-if" if="{{inGraph.length}}">
      <p>Used as subgraph in
      <template is="dom-repeat" items="{{inGraph}}" as="parent">
        <a href\$="{{_computeHref(parent, project)}}">
          <span>{{getName(parent)}}</span>
        </a>
      </template>
      </p>
      </template>
      <ul class="tabs">
        <li id="properties" on-click="setView" class\$="{{_computeClass(view)}}">Properties</li>
        <template is="dom-if" if="{{_computeIf(type)}}">
        <li id="html" on-click="setView" class\$="{{_computeClass5(view)}}">HTML</li>
        </template>
        <template is="dom-if" if="{{spec}}">
        <li id="tests" on-click="setView" class\$="{{_computeClass6(view)}}">Tests</li>
        </template>
      </ul>
      <div class\$="{{_computeClass2(view)}}">
      <label>
        <span>Description</span>
        <input type="text" value="{{description::input}}">
      </label>
      <label>
        Icon
        <noflo-icon-selector selected="{{icon}}"></noflo-icon-selector>
      </label>
      <label>
        <span>Type</span>
        <noflo-type-selector type="{{type}}" runtimes="{{runtimes}}"></noflo-type-selector>
      </label>
      </div>
      <div class\$="{{_computeClass3(view)}}">
      <label id="html_editor">
        <span>Preview contents</span>
      </label>
      </div>
      <div class\$="{{_computeClass4(view)}}">
      <label id="tests_editor">
        <span>Tests</span>
      </label>
      </div>
      </div>
      <div class="toolbar">
        <button on-click="save">Save</button>
        <a on-click="close">Cancel</a>
        <button class="delete" on-click="delete">Delete</button>
      </div>
    </div>
`,is:"noflo-graph-inspector",properties:{description:{type:String,value:""},downloadUrl:{type:String,value:""},graph:{value:null,notify:!0},icon:{type:String,value:""},inGraph:{type:Array,value:()=>[]},isMain:{type:Boolean,value:!1},preview:{type:String,value:""},project:{value:null},runtimes:{type:Array,value:()=>[]},spec:{value:null},theme:{type:String,value:"dark",observer:"themeChanged"},type:{type:String,value:""},view:{type:String,value:"properties",observer:"viewChanged"}},checkUpdateName(e){13===e.keyCode&&(e.preventDefault(),this.updateName(e))},updateName(e){this.set("graph.name",e.currentTarget.value)},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content"),this.graph&&(this.description=this.graph.properties.description,this.icon=this.graph.properties.icon||"cog",this.type=Wr.a.getGraphType(this.graph),this.view="properties",this.inGraph=[],this.isMain=!1,this.project&&(this.graph.properties.main?this.isMain=!0:this.project.graphs.forEach(e=>{e.nodes.forEach(t=>{t.component!==zr.a.unnamespace(this.graph.name)&&t.component!==zr.a.namespace(this.graph.name,this.project.namespace)||this.push("inGraph",e)})}),this.project.specs.forEach(e=>{zr.a.unnamespace(e.name)===zr.a.unnamespace(this.graph.name)&&(this.spec=e)}),this.spec||(this.spec={name:zr.a.unnamespace(this.graph.name),changed:!1,code:"",language:"yaml",project:this.project.id,type:"spec"},this.push("project.specs",this.spec))),this.prepareHtmlEditor(),this.prepareTestsEditor(),this.prepareDownload())},prepareDownload(){if(!window.Blob||!window.URL)return;const e=JSON.parse(JSON.stringify(this.graph));e.properties&&(delete e.properties.sha,delete e.properties.changed,delete e.properties.project,delete e.properties.id);const t=new Blob([JSON.stringify(e,null,4)],{type:"application/json"});try{this.downloadUrl=URL.createObjectURL(t)}catch(e){}},detached(){Et(document.getElementById("container")).classList.remove("blur")},viewChanged(){"html"===this.view&&this.htmlEditor&&setTimeout(()=>{this.htmlEditor.setSize(572,288),this.htmlEditor.refresh(),this.htmlEditor.focus()},1),"tests"===this.view&&this.testsEditor&&setTimeout(()=>{this.testsEditor.setSize(572,288),this.testsEditor.refresh(),this.testsEditor.focus()},1)},getMirrorTheme(){return"light"===this.theme?"mdn-like":"noflo"},themeChanged(){this.htmlEditor&&this.testsEditor&&(this.htmlEditor.setOption("theme",this.getMirrorTheme()),this.testsEditor.setOption("theme",this.getMirrorTheme()))},prepareHtmlEditor(){"noflo-browser"===this.type&&(this.htmlEditor=Qr()(this.$.html_editor,{lineNumbers:!0,value:this.graph.properties.environment.content||"",language:"htmlmixed",theme:this.getMirrorTheme()}))},prepareTestsEditor(){this.spec&&(this.testsEditor=Qr()(this.$.tests_editor,{lineNumbers:!0,value:this.spec.code||"",mode:this.getMirrorMode(this.spec.language),theme:this.getMirrorTheme()}))},getMirrorMode:e=>"coffeescript"===e||"javascript"===e||"yaml"===e?e:"c"===e?"text/x-csrc":"c++"===e?"text/x-c++src":"supercollider"===e?"text/x-stsrc":"clike",save(){"function"==typeof ga&&ga("send","event","button","click","saveGraphProperties");const e=JSON.parse(JSON.stringify(this.graph.properties.environment));if(this.htmlEditor&&(this.preview=this.htmlEditor.getValue(),e.content=this.preview),this.testsEditor&&this.spec){const e=this.testsEditor.getValue();e!==this.spec.code&&(this.set("spec.code",e),this.set("spec.changed",!0),this.fire("specschanged",this.spec))}e.type=this.type,this.graph.setProperties({environment:e,description:this.description,icon:this.icon}),this.close()},delete(e){e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","deleteGraph"),this.fire("delete",this.graph),this.close()},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},setView(e){this.view=e.currentTarget.id},listeners:{click:"close"},_computeClass(e){return this.tokenList({selected:"properties"===e})},_computeIf:e=>"noflo-browser"===e,_computeClass2(e){return this.tokenList({hidden:"properties"!==e})},_computeClass3(e){return this.tokenList({hidden:"html"!==e})},_computeClass4(e){return this.tokenList({hidden:"tests"!==e})},_computeDownload:e=>zr.a.unnamespace(e.name)+".json",_computeHref(e,t){const r=os.a.getGraphHash(e.properties.id,t);return os.a.hashToString(r)},_computeClass5(e){return this.tokenList({selected:"html"===e})},_computeClass6(e){return this.tokenList({selected:"tests"===e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")},getName:e=>zr.a.unnamespace(zr.a.getName(e))}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      p {
        font-size: 13px;
        line-height: 18px;
      }
      p a, label a {
        color: rgb(0, 127, 153);
        text-decoration: none;
      }
      button.delete {
        position: absolute;
        right: 36px;
        border: 0px solid hsla( 0, 98%, 46%, .8) !important;
        color: hsla( 0, 98%, 46%, .8) !important;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1><span>{{getName(component)}}</span></h1>
      <template is="dom-if" if="{{inGraph.length}}">
      <p>Used as component in
      <template is="dom-repeat" items="{{inGraph}}" as="parent">
        <a href\$="{{_computeHref(parent, project)}}">
          <span>{{getName(parent)}}</span>
        </a>
      </template>
      </p>
      </template>
      <template is="dom-if" if="{{errorText}}">
        <div class="error">{{errorText}}</div>
      </template>
      <form>
        <div class="toolbar">
          <!-- <button on-click="{{send}}">Save</button> -->
          <a on-click="close">Cancel</a>
          <button class="delete" on-click="delete">Delete</button>
        </div>
      </form></div>
`,is:"noflo-component-inspector",properties:{component:{value:null,observer:"componentChanged"},inGraph:{type:Array,value:()=>[]},project:{value:null},errorText:{type:String,value:""}},attached(){Gt.dom(document.getElementById("container")).classList.add("blur"),Gt.dom(this).classList.add("modal-content"),this.inGraph=[],this.project&&this.project.graphs.forEach(e=>{e.nodes.forEach(t=>{t.component!==zr.a.unnamespace(this.component.name)&&t.component!==zr.a.namespace(this.component.name,this.project.namespace)||this.push("inGraph",e)})})},detached(){Gt.dom(document.getElementById("container")).classList.remove("blur")},componentChanged(){},delete(e){e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","deleteComponent"),this.fire("delete",this.component),this.close()},bgClick(e){e.stopPropagation()},close(){Gt.dom(this).parentNode&&Gt.dom(Gt.dom(this).parentNode).removeChild(this)},_computeHref(e,t){const r=os.a.getGraphHash(e.properties.id,t);return os.a.hashToString(r)},listeners:{click:"close"},getName:e=>zr.a.unnamespace(zr.a.getName(e))}),Gt({_template:wr.a`
    <style>
      :host {
        background-color: var(--noflo-ui-background);
        -webkit-transform: translateZ(0);
        transform: translateZ(0);
        color: var(--noflo-ui-text);
        font-size: 10px;
        white-space: nowrap;
      }
      input {
        background-color: var(--noflo-ui-background);
        background-image: none;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        border: none;
        padding: 0px;
        padding-right: 10px;
        padding-left: 10px;
        color: var(--noflo-ui-text);
        width: 245px;
        height: 36px;
        display: inline;
      }
      button {
        width: 36px;
        height: 36px;
        margin: 0px;
        margin-left: -5px;
        padding: 0px;
        display: inline;
        display: inline;

        font-size: 10px;
        background-color: transparent;
        border: none;
        color: var(--noflo-ui-text);
        text-align: center;
        cursor: pointer;
      }

      :host(.overlay) #breadcrumb {
        width: calc(72px * 4);
        display: block;
      }
      #breadcrumb {
        position: relative;
        overflow: hidden;
        width: 0px;
        height: 71px;
        left: 0px;
        top: 0px;
        z-index: 1;

        /*transition: width 0.3s ease-in-out;*/
        display: none;
        /*box-sizing: border-box;*/

        background-color: var(--noflo-ui-background) !important;
        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);
        background-size: calc(100% - 1px);
        background-position: 0px;
        border-bottom: 1px var(--noflo-ui-border) solid;

      }
      #breadcrumb noflo-icon.fa-search {
        position: absolute;
        line-height: 72px;
        right: 54px;
        font-size: 15px;
        color: var(--noflo-ui-text-highlight);
        cursor: text;
      }
      #breadcrumb #parentlink {
        line-height: 72px;
        display: inline-block;
        height: 72px;
        font-size: 15px;
        color: var(--noflo-ui-text-highlight);
      }
      #clear,
      #breadcrumb #graphinspector,
      #breadcrumb #componentinspector,
      #breadcrumb #readonly-lock {
        position: absolute;
        right: 9px;
        top: 0px;
        line-height: 72px;
        display: block;
        height: 72px;
        font-size: 15px;
        color: var(--noflo-ui-text-highlight);
      }
      #clear {
        color: var(--noflo-ui-border-highlight);
      }
      #breadcrumb h1 {
        display: inline-block;
        line-height: 72px;
        font-size: 15px;
        margin: 0px;
        padding: 0px;
        overflow: hidden;
        text-overflow: ellipsis;
        width: 156px;
        font-weight: normal;
        padding-left: 18px;
        cursor: pointer;
      }
      :host(.overlay) #searchinput {
        display: none;
      }
      #searchinput {
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        display: block;
        position: absolute;
        top: 0px;
        left: 0px;
        border: none;
        padding: 0px;
        padding-right: 54px;
        padding-left: 18px;
        width: calc(72px * 3 - 1px);
        height: 71px;
        font-size: 12px;
        display: inline;
        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);
        background-size: calc(100% - 1px);
        background-position: 0px;
        border-bottom: 1px var(--noflo-ui-border) solid;
        border-right: 1px var(--noflo-ui-border) solid;
        border-radius: none;
      }
      #searchinput #speech {
        color: var(--noflo-ui-text-highlight);
      }

      #searchinput.components {
        background-color: var(--noflo-ui-text);
        transition: background-color 0.3s linear;
      }
      #searchinput.components::-webkit-input-placeholder {
        color: hsl(190, 90%, 45%);
        color: var(--noflo-ui-text-highlight);
      }
      #searchinput.processes {
        background-color: hsl(161, 79%, 68%);
        transition: background-color 0.3s linear;
      }
      #searchinput.processes::-webkit-input-placeholder {
        color: hsl(190, 90%, 45%);
      }
    </style>
    <div id="breadcrumb" on-click="focus">
      <template is="dom-if" if="{{_canSearch(component, readonly)}}">
      <noflo-icon class="fa-search" icon="search"></noflo-icon>
      </template>
      <h1 title="Search">
        <template is="dom-if" if="{{_canGoBack(project, graphs, component)}}">
        <button id="parentlink" title="Back" on-click="goBack">
          <noflo-icon icon="angle-left"></noflo-icon>
        </button>
        </template>
        <template is="dom-if" if="{{_isGraph(component, graph)}}">
        <span>{{getName(graph)}}</span>
        </template>
        <template is="dom-if" if="{{_isComponent(component)}}">
        <span>{{getName(component)}}</span>
        </template>
      </h1>
      <template is="dom-if" if="{{_canInspectGraph(component, graph, readonly)}}">
      <button on-click="showGraphInspector" id="graphinspector" title="Graph properties">
        <noflo-icon icon="cog"></noflo-icon>
      </button>
      </template>
      <template is="dom-if" if="{{_canInspectComponent(component, graph, readonly)}}">
      <button on-click="showComponentInspector" id="componentinspector" title="Component properties">
        <noflo-icon icon="cog"></noflo-icon>
      </button>
      </template>
      <template is="dom-if" if="{{_isReadOnly(component, graph, readonly)}}">
      <button title="Read-only" id="readonly-lock">
        <noflo-icon icon="lock"></noflo-icon>
      </button>
      </template>
    </div>
    <input id="searchinput" placeholder="Search components" on-keydown="switchSearch" value="{{search::input}}" type="text" autocapitalize="off" autocorrect="off" x-webkit-speech="">
    <button id="clear" on-click="clearSearch" title="Clear search">
      <noflo-icon icon="times"></noflo-icon>
    </button>
`,is:"noflo-search",properties:{component:{value:null,notify:!0,observer:"componentChanged"},editor:{value:null,notify:!0},graph:{value:null},graphInspector:{value:null},graphs:{type:Array,value:()=>[],notify:!0,observer:"graphsChanged"},menuCard:{value:null},theme:{type:String,value:"dark"},panel:{value:null},parentPath:{type:Array,value:()=>[]},project:{value:null},readonly:{type:Boolean,value:!0,notify:!0,observer:"readonlyChanged"},results:{notify:!0},resultsCard:{value:null},runtimes:{type:Array,value:()=>[]},search:{value:null,observer:"searchChanged"},searchGraphResults:{type:Array,value:()=>[],notify:!0,observer:"searchGraphResultsChanged"},searchLibrary:{type:Boolean,value:!0},searchLibraryResults:{type:Array,value:()=>[],notify:!0,observer:"searchLibraryResultsChanged"}},readonlyChanged(){this.readonly&&this.blur()},componentChanged(){this.component&&this.component.name?this.closeInspectors():this.graphsChanged()},graphsChanged(){this.closeInspectors(),this.blur()},closeInspectors(){this.graphInspector&&(Et(this.graphInspector).parentNode&&Et(Et(this.graphInspector).parentNode).removeChild(this.graphInspector),this.graphInspector=null),this.componentInspector&&(Et(this.componentInspector).parentNode&&Et(Et(this.componentInspector).parentNode).removeChild(this.componentInspector),this.componentInspector=null)},getParentPath(e,t){const r=[];if(!this.project)return r;const n=(e,t)=>t.nodes.filter(t=>t.id===e||(t.component===e||!!this.project&&(t.component===`${this.project.namespace}/${e}`||t.component===`${this.project.id}/${e}`)))[0];return e.forEach((o,i)=>{if(!t&&i>=e.length-1)return;if(0===i)return void r.push(o.properties.id);const s=e[i-1],a=n(o.name,s);a&&r.push(a.id)}),r},libraryResults(e){this.set("searchLibraryResults",[]),this.set("searchLibraryResults",e)},graphResults(e){this.push("searchGraphResults",e)},attached(){Et(this).classList.add("gpu"),this.blur()},focus(){this.readonly||this.component&&this.component.name||(Et(this).classList.remove("overlay"),this.$.searchinput.focus(),null===this.search&&(this.search=""))},blur(){this.clearResults(),Et(this).classList.add("overlay")},toggle(){Et(this).classList.contains("overlay")?this.focus():this.blur()},clearResults(){this.set("searchGraphResults",[]),this.set("searchLibraryResults",[])},clearSearch(){this.resultsCard&&(Et(Et(this.resultsCard).parentNode).removeChild(this.resultsCard),this.resultsCard=null),this.search=null,this.blur()},switchSearch(e){"U+0009"===e.keyIdentifier&&(e.preventDefault(),this.searchLibrary=!this.searchLibrary,this.searchLibrary?(Et(this.$.searchinput).classList.add("components"),Et(this.$.searchinput).classList.remove("processes"),this.set("$.searchinput.placeholder","Search components")):(Et(this.$.searchinput).classList.add("processes"),Et(this.$.searchinput).classList.remove("components"),this.set("$.searchinput.placeholder","Search processes")),this.searchChanged()),e.stopPropagation()},searchChanged(){this.clearResults(),this.search&&"function"==typeof ga&&ga("send","event","search","input","newSearch"),this.resultsCard&&(this.set("resultsCard.children.0.search",this.search),this.set("resultsCard.search",this.search));const e=this.searchLibrary?"search:library":"search:graph";this.fire(e,{search:this.search})},searchLibraryResultsChanged(){if(!this.searchLibrary)return;if(this.resultsCard&&"noflo-search-library-results"!==this.resultsCard.type&&(Et(Et(this.resultsCard).parentNode).removeChild(this.resultsCard),this.resultsCard=null),this.resultsCard||null===this.search)return this.set("resultsCard.children.0.results",[]),void this.set("resultsCard.children.0.results",this.searchLibraryResults);if(0===this.searchLibraryResults.length)return void(this.resultsCard&&(Et(Et(this.resultsCard).parentNode).removeChild(this.resultsCard),this.resultsCard=null));const e=document.createElement("noflo-search-library-results");e.id="results",e.search=this.search,e.results=this.searchLibraryResults,e.addEventListener("resultclick",()=>{this.clearSearch()}),this.resultsCard=document.createElement("the-card"),this.set("resultsCard.type","noflo-search-library-results"),Et(this.resultsCard).appendChild(e),this.resultsCard.addTo(this.panel,!0)},searchGraphResultsChanged(){if(this.searchLibrary)return;if(this.resultsCard&&"noflo-search-graph-results"!==this.resultsCard.type&&(Et(Et(this.resultsCard).parentNode).removeChild(this.resultsCard),this.resultsCard=null),this.resultsCard||null===this.search)return this.set("resultsCard.children.0.results",[]),void this.set("resultsCard.children.0.results",this.searchGraphResults);if(0===this.searchGraphResults.length)return void(this.resultsCard&&(Et(Et(this.resultsCard).parentNode).removeChild(this.resultsCard),this.resultsCard=null));const e=document.createElement("noflo-search-graph-results");e.id="results",e.editor=this.editor,e.search=this.search,e.results=this.searchGraphResults,e.addEventListener("resultclick",()=>{this.clearSearch()}),this.resultsCard=document.createElement("the-card"),this.set("resultsCard.type","noflo-search-graph-results"),Et(this.resultsCard).appendChild(e),this.resultsCard.addTo(this.panel,!0)},goBack(e){e&&(e.stopPropagation(),e.preventDefault());const t=this.getParentPath(this.graphs,this.component);if(this.project.runtime)return t.unshift(this.project.runtime),t.unshift("runtime"),void this.fire("hash",t);t.unshift(this.project.id),t.unshift("project"),this.fire("hash",t)},showGraphInspector(e){e&&(e.stopPropagation(),e.preventDefault()),0!==this.graphs.length&&(Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||("function"==typeof ga&&ga("send","event","search","click","graphProperties"),this.graphInspector=document.createElement("noflo-graph-inspector"),this.set("graphInspector.graph",this.graph),this.set("graphInspector.project",this.project),this.set("graphInspector.runtimes",this.runtimes),this.set("graphInspector.theme",this.theme),this.graphInspector.addEventListener("delete",e=>{this.fire("deleteGraph",e.detail)}),this.graphInspector.addEventListener("specschanged",e=>{this.fire("specschanged",e.detail)}),Et(document.body).appendChild(this.graphInspector)))},showComponentInspector(e){e&&(e.stopPropagation(),e.preventDefault()),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||("function"==typeof ga&&ga("send","event","search","click","componentProperties"),this.componentInspector=document.createElement("noflo-component-inspector"),this.set("componentInspector.component",this.component),this.set("componentInspector.project",this.project),this.componentInspector.addEventListener("delete",e=>{this.fire("deleteComponent",e.detail)}),Et(document.body).appendChild(this.componentInspector))},_canSearch:(e,t)=>!(t||e&&e.name),_canGoBack:(e,t,r)=>!!e&&!!(t.length>1||t.length&&r),_isGraph:(e,t)=>t&&(!e||!e.name),_isComponent:e=>e&&e.name,_canInspectGraph:(e,t,r)=>!r&&t&&(!e||!e.name),_canInspectComponent:(e,t,r)=>!r&&!t&&e&&e.name,_isReadOnly:(e,t,r)=>r||e&&e.readonly||t&&t.properties.readonly,getName:e=>zr.a.unnamespace(zr.a.getName(e))}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Create new component</h1>
      <form>
        <div class="modal-content">
        <label>
          Component name
          <input type="text" value="{{name::input}}" placeholder="MyCoolComponent" required="">
        </label>
        <label>
          Component description
          <input type="text" value="{{description::input}}" placeholder="Do something interesting">
        </label>
        <label>
          Language
          <select name="type" value="{{language::input}}">
            <template is="dom-repeat" items="{{languages}}" as="lang">
            <option value="[[lang.id]]" selected\$="[[_languageSelected(lang, language)]]">[[lang.label]]</option>
            </template>
          </select>
        </label>
        <label>
          Icon
          <noflo-icon-selector selected="{{icon}}"></noflo-icon-selector>
        </label>
        </div>
        <div class="toolbar">
          <button on-click="send" class\$="{{_computeClass(canSend)}}">Create</button>
          <a on-click="close">Cancel</a>
        </div>
      </form>
    </div>
`,is:"noflo-new-component",properties:{canSend:{type:Boolean,value:!1},language:{type:String,value:""},type:{type:String,value:"",notify:!0,observer:"typeChanged"},languages:{type:Array,value:()=>[{id:"c",label:"C"},{id:"c++",label:"C++"},{id:"coffeescript",label:"CoffeeScript"},{id:"es2015",label:"JavaScript (modern ES2015)"},{id:"javascript",label:"JavaScript"},{id:"typescript",label:"TypeScript"},{id:"python",label:"Python"},{id:"supercollider",label:"SuperCollider"},{id:"yaml",label:"YAML"}]},name:{type:String,value:"",observer:"nameChanged"},description:{type:String,value:""},icon:{type:String,value:"cog",notify:!0},project:{type:Object,value:()=>({}),notify:!0}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},typeChanged(){if(!this.type)return;const e=Cr.a[this.type];if(!e||!e.componenttemplates)return;const t=this.languages;this.languages=t.filter(t=>!!e.componenttemplates[t.id]),this.languages.length||(this.languages=t),this.language=e.preferredlanguage||this.languages[0].id},nameChanged(){let e=[];this.name&&(this.name=this.name.replace(/[^a-zA-Z0-9]+/g,"_")),this.project&&(e=this.project.components.filter(e=>e.name===this.name),e=e.concat(this.project.graphs.filter(e=>e.name===this.name))),this.name&&this.project&&!e.length?this.canSend=!0:this.canSend=!1},send(e){e&&e.preventDefault(),this.name&&("function"==typeof ga&&ga("send","event","button","click","newComponent"),this.fire("new",{id:`${this.project.id}/${this.name}`,name:this.name,description:this.description,language:this.language,icon:this.icon,project:this.project.id,code:this.getExampleCode(this.language),tests:""}),this.fire("newSpec",{id:`${this.project.id}/${this.name}`,name:this.name,code:this.getExampleSpec(),language:"yaml",project:this.project.id,type:"spec"}),this.close())},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},_languageSelected:(e,t)=>e.id===t,tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")},getExampleCode(e){if(!this.type)return"";const t=Cr.a[this.type];let r=e;"es6"===r&&(r="es2015");let n="";if(t&&t.componenttemplates&&t.componenttemplates[r]&&(n=t.componenttemplates[r]),n){n=rs.template(n)({namespace:this.project.namespace||this.project.id,name:this.name,description:this.description,icon:this.icon})}return n},getExampleSpec(){let e="";return e+=`name: ${this.name} component\n`,e+=`topic: ${this.project.namespace||this.project.id}/${this.name}\n`,e+="cases:\n",e+="  -\n",e+="    name: with an input packet\n",e+="    assertion: should send the same packet out\n",e+="    inputs:\n",e+="      in: true\n",e+="    expect:\n",e+="      out:\n",e+="        equals: true\n",e}}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      button.delete {
        position: absolute;
        right: 36px;
        border: 0px solid hsla( 0, 98%, 46%, .8) !important;
        color: hsla( 0, 98%, 46%, .8) !important;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1><span>{{project.name}}</span> settings</h1>
      <div class="modal-content">
      <template is="dom-if" if="{{errorText}}">
        <div class="error">{{errorText}}</div>
      </template>
      <form>
        <label>
          <span>GitHub repository</span>
          <input type="text" value="{{repo::input}}" placeholder="username/my-project" autocapitalize="off" autocorrect="off" required="">
        </label>
        <label>
          <span>Project label</span>
          <input type="text" value="{{name::input}}" placeholder="My Cool Project" required="">
        </label>
        <label>
          <span>Project namespace</span>
          <input type="text" value="{{namespace::input}}" placeholder="my-cool-project" required="">
        </label>
        <label>
          <span>Main graph</span>
          <select name="type" value="{{main::input}}">
            <template is="dom-repeat" items="[[_getMainGraphs(project.graphs)]]" as="graph">
              <option value="{{graph.properties.id}}" selected\$="[[_mainSelected(graph.properties.id, main)]]">{{graph.name}}</option>
            </template>
          </select>
        </label>
        </form>
      </div>
      <div class="toolbar">
        <button on-click="send">Save</button>
        <a on-click="close">Cancel</a>
        <a href="https://github.com/new" target="_blank">New Repository</a>
        <button class="delete" on-click="delete">Delete</button>
      </div>
      </div>
`,is:"noflo-project-inspector",properties:{errorText:{type:String,value:""},main:{type:String,value:""},name:{type:String,value:""},namespace:{type:String,value:""},originalRepo:{type:String,value:""},project:{observer:"projectChanged"},repo:{type:String,value:""}},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},projectChanged(){this.originalRepo=this.project.repo,this.repo=this.project.repo,this.name=this.project.name,this.namespace=this.project.namespace||this.project.id,this.main=this.project.main},updateProject(){this.fire("updated",{id:this.project.id,name:this.name,namespace:this.namespace,main:this.main,type:this.project.type,repo:this.repo}),this.close()},send(e){e&&e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","saveProjectProperties"),this.updateProject()},delete(e){e.preventDefault(),"function"==typeof ga&&ga("send","event","button","click","deleteProject"),this.fire("delete",this.project),this.close()},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_mainSelected:(e,t)=>e===t,_getMainGraphs:e=>e.filter(e=>e.properties.main)}),Gt({_template:wr.a`
    <style include="noflo-modal-styles">
      table th {
        text-align: left;
      }
    </style>
    <div class="modal-container" on-click="bgClick">
      <h1>Synchronize with <noflo-icon icon="github"></noflo-icon> <span>{{operation.repo}}</span></h1>
      <div class="modal-content">
      <template is="dom-if" if="{{statusText}}">
        <div>{{statusText}}</div>
      </template>
      <form>
        <table>
          <template is="dom-repeat" items="{{files}}" as="file">
          <tr>
            <th>{{file.path}}</th>
            <td>
              <select name="{{file.path}}" on-change="choose">
                <template is="dom-repeat" items="{{file.operations}}" as="op">
                <option value="[[op]]" selected\$="[[_isSelectedOp(file, op)]]">[[_getOperationLabel(op)]]</option>
                </template>
              </select>
            </td>
          </tr>
          </template>
        </table>
        <template is="dom-if" if="{{hasPush}}">
          <label>
            <span>Commit message</span>
            <input type="text" value="{{message::input}}" required="">
          </label>
        </template>
      </form>
      </div>
      <div class="toolbar">
        <button on-click="send" class\$="{{_computeClass(hasOp)}}">Synchronize</button>
        <a on-click="close">Cancel</a>
      </div>
    </div>
`,is:"noflo-project-sync",properties:{files:{type:Array,value:()=>[],notify:!0,observer:"filesChanged"},hasOp:{type:Boolean,value:!0},hasPush:{type:Boolean,value:!1},message:{type:String,value:""},operation:{type:Object,value:()=>({repo:"",push:[],pull:[],conflict:[],noop:[]}),observer:"operationChanged"},statusText:{type:String,value:""}},operationChanged(){this.operation.push.length||this.operation.pull.length||this.operation.conflict.length||(this.statusText="All changes have been synchronized",this.hasOp=!1),this.hasPush=!1,this.operation.conflict.forEach(e=>{this.push("files",{path:e.path,operation:"noop",operations:["push","pull","noop"]})}),this.operation.push.forEach(e=>{this.push("files",{path:e.path,operation:"noop",operations:["push","noop"]})}),this.operation.pull.forEach(e=>{this.push("files",{path:e.path,operation:"pull",operations:["pull","noop"]})}),this.filesChanged()},filesChanged(){let e=!1,t=!1;this.files.forEach(r=>{"push"===r.operation&&(e=!0,t=!0),"pull"===r.operation&&(t=!0)}),this.hasPush=e,this.hasOp=t},attached(){Et(document.getElementById("container")).classList.add("blur"),Et(this).classList.add("modal-content")},detached(){Et(document.getElementById("container")).classList.remove("blur")},send(e){if(e&&e.preventDefault(),this.hasPush&&!this.message)return;const t=this.operation.conflict,r=this.operation.push,n=this.operation.pull;this.set("operation.conflict",[]),this.set("operation.pull",[]),this.set("operation.push",[]);const o=e=>{this.files.forEach(t=>{t.path===e.path&&("push"===t.operation&&this.push("operation.push",e),"pull"===t.operation&&this.push("operation.pull",e))})};t.forEach(o),r.forEach(o),n.forEach(o),this.set("operation.message",this.message),this.fire("sync",this.operation),this.close()},choose(e){let t=null,r=null;this.files.forEach((n,o)=>{n.path===e.currentTarget.name&&(t=o,r=n)}),null!==t&&(this.splice("files",t,1,{id:e.currentTarget.name,path:r.path,operation:e.currentTarget.value,operations:r.operations}),this.filesChanged())},bgClick(e){e.stopPropagation()},close(){Et(this).parentNode&&Et(Et(this).parentNode).removeChild(this)},listeners:{click:"close"},_computeClass(e){return this.tokenList({disabled:!e})},tokenList(e){const t=[];return Object.keys(e).forEach(r=>{e[r]&&t.push(r)}),t.join(" ")},_getOperationLabel:e=>"push"===e?"Push":"pull"===e?"Pull":"noop"===e?"Ignore":e,_isSelectedOp:(e,t)=>t===e.operation}),Gt({_template:wr.a`
    <style>
      :host {
        display: block;
      }
      h2 {
        font-size: 16px;
        line-height: 36px;
        text-transform: none;
        font-weight: normal;
        padding: 0px;
        margin: 0px;
      }
      ul.graphs {
        margin-bottom: 144px;
      }
      ul.graphs li {
        width: 245px;
        height: 70px;
        overflow: hidden;
        float: left;
        text-align: center;
        background-color: hsl(190, 90%, 45%);
        color: black;
        border-radius: 3px;
        margin-right: 0px;
        margin-left: 0px;
        margin-bottom: 5px;
        position: relative;
        cursor: pointer;
      }
      ul.graphs li.add {
        background-color: var(--noflo-ui-text);
        color: var(--noflo-ui-background);
        cursor: default;
      }
      ul.graphs li the-graph-thumb {
        display: block;
        position: absolute;
        left: 100px;
        top: -20px;
      }
      ul.graphs li noflo-icon {
        display: block;
        position: absolute;
        right: 17px;
        top: 17px;
        font-size: 36px;
        color: black;
      }
      ul.graphs li button {
        display: block;
        position: absolute;
        right: 17px;
        top: 17px;
        background-color: transparent;
        color: hsl(190, 100%, 30%);
        border: 1px solid hsl(190, 100%, 30%);
        font-size: 13px;
        border-radius: 3px;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        height: 36px;
        padding-left: 13px;
        padding-right: 13px;
      }
      ul.graphs li h2 {
        position: absolute;
        top: 18px;
        left: 17px;
        width: 75px;
        text-transform: none;
        font-size: 13px;
        text-align: left;
        white-space: nowrap;
      }
      header h1 {
        text-align: center;
        height: 36px;
        line-height: 36px;
        font-size: 17px;
        white-space: nowrap;
        max-width: 100%;
        overflow-x: hidden;
        text-overflow: ellipsis;
        padding-left: 36px;
        box-sizing: border-box;
      }
      main ul {
        margin: 0px;
        padding: 0px;
        list-style: none;
      }
      main ul li {
        line-height: 36px;
        min-height: 36px;
      }
      main ul li a {
        color: var(--noflo-ui-text);
        text-decoration: none;
        display: block;
        cursor: pointer;
      }
      main ul li a i {
        float: right;
        line-height: 36px;
        color: var(--noflo-ui-border);
        margin-right: 4px;
      }
      main {
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        max-height: calc(100% - 72px);
        padding-left: 36px;
      }
      main.repo {
        max-height: calc(100% - 72px * 2);
      }
      main::-webkit-scrollbar {
        display: none;
      }
      footer {
        background-color: transparent;
        display: block;
        position: absolute;
        bottom: 0px;
        left: 0px;
        padding-left: 36px;
        width: 325px;
        padding-right: 36px;
        box-sizing: border-box;
        overflow: hidden;
        height: 72;
        transition: background-color 0.3s ease-in-out;
      }
      the-panel {
        background-color: var(--noflo-ui-background) !important;
        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;
        position: fixed;
        border: 0px solid var(--noflo-ui-border);
        box-sizing: border-box;
        top: 0px;
        border-right-width: 1px;
        height: 100vh;
        padding-right: 36px;
        z-index: 3;
      }
      the-panel:before {
        font-family: FontAwesomeSVG;
        content: '\\f03a';
        color: var(--noflo-ui-border-highlight);
        position: absolute;
        text-align: center;
        right: 0px;
        width: 36px;
        top: 50%;
        top: calc(50% - 7px);
        font-size: 17px;
        opacity: 0.25;
        transition: opacity 0.3s ease-in-out;
      }
      the-panel:not([open]):before {
        cursor: e-resize;
        opacity: 1;
      }
      #account[open] footer {
        background-color: hsl(190, 90%, 45%);
      }
      footer h1 {
        font-size: 17px;
        line-height: 36px;
        text-align: center;
        margin: 0;

        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      footer button {
        background-color: white;
        color: hsl(190, 90%, 45%);
        border: none;
        font-size: 13px;
        border-radius: 3px;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        height: 36px;
        padding-left: 17px;
        padding-right: 17px;
        line-height: 36px;
        display: block;
        margin-left: auto;
        margin-right: auto;
        cursor: pointer;
      }
      footer button:disabled {
        opacity: 0.5;
      }
    </style>
    <the-panel id="account" edge="left" size="324" handle="36">
      <header slot="header">
        <template is="dom-if" if="{{project}}">
        <h1>{{project.name}}</h1>
        </template>
        <template is="dom-if" if="{{!project}}">
        <h1>Live mode</h1>
        </template>
      </header>
      <main class\$="{{_computeClass(project)}}">
        <ul>
          <li>
            <a on-click="openHome">
              <noflo-icon icon="home"></noflo-icon>
              Home
            </a>
          </li>
          <template is="dom-if" if="{{project}}">
          <li>
            <a on-click="openSettings">
              <noflo-icon icon="cog"></noflo-icon>
              Settings
            </a>
          </li>
          </template>
        </ul>
        <template is="dom-if" if="{{project}}">
        <template is="dom-if" if="{{_canGraph(project, runtime)}}">
        <h2>Graphs</h2>
        <ul class="graphs">
          <li class="add">
            <h2>New graph</h2>
            <button on-click="newGraph">Create</button>
          </li>
          <template is="dom-repeat" items="{{project.graphs}}" as="graph">
          <li on-click="openGraph" data-id\$="{{graph.properties.id}}">
            <the-graph-thumb graph="{{graph}}" width="200" height="120"></the-graph-thumb>
            <h2>{{getName(graph)}}</h2>
          </li>
          </template>
        </ul>
        </template>
        <template is="dom-if" if="{{_canComponent(project, runtime)}}">
        <h2>Components</h2>
        <ul class="graphs">
          <li class="add">
            <h2>New component</h2>
            <button on-click="newComponent">Create</button>
          </li>
          <template is="dom-repeat" items="{{project.components}}" as="component">
          <li on-click="openComponent" data-id\$="{{component.name}}">
            <h2>{{getName(component)}}</h2>
            <template is="dom-if" if="{{_computeIf(component)}}">
            <noflo-icon icon="coffee"></noflo-icon>
            </template>
            <template is="dom-if" if="{{_computeIf2(component)}}">
            <noflo-icon icon="code"></noflo-icon>
            </template>
          </li>
          </template>
        </ul>
        </template>
        </template>
      </main>
      <template is="dom-if" if="{{project.repo}}">
      <footer slot="footer">
        <h1 title="{{project.repo}}">
          <noflo-icon icon="github"></noflo-icon>
          <span>{{project.repo}}</span>
        </h1>
        <button on-click="synchronize">
          <noflo-icon icon="cloud-upload"></noflo-icon>
          <span>Synchronize</span>
        </button>
      </footer>
      </template>
    </the-panel>
`,is:"noflo-project",properties:{component:{value:null,notify:!0},graph:{value:null,notify:!0},project:{value:null,notify:!0},runtime:{value:null,observer:"runtimeChanged"},runtimes:{type:Array,value:()=>[]}},runtimeChanged(){this.runtime&&this.runtime.definition&&this.runtime.definition.capabilities&&(this.canComponent=-1!==this.runtime.definition.capabilities.indexOf("component:setsource"))},newGraph(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;const t=document.createElement("noflo-new-graph");t.project=this.project,t.runtimes=this.runtimes,this.graph&&this.graph.properties.environment?t.type=this.graph.properties.environment.type||this.project.type:t.type=this.project.type,Et(document.body).appendChild(t),t.addEventListener("new",e=>{const t=e.detail;this.push("project.graphs",t),this.fire("newgraph",t),this.gotoGraph(t.properties.id)})},newComponent(e){if(!this.canComponent)return;if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;const t=document.createElement("noflo-new-component");t.project=this.project,this.graph&&this.graph.properties.environment?t.type=this.graph.properties.environment.type||this.project.type:t.type=this.project.type,Et(document.body).appendChild(t),t.addEventListener("new",e=>{const t=e.detail;this.push("project.components",t),this.fire("newcomponent",t),this.gotoComponent(t.name)}),t.addEventListener("newSpec",e=>{const t=e.detail;this.push("project.specs",t),this.fire("newspec",t)})},openHome(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||(this.$.account.toggleOpen(!1),this.fire("hash",[]))},openSettings(e){if(e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length)return;"function"==typeof ga&&ga("send","event","button","click","projectProperties");const t=document.createElement("noflo-project-inspector");t.project=this.project,Et(document.body).appendChild(t),t.addEventListener("updated",e=>{Object.keys(e.detail).forEach(t=>{this.set("project."+t,e.detail[t])}),this.project.repo&&(this.set("project.gist",null),this.project.branch||this.set("project.branch","master")),this.project.graphs.forEach(e=>{if(e.properties.id===this.project.main){const{type:t}=e.properties.environment;this.set("project.mainGraph",e),this.set("project.type",t)}}),this.fire("changed",this.project)}),t.addEventListener("delete",e=>{this.$.account.toggleOpen(!1),this.fire("deleteProject",e.detail)})},gotoGraph(e){this.$.account.toggleOpen(!1),this.fire("hash",os.a.getGraphHash(e,this.project)),this.$.account.toggleOpen(!1)},gotoComponent(e){this.$.account.toggleOpen(!1),this.fire("hash",os.a.getComponentHash(e,this.project)),this.$.account.toggleOpen(!1)},openGraph(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||("function"==typeof ga&&ga("send","event","button","click","openGraph"),this.gotoGraph(e.currentTarget.getAttribute("data-id")))},openComponent(e){e.preventDefault(),Et(document).querySelectorAll(".modal-content:not(polymer-element)").length||("function"==typeof ga&&ga("send","event","button","click","openComponent"),this.gotoComponent(e.currentTarget.getAttribute("data-id")))},synchronize(e){e.preventDefault(),e.stopPropagation(),"function"==typeof ga&&ga("send","event","button","click","syncGithub"),this.fire("sync",{repo:this.project.repo,project:this.project}),this.$.account.toggleOpen(!1)},confirm(e){const t=document.createElement("noflo-project-sync");t.operation=e,Et(document.body).appendChild(t),t.addEventListener("sync",e=>{"function"==typeof ga&&(e.detail.push.length&&ga("send","event","button","click","pushGithub"),e.detail.pull.length&&ga("send","event","button","click","pullGithub")),this.fire("syncDecision",e.detail)})},_computeClass:e=>e&&e.repo?"repo":"norepo",_computeIf:e=>"coffeescript"===e.language,_computeIf2:e=>"coffeescript"!==e.language,_canGraph(){return!(this.runtime&&this.runtime.definition&&this.runtime.definition.capabilities)||-1!==this.runtime.definition.capabilities.indexOf("protocol:graph")},_canComponent(){return!(this.runtime&&this.runtime.definition&&this.runtime.definition.capabilities)||-1!==this.runtime.definition.capabilities.indexOf("component:setsource")},getName:e=>zr.a.unnamespace(zr.a.getName(e))}),Gt({_template:wr.a`
    <style>
      :host {
        -webkit-user-select: none;      /* disable cut copy paste */
        -webkit-touch-callout: none;    /* disable callout, image save panel */
        user-select: none;
        touch-callout: none;

        cursor: ew-resize;

        display: inline-block;
        text-align: center;      
      }
    </style>
`,is:"number-scrubber",properties:{distance:{type:Number,value:5,notify:!0},max:{value:()=>1/0,notify:!0},min:{value:()=>-1/0,notify:!0},mod:{type:Number,value:0,notify:!0},precision:{type:Number,value:1e6},scrubend:{value:null},scrubstart:{value:null},startValue:{type:Number,value:0},step:{type:Number,value:1,notify:!0},value:{value(){},notify:!0}},onTrackStart(){document.body.style.webkitUserSelect="none",document.body.style.MozUserSelect="none",document.body.style.msUserSelect="none",document.body.style.userSelect="none",document.body.style.cursor="ew-resize",this.fire("scrubstart"),void 0!==this.value&&(this.value=parseFloat(this.value),this.startValue=this.value)},onTrack(e){if(void 0===this.value)return;let t=e.dx;this.distance>1&&(t=Math.round(t/this.distance)),1!==this.step&&(this.step>1?t=Math.round(t/this.step)*this.step:this.step>0&&(t*=this.step));let r=this.startValue+t;0!==this.mod&&(r%=this.mod),Number.isFinite(this.min)&&(r=Math.max(r,this.min)),Number.isFinite(this.max)&&(r=Math.min(r,this.max)),this.precision>1&&(r=Math.round(r*this.precision)/this.precision),this.value!==r&&(this.value=r,this.fire("scrub",this.value))},onTrackEnd(){document.body.style.webkitUserSelect="auto",document.body.style.MozUserSelect="auto",document.body.style.msUserSelect="auto",document.body.style.userSelect="auto",document.body.style.cursor="auto",this.fire("scrubend")},hostAttributes:{"touch-action":"none"},listeners:{trackstart:"onTrackStart",track:"onTrack",trackend:"onTrackEnd"}});r(103);Gt({_template:wr.a`
    <style include="the-card-styles">
      .editable-title {
        line-height: 36px;
        margin: 0px;
        padding: 0px;
        background-color: var(--noflo-ui-background-shadow);
        color: var(--noflo-ui-text);
        border: 0px;
        display: block;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        font-size: 12px;
        font-weight: 700;
      }
      .ports {
        margin-bottom: 8px;
      }
      ul.ports li {
        display: block;
        position: relative;
        clear: left;
      }
      ul.ports li label span {
        float: left;
        clear: left;
        font-size: 12px;
        padding-top: 0;
        width: 87px;
        line-height: 36px;
        overflow: hidden;
      }

      ul.ports li p {
        margin: 0px;
        padding: 0px;
        font-size: 10px;
        margin-left: 87px;
        margin-bottom: 3px;
        line-height: 13px;
        max-height: 26px;
        overflow: hidden;
        color: hsl(189, 50%, 80%);
      }

      /* Hide spinners */
      input[type=number]::-webkit-inner-spin-button, 
      input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none; 
        margin: 0; 
      }
      input[type=number] {
        -moz-appearance:textfield;
      }

      ul.ports li button {
        padding: 8px;
        height: 19px;
        width: 19px;
      }
      ul.ports li label button {
        background-color: hsl(184, 50%, 11%);
        color: hsl(184, 40%, 89%);
        display: block;
        padding: 8px;
        height: 36px;
        width: 36px;
      }
      ul.ports li label button:active {
        color: white;
      }
      ul.ports li label i {
        margin:0;
      }
      ul.ports li span.route {
        /* TODO: route colors */
        background-color: white;
        float: none;
        display: inline-block;
        width: 125px;
        height: 1px;
        padding: 0;
      }
      ul.ports .remove-value {
        background-color: transparent !important;
        opacity: .3;
        border: none !important;
        position: absolute;
        top: 0px;
        right: 0px;
        line-height: 36px;
        height: 36px;
        width: 36px;
        text-align: center;
        padding: 0px;
        font-size: 12px;
      }
      ul.ports li span.route0  { background-color: hsl(  0,100%,100%); }
      ul.ports li span.route1  { background-color: hsl(  0, 98%, 46%); }
      ul.ports li span.route2  { background-color: hsl( 35, 98%, 46%); }
      ul.ports li span.route3  { background-color: hsl( 60, 98%, 46%); }
      ul.ports li span.route4  { background-color: hsl(135, 98%, 46%); }
      ul.ports li span.route5  { background-color: hsl(160, 98%, 46%); }
      ul.ports li span.route6  { background-color: hsl(185, 98%, 46%); }
      ul.ports li span.route7  { background-color: hsl(210, 98%, 46%); }
      ul.ports li span.route8  { background-color: hsl(285, 98%, 46%); }
      ul.ports li span.route9  { background-color: hsl(310, 98%, 46%); }
      ul.ports li span.route10 { background-color: hsl(335, 98%, 46%); }
      
      
      ul.ports li input {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
        width: 178px;
        height: 36px;
        border: none;
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        font-size: 10px;
        padding: 9px 26px 9px 36px;
        margin: 0px;
      }
      ul.ports li input[type="checkbox"] {
        height: 18px;
        margin-top: 9px;
        margin-left: 36px;
        width: 18px;
      }
      ul.ports li input[type="checkbox"]:before {
        display: block;
        content: '';
        width: 177px;
        height: 36px;
        margin-top: -9px;
        margin-left: -36px;
        background-color: hsla( 0, 0%, 20%, .2);
        color: hsl( 0, 0%, 75%);
        border-left: 1px solid hsla( 0, 0%, 75%, 0.1);
      }

      ul.ports li select {
        height: 18px;
        margin-top: 9px;
        margin-left: 36px;
        max-width: 110px;
      }

      ul.ports li  input, 
      ul.ports li  button  { 
        background-color: hsla(  0,  0%, 30%, 0.35); 
        color:             hsl(  0,  0%, 90%);
      }
      
      ul.ports li:nth-child(even) input, 
      ul.ports li:nth-child(even) button {
        background-color: hsla(210, 100%, 20%, .1);
      }
      ul.ports li:nth-child(odd) input, 
      ul.ports li:nth-child(odd) button {
        background-color: hsla(190, 100%, 20%, .1);
      }

      ul.ports li.route0  input, 
      ul.ports li.route0  button  { 
        background-color: hsla(  0,  0%, 30%, 0.35); 
      }
      ul.ports li.route1  input, 
      ul.ports li.route1  button  { 
        background-color: hsla(  0, 98%, 20%, 0.35); 
      }
      ul.ports li.route2  input, 
      ul.ports li.route2  button  { 
        background-color: hsla( 35, 98%, 20%, 0.35); 
      }
      ul.ports li.route3  input, 
      ul.ports li.route3  button  { 
        background-color: hsla( 60, 98%, 20%, 0.35); 
      }
      ul.ports li.route4  input, 
      ul.ports li.route4  button  { 
        background-color: hsla(135, 98%, 20%, 0.35); 
      }
      ul.ports li.route5  input, 
      ul.ports li.route5  button  { 
        background-color: hsla(160, 98%, 20%, 0.35); 
      }
      ul.ports li.route6  input, 
      ul.ports li.route6  button  { 
        background-color: hsla(185, 98%, 20%, 0.35); 
      }
      ul.ports li.route7  input, 
      ul.ports li.route7  button  { 
        background-color: hsla(210, 98%, 20%, 0.35); 
      }
      ul.ports li.route8  input, 
      ul.ports li.route8  button  { 
        background-color: hsla(285, 98%, 20%, 0.35); 
      }
      ul.ports li.route9  input, 
      ul.ports li.route9  button  { 
        background-color: hsla(310, 98%, 20%, 0.35); 
      }
      ul.ports li.route10 input, 
      ul.ports li.route10 button  { 
        background-color: hsla(335, 98%, 20%, 0.35); 
      }


      ul.ports li.error input {
        background-color: rgb(121, 18, 18);
        border: 1px solid red;
      }
      
      
      ul.ports li         label > span { color: hsl(  0,  0%, 75%);}  
      ul.ports li.route0  label > span { color: hsl(  0,  0%,100%);}  
      ul.ports li.route1  label > span { color: hsl(  0, 98%, 46%);}
      ul.ports li.route2  label > span { color: hsl( 35, 98%, 46%);}
      ul.ports li.route3  label > span { color: hsl( 60, 98%, 46%);}
      ul.ports li.route4  label > span { color: hsl(135, 98%, 46%);}
      ul.ports li.route5  label > span { color: hsl(160, 98%, 46%);}
      ul.ports li.route6  label > span { color: hsl(185, 98%, 46%);}
      ul.ports li.route7  label > span { color: hsl(210, 98%, 46%);}
      ul.ports li.route8  label > span { color: hsl(285, 98%, 46%);}
      ul.ports li.route9  label > span { color: hsl(310, 98%, 46%);}
      ul.ports li.route10 label > span { color: hsl(335, 98%, 46%);}
      
      

      ul.ports  li        input, 
      ul.ports  li        button {
        border-left: 1px solid hsla(  0,  0%, 75%, 0.5); 
      }
      ul.ports  li.route0 input, 
      ul.ports  li.route0 button {
        border-left: 1px solid hsla(  0,  0%,100%, 0.5); 
      }
      ul.ports  li.route1 input, 
      ul.ports  li.route1 button {
        border-left: 1px solid hsla(  0, 98%, 46%, 0.5);
      }
      ul.ports  li.route2 input, 
      ul.ports  li.route2 button {
        border-left: 1px solid hsla( 35, 98%, 46%, 0.5);
      }
      ul.ports  li.route3 input, 
      ul.ports  li.route3 button {
        border-left: 1px solid hsla( 60, 98%, 46%, 0.5);
      }
      ul.ports  li.route4 input, 
      ul.ports  li.route4 button {
        border-left: 1px solid hsla(135, 98%, 46%, 0.5);
      }
      ul.ports  li.route5 input, 
      ul.ports  li.route5 button {
        border-left: 1px solid hsla(160, 98%, 46%, 0.5);
      }
      ul.ports  li.route6 input, 
      ul.ports  li.route6 button {
        border-left: 1px solid hsla(185, 98%, 46%, 0.5);
      }
      ul.ports  li.route7 input, 
      ul.ports  li.route7 button {
        border-left: 1px solid hsla(210, 98%, 46%, 0.5);
      }
      ul.ports  li.route8 input, 
      ul.ports  li.route8 button {
        border-left: 1px solid hsla(285, 98%, 46%, 0.5);
      }
      ul.ports  li.route9 input, 
      ul.ports  li.route9 button {
        border-left: 1px solid hsla(310, 98%, 46%, 0.5);
      }
      ul.ports li.route10 input, 
      ul.ports li.route10 button {
        border-left: 1px solid hsla(335, 98%, 46%, 0.5);
      }
      
      number-scrubber,
      ul.ports li label span:before {
        display: inline;
        line-height: 36px;
        font-size: 10px;
        float: right;
        position: absolute;
        left: 86px;
        text-transform: uppercase;
        opacity: 0.5;
        width: 36px;
        text-align: center;      
      }

      number-scrubber {
        z-index: 5;
        height: 36px;
      }
      
      ul.ports li.port-type-color label span:before,
      ul.ports li.port-type-int label span:before,
      ul.ports li.port-type-number label span:before {
        content: '#';
      }
      ul.ports li.port-type-array label span:before {
        content: '[]';
      }
      ul.ports li.port-type-object label span:before {
        content: '{}';
      }
      ul.ports li.port-type-string label span:before {
        content: '"';
      }
      ul.ports li.port-type-all label span:before {
        content: '*';
      }

      section.errors header {
        display: flex;
        justify-content: space-between;
      }
      section.errors header h2 {
        font-size: 10px;
        font-weight: normal;
        line-height: 36px;
        margin-bottom: 0px;
        padding-bottom: 0px;
        position: static;
        text-align: left;
        color: var(--noflo-ui-text);
      }
      section.errors ul.toolbar {
        display: inline-block;
      }

      ul#errorEvents {
        max-height: 140px;
        overflow-x: hidden;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        clear: left;
      }
      ul#errorEvents li {
        font-size: 10px;
        line-height: 14px;
        margin-bottom: 0px;
        color: hsl(185,100%,75%);
        max-height: 56px;
        overflow: hidden;
        margin-bottom: 2px;
        padding-bottom: 2px;
        border-bottom: 1px solid hsla(190, 30%, 2%, 0.4);
      }
    </style>
    <header>
      <input type="text" on-keydown="checkUpdateLabel" on-blur="updateLabel" class="editable-title" value="{{label}}">
      <template is="dom-if" if="{{_computeIf(node)}}">
        <h2>{{node.component}}</h2>
      </template>
    </header>
    <ul class="ports">
      <template is="dom-repeat" items="{{inports}}" as="port">
        <li class\$="{{_computeClass(port)}}">
          <label><span title="{{port.name}}">{{port.label}}</span>

            <template is="dom-if" if="{{_computeIf2(port)}}">
              <button data-name\$="{{port.name}}" on-click="sendBang">
                <noflo-icon icon="bolt"></noflo-icon>
              </button>
            </template>
            <template is="dom-if" if="{{_computeIf3(port)}}">
              <input type="checkbox" data-name\$="{{port.name}}" checked="{{port.value}}" on-change="updateValue" data-type\$="{{port.type}}">
            </template>
            <template is="dom-if" if="{{port.values}}">
              <select data-name\$="{{port.name}}" on-change="updateValue" value="{{port.value::input}}" data-type\$="{{port.type}}">
                <option></option>
                <template is="dom-repeat" items="{{port.values}}" as="value">
                  <option value="[[value]]" selected\$="{{_computeSelected(port, value)}}">{{value}}</option>
                </template>
              </select>
            </template>
            <template is="dom-if" if="{{_computeIf4(port)}}">
              <number-scrubber data-name\$="{{port.name}}" value="{{port.value}}" step="1" data-type="int" on-scrubstart="scrubStart" on-scrub="updateValue" on-scrubend="scrubEnd">#</number-scrubber>
              <input type="text" data-type="int" data-name\$="{{port.name}}" value="{{port.value::input}}" on-change="updateValue" on-keydown="checkEnter">
            </template>
            <template is="dom-if" if="{{_computeIf5(port)}}">
              <number-scrubber data-name\$="{{port.name}}" value="{{port.value}}" step="0.01" data-type="number" on-scrubstart="scrubStart" on-scrub="updateValue" on-scrubend="scrubEnd">#</number-scrubber>
              <input type="text" data-type="number" data-name\$="{{port.name}}" value="{{port.value::input}}" on-change="updateValue" on-keydown="checkEnter">
            </template>
            <template is="dom-if" if="{{_computeIf6(port)}}">
              <input type="{{port.inputType}}" data-name\$="{{port.name}}" value="{{port.value::input}}" autocapitalize="off" autocorrect="off" on-keydown="checkEnter" on-change="updateValue" data-type\$="{{port.type}}">
            </template>
            <template is="dom-if" if="{{_computeIf7(port)}}">
              <input type="text" data-name\$="{{port.name}}" data-type="string" on-change="updateValue">
              <input type="file" data-name\$="{{port.name}}" on-change="updateValue" data-type\$="{{port.type}}">
            </template>
            <template is="dom-if" if="{{_computeIf8(port)}}">
              <button class="remove-value" on-click="removeValue" data-port\$="{{port.name}}" title="Clear data">
                <noflo-icon icon="ban"></noflo-icon>
              </button>
            </template>

          </label>
          <template is="dom-if" if="{{port.description}}">
          <p>{{port.description}}</p>
          </template>
        </li>
      </template>
    </ul>
    <template is="dom-if" if="[[errorLog.length]]">
    <section class="errors">
      <header>
        <h2>Errors</h2>
        <ul class="toolbar">
          <li>
            <button id="clear" on-click="clearErrors" class="blue-button" title="Clear Error Log">
              <noflo-icon icon="ban"></noflo-icon>
            </button>
           </li>
        </ul>
      </header>
      <ul id="errorEvents">
        <template is="dom-repeat" items="[[errorLog]]" as="event">
          <li>{{ event.payload.error }}</li>
        </template>
      </ul>
    </section></template>
`,is:"noflo-node-inspector",properties:{component:{value:null,notify:!0,observer:"componentChanged"},errorLog:{value:()=>[],notify:!0},graph:{value:null,notify:!0,observer:"graphChanged"},inports:{type:Array,value:()=>[]},label:{type:String,value:""},lastErrorLog:{type:Number,value:0},node:{value:null,notify:!0,observer:"nodeChanged"},scrubbing:{type:Boolean,value:!1},showErrorLogs:{type:Number,value:20}},attached(){Et(this).classList.add("the-card-content")},nodeChanged(){this.node&&(this.updatePorts(),this.label=this.node.metadata.label)},componentChanged(){this.component&&this.updatePorts()},graphChanged(){this.graph&&this.updatePorts()},checkUpdateLabel(e){13===e.keyCode&&(e.preventDefault(),this.updateLabel(e))},updateLabel(e){const t=e.currentTarget.value;if(t===this.node.metadata.label)return;this.graph.startTransaction("rename");let r=t;if(r!==this.node.id){for(;this.graph.getNode(r);){let e=60466176;e=Math.floor(Math.random()*e),r=`${t}_${e.toString(36)}`}this.graph.renameNode(this.node.id,r)}this.graph.setNodeMetadata(r,{label:t}),this.graph.endTransaction("rename")},getPortValue(e){let t;return this.graph.initializers.forEach(r=>{r.to.node===this.node.id&&r.to.port===e&&(t=r.from.data)}),t},getPortConnection(e){let t=!1,r="X";return Object.keys(this.graph.inports).forEach(n=>{const o=this.graph.inports[n];o.process===this.node.id&&o.port===e&&(t=!0,r=2)}),this.graph.edges.forEach(n=>{n.to.node===this.node.id&&n.to.port===e&&(t=!0,r=n.metadata.route||0)}),{connected:t,route:r}},portToInput(e){const t=this.getPortValue(e.name),r=this.getPortConnection(e.name),n={name:e.name,label:e.name.replace(/(.*)\/(.*)(_.*)\.(.*)/,"$2.$4"),class:"",type:e.type,description:e.description,inputType:e.type,value:t,values:e.values,route:r.route};switch(e.type){case"object":case"array":n.value=JSON.stringify(t),n.inputType="text";break;case"int":n.inputType="number";break;case"all":default:n.inputType="text"}return n},inputToPort(e){switch(e.getAttribute("data-type")){case"object":case"array":try{return JSON.parse(e.value)}catch(t){return e.value}case"boolean":return e.checked;case"number":return parseFloat(e.value);case"int":return parseInt(e.value,10);case"date":return new Date(e.value);case"uri":return t=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.readAsDataURL(e.files[0])};default:return e.value}},updatePorts(){this.set("inports",[]),this.component&&this.graph&&this.component.inports.forEach(e=>{const t=this.portToInput(e);this.push("inports",t)})},checkEnter(e){13===e.keyCode&&(e.preventDefault(),this.updateValue(e))},updateValue(e){e.preventDefault();const t=this.inputToPort(e.currentTarget),r=e.currentTarget.getAttribute("data-name");let n;if(this.inports.forEach(e=>{e.name===r&&(n=e)}),"string"!==n.type&&""===e.currentTarget.value)return void this.removeValue(e);const o=()=>{this.scrubbing||this.graph.startTransaction("iipchange"),this.graph.removeInitial(this.node.id,r),this.graph.addInitial(t,this.node.id,r),this.scrubbing||(this.graph.endTransaction("iipchange"),this.updatePorts())};((e,t)=>{switch(e){case"number":case"int":return""!==t&&!Number.isNaN(t);case"object":return t instanceof Object;case"array":return t instanceof Array;case"date":return t instanceof Date;default:return!0}})(n.type,t)?("function"==typeof t?t(o):o(),Et(Et(Et(e.currentTarget).parentNode).parentNode).classList.remove("error")):Et(Et(Et(e.currentTarget).parentNode).parentNode).classList.add("error")},scrubStart(e){null===e.currentTarget.value&&(e.currentTarget.value=0)},scrubEnd(){},removeValue(e){e.preventDefault();let t=e.currentTarget.getAttribute("data-port");t||(t=e.currentTarget.getAttribute("data-name")),this.graph.removeInitial(this.node.id,t),Et(Et(Et(e.currentTarget).parentNode).parentNode).classList.remove("error"),this.updatePorts()},sendBang(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-name");this.graph.startTransaction("bang"),this.graph.removeInitial(this.node.id,t),this.graph.addInitial(!0,this.node.id,t),this.graph.removeInitial(this.node.id,t),this.graph.endTransaction("bang")},clearErrors(){this.fire("clear:runtimeevents",{id:this.node.id,type:"processerror"})},_computeIf:e=>!e||e.label!==e.component,_computeClass:e=>`route route${e.route} ${e.class} port-type-${e.type}`,_computeIf2:e=>"bang"===e.type,_computeIf3:e=>"boolean"===e.type,_computeIf4:e=>"int"===e.type&&!e.values,_computeIf5:e=>"number"===e.type&&!e.values,_computeIf6:e=>"bang"!==e.type&&"boolean"!==e.type&&"int"!==e.type&&"number"!==e.type&&"uri"!==e.type&&!e.values,_computeIf7:e=>"uri"===e.type,_computeIf8:e=>"bang"!==e.type&&void 0!==e.value,_computeSelected:(e,t)=>e.value===t}),Gt({_template:wr.a`
    <style include="the-card-styles">
      :host {
        display: block;
        background-color: var(--noflo-ui-background) !important;
        color: var(--noflo-ui-text);
        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, hsla(0, 0%, 0%, 0) 1px);
        background-size: calc(100% - 1px) 100%;
        background-position: 0px;
      }
      h1 {
        font-size:15px;
      }
      ul.toolbar2right {
        right: 0px !important;
      }
      ul.routes {
        margin: 0;
        margin-left: 0px;
        margin-right: 0px;
        padding-top: 10px;
      }
      ul.routes li {
        display: inline-block;
        position: relative;
        float: left;
        margin: 0px;
        height: 26px;
      }
      ul.routes li button:hover {
        opacity: 1;
      }
      ul.routes li button {
        opacity: 0.7;
        display: block;
        padding: 0px;
        margin: 0;
        width: 100%;
        height: 100%;
        -webkit-box-sizing: border-box;
           -mox-box-sizing: border-box;
                box-sizing: border-box;
        border: none;
      }

      .routes button {
        width: 25px !important;
        height: 20px !important;
        background-color: hsla(  0, 98%, 100%, .8); 
        border: 1px solid hsl(  0, 98%, 46%);
      }
      .routes button.route0  { 
        background-color: hsla(  0, 98%, 100%, .8); 
        border-color:      hsl(  0, 98%, 46%); 
      }
      .routes button.route1  { 
        background-color: hsla(  0, 98%, 46%, .8); 
        border-color:      hsl(  0, 98%, 46%); 
      }
      .routes button.route2  { 
        background-color: hsla( 35, 98%, 46%, .8); 
        border-color:      hsl( 35, 98%, 46%); 
      }
      .routes button.route3  { 
        background-color: hsla( 60, 98%, 46%, .8); 
        border-color:      hsl( 60, 98%, 46%); 
      }
      .routes button.route4  { 
        background-color: hsla(135, 98%, 46%, .8); 
        border-color:      hsl(135, 98%, 46%); 
      }
      .routes button.route5  { 
        background-color: hsla(160, 98%, 46%, .8); 
        border-color:      hsl(160, 98%, 46%);
      }
      .routes button.route6  { 
        background-color: hsla(185, 98%, 46%, .8); 
        border-color:      hsl(185, 98%, 46%);
      }
      .routes button.route7  { 
        background-color: hsla(210, 98%, 46%, .8); 
        border-color:      hsl(210, 98%, 46%);
      }
      .routes button.route8  { 
        background-color: hsla(285, 98%, 46%, .8); 
        border-color:      hsl(285, 98%, 46%);
      }
      .routes button.route9  { 
        background-color: hsla(310, 98%, 46%, .8); 
        border-color:      hsl(310, 98%, 46%);
      }
      .routes button.route10 { 
        background-color: hsla(335, 98%, 46%, .8); 
        border-color:      hsl(335, 98%, 46%);
      }
      
      .routes  button.route0:hover  { background-color: hsla(  0, 98%, 100%, 1); }
      .routes  button.route1:hover  { background-color: hsla(  0, 98%, 46%, 1); }
      .routes  button.route2:hover  { background-color: hsla( 35, 98%, 46%, 1); }
      .routes  button.route3:hover  { background-color: hsla( 60, 98%, 46%, 1); }
      .routes  button.route4:hover  { background-color: hsla(135, 98%, 46%, 1); }
      .routes  button.route5:hover  { background-color: hsla(160, 98%, 46%, 1); }
      .routes  button.route6:hover  { background-color: hsla(185, 98%, 46%, 1); }
      .routes  button.route7:hover  { background-color: hsla(210, 98%, 46%, 1); }
      .routes  button.route8:hover  { background-color: hsla(285, 98%, 46%, 1); }
      .routes  button.route9:hover  { background-color: hsla(310, 98%, 46%, 1); }
      .routes button.route10:hover  { background-color: hsla(335, 98%, 46%, 1); }
    </style>
    <header>
      <h1 slot="header" class="clear" on-click="clear"><span>{{ edges.length}}</span> <template is="dom-if" if="{{_computeIf(edges)}}">Edges</template><template is="dom-if" if="{{_computeIf2(edges)}}">Edge</template></h1>
    </header>
    <ul class="toolbar toolbar2right">
      <template is="dom-if" if="{{secure}}">
        <li>
          <button class="blue-button" on-click="setUnsecure" title="Set as visible">
            <noflo-icon icon="lock"></noflo-icon>&nbsp;Secure
          </button>
        </li>
      </template>
      <template is="dom-if" if="{{!secure}}">
        <li>
          <button class="blue-button" on-click="setSecure" title="Set as hidden">
            <noflo-icon icon="unlock"></noflo-icon>&nbsp;Visible
          </button>
        </li>
      </template>
    </ul>
    <ul class="routes">
      <template is="dom-repeat" items="{{routes}}" as="route">
        <li><button name="{{route}}" on-click="setRoute" class\$="{{_computeClass(route)}}"></button></li>
      </template>
    </ul>    
`,is:"noflo-edge-menu",properties:{edges:{type:Array,value:()=>[],notify:!0,observer:"edgesChanged"},graph:{value:null},routes:{type:Array,value:()=>[0,1,2,3,4,5,6,7,9,10]},secure:{type:Boolean,value:!1}},attached(){Et(this).classList.add("the-card-content"),Et(this).classList.add("sticky-head")},edgesChanged(){if(this.edges.length){this.secure=!0;for(let e=0;e<this.edges.length;e+=1)if(!this.edges[e].metadata.secure)return void(this.secure=!1)}},clear(e){let t;for(e.preventDefault();this.edges.length;)t=this.pop("edges"),t.selected=!1},remove(e){for(e.preventDefault();this.edges.length;){const e=this.pop("edges");Et(e).parentNode&&Et(Et(e).parentNode).removeChild(e)}},setRoute(e){e.preventDefault();const t=parseInt(e.currentTarget.getAttribute("name"),10);this.graph.startTransaction("changeroute"),this.edges.forEach(e=>{this.graph.setEdgeMetadata(e.from.node,e.from.port,e.to.node,e.to.port,{route:t})}),this.graph.endTransaction("changeroute")},setSecure(e){e.preventDefault(),this.toggleSecure(!0)},setUnsecure(e){e.preventDefault(),this.toggleSecure(!1)},toggleSecure(e){this.graph.startTransaction("changesecure"),this.edges.forEach(t=>{const r=t.metadata;r.secure=e,this.graph.setEdgeMetadata(t.from.node,t.from.port,t.to.node,t.to.port,r)}),this.graph.endTransaction("changesecure"),this.secure=e},_computeIf:e=>e.length>1,_computeIf2:e=>1===e.length,_computeClass:e=>"route"+e}),Gt({_template:wr.a`
    <style include="the-card-styles">
      h1 {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 10px;
        width: 100%;
      }
      h1 .connection {
        text-transform: uppercase;
        font-size: 9px;
      }
      h1 .connection.route0 { color: #fff; }
      h1 .connection.route1 { color: hsl(  0,  98%, 46%); }
      h1 .connection.route2 { color: hsl( 35,  98%, 46%); }
      h1 .connection.route3 { color: hsl( 60,  98%, 46%); }
      h1 .connection.route4 { color: hsl(135,  98%, 46%); }
      h1 .connection.route5 { color: hsl(160,  98%, 46%); }
      h1 .connection.route6 { color: hsl(185,  98%, 46%); }
      h1 .connection.route7 { color: hsl(210,  98%, 46%); }
      h1 .connection.route8 { color: hsl(285,  98%, 46%); }
      h1 .connection.route9 { color: hsl(310,  98%, 46%); }
      h1 .connection.route10 {color: hsl(335,  98%, 46%); }

      ul#events {
        max-height: 140px;
        overflow-x: hidden;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: thin;
        clear: left;
      }
      ul#events li {
        font-size: 10px;
        line-height: 14px;
        margin-bottom: 0px;
        color: var(--noflo-ui-text-highlight);
        overflow: hidden;
        margin-bottom: 4px;
        padding-bottom: 2px;
        border-bottom: 1px hsla(190, 100%, 30%, 0.4) solid;
      }
      ul#events li.openBracket {
        color: var(--noflo-ui-border);
      }
      ul#events li.openBracket:before {
        display: inline;
        content: '<';
      }
      ul#events li.openBracket:after {
        display: inline;
        content: '>';
      }
      ul#events li.closeBracket {
        color: var(--noflo-ui-border);
      }
      ul#events li.closeBracket:before {
        display: inline;
        content: '</';
      }
      ul#events li.closeBracket:after {
        display: inline;
        content: '>';
      }
      ul#events img {
        margin: 5px;
        max-width: 100px;
      }
      button#clear {
        color: var(--noflo-ui-border-highlight)
        position: absolute;
        right: 0px;
        top: 9px;
        line-height: 36px;
        background-color: var(--noflo-ui-background);
      }
    </style>
    <header>
      <h1 slot="header"><span>{{sourceNode}}</span> <span class\$="{{_computeClass(route)}}"><span>{{sourcePort}}</span> ➞ <span>{{targetPort}}</span></span> <span>{{targetNode}}</span></h1>
    </header>
    <template is="dom-if" if="[[log.length]]">
    <ul class="toolbar toolbar2right">
      <li>
        <button id="clear" on-click="clear" class="blue-button" title="Clear log">
          <noflo-icon icon="ban"></noflo-icon>
        </button>
      </li>
    </ul>
    </template>
    <ul id="events">
      <template is="dom-repeat" items="[[log]]" as="packet">
        <li class\$="{{ packet.type }}">
          {{ packet.data }}
        </li>
      </template>
    </ul>
`,is:"noflo-edge-inspector",properties:{edge:{value:null,notify:!0,observer:"edgeChanged"},graph:{value:null,notify:!0},log:{value:()=>[],observer:"logChanged"},route:{type:Number,value:0},sourceNode:{type:String,value:""},sourcePort:{type:String,value:""},targetNode:{type:String,value:""},targetPort:{type:String,value:""}},attached(){Et(this).classList.add("the-card-content")},edgeChanged(){if(!this.edge)return;const e=this.edge.from,t=this.edge.to;this.sourceNode=this.nodeLabel(e.node),this.sourcePort=e.port,this.targetNode=this.nodeLabel(t.node),this.targetPort=t.port,this.route=this.edge.metadata.route},logChanged(){this.$.events.scrollTop=this.$.events.scrollHeight},nodeLabel:e=>Object(Br.unnamespace)(e).split("_")[0],clear(){this.fire("clear:runtimepackets",{edge:this.edge})},_computeClass:e=>"connection route"+e}),Gt({is:"noflo-packets",properties:{currentgraph:{value:null},edgeInspectors:{type:Object,value:()=>({})},edges:{type:Array,value:()=>[],observer:"edgesChanged"},editor:{value:null},events:{type:Array,value:()=>[],observer:"eventsChanged"},packets:{type:Array,value:()=>[],observer:"packetsChanged"},nodeInspectors:{type:Object,value:()=>({})},nodes:{type:Array,value:()=>[],observer:"nodesChanged"},panel:{value:null},readonly:{notify:!0}},attached(){window.addEventListener("keyup",e=>{27===e.keyCode&&this.clearSelection()})},clearSelection(){let e,t;for(;this.edges.length;)e=this.pop("edges"),e.selected=!1;for(;this.nodes.length;)t=this.pop("nodes"),t.selected=!1},edgesChanged(){this.edges.length?this.showEdgeCards():this.hideEdgeCards()},eventsChanged(){this.editor&&this.editor.clearErrorNodes(),Object.keys(this.nodeInspectors).forEach(e=>{this.nodeInspectors[e].inspector.errorLog=[]}),this.events&&this.events.forEach(e=>{"processerror"===e.type&&e.payload.id&&(this.editor&&this.editor.addErrorNode(e.payload.id),this.nodeInspectors[e.payload.id]&&this.nodeInspectors[e.payload.id].inspector.push("errorLog",e))})},genId(e,t){let r;r=e?`${e.node} ${e.port.toUpperCase()}`:"DATA";return`${r} -> ${`${t.port.toUpperCase()} ${t.node}`}`},genEdgeId(e){return this.genId(e.from,e.to)},showEdgeCards(){if(this.edgeMenu)this.readonly?(Et(Et(this.edgeMenu).parentNode).removeChild(this.edgeMenu),this.edgeMenu=null):this.set("edgeMenu.dialog.edges",this.edges);else if(!this.readonly){const e=document.createElement("noflo-edge-menu");e.edges=this.edges,e.graph=this.currentgraph,this.edgeMenu=document.createElement("the-card"),this.set("edgeMenu.type","edge-menu"),this.set("edgeMenu.dialog",e),Et(this.edgeMenu).appendChild(e),this.edgeMenu.addTo(this.panel)}let e;this.edges.forEach(e=>{const t=this.genEdgeId(e);if(this.edgeInspectors[t])return;const r=document.createElement("noflo-edge-inspector");r.log=this.packets.filter(e=>this.genId(e.src,e.tgt)===t),r.graph=this.currentgraph,r.edge=e,this.edgeInspectors[t]=document.createElement("the-card"),this.edgeInspectors[t].type="edge-inspector",this.edgeInspectors[t].inspector=r,Et(this.edgeInspectors[t]).appendChild(r),this.edgeInspectors[t].addTo(this.panel)}),Object.keys(this.edgeInspectors).forEach(t=>{e=!1,this.edges.forEach(r=>{this.genEdgeId(r)===t&&(e=!0)}),e||(Et(Et(this.edgeInspectors[t]).parentNode).removeChild(this.edgeInspectors[t]),delete this.edgeInspectors[t])})},packetsChanged(){this.edges.forEach(e=>{const t=this.genEdgeId(e);this.edgeInspectors[t]&&this.edgeInspectors[t].inspector&&(this.edgeInspectors[t].inspector.log=this.packets.filter(e=>this.genId(e.src,e.tgt)===t))})},hideEdgeCards(){this.edgeMenu&&(Et(Et(this.edgeMenu).parentNode).removeChild(this.edgeMenu),this.edgeMenu=null),Object.keys(this.edgeInspectors).forEach(e=>{Et(Et(this.edgeInspectors[e]).parentNode).removeChild(this.edgeInspectors[e]),delete this.edgeInspectors[e]})},nodesChanged(){this.nodes.length?this.showNodeCards():this.hideNodeCards()},showNodeCards(){let e;this.nodes.forEach(e=>{const{id:t}=e;if(this.nodeInspectors[t])return;if(this.readonly)return;const r=document.createElement("noflo-node-inspector");r.node=e,r.component=this.editor.getComponent(e.component),r.graph=this.currentgraph,this.events&&(r.errorLog=this.events.filter(e=>"processerror"===e.type&&e.payload.id===t)),this.nodeInspectors[t]=document.createElement("the-card"),this.nodeInspectors[t].type="node-inspector",this.nodeInspectors[t].inspector=r,Et(this.nodeInspectors[t]).appendChild(r),this.nodeInspectors[t].addTo(this.panel)}),Object.keys(this.nodeInspectors).forEach(t=>{e=!1,this.nodes.forEach(r=>{r.id===t&&(e=!0)}),e||(Et(Et(this.nodeInspectors[t]).parentNode).removeChild(this.nodeInspectors[t]),delete this.nodeInspectors[t])})},hideNodeCards(){Object.keys(this.nodeInspectors).forEach(e=>{Et(Et(this.nodeInspectors[e]).parentNode).removeChild(this.nodeInspectors[e]),delete this.nodeInspectors[e]})}}),Gt({_template:wr.a`
    <style>
      :host {
        display: block;
        text-align: center;
        background-color: hsl(35, 98%, 46%);
        color: white;
        border-bottom: 1px black solid;
        padding: 18px;
      }
      :host(.error) {
        background-color: hsl(0, 98%, 46%);
      }
      a {
        color: hsl(0, 98%, 46%);
        background-color: white;
        display: inline-block;
        padding: 9px;
        text-decoration: none;
        font-size: 12px;
        border-radius: 3px;
      }

      /* /deep/ animations don't work: https://github.com/Polymer/polymer/issues/141#issuecomment-31887427 */
      /* only animate when on-screen */
      .fa-spin {
        -webkit-animation: none !important;
        animation: none !important;
      }
      :host(.show) .fa-spin {
        -webkit-animation: fa-spin 2s infinite linear !important;
        animation: fa-spin 2s infinite linear !important;
      }
      @-webkit-keyframes fa-spin {
        0% {
          -webkit-transform: rotate(0deg);
          transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(359deg);
          transform: rotate(359deg);
        }
      }
      @keyframes fa-spin {
        0% {
          -webkit-transform: rotate(0deg);
          transform: rotate(0deg);
        }
        100% {
          -webkit-transform: rotate(359deg);
          transform: rotate(359deg);
        }
      }
    </style>
    <template is="dom-if" if="{{isError}}">
      <noflo-icon icon="warning"></noflo-icon>
    </template>
    <template is="dom-if" if="{{_computeIf(isError, offerHTTPS)}}">
      <noflo-icon icon="spinner" class="fa-spin"></noflo-icon>
    </template>
    <template is="dom-if" if="{{offerHTTPS}}">
      <noflo-icon icon="lock"></noflo-icon>
      This app is available securely at <a href="https://app.flowhub.io/">https://app.flowhub.io/</a> - <a href="https://docs.flowhub.io/article/75-security-with-https-and-wss">about</a>
    </template>
    <slot>
    <span>{{message}}</span>
    <template is="dom-if" if="{{isError}}">
      <a href="#" class="button">go home</a>
    </template>
  </slot>
`,is:"noflo-alert",properties:{isError:{type:Boolean,value:!1,notify:!0,observer:"isErrorChanged"},message:{type:String,value:"",notify:!0},offerHTTPS:{type:Boolean,value:!1,notify:!0}},isErrorChanged(){this.isError?Et(this).classList.add("error"):Et(this).classList.remove("error")},_computeIf:(e,t)=>!e&&!t}),Gt({_template:wr.a`
    <style>
      /*
       * z-indexes:
       *
       * Modal dialogs: 5
       * Main screen: 4
       * Panels: 3
       * Context cards & runtime controls: 2
       * Workspace chrome: 1
       * Workspace: 0
       */
      :host {
        display: block;
      }

      noflo-main {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow-y: scroll;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        z-index: 4;
      }
      the-graph-editor {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
      }
      noflo-component-editor {
        position: fixed;
        top: 0;
        left: 36px;
        height: 100vh;
        right: 36px;
        z-index: 0;
      }
      noflo-search {
        position: fixed;
        top: 0px;
        left: 36px;
        width: 288px;
        height: 72px;
        z-index: 2;
      }
      noflo-runtime {
        position: fixed;
        top: 0px;
        right: 36px;
        width: 288px;
        height: 72px;
        z-index: 3;
      }
      noflo-journal {
        position: fixed;
        bottom: 0px;
        right: 36px;
        width: 288px;
        z-index: 3;
      }

      #alert {
        box-sizing: border-box;
        position: fixed;
        top: -144px;
        left: 0;
        right: 0;
        z-index: 10;
        max-height: 144px;
        overflow: hidden;
        transition: top 0.3s ease-in-out;
      }
      #alert.show {
        top: 0;
      }
      #asproject::before {
        content: ' ';
        position: absolute;
        border: 2px solid hsl(185, 98%, 46%);
        border-radius: 6px;
        top: -6px;
        bottom: -6px;
        left: -6px;
        right: -6px;
      }
      #asproject:hover {
        background-color: black;
        color: hsl(185, 98%, 46%);
      }
      #asproject {
        font-family: "SourceCodePro",Helvetica,Arial,sans-serif;
        position: fixed;
        box-sizing: border-box;
        left: 50%;
        transform: translateX(-50%);
        z-index: 9;
        background-color: hsla(185, 98%, 46%, .8);
        border: 1px solid hsl(185, 98%, 46%);
        color: black;
        top: 36px;
        height: 36px;
        border-radius: 3px;
        padding: 8px;
        cursor: pointer;
        transition: color 0.3s ease, background-color 0.3s ease, opacity 5.0s ease-in;
        visibility: hidden;
        opacity: 0;
      }
    </style>
    <noflo-main id="main" theme="[[theme]]" runtimes="{{ctx.runtimes}}" projects="{{ctx.projects}}" user="{{ctx.user}}" remote-projects="{{ctx.remoteProjects}}"></noflo-main>
    <the-graph-editor id="grapheditor" theme="[[theme]]" width="{{width}}" height="{{height}}" graph="{{ctx.graph}}" icons="[[ctx.icons]]"></the-graph-editor>
    <noflo-library id="library" search="{{ctx.search}}" project="{{ctx.project}}" graphs="{{ctx.graphs}}"></noflo-library>
    <noflo-context id="context" nodes="{{ctx.nodes}}" edges="{{ctx.edges}}" runtime="{{ctx.runtime}}" project="{{ctx.project}}" graphs="{{ctx.graphs}}" runtimes="{{ctx.runtimes}}" events="[[ctx.events]]"></noflo-context>
    <noflo-runtime id="runtime" runtime="{{ctx.runtime}}" runtimes="{{ctx.compatible}}" graph="{{ctx.graph}}" component="{{ctx.component}}"></noflo-runtime>
    <noflo-journal id="journal" db="{{ctx.db}}" theme="[[theme]]" graph="{{ctx.graph}}" component="{{ctx.component}}"></noflo-journal>
    <noflo-component-editor id="componenteditor" theme="[[theme]]" width="{{width}}" height="{{height}}" runtime="{{ctx.runtime}}" project="{{ctx.project}}" component="{{ctx.component}}"></noflo-component-editor>
    <noflo-search id="search" theme="[[theme]]" runtimes="{{ctx.runtimes}}" project="{{ctx.project}}" graph="{{ctx.graph}}" component="{{ctx.component}}" graphs="{{ctx.graphs}}"></noflo-search>
    <noflo-project id="project" runtimes="{{ctx.runtimes}}" graph="{{ctx.graph}}" project="{{ctx.project}}" component="{{ctx.component}}" runtime="{{ctx.runtime}}"></noflo-project>
    <noflo-packets id="packets" edges="[[ctx.edges]]" nodes="[[ctx.nodes]]" currentgraph="[[ctx.graph]]" packets="[[ctx.packets]]" events="[[ctx.events]]"></noflo-packets>
    <noflo-alert id="alert" on-click="hideAlert"></noflo-alert>
`,is:"noflo-ui",properties:{ctx:{type:Object,value:()=>({db:null,search:null,graph:null,component:null,graphs:[],project:null,projects:[],runtime:null,runtimes:[],compatibleRuntimes:[],packets:[],edges:[],nodes:[]})},theme:{type:String,value:"dark",notify:!0,observer:"themeChanged"},dontAutoHideAlert:{type:Boolean,value:!1},height:{value:()=>window.innerHeight,notify:!0},width:{value:()=>window.innerWidth,notify:!0}},clearContextFirst:["graphs","runtimes","projects","edges","nodes","compatibleRuntimes","remoteProjects"],emitEvent(e,t){this.fire(e,t)},ready(){this.$.main.addEventListener("userUpdated",e=>{this.emitEvent("user:update",e.detail)}),this.$.main.addEventListener("logout",()=>{this.emitEvent("user:logout",!0)}),this.$.main.addEventListener("login",()=>{this.emitEvent("user:login",{url:window.location.href,scopes:[]})}),this.$.main.addEventListener("relogin",e=>{this.emitEvent("user:login",{url:window.location.href,scopes:[e.detail]})}),this.$.main.addEventListener("fetchRemote",e=>{this.emitEvent("flowhub:projects:fetch",e.detail)}),this.$.main.addEventListener("downloadProject",e=>{this.emitEvent("application:sethash",["github",e.detail.org,e.detail.repo,"tree",e.detail.branch])}),this.$.main.addEventListener("fetchRuntimes",e=>{this.emitEvent("flowhub:runtimes:fetch",e.detail)}),this.$.main.addEventListener("newgraph",e=>{this.emitEvent("storage:save:graph",e.detail),this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&this.emitEvent("runtime:sendGraph",{runtime:this.ctx.runtime.definition.id,graph:e.detail,project:this.ctx.project})}),this.$.main.addEventListener("newruntime",e=>{this.emitEvent("flowhub:runtimes:register",e.detail)}),this.$.main.addEventListener("newproject",e=>{this.emitEvent("storage:save:project",e.detail)}),this.$.main.addEventListener("hash",e=>{this.emitEvent("application:sethash",e.detail)}),this.$.main.addEventListener("openProject",e=>{this.openProject(e.detail)}),this.$.context.addEventListener("newgraph",e=>{this.emitEvent("storage:save:graph",e.detail),this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&this.emitEvent("runtime:sendGraph",{runtime:this.ctx.runtime.definition.id,graph:e.detail,project:this.ctx.project})}),this.$.context.addEventListener("clear:runtimeevents",e=>{if(!this.ctx.runtime||!this.ctx.runtime.definition||!this.ctx.runtime.definition.id)return;const t=e.detail;t.runtime=this.ctx.runtime.definition.id,this.ctx.graph&&!t.all&&(t.graph=this.ctx.graph.name||this.ctx.graph.properties.id),delete t.all,this.emitEvent("runtime:clearevents",t)}),this.$.context.addEventListener("clear:runtimepackets",e=>{if(!this.ctx.runtime||!this.ctx.runtime.definition||!this.ctx.runtime.definition.id)return;const t=e.detail;t.runtime=this.ctx.runtime.definition.id,this.ctx.graph&&(t.graph=this.ctx.graph.name||this.ctx.graph.properties.id),this.emitEvent("runtime:clearpackets",t)}),this.$.runtime.addEventListener("switchRuntime",e=>{this.emitEvent("application:recreatestate",e.detail)}),this.$.runtime.addEventListener("changed",e=>{this.emitEvent("storage:save:runtime",e.detail)}),this.$.runtime.addEventListener("start",e=>{this.emitEvent("runtime:start",{runtime:e.detail.runtime,graph:e.detail.graph,project:this.ctx.project})}),this.$.runtime.addEventListener("stop",e=>{this.emitEvent("runtime:stop",{runtime:e.detail.runtime,graph:e.detail.graph,project:this.ctx.project})}),this.$.runtime.addEventListener("reconnect",e=>{this.emitEvent("runtime:reconnect",e.detail)}),this.$.grapheditor.addEventListener("edges",e=>{this.emitEvent("context:edges",e.detail)}),this.$.grapheditor.addEventListener("nodes",e=>{this.emitEvent("context:nodes",e.detail)}),this.$.grapheditor.addEventListener("changed",e=>{const t=e;t.detail.properties.changed=!0,this.emitEvent("storage:save:graph",t.detail)}),this.$.grapheditor.addEventListener("graphChanges",e=>{this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&(this.emitEvent("runtime:sendGraphChanges",{runtime:this.ctx.runtime.definition.id,graph:this.ctx.graph,changes:e.detail}),this.triggerTests())}),this.$.project.addEventListener("changed",e=>{this.emitEvent("storage:save:project",e.detail)}),this.$.project.addEventListener("newgraph",e=>{this.emitEvent("storage:save:graph",e.detail),this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&this.emitEvent("runtime:sendGraph",{runtime:this.ctx.runtime.definition.id,graph:e.detail,project:this.ctx.project})}),this.$.project.addEventListener("newcomponent",e=>{this.emitEvent("storage:save:component",e.detail),this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&this.emitEvent("runtime:sendComponent",{runtime:this.ctx.runtime.definition.id,component:e.detail})}),this.$.project.addEventListener("newspec",e=>{this.emitEvent("storage:save:spec",e.detail)}),this.$.project.addEventListener("sync",e=>{this.emitEvent("github:sync:prepare",e.detail)}),this.$.project.addEventListener("syncDecision",e=>{this.emitEvent("github:sync:synchronize",e.detail)}),this.$.project.addEventListener("deleteProject",e=>{this.emitEvent("application:sethash",[]),e.detail.graphs.forEach(e=>{this.emitEvent("storage:delete:graph",e)}),e.detail.components.forEach(e=>{this.emitEvent("storage:delete:component",e)}),e.detail.specs.forEach(e=>{this.emitEvent("storage:delete:spec",e)}),this.emitEvent("storage:delete:project",e.detail)}),this.$.project.addEventListener("hash",e=>{this.emitEvent("application:sethash",e.detail)}),this.$.main.addEventListener("deleteProject",e=>{this.emitEvent("application:sethash",[]),e.detail.graphs.forEach(e=>{this.emitEvent("storage:delete:graph",e)}),e.detail.components.forEach(e=>{this.emitEvent("storage:delete:component",e)}),e.detail.specs.forEach(e=>{this.emitEvent("storage:delete:spec",e)}),this.emitEvent("storage:delete:project",e.detail)}),this.$.main.addEventListener("deleteRuntime",e=>{this.emitEvent("flowhub:runtimes:remove",e.detail)}),this.$.main.addEventListener("deleteRepo",e=>{this.emitEvent("flowhub:projects:remove",e.detail),this.ctx.remoteProjects&&this.splice("ctx.remoteProjects",this.ctx.remoteProjects.indexOf(e.detail),1)}),this.$.componenteditor.addEventListener("changed",e=>{this.emitEvent("storage:save:component",e.detail),this.ctx.runtime&&this.ctx.runtime.definition&&this.ctx.runtime.definition.id&&(this.emitEvent("runtime:sendComponent",{runtime:this.ctx.runtime.definition.id,component:e.detail}),this.triggerTests())}),this.$.componenteditor.addEventListener("specschanged",e=>{this.emitEvent("storage:save:spec",e.detail),this.emitEvent("runtime:sendComponent",{runtime:this.ctx.runtime.definition.id,component:this.ctx.component}),this.triggerTests()}),this.$.search.addEventListener("search:library",e=>{this.emitEvent("context:search_library",e.detail)}),this.$.search.addEventListener("search:graph",e=>{this.emitEvent("context:search_graph",e.detail)}),this.$.search.addEventListener("hash",e=>{this.emitEvent("application:sethash",e.detail)}),this.$.library.addEventListener("result",e=>{this.emitEvent("context:search_library_result",{searchLibraryResult:e.detail})}),this.$.search.addEventListener("deleteGraph",e=>{const{project:t}=this.ctx;this.emitEvent("storage:delete:graph",e.detail),t&&-1!==t.graphs.indexOf(e.detail)&&this.splice("ctx.project.graphs",t.graphs.indexOf(e.detail),1),t.graphs.length||t.components.length?this.openProject(t):(this.emitEvent("storage:delete:project",t),this.emitEvent("application:sethash",[]))}),this.$.search.addEventListener("deleteComponent",e=>{const{project:t}=this.ctx;if(!t||!t.components)return;const r=e.detail,n=t.components.indexOf(r);-1!==n&&this.splice("ctx.project.components",n,1),this.emitEvent("storage:delete:component",r),t.graphs.length||t.components.length?this.openProject(t):(this.emitEvent("storage:delete:project",t),this.emitEvent("application:sethash",[]))}),this.$.search.addEventListener("specschanged",e=>{this.emitEvent("storage:save:spec",e.detail),this.triggerTests()}),this.set("$.library.editor",this.$.grapheditor),this.set("$.journal.editor",this.$.grapheditor),this.set("$.context.editor",this.$.grapheditor),this.set("$.packets.editor",this.$.grapheditor),this.set("$.search.editor",this.$.grapheditor),this.set("$.runtime.panel",this.$.context.$.fixed),this.set("$.packets.panel",this.$.context.$.contextsection),this.set("$.search.panel",this.$.context.$.contextsection)},updated(e){if(e.state)switch(e.state){case"error":this.showError(e);break;case"ok":this.hideAlertSoon();break;case"loading":this.showProgress(e)}if(Object.keys(e).forEach(t=>{if(-1===this.clearContextFirst.indexOf(t))this.set("ctx."+t,e[t]);else if(this.set("ctx."+t,e[t].slice(0)),"projects"===t)for(let e=0;e<this.ctx.projects.length;e+=1){const t=this.ctx.projects[e];this.set("ctx.projects."+e,{}),this.set("ctx.projects."+e,t),this.ctx.project&&this.ctx.project.id===t.id&&(this.set("ctx.project",{}),this.set("ctx.project",t))}}),e.user&&e.user["flowhub-theme"]&&(this.theme=e.user["flowhub-theme"]),e.searchLibraryResult&&this.$.search.libraryResults(this.ctx.searchLibraryResult),e.searchGraphResult&&this.$.search.graphResults(this.ctx.searchGraphResult),void 0===e.syncOperation){if(e.componentLibrary&&(Object.keys(this.$.grapheditor.$.graph.library).forEach(e=>{delete this.$.grapheditor.$.graph.library[e]}),e.componentLibrary.forEach(e=>{this.$.grapheditor.registerComponent(e)}),this.set("ctx.componentLibrary",null)),this.ctx.suites&&this.$.runtime.showTests(this.ctx.suites),"loading"!==this.ctx.state)if("error"!==this.ctx.state){if(e.graphs)if(e.graphs.length){const t=this.ctx.graph;this.set("ctx.graph",e.graphs[e.graphs.length-1]),t!==this.ctx.graph&&setTimeout(()=>{this.emitEvent("context:graph",{graph:this.ctx.graph})},1)}else this.set("ctx.graph",null);if(this.ctx.graph||this.ctx.component){this.set("$.main.open",!1);const e=kr.a.isReadOnly(this.ctx);this.set("$.search.readonly",e),this.set("$.grapheditor.readonly",e),this.set("$.context.readonly",e),this.set("$.packets.readonly",e)}else this.set("$.main.open",!0)}else this.showError(this.ctx)}else this.$.project.confirm(e.syncOperation)},showError(e){e.error&&e.error.message&&(this.set("$.alert.message",e.error.message),this.set("$.alert.isError",!0),this.set("$.alert.offerHTTPS",!1),Et(this.$.alert).classList.add("show"))},showProgress(e){(e.state||e.offerHTTPS)&&(this.set("$.alert.message",e.state||""),this.set("$.alert.isError",!1),this.set("$.alert.offerHTTPS",e.offerHTTPS||!1),this.dontAutoHideAlert=e.dontAutoHideAlert||!1,Et(this.$.alert).classList.add("show"))},triggerTests(){this.ctx.runtime&&this.emitEvent("runtime:runTests",{project:this.ctx.project,runtime:this.ctx.runtime.definition})},hideAlert(){Et(this.$.alert).classList.remove("show")},hideAlertSoon(){this.dontAutoHideAlert||Et(this.$.alert).classList.contains("show")&&window.setTimeout(()=>{this.hideAlert()},1300)},openProject(e){kr.a.getProjectHash(e,(e,t)=>{e||this.emitEvent("application:sethash",t)})},themeChanged(e,t){t&&Et(document.body).classList.remove(t),Et(document.body).classList.add(this.theme)}})}]);
//# sourceMappingURL=noflo-ui.min.js.map